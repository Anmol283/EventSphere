(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,163060,(e,t,n)=>{window,t.exports=function(){var e=[function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e){void 0===e&&(e="="),this._paddingCharacter=e}return e.prototype.encodedLength=function(e){return this._paddingCharacter?(e+2)/3*4|0:(8*e+5)/6|0},e.prototype.encode=function(e){for(var t="",n=0;n<e.length-2;n+=3){var i=e[n]<<16|e[n+1]<<8|e[n+2];t+=this._encodeByte(i>>>18&63),t+=this._encodeByte(i>>>12&63),t+=this._encodeByte(i>>>6&63),t+=this._encodeByte(i>>>0&63)}var r=e.length-n;if(r>0){var i=e[n]<<16|(2===r?e[n+1]<<8:0);t+=this._encodeByte(i>>>18&63),t+=this._encodeByte(i>>>12&63),2===r?t+=this._encodeByte(i>>>6&63):t+=this._paddingCharacter||"",t+=this._paddingCharacter||""}return t},e.prototype.maxDecodedLength=function(e){return this._paddingCharacter?e/4*3|0:(6*e+7)/8|0},e.prototype.decodedLength=function(e){return this.maxDecodedLength(e.length-this._getPaddingLength(e))},e.prototype.decode=function(e){if(0===e.length)return new Uint8Array(0);for(var t=this._getPaddingLength(e),n=e.length-t,i=new Uint8Array(this.maxDecodedLength(n)),r=0,o=0,s=0,a=0,c=0,l=0,u=0;o<n-4;o+=4)a=this._decodeChar(e.charCodeAt(o+0)),c=this._decodeChar(e.charCodeAt(o+1)),l=this._decodeChar(e.charCodeAt(o+2)),u=this._decodeChar(e.charCodeAt(o+3)),i[r++]=a<<2|c>>>4,i[r++]=c<<4|l>>>2,i[r++]=l<<6|u,s|=256&a,s|=256&c,s|=256&l,s|=256&u;if(o<n-1&&(a=this._decodeChar(e.charCodeAt(o)),c=this._decodeChar(e.charCodeAt(o+1)),i[r++]=a<<2|c>>>4,s|=256&a,s|=256&c),o<n-2&&(l=this._decodeChar(e.charCodeAt(o+2)),i[r++]=c<<4|l>>>2,s|=256&l),o<n-3&&(u=this._decodeChar(e.charCodeAt(o+3)),i[r++]=l<<6|u,s|=256&u),0!==s)throw Error("Base64Coder: incorrect characters for decoding");return i},e.prototype._encodeByte=function(e){var t=e;return t+=65,t+=25-e>>>8&6,t+=51-e>>>8&-75,t+=61-e>>>8&-15,String.fromCharCode(t+=62-e>>>8&3)},e.prototype._decodeChar=function(e){return 256+((42-e&e-44)>>>8&-256+e-43+62)+((46-e&e-48)>>>8&-256+e-47+63)+((47-e&e-58)>>>8&-256+e-48+52)+((64-e&e-91)>>>8&-256+e-65+0)+((96-e&e-123)>>>8&-256+e-97+26)},e.prototype._getPaddingLength=function(e){var t=0;if(this._paddingCharacter){for(var n=e.length-1;n>=0&&e[n]===this._paddingCharacter;n--)t++;if(e.length<4||t>2)throw Error("Base64Coder: incorrect padding")}return t},e}();t.Coder=o;var s=new o;t.encode=function(e){return s.encode(e)},t.decode=function(e){return s.decode(e)};var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype._encodeByte=function(e){var t=e;return t+=65,t+=25-e>>>8&6,t+=51-e>>>8&-75,t+=61-e>>>8&-13,String.fromCharCode(t+=62-e>>>8&49)},t.prototype._decodeChar=function(e){return 256+((44-e&e-46)>>>8&-256+e-45+62)+((94-e&e-96)>>>8&-256+e-95+63)+((47-e&e-58)>>>8&-256+e-48+52)+((64-e&e-91)>>>8&-256+e-65+0)+((96-e&e-123)>>>8&-256+e-97+26)},t}(o);t.URLSafeCoder=a;var c=new a;t.encodeURLSafe=function(e){return c.encode(e)},t.decodeURLSafe=function(e){return c.decode(e)},t.encodedLength=function(e){return s.encodedLength(e)},t.maxDecodedLength=function(e){return s.maxDecodedLength(e)},t.decodedLength=function(e){return s.decodedLength(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="utf8: invalid string",r="utf8: invalid source encoding";function o(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<128)t+=1;else if(r<2048)t+=2;else if(r<55296)t+=3;else if(r<=57343){if(n>=e.length-1)throw Error(i);n++,t+=4}else throw Error(i)}return t}t.encode=function(e){for(var t=new Uint8Array(o(e)),n=0,i=0;i<e.length;i++){var r=e.charCodeAt(i);r<128?t[n++]=r:(r<2048?t[n++]=192|r>>6:(r<55296?t[n++]=224|r>>12:(i++,r=((1023&r)<<10|1023&e.charCodeAt(i))+65536,t[n++]=240|r>>18,t[n++]=128|r>>12&63),t[n++]=128|r>>6&63),t[n++]=128|63&r)}return t},t.encodedLength=o,t.decode=function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];if(128&i){var o=void 0;if(i<224){if(n>=e.length)throw Error(r);var s=e[++n];if((192&s)!=128)throw Error(r);i=(31&i)<<6|63&s,o=128}else if(i<240){if(n>=e.length-1)throw Error(r);var s=e[++n],a=e[++n];if((192&s)!=128||(192&a)!=128)throw Error(r);i=(15&i)<<12|(63&s)<<6|63&a,o=2048}else if(i<248){if(n>=e.length-2)throw Error(r);var s=e[++n],a=e[++n],c=e[++n];if((192&s)!=128||(192&a)!=128||(192&c)!=128)throw Error(r);i=(15&i)<<18|(63&s)<<12|(63&a)<<6|63&c,o=65536}else throw Error(r);if(i<o||i>=55296&&i<=57343)throw Error(r);if(i>=65536){if(i>1114111)throw Error(r);i-=65536,t.push(String.fromCharCode(55296|i>>10)),i=56320|1023&i}}t.push(String.fromCharCode(i))}return t.join("")}},function(e,t,n){e.exports=n(3).default},function(e,t,n){"use strict";n.r(t);for(var i,r,o,s,a,c,l,u,d,h,p,f,m,g,v,y=function(){function e(e,t){this.lastId=0,this.prefix=e,this.name=t}return e.prototype.create=function(e){this.lastId++;var t=this.lastId,n=this.prefix+t,i=this.name+"["+t+"]",r=!1,o=function(){r||(e.apply(null,arguments),r=!0)};return this[t]=o,{number:t,id:n,name:i,callback:o}},e.prototype.remove=function(e){delete this[e.number]},e}(),b=new y("_pusher_script_","Pusher.ScriptReceivers"),x="7.0.3",w=function(){function e(e){this.options=e,this.receivers=e.receivers||b,this.loading={}}return e.prototype.load=function(e,t,n){var i=this;if(i.loading[e]&&i.loading[e].length>0)i.loading[e].push(n);else{i.loading[e]=[n];var r=tf.createScriptRequest(i.getPath(e,t)),o=i.receivers.create(function(t){if(i.receivers.remove(o),i.loading[e]){var n=i.loading[e];delete i.loading[e];for(var s=function(e){e||r.cleanup()},a=0;a<n.length;a++)n[a](t,s)}});r.send(o)}},e.prototype.getRoot=function(e){var t,n=tf.getDocument().location.protocol;return(e&&e.useTLS||"https:"===n?this.options.cdn_https:this.options.cdn_http).replace(/\/*$/,"")+"/"+this.options.version},e.prototype.getPath=function(e,t){return this.getRoot(t)+"/"+e+this.options.suffix+".js"},e}(),C=new y("_pusher_dependencies","Pusher.DependenciesReceivers"),j=new w({cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",version:x,suffix:"",receivers:C}),S={authenticationEndpoint:{path:"/docs/authenticating_users"},javascriptQuickStart:{path:"/docs/javascript_quick_start"},triggeringClientEvents:{path:"/docs/client_api_guide/client_events#trigger-events"},encryptedChannelSupport:{fullUrl:"https://github.com/pusher/pusher-js/tree/cc491015371a4bde5743d1c87a0fbac0feb53195#encrypted-channel-support"}},k=function(e){var t,n=S[e];return n&&(n.fullUrl?t=n.fullUrl:n.path&&(t="https://pusher.com"+n.path),t)?"See: "+t:""},M=(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),T=function(e){function t(t){var n=this.constructor,i=e.call(this,t)||this;return Object.setPrototypeOf(i,n.prototype),i}return M(t,e),t}(Error),_=function(e){function t(t){var n=this.constructor,i=e.call(this,t)||this;return Object.setPrototypeOf(i,n.prototype),i}return M(t,e),t}(Error),I=function(e){function t(t){var n=this.constructor,i=e.call(this,t)||this;return Object.setPrototypeOf(i,n.prototype),i}return M(t,e),t}(Error),P=function(e){function t(t){var n=this.constructor,i=e.call(this,t)||this;return Object.setPrototypeOf(i,n.prototype),i}return M(t,e),t}(Error),L=function(e){function t(t){var n=this.constructor,i=e.call(this,t)||this;return Object.setPrototypeOf(i,n.prototype),i}return M(t,e),t}(Error),N=function(e){function t(t){var n=this.constructor,i=e.call(this,t)||this;return Object.setPrototypeOf(i,n.prototype),i}return M(t,e),t}(Error),A=function(e){function t(t){var n=this.constructor,i=e.call(this,t)||this;return Object.setPrototypeOf(i,n.prototype),i}return M(t,e),t}(Error),E=function(e){function t(t,n){var i=this.constructor,r=e.call(this,n)||this;return r.status=t,Object.setPrototypeOf(r,i.prototype),r}return M(t,e),t}(Error),O=function(e,t,n){var i,r=this;for(var o in(i=tf.createXHR()).open("POST",r.options.authEndpoint,!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),this.authOptions.headers)i.setRequestHeader(o,this.authOptions.headers[o]);return i.onreadystatechange=function(){if(4===i.readyState)if(200===i.status){var e=void 0,t=!1;try{e=JSON.parse(i.responseText),t=!0}catch(e){n(new E(200,"JSON returned from auth endpoint was invalid, yet status code was 200. Data was: "+i.responseText),{auth:""})}t&&n(null,e)}else{var o=k("authenticationEndpoint");n(new E(i.status,"Unable to retrieve auth string from auth endpoint - "+("received status: "+i.status+" from ")+r.options.authEndpoint+". Clients must be authenticated to join private or presence channels. "+o),{auth:""})}},i.send(this.composeQuery(t)),i},R=String.fromCharCode,D="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",F={},H=0,B=D.length;H<B;H++)F[D.charAt(H)]=H;var z=function(e){var t=e.charCodeAt(0);return t<128?e:t<2048?R(192|t>>>6)+R(128|63&t):R(224|t>>>12&15)+R(128|t>>>6&63)+R(128|63&t)},V=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[D.charAt(n>>>18),D.charAt(n>>>12&63),t>=2?"=":D.charAt(n>>>6&63),t>=1?"=":D.charAt(63&n)].join("")},U=window.btoa||function(e){return e.replace(/[\s\S]{1,3}/g,V)},q=function(){function e(e,t,n,i){var r=this;this.clear=t,this.timer=e(function(){r.timer&&(r.timer=i(r.timer))},n)}return e.prototype.isRunning=function(){return null!==this.timer},e.prototype.ensureAborted=function(){this.timer&&(this.clear(this.timer),this.timer=null)},e}(),X=(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});function W(e){window.clearTimeout(e)}function K(e){window.clearInterval(e)}var Z=function(e){function t(t,n){return e.call(this,setTimeout,W,t,function(e){return n(),null})||this}return X(t,e),t}(q),J=function(e){function t(t,n){return e.call(this,setInterval,K,t,function(e){return n(),e})||this}return X(t,e),t}(q),Y=function(){return Date.now?Date.now():new Date().valueOf()},G=function(e){return new Z(0,e)},Q=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=Array.prototype.slice.call(arguments,1);return function(t){return t[e].apply(t,i.concat(arguments))}};function $(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var i=0;i<t.length;i++){var r=t[i];for(var o in r)r[o]&&r[o].constructor&&r[o].constructor===Object?e[o]=$(e[o]||{},r[o]):e[o]=r[o]}return e}function ee(){for(var e=["Pusher"],t=0;t<arguments.length;t++)"string"==typeof arguments[t]?e.push(arguments[t]):e.push(el(arguments[t]));return e.join(" : ")}function et(e,t){var n=Array.prototype.indexOf;if(null===e)return -1;if(n&&e.indexOf===n)return e.indexOf(t);for(var i=0,r=e.length;i<r;i++)if(e[i]===t)return i;return -1}function en(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(e[n],n,e)}function ei(e){var t=[];return en(e,function(e,n){t.push(n)}),t}function er(e,t,n){for(var i=0;i<e.length;i++)t.call(n||window,e[i],i,e)}function eo(e,t){for(var n=[],i=0;i<e.length;i++)n.push(t(e[i],i,e,n));return n}function es(e,t){t=t||function(e){return!!e};for(var n=[],i=0;i<e.length;i++)t(e[i],i,e,n)&&n.push(e[i]);return n}function ea(e,t){var n={};return en(e,function(i,r){(t&&t(i,r,e,n)||i)&&(n[r]=i)}),n}function ec(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n,e))return!0;return!1}function el(e){try{return JSON.stringify(e)}catch(i){var t,n;return JSON.stringify((t=[],n=[],function e(i,r){var o,s,a;switch(typeof i){case"object":if(!i)return null;for(o=0;o<t.length;o+=1)if(t[o]===i)return{$ref:n[o]};if(t.push(i),n.push(r),"[object Array]"===Object.prototype.toString.apply(i))for(o=0,a=[];o<i.length;o+=1)a[o]=e(i[o],r+"["+o+"]");else for(s in a={},i)Object.prototype.hasOwnProperty.call(i,s)&&(a[s]=e(i[s],r+"["+JSON.stringify(s)+"]"));return a;case"number":case"string":case"boolean":return i}}(e,"$")))}}var eu=new(function(){function e(){this.globalLog=function(e){window.console&&window.console.log&&window.console.log(e)}}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.log(this.globalLog,e)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.log(this.globalLogWarn,e)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.log(this.globalLogError,e)},e.prototype.globalLogWarn=function(e){window.console&&window.console.warn?window.console.warn(e):this.globalLog(e)},e.prototype.globalLogError=function(e){window.console&&window.console.error?window.console.error(e):this.globalLogWarn(e)},e.prototype.log=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=ee.apply(this,arguments);tS.log?tS.log(i):tS.logToConsole&&e.bind(this)(i)},e}()),ed=function(e,t,n){void 0!==this.authOptions.headers&&eu.warn("To send headers with the auth request, you must use AJAX, rather than JSONP.");var i=e.nextAuthCallbackID.toString();e.nextAuthCallbackID++;var r=e.getDocument(),o=r.createElement("script");e.auth_callbacks[i]=function(e){n(null,e)},o.src=this.options.authEndpoint+"?callback="+encodeURIComponent("Pusher.auth_callbacks['"+i+"']")+"&"+this.composeQuery(t);var s=r.getElementsByTagName("head")[0]||r.documentElement;s.insertBefore(o,s.firstChild)},eh=function(){function e(e){this.src=e}return e.prototype.send=function(e){var t=this,n="Error loading "+t.src;t.script=document.createElement("script"),t.script.id=e.id,t.script.src=t.src,t.script.type="text/javascript",t.script.charset="UTF-8",t.script.addEventListener?(t.script.onerror=function(){e.callback(n)},t.script.onload=function(){e.callback(null)}):t.script.onreadystatechange=function(){("loaded"===t.script.readyState||"complete"===t.script.readyState)&&e.callback(null)},void 0===t.script.async&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(t.errorScript=document.createElement("script"),t.errorScript.id=e.id+"_error",t.errorScript.text=e.name+"('"+n+"');",t.script.async=t.errorScript.async=!1):t.script.async=!0;var i=document.getElementsByTagName("head")[0];i.insertBefore(t.script,i.firstChild),t.errorScript&&i.insertBefore(t.errorScript,t.script.nextSibling)},e.prototype.cleanup=function(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null},e}(),ep=function(){function e(e,t){this.url=e,this.data=t}return e.prototype.send=function(e){if(!this.request){var t,n,i,r,o=eo((t=ea(this.data,function(e){return void 0!==e}),n=function(e){return"object"==typeof e&&(e=el(e)),encodeURIComponent(U(e.toString().replace(/[^\x00-\x7F]/g,z)))},i={},en(t,function(e,t){i[t]=n(e)}),r=[],en(i,function(e,t){r.push([t,e])}),r),Q("join","=")).join("&"),s=this.url+"/"+e.number+"?"+o;this.request=tf.createScriptRequest(s),this.request.send(e)}},e.prototype.cleanup=function(){this.request&&this.request.cleanup()},e}();function ef(e,t,n){return e+(t.useTLS?"s":"")+"://"+(t.useTLS?t.hostTLS:t.hostNonTLS)+n}function em(e,t){return"/app/"+e+"?protocol=7&client=js&version="+x+(t?"&"+t:"")}var eg=function(){function e(){this._callbacks={}}return e.prototype.get=function(e){return this._callbacks["_"+e]},e.prototype.add=function(e,t,n){var i="_"+e;this._callbacks[i]=this._callbacks[i]||[],this._callbacks[i].push({fn:t,context:n})},e.prototype.remove=function(e,t,n){if(!e&&!t&&!n){this._callbacks={};return}var i=e?["_"+e]:ei(this._callbacks);t||n?this.removeCallback(i,t,n):this.removeAllCallbacks(i)},e.prototype.removeCallback=function(e,t,n){er(e,function(e){this._callbacks[e]=es(this._callbacks[e]||[],function(e){return t&&t!==e.fn||n&&n!==e.context}),0===this._callbacks[e].length&&delete this._callbacks[e]},this)},e.prototype.removeAllCallbacks=function(e){er(e,function(e){delete this._callbacks[e]},this)},e}(),ev=function(){function e(e){this.callbacks=new eg,this.global_callbacks=[],this.failThrough=e}return e.prototype.bind=function(e,t,n){return this.callbacks.add(e,t,n),this},e.prototype.bind_global=function(e){return this.global_callbacks.push(e),this},e.prototype.unbind=function(e,t,n){return this.callbacks.remove(e,t,n),this},e.prototype.unbind_global=function(e){return e?this.global_callbacks=es(this.global_callbacks||[],function(t){return t!==e}):this.global_callbacks=[],this},e.prototype.unbind_all=function(){return this.unbind(),this.unbind_global(),this},e.prototype.emit=function(e,t,n){for(var i=0;i<this.global_callbacks.length;i++)this.global_callbacks[i](e,t);var r=this.callbacks.get(e),o=[];if(n?o.push(t,n):t&&o.push(t),r&&r.length>0)for(var i=0;i<r.length;i++)r[i].fn.apply(r[i].context||window,o);else this.failThrough&&this.failThrough(e,t);return this},e}(),ey=(o=function(e,t){return(o=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),eb=function(e){function t(t,n,i,r,o){var s=e.call(this)||this;return s.initialize=tf.transportConnectionInitializer,s.hooks=t,s.name=n,s.priority=i,s.key=r,s.options=o,s.state="new",s.timeline=o.timeline,s.activityTimeout=o.activityTimeout,s.id=s.timeline.generateUniqueID(),s}return ey(t,e),t.prototype.handlesActivityChecks=function(){return!!this.hooks.handlesActivityChecks},t.prototype.supportsPing=function(){return!!this.hooks.supportsPing},t.prototype.connect=function(){var e=this;if(this.socket||"initialized"!==this.state)return!1;var t=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(t,this.options)}catch(t){return G(function(){e.onError(t),e.changeState("closed")}),!1}return this.bindListeners(),eu.debug("Connecting",{transport:this.name,url:t}),this.changeState("connecting"),!0},t.prototype.close=function(){return!!this.socket&&(this.socket.close(),!0)},t.prototype.send=function(e){var t=this;return"open"===this.state&&(G(function(){t.socket&&t.socket.send(e)}),!0)},t.prototype.ping=function(){"open"===this.state&&this.supportsPing()&&this.socket.ping()},t.prototype.onOpen=function(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0},t.prototype.onError=function(e){this.emit("error",{type:"WebSocketError",error:e}),this.timeline.error(this.buildTimelineMessage({error:e.toString()}))},t.prototype.onClose=function(e){e?this.changeState("closed",{code:e.code,reason:e.reason,wasClean:e.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0},t.prototype.onMessage=function(e){this.emit("message",e)},t.prototype.onActivity=function(){this.emit("activity")},t.prototype.bindListeners=function(){var e=this;this.socket.onopen=function(){e.onOpen()},this.socket.onerror=function(t){e.onError(t)},this.socket.onclose=function(t){e.onClose(t)},this.socket.onmessage=function(t){e.onMessage(t)},this.supportsPing()&&(this.socket.onactivity=function(){e.onActivity()})},t.prototype.unbindListeners=function(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))},t.prototype.changeState=function(e,t){this.state=e,this.timeline.info(this.buildTimelineMessage({state:e,params:t})),this.emit(e,t)},t.prototype.buildTimelineMessage=function(e){return $({cid:this.id},e)},t}(ev),ex=function(){function e(e){this.hooks=e}return e.prototype.isSupported=function(e){return this.hooks.isSupported(e)},e.prototype.createConnection=function(e,t,n,i){return new eb(this.hooks,e,t,n,i)},e}(),ew=new ex({urls:{getInitial:function(e,t){var n=(t.httpPath||"")+em(e,"flash=false");return ef("ws",t,n)}},handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return!!tf.getWebSocketAPI()},isSupported:function(){return!!tf.getWebSocketAPI()},getSocket:function(e){return tf.createWebSocket(e)}}),eC={urls:{getInitial:function(e,t){var n=(t.httpPath||"/pusher")+em(e);return ef("http",t,n)}},handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}},ej=$({getSocket:function(e){return tf.HTTPFactory.createStreamingSocket(e)}},eC),eS=$({getSocket:function(e){return tf.HTTPFactory.createPollingSocket(e)}},eC),ek={isSupported:function(){return tf.isXHRSupported()}},eM={ws:ew,xhr_streaming:new ex($({},ej,ek)),xhr_polling:new ex($({},eS,ek))},eT=new ex({file:"sockjs",urls:{getInitial:function(e,t){return ef("http",t,t.httpPath||"/pusher")},getPath:function(e,t){return em(e)}},handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return void 0!==window.SockJS},getSocket:function(e,t){return new window.SockJS(e,null,{js_path:j.getPath("sockjs",{useTLS:t.useTLS}),ignore_null_origin:t.ignoreNullOrigin})},beforeOpen:function(e,t){e.send(JSON.stringify({path:t}))}}),e_={isSupported:function(e){return tf.isXDRSupported(e.useTLS)}},eI=new ex($({},ej,e_)),eP=new ex($({},eS,e_));eM.xdr_streaming=eI,eM.xdr_polling=eP,eM.sockjs=eT;var eL=(s=function(e,t){return(s=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),eN=new(function(e){function t(){var t=e.call(this)||this;return void 0!==window.addEventListener&&(window.addEventListener("online",function(){t.emit("online")},!1),window.addEventListener("offline",function(){t.emit("offline")},!1)),t}return eL(t,e),t.prototype.isOnline=function(){return void 0===window.navigator.onLine||window.navigator.onLine},t}(ev)),eA=function(){function e(e,t,n){this.manager=e,this.transport=t,this.minPingDelay=n.minPingDelay,this.maxPingDelay=n.maxPingDelay,this.pingDelay=void 0}return e.prototype.createConnection=function(e,t,n,i){var r=this;i=$({},i,{activityTimeout:this.pingDelay});var o=this.transport.createConnection(e,t,n,i),s=null,a=function(){o.unbind("open",a),o.bind("closed",c),s=Y()},c=function(e){if(o.unbind("closed",c),1002===e.code||1003===e.code)r.manager.reportDeath();else if(!e.wasClean&&s){var t=Y()-s;t<2*r.maxPingDelay&&(r.manager.reportDeath(),r.pingDelay=Math.max(t/2,r.minPingDelay))}};return o.bind("open",a),o},e.prototype.isSupported=function(e){return this.manager.isAlive()&&this.transport.isSupported(e)},e}(),eE={decodeMessage:function(e){try{var t=JSON.parse(e.data),n=t.data;if("string"==typeof n)try{n=JSON.parse(t.data)}catch(e){}var i={event:t.event,channel:t.channel,data:n};return t.user_id&&(i.user_id=t.user_id),i}catch(t){throw{type:"MessageParseError",error:t,data:e.data}}},encodeMessage:function(e){return JSON.stringify(e)},processHandshake:function(e){var t=eE.decodeMessage(e);if("pusher:connection_established"===t.event){if(!t.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:t.data.socket_id,activityTimeout:1e3*t.data.activity_timeout}}if("pusher:error"===t.event)return{action:this.getCloseAction(t.data),error:this.getCloseError(t.data)};throw"Invalid handshake"},getCloseAction:function(e){if(e.code<4e3)if(e.code>=1002&&e.code<=1004)return"backoff";else return null;if(4e3===e.code)return"tls_only";if(e.code<4100)return"refused";if(e.code<4200)return"backoff";if(e.code<4300)return"retry";else return"refused"},getCloseError:function(e){return 1e3!==e.code&&1001!==e.code?{type:"PusherError",data:{code:e.code,message:e.reason||e.message}}:null}},eO=(a=function(e,t){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),eR=function(e){function t(t,n){var i=e.call(this)||this;return i.id=t,i.transport=n,i.activityTimeout=n.activityTimeout,i.bindListeners(),i}return eO(t,e),t.prototype.handlesActivityChecks=function(){return this.transport.handlesActivityChecks()},t.prototype.send=function(e){return this.transport.send(e)},t.prototype.send_event=function(e,t,n){var i={event:e,data:t};return n&&(i.channel=n),eu.debug("Event sent",i),this.send(eE.encodeMessage(i))},t.prototype.ping=function(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})},t.prototype.close=function(){this.transport.close()},t.prototype.bindListeners=function(){var e=this,t={message:function(t){var n;try{n=eE.decodeMessage(t)}catch(n){e.emit("error",{type:"MessageParseError",error:n,data:t.data})}if(void 0!==n){switch(eu.debug("Event recd",n),n.event){case"pusher:error":e.emit("error",{type:"PusherError",data:n.data});break;case"pusher:ping":e.emit("ping");break;case"pusher:pong":e.emit("pong")}e.emit("message",n)}},activity:function(){e.emit("activity")},error:function(t){e.emit("error",t)},closed:function(t){n(),t&&t.code&&e.handleCloseEvent(t),e.transport=null,e.emit("closed")}},n=function(){en(t,function(t,n){e.transport.unbind(n,t)})};en(t,function(t,n){e.transport.bind(n,t)})},t.prototype.handleCloseEvent=function(e){var t=eE.getCloseAction(e),n=eE.getCloseError(e);n&&this.emit("error",n),t&&this.emit(t,{action:t,error:n})},t}(ev),eD=function(){function e(e,t){this.transport=e,this.callback=t,this.bindListeners()}return e.prototype.close=function(){this.unbindListeners(),this.transport.close()},e.prototype.bindListeners=function(){var e=this;this.onMessage=function(t){var n;e.unbindListeners();try{n=eE.processHandshake(t)}catch(t){e.finish("error",{error:t}),e.transport.close();return}"connected"===n.action?e.finish("connected",{connection:new eR(n.id,e.transport),activityTimeout:n.activityTimeout}):(e.finish(n.action,{error:n.error}),e.transport.close())},this.onClosed=function(t){e.unbindListeners();var n=eE.getCloseAction(t)||"backoff",i=eE.getCloseError(t);e.finish(n,{error:i})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)},e.prototype.unbindListeners=function(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)},e.prototype.finish=function(e,t){this.callback($({transport:this.transport,action:e},t))},e}(),eF=function(){function e(e,t){this.channel=e;var n=t.authTransport;if(void 0===tf.getAuthorizers()[n])throw"'"+n+"' is not a recognized auth transport";this.type=n,this.options=t,this.authOptions=t.auth||{}}return e.prototype.composeQuery=function(e){var t="socket_id="+encodeURIComponent(e)+"&channel_name="+encodeURIComponent(this.channel.name);for(var n in this.authOptions.params)t+="&"+encodeURIComponent(n)+"="+encodeURIComponent(this.authOptions.params[n]);return t},e.prototype.authorize=function(t,n){e.authorizers=e.authorizers||tf.getAuthorizers(),e.authorizers[this.type].call(this,tf,t,n)},e}(),eH=function(){function e(e,t){this.timeline=e,this.options=t||{}}return e.prototype.send=function(e,t){this.timeline.isEmpty()||this.timeline.send(tf.TimelineTransport.getAgent(this,e),t)},e}(),eB=(c=function(e,t){return(c=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),ez=function(e){function t(t,n){var i=e.call(this,function(e,n){eu.debug("No callbacks on "+t+" for "+e)})||this;return i.name=t,i.pusher=n,i.subscribed=!1,i.subscriptionPending=!1,i.subscriptionCancelled=!1,i}return eB(t,e),t.prototype.authorize=function(e,t){return t(null,{auth:""})},t.prototype.trigger=function(e,t){if(0!==e.indexOf("client-"))throw new T("Event '"+e+"' does not start with 'client-'");if(!this.subscribed){var n=k("triggeringClientEvents");eu.warn("Client event triggered before channel 'subscription_succeeded' event . "+n)}return this.pusher.send_event(e,t,this.name)},t.prototype.disconnect=function(){this.subscribed=!1,this.subscriptionPending=!1},t.prototype.handleEvent=function(e){var t=e.event,n=e.data;"pusher_internal:subscription_succeeded"===t?this.handleSubscriptionSucceededEvent(e):0!==t.indexOf("pusher_internal:")&&this.emit(t,n,{})},t.prototype.handleSubscriptionSucceededEvent=function(e){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",e.data)},t.prototype.subscribe=function(){var e=this;this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,function(t,n){t?(e.subscriptionPending=!1,eu.error(t.toString()),e.emit("pusher:subscription_error",Object.assign({},{type:"AuthError",error:t.message},t instanceof E?{status:t.status}:{}))):e.pusher.send_event("pusher:subscribe",{auth:n.auth,channel_data:n.channel_data,channel:e.name})}))},t.prototype.unsubscribe=function(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})},t.prototype.cancelSubscription=function(){this.subscriptionCancelled=!0},t.prototype.reinstateSubscription=function(){this.subscriptionCancelled=!1},t}(ev),eV=(l=function(e,t){return(l=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),eU=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return eV(t,e),t.prototype.authorize=function(e,t){return e0.createAuthorizer(this,this.pusher.config).authorize(e,t)},t}(ez),eq=function(){function e(){this.reset()}return e.prototype.get=function(e){return Object.prototype.hasOwnProperty.call(this.members,e)?{id:e,info:this.members[e]}:null},e.prototype.each=function(e){var t=this;en(this.members,function(n,i){e(t.get(i))})},e.prototype.setMyID=function(e){this.myID=e},e.prototype.onSubscription=function(e){this.members=e.presence.hash,this.count=e.presence.count,this.me=this.get(this.myID)},e.prototype.addMember=function(e){return null===this.get(e.user_id)&&this.count++,this.members[e.user_id]=e.user_info,this.get(e.user_id)},e.prototype.removeMember=function(e){var t=this.get(e.user_id);return t&&(delete this.members[e.user_id],this.count--),t},e.prototype.reset=function(){this.members={},this.count=0,this.myID=null,this.me=null},e}(),eX=(u=function(e,t){return(u=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}u(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),eW=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.members=new eq,i}return eX(t,e),t.prototype.authorize=function(t,n){var i=this;e.prototype.authorize.call(this,t,function(e,t){if(!e){if(void 0===t.channel_data){var r=k("authenticationEndpoint");eu.error("Invalid auth response for channel '"+i.name+"',expected 'channel_data' field. "+r),n("Invalid auth response");return}var o=JSON.parse(t.channel_data);i.members.setMyID(o.user_id)}n(e,t)})},t.prototype.handleEvent=function(e){var t=e.event;if(0===t.indexOf("pusher_internal:"))this.handleInternalEvent(e);else{var n=e.data,i={};e.user_id&&(i.user_id=e.user_id),this.emit(t,n,i)}},t.prototype.handleInternalEvent=function(e){var t=e.event,n=e.data;switch(t){case"pusher_internal:subscription_succeeded":this.handleSubscriptionSucceededEvent(e);break;case"pusher_internal:member_added":var i=this.members.addMember(n);this.emit("pusher:member_added",i);break;case"pusher_internal:member_removed":var r=this.members.removeMember(n);r&&this.emit("pusher:member_removed",r)}},t.prototype.handleSubscriptionSucceededEvent=function(e){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(e.data),this.emit("pusher:subscription_succeeded",this.members))},t.prototype.disconnect=function(){this.members.reset(),e.prototype.disconnect.call(this)},t}(eU),eK=n(1),eZ=n(0),eJ=(d=function(e,t){return(d=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}d(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),eY=function(e){function t(t,n,i){var r=e.call(this,t,n)||this;return r.key=null,r.nacl=i,r}return eJ(t,e),t.prototype.authorize=function(t,n){var i=this;e.prototype.authorize.call(this,t,function(e,t){if(e)return void n(e,t);var r=t.shared_secret;if(!r)return void n(Error("No shared_secret key in auth payload for encrypted channel: "+i.name),null);i.key=Object(eZ.decode)(r),delete t.shared_secret,n(null,t)})},t.prototype.trigger=function(e,t){throw new L("Client events are not currently supported for encrypted channels")},t.prototype.handleEvent=function(t){var n=t.event,i=t.data;if(0===n.indexOf("pusher_internal:")||0===n.indexOf("pusher:"))return void e.prototype.handleEvent.call(this,t);this.handleEncryptedEvent(n,i)},t.prototype.handleEncryptedEvent=function(e,t){var n=this;if(!this.key)return void eu.debug("Received encrypted event before key has been retrieved from the authEndpoint");if(!t.ciphertext||!t.nonce)return void eu.error("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: "+t);var i=Object(eZ.decode)(t.ciphertext);if(i.length<this.nacl.secretbox.overheadLength)return void eu.error("Expected encrypted event ciphertext length to be "+this.nacl.secretbox.overheadLength+", got: "+i.length);var r=Object(eZ.decode)(t.nonce);if(r.length<this.nacl.secretbox.nonceLength)return void eu.error("Expected encrypted event nonce length to be "+this.nacl.secretbox.nonceLength+", got: "+r.length);var o=this.nacl.secretbox.open(i,r,this.key);if(null===o){eu.debug("Failed to decrypt an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint..."),this.authorize(this.pusher.connection.socket_id,function(t,s){return t?void eu.error("Failed to make a request to the authEndpoint: "+s+". Unable to fetch new key, so dropping encrypted event"):null===(o=n.nacl.secretbox.open(i,r,n.key))?void eu.error("Failed to decrypt event with new key. Dropping encrypted event"):void n.emit(e,n.getDataToEmit(o))});return}this.emit(e,this.getDataToEmit(o))},t.prototype.getDataToEmit=function(e){var t=Object(eK.decode)(e);try{return JSON.parse(t)}catch(e){return t}},t}(eU),eG=(h=function(e,t){return(h=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}h(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),eQ=function(e){function t(t,n){var i=e.call(this)||this;i.state="initialized",i.connection=null,i.key=t,i.options=n,i.timeline=i.options.timeline,i.usingTLS=i.options.useTLS,i.errorCallbacks=i.buildErrorCallbacks(),i.connectionCallbacks=i.buildConnectionCallbacks(i.errorCallbacks),i.handshakeCallbacks=i.buildHandshakeCallbacks(i.errorCallbacks);var r=tf.getNetwork();return r.bind("online",function(){i.timeline.info({netinfo:"online"}),("connecting"===i.state||"unavailable"===i.state)&&i.retryIn(0)}),r.bind("offline",function(){i.timeline.info({netinfo:"offline"}),i.connection&&i.sendActivityCheck()}),i.updateStrategy(),i}return eG(t,e),t.prototype.connect=function(){if(!this.connection&&!this.runner){if(!this.strategy.isSupported())return void this.updateState("failed");this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()}},t.prototype.send=function(e){return!!this.connection&&this.connection.send(e)},t.prototype.send_event=function(e,t,n){return!!this.connection&&this.connection.send_event(e,t,n)},t.prototype.disconnect=function(){this.disconnectInternally(),this.updateState("disconnected")},t.prototype.isUsingTLS=function(){return this.usingTLS},t.prototype.startConnecting=function(){var e=this,t=function(n,i){n?e.runner=e.strategy.connect(0,t):"error"===i.action?(e.emit("error",{type:"HandshakeError",error:i.error}),e.timeline.error({handshakeError:i.error})):(e.abortConnecting(),e.handshakeCallbacks[i.action](i))};this.runner=this.strategy.connect(0,t)},t.prototype.abortConnecting=function(){this.runner&&(this.runner.abort(),this.runner=null)},t.prototype.disconnectInternally=function(){this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection&&this.abandonConnection().close()},t.prototype.updateStrategy=function(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,useTLS:this.usingTLS})},t.prototype.retryIn=function(e){var t=this;this.timeline.info({action:"retry",delay:e}),e>0&&this.emit("connecting_in",Math.round(e/1e3)),this.retryTimer=new Z(e||0,function(){t.disconnectInternally(),t.connect()})},t.prototype.clearRetryTimer=function(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)},t.prototype.setUnavailableTimer=function(){var e=this;this.unavailableTimer=new Z(this.options.unavailableTimeout,function(){e.updateState("unavailable")})},t.prototype.clearUnavailableTimer=function(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()},t.prototype.sendActivityCheck=function(){var e=this;this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new Z(this.options.pongTimeout,function(){e.timeline.error({pong_timed_out:e.options.pongTimeout}),e.retryIn(0)})},t.prototype.resetActivityCheck=function(){var e=this;this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new Z(this.activityTimeout,function(){e.sendActivityCheck()}))},t.prototype.stopActivityCheck=function(){this.activityTimer&&this.activityTimer.ensureAborted()},t.prototype.buildConnectionCallbacks=function(e){var t=this;return $({},e,{message:function(e){t.resetActivityCheck(),t.emit("message",e)},ping:function(){t.send_event("pusher:pong",{})},activity:function(){t.resetActivityCheck()},error:function(e){t.emit("error",e)},closed:function(){t.abandonConnection(),t.shouldRetry()&&t.retryIn(1e3)}})},t.prototype.buildHandshakeCallbacks=function(e){var t=this;return $({},e,{connected:function(e){t.activityTimeout=Math.min(t.options.activityTimeout,e.activityTimeout,e.connection.activityTimeout||1/0),t.clearUnavailableTimer(),t.setConnection(e.connection),t.socket_id=t.connection.id,t.updateState("connected",{socket_id:t.socket_id})}})},t.prototype.buildErrorCallbacks=function(){var e=this,t=function(t){return function(n){n.error&&e.emit("error",{type:"WebSocketError",error:n.error}),t(n)}};return{tls_only:t(function(){e.usingTLS=!0,e.updateStrategy(),e.retryIn(0)}),refused:t(function(){e.disconnect()}),backoff:t(function(){e.retryIn(1e3)}),retry:t(function(){e.retryIn(0)})}},t.prototype.setConnection=function(e){for(var t in this.connection=e,this.connectionCallbacks)this.connection.bind(t,this.connectionCallbacks[t]);this.resetActivityCheck()},t.prototype.abandonConnection=function(){if(this.connection){for(var e in this.stopActivityCheck(),this.connectionCallbacks)this.connection.unbind(e,this.connectionCallbacks[e]);var t=this.connection;return this.connection=null,t}},t.prototype.updateState=function(e,t){var n=this.state;if(this.state=e,n!==e){var i=e;"connected"===i&&(i+=" with new socket ID "+t.socket_id),eu.debug("State changed",n+" -> "+i),this.timeline.info({state:e,params:t}),this.emit("state_change",{previous:n,current:e}),this.emit(e,t)}},t.prototype.shouldRetry=function(){return"connecting"===this.state||"connected"===this.state},t}(ev),e$=function(){function e(){this.channels={}}return e.prototype.add=function(e,t){return this.channels[e]||(this.channels[e]=function(e,t){if(0===e.indexOf("private-encrypted-")){if(t.config.nacl)return e0.createEncryptedChannel(e,t,t.config.nacl);throw new L("Tried to subscribe to a private-encrypted- channel but no nacl implementation available. "+k("encryptedChannelSupport"))}return 0===e.indexOf("private-")?e0.createPrivateChannel(e,t):0===e.indexOf("presence-")?e0.createPresenceChannel(e,t):e0.createChannel(e,t)}(e,t)),this.channels[e]},e.prototype.all=function(){var e,t;return e=this.channels,t=[],en(e,function(e){t.push(e)}),t},e.prototype.find=function(e){return this.channels[e]},e.prototype.remove=function(e){var t=this.channels[e];return delete this.channels[e],t},e.prototype.disconnect=function(){en(this.channels,function(e){e.disconnect()})},e}(),e0={createChannels:function(){return new e$},createConnectionManager:function(e,t){return new eQ(e,t)},createChannel:function(e,t){return new ez(e,t)},createPrivateChannel:function(e,t){return new eU(e,t)},createPresenceChannel:function(e,t){return new eW(e,t)},createEncryptedChannel:function(e,t,n){return new eY(e,t,n)},createTimelineSender:function(e,t){return new eH(e,t)},createAuthorizer:function(e,t){return t.authorizer?t.authorizer(e,t):new eF(e,t)},createHandshake:function(e,t){return new eD(e,t)},createAssistantToTheTransportManager:function(e,t,n){return new eA(e,t,n)}},e1=function(){function e(e){this.options=e||{},this.livesLeft=this.options.lives||1/0}return e.prototype.getAssistant=function(e){return e0.createAssistantToTheTransportManager(this,e,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})},e.prototype.isAlive=function(){return this.livesLeft>0},e.prototype.reportDeath=function(){this.livesLeft-=1},e}(),e2=function(){function e(e,t){this.strategies=e,this.loop=!!t.loop,this.failFast=!!t.failFast,this.timeout=t.timeout,this.timeoutLimit=t.timeoutLimit}return e.prototype.isSupported=function(){return ec(this.strategies,Q("isSupported"))},e.prototype.connect=function(e,t){var n=this,i=this.strategies,r=0,o=this.timeout,s=null,a=function(c,l){l?t(null,l):(r+=1,n.loop&&(r%=i.length),r<i.length?(o&&(o*=2,n.timeoutLimit&&(o=Math.min(o,n.timeoutLimit))),s=n.tryStrategy(i[r],e,{timeout:o,failFast:n.failFast},a)):t(!0))};return s=this.tryStrategy(i[r],e,{timeout:o,failFast:this.failFast},a),{abort:function(){s.abort()},forceMinPriority:function(t){e=t,s&&s.forceMinPriority(t)}}},e.prototype.tryStrategy=function(e,t,n,i){var r=null,o=null;return n.timeout>0&&(r=new Z(n.timeout,function(){o.abort(),i(!0)})),o=e.connect(t,function(e,t){(!(e&&r&&r.isRunning())||n.failFast)&&(r&&r.ensureAborted(),i(e,t))}),{abort:function(){r&&r.ensureAborted(),o.abort()},forceMinPriority:function(e){o.forceMinPriority(e)}}},e}(),e5=function(){function e(e){this.strategies=e}return e.prototype.isSupported=function(){return ec(this.strategies,Q("isSupported"))},e.prototype.connect=function(e,t){var n,i,r,o;return n=this.strategies,i=e,r=function(e,n){return function(i,r){if(n[e].error=i,i){(function(e){for(var t,n=0;n<e.length;n++){if(t=e[n],!t.error)return!1}return!0})(n)&&t(!0);return}er(n,function(e){e.forceMinPriority(r.transport.priority)}),t(null,r)}},o=eo(n,function(e,t,n,o){return e.connect(i,r(t,o))}),{abort:function(){er(o,e3)},forceMinPriority:function(e){er(o,function(t){t.forceMinPriority(e)})}}},e}();function e3(e){e.error||e.aborted||(e.abort(),e.aborted=!0)}var e4=function(){function e(e,t,n){this.strategy=e,this.transports=t,this.ttl=n.ttl||18e5,this.usingTLS=n.useTLS,this.timeline=n.timeline}return e.prototype.isSupported=function(){return this.strategy.isSupported()},e.prototype.connect=function(e,t){var n=this.usingTLS,i=function(e){var t=tf.getLocalStorage();if(t)try{var n=t[e6(e)];if(n)return JSON.parse(n)}catch(t){e7(e)}return null}(n),r=[this.strategy];if(i&&i.timestamp+this.ttl>=Y()){var o=this.transports[i.transport];o&&(this.timeline.info({cached:!0,transport:i.transport,latency:i.latency}),r.push(new e2([o],{timeout:2*i.latency+1e3,failFast:!0})))}var s=Y(),a=r.pop().connect(e,function i(o,c){o?(e7(n),r.length>0?(s=Y(),a=r.pop().connect(e,i)):t(o)):(function(e,t,n){var i=tf.getLocalStorage();if(i)try{i[e6(e)]=el({timestamp:Y(),transport:t,latency:n})}catch(e){}}(n,c.transport.name,Y()-s),t(null,c))});return{abort:function(){a.abort()},forceMinPriority:function(t){e=t,a&&a.forceMinPriority(t)}}},e}();function e6(e){return"pusherTransport"+(e?"TLS":"NonTLS")}function e7(e){var t=tf.getLocalStorage();if(t)try{delete t[e6(e)]}catch(e){}}var e8=function(){function e(e,t){var n=t.delay;this.strategy=e,this.options={delay:n}}return e.prototype.isSupported=function(){return this.strategy.isSupported()},e.prototype.connect=function(e,t){var n,i=this.strategy,r=new Z(this.options.delay,function(){n=i.connect(e,t)});return{abort:function(){r.ensureAborted(),n&&n.abort()},forceMinPriority:function(t){e=t,n&&n.forceMinPriority(t)}}},e}(),e9=function(){function e(e,t,n){this.test=e,this.trueBranch=t,this.falseBranch=n}return e.prototype.isSupported=function(){return(this.test()?this.trueBranch:this.falseBranch).isSupported()},e.prototype.connect=function(e,t){return(this.test()?this.trueBranch:this.falseBranch).connect(e,t)},e}(),te=function(){function e(e){this.strategy=e}return e.prototype.isSupported=function(){return this.strategy.isSupported()},e.prototype.connect=function(e,t){var n=this.strategy.connect(e,function(e,i){i&&n.abort(),t(e,i)});return n},e}();function tt(e){return function(){return e.isSupported()}}var tn={getRequest:function(e){var t=new window.XDomainRequest;return t.ontimeout=function(){e.emit("error",new _),e.close()},t.onerror=function(t){e.emit("error",t),e.close()},t.onprogress=function(){t.responseText&&t.responseText.length>0&&e.onChunk(200,t.responseText)},t.onload=function(){t.responseText&&t.responseText.length>0&&e.onChunk(200,t.responseText),e.emit("finished",200),e.close()},t},abortRequest:function(e){e.ontimeout=e.onerror=e.onprogress=e.onload=null,e.abort()}},ti=(p=function(e,t){return(p=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}p(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),tr=function(e){function t(t,n,i){var r=e.call(this)||this;return r.hooks=t,r.method=n,r.url=i,r}return ti(t,e),t.prototype.start=function(e){var t=this;this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=function(){t.close()},tf.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(e)},t.prototype.close=function(){this.unloader&&(tf.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)},t.prototype.onChunk=function(e,t){for(;;){var n=this.advanceBuffer(t);if(n)this.emit("chunk",{status:e,data:n});else break}this.isBufferTooLong(t)&&this.emit("buffer_too_long")},t.prototype.advanceBuffer=function(e){var t=e.slice(this.position),n=t.indexOf("\n");return -1!==n?(this.position+=n+1,t.slice(0,n)):null},t.prototype.isBufferTooLong=function(e){return this.position===e.length&&e.length>262144},t}(ev);(f=g||(g={}))[f.CONNECTING=0]="CONNECTING",f[f.OPEN=1]="OPEN",f[f.CLOSED=3]="CLOSED";var to=g,ts=1,ta=function(){function e(e,t){var n,i;this.hooks=e,this.session=tl(1e3)+"/"+function(e){for(var t=[],n=0;n<8;n++)t.push(tl(32).toString(32));return t.join("")}(8),this.location=(n=t,{base:(i=/([^\?]*)\/*(\??.*)/.exec(n))[1],queryString:i[2]}),this.readyState=to.CONNECTING,this.openStream()}return e.prototype.send=function(e){return this.sendRaw(JSON.stringify([e]))},e.prototype.ping=function(){this.hooks.sendHeartbeat(this)},e.prototype.close=function(e,t){this.onClose(e,t,!0)},e.prototype.sendRaw=function(e){if(this.readyState!==to.OPEN)return!1;try{var t,n;return tf.createSocketRequest("POST",tc((t=this.location,n=this.session,t.base+"/"+n+"/xhr_send"))).start(e),!0}catch(e){return!1}},e.prototype.reconnect=function(){this.closeStream(),this.openStream()},e.prototype.onClose=function(e,t,n){this.closeStream(),this.readyState=to.CLOSED,this.onclose&&this.onclose({code:e,reason:t,wasClean:n})},e.prototype.onChunk=function(e){if(200===e.status){var t;switch(this.readyState===to.OPEN&&this.onActivity(),e.data.slice(0,1)){case"o":t=JSON.parse(e.data.slice(1)||"{}"),this.onOpen(t);break;case"a":t=JSON.parse(e.data.slice(1)||"[]");for(var n=0;n<t.length;n++)this.onEvent(t[n]);break;case"m":t=JSON.parse(e.data.slice(1)||"null"),this.onEvent(t);break;case"h":this.hooks.onHeartbeat(this);break;case"c":t=JSON.parse(e.data.slice(1)||"[]"),this.onClose(t[0],t[1],!0)}}},e.prototype.onOpen=function(e){var t,n,i;this.readyState===to.CONNECTING?(e&&e.hostname&&(this.location.base=(t=this.location.base,n=e.hostname,(i=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(t))[1]+n+i[3])),this.readyState=to.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)},e.prototype.onEvent=function(e){this.readyState===to.OPEN&&this.onmessage&&this.onmessage({data:e})},e.prototype.onActivity=function(){this.onactivity&&this.onactivity()},e.prototype.onError=function(e){this.onerror&&this.onerror(e)},e.prototype.openStream=function(){var e=this;this.stream=tf.createSocketRequest("POST",tc(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",function(t){e.onChunk(t)}),this.stream.bind("finished",function(t){e.hooks.onFinished(e,t)}),this.stream.bind("buffer_too_long",function(){e.reconnect()});try{this.stream.start()}catch(t){G(function(){e.onError(t),e.onClose(1006,"Could not start streaming",!1)})}},e.prototype.closeStream=function(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)},e}();function tc(e){var t=-1===e.indexOf("?")?"?":"&";return e+t+"t="+ +new Date+"&n="+ts++}function tl(e){return Math.floor(Math.random()*e)}var tu={getReceiveURL:function(e,t){return e.base+"/"+t+"/xhr_streaming"+e.queryString},onHeartbeat:function(e){e.sendRaw("[]")},sendHeartbeat:function(e){e.sendRaw("[]")},onFinished:function(e,t){e.onClose(1006,"Connection interrupted ("+t+")",!1)}},td={getReceiveURL:function(e,t){return e.base+"/"+t+"/xhr"+e.queryString},onHeartbeat:function(){},sendHeartbeat:function(e){e.sendRaw("[]")},onFinished:function(e,t){200===t?e.reconnect():e.onClose(1006,"Connection interrupted ("+t+")",!1)}},th={getRequest:function(e){var t=new(tf.getXHRAPI());return t.onreadystatechange=t.onprogress=function(){switch(t.readyState){case 3:t.responseText&&t.responseText.length>0&&e.onChunk(t.status,t.responseText);break;case 4:t.responseText&&t.responseText.length>0&&e.onChunk(t.status,t.responseText),e.emit("finished",t.status),e.close()}},t},abortRequest:function(e){e.onreadystatechange=null,e.abort()}},tp={createStreamingSocket:function(e){return this.createSocket(tu,e)},createPollingSocket:function(e){return this.createSocket(td,e)},createSocket:function(e,t){return new ta(e,t)},createXHR:function(e,t){return this.createRequest(th,e,t)},createRequest:function(e,t,n){return new tr(e,t,n)}};tp.createXDR=function(e,t){return this.createRequest(tn,e,t)};var tf={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:b,DependenciesReceivers:C,getDefaultStrategy:function(e,t,n){var i,r={};function o(t,i,o,s,a){var c=n(e,t,i,o,s,a);return r[t]=c,c}var s=Object.assign({},t,{hostNonTLS:e.wsHost+":"+e.wsPort,hostTLS:e.wsHost+":"+e.wssPort,httpPath:e.wsPath}),a=Object.assign({},s,{useTLS:!0}),c=Object.assign({},t,{hostNonTLS:e.httpHost+":"+e.httpPort,hostTLS:e.httpHost+":"+e.httpsPort,httpPath:e.httpPath}),l={loop:!0,timeout:15e3,timeoutLimit:6e4},u=new e1({lives:2,minPingDelay:1e4,maxPingDelay:e.activityTimeout}),d=new e1({lives:2,minPingDelay:1e4,maxPingDelay:e.activityTimeout}),h=o("ws","ws",3,s,u),p=o("wss","ws",3,a,u),f=o("sockjs","sockjs",1,c),m=o("xhr_streaming","xhr_streaming",1,c,d),g=o("xdr_streaming","xdr_streaming",1,c,d),v=o("xhr_polling","xhr_polling",1,c),y=o("xdr_polling","xdr_polling",1,c),b=new e2([h],l),x=new e2([p],l),w=new e2([f],l),C=new e2([new e9(tt(m),m,g)],l),j=new e2([new e9(tt(v),v,y)],l),S=new e2([new e9(tt(C),new e5([C,new e8(j,{delay:4e3})]),j)],l),k=new e9(tt(S),S,w);return i=new e5(t.useTLS?[b,new e8(k,{delay:2e3})]:[b,new e8(x,{delay:2e3}),new e8(k,{delay:5e3})]),new e4(new te(new e9(tt(h),i,k)),r,{ttl:18e5,timeline:t.timeline,useTLS:t.useTLS})},Transports:eM,transportConnectionInitializer:function(){var e=this;e.timeline.info(e.buildTimelineMessage({transport:e.name+(e.options.useTLS?"s":"")})),e.hooks.isInitialized()?e.changeState("initialized"):e.hooks.file?(e.changeState("initializing"),j.load(e.hooks.file,{useTLS:e.options.useTLS},function(t,n){e.hooks.isInitialized()?(e.changeState("initialized"),n(!0)):(t&&e.onError(t),e.onClose(),n(!1))})):e.onClose()},HTTPFactory:tp,TimelineTransport:{name:"jsonp",getAgent:function(e,t){return function(n,i){var r="http"+(t?"s":"")+"://"+(e.host||e.options.host)+e.options.path,o=tf.createJSONPRequest(r,n),s=tf.ScriptReceivers.create(function(t,n){b.remove(s),o.cleanup(),n&&n.host&&(e.host=n.host),i&&i(t,n)});o.send(s)}}},getXHRAPI:function(){return window.XMLHttpRequest},getWebSocketAPI:function(){return window.WebSocket||window.MozWebSocket},setup:function(e){var t=this;window.Pusher=e;var n=function(){t.onDocumentBody(e.ready)};window.JSON?n():j.load("json2",{},n)},getDocument:function(){return document},getProtocol:function(){return this.getDocument().location.protocol},getAuthorizers:function(){return{ajax:O,jsonp:ed}},onDocumentBody:function(e){var t=this;document.body?e():setTimeout(function(){t.onDocumentBody(e)},0)},createJSONPRequest:function(e,t){return new ep(e,t)},createScriptRequest:function(e){return new eh(e)},getLocalStorage:function(){try{return window.localStorage}catch(e){return}},createXHR:function(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest:function(){return new(this.getXHRAPI())},createMicrosoftXHR:function(){return new ActiveXObject("Microsoft.XMLHTTP")},getNetwork:function(){return eN},createWebSocket:function(e){return new(this.getWebSocketAPI())(e)},createSocketRequest:function(e,t){if(this.isXHRSupported())return this.HTTPFactory.createXHR(e,t);if(this.isXDRSupported(0===t.indexOf("https:")))return this.HTTPFactory.createXDR(e,t);throw"Cross-origin HTTP requests are not supported"},isXHRSupported:function(){var e=this.getXHRAPI();return!!e&&void 0!==new e().withCredentials},isXDRSupported:function(e){var t=this.getProtocol();return!!window.XDomainRequest&&t===(e?"https:":"http:")},addUnloadListener:function(e){void 0!==window.addEventListener?window.addEventListener("unload",e,!1):void 0!==window.attachEvent&&window.attachEvent("onunload",e)},removeUnloadListener:function(e){void 0!==window.addEventListener?window.removeEventListener("unload",e,!1):void 0!==window.detachEvent&&window.detachEvent("onunload",e)}};(m=v||(v={}))[m.ERROR=3]="ERROR",m[m.INFO=6]="INFO",m[m.DEBUG=7]="DEBUG";var tm=v,tg=function(){function e(e,t,n){this.key=e,this.session=t,this.events=[],this.options=n||{},this.sent=0,this.uniqueID=0}return e.prototype.log=function(e,t){e<=this.options.level&&(this.events.push($({},t,{timestamp:Y()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())},e.prototype.error=function(e){this.log(tm.ERROR,e)},e.prototype.info=function(e){this.log(tm.INFO,e)},e.prototype.debug=function(e){this.log(tm.DEBUG,e)},e.prototype.isEmpty=function(){return 0===this.events.length},e.prototype.send=function(e,t){var n=this,i=$({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],e(i,function(e,i){!e&&n.sent++,t&&t(e,i)}),!0},e.prototype.generateUniqueID=function(){return this.uniqueID++,this.uniqueID},e}(),tv=function(){function e(e,t,n,i){this.name=e,this.priority=t,this.transport=n,this.options=i||{}}return e.prototype.isSupported=function(){return this.transport.isSupported({useTLS:this.options.useTLS})},e.prototype.connect=function(e,t){var n=this;if(!this.isSupported())return ty(new A,t);if(this.priority<e)return ty(new I,t);var i=!1,r=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),o=null,s=function(){r.unbind("initialized",s),r.connect()},a=function(){o=e0.createHandshake(r,function(e){i=!0,u(),t(null,e)})},c=function(e){u(),t(e)},l=function(){u(),t(new P(el(r)))},u=function(){r.unbind("initialized",s),r.unbind("open",a),r.unbind("error",c),r.unbind("closed",l)};return r.bind("initialized",s),r.bind("open",a),r.bind("error",c),r.bind("closed",l),r.initialize(),{abort:function(){i||(u(),o?o.close():r.close())},forceMinPriority:function(e){!i&&n.priority<e&&(o?o.close():r.close())}}},e}();function ty(e,t){return G(function(){t(e)}),{abort:function(){},forceMinPriority:function(){}}}var tb=tf.Transports,tx=function(e,t,n,i,r,o){var s,a=tb[n];if(!a)throw new N(n);return e.enabledTransports&&-1===et(e.enabledTransports,t)||e.disabledTransports&&-1!==et(e.disabledTransports,t)?s=tw:(r=Object.assign({ignoreNullOrigin:e.ignoreNullOrigin},r),s=new tv(t,i,o?o.getAssistant(a):a,r)),s},tw={isSupported:function(){return!1},connect:function(e,t){var n=G(function(){t(new A)});return{abort:function(){n.ensureAborted()},forceMinPriority:function(){}}}};function tC(e){return"ws-"+e+".pusher.com"}var tj=function(){function e(t,n){var i,r,o,s,a,c=this;if(function(e){if(null==e)throw"You must pass your app key when you instantiate Pusher."}(t),!(n=n||{}).cluster&&!(n.wsHost||n.httpHost)){var l=k("javascriptQuickStart");eu.warn("You should always specify a cluster when connecting. "+l)}"disableStats"in n&&eu.warn("The disableStats option is deprecated in favor of enableStats"),this.key=t,this.config=(a={activityTimeout:(s=n).activityTimeout||12e4,authEndpoint:s.authEndpoint||"/pusher/auth",authTransport:s.authTransport||"ajax",cluster:s.cluster||"mt1",httpPath:s.httpPath||"/pusher",httpPort:s.httpPort||80,httpsPort:s.httpsPort||443,pongTimeout:s.pongTimeout||3e4,statsHost:s.statsHost||"stats.pusher.com",unavailableTimeout:s.unavailableTimeout||1e4,wsPath:s.wsPath||"",wsPort:s.wsPort||80,wssPort:s.wssPort||443,enableStats:"enableStats"in(i=s)?i.enableStats:"disableStats"in i&&!i.disableStats,httpHost:(r=s).httpHost?r.httpHost:r.cluster?"sockjs-"+r.cluster+".pusher.com":"sockjs.pusher.com",useTLS:function(e){if("https:"===tf.getProtocol());else if(!1===e.forceTLS)return!1;return!0}(s),wsHost:(o=s).wsHost?o.wsHost:o.cluster?tC(o.cluster):tC("mt1")},"auth"in s&&(a.auth=s.auth),"authorizer"in s&&(a.authorizer=s.authorizer),"disabledTransports"in s&&(a.disabledTransports=s.disabledTransports),"enabledTransports"in s&&(a.enabledTransports=s.enabledTransports),"ignoreNullOrigin"in s&&(a.ignoreNullOrigin=s.ignoreNullOrigin),"timelineParams"in s&&(a.timelineParams=s.timelineParams),"nacl"in s&&(a.nacl=s.nacl),a),this.channels=e0.createChannels(),this.global_emitter=new ev,this.sessionID=Math.floor(1e9*Math.random()),this.timeline=new tg(this.key,this.sessionID,{cluster:this.config.cluster,features:e.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:tm.INFO,version:x}),this.config.enableStats&&(this.timelineSender=e0.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+tf.TimelineTransport.name})),this.connection=e0.createConnectionManager(this.key,{getStrategy:function(e){return tf.getDefaultStrategy(c.config,e,tx)},timeline:this.timeline,activityTimeout:this.config.activityTimeout,pongTimeout:this.config.pongTimeout,unavailableTimeout:this.config.unavailableTimeout,useTLS:!!this.config.useTLS}),this.connection.bind("connected",function(){c.subscribeAll(),c.timelineSender&&c.timelineSender.send(c.connection.isUsingTLS())}),this.connection.bind("message",function(e){var t=0===e.event.indexOf("pusher_internal:");if(e.channel){var n=c.channel(e.channel);n&&n.handleEvent(e)}t||c.global_emitter.emit(e.event,e.data)}),this.connection.bind("connecting",function(){c.channels.disconnect()}),this.connection.bind("disconnected",function(){c.channels.disconnect()}),this.connection.bind("error",function(e){eu.warn(e)}),e.instances.push(this),this.timeline.info({instances:e.instances.length}),e.isReady&&this.connect()}return e.ready=function(){e.isReady=!0;for(var t=0,n=e.instances.length;t<n;t++)e.instances[t].connect()},e.getClientFeatures=function(){return ei(ea({ws:tf.Transports.ws},function(e){return e.isSupported({})}))},e.prototype.channel=function(e){return this.channels.find(e)},e.prototype.allChannels=function(){return this.channels.all()},e.prototype.connect=function(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var e=this.connection.isUsingTLS(),t=this.timelineSender;this.timelineSenderTimer=new J(6e4,function(){t.send(e)})}},e.prototype.disconnect=function(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)},e.prototype.bind=function(e,t,n){return this.global_emitter.bind(e,t,n),this},e.prototype.unbind=function(e,t,n){return this.global_emitter.unbind(e,t,n),this},e.prototype.bind_global=function(e){return this.global_emitter.bind_global(e),this},e.prototype.unbind_global=function(e){return this.global_emitter.unbind_global(e),this},e.prototype.unbind_all=function(e){return this.global_emitter.unbind_all(),this},e.prototype.subscribeAll=function(){var e;for(e in this.channels.channels)this.channels.channels.hasOwnProperty(e)&&this.subscribe(e)},e.prototype.subscribe=function(e){var t=this.channels.add(e,this);return t.subscriptionPending&&t.subscriptionCancelled?t.reinstateSubscription():t.subscriptionPending||"connected"!==this.connection.state||t.subscribe(),t},e.prototype.unsubscribe=function(e){var t=this.channels.find(e);t&&t.subscriptionPending?t.cancelSubscription():(t=this.channels.remove(e))&&t.subscribed&&t.unsubscribe()},e.prototype.send_event=function(e,t,n){return this.connection.send_event(e,t,n)},e.prototype.shouldUseTLS=function(){return this.config.useTLS},e.instances=[],e.isReady=!1,e.logToConsole=!1,e.Runtime=tf,e.ScriptReceivers=tf.ScriptReceivers,e.DependenciesReceivers=tf.DependenciesReceivers,e.auth_callbacks=tf.auth_callbacks,e}(),tS=t.default=tj;tf.setup(tj)}],t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t||4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,(function(t){return e[t]}).bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}()},268516,e=>{e.v({chatMessagesContainer:"index-module__MFzY-W__chatMessagesContainer",mountMessages:"index-module__MFzY-W__mountMessages"})},591998,e=>{"use strict";var t=e.i(832520);e.i(563948);var n=e.i(407562),i=e.i(200407),r=e.i(480118),o=e.i(227308),s=e.i(304649),a=e.i(696871),c=e.i(449381),l=e.i(846139),u=e.i(296046),d=e.i(301331),h=e.i(92479),p=e.i(175787),f=e.i(729602),m=e.i(152641),g=e.i(295224);e.i(133473);var v=e.i(163060);let y=null,b=()=>(y||(y=new v.default("dc5054126c8a894f78e9",{cluster:"us3"})),y);var x=e.i(472166),w=e.i(521598),C=e.i(346970),j=e.i(53223),S=e.i(547259),k=(0,S.createServerReference)("4037b2f3ac9ef1feb65e4c93e125a4d7067a2e690a",S.callServer,void 0,S.findSourceMapURL,"deleteMessage"),M=e.i(307778),T=e.i(88114),_=e.i(246300),I=e.i(686832),P=e.i(176248),L=e.i(120485),N=e.i(297239),A=e.i(70165),E=e.i(848258);function O(){let{data:e,mutate:t}=(0,C.default)("showDeleteMessageDialog",null,{fallbackData:null});return{showConfirmDelete:e,setConfirmDelete:t}}function R(e){let{messages:t,targetMessageId:n}=e,i=t.find(e=>"user"===e.role&&e.id===n);if(!i)return null;let r=(0,p.computeForkKeyOptions)(t).get(i.parentId||p.ROOT_MESSAGE_KEY)||[],o=r.findIndex(e=>e&&e.some(e=>e===i.id)),s=r[o];return r.length>1?(0,p.getLeafNodeForkKey)([...t],r[0===o?1:o-1],"right"):i.parentId&&s?s.slice(0,-1):null}function D(){let e=(0,c.useActiveBlockState)(),{history:t}=(0,d.useBlockHistory)({blockId:null==e?void 0:e.id,searchAll:!0}),{scrollToHash:n}=(0,E.useScrollToMessage)(),{setPulsePreview:r}=(0,d.useSetPulsePreview)(),o=(0,c.useSetActiveBlockView)(),{ensureBlockSource:s}=(0,d.useBlockSource)();return{switchToBlock:(0,i.useCallback)(i=>{if((null==e?void 0:e.messageId)&&i.includes(e.messageId))return;let a={forkKeyIx:-1,block:null};for(let e of t){let t=i.findIndex(t=>t===e.messageId);!(t<0)&&(t<a.forkKeyIx||(a.forkKeyIx=t,a.block=e))}let{block:c}=a;c&&(c.isLoading&&s(c.id),o(!0,c),r({blockId:c.id}),n(c.messageId,150,!0,i))},[t,n,s,o,r,null==e?void 0:e.messageId])}}function F(){let{chatId:e,messages:o,activeForkKey:s}=(0,h.useChatMessages)(),{isStreaming:a,isLoading:l}=(0,h.useChatLoadingState)(),u=(0,h.useSetChatState)(),d=(0,c.useActiveBlockState)(),{showConfirmDelete:f,setConfirmDelete:m}=O(),{setData:g,data:v}=(0,_.useChatHistory)(),[y,b]=(0,i.useTransition)(),w=(0,c.useSetActiveBlockView)(),{stopLlmResponse:C}=(0,x.useV0Chat)(),S=(0,r.useRouter)(),E=(0,A.useIsMobile)(),F=(0,N.useT)(),{switchToBlock:H}=D(),B=(0,i.useMemo)(()=>f?R({messages:o,targetMessageId:f}):null,[o,f]),z=(0,i.useCallback)(()=>{f&&!y&&(m(null),(a||l)&&C(),b(async()=>{let t=v?[...v]:[],i=[...o],r=d?{...d}:null;if(!o.find(e=>"user"===e.role&&e.id===f))return void n.toast.error("Message not found. Please try again.");try{if((0,j.track)("SubmitDeleteUserMessage",{messageId:f}),B){E||setTimeout(()=>{var e;null==(e=document.getElementById("chat-main-textarea"))||e.focus()},0);let t=new Set((0,p.getChildMessageIds)(o.map(e=>({...e,messageId:e.id})),f)),i=o.filter(e=>!("user"===e.role&&e.id===f||t.has(e.id))),r=await k({payload:{messageId:f,chatId:e}});if(null==r?void 0:r.error)throw Error(r.error);H(B),u({messages:i,activeForkKey:B,saveLeafMessageId:!0}),n.toast.success("Messages successfully deleted.")}else{w(!1),g(t=>t.filter(t=>t.chatId!==e));let t=await (0,T.deleteChat)({payload:{chatId:e}});if(null==t?void 0:t.error)throw Error(t.error);n.toast.success("Messages successfully deleted."),S.push("/chat")}m(void 0)}catch(o){let e=(0,L.handleChatError)(o);g(e=>t),u({messages:i,activeForkKey:s}),r&&w(!0,r),e||n.toast.error("Something went wrong. Please try again.")}}))},[d,s,v,e,l,E,y,a,o,B,S,w,g,u,m,f,C,H]),V=null!==B?{TITLE:F("deleteMessageDialog.deleteMessageTitle"),DESCRIPTION:F("deleteMessageDialog.deleteMessageDescription")}:{TITLE:F("deleteMessageDialog.deleteChatTitle"),DESCRIPTION:F("deleteMessageDialog.deleteChatDescription")};return(0,t.jsxs)(I.Modal,{onOpenChange:e=>{e||m(null)},open:null!==f,children:[(0,t.jsxs)(I.ModalHeader,{children:[(0,t.jsx)(I.ModalTitle,{children:V.TITLE}),(0,t.jsx)(I.ModalDescription,{children:V.DESCRIPTION})]}),(0,t.jsxs)(I.ModalFooter,{children:[(0,t.jsx)(I.ModalClose,{asChild:!0,children:(0,t.jsx)(P.Button,{size:"sm",variant:"secondary",children:F("deleteMessageDialog.cancel")})}),(0,t.jsx)(P.Button,{"data-testid":"confirm-delete-message",disabled:y,onClick:z,size:"sm",variant:"destructive",children:y?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(M.IconSpinner,{className:"size-4"}),F("deleteMessageDialog.deleting")]}):F("deleteMessageDialog.delete")})]})]})}var H=e.i(32170);let B=a.PUSHER_EVENTS.latestChat.getEventName();var z=e.i(584497),V=e.i(242759),U=e.i(7284),q=e.i(707827),X=e.i(295548);function W(){let{remote:e}=(0,z.useChatMetadata)(),{chatId:n}=(0,h.useChatId)(),{data:i}=(0,C.default)(e?"/chat/api/chat/remote/heartbeat?cid="+n:null,e=>fetch(e).then(e=>e.text()),{refreshInterval:5e3,fallbackData:"OK"});return e?"OK"!==i?(0,t.jsx)("div",{className:"absolute bottom-0 left-0 right-0 pb-8 pt-12 mx-auto z-20 bg-linear-to-b from-transparent to-white/50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"p-4 rounded-lg bg-yellow-300 text-yellow-800 shadow max-w-3xl",children:[(0,t.jsxs)("h3",{className:"text-sm font-medium flex items-center gap-2 select-none",children:[(0,t.jsx)(X.WarningFill,{}),"Local v0 dev server disconnected"]}),(0,t.jsxs)("p",{className:"text-sm mt-2",children:[(0,t.jsx)("span",{className:"select-none",children:"This chat requires your local v0 dev server running. Please run this command in your repository to reconnect:"}),(0,t.jsxs)("code",{className:"block mt-2 bg-zinc-50/40 px-2 py-1.5 rounded-md text-sm",children:["v0-dev --chat=",n]})]})]})}):i?null:(0,t.jsx)("div",{className:"absolute bottom-0 left-0 right-0 pb-8 pt-12 mx-auto z-20 bg-linear-to-b from-transparent to-white/50 flex items-center justify-center",children:(0,t.jsx)("div",{className:"p-4 rounded-lg bg-gray-150 text-gray-800 max-w-3xl",children:(0,t.jsxs)("h3",{className:"text-sm font-medium flex items-center gap-2 select-none",children:[(0,t.jsx)(q.Spinner,{className:"w-4 h-4"}),"Connecting to local v0 dev server..."]})})}):null}var K=e.i(323194),Z=e.i(726718),J=e.i(843675),Y=e.i(716360),G=e.i(529693),Q=e.i(120668),$=e.i(183673),ee=e.i(745197),et=e.i(912074),en=e.i(492526),ei=e.i(391236),er=e.i(79259),eo=e.i(450112),es=e.i(174753),ea=e.i(605528);let ec=(0,ea.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M14.5 2.5H1.5V5.005H14.5V2.5ZM14.5 6.255H6.245V13.5H13.5C14.0523 13.5 14.5 13.0523 14.5 12.5V6.255ZM4.995 6.255H1.5V12.5C1.5 13.0523 1.94772 13.5 2.5 13.5H4.995V6.255ZM1.5 1H0V2.5V12.5C0 13.8807 1.11929 15 2.5 15H13.5C14.8807 15 16 13.8807 16 12.5V2.5V1H14.5H1.5Z" fill="currentColor"/>'),el=[{prompt:"Please recreate the UI shown in the attached screenshot as accurately as possible.",title:"cloneScreenshot",icon:(0,t.jsx)(eo.Camera,{className:"size-[14px]"})},{prompt:"Please recreate the UI shown in the attached Figma frame as accurately as possible.",title:"importFromFigma",icon:(0,t.jsx)(function(e){let{className:n}=e;return(0,t.jsx)("svg",{width:"16",height:"18",viewBox:"0 0 16 18",className:n,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.25 4.15129C2.25 5.1233 2.6869 5.99327 3.37503 6.57554C2.6869 7.1578 2.25 8.02777 2.25 8.99978C2.25 9.97179 2.6869 10.8418 3.37503 11.424C2.6869 12.0063 2.25 12.8763 2.25 13.8483C2.25 15.6013 3.67116 17.0225 5.42424 17.0225H5.5C7.29493 17.0225 8.75 15.5674 8.75 13.7725V12.174V11.6971C9.23602 11.9994 9.80974 12.174 10.4242 12.174H10.5758C12.3288 12.174 13.75 10.7529 13.75 8.99978C13.75 8.02777 13.3131 7.1578 12.625 6.57554C13.3131 5.99327 13.75 5.1233 13.75 4.15129C13.75 2.39821 12.3288 0.977051 10.5758 0.977051H8.75H8H7.25H5.42424C3.67116 0.977051 2.25 2.39821 2.25 4.15129ZM10.5758 5.82554C11.5004 5.82554 12.25 5.07595 12.25 4.15129C12.25 3.22663 11.5004 2.47705 10.5758 2.47705H8.75V5.82554H10.4242H10.5758ZM7.25 8.99978V7.32554H5.42424C4.49958 7.32554 3.75 8.07512 3.75 8.99978C3.75 9.92444 4.49958 10.674 5.42424 10.674H7.25V8.99978ZM8.75 8.99978C8.75 9.92444 9.49958 10.674 10.4242 10.674H10.5758C11.5004 10.674 12.25 9.92444 12.25 8.99978C12.25 8.07512 11.5004 7.32554 10.5758 7.32554H10.4242C9.49958 7.32554 8.75 8.07512 8.75 8.99978ZM5.42424 12.174L7.25 12.174V13.7725C7.25 14.739 6.4665 15.5225 5.5 15.5225H5.42424C4.49958 15.5225 3.75 14.7729 3.75 13.8483C3.75 12.9236 4.49958 12.174 5.42424 12.174ZM7.25 5.82554H5.42424C4.49958 5.82554 3.75 5.07595 3.75 4.15129C3.75 3.22663 4.49958 2.47705 5.42424 2.47705H7.25V5.82554Z",fill:"currentColor"})})},{className:"size-[14px]"})},{prompt:"Please upload a project.",title:"uploadProject",icon:(0,t.jsx)(es.FileZip,{className:"size-[14px]"})},{prompt:"Create a modern, responsive landing page for a fictional SaaS company. The landing page should include the following sections:\n\n- A header with the company logo, navigation links, and a call-to-action button.\n- A hero section with a catchy headline, brief description, and a prominent call-to-action.\n- A features section highlighting 3-4 key features of StreamLine.\n- A testimonials section with quotes from satisfied customers.\n- A pricing section with different plan options.\n- A final call-to-action section to encourage sign-ups.\n- A footer with important links and social media icons.",title:"landingPage",icon:(0,t.jsx)(ec,{className:"size-[14px]"})}];var eu=e.i(996548);e.i(904347);var ed=e.i(37737),eh=e.i(479273),ep=e.i(120282),ef=e.i(347853),em=e.i(889610),eg=e.i(851994);e.i(168204);var ev=e.i(225695),ey=e.i(667660),eb=e.i(206658);let ex="empty-screen-import-figma";function ew(e){let{isMobile:n,onSubmit:o,children:a,ref:c,...l}=e,d=(0,N.useT)(),{locale:h}=(0,eh.useLocale)(),{expectUser:p}=(0,H.useUser)(),{setShowSignInDialog:f}=(0,K.useSignInDialog)(),{submit:m,stopLlmResponse:g}=(0,x.useV0Chat)({onSubmit:o}),[v]=(0,ee.useRateLimit)(),y=!!((null==v?void 0:v.remaining)!==void 0&&v.remaining<=0),b=(0,et.getAnonId)(),[w,C]=(0,i.useState)(!1),j=(0,r.usePathname)(),S=(0,u.useIsChatPage)(),k=(0,Z.isHome)(j),{hasWritePermission:M}=(0,ey.useActiveScope)(),T=(0,i.useCallback)(e=>{f({content:"new"===e.action&&(e.content||!1)})},[f]);return M?(0,t.jsx)("div",{className:"flex h-full flex-col items-center justify-center gap-8",...l,children:(0,t.jsxs)("div",{className:"z-0 flex w-full flex-1 flex-col gap-24 overflow-auto px-6",ref:c,children:[(0,t.jsxs)("div",{className:"mx-auto flex w-full flex-col gap-4 pt-32 lg:pt-48",children:[(0,t.jsx)("h1",{"data-testid":"app-title",className:(0,s.cn)("font-heading text-pretty text-center font-semibold tracking-tighter text-gray-900 sm:text-[32px] md:text-[46px]",{"text-[24px]":h===ep.esLocaleInfo.iso639,"text-[26px]":h===em.jaLocaleInfo.iso639,"text-[29px]":h===ef.enLocaleInfo.iso639}),children:d("emptyScreen.title")}),(0,t.jsx)("h2",{className:"-mt-4 -mb-4 text-center text-[20px] text-gray-500 pb-4",children:d("emptyScreen.subTitle")}),(0,t.jsx)(eb.ConditionalNavigationMarker,{enabled:k,phase:"content",label:"EmptyScreen",children:(0,t.jsx)(Q.PromptForm,{className:"relative mx-auto w-full max-w-196",isMobile:n,isNewChat:!S,isSignedIn:p,isAnonymous:!!(!p&&b),stop:g,submit:p||b&&!y?m:T,isTemplateLoading:w})}),(0,t.jsx)("div",{className:"flex min-h-0 shrink-0 items-center justify-center",children:(0,t.jsx)(eC,{show:!0,setIsTemplateLoading:C,isMobile:n})})]}),(0,t.jsx)("div",{className:"mx-auto flex w-full max-w-[1264px] flex-1 flex-col gap-4",children:a}),(0,t.jsx)("div",{className:"py-4",children:(0,t.jsx)(J.Footer,{})})]})}):(0,t.jsx)("div",{className:"overflow-auto px-6 pt-16",children:a})}function eC(e){let{show:n,setIsTemplateLoading:r,isMobile:o}=e,s=(0,N.useT)(),[a,c]=(0,i.useState)(!1),{expectUser:l,user:u}=(0,H.useUser)();(0,i.useEffect)(()=>{r(a)},[a,r]);let d=(0,i.useMemo)(()=>l||u?o?el.filter(e=>"uploadProject"!==e.title):el:[],[o,l,u]);return(0,t.jsx)(Y.AnimatePresence,{mode:"wait",children:n&&d.length?(0,t.jsxs)(G.motion.div,{animate:{opacity:1},className:"flex max-w-[1000px] flex-wrap justify-center gap-3",exit:{opacity:0},initial:!1,role:"list",children:[(0,t.jsx)("h2",{className:"sr-only",children:s("emptyScreen.suggestedChatMessages")}),(0,t.jsx)(ej,{suggestion:d[0],isAnyLoading:a,setIsAnyLoading:c,setIsTemplateLoading:r}),(0,t.jsx)(ej,{suggestion:d[1],isAnyLoading:a,setIsAnyLoading:c,setIsTemplateLoading:r}),(0,t.jsx)("div",{className:"hidden md:block",children:(0,t.jsx)(ej,{suggestion:d[2],isAnyLoading:a,setIsAnyLoading:c,setIsTemplateLoading:r})}),(0,t.jsxs)("div",{className:"flex justify-center gap-3",children:[(0,t.jsx)("div",{className:"md:hidden",children:(0,t.jsx)(ej,{suggestion:d[2],isAnyLoading:a,setIsAnyLoading:c,setIsTemplateLoading:r})}),d.length>3?(0,t.jsx)(ej,{suggestion:d[3],isAnyLoading:a,setIsAnyLoading:c,setIsTemplateLoading:r}):null]})]},"suggestions"):null})}function ej(e){let{suggestion:n,isAnyLoading:o,setIsAnyLoading:a,setIsTemplateLoading:c}=e,l=(0,N.useT)(),{submit:u}=(0,x.useV0Chat)(),{user:d}=(0,H.useUser)(),{setShowSignInDialog:h}=(0,K.useSignInDialog)(),{selectedProjectId:p}=(0,$.useProjectsForUser)(),[f]=(0,ee.useRateLimit)(),m=(null==f?void 0:f.remaining)===0,g=(0,i.useMemo)(()=>(0,et.getAnonId)(),[]),v=i.useRef(null),{setSignInWithFigmaModalOpen:y}=(0,eg.useSignInWithFigmaModal)(),{setImportFigmaModalOpen:b}=(0,en.useImportFromFigmaModal)(),{handleFigmaUrl:w,isFigmaUrl:C,getNodeContext:S,userData:k}=(0,ei.useFigmaIntegration)(),[M,T]=(0,i.useState)(!1),_=(0,i.useRef)(void 0),{setShowZipModal:I}=(0,eu.useZipModal)(),{isUploading:L,onInputChange:A,uploadFiles:E}=(0,er.default)({isSignedIn:!!d,onFinish:()=>{T(!1),a(!1),c(!1)},canUpload:()=>({ok:!0}),onUploadStart:()=>{T(!0),a(!0),c(!0)},onSuccess:async e=>{(0,j.track)("SubmitNewUserMessage",{text:n.prompt,imageOnly:!1,index:0,projectId:p,anonId:g,suggestion:n.title,messageMode:"build"}),await u({action:"new",content:(0,ev.createMDXMessageContent)(n.prompt),attachments:e,figmaContext:_.current,messageMode:"build"})},disableDrag:!0,disablePaste:!0}),O=(0,i.useCallback)(async e=>{if(!C(e))return;let[t,n]=await Promise.all([w(e),S(e)]);if(!t.success)return;let i=n.nodes.colors.map(e=>"".concat(e.hex,")")).join(", ")||"",r=n.nodes.designTokens.map(e=>"".concat(e.hex,")")).join(", ")||"";_.current=[i&&"Colors: ".concat(i),r&&"Design tokens: ".concat(r)].filter(Boolean).join(", ");let{base64:o,originalUrl:s,fileName:a}=t.data,c=a.replace(/[^a-zA-Z0-9.]/g,"_"),l=o.split(",")[1],u=window.atob(l),d=new Uint8Array(u.length);for(let e=0;e<u.length;e++)d[e]=u.charCodeAt(e);let h=new File([new Blob([d],{type:"image/png"})],"".concat(c,".png"),{type:"image/png"});h.isFigmaFile=!0,h.figmaUrl=s,h.v0Type="figma",await E([h])},[C,w,S,E]),R=(0,r.useSearchParams)();(0,i.useEffect)(()=>{if(R.get("modal")===ex&&(null==k?void 0:k.isSignedIn)&&d){(0,j.track)("FigmaModalOpen",{source:"url"}),b({open:!0,onImport:O});let e=new URLSearchParams(R.toString());e.delete("modal"),window.history.replaceState({},"","".concat(window.location.pathname,"?").concat(e.toString()))}},[R,b,null==k?void 0:k.isSignedIn,d,O]);let D=async()=>{if((0,j.track)("ClickSuggestion",{suggestion:n.title}),!d&&!g)return void h({content:(0,ev.createMDXMessageContent)(n.prompt)});if(m)return g?void h({content:!1,customMessage:"To continue using the chat, create a Vercel account or log into an existing one."}):void(0,ed.openDialog)({type:"upgradePlan"});if("cloneScreenshot"===n.title){var e;return d?void(null==(e=v.current)||e.click()):void h({content:!1,customMessage:"To upload screenshots to your chat, create a Vercel account or log into an existing one."})}return"importFromFigma"===n.title?d?(null==k?void 0:k.isSignedIn)?((0,j.track)("FigmaModalOpen",{source:"url"}),void b({open:!0,onImport:O})):void y({open:!0,oauthUrlSearchParams:{modal:ex}}):void h({content:!1,customMessage:"To import from Figma, create a Vercel account or log into an existing one."}):"uploadProject"===n.title?d?void I(!0):void h({content:!1,customMessage:"To upload a project, create a Vercel account or log into an existing one."}):void((0,j.track)("SubmitNewUserMessage",{text:n.prompt,imageOnly:!1,index:0,projectId:p,anonId:g,suggestion:n.title,messageMode:"build"}),await u({action:"new",content:(0,ev.createMDXMessageContent)(n.prompt),messageMode:"build"}))},[F,B]=(0,i.useState)({x:0,y:0}),[z,V]=(0,i.useState)(!1),U=(0,i.useCallback)(e=>{let t=e.currentTarget.getBoundingClientRect();B({x:(e.clientX-t.left)/t.width*100,y:(e.clientY-t.top)/t.height*100})},[]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"pointer-events-none absolute -inset-px rounded-full",style:{opacity:+!!z,background:"transparent",transition:"opacity 0.15s ease"},children:(0,t.jsx)("div",{className:(0,s.cn)("absolute inset-0 rounded-full border border-[rgba(68,225,211,0.9)] dark:border-[rgba(68,225,211,0.5)]"),style:{background:"transparent",clipPath:"inset(0px round 9999px)",maskImage:"radial-gradient(circle at var(--mouse-x) var(--mouse-y), black, transparent 100%)",WebkitMaskImage:"radial-gradient(circle at var(--mouse-x) var(--mouse-y), black, transparent 100%)","--mouse-x":"".concat(F.x,"%"),"--mouse-y":"".concat(F.y,"%")}})}),(0,t.jsxs)(P.Button,{variant:"secondary",size:"sm",onClick:D,onMouseMove:U,onMouseEnter:()=>V(!0),onMouseLeave:()=>V(!1),className:"border-none text-[13px] text-gray-600 shadow-sm hover:text-gray-900",disabled:M||L||o,"aria-label":l("emptyScreen.suggestions.".concat(n.title)),rounded:!0,children:[(0,t.jsx)("span",{className:M||L||o?"text-gray-500":"text-gray-600",children:(M||L)&&("cloneScreenshot"===n.title||"importFromFigma"===n.title)?(0,t.jsx)(q.Spinner,{size:14}):n.icon}),l("emptyScreen.suggestions.".concat(n.title))]})]}),(0,t.jsx)("input",{ref:v,type:"file",accept:"image/*",className:"sr-only",onChange:e=>{A(e)},disabled:M||L||o,tabIndex:-1,"aria-hidden":"true"})]})}var eS=e.i(871701),ek=e.i(622449),eM=e.i(460265),eT=e.i(879332),e_=e.i(273207),eI=e.i(418929);let eP=(0,i.memo)(function(e){let{forkKeyOptions:n,message:r,className:o}=e,{messages:a}=(0,h.useChatMessages)(),l=(0,h.useSetChatState)(),{actions:u}=(0,eI.useCurrentChatPrompt)(),{clearEditingMessage:d}=u,f=(n||[]).findIndex(e=>e&&e.some(e=>e===r.id)),m=(0,c.useCloseActiveBlock)(),{forkKeyCache:v}=(0,e_.useLeafMessage)(),y=(0,g.useLatest)(a),b=(0,i.useCallback)(e=>{let t=n[e];if(!t)return;let i=(0,p.getLeafMessageIdFromForkKey)(t),o=i?v[i]:void 0;if(o){let e=new Set(y.current.map(e=>e.id)),n=!0;for(let t of o)e.has(t)||(n=!1);n&&(t=o)}let s=(0,p.getLeafNodeForkKey)([...y.current],t);m(r.id,s),l({activeForkKey:s}),d()},[n,v,y,m,r.id,l,d]);return!n||n.length<2?null:(0,t.jsxs)("div",{className:(0,s.cn)("flex items-center gap-0.5 text-sm font-medium",o),children:[(0,t.jsx)(P.Button,{"aria-label":"Previous message version",className:"disabled:bg-background size-6 rounded-md disabled:border-none",disabled:0===f,onClick:()=>b(f-1),size:"xs",variant:"ghost",children:(0,t.jsx)(eT.ChevronLeftSmall,{})}),(0,t.jsxs)("span",{className:"whitespace-nowrap",children:[f+1," / ",n.length]}),(0,t.jsx)(P.Button,{"aria-label":"Next message version",className:"disabled:bg-background size-6 rounded-md disabled:border-none",disabled:f===n.length-1,onClick:()=>b(f+1),size:"xs",variant:"ghost",children:(0,t.jsx)(eM.ChevronRightSmall,{})})]})});var eL=e.i(444346),eN=e.i(997974),eA=e.i(165336),eE=e.i(758118),eO=e.i(397036),eR=e.i(748819),eD=e.i(512817),eF=e.i(850722),eH=e.i(650309),eB=e.i(594851),ez=e.i(633577),eV=e.i(572435),eU=e.i(85830),eq=e.i(607849),eq=eq,eX=e.i(109577),eX=eX;function eW(e){let{message:n,className:i}=e;return(0,t.jsx)(eO.UserMessageLayout,{className:i,id:n.id,messageAuthorId:n.authorId,children:(0,t.jsxs)("details",{children:[(0,t.jsxs)("summary",{className:"inline-flex items-center gap-1 rounded bg-green-600/15 px-1.5 py-0.5 text-sm text-green-800 cursor-pointer",children:[(0,t.jsx)(eq.default,{className:"h-3.5 w-3.5"}),"Established connection with local v0 dev server."]}),(0,t.jsx)("div",{className:"p-1",children:(0,t.jsx)("p",{className:"text-sm whitespace-pre-wrap font-mono bg-gray-100 p-2",children:(0,ev.stringifyMessageContent)(n.content,{defaultValue:"Established connection with local v0 dev server."})})})]})})}function eK(e){let{message:n,className:i}=e;return(0,t.jsx)(eO.UserMessageLayout,{className:i,id:n.id,messageAuthorId:n.authorId,children:(0,t.jsxs)("details",{children:[(0,t.jsxs)("summary",{className:"inline-flex items-center gap-1 rounded bg-black/15 px-1.5 py-0.5 text-sm text-black cursor-pointer",children:[(0,t.jsx)(eX.default,{className:"h-3.5 w-3.5"}),"User has made some changes directly to the local project."]}),(0,t.jsx)("div",{className:"p-1",children:(0,t.jsx)("p",{className:"text-sm whitespace-pre-wrap font-mono bg-gray-100 p-2",children:(0,ev.stringifyMessageContent)(n.content)})})]})})}var eZ=e.i(889938),eJ=e.i(780292);function eY(e){let{activeForkKey:t}=(0,h.useChatMessages)(),{atoms:n,actions:i}=(0,eI.useCurrentChatPrompt)(),{cancelEditingMessage:r}=i,o=(0,eJ.useAtomValue)(n.editingMessage),s={effect:void 0,onClick:void 0};if(!o||!t)return s;let a=t.indexOf(o.id),c=t.indexOf(e.id);return c>a&&(s.effect="dimmed"),c===a&&(s.effect="pulse"),s.onClick=()=>{("pulse"===s.effect||"dimmed"===s.effect)&&r()},s}function eG(e){let{label:n,value:i}=e;return(0,t.jsxs)("div",{className:"text-label-12-mono text-[10px] text-gray-500",children:[n,": ",(0,t.jsx)("span",{className:"text-gray-700",children:i})]})}function eQ(e){let{details:n}=e;return(0,t.jsx)("div",{className:"flex flex-wrap gap-2 py-1",children:n.filter(Boolean).map((e,n)=>(0,t.jsx)(eG,{label:e.label,value:e.value},n))})}var e$=e.i(236699),e0=e.i(504066);let e1=(0,ea.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M13.0138 8C13.0138 10.4853 10.999 12.5 8.51376 12.5C6.02848 12.5 4.01376 10.4853 4.01376 8C4.01376 5.51472 6.02848 3.5 8.51376 3.5C10.999 3.5 13.0138 5.51472 13.0138 8ZM14.5138 8C14.5138 11.3137 11.8275 14 8.51376 14C5.20005 14 2.51376 11.3137 2.51376 8C2.51376 4.68629 5.20005 2 8.51376 2C11.8275 2 14.5138 4.68629 14.5138 8ZM9.26376 5.75V5H7.76376V5.75V8V8.75H9.26376V8V5.75Z" fill="currentColor"/>'),e2=(0,i.memo)(function(e){let{createdAt:n,className:r=""}=e,o=(0,i.useMemo)(()=>n?(0,s.formatMessageTimestamp)(new Date(n)):null,[n]);return o?(0,t.jsxs)("div",{className:"flex items-center gap-1 px-1 text-gray-500 ".concat(r),children:[(0,t.jsx)(e1,{className:"size-4"}),(0,t.jsx)("span",{className:"text-xs py-1 rounded-md pointer-events-none whitespace-nowrap",children:o})]}):null}),e5=["added-environment-variables","added-integration","forked-block","reverted-block","sync-git"],e3=(0,i.memo)(function(e){let{message:r,forkKeyOptions:o,isLastMessage:s,awaitingResponse:a}=e,{setConfirmDelete:c}=O(),l=(0,N.useT)(),{user:u}=(0,H.useUser)(),{actions:{startEditingMessage:d}}=(0,eI.useCurrentChatPrompt)(),{isCopied:h,copyToClipboard:p}=(0,e0.useCopyToClipboard)({timeout:2e3}),{isCopied:f,copyToClipboard:m}=(0,e0.useCopyToClipboard)({timeout:2e3}),g=(0,i.useMemo)(()=>(null==u?void 0:u.isAdminMode)?(0,eV.calculateTokens)([r]):void 0,[r,u]),v=r.id,y=eY(r),[b]=(0,ee.useRateLimit)(),x=(null==b?void 0:b.remaining)===0,w=!(0,i.useMemo)(()=>(0,ev.stringifyMessageContent)(r.content),[r.content]),C=(0,i.useMemo)(()=>{let e={...r.content,parts:r.content.parts.filter(e=>"refinement-element"!==e.type)};return(0,ev.stringifyMessageContent)(e).length},[r.content]),S=(0,i.useMemo)(()=>(0,t.jsxs)(t.Fragment,{children:[!w&&(0,t.jsx)(ez.Action,{"aria-label":l("userMessage.copyMessage"),tooltipDirection:"bottom",onClick:()=>{p((0,ev.stringifyMessageContent)(r.content)||"").then(()=>n.toast.success(l("userMessage.copiedToClipboard"))).catch(()=>n.toast.error("Failed to copy message to clipboard"))},tooltip:l("userMessage.copyMessage"),children:(0,t.jsx)(e$.CopyCheck,{isCopied:h})}),(0,t.jsx)(eP,{forkKeyOptions:o,message:r})]}),[l,r,w,h,o,p]),k=(0,i.useMemo)(()=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e2,{createdAt:r.createdAt}),(0,t.jsx)(ez.Action,{"aria-label":l("userMessage.shareMessage"),className:"author-action",onClick:()=>{m("".concat(window.location.origin).concat(window.location.pathname,"#").concat(r.id)).then(()=>{n.toast.success(l("userMessage.messageLinkCopied")),(0,j.track)("CopyMessageLink",{messageId:r.id})}).catch(()=>n.toast.error("Failed to copy message link to clipboard"))},tooltipDirection:"bottom",tooltip:l("userMessage.shareMessage"),children:(0,t.jsx)(e$.CopyCheck,{customIcon:(0,t.jsx)(eH.Link,{}),isCopied:f})},r.id+"@share"),(0,t.jsx)(ez.Action,{"aria-label":l("userMessage.editMessage"),className:"author-action",disabled:x,onClick:()=>{d({...r}),(0,j.track)("OpenEditUserMessage",{messageId:r.id})},tooltipDirection:"bottom",tooltip:x?l("userMessage.limitReached"):l("userMessage.editMessage"),children:(0,t.jsx)("span",{"aria-hidden":!0,children:(0,t.jsx)(eD.PencilEdit,{className:"pointer-events-none"})})},r.id),(0,t.jsx)(ez.Action,{"aria-label":l("userMessage.deleteMessage"),className:"author-action",tooltipDirection:"bottom",onClick:()=>{c(r.id),(0,j.track)("OpenDeleteMessage",{messageId:r.id})},tooltip:l("userMessage.deleteMessage"),children:(0,t.jsx)("span",{"aria-hidden":!0,children:(0,t.jsx)(eF.Trash,{className:"pointer-events-none"})})},r.id+"@delete")]}),[l,x,r,d,c,m,f]),M=(0,i.useMemo)(()=>(0,t.jsx)(eB.MessageAttachmentPills,{refinementElementLabels:(0,eZ.getRefinementElementLabelsFromContent)(r.content),attachments:r.attachments,className:"pb-1 pt-1.5"}),[r]);return r.type&&e5.includes(r.type)?null:(0,eU.isRemoteSessionHandshakeMessage)(r)?(0,t.jsx)(eW,{message:r}):(0,eU.isRemoteLocalChangeMessage)(r)?(0,t.jsx)(eK,{message:r}):(0,t.jsxs)(eO.UserMessageLayout,{id:v,actions:S,hideActions:a,awaitingResponse:a,hoverActions:k,attachments:M,isLastMessage:s,messageAuthorId:r.authorId,effect:y.effect,messageLength:C,onEffectClick:y.onClick,children:[w?(0,t.jsx)("i",{className:"pl-1 -skew-x-10 text-gray-500 text-label-14",children:"No message content"}):(0,t.jsx)(eR.MessageContent,{message:r}),(null==u?void 0:u.isAdminMode)&&g&&(0,t.jsx)(eG,{label:"Estimation",value:g})]})});var e4=e.i(431734),e6=e.i(324042),e7=e.i(40114),e8=e.i(233327),e9=e.i(643611),te=e.i(612336),tt=e.i(545102),tn=e.i(118376);function ti(e){let{message:n}=e,r=(0,i.useRef)(null),o=(0,i.useRef)(null),{project:s}=(0,z.useChatMetadata)(),a=(0,N.useT)(),c=(0,i.useMemo)(()=>JSON.stringify(n.content).includes("footnoteReference"),[n.content]);return"assistant"===n.role&&"context"in n&&n.context&&0!==n.context.length&&c?(0,t.jsxs)("div",{ref:r,children:[!n.streaming&&(0,t.jsxs)("div",{className:"grid gap-1.5",children:[(0,t.jsx)("p",{className:"select-none pl-px text-sm leading-none text-gray-500",children:a("messageCitations.title")}),(0,t.jsx)("div",{className:"no-scrollbar flex w-full -translate-x-1 gap-2 overflow-x-auto p-1 pb-3",children:n.context.map((e,n)=>{let i=new URL(e.url).hostname,r=e.url.includes("vercel-storage")&&void 0!==s;return"ui"===e.type?null:(0,t.jsx)(P.Button,{asChild:!0,className:"group/citation flex h-auto w-[210px] flex-col items-start justify-start gap-1 whitespace-normal px-2 py-1.5 text-left text-sm",variant:"secondary",children:(0,t.jsxs)("a",{className:"min-w-0",href:e.url,ref:0===n?o:null,rel:"noopener noreferrer",target:"_blank",title:e.url,children:[(0,t.jsxs)("div",{className:"flex w-full items-center gap-1.5 font-medium",children:[r?(0,t.jsx)(tt.ProjectIcon,{size:"xs",color:s.settings.color,icon:(0,tn.cleanIconName)(s.settings.icon)}):(0,t.jsx)(e9.CitationSourceIcon,{className:"shrink-0",knowledgeSource:i}),(0,t.jsx)("div",{className:"truncate",children:r?e.title:i}),(0,t.jsxs)("div",{className:"relative ml-auto flex size-4 shrink-0 items-center justify-center overflow-hidden rounded-full bg-gray-200 text-xs text-gray-500",children:[n+1,(0,t.jsx)("div",{className:"absolute inset-0 flex size-4 shrink-0 items-center justify-center bg-gray-200 text-gray-900 opacity-0 transition-all group-hover/citation:opacity-100 group-focus/citation:opacity-100 group-focus-visible/citation:opacity-100",children:(0,t.jsx)(te.ArrowUpRightSmall,{})})]})]}),(0,t.jsx)("div",{className:"w-full truncate break-all text-xs font-normal text-gray-500",children:s&&r?s.name:(0,t.jsxs)(t.Fragment,{children:[e.title,e.description&&(0,t.jsxs)(t.Fragment,{children:[" - ",e.description]})]})})]})},n)})})]}),(0,t.jsx)(e8.CitationsPortalRenderer,{citations:n.context.filter(e=>!!e).map((e,t)=>({...e,knowledgeSource:new URL(e.url).hostname,index:t+1,messageId:n.id}))})]}):null}var tr=e.i(612161);function to(e){let{actions:n,message:i,finishReason:r}=e,{user:o}=(0,H.useUser)(),s=function(e){let t=e.length;if(!t)return null;if(1===t){if(e.includes("delete-message"))return"Please delete your message and try again.";if(e.includes("edit-message"))return"Please edit your message and try again."}let n=2===e.length,i=n&&e.includes("new-chat")&&e.includes("delete-message"),r=n&&e.includes("edit-message")&&e.includes("delete-message"),o=n&&e.includes("delete-message")&&e.includes("retry");return i?"Please start a new chat or delete your message.":r?"Please edit or delete your message and try again.":o?"Please delete or retry your message.":"Please edit, retry or delete your message."}(n);return(0,t.jsxs)("div",{className:"flex h-[34px] flex-1 items-center gap-2 rounded-md bg-red-100 p-2 text-sm text-red-600",children:[(0,t.jsx)(tr.Stop,{}),i," ",s,(null==o?void 0:o.isAdminMode)&&r?(0,t.jsxs)("p",{className:"font-bold",children:["[ADMIN_ONLY]: ",r]}):null]})}var ts=e.i(127558),ta=e.i(889800);function tc(e){return(0,t.jsx)(ts.AnimatedIcon,{variants:{hover:{rotate:60},tap:{rotate:360,interruptible:!1,transition:{duration:1,ease:[.27,.34,.22,.97]}},idle:{rotate:0}},children:(0,t.jsx)(ta.RefreshClockwise,{"aria-hidden":!0,...e})})}var tl=e.i(422383);function tu(){return(0,t.jsx)(ts.AnimatedIcon,{variants:{hover:{y:-2,x:-1,rotate:-12}},children:(0,t.jsx)(tl.ThumbUp,{"aria-hidden":!0})})}var td=e.i(625402),th=e.i(230869);let tp={"input-too-long":{message:"Your message or the text content of your attachment(s) exceeds the maximum length.",actions:["delete-message","edit-message"]},"invalid-image":{message:"The image(s) attached could not be processed.",actions:["delete-message","edit-message"]},"large-image":{message:"The image(s) attached exceed the maximum size.",actions:["delete-message","edit-message"]},"too-many-attachments":{message:"You have reached the limit for total attachments in a single chat.",actions:["new-chat","delete-message","edit-message"]},"content-filtering":{message:"The response was blocked by the content filtering policy.",actions:["delete-message","edit-message"]},"failed-to-process-image":{message:"Unable to process image.",actions:["delete-message","retry"]},"image-exceeds-dimensions":{message:"The image(s) attached exceed the maximum width and height allowed.",actions:["delete-message","edit-message"]},overloaded:{message:"We are currently experiencing high traffic. Please try again in a few minutes.",actions:[]},default:{message:"Something went wrong.",actions:["retry","edit-message","delete-message"]}};var tf=e.i(19922),tm=e.i(292273),tg=e.i(917372),tv=e.i(491341);let ty=(0,ea.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M8.75 0.189331L9.28033 0.719661L15.2803 6.71966L15.8107 7.24999L15.2803 7.78032L13.7374 9.32322C13.1911 9.8696 12.3733 9.97916 11.718 9.65188L9.54863 13.5568C8.71088 15.0648 7.12143 16 5.39639 16H0.75H0V15.25V10.6036C0 8.87856 0.935237 7.28911 2.4432 6.45136L6.34811 4.28196C6.02084 3.62674 6.13039 2.80894 6.67678 2.26255L8.21967 0.719661L8.75 0.189331ZM7.3697 5.43035L10.5696 8.63029L8.2374 12.8283C7.6642 13.8601 6.57668 14.5 5.39639 14.5H2.56066L5.53033 11.5303L4.46967 10.4697L1.5 13.4393V10.6036C1.5 9.42331 2.1399 8.33579 3.17166 7.76259L7.3697 5.43035ZM12.6768 8.26256C12.5791 8.36019 12.4209 8.36019 12.3232 8.26255L12.0303 7.96966L8.03033 3.96966L7.73744 3.67677C7.63981 3.57914 7.63981 3.42085 7.73744 3.32321L8.75 2.31065L13.6893 7.24999L12.6768 8.26256Z" fill="currentColor"/>');var tb=e.i(216445),tx=e.i(556355),tw=e.i(827728),tC=(0,S.createServerReference)("4085258de4e363d52c4041544f6628a52d0ab8ba5f",S.callServer,void 0,S.findSourceMapURL,"getRawMessageContent"),tj=e.i(51940);function tS(){let{data:e,mutate:t}=(0,C.default)("showAdminRetryDialog",null,{fallbackData:null}),{user:n}=(0,H.useUser)();return{showAdminRetryDialog:(null==n?void 0:n.isAdminMode)?e:null,setAdminRetryDialog:t}}let tk=e=>{let{messageId:n}=e,{setAdminRetryDialog:i}=tS();return(0,t.jsxs)(tx.DropdownMenuItem,{onClick:()=>i(n),children:[(0,t.jsx)(ty,{}),"Edit Response"]})},tM=e=>{let{submit:r}=e,{showAdminRetryDialog:o,setAdminRetryDialog:s}=tS(),[a,c]=(0,tw.useLocalStorage)("admin-retry-message",""),[l,u]=(0,i.useTransition)();return o?(0,t.jsxs)(I.Modal,{open:!!o,onOpenChange:()=>s(null),children:[(0,t.jsx)(I.ModalHeader,{children:(0,t.jsx)(I.ModalTitle,{children:"Retry Message (AI Team Only)"})}),(0,t.jsxs)("form",{onSubmit:e=>{a&&o&&(e.preventDefault(),s(null),r({action:"retry",forceResponse:a,assistantMessageId:o}))},children:[(0,t.jsx)(I.ModalContent,{children:(0,t.jsx)(tb.Textarea,{asChild:!0,children:(0,t.jsx)(tj.ResizableTextArea,{value:a,onChange:e=>c(e.target.value),placeholder:"Enter your messsage here...",minHeight:80,maxHeight:192})})}),(0,t.jsxs)(I.ModalFooter,{className:"mt-4 flex w-full items-center justify-between",children:[(0,t.jsxs)(P.Button,{type:"button",variant:"secondary",onClick:()=>{u(async()=>{try{if(!o)throw Error("No message id");let e=await tC({payload:{messageId:o}});if("error"in e)throw Error(e.error);if(!e.rawContent)throw Error("No raw content saved in message");c(e.rawContent)}catch(e){if(e instanceof Error)return void n.toast.error(e.message);n.toast.error("An error occurred")}})},disabled:l,children:["Sync Raw Content",l?(0,t.jsx)(q.Spinner,{}):null]}),(0,t.jsx)(P.Button,{type:"submit",children:"Submit"})]})]})]}):null};var tT=e.i(978855);function t_(e){let{text:n,isLoading:i,files:r,displayFiles:o}=e,s=(0,N.useT)(),a=r?r.map(e=>({file:e,component:(0,t.jsxs)("div",{className:"flex items-center font-mono text-[13px]",children:[(0,t.jsx)("span",{className:"mr-2",children:""}),e]},e)})).map((e,n)=>{let{file:r,component:o}=e;return i?(0,t.jsx)(G.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{delay:.3+.1*n,duration:.2},children:o},r):o}):null;return(0,t.jsx)(tT.Thinking,{text:n||s("messages.loadingText"),forceOpen:o,isLoading:i,children:a})}var tI=e.i(329046);let tP=(0,ea.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M9 7.6736V7V2.5H7V7V7.6736L6.49655 8.12111L4.38279 10L11.6172 10L9.50345 8.12111L9 7.6736ZM5.5 2.5H4V1H5.5H7H9H10.5H12V2.5H10.5V7L14.0735 10.1765C14.6628 10.7003 15 11.4511 15 12.2396C15 13.7641 13.7641 15 12.2396 15H3.7604C2.23587 15 1 13.7641 1 12.2396C1 11.4511 1.33718 10.7003 1.92649 10.1765L5.5 7V2.5ZM2.5 12.2396C2.5 11.9717 2.58527 11.7133 2.7398 11.5L13.2602 11.5C13.4147 11.7133 13.5 11.9717 13.5 12.2396C13.5 12.9357 12.9357 13.5 12.2396 13.5H3.7604C3.0643 13.5 2.5 12.9357 2.5 12.2396Z" fill="currentColor" />');var tL=(0,S.createServerReference)("40c901dd82ead1d6245dffdfd72358c7d688fcdd9e",S.callServer,void 0,S.findSourceMapURL,"permanentlySaveMessageObservability");let tN=e=>{let{parentId:r,messageId:o}=e,s=(0,f.useChatId)(),[a,c]=(0,i.useTransition)();return(0,t.jsxs)(tx.DropdownMenuItem,{disabled:a,onClick:()=>{c(async()=>{try{let e=await tL({payload:{messageId:o}});if(!("success"in e))throw Error(e.error);let t="{\n  type: 'edit-message',\n  chatId: '".concat(s,"',\n  userMessageId: '").concat(r,"',\n  assistantMessageId: '").concat(o,"',\n  description: INSERT_DESCRIPTION_HERE,\n  accessWith: 'EVAL_TEAM',\n  scorer: output => {\n    return { passed: true }\n  },\n},\n");await navigator.clipboard.writeText(t),n.toast.success("Copied eval, now paste to `packages/evals/lib/chat/data.ts`")}catch(e){if(e instanceof Error)return void n.toast.error(e.message);n.toast.error("An error occurred")}})},children:[a?(0,t.jsx)(q.Spinner,{}):(0,t.jsx)(tP,{}),(0,t.jsx)("span",{children:"Create Eval"})]})};var tA=i;class tE extends tA.default.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t)}render(){let{hasError:e}=this.state,{fallback:n,children:i}=this.props;return e?null!=n?n:(0,t.jsx)("h2",{children:"Something went wrong."}):i}constructor(e){super(e),this.state={hasError:!1,error:null}}}let tO=(0,i.memo)(function(e){let{message:r,isLastMessage:o,isLoading:s,isStreaming:a,forkKeyOptions:c,submit:l,setChatState:u}=e,d=(0,N.useT)(),p=r.id,{chatId:f}=(0,h.useChatId)(),{user:m}=(0,H.useUser)(),{isCopied:g,copyToClipboard:v}=(0,e0.useCopyToClipboard)({timeout:2e3}),[y]=(0,ee.useRateLimit)(),b=(null==y?void 0:y.remaining)===0,{isLoading:x,canVote:w}=(0,tf.useCanVoteOnMessage)(),{scp:C,age:S}=(0,V.useFlags)(),k=eY(r),{isLlmError:M,errorCategory:T="default"}=(0,i.useMemo)(()=>(0,th.isLlmError)(r),[r]),{message:_,actions:I}=tp[T],L=I.includes("retry"),A=a&&o||x,E=(0,i.useCallback)(async()=>{try{var e;let t=null==(e=document.getElementById(p))?void 0:e.querySelector("[data-seg=root]");if(!t)throw Error("Root container not found");let i=new DocumentFragment;t.childNodes.forEach(e=>{i.appendChild(e.cloneNode(!0))});let r=(0,e7.fragmentToMarkdown)(i,t,!1,!1,!1);await v(r),n.toast.success(d("botMessage.copiedToClipboard"))}catch(e){console.error(e),n.toast.error("Failed to copy message to clipboard")}},[p,v,d]),O=(0,i.useCallback)(async()=>{await Promise.all([l({action:"retry",assistantMessageId:r.id,revalidateVercelEnvAndIntegrations:!0}),(0,j.track)("SubmitRetryBotMessage",{messageId:r.id})])},[l,r.id]),R=(0,i.useMemo)(()=>(0,t.jsxs)(t.Fragment,{children:[w?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(tD,{botMessage:r,className:"size-6 rounded-md text-gray-500 hover:text-gray-900 focus:text-gray-900",size:"xs",variant:"ghost",setChatState:u}),(0,t.jsx)(tI.DownvoteButton,{className:"size-6 rounded-md text-gray-500 hover:text-gray-900 focus:text-gray-900",messageId:r.id,tooltip:d("botMessage.downvote"),variant:"message"})]}):null,M?null:(0,t.jsx)(P.Button,{className:"size-6 rounded-md text-gray-500 hover:text-gray-900 focus:text-gray-900",size:"xs",onClick:E,tooltip:d("botMessage.copy"),tooltipDirection:"bottom",variant:"ghost",children:(0,t.jsx)(e$.CopyCheck,{isCopied:g})}),"message"!==r.type&&"added-integration"!==r.type&&r.type?null:(0,t.jsxs)(t.Fragment,{children:[!M||L?(0,t.jsx)(P.Button,{className:"size-6 rounded-md text-gray-500 hover:text-gray-900 focus:text-gray-900",disabled:s||b,"aria-label":"Retry Message",onClick:O,size:"xs",tooltip:"".concat(d("botMessage.retry")).concat(b?" - ".concat(d("botMessage.limitReached")):""),tooltipDirection:"bottom",variant:"ghost",children:(0,t.jsx)(tc,{})}):null,(0,t.jsx)(eP,{forkKeyOptions:c,message:r})]}),(null==m?void 0:m.isAdminMode)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(tM,{submit:l}),(0,t.jsxs)(tx.DropdownMenu,{children:[(0,t.jsx)(tx.DropdownMenuTrigger,{asChild:!0,className:"max-w-[200px]",children:(0,t.jsxs)(P.Button,{size:"xs",className:"rounded-md text-gray-500 hover:text-gray-900 focus:text-gray-900 items-center gap-1 flex",tooltip:"View Internal (AI Team only)",tooltipDirection:"bottom",variant:"ghost",children:[(0,t.jsx)(tm.LockClosed,{})," Admin"]})}),(0,t.jsx)(tx.DropdownMenuContent,{align:"start",side:"bottom",children:(0,t.jsxs)(tx.DropdownMenuGroup,{children:[(0,t.jsx)(tx.DropdownMenuItem,{asChild:!0,children:(0,t.jsxs)(tv.default,{href:"/chat/internal/correct/".concat(f,"/new"),children:[(0,t.jsx)(tg.PreviewEye,{}),"Submit Correction"]})}),(0,t.jsx)(td.OpenMessageInInternalButton,{messageId:r.id}),(0,t.jsx)(td.OpenMessageInInternalBrowseButton,{messageId:r.id}),(0,t.jsx)(td.OpenMessageInInternalAgentLogsButton,{messageId:r.id}),(0,t.jsx)(td.OpenInBraintrustButton,{messageId:r.id,chatId:f}),r.parentId?(0,t.jsx)(tN,{parentId:r.parentId,messageId:r.id}):null,(0,t.jsx)(tk,{messageId:r.id})]})})]})]}):null]}),[w,r,u,d,M,L,s,b,c,null==m?void 0:m.isAdminMode,f,E,O]),D=(0,t.jsx)(e2,{createdAt:r.createdAt});if("added-integration"===r.type&&C)return null;let F="reverted-block"===r.type,B=!a&&!s&&Array.isArray(r.content.value)&&0===r.content.value.length&&!!r.createdAt&&Date.now()-new Date(r.createdAt).getTime()>2e3,z=M||B;if(F)return(0,t.jsx)(eO.BotMessageLayout,{id:p,isLastMessage:o,effect:k.effect,onEffectClick:k.onClick,actions:null,children:(0,t.jsx)(eR.MessageContent,{message:r,isLastMessage:o})});let U=null;if(!S){let e=null;r.grepQueries&&r.grepQueries.length?e="Searched for ".concat(r.grepQueries.map(e=>'"'.concat(e,'"')).join(", ")):r.relevantFiles&&r.relevantFiles.length>0&&(e="Added context (".concat(r.relevantFiles.length," file").concat(1===r.relevantFiles.length?"":"s",")")),U=e?(0,t.jsx)(t_,{files:r.relevantFiles,text:e}):null}let q=(0,t.jsxs)(t.Fragment,{children:[U,(0,t.jsx)(eR.MessageContent,{message:r,isLastMessage:o})]}),X=(0,t.jsx)(to,{actions:I,finishReason:r.finishReason,message:_});return(0,t.jsxs)(eO.BotMessageLayout,{id:p,isLastMessage:o,effect:k.effect,onEffectClick:k.onClick,actions:R,hoverActions:D,hideActions:A,children:[(0,t.jsx)(tE,{fallback:X,children:q}),z?X:null,(0,t.jsx)(ti,{message:r}),(0,t.jsx)(tR,{message:r})]})});function tR(e){let{message:n}=e,{user:r}=(0,H.useUser)(),o=(0,i.useMemo)(()=>{if(!(null==r?void 0:r.isAdminMode))return[];let e=[];return n.usage&&(e.push({label:"Completion",value:n.usage.completionTokens}),e.push({label:"Prompt",value:n.usage.promptTokens||0}),e.push({label:"Total",value:n.usage.totalTokens||0})),n.estimatedUsage&&e.push({label:"Estimation",value:n.estimatedUsage}),n.modelId&&e.push({label:"Model",value:n.modelId+(n.thinkingMode?"-".concat(n.thinkingMode):"")}),e},[n.estimatedUsage,n.modelId,n.thinkingMode,n.usage,null==r?void 0:r.isAdminMode]);return(null==r?void 0:r.isAdminMode)?(0,t.jsx)(eQ,{details:o}):null}function tD(e){let{type:i,botMessage:r,setChatState:o,...s}=e,a=(0,N.useT)(),{chatId:c,messageId:l,messageText:u,leafMessageId:d,userId:h,promptMessageId:p}=(0,e6.useVoteOptions)({messageId:r.id}),{isLoading:f,canVote:m}=(0,tf.useCanVoteOnMessage)();if(f||!m)return null;let g=async()=>{p&&l&&u&&d&&((0,j.track)("SubmitUpvote",{messageId:l,leafMessageId:d}),n.toast.success(a("botMessage.successToast")),o(e=>({messages:e.messages.map(e=>"id"in e&&e.id===l?{...e,vote:"upvote"}:e)})),await (0,e4.sendMessageFeedback)({feedback:"",reasons:[],chatId:c,messageId:l,leafMessageId:d,userId:h,type:"upvote",promptMessageId:p}))};return(0,t.jsx)(P.Button,{"aria-label":a("botMessage.upvote"),disabled:"upvote"===r.vote,onClick:g,tooltip:a("botMessage.upvote"),tooltipDirection:"bottom",type:i,...s,children:(0,t.jsx)(tu,{})})}var tF=e.i(668887),tH=e.i(268516),tB=e.i(370912),tz=e.i(862664);e.i(350097);var tV=e.i(76866),tU=e.i(119317);e.i(530135),e.i(794593);var tq=e.i(194433);function tX(){let{user:e}=(0,H.useUser)(),{authorId:t}=(0,z.useChatMetadata)(),{messages:o,activeForkKey:s}=(0,h.useChatMessages)();(0,tF.useDesignModeEnabled)(),(0,h.useSetChatState)(),(0,c.useSetActiveBlockState)();let{getBlockCreatedAt:a}=(0,tB.useBlockCreatedAt)(),l=(0,c.useActiveBlockState)(),u=null==l?void 0:l.id,{history:p,currentBlockIndex:f}=(0,d.useBlockHistory)({blockId:u,searchAll:!0}),{setPulsePreview:m}=(0,d.useSetPulsePreview)(),{getBlockDeployed:g}=(0,tz.useDeployedBlocks)(),{scrollToHash:v}=(0,E.useScrollToMessage)(),y=(0,r.useRouter)(),[b,x]=(0,tU.useHistoryPanel)(),[w,C]=(0,i.useState)(null),[j,S]=(0,i.useState)(null),{restoreVersion:k,isRestoring:M}=(0,tV.useRestoreBlockVersion)(u);return(0,i.useCallback)((e,t)=>{C(e),k(e,t,{onSuccess:()=>{x(!1)},onFinally:()=>{C(null),S(null)}})},[k,x]),(0,i.useCallback)(e=>{try{(0,i.startTransition)(async()=>{let t=await (0,tq.forkBlock)(e);if(!t||"string"!=typeof t)return void n.toast.error("error");y.push("/chat/".concat(t)),x(!1)})}catch(e){console.log(e),n.toast.error("error")}},[y,x]),null==e||e.id,null}function tW(e){let{isMobile:n,justSubmitted:o,onSubmit:c}=e,{messages:l,activeForkKey:d}=(0,h.useChatMessages)(),{isLoading:f,isStreaming:m,isRestoring:g,initialStreamPromise:v}=(0,h.useChatLoadingState)(),{expectUser:y}=(0,H.useUser)(),{setShowSignInDialog:b}=(0,K.useSignInDialog)(),[w]=(0,ee.useRateLimit)(),{canWriteToChat:C}=(0,z.useChatMetadata)(),j=(0,tF.useDesignModeEnabled)(),S=(0,u.useIsChatPage)(),k=!!((null==w?void 0:w.remaining)!==void 0&&w.remaining<=0),M=(0,et.getAnonId)(),T=(0,i.useCallback)(e=>{b({content:"new"===e.action&&(e.content||!1)})},[b]),_=function(e){let t=(0,i.useRef)(["",null]);return(0,i.useMemo)(()=>{let[n,i]=t.current,r=e.reduce((e,t)=>e+"@"+t.id,"");if(n===r)return i;let o=(0,p.computeForkKeyOptions)(e);return t.current=[r,o],o},[e])}(l),I=(0,i.useCallback)(e=>_.get(e.parentId||p.ROOT_MESSAGE_KEY)||tZ,[_]),P=(0,i.useMemo)(()=>new Map(l.map(e=>[e.id,e])),[l]),L=(0,i.useMemo)(()=>{if(!d||0===d.length)return[];let e=d.filter(e=>!e.startsWith(x.OPT_RETRY_ID)).map(e=>P.get(e)).filter(Boolean),t=e[e.length-1];if(!t)return[];let n="assistant"===t.role&&(t.content.value||[]).some(e=>!!Array.isArray(e)&&0===e[0]);if(m||f||g){if("user"===t.role)return[...e,"spinner"];if("assistant"===t.role&&!n)return[...e.slice(0,-1),"spinner"]}return e},[d,m,f,g,P]),{vlistRef:N,scrollToIndex:A,handleScroll:O,containerRef:R,isAtTop:D,isAtBottom:B}=(0,E.useChatScroll)(),{submit:V,stopLlmResponse:U,setChatState:q}=(0,x.useV0Chat)({onSubmit:c});!function(e){let{submit:t,initialStreamPromise:n}=e,{prefillOptions:o}=(0,h.useChatPrefillOptions)(),s=(0,r.useRouter)(),a=(0,i.useRef)(!1),c=(0,h.useSetChatState)(),{setMetadata:l}=(0,z.useChatMetadata)(),{user:u}=(0,H.useUser)();(0,i.useEffect)(()=>{let e=!1;return(async()=>{if(!n||a.current||null===u)return;let i=await n;if(!e){if(!i)return c({initialStreamPromise:void 0});a.current=!0,e||t({action:"new",content:(null==o?void 0:o.query)?(0,ev.createMDXMessageContent)(o.query):null},i)}})(),()=>{e=!0}},[n,o,s,u,t,c,l])}({submit:V,initialStreamPromise:v});let X=(0,i.useMemo)(()=>{if(!d||!L.length)return[];let e=L.includes("spinner"),n=L.filter(Boolean).findLast(e=>"spinner"!==e&&"user"===e.role),i=null==n?void 0:n.id;return L.filter(Boolean).map((n,r)=>{let o=r===L.length-1,a="spinner-"+r;"spinner"!==n&&(a=(0,ek.getUIMessageKey)(n));let c="auto";o&&(c="max(200px, 40cqh)");let l=null;if("spinner"===n)l=(0,t.jsx)(eO.BotMessageLayout,{id:a,isLastMessage:!0,children:(0,t.jsx)(G.motion.div,{...(0,eO.motionReplyAnimationIf)(!0,.6),children:(0,t.jsx)(eA.MockThinkingV1,{})})});else{let r=I(n),s=e&&i===n.id;"user"===n.role&&(l=(0,t.jsx)(e3,{awaitingResponse:s,isLastMessage:o,forkKeyOptions:r,message:n},"user-message-".concat(n.id))),"assistant"===n.role&&(l=(0,t.jsx)(tO,{forkKeyOptions:r,isLastMessage:o,isLoading:f,isStreaming:m,message:n,submit:V,setChatState:q},"bot-message-".concat(n.id)))}return(0,t.jsx)("div",{className:(0,s.cn)("flex w-full empty:hidden [&>div]:w-full flex-col py-1.5 px-3",{"pt-4":0===r,"pb-4":o}),style:{minHeight:c},children:l},a)})},[d,L,I,f,m,V,q]),W=L.length;return(0,i.useEffect)(()=>{let e=W-1;if("spinner"!==L[e])return;let t=requestAnimationFrame(()=>{A(e,!0)});return()=>{cancelAnimationFrame(t)}},[W]),(0,i.useEffect)(()=>{let e=requestAnimationFrame(()=>{let e=W-1;e>=0&&A(e,!1)});return()=>{cancelAnimationFrame(e)}},[]),(0,t.jsxs)("div",{className:"flex flex-col size-full relative",children:[(0,t.jsx)(eb.ConditionalNavigationMarker,{enabled:S&&(o||!f),phase:"content",label:"ChatMessagesWithPrompt",routeOverride:"/chat/[slug]"}),(0,t.jsxs)("div",{"aria-roledescription":"chat messages",className:(0,s.cn)("relative size-full",tH.default.chatMessagesContainer),"data-testid":"chat-messages-container",id:a.SCROLL_CONTAINER_ID,role:"list",style:{contain:"strict"},children:[(0,t.jsx)(eN.ScrollFade,{visible:!B,direction:"bottom",color:"muted",orientation:"vertical"}),(0,t.jsx)(eN.ScrollFade,{visible:!D,direction:"top",color:"muted",orientation:"vertical"}),(0,t.jsx)("div",{className:"relative h-full w-full overflow-y-scroll visible-scrollbar @container/messages",ref:R,style:{...(0,eE.visibleStylesIf)(!j),overflowAnchor:"none"},id:a.SCROLL_INNER_CONTAINER_ID,...(0,eE.a11yHideIf)(j),children:(0,t.jsx)("div",{className:"group/message-list mx-auto w-full max-w-3xl",children:(0,t.jsx)(eS.Virtualizer,{ref:N,onScroll:O,scrollRef:R,children:X})})}),(0,t.jsx)(eL.DesignModeEditor,{}),(0,t.jsx)(tX,{})]}),(0,t.jsx)("div",{className:"group/message-list mx-auto w-full max-w-3xl sm:px-0 sm:pb-0 px-2 pb-2",children:C?(0,t.jsx)(Q.PromptForm,{isAtBottom:B,isMobile:n,isNewChat:!1,isSignedIn:y,isAnonymous:!!(!y&&M),stop:U,submit:y||M&&!k?V:T}):(0,t.jsx)(tK,{})}),(0,t.jsx)(F,{})]})}e.i(607391);let tK=(0,i.memo)(function(){let e=(0,c.useActiveBlockState)();return e?(0,t.jsxs)("form",{className:(0,s.cn)("material-medium relative flex items-center justify-between rounded-[12px] pl-3 pr-2 py-2 gap-3","border border-alpha-400 bg-blue-100 text-blue-700"),onSubmit:t=>{t.preventDefault(),e&&(0,ed.openDialog)({type:"forkBlock",data:{blockId:e.id,page:"chat",canWriteToChat:!1}})},children:[(0,t.jsx)("span",{className:"text-label-14 text-pretty",children:"This chat is view-only. Fork it to make changes."}),(0,t.jsx)(P.Button,{variant:"blue",size:"sm",type:"submit",children:"Fork chat"})]}):null}),tZ=[];var tJ=e.i(385671);function tY(e){let{title:n}=e;return"string"==typeof n&&n.length>0?(0,t.jsx)("title",{children:"".concat(n," - v0 by Vercel")}):null}function tG(e){let{isMobile:n,isAuthor:r,templates:o,emptyScreenRef:s}=e,{title:a}=(0,z.useChatMetadata)(),[c,l]=(0,i.useState)(!1),d=(0,i.useCallback)(()=>{l(!0),setTimeout(()=>l(!1),1e3)},[]),{initialStreamPromise:p}=(0,h.useChatLoadingState)(),f=(0,tJ.getChatLayoutAtoms)(),m=(0,eJ.useAtomValue)(f.isChatOnRight);return(0,u.useIsChatPage)()||void 0!==p?(0,t.jsxs)("div",{className:(0,U.default)("relative flex h-full min-w-0 flex-1 flex-col",m?"sm:pl-2":"sm:pr-2",!r&&"[&_.author-action]:hidden"),"data-testid":"full-chat",children:[(0,t.jsx)(tY,{title:a}),(0,t.jsx)(tW,{isMobile:n,onSubmit:d,justSubmitted:c}),(0,t.jsx)(W,{})]}):(0,t.jsx)(ew,{isMobile:n,onSubmit:d,ref:s,children:o})}var tQ=e.i(162061),t$=e.i(66596),t0=e.i(578834),t1=e.i(346557),t2=e.i(982225),t5=e.i(281290),t3=e.i(899488),t4=e.i(745587),t6=e.i(970256),t7=e.i(66045),t8=e.i(926224),t9=e.i(554912),ne=e.i(725415),nt=e.i(262553),nn=e.i(136046),ni=e.i(150218),nr=e.i(117803),no=e.i(293060),ns=e.i(284546),na=e.i(266148);function nc(e){let{activeBlockState:n,renderedBlock:r,remote:o}=e,l=null==n?void 0:n.id;!l&&o&&(l="@remote");let d=(0,u.useIsChatPage)(),{pipl:p}=(0,V.useFlags)(),{isReadOnlyMode:f}=(0,nt.useReadOnlyMode)(),{messagesLength:m}=(0,h.useChatMessagesLength)(),{isStreaming:g}=(0,h.useChatLoadingState)(),{activeTab:v}=(0,ns.useActiveTab)(),y=(0,tF.useDesignModeEnabled)(),b=(0,tJ.getChatLayoutAtoms)(),x=(0,tJ.getChatLayoutActions)(),w=(0,eJ.useAtomValue)(b.isInputPanelOpen),C=(0,eJ.useAtomValue)(b.isChatOnRight),S=(0,eJ.useAtomValue)(b.isDesktopPreviewSize),k=(0,c.useSetActiveBlockView)();(0,nr.useDesignModeEffects)();let M=(null==n?void 0:n.type)==="local"?n.meta.title||("@remote"===l?"Dev Server Preview":"Untitled"):(null==n?void 0:n.meta.project)||"Untitled";/[_-]/.test(M)&&(M=M.split(/[_-]/).map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" "));let T=(0,i.useCallback)(()=>k(!1),[k]),_=(0,i.useRef)(void 0);(0,i.useEffect)(()=>{var e,t;if(n&&!n.initial&&n.id!==(null==(e=_.current)?void 0:e.id)){let e=tQ.default.get(a.BLOCK_RESIZE_COOKIE);(0,j.track)("ViewBlock",{blockType:n.type,blockId:n.id,messageId:n.messageId,blockViewSizePercent:void 0===e?null:parseInt(e),forkedFromBlockId:null!=(t=n.forkedFromBlockId)?t:null}),_.current=n}},[n,T,k]);let I=(0,i.useMemo)(()=>f?(0,t.jsxs)("div",{className:"text-blue-700 text-balance text-center text-label-12 @[52rem]/block-header:text-label-14",children:[(0,t.jsxs)("span",{children:["Old versions are"," ",(0,t.jsx)("strong",{className:"text-blue-800 font-medium",children:"read-only"}),"."]}),(0,t.jsxs)("span",{className:"text-label-10",children:[" ","Restore or switch to latest to edit."]})]}):null,[f]),L=(0,i.useMemo)(()=>{let e=(0,t.jsx)("span",{className:(0,s.cn)("h-5 w-[1px] bg-gray-200 hidden sm:flex ",C?"ml-1":"mr-1")});return(0,t.jsxs)(t.Fragment,{children:[C?e:null,(0,t.jsx)(P.Button,{variant:"ghost",size:"sm",className:(0,s.cn)("hidden sm:flex text-gray-600 h-7",{"size-7":w,"h-7 pl-1.5 pr-0":!w}),onClick:x.toggleInputPanel,children:w?C?(0,t.jsx)(t0.ChevronDoubleRight,{}):(0,t.jsx)(t$.ChevronDoubleLeft,{}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(t1.Message,{}),"Chat"]})}),C||w?null:e]})},[x.toggleInputPanel,C,w]),N=(0,i.useMemo)(()=>(0,t.jsx)(P.Button,{variant:"ghost",size:"sm",onClick:x.toggleInputPanel,className:"sm:hidden size-7 text-gray-600 ",children:(0,t.jsx)(nn.SidebarLeft,{})}),[x.toggleInputPanel]);return d?(0,t.jsxs)("div",{className:"bg-background [&_.loader-fade-top]:to-background [&_.loader-fade-bot]:to-background [&_.loader-fade-top]:via-background/90 flex size-full flex-col items-stretch","data-testid":"desktop-block-panel",children:[(0,t.jsxs)("div",{className:"@container/block-header flex h-12 w-full shrink-0 items-center gap-1 px-2",children:[(0,t.jsxs)("div",{className:"flex w-full sm:max-w-1/4 max-w-fit shrink-1 items-center gap-0.5 sm:gap-1.5",children:[C?null:L,N,r.actions||(0,t.jsx)("h2",{className:"truncate font-medium",children:M})]}),(0,t.jsx)("div",{className:"min-w-0 flex-1 px-1",children:r.browserControls?r.browserControls:f?I:null}),(0,t.jsxs)("div",{className:"flex min-w-fit sm:w-1/4 items-center justify-end gap-1",children:[(0,t.jsx)(nl,{activeBlock:n}),y?null:(0,t.jsxs)(t.Fragment,{children:[r.designCursorToggle,r.consoleToggle,r.moreMenu]}),C?L:null]})]}),(0,t.jsxs)("div",{className:(0,s.cn)("h-full min-h-0 w-full min-w-0 @container/block-content justify-center flex overflow-y-scroll border-t border-transparent relative",{"border-alpha-200":S}),children:[(0,t.jsx)(no.DeviceContainer,{forceFullscreen:"code"===v,children:r.content}),!y&&p?(0,t.jsx)(na.Loader,{isGenerating:g,stableGenerationKey:"".concat(m)}):null]})]}):null}function nl(e){var r,o;let{activeBlock:a}=e,{ve:c}=(0,V.useFlags)(),{project:l}=(0,z.useChatMetadata)(),{envVars:u}=(0,$.useVercelProject)({v0ProjectId:null==l?void 0:l.projectId}),h=(0,i.useMemo)(()=>!!u&&(0,ne.getSQLExecEnvVars)(Object.keys(u)).length>0,[u]),{appendCodeOutputEvents:p,expandConsole:f}=(0,t9.useConsole)(null!=(r=null==a?void 0:a.id)?r:""),{activeScopeSlug:m}=(0,ey.useActiveScope)(),{activeFilePath:g}=(0,t4.useActiveFile)({blockId:null!=(o=null==a?void 0:a.id)?o:""}),{activeTab:v}=(0,ns.useActiveTab)(),y=(null==g?void 0:g.includes("scripts/"))&&"code"===v,b=null==g?void 0:g.endsWith(".sql"),x=null==g?void 0:g.endsWith(".py"),w=null==g?void 0:g.endsWith(".js"),C=b&&y&&(null==l?void 0:l.projectId)&&h,j=y&&(x||w),[S,k]=(0,i.useState)(!1),M=(0,i.useCallback)(async()=>{var e,t,i,r,o;if(!C&&!j||S)return;k(!0);let s=(0,t8.parseMultiFileSource)({source:null!=(e=null==a?void 0:a.source)?e:"",blockType:"code-project",blockId:null!=(t=null==a?void 0:a.id)?t:""}).find(e=>e.meta.file===g);if(!s)throw Error("Script file not found");let c=((null==a?void 0:a.id)||"")+":"+g,u={error:"No result"};if(C)try{if(!m)return void n.toast.error("Error",{description:"Missing active scope"});if(!l.projectId)return void n.toast.error("Error",{description:"Missing project ID"});u=await (0,t6.doSqlExecution)({props:{language:"sql",source:s.source,meta:{file:g,transaction:s.meta.transaction},closed:!0,originalCode:s.source},v0ProjectId:l.projectId,operationId:c})}catch(e){n.toast.error("Error applying script",{description:e instanceof Error?e.message:"Unknown error"})}else j&&(u=await (0,t7.doExecution)({language:x?"python":"javascript",source:s.source,meta:{file:g,transaction:s.meta.transaction},closed:!0,originalCode:s.source},c,null!=(i=null==l?void 0:l.vercelProjectId)?i:void 0));"error"in u?(p([{type:"output",blockId:null!=(r=null==a?void 0:a.id)?r:"",fileName:null!=g?g:"",content:u.error,timestamp:new Date().toISOString(),method:"stderr"}]),n.toast.error("Error",{description:u.error})):p((0,ni.transformExecutionOutputToEvents)(u,null!=(o=null==a?void 0:a.id)?o:"",null!=g?g:"")),null==f||f(),k(!1)},[C,j,S,null==a?void 0:a.source,null==a?void 0:a.id,g,f,m,l,x,p]);return a&&a.id?(0,t.jsxs)("div",{className:(0,s.cn)("flex items-center gap-1.5"),children:[y&&(b||x||w)&&c&&(0,t.jsx)(t3.CodeBlockButton,{"aria-label":"Run Code",onClick:M,disabled:S||!C&&!j,tooltip:{side:"bottom",content:S?"Running...":b&&!C?"No database connected":"Run Code"},className:"text-black",children:(0,t.jsx)("span",{"aria-hidden":!0,children:S?(0,t.jsx)(t5.Spinner,{size:16}):(0,t.jsx)(t2.PlayCircle,{})})}),(0,t.jsx)("div",{className:"sm:hidden",children:a.id?(0,t.jsx)(d.BlockHistorySelect,{separator:!1,blockId:a.id}):null})]}):null}var nu=e.i(365290),nd=e.i(403055),nh=e.i(101486),np=e.i(762585),nf=e.i(770858),nm=e.i(380105),ng=e.i(797173),nv=e.i(351853);function ny(e){let{block:r}=e,[o,s]=(0,i.useState)(),{chatId:a}=(0,h.useChatLoadingState)(),c=function(e){let{blockId:t,chatId:r}=e,o=(0,i.useRef)({sendFileUpdate:async(e,t)=>{}});return(0,i.useEffect)(()=>{async function e(e,t,i){try{(await fetch("/chat/api/vm/actions?cid=".concat(t,"&bid=").concat(i,"&type=update_files"),{method:"POST",body:JSON.stringify({filesMap:e})})).ok||n.toast.error("Failed to send file update. The VM may not be running.")}catch(e){console.error("Error sending file update:",e)}}let i={},s=(0,nv.default)(async()=>{let n={...i};return i={},await e(n,r,t)},1e3);async function a(e,t){i[e]=t,await s()}o.current.sendFileUpdate=a},[t,r]),o.current}({blockId:r.id,chatId:a}),{files:l,loadingPath:u}=(0,ng.useBlockFiles)({blockId:r.id,closed:r.closed,source:r.source,meta:r.meta});if("code-project"===r.meta.type&&l){var d;return(0,t.jsx)("div",{className:"h-full w-full",children:(0,t.jsx)(nm.MultiFileCode,{showDiffInfo:!1,activeFilePath:o||(null==(d=l[0])?void 0:d.meta.file),initialFileTreeSize:200,setActiveFile:s,files:l,loadingPath:u,blockId:r.id,source:r.source,onChange:()=>{},children:(()=>{let e=l.find(e=>{var t;return e.meta.file===(o||(null==(t=l[0])?void 0:t.meta.file))});return e?(0,t.jsx)(nf.CodeBlock,{language:e.lang,value:e.source,blockId:r.id,originalCode:e.originalCode,closed:!0,editable:!0,showLineNumbers:!0,caller:"v0",allowCopyCode:!0,allowDownloadCode:!0,fileName:e.meta.file,showQuickEditAnimation:!1,onEdit:t=>{c.sendFileUpdate(e.meta.file,t)}}):(0,t.jsx)("div",{className:"text-gray-500 p-4",children:"Select a file to view"})})()})})}return(0,t.jsx)("div",{className:"h-full w-full",children:(0,t.jsx)(nf.CodeBlock,{language:r.language,value:r.source,blockId:r.id,originalCode:r.source,closed:!0,editable:!0,showLineNumbers:!0,caller:"v0",allowCopyCode:!0,allowDownloadCode:!0,showQuickEditAnimation:!1})})}var nb=e.i(210045),nx=e.i(827511),nw=e.i(205341),nC=e.i(753533),nj=e.i(142219);let nS=new Map,nk=(0,nC.cacheResultById)(nS,()=>({selectedTab:(0,nw.atom)("preview"),previewSize:(0,nw.atom)("desktop"),showConsole:(0,nw.atom)(!0),url:(0,nw.atom)("/")})),nM=new Map,nT=(0,nC.cacheResultById)(nM,e=>{let t=nk(e);return{...t,deviceStyles:(0,nw.atom)(e=>{switch(e(t.previewSize)){case"phone":return{width:"40cqw",height:"71cqw"};case"tablet":return{width:"60cqw",height:"70cqw"};case"desktop":return{width:"100%",height:"100%"};default:return{}}})}});function n_(){let e=(0,h.assertChatId)((0,h.useChatId)().chatId);return{atoms:nT(e),actions:(0,i.useRef)(function(e){let t=nk(e);return{setSelectedTab:e=>{nj.store.set(t.selectedTab,e)},setPreviewSize:e=>{nj.store.set(t.previewSize,e)},setShowConsole:e=>{nj.store.set(t.showConsole,e)},toggleShowConsole:()=>{nj.store.set(t.showConsole,!nj.store.get(t.showConsole))},setUrl:e=>{nj.store.set(t.url,e)}}}(e)).current}}var nI=e.i(230222),nP=e.i(917806);let nL="30vh";function nN(e){let{blockId:n,chatId:i,status:r,subdomain:o}=e,{atoms:s}=n_(),a=(0,eJ.useAtomValue)(s.showConsole),c=(0,eJ.useAtomValue)(s.url),l=(0,nh.useVMStatus)({enabled:!0,bid:n,cid:i});o=l.subdomain||o;let u=l.status||r;return(0,t.jsxs)("div",{className:"w-full h-full flex flex-col relative",children:[(0,t.jsx)("div",{className:"@container/vm-preview flex-1 flex items-center justify-center overflow-y-scroll",children:(0,t.jsx)(nA,{chatId:i,children:o&&"running"===u?(0,t.jsx)(nb.Iframe,{iframeId:"vm-".concat(n),isPublished:!1,src:c,origin:(0,nP.getVMIframeOrigin)(o,n)}):(0,t.jsx)(nI.VMPending,{blockId:n,chatId:i})})}),(0,t.jsx)("div",{className:"flex relative border-gray-200 border-t ",style:{...(0,nu.transitionStyles)(["height"]),height:a?nL:0},children:(0,t.jsx)("div",{className:"absolute inset-x-0 top-0",style:{height:nL},children:(0,t.jsx)(nx.VMLogs,{chatId:i,stale:"empty"===u||"stopped"===u})})})]})}function nA(e){let{chatId:n,children:i}=e,r=nT(n),o=(0,eJ.useAtomValue)(r.previewSize),s=(0,eJ.useAtomValue)(r.deviceStyles);return(0,t.jsx)("div",{className:(0,nd.cn)("flex items-center justify-center w-full h-full","desktop"!==o&&"material-modal"),style:{...s,...(0,nu.transitionStyles)(["width","height","border-radius","background","box-shadow"],{duration:400})},children:i})}var nE=e.i(941088),nO=e.i(361658),nR=e.i(675395),nD=e.i(375106),nF=e.i(392736),nH=e.i(440813),nB=e.i(896608),nz=e.i(632624),nV=e.i(493177),nU=e.i(235009),nq=e.i(967122),nX=e.i(768619);function nW(){let{atoms:e}=n_(),n=(0,eJ.useAtomValue)(e.selectedTab);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(nK,{}),(0,t.jsxs)("div",{className:"flex-1 flex items-center justify-center",style:{...(0,eE.visibleStylesIf)("preview"===n),...(0,nu.transitionStyles)(["opacity"])},children:[(0,t.jsx)(nZ,{}),(0,t.jsx)(nJ,{})]})]})}function nK(){let{atoms:e}=n_();return(0,t.jsxs)(nU.TabsToggle,{defaultValue:"preview",atom:e.selectedTab,children:[(0,t.jsx)(nU.TabsToggleTrigger,{value:"preview",square:!0,children:(0,t.jsx)(nE.Eye,{})}),(0,t.jsx)(nU.TabsToggleTrigger,{value:"code",square:!0,children:(0,t.jsx)(nO.Code,{})})]})}function nZ(){let{atoms:e,actions:n}=n_(),r=(0,eJ.useAtomValue)(e.url),[o,s]=(0,i.useState)(r);return(0,t.jsx)("div",{className:"flex flex-1 items-center justify-center",children:(0,t.jsxs)("div",{className:"flex-1 max-w-[300px] h-7 border flex items-center border-gray-200 rounded-full px-[1px] group cursor-text focus-within:border-gray-300 transition-all",children:[(0,t.jsx)("input",{className:"flex-1 pl-2.5 text-gray-500 text-label-14 flex items-center outline-none",value:o,onChange:e=>s(e.target.value),placeholder:"/",onKeyDown:e=>{if("Enter"===e.key&&o){n.setUrl(o),e.preventDefault();return}}}),(0,t.jsx)(nG,{className:"!pr-2 w-fit rounded-r-[12px] rounded-l-[6px]"})]})})}function nJ(){return(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)(nY,{}),(0,t.jsx)(nQ,{})]})}function nY(){let[e,n]=(0,i.useState)(!1),{atoms:r,actions:o}=n_(),s=(0,eJ.useAtomValue)(r.showConsole);return(0,t.jsxs)(tx.DropdownMenu,{open:e,onOpenChange:n,children:[(0,t.jsx)(tx.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(n$,{children:(0,t.jsx)(nB.MoreHorizontal,{})})}),(0,t.jsx)(tx.DropdownMenuContent,{align:"end",className:"w-[150px]",sideOffset:8,children:(0,t.jsxs)(tx.DropdownMenuGroup,{children:[(0,t.jsxs)(tx.DropdownMenuItem,{onSelect:o.toggleShowConsole,children:[(0,t.jsx)(nV.Footer,{}),(0,t.jsx)("span",{children:s?"Hide Console":"Show Console"})]}),(0,t.jsxs)(tx.DropdownMenuItem,{children:[(0,t.jsx)(nF.External,{}),"Open in New Tab"]})]})})]})}function nG(e){var n;let{className:r,style:o}=e,[s,a]=(0,i.useState)(!1),c=(0,h.useChatId)().chatId,l=null==(n=(0,nq.useActiveBlockIdRef)())?void 0:n.current,u=(0,i.useCallback)(()=>{let e=document.querySelector("iframe[data-v0]");e&&e.contentWindow&&e.setAttribute("src",(0,nX.getIframeSrc)(e))},[]),[d,p]=(0,i.useState)(!1),{refresh:f}=(0,nh.useVMStatus)({enabled:!!l,cid:c,bid:l}),m=(0,i.useCallback)(async()=>{p(!0);try{if(!(await fetch("/chat/api/vm/actions?cid=".concat(c,"&bid=").concat(l,"&type=recreate"),{method:"POST"})).ok)throw Error("Failed to recreate VM");f()}catch(e){console.error("Error recreating VM:",e)}p(!1)},[c,l,f]);return(0,t.jsxs)(tx.DropdownMenu,{open:s,onOpenChange:a,children:[(0,t.jsx)(tx.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(n$,{className:r,style:o,children:(0,t.jsx)(ta.RefreshClockwise,{})})}),(0,t.jsx)(tx.DropdownMenuContent,{align:"end",className:"w-[200px]",side:"bottom",sideOffset:8,children:(0,t.jsxs)(tx.DropdownMenuGroup,{children:[(0,t.jsxs)(tx.DropdownMenuItem,{onSelect:()=>{console.log("Refresh page clicked"),u(),a(!1)},children:[(0,t.jsx)(nz.RotateClockwise,{}),"Refresh Page"]}),(0,t.jsxs)(tx.DropdownMenuItem,{onSelect:()=>{console.log("Kill and restart sandbox clicked"),m(),a(!1)},children:[(0,t.jsx)(t2.PlayCircle,{}),"Restart Sandbox"]})]})})]})}function nQ(){let{actions:e}=n_(),[n,r]=(0,i.useState)(!1),o=t=>{e.setPreviewSize(t)};return(0,t.jsxs)(tx.DropdownMenu,{open:n,onOpenChange:r,children:[(0,t.jsx)(tx.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(n$,{children:(0,t.jsx)(n0,{})})}),(0,t.jsx)(tx.DropdownMenuContent,{align:"end",className:"w-[150px]",side:"bottom",sideOffset:8,children:(0,t.jsxs)(tx.DropdownMenuGroup,{children:[(0,t.jsxs)(tx.DropdownMenuItem,{onSelect:()=>o("desktop"),children:[(0,t.jsx)(nR.DeviceDesktop,{}),"Desktop"]}),(0,t.jsxs)(tx.DropdownMenuItem,{onSelect:()=>o("tablet"),children:[(0,t.jsx)(nD.TabletDevice,{}),"Tablet"]}),(0,t.jsxs)(tx.DropdownMenuItem,{onSelect:()=>o("phone"),children:[(0,t.jsx)(nH.DevicePhone,{}),"Phone"]})]})})]})}function n$(e){let{children:n,...i}=e;return(0,t.jsx)(P.Button,{...i,variant:"ghost",size:"xs",className:(0,nd.cn)("h-6 w-6 text-gray-500 hover:text-gray-900",i.className),children:n})}let n0=(0,ea.withNewIcon)('\n<path d="M7 4.25C7.9665 4.25 8.75 5.0335 8.75 6V14C8.75 14.9665 7.9665 15.75 7 15.75H2C1.0335 15.75 0.25 14.9665 0.25 14V6C0.25 5.0335 1.0335 4.25 2 4.25H7ZM14 0.25C14.9664 0.250109 15.7499 1.03362 15.75 2V14C15.75 14.9664 14.9664 15.7499 14 15.75H9.75V14.25H14C14.138 14.2499 14.25 14.138 14.25 14V2C14.2499 1.86205 14.1379 1.7501 14 1.75H4C3.86193 1.75 3.75001 1.86193 3.75 2V3.25H2.25V2C2.25001 1.03351 3.03351 0.25 4 0.25H14ZM2 5.75C1.86193 5.75 1.75 5.86193 1.75 6V14C1.75 14.1381 1.86193 14.25 2 14.25H7C7.13807 14.25 7.25 14.1381 7.25 14V6C7.25 5.86193 7.13807 5.75 7 5.75H2ZM5 11.75C5.41421 11.75 5.75 12.0858 5.75 12.5C5.75 12.9142 5.41421 13.25 5 13.25H4C3.58579 13.25 3.25 12.9142 3.25 12.5C3.25 12.0858 3.58579 11.75 4 11.75H5Z" fill="currentColor"/>\n');function n1(e){let{drawerView:n=!1,blockId:i,chatId:r}=e,{atoms:o}=n_(),s=(0,eJ.useAtomValue)(o.selectedTab),a=(0,c.useActiveBlockState)(r),{status:l,subdomain:u}=(0,nh.useVMPreviewSubdomain)({enabled:!!r,bid:i,cid:r});return n?null:r&&i?(0,t.jsxs)("div",{className:"flex flex-col h-full w-full",children:[(0,t.jsx)("div",{className:"flex items-center py-2.5 px-3 gap-2 border-b border-alpha-200",children:(0,t.jsx)(nW,{})}),(0,t.jsxs)("div",{className:"flex w-full h-full justify-center items-center relative overflow-hidden",children:[(0,t.jsx)(n2,{visible:"preview"===s,children:(0,t.jsx)(nN,{subdomain:u,blockId:i,chatId:r,status:l})}),(0,t.jsx)(n2,{className:"z-20",visible:"code"===s,children:a?(0,t.jsx)(ny,{block:a}):(0,t.jsx)(np.Skeleton,{className:"w-full h-full"})})]})]}):"no chatid or blockid or drawerView"}function n2(e){var n;let{visible:i,children:r,...o}=e;return(0,t.jsx)("div",{...o,className:(0,nd.cn)("absolute inset-0 z-50 flex items-center justify-center bg-muted",o.className),style:{...(n=i,{...(0,eE.visibleStylesIf)(n),...(0,nu.transitionStyles)(["opacity","transform","filter"],{delay:100*!!n}),transform:"scale(".concat(n?1:1.005,")")}),...o.style},children:r})}var n5=e.i(79271),n3=e.i(775320);function n4(e){let{gridArea:n,from:r,to:o,containerRef:a}=e,{atoms:c,actions:l}=(0,n5.usePanelLayout)(),u=(0,eJ.useAtomValue)(c.resizingId),d=(0,eJ.useAtomValue)(c.panelOrder),{setIsResizing:h,resizePanel:p,closePanel:f,openPanel:m,isAutoCollapsible:g,getPanelMinRatio:v,setCursorState:y}=l,b=(0,i.useRef)({isActive:!1,startMouseX:0,containerLeft:0,containerWidth:0,currentMouseX:0,cursorState:"normal"}),x=!!(r&&o),w=(0,i.useCallback)(e=>{let t=b.current;if(!t.isActive||!r||!o)return;t.currentMouseX=e.clientX;let n=(e.clientX-t.containerLeft)/t.containerWidth,i=nj.store.get(c.panelsLayout),s=i.find(e=>e.id===r),a=i.find(e=>e.id===o);if(!s||!a)return;let l=d.findIndex(e=>e===r),u=0,h=0;for(let e=0;e<l;e++){let t=i.find(t=>t.id===d[e]);(null==t?void 0:t.visible)&&(u+=t.ratio),h+=n3.RESIZE_HANDLE_WIDTH}let x=n-(u+(h/t.containerWidth||0)),w=s.ratio+a.ratio;if(x>=0&&x<=w){let e=Math.max(0,Math.min(x,w)),t=v(r),n=v(o);if(!s.visible&&e>t)return void m(r);if(!a.visible&&w-e>n)return void m(o);if(s.visible&&a.visible){let i=Math.max(t,Math.min(w-n,e))-s.ratio;Math.abs(i)>.001&&p({index:l,delta:i})}}let C=v(r),j=v(o),S=s.visible&&s.ratio<=C+.02,k=a.visible&&a.ratio<=j+.02,M=Math.max(0,Math.min(x,w)),T=v(r),_=v(o),I=nj.store.get(c.cursorState),P="normal";!s.visible&&M<=T&&g(r)?P="expand-right":!a.visible&&w-M<=_&&g(o)?P="expand-left":S&&g(r)?P="collapse-left":k&&g(o)&&(P="collapse-right"),P!==I&&y(P),s.visible&&s.ratio<=C&&x<.3*C&&g(r)&&f(r),a.visible&&a.ratio<=j&&w-x<.3*j&&g(o)&&f(o)},[r,o,c.panelsLayout,c.cursorState,d,v,g,m,p,y,f]),C=(0,i.useCallback)(()=>{let e=b.current;if(r&&o&&e.isActive){let t=Math.abs(e.currentMouseX-e.startMouseX);if(t/e.containerWidth>.05){let t=nj.store.get(c.panelsLayout),n=t.find(e=>e.id===r),i=t.find(e=>e.id===o),s=e.currentMouseX>e.startMouseX;s&&n&&!n.visible&&g(r)?m(r):!s&&i&&!i.visible&&g(o)&&m(o)}}b.current.isActive=!1,y("normal"),h(null),window.removeEventListener("mousemove",w),window.removeEventListener("mouseup",C)},[h,w,y,r,o,c.panelsLayout,g,m]),j=(0,i.useCallback)(e=>{if(!x||!r||!o||!a.current)return;e.preventDefault();let t=a.current.getBoundingClientRect();b.current={isActive:!0,startMouseX:e.clientX,containerLeft:t.left,containerWidth:t.width,currentMouseX:e.clientX,cursorState:"normal"},y("normal"),h(n),window.addEventListener("mousemove",w,{passive:!0}),window.addEventListener("mouseup",C)},[r,o,x,n,h,a,w,C,y]),S=(0,i.useMemo)(()=>u===n,[u,n]);return(0,t.jsxs)("div",{role:"separator",tabIndex:S?0:-1,"aria-orientation":"vertical",style:{gridArea:n,width:n3.RESIZE_HANDLE_WIDTH},className:(0,s.cn)("group relative z-20 items-center justify-center outline-none sm:flex hidden",S?"pointer-events-none":"cursor-col-resize"),onMouseDown:j,"data-testid":"block-resize-handle",children:[(0,t.jsx)("div",{className:(0,s.cn)("absolute h-[80%] w-[1.5px] rounded-full opacity-0 group-hover:opacity-100 bg-gradient-to-b from-transparent via-gray-400 to-transparent ","group-focus-visible:via-blue-500 group-focus-visible:opacity-100","transform-[scaleY(0)] group-hover:transform-[scaleY(1)] group-focus-visible:transform-[scaleY(1)]"),style:{transform:S?"scale(1)":void 0,opacity:S?1:void 0,...(0,nu.transitionStyles)(["background","opacity","scale","transform"],{duration:300})}}),(0,t.jsx)("div",{className:(0,s.cn)("absolute inset-y-0 w-6",x?"":"pointer-events-none")}),(0,t.jsx)("div",{className:(0,s.cn)("absolute h-full max-h-16 w-1.5 rounded-full","opacity-0 group-hover:opacity-100","transform-[scale(0.75)] group-hover:transform-[scale(1)] group-focus-visible:transform-[scale(1)]",S?"bg-gray-500":"bg-gray-400",!x&&"hidden"),style:{opacity:S?1:void 0,maxHeight:S?48:36,transform:S?"scale(1)":void 0,...(0,nu.transitionStyles)(["max-height","transform","background","opacity"],{duration:100})}})]})}var n6=e.i(626085),n7=e.i(154032);let n8=(0,i.memo)(function(e){let{className:n}=e;return(0,t.jsx)("div",{className:(0,s.cn)("h-full w-full",n),children:(0,t.jsx)(np.Skeleton,{className:(0,s.cn)("h-full w-full",n)})})});function n9(e){let{id:n,children:r,className:o,noBackground:a,allowAutoCollapse:c=!1,minRatio:l,maxRatio:u}=e,{atoms:d,actions:h}=(0,n5.usePanelLayout)(),p=(0,eJ.useAtomValue)(d.panelOrder),f=(0,eJ.useAtomValue)(d.disableLayoutAnimations),m=(0,eJ.useAtomValue)(d.visiblePanels),g=(0,A.useIsMobile)(it),v=(0,eJ.useAtomValue)(d.isResizing),y=(0,n7.useIsWindowResizing)(),b=(0,eJ.useAtomValue)(d.mobilePanel),x=g?b!==n:!m.includes(n),w=m.length>0,C=p.indexOf(n)<p.indexOf(b),j=y||v,S=(0,i.useMemo)(()=>{let e=1;x&&!g&&(e=.98);let t=0;if(g&&(t=x?C?"-".concat(100,"%"):"".concat(100,"%"):"0px"),1!==e||0!==t)return"scale(".concat(e,") translateX(").concat(t,")")},[x,C,g]),k=(0,i.useMemo)(()=>x||g||j||f?0:200,[x,g,j,f]),M=(0,i.useMemo)(()=>j?0:g?200:x?75:200,[x,g,j]);(0,i.useEffect)(()=>(c?h.registerAutoCollapsiblePanel(n):h.unregisterAutoCollapsiblePanel(n),void 0!==l&&h.setPanelMinRatio(n,l),void 0!==u&&h.setPanelMaxRatio(n,u),()=>{h.unregisterAutoCollapsiblePanel(n),h.removePanelRatios(n)}),[c,l,u,n,h]);let T=(0,i.useMemo)(()=>y&&b!==n?"hidden sm:flex":"",[n,b,y]);return(0,t.jsxs)(n5.PanelContextProvider,{id:n,noBackground:null!=a&&a,allowAutoCollapse:c,children:[(0,t.jsx)("div",{style:{gridArea:n,...(0,eE.visibleStylesIf)(!g&&!a&&w),...(0,nu.transitionStyles)(["opacity"],{delay:w&&!j?200:0,duration:M})},className:(0,s.cn)("relative overflow-hidden",T),children:(0,t.jsx)("div",{className:"absolute inset-[2px] rounded-md bg-gray-100"})}),(0,t.jsx)("div",{style:{gridArea:n,transform:S,...(0,eE.visibleStylesIf)(!x),...(0,nu.transitionStyles)(["opacity","transform"],{delay:k,duration:M}),pointerEvents:v?"none":void 0},className:(0,s.cn)("relative z-10 flex h-full w-full flex-col overflow-hidden",a?"material-hidden":"material-medium",T,o),...(0,eE.a11yHideIf)(x),children:r}),v&&(0,t.jsx)("div",{className:"absolute inset-0 z-20",style:{pointerEvents:"all"}})]})}function ie(e){let{children:n,className:i,layoutId:r,atoms:o}=e;return(0,t.jsx)(n5.PanelLayoutProvider,{layoutId:r,atoms:o,children:(0,t.jsx)(ii,{className:i,children:n})})}let it=640;function ii(e){let{children:n,className:r}=e,o=(0,i.useId)(),a="panel-group-".concat(o.replace(/[^a-zA-Z0-9]/g,"-")),{atoms:c}=(0,n5.usePanelLayout)(),l=(0,eJ.useAtomValue)(c.isResizing),u=(0,n7.useIsWindowResizing)(),d=(0,eJ.useAtomValue)(c.cursorState),h=(0,eJ.useAtomValue)(c.isReordering),p=(0,i.useRef)(null),f=(0,eJ.useAtomValue)(c.visiblePanels),m=(0,n6.usePrevious)(f),g=(0,eJ.useAtomValue)(c.disableLayoutAnimations),{desktopGridTemplateAreas:v,desktopGridTemplateColumns:y,desktopGridTemplateColumnsUsingCqw:b}=(0,eJ.useAtomValue)(c.gridProperties),x=(0,eJ.useAtomValue)(c.panelOrder),w=(0,i.useMemo)(()=>m&&m.length<f.length,[m,f]),C=(0,A.useIsMobile)(),j=(0,i.useMemo)(()=>!1,[]),S=(0,i.useMemo)(()=>{if(l)switch(d){case"collapse-left":case"expand-left":return"w-resize";case"collapse-right":case"expand-right":return"e-resize";default:return"col-resize"}},[l,d]),k=(0,i.useMemo)(()=>{let e=[];for(let n=0;n<x.length-1;n++){let i=x[n],r=x[n+1],o=!!r;e.push((0,t.jsx)(n4,{gridArea:"resize-".concat(n),from:o?i:void 0,to:o?r:void 0,containerRef:p},"resize-".concat(n)))}return e},[x,p]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("style",{children:"\n          .".concat(a," {\n            container-type: inline-size;\n            grid-template-rows: 1fr;\n            grid-template-columns: 1fr;\n          }\n          @media (max-width: ").concat(it-1,"px) {\n            .").concat(a," > * {\n              grid-area: 1 / 1 !important;\n            }\n          }\n          @media (min-width: ").concat(it,"px) {\n            .").concat(a," {\n            grid-template-areas: ").concat(v,";\n              grid-template-columns: ").concat(y,";\n            }\n            @supports (container-type: inline-size) {\n              .").concat(a," {\n                grid-template-columns: ").concat(j?b:y,";\n              }\n            }\n          }\n          \n        ")}),(0,t.jsxs)("div",{ref:p,className:(0,s.cn)(a,"relative grid h-full w-full max-w-full contain-strict",r),style:{cursor:S,...l||h||u||g?{}:(0,nu.transitionStyles)(["grid-template-columns"],{duration:200*!C,delay:w||C?0:75})},children:[n,k]})]})}var ir=e.i(295191),io=e.i(938868),is=e.i(569543),ia=e.i(987761),ic=e.i(566274),il=e.i(857371);function iu(e){let{isAuthor:n,initialBlockSize:r,initialConsoleSize:v,initialConsoleExpanded:y,initialFileTreeSize:C,isMobile:j,remote:S,templates:k}=e,{initialSize:M}=(0,o.usePanelSize)({initialSize:r,fallbackSize:a.DEFAULT_BLOCK_SIZE}),T=(0,i.useRef)(null),{fullScreenResult:_}=(0,ic.useFullscreenResult)();!function(){let{latestRevalidate:e,chatId:t}=function(){let{messages:e,activeForkKey:t}=(0,h.useChatMessages)(),{isLoading:n,isStreaming:r,isRestoring:o,isContinuing:s}=(0,h.useChatLoadingState)(),{lastSyncedAt:a}=(0,h.useChatSyncState)(),c=(0,f.useChatId)(),l=(0,p.getLeafMessageIdFromForkKey)(t),{submit:u}=(0,x.useV0Chat)(),d=(0,h.useSetChatState)(),{switchToBlock:v}=D(),y=(0,i.useCallback)(n=>{let i;if("error"in n||!t)return;let{deletedMessageIds:r,newMessages:o,syncedAt:s,resumeUserMessageMap:a}=n;if(!r.length&&!o.length)return;let c=new Set(e.map(e=>e.id)),l=o.filter(e=>!c.has(e.id)),h=new Set(r),f=[...e,...l].filter(e=>!h.has(e.id)),m=t.find(e=>h.has(e));m?v((i=R({messages:e,targetMessageId:m}))||[]):i=t;let g=(0,p.getLeafNodeForkKey)(f,i||void 0,"right"),y=(0,p.getLeafMessageIdFromForkKey)(g),b=a[y||"never_match"],x=new Set(Object.keys(a).filter(e=>e!==y));x.size>0&&(f=f.filter(e=>!x.has(e.id))),d({activeForkKey:g,messages:f,lastSyncedAt:s}),b&&y&&"resumed"===b.type&&!c.has(b.responseMessageId)&&!c.has(y)&&u({action:"new",content:null},b,{activeForkKey:g,avoidAutoSwitchingBlock:!0,messages:f})},[e,t,d,v,u]),b=!t||!l||n||r||o||s||!c,{revalidate:w}=(0,m.useServerQuerySWR)(["chat","latest"],{chatId:c,lastSyncedAt:a},{onSuccess:y,stopFetch:b,omitParamsFromFetchKey:!0});return{latestRevalidate:(0,g.useLatest)(w),chatId:c}}(),n=(0,i.useRef)(null),r=(0,i.useRef)(null),o=(0,i.useRef)(!1),{user:s}=(0,H.useUser)(),{userOnFree:c}=(0,w.useUserOnFree)(),l=s&&!c,u=(0,i.useCallback)(()=>{if(!l||!t||n.current)return;let i=b();if(!i)return;i.connect();let o=a.PUSHER_EVENTS.latestChat.getChannelName(t),s=()=>{e.current()},c=i.subscribe(o);c.bind(B,s),n.current=c,r.current=s},[t,e,l]),d=(0,i.useCallback)(()=>{var e;null==(e=b())||e.disconnect(),n.current&&r.current&&(n.current.unbind(B,r.current),n.current.unsubscribe(),n.current=null,r.current=null)},[]),v=(0,i.useCallback)(()=>{"visible"===document.visibilityState?o.current&&(o.current=!1,e.current(),u()):(o.current=!0,d())},[e,u,d]);(0,i.useEffect)(()=>{if(t)return u(),document.addEventListener("visibilitychange",v),()=>{document.removeEventListener("visibilitychange",v),d()}},[t,u,v,d])}();let{title:I}=(0,z.useChatMetadata)(),{vr:P}=(0,V.useFlags)(),{chatId:L}=(0,h.useChatId)(),N=(0,c.useActiveBlockState)();!N&&S&&(N={id:"@remote",meta:{},type:"local",messageId:"",source:"",language:"plaintext",closed:!0,remoteInfo:void 0,forkedFromBlockId:void 0});let A=(0,c.useSetActiveBlockState)(),{ensureBlockSource:E}=(0,d.useBlockHistory)({blockId:null==N?void 0:N.id});(0,i.useEffect)(()=>{(async()=>{if(null==N?void 0:N.needsBlockSource){let e=await E().catch(()=>{console.error("Failed to load block source for block",N.id)});A({...N,...e?{source:e}:{},needsBlockSource:!1})}})()},[N,E,A]);let O=(0,l.useRenderedBlock)({block:N,initialSize:M,initialConsoleSize:v,initialConsoleExpanded:y,location:"header",initialFileTreeSize:C,isAuthor:n,title:I}),F=(0,u.useIsChatPage)();return(0,t.jsxs)("div",{className:(0,s.cn)("relative flex min-w-0 flex-1 flex-col",F&&"min-h-screen-patched"),...(0,eE.a11yHideIf)(_),children:[(0,t.jsx)(io.ChatHeader,{}),F&&N?(0,t.jsxs)(ie,{className:"sm:px-2 sm:pb-2",layoutId:"chat",atoms:(0,tJ.getWritableChatPanelLayoutAtoms)(),children:[(0,t.jsx)(id,{}),(0,t.jsx)(n9,{id:is.CHAT_INPUT_PANEL_ID,className:"relative",noBackground:!0,minRatio:.2,maxRatio:.8,allowAutoCollapse:!0,children:(0,t.jsxs)(i.Suspense,{fallback:(0,t.jsx)(n8,{}),children:[(0,t.jsx)(tU.FullChatModeHeader,{}),(0,t.jsx)(tG,{isAuthor:n,isMobile:j,templates:k,emptyScreenRef:T})]})}),(0,t.jsx)(n9,{id:is.CHAT_OUTPUT_PANEL_ID,children:(0,t.jsx)(i.Suspense,{fallback:(0,t.jsx)(n8,{}),children:P?(0,t.jsx)(n1,{chatId:L,blockId:N.id}):(0,t.jsx)(nc,{activeBlockState:N,renderedBlock:O,remote:S})})})]}):(0,t.jsxs)(ia.AppCard,{className:F?"border-0 bg-transparent shadow-none":"@container/page-layout",children:[F?null:(0,t.jsx)(ir.PageHeader,{title:null,scrollRef:T,hideBorder:!0,filters:null,actions:null}),(0,t.jsx)(tG,{isAuthor:n,isMobile:j,templates:k,emptyScreenRef:T})]})]})}function id(){let e=(0,A.useIsMobile)(640),t=(0,il.usePreviousValue)(e),n=(0,tJ.getChatLayoutActions)();return(0,i.useEffect)(()=>{!t&&e&&n.setMobilePanel("output")},[e,t]),null}let ih=e=>{let{messagesPromise:t}=e;return(e=>{let{messagesPromise:t}=e,n=t?(0,i.use)(t):void 0,r=(0,h.useSetChatState)(),{messages:o}=(0,h.useChatMessages)(),{scrollToBottom:s}=(0,E.useScrollToMessage)();(0,i.useEffect)(()=>{if(!n)return;let e=n.reduce((e,t)=>(e[t.id]=t.content,e),{}),t=!1,i=o.map(n=>{let i=e[n.id];return i&&"assistant"===n.role&&n.isContentLoading&&"message-binary-format"===i.type?(t=!0,{...n,content:i,isContentLoading:!1}):n});t&&(r({messages:i}),s())},[n,r,o,s])})({messagesPromise:t}),null};var ip=e.i(502398),im=e.i(448199);function ig(e){let{initialToast:o,isMobile:s,initialFileTreeSize:a,blockSize:c,consoleSize:l,consoleExpanded:u,isAuthor:d,isRemote:h,hasSignedIn:p,templates:f,delayedMessages:m}=e,g=(0,r.useSearchParams)(),v=(0,r.useRouter)(),{setShowEnvModal:y}=(0,im.useEnvModal)();return((0,i.useEffect)(()=>{g.get("signout")&&(v.replace("/chat"),setTimeout(()=>n.toast.info("You have successfully signed out.",{width:460,style:{maxWidth:"calc(100vw - 2rem)"},description:(0,t.jsxs)(t.Fragment,{children:["To sign in or sign up with a different Vercel account, first sign out on"," ",(0,t.jsxs)(ip.Link,{className:"inline-flex items-center gap-1 underline",external:!0,href:"https://vercel.com/account",children:["vercel.com",(0,t.jsx)(nF.External,{className:"inline-block size-3"})]})]}),action:{children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{children:"Visit"}),(0,t.jsx)("span",{className:"hidden md:inline",children:" Vercel"})]}),onClick:()=>{window.open("https://vercel.com/account","_blank","noopener,noreferrer")}},duration:1e5}),0))},[g,v]),(0,i.useEffect)(()=>{if(g.get("env")){let e=new URL(window.location.href);e.searchParams.delete("env"),window.history.replaceState({}," ",e.toString()),y(!0)}},[g,y]),(0,i.useEffect)(()=>{o&&setTimeout(()=>n.toast.default(o,{duration:5e3}))},[o]),h)?(0,t.jsx)(iu,{initialBlockSize:c,initialConsoleSize:l,initialConsoleExpanded:u,isAuthor:d,isMobile:s,remote:!0,templates:f}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(i.Suspense,{fallback:null,children:[p?(0,t.jsx)(im.default,{v0ProjectId:null}):null,(0,t.jsx)(ih,{messagesPromise:m})]}),(0,t.jsx)(iu,{initialFileTreeSize:a,initialBlockSize:c,initialConsoleSize:l,initialConsoleExpanded:u,isAuthor:d,isMobile:s,remote:!1,templates:f})]})}e.s(["FullChatOuter",()=>ig],591998)},25381,e=>{"use strict";var t=e.i(832520),n=e.i(547259),i=(0,n.createServerReference)("7fd8fd6ab3b30d05642e04809e3d4877cb059a6922",n.callServer,void 0,n.findSourceMapURL,"getHomepageTemplatesAuthedAction"),r=e.i(790958);e.s(["InfiniteListClient",0,e=>(0,t.jsx)(r.TemplateListInfiniteClient,{...e,templatesGetter:i})],25381)},322081,e=>{"use strict";var t=e.i(832520),n=e.i(502398),i=e.i(479273),r=e.i(304649),o=e.i(120282);function s(e){let{children:n}=e;return(0,t.jsx)("div",{className:"text-left text-base font-medium",children:n})}function a(e){let{children:n}=e,{locale:s}=(0,i.useLocale)();return(0,t.jsx)("div",{className:(0,r.cn)("text-sm text-pretty text-gray-500",s===o.esLocaleInfo.iso639&&"text-[13px] sm:text-sm"),children:n})}function c(e){let{children:n}=e;return(0,t.jsx)("span",{className:"hidden md:inline",children:n})}function l(e){let{className:i,...o}=e;return(0,t.jsx)(n.Link,{className:(0,r.cn)("flex items-center gap-1.5 text-sm text-gray-500 hover:text-gray-900 focus:text-gray-900",i),...o})}e.s(["TemplateFeaturedBrowseLink",()=>l,"TemplateFeaturedHeading",()=>s,"TemplateFeaturedSubheading",()=>a,"TemplateFeaturedSubheadingText",()=>c])},620470,e=>{"use strict";var t=e.i(832520),n=e.i(200407),i=e.i(176248),r=e.i(686832),o=e.i(480118),s=e.i(28361),a=e.i(422981),c=e.i(392736),l=e.i(547259),u=(0,l.createServerReference)("40331cccc5531f231ceaef5beb0f6ca5d6bcf9b197",l.callServer,void 0,l.findSourceMapURL,"cancelPremiumAfterTeamUpgrade");e.i(563948);var d=e.i(407562),h=e.i(211976);function p(e){let{teamName:s,teamSlug:a,showDowngradeCta:c}=e,l=(0,o.useRouter)(),u=(0,o.usePathname)(),d=(0,o.useSearchParams)(),[h,p]=(0,n.useState)(!!(s||a)),m=(0,n.useCallback)(()=>{let e=new URLSearchParams(Array.from(d.entries()));for(let t of["teamSlug","teamName"])e.delete(t);let t=e.toString();l.replace("".concat(u).concat(t?"?".concat(t):""))},[u,l,d]),g=(0,n.useCallback)(()=>{m(),p(!1)},[m]);return c?(0,t.jsx)(f,{teamName:s,teamSlug:a}):(0,t.jsxs)(r.Modal,{onOpenChange:g,open:h,children:[(0,t.jsxs)(r.ModalHeader,{children:[(0,t.jsx)(r.ModalTitle,{children:"Upgrade Confirmed"}),(0,t.jsxs)(r.ModalDescription,{children:["Your Team subscription"," ",s?(0,t.jsxs)(t.Fragment,{children:["for ",(0,t.jsx)("span",{className:"font-medium",children:s})," "]}):(0,t.jsx)("span",{children:""}),(0,t.jsxs)("span",{children:["has been confirmed! You can invite additional members in your Vercel Team's settings."," "]})]})]}),(0,t.jsxs)(r.ModalFooter,{children:[(0,t.jsx)(i.Button,{size:"sm",variant:"secondary",children:(0,t.jsx)("a",{target:"_blank",href:a?"https://vercel.com/".concat(a,"/~/settings/members"):"https://vercel.com",children:"Manage Members"})}),(0,t.jsx)(i.Button,{size:"sm",onClick:g,variant:"default",children:"Start Building"})]})]})}function f(e){let{teamName:l,teamSlug:p}=e,f=(0,o.useRouter)(),m=(0,o.usePathname)(),g=(0,o.useSearchParams)(),[v,y]=(0,n.useState)(!!(l||p)),[b,x]=(0,n.useState)(!1),[w,C]=(0,n.useState)(!1),[j,S]=(0,n.useTransition)(),k=(0,n.useCallback)(()=>{let e=new URLSearchParams(Array.from(g.entries()));for(let t of["teamSlug","teamName","cta"])e.delete(t);let t=e.toString();f.replace("".concat(m).concat(t?"?".concat(t):""))},[m,f,g]),M=(0,n.useCallback)(()=>{k(),y(!1)},[k]),T=(0,n.useCallback)(()=>{x(!1)},[]),_=(0,n.useCallback)(()=>{j||S(async()=>{if("error"in await u(p))return void d.toast.error("Failed to cancel Premium plan. Please try again or reach out to Customer Support to cancel your Premium plan.");C(!0),T()})},[j,T,p]);return b?(0,t.jsxs)(r.Modal,{onOpenChange:M,open:v,children:[(0,t.jsxs)(r.ModalHeader,{children:[(0,t.jsx)(r.ModalTitle,{children:"Cancel your Premium Plan"}),(0,t.jsxs)(r.ModalDescription,{children:["We have successfully created a new Team plan",l?(0,t.jsxs)(t.Fragment,{children:[" ","for ",(0,t.jsx)("span",{className:"font-medium",children:l}),"."]}):(0,t.jsx)("span",{children:"."})," ",(0,t.jsx)("span",{children:"Would you like to cancel your active personal Premium plan? We will apply a credit for the remaining time on your Premium billing period towards your new Team plan."})]})]}),(0,t.jsxs)(r.ModalFooter,{children:[(0,t.jsx)(i.Button,{size:"sm",variant:"secondary",onClick:T,children:"Keep Both Plans"}),(0,t.jsx)(h.SpinnerButton,{size:"sm",onClick:_,pending:j,children:"Cancel Premium"})]})]}):(0,t.jsxs)(r.Modal,{onOpenChange:M,open:v,children:[(0,t.jsxs)(r.ModalHeader,{children:[(0,t.jsx)(r.ModalTitle,{children:"Team Plan Confirmed"}),(0,t.jsxs)(r.ModalDescription,{children:["Your Team subscription"," ",l?(0,t.jsxs)(t.Fragment,{children:["for ",(0,t.jsx)("span",{className:"font-medium",children:l})," "]}):(0,t.jsx)("span",{children:""}),(0,t.jsx)("span",{children:"has been confirmed!"})]})]}),(0,t.jsxs)(r.ModalContent,{className:"flex flex-col gap-3",children:[(0,t.jsx)(i.Button,{className:"h-fit p-0 text-left",variant:"secondary",children:(0,t.jsxs)("a",{className:"flex w-full items-center justify-between gap-3 p-3 pr-[14px] text-gray-500",target:"_blank",href:p?"https://vercel.com/".concat(p,"/~/settings/members"):"https://vercel.com",children:[(0,t.jsxs)("div",{className:"flex h-fit flex-col text-sm",children:[(0,t.jsx)("b",{className:"font-medium text-gray-900",children:"Manage Members"}),(0,t.jsx)("p",{className:"font-normal",children:"Add more members to your team on Vercel."})]}),(0,t.jsx)(c.External,{})]})}),(0,t.jsxs)(i.Button,{className:"flex h-fit w-full items-center justify-between gap-3 p-3 pr-[14px] text-left text-gray-500",variant:"secondary",onClick:()=>x(!0),disabled:w,children:[(0,t.jsxs)("div",{className:"flex h-fit flex-col text-sm",children:[(0,t.jsx)("b",{className:"font-medium text-gray-900",children:w?"Premium Cancelled":"Cancel Premium Plan"}),(0,t.jsx)("p",{className:"font-normal",children:w?"Your Premium plan was canceled.":"Would you like to cancel your existing Premium plan?"})]}),w?(0,t.jsx)(s.CheckCircleFill,{}):(0,t.jsx)(a.ChevronRight,{})]})]}),(0,t.jsx)(r.ModalFooter,{children:(0,t.jsx)(i.Button,{size:"sm",onClick:M,variant:"default",children:"Start Building"})})]})}e.s(["WelcomeModal",()=>p],620470)}]);