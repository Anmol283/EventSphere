"use strict";
const whatwgURL = require("whatwg-url");
const HTMLElementImpl = require("./HTMLElement-impl").implementation;
<<<<<<< HEAD
=======
const { fallbackBaseURL } = require("../helpers/document-base-url");
>>>>>>> main

class HTMLBaseElementImpl extends HTMLElementImpl {
  get href() {
    const document = this._ownerDocument;

    const url = this.hasAttributeNS(null, "href") ? this.getAttributeNS(null, "href") : "";
<<<<<<< HEAD
    const parsed = whatwgURL.parseURL(url, { baseURL: document._fallbackBaseURL() });
=======
    const parsed = whatwgURL.parseURL(url, { baseURL: fallbackBaseURL(document) });
>>>>>>> main

    if (parsed === null) {
      return url;
    }

    return whatwgURL.serializeURL(parsed);
  }

  set href(value) {
    this.setAttributeNS(null, "href", value);
  }
<<<<<<< HEAD

  _attrModified(name, value, oldValue) {
    super._attrModified(name, value, oldValue);

    if (name === "href") {
      this._ownerDocument._clearBaseURLCache();
    }
  }

  _attach() {
    super._attach();
    this._ownerDocument._clearBaseURLCache();
  }

  _detach() {
    super._detach();
    this._ownerDocument._clearBaseURLCache();
  }
=======
>>>>>>> main
}

module.exports = {
  implementation: HTMLBaseElementImpl
};
