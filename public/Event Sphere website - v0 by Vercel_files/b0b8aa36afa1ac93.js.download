(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,911115,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return c}});let r=e.r(832520),i=e.r(200407),a=e.r(131028),o=e.r(40825);function s(e){return{default:e&&"default"in e?e.default:e}}let l={loader:()=>Promise.resolve(s(()=>null)),loading:null,ssr:!0},c=function(e){let t={...l,...e},n=(0,i.lazy)(()=>t.loader().then(s)),c=t.loading;function u(e){let s=c?(0,r.jsx)(c,{isLoading:!0,pastDelay:!0,error:null}):null,l=!t.ssr||!!t.loading,u=l?i.Suspense:i.Fragment,d=l?{fallback:s}:{},p=t.ssr?(0,r.jsxs)(r.Fragment,{children:["undefined"==typeof window?(0,r.jsx)(o.PreloadChunks,{moduleIds:t.modules}):null,(0,r.jsx)(n,{...e})]}):(0,r.jsx)(a.BailoutToCSR,{reason:"next/dynamic",children:(0,r.jsx)(n,{...e})});return(0,r.jsx)(u,{...d,children:p})}return u.displayName="LoadableComponent",u}},847801,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return i}});let r=e.r(481258)._(e.r(911115));function i(e,t){var n;let i={};"function"==typeof e&&(i.loader=e);let a={...i,...t};return(0,r.default)({...a,modules:null==(n=a.loadableGenerated)?void 0:n.modules})}("function"==typeof n.default||"object"==typeof n.default&&null!==n.default)&&void 0===n.default.__esModule&&(Object.defineProperty(n.default,"__esModule",{value:!0}),Object.assign(n.default,n),t.exports=n.default)},15185,158469,24461,595432,760343,e=>{"use strict";var t=e.i(832520),n=e.i(200407),r=e.i(176248),i=e.i(304649),a=e.i(605528);let o=(0,a.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M14.5 8C14.5 11.5899 11.5899 14.5 8 14.5C4.41015 14.5 1.5 11.5899 1.5 8C1.5 4.41015 4.41015 1.5 8 1.5C11.5899 1.5 14.5 4.41015 14.5 8ZM16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8ZM11.5303 6.53033L12.0607 6L11 4.93934L10.4697 5.46967L6.5 9.43934L5.53033 8.46967L5 7.93934L3.93934 9L4.46967 9.53033L5.96967 11.0303C6.26256 11.3232 6.73744 11.3232 7.03033 11.0303L11.5303 6.53033Z" fill="currentColor"/>');e.s(["CheckCircle",0,o],158469);let s=(0,a.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M14.5 8C14.5 11.5899 11.5899 14.5 8 14.5C4.41015 14.5 1.5 11.5899 1.5 8C1.5 4.41015 4.41015 1.5 8 1.5C11.5899 1.5 14.5 4.41015 14.5 8ZM16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8ZM5.5 11.5607L6.03033 11.0303L8 9.06066L9.96967 11.0303L10.5 11.5607L11.5607 10.5L11.0303 9.96967L9.06066 8L11.0303 6.03033L11.5607 5.5L10.5 4.43934L9.96967 4.96967L8 6.93934L6.03033 4.96967L5.5 4.43934L4.43934 5.5L4.96967 6.03033L6.93934 8L4.96967 9.96967L4.43934 10.5L5.5 11.5607Z" fill="currentColor"/>');function l(e){return(0,t.jsx)("div",{className:"bg-muted my-4 space-y-4 rounded-lg border px-4 pb-6 pt-2",children:e.children})}function c(e){let{value:n,selected:r,onClick:a,children:o,index:s}=e;return(0,t.jsxs)("label",{className:"flex w-full cursor-pointer flex-col",children:[(0,t.jsx)("input",{className:"size-0",defaultChecked:r,name:"answer",onClick:a,type:"radio",value:n}),(0,t.jsxs)("span",{className:(0,i.cn)("bg-background flex items-center justify-start gap-3 px-4 py-3 transition-colors",r&&"bg-blue-100"),children:[(0,t.jsx)("span",{className:(0,i.cn)("flex size-5 select-none items-center justify-center rounded-full bg-blue-100 text-center text-xs font-semibold text-blue-800 transition-colors",r&&"bg-blue-400 text-white"),children:String.fromCharCode(65+s)}),o]})]})}function u(e){let{correct:n,selected:r,className:a}=e;return n||r?(0,t.jsx)("span",{className:(0,i.cn)("inline-block size-6 shrink-0 rounded-full p-1 align-middle",n?"bg-blue-100 text-blue-600":"bg-red-100 text-red-500",a),children:n?(0,t.jsx)(o,{}):(0,t.jsx)(s,{})}):null}function d(e){let{answer:n,correctAnswer:r}=e;return(0,t.jsxs)("span",{className:(0,i.cn)("animate-slide-down-and-fade flex select-none items-center justify-center gap-1 rounded-full py-1 pl-3 pr-5",n===r&&"bg-blue-100 text-blue-600",n&&n!==r&&"bg-red-100 text-red-500"),children:[void 0!==n&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u,{correct:n===r,selected:!0})," "]}),void 0===n?(0,t.jsxs)(t.Fragment,{children:["The correct answer is: ",(0,t.jsx)("strong",{children:r})]}):n===r?(0,t.jsx)("span",{className:"font-bold text-blue-600",children:"Correct"}):(0,t.jsx)("span",{className:"font-bold text-red-500",children:"Incorrect"})]})}function p(e){let{answers:i,correctAnswer:a,question:o}=e,[s,p]=(0,n.useState)(null),[h,f]=(0,n.useState)(!1),[m,g]=(0,n.useState)(!1),v=()=>{f(!0),g(!0)};return o&&Array.isArray(i)&&0!==i.length?(0,t.jsxs)(l,{children:[(0,t.jsx)("p",{className:"text-md px-4 text-center font-semibold md:px-8 lg:px-12",children:o}),(0,t.jsx)("div",{className:"mx-0 flex flex-col divide-y overflow-hidden rounded-md border md:mx-8 lg:mx-12",children:i.map((e,n)=>(0,t.jsxs)(c,{index:n,onClick:()=>{m||p(e)},selected:e===s,value:e,children:[(0,t.jsx)("span",{className:"flex-1",children:e}),h?(0,t.jsx)(u,{className:"animate-slide-down-and-fade ml-2",correct:e===a,selected:e===s}):null]},e))}),(0,t.jsx)("div",{className:"flex justify-center",children:h&&null!==s?(0,t.jsx)(d,{answer:s,correctAnswer:a}):(0,t.jsx)(r.Button,{className:"h-9 select-none",disabled:null===s,onClick:v,size:"sm",children:"Check answer"})})]}):null}e.s(["CrossCircle",0,s],24461),e.s(["Quiz",()=>p],15185);var h=t,f=e.i(7284);function m(e){let{children:t,className:n,...r}=e;return(0,h.jsx)("div",{className:(0,f.default)("steps mb-12 ml-2 border-l border-gray-200 pl-5 sm:ml-4 sm:pl-6","[counter-reset:step]",n),...r,children:t})}e.s(["Steps",()=>m],595432);var g=t;function v(e){let{title:t}=e;return(0,g.jsxs)("div",{className:"rounded-lg border border-gray-100 p-4 shadow-sm",children:[(0,g.jsx)("p",{className:"mb-2 mt-0 font-medium text-gray-600",children:t}),(0,g.jsxs)("div",{className:"animate-pulse",children:[(0,g.jsx)("div",{className:"h-4 w-3/4 rounded bg-gray-200"}),(0,g.jsx)("div",{className:"mt-2 h-4 w-1/2 rounded bg-gray-200"}),(0,g.jsx)("div",{className:"mt-2 h-4 w-3/4 rounded bg-gray-200"})]})]})}e.s(["LoadingCard",()=>v],760343)},845210,e=>{"use strict";var t=e.i(832520),n=e.i(200407);let r=(0,n.createContext)(!1);function i(e){let{children:n}=e;return(0,t.jsx)(r.Provider,{value:!0,children:n})}function a(){return{isPublished:(0,n.use)(r)||!1}}e.s(["PublishedPageProvider",()=>i,"usePublishedPage",()=>a])},338993,636139,739126,938807,66045,970256,e=>{"use strict";var t=e.i(832520),n=e.i(304649),r=e.i(283751),i=e.i(845210);function a(e){let{className:i,headerClassName:a,language:o,actions:s,syntax:l}=e;return(0,t.jsx)("div",{className:(0,n.cn)("codeblock border-alpha-400 relative flex size-full flex-col overflow-hidden rounded-lg border font-sans",i),"data-seg":"root",children:(0,t.jsxs)("div",{className:"group/inline-code-block relative flex size-full flex-col overflow-hidden",children:[(0,t.jsxs)("div",{className:(0,n.cn)("bg-muted flex h-10 w-full shrink-0 items-center justify-between rounded-t-lg border-b pl-2.5 pr-1.5",a),"data-seg":"skip",children:[o?(0,t.jsx)("span",{className:"text-gray-500",children:(0,t.jsx)(r.FileIcon,{lang:o})}):null,(0,t.jsx)("div",{className:"flex items-center space-x-1 text-gray-500",children:s})]}),l]})})}function o(e){let{className:r,showLineNumbers:a,actions:o,fileName:l,syntax:c}=e,{isPublished:u}=(0,i.usePublishedPage)();return u?(0,t.jsxs)("div",{className:(0,n.cn)("codeblock @container/codeblock bg-muted flex size-full flex-col overflow-hidden rounded-lg pt-3",r),"data-seg":"root",children:[(0,t.jsxs)("div",{className:"z-10 mx-3 flex translate-y-px justify-between","data-seg":"skip",children:[(0,t.jsx)(s,{active:!0,fileName:l}),(0,t.jsx)("div",{className:"flex -translate-y-1.5 items-center gap-1",children:o})]}),(0,t.jsx)("div",{className:(0,n.cn)("border-alpha-400 bg-background relative flex flex-1 flex-col overflow-hidden border-t px-3 font-sans",a&&"px-0"),children:c})]}):(0,t.jsx)("div",{className:(0,n.cn)("codeblock @container/codeblock bg-muted flex size-full flex-col",r),"data-seg":"root",children:(0,t.jsx)("div",{className:(0,n.cn)("relative flex flex-1 flex-col overflow-hidden px-3 font-sans",a&&"px-0"),children:c})})}function s(e){let{active:r,fileName:i,onClick:a}=e;return(0,t.jsxs)("button",{className:(0,n.cn)("font-regular border-alpha-400 pointer-events-none relative h-full whitespace-nowrap rounded-t-md border border-b-0 px-4 pb-1 pt-1.5 text-[13px] text-gray-500 transition-colors",r?"bg-background font-medium":"border-transparent bg-transparent hover:bg-gray-200"),onClick:a,children:[(0,t.jsx)(l,{active:r,side:"left"}),i,(0,t.jsx)(l,{active:r,side:"right"})]})}function l(e){let{active:r,side:i}=e;if(!r)return null;let a="left"===i;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:(0,n.cn)("bg-muted absolute bottom-0 z-20 h-[4px] w-[4px] border-b border-gray-200",a?"right-[-4px] rounded-bl-[3px] border-l":"left-[-4px] rounded-br-[3px] border-r")}),(0,t.jsx)("div",{className:(0,n.cn)("bg-background absolute bottom-0 z-10 h-[4px] w-[4px]",a?"right-[-4px]":"left-[-4px]")})]})}e.s(["InlineCodeBlock",()=>a,"TabbedCodeBlock",()=>o],338993);let c=["javascript","typescript","python","sql"],u=["js","jsx","mjs","cjs","ts","tsx","mts","cts","py","sql"];function d(e){switch(e){case"plaintext":case"png":case"jpg":case"jpeg":case"slim":case"shaderlab":return"text";case"bat":return"batch";case"dockercompose":return"yaml";case"git-rebase":case"git-commit":return"markdown";case"typescriptreact":return"tsx";case"javascriptreact":case"svelte":case"astro":return"jsx";case"jsonc":return"json5";case"objective-c":case"objective-cpp":return"objectivec";case"perl6":return"perl";case"shellscript":return"bash";case"terraform":return"hcl";case"bibtex":return"tex";case"cuda-cpp":return"cpp";case"jade":return"pascal";case"vue":case"vue-html":return"html";case"xsl":return"xml";default:return e}}e.s(["getPrismLanguage",()=>d,"runnableExtensions",0,u,"runnableLanguages",0,c],636139);var p=e.i(346970);function h(e){let{blockId:t,fileName:n,originalCode:r,newCode:i}=e,{data:a,mutate:o}=(0,p.default)(["block:diffView:show",t],{fallbackData:!1}),{data:s}=(0,p.default)(["block:diffView",t,n],{fallbackData:!!r&&r!==i});return{hasDiffs:s,showDiffs:a,setShowDiffs:o}}e.s(["useDiffView",()=>h],739126);var f=t,m=n;let g=e=>{let{size:t=16,className:n}=e;return(0,f.jsxs)("svg",{className:(0,m.cn)("trash-icon overflow-visible",n),fill:"none",stroke:"currentColor",height:t,viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:[(0,f.jsx)("path",{d:"M10.0001 1.33203H4.00008C3.64646 1.33203 3.30732 1.47251 3.05727 1.72256C2.80722 1.9726 2.66675 2.31174 2.66675 2.66536V13.332C2.66675 13.6857 2.80722 14.0248 3.05727 14.2748C3.30732 14.5249 3.64646 14.6654 4.00008 14.6654H12.0001C12.3537 14.6654 12.6928 14.5249 12.9429 14.2748C13.1929 14.0248 13.3334 13.6857 13.3334 13.332V4.66536L10.0001 1.33203Z",stroke:"currentColor",strokeWidth:"1.33333",strokeLinecap:"round",strokeLinejoin:"round"}),(0,f.jsx)("path",{d:"M6 6.66797H10",stroke:"currentColor",strokeWidth:"1.33333",strokeLinecap:"square",strokeLinejoin:"round"}),(0,f.jsx)("path",{d:"M8 8.66797V4.66797",stroke:"currentColor",strokeWidth:"1.33333",strokeLinecap:"square",strokeLinejoin:"round"}),(0,f.jsx)("path",{d:"M6 11.332H10",stroke:"currentColor",strokeWidth:"1.33333",strokeLinecap:"square",strokeLinejoin:"round"})]})};e.s(["DiffIcon",0,g],938807);var v=e.i(547259),x=(0,v.createServerReference)("7ce539ddabd3a608ddb2c573d3550982c34cab6196",v.callServer,void 0,v.findSourceMapURL,"doExecution");e.s(["doExecution",()=>x],66045);var y=v,b=(0,y.createServerReference)("407667196cf7d68b45a73ec164921559034d90ba80",y.callServer,void 0,y.findSourceMapURL,"doSqlExecution");e.s(["doSqlExecution",()=>b],970256)},703699,e=>{"use strict";e.i(342681);let t=7;function n(e,t){let n=e.replace(/^\/|\/$/g,"").split("/"),{id:i,title:a}=r(n[n.length-1],t);return{segments:n,id:i,title:a,fullPath:e}}function r(e,t){let n,r="";for(let i=e.length-1;i>=0;i--){if("-"===e[i]&&r.length>=t){n=e.slice(0,i);break}r=e[i]+r}return!n&&r.length<e.length&&(n=e.slice(0,e.length-r.length-1)),{id:r,title:n||void 0}}function i(e){return r(e,t).id}e.s(["extractChatIdFromSlug",()=>i,"parsePath",()=>n])},726718,e=>{"use strict";var t=e.i(703699);let n=new Map([["archive","archiveLayout.title"],["blocks","blocksLayout.title"],["button","buttonPage.title"],["community","templatesPage.title"],["enterprise","footer.enterprise"],["git","gitPage.title"],["history","libraryLayout.title"],["id","idPage.title"],["internal","internalPage.title"],["pricing","sidebar.userMenu.pricing"],["projects","projectsPage.title"],["settings","settingsPage.title"],["upgrade","upgradePage.title"],["user","sidebar.userMenu.profile"],["design-systems","designSystemsPage.title"]]),r=new Set(n.keys()),i=/^(?:\/chat)?(?:\/v0pprvariant[^\/]*)?(?:\/v3)?\/?$/,a=/^\/chat\/(?:v0pprvariant[^\/]*\/)?(?:v3\/?)?([^\/]+)\/?/,o=/^(?:\/chat)?(?:\/v0pprvariant[^\/]*)?(?:\/v3)?\/([^\/]+)/;function s(e){return i.test(e)}let l=/^\/chat\/(?:[^/]+\/)?design-systems\/[^/]+\/?$/;function c(e){return l.test(e)}let u=/^\/chat(?:\/[^/]+)?\/design-systems\/?$/;function d(e){return u.test(e)}let p=/^(?:\/chat(?:\/[^/]+)?)?\/community(?:\/top)?(?:\/newest)?\/?$/,h=e=>p.test(e);function f(e){let t=e.match(o);return null==t?void 0:t[1]}function m(e){let t=e.match(a),n=null==t?void 0:t[1];if(n&&!r.has(n))return n}function g(e){let n=m(e);if(n)return(0,t.extractChatIdFromSlug)(n)}e.s(["PATHS_TO_TITLE",0,n,"getChatIdFromPathname",()=>g,"getChatSlugFromPathname",()=>m,"getTopLevelPathFromPathname",()=>f,"isCommunityHomePage",0,h,"isDesignSystemsEditorPage",()=>c,"isDesignSystemsPage",()=>d,"isHome",()=>s])},472428,210611,401329,152641,e=>{"use strict";var t=e.i(200407),n=e.i(346970),r=e.i(142219),i=e.i(780292);e.i(541536),e.i(23474),e.i(868275),e.i(470259);var a=e.i(868668);e.s(["createAtomicContextSWR",()=>m,"createAtomicContextSWRProvider",()=>g,"createNamespacePromiseContext",()=>x,"createNamespacePromiseContextProvider",()=>y,"useAtomicContextSWR",()=>f,"useNamespacePromiseContext",()=>v],401329);var o=e.i(832520),s=t;e.s(["atomicContextSWRInstance",()=>h,"namespacePromiseContexts",()=>p],210611);let l=m(),c=x("chat"),u=x("scoped"),d=x("project"),p={chat:c,scoped:u,deployment:x("deployment"),project:d,global:x("global")},h=l,f=()=>{let e=h;return(0,s.useContext)(e)};function m(){return(0,s.createContext)({})}function g(e){let{context:t,getAtoms:n}=e;return e=>{let{children:r,routes:i}=e,a=(0,s.useMemo)(()=>({routes:i,getAtoms:n}),[i]);return(0,o.jsx)(t.Provider,{value:a,children:r})}}let v=e=>{let t=p[e];return(0,s.useContext)(t)};function x(e){return(0,s.createContext)({})}function y(e){return t=>{let{children:n,promises:r,params:i}=t,a=(0,s.useMemo)(()=>({promises:r,params:i,serverContextCreationTime:Date.now()}),[r,i]);return(0,o.jsx)(e.Provider,{value:a,children:n})}}let b=new Map,w=new Map,j=new Set,C=new Set;function k(e,o,s){var l;let c=(0,t.useId)(),u=e[0],d=e[1],p=f(),h=v(u);if(!p)throw Error("useServerQuerySWR: Missing top level ContextSWR");let m=(0,t.useMemo)(()=>p.routes[u][d],[p.routes,u,d]),g=(0,t.useMemo)(()=>!!h&&0!==Object.keys(h).length&&d in h.promises,[h,d]),x=(0,t.useMemo)(()=>g?h.promises[d]:null,[h,d,g]),y=(0,t.useMemo)(()=>{let e=null;return g&&(e=h.params),{...e,...o}},[o,g,h.params]),k=(0,t.useMemo)(()=>p.getAtoms[u](y),[p.getAtoms,u,y])[d],N=(0,i.useAtomValue)(k),E=(0,t.useCallback)(e=>r.store.set(k,e),[k]),M=(0,t.useMemo)(()=>h?(0,n.unstable_serialize)([h.serverContextCreationTime]):"client-only",[h]),I=(null==s?void 0:s.omitParamsFromFetchKey)||!1,D=(0,t.useMemo)(()=>I?(0,n.unstable_serialize)([d]):(0,n.unstable_serialize)([d,y]),[d,y,I]),T=(0,t.useMemo)(()=>(0,n.unstable_serialize)([D,M]),[M,D]),A=(0,t.useMemo)(()=>(0,n.unstable_serialize)([d,c]),[d,c]),L=(0,t.useCallback)(async()=>{let e;return w.get(D)?N:(b.set(D,A),!j.has(M)&&x?(e=await x,j.add(M)):e=await (0,a.createRouteFetcherForQuery)(m)(y),b.get(D)===A&&(w.get(D)||E(e),b.delete(D)),e)},[D,A,M,x,N,m,y,E]),P=(0,n.default)(T,(null==s?void 0:s.stopFetch)?null:L,{...(null==s?void 0:s.revalidateNever)?{revalidateOnFocus:!1,revalidateIfStale:!1,revalidateOnMount:!1,revalidateOnReconnect:!1,revalidateNever:!0}:{},...s}),R=(0,t.useCallback)(async e=>{let t,{serverMutate:n,optimisticData:r}=e;w.set(D,A),null!==r&&E(r);try{t=await n}catch(e){throw w.delete(D),P.mutate(L),e}return w.get(D)===A&&w.delete(D),(null==s?void 0:s.noRevalidate)||await P.mutate(L),t},[L,P,E,A,D,null==s?void 0:s.noRevalidate]),_=(0,t.useCallback)(async()=>P.mutate(L),[L,P]),O=x&&void 0===P.data;if(!x&&r.store.get(k)&&(null==(l=r.store.get(k))?void 0:l.__ASSERT_SWR_DATA)===!0)throw Error("useServerQuerySWR:    You are trying to access asserted data for "+"   ".concat(u,".").concat(String(d)," ")+"   promise: ".concat(x," ")+"   response.data: ".concat(P.data," ")+"   uniqueKey: ".concat(D," ")+"   fetchKey: ".concat(T," ")+"   store.get(atom): ".concat(r.store.get(k)," ")+"   but no promise was found.    This is probably because you are trying to access data from a server component.");if(O){let e=(0,t.use)(x);w.get(D)||C.has(S([D,M]))||(E(e),C.add(S([D,M]))),j.add(M)}let F=!0,V=r.store.get(k);if(!x&&F&&void 0===V)throw _();return{...P,data:V,mutate:R,revalidate:_}}let S=e=>e.join("-"),N={__ASSERT_SWR_DATA:!0};e.s(["ASSERT_SWR_DATA",0,N,"useServerQuerySWR",()=>k],152641),e.s([],472428)},972287,e=>{"use strict";var t=e.i(205341),n=e.i(753533);e.i(472428);var r=e.i(152641);let i=null,a=(0,n.cacheResult)(i,()=>({user:(0,t.atom)(r.ASSERT_SWR_DATA),chats:(0,t.atom)(r.ASSERT_SWR_DATA),scopes:(0,t.atom)(r.ASSERT_SWR_DATA),projects:(0,t.atom)(r.ASSERT_SWR_DATA),rateLimit:(0,t.atom)(r.ASSERT_SWR_DATA),newFeatureBanner:(0,t.atom)(r.ASSERT_SWR_DATA),gitNamespaces:(0,t.atom)(r.ASSERT_SWR_DATA),paginatedProjects:(0,t.atom)(r.ASSERT_SWR_DATA),editableTemplates:(0,t.atom)(r.ASSERT_SWR_DATA),designSystems:(0,t.atom)(r.ASSERT_SWR_DATA),team:(0,t.atom)(r.ASSERT_SWR_DATA)})),o=null,s=(0,n.cacheResult)(o,()=>({...a()}));e.s(["getScopedAtoms",0,s,"getWritableScopedAtoms",0,a])},92479,887968,175787,72047,273207,819969,e=>{"use strict";e.s(["assertChatId",()=>ep,"useChatHashNavigation",()=>eC,"useChatId",()=>eh,"useChatLoadingState",()=>ev,"useChatMessages",()=>eg,"useChatMessagesLength",()=>ex,"useChatPermissions",()=>ey,"useChatPrefillOptions",()=>ej,"useChatState",()=>em,"useChatSyncState",()=>ew,"useChatUndoState",()=>eb,"useSetChatState",()=>ef],92479);var t=e.i(346970),n=e.i(391795),r=e.i(200407);let i={messages:[],isLoading:!1,lastSyncedAt:Date.now(),undo:null,activeForkKey:void 0,isContinuing:!1,isStreaming:!1,isAuthor:!1,isRestoring:!1},a={title:"",isNew:!1,authorId:"",ownerId:"",tailwindV4Default:!1};e.s(["CHAT_METADATA_FALLBACK",0,a,"CHAT_STATE_FALLBACK",0,i],887968),e.s(["useLeafMessage",()=>$],273207);let o=(e,t,n)=>{if(!e)return;let r=e.findIndex(e=>e===t);return r<0?e:[...e.slice(0,r),n]},s=(e,t)=>void 0===e?[t]:[...e,t],l=e=>e&&e.length>0?e[e.length-1]:void 0,c=(e,t)=>e?[...e.slice(0,e.length-1),t]:s(void 0,t),u=(e,t)=>{if(!e)return;let n=e.findIndex(e=>e===t);if(!(n<0))return e[n-1]},d="<ROOT_MESSAGE>";function p(e){let t=new Map;for(let n of e){let e=n.parentId||d;t.set(e,[...t.get(e)||[],n])}return t}function h(e){let t=p(e),n=new Set,r=new Map,i=(e,a)=>{var o;if(e&&n.has(e.id))return;let l=t.get(e?e.id:d);e&&n.add(e.id);let c=[];for(let e=0;e<(null!=(o=null==l?void 0:l.length)?o:0);e++){let t=l[e],n=s(a,t.id);c.push(n),i(t,n)}r.set(e?e.id:d,c)};return i(void 0,void 0),r}function f(e,t){let n=p(e),r=new Set,i=[];function a(e){if(!r.has(e))for(let t of(r.add(e),n.get(e)||[]))i.push(t.messageId),a(t.messageId)}return a(t||d),i}function m(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"left",r=t,i=p(e),a=l(r)||d,o=i.get(a)||[],c=new Set;for(;o.length>0;){let{id:e}=o["left"===n?0:o.length-1];if(c.has(e))break;c.add(e),r=s(r,e),o=i.get(e)||[]}return r}function g(e,t){let n,r=t;if(0===e.length)return;let i=p(e),a=e=>{var t,n;let r=new Set,a=null==(t=i.get(e&&l(e)||d))?void 0:t[0],o=e;for(;a&&!r.has(a.messageId);)r.add(a.messageId),o=s(o,a.messageId),a=null==(n=i.get(a.messageId))?void 0:n[0];return o};null!==r&&e.some(e=>e.messageId===r)||(r=e.reduce((e,t)=>e.createdAt>t.createdAt?e:t).messageId);let o=new Set;function c(e,t){if(!o.has(e||d))for(let a of(o.add(e||d),i.get(e||d)||[])){let e=s(t,a.messageId);if(a.messageId===r){n=e;return}c(a.messageId,e)}}return c(void 0,void 0),a(n)}e.s(["ROOT_MESSAGE_KEY",0,d,"addMessageIdToForkKey",0,s,"computeForkKeyOptions",()=>h,"computeInitialForkKey",()=>g,"createSiblingForkKey",0,c,"getChildMessageIds",()=>f,"getLeafMessageIdFromForkKey",0,l,"getLeafNodeForkKey",()=>m,"getPreviousMessageIdInForkKey",0,u,"replaceIdInForkKey",0,o],175787);var v=r,x=e.i(957573),y=e.i(827330),b=e.i(355045),w=e.i(887139),j=n,C=e.i(9694),k=e.i(762380),S=e.i(957212),N=e.i(642790),E=e.i(518273),M=e.i(726295),I=e.i(912866),D=e.i(635316),T=e.i(649440),A=e.i(754883),L=e.i(265540),P=e.i(671183),R=e.i(612034),_=e.i(396350),O=e.i(880092);let F=v.default.use||(e=>{switch(e.status){case"pending":throw e;case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e}}),V={dedupe:!0},B=(e,t,n)=>{let{cache:r,compare:i,suspense:a,fallbackData:o,revalidateOnMount:s,revalidateIfStale:l,refreshInterval:c,refreshWhenHidden:u,refreshWhenOffline:d,keepPreviousData:p}=n,[h,f,m,g]=C.SWRGlobalState.get(r),[y,b]=(0,k.serialize)(e),w=(0,v.useRef)(!1),B=(0,v.useRef)(!1),z=(0,v.useRef)(y),H=(0,v.useRef)(t),U=(0,v.useRef)(n),q=()=>U.current,W=()=>q().isVisible()&&q().isOnline(),[Z,G,K,X]=(0,S.createCacheHelper)(r,y),$=(0,v.useRef)({}).current,Y=(0,N.isUndefined)(o)?(0,N.isUndefined)(n.fallback)?E.UNDEFINED:n.fallback[y]:o;Y&&(0,M.isPromiseLike)(Y)&&(Y=F(Y));let J=(e,t)=>{for(let n in $){let r=n;if("data"===r){if(!i(e[r],t[r])&&(!(0,N.isUndefined)(e[r])||!i(es,t[r])))return!1}else if(t[r]!==e[r])return!1}return!0},Q=(0,v.useMemo)(()=>{let e=!!y&&!!t&&((0,N.isUndefined)(s)?!q().isPaused()&&!a&&!1!==l:s),n=t=>{let n=(0,O.mergeObjects)(t);return(delete n._k,e)?{isValidating:!0,isLoading:!0,...n}:n},r=Z(),i=X(),o=n(r),c=r===i?o:n(i),u=o;return[()=>{let e=n(Z());return J(e,u)?(u.data=e.data,u.isLoading=e.isLoading,u.isValidating=e.isValidating,u.error=e.error,u):(u=e,e)},()=>c]},[r,y]),ee=(0,x.useSyncExternalStore)((0,v.useCallback)(e=>K(y,(t,n)=>{J(n,t)||e()}),[r,y]),Q[0],Q[1]),et=!w.current,en=h[y]&&h[y].length>0,er=ee.data,ei=(0,N.isUndefined)(er)?Y:er,ea=ee.error,eo=(0,v.useRef)(ei),es=p?(0,N.isUndefined)(er)?eo.current:er:ei,el=(!en||!!(0,N.isUndefined)(ea))&&(et&&!(0,N.isUndefined)(s)?s:!q().isPaused()&&(a?!(0,N.isUndefined)(ei)&&l:(0,N.isUndefined)(ei)||l)),ec=!!(y&&t&&et&&el),eu=(0,N.isUndefined)(ee.isValidating)?ec:ee.isValidating,ed=(0,N.isUndefined)(ee.isLoading)?ec:ee.isLoading,ep=(0,v.useCallback)(async e=>{let t,r,a=H.current;if(!y||!a||B.current||q().isPaused())return!1;let o=!0,s=e||{},l=!m[y]||!s.dedupe,c=()=>_.IS_REACT_LEGACY?!B.current&&y===z.current&&w.current:y===z.current,u={isValidating:!1,isLoading:!1},d=()=>{G(u)},p=()=>{let e=m[y];e&&e[1]===r&&delete m[y]},g={isValidating:!0};(0,N.isUndefined)(Z().data)&&(g.isLoading=!0);try{if(l&&(G(g),n.loadingTimeout&&(0,N.isUndefined)(Z().data)&&setTimeout(()=>{o&&c()&&q().onLoadingSlow(y,n)},n.loadingTimeout),m[y]=[a(b),(0,I.getTimestamp)()]),[t,r]=m[y],t=await t,l&&setTimeout(p,n.dedupingInterval),!m[y]||m[y][1]!==r)return l&&c()&&q().onDiscarded(y),!1;u.error=E.UNDEFINED;let e=f[y];if(!(0,N.isUndefined)(e)&&(r<=e[0]||r<=e[1]||0===e[1]))return d(),l&&c()&&q().onDiscarded(y),!1;let s=Z().data;u.data=i(s,t)?s:t,l&&c()&&q().onSuccess(t,y,n)}catch(n){p();let e=q(),{shouldRetryOnError:t}=e;!e.isPaused()&&(u.error=n,l&&c()&&(e.onError(n,y,e),(!0===t||(0,D.isFunction)(t)&&t(n))&&(!q().revalidateOnFocus||!q().revalidateOnReconnect||W())&&e.onErrorRetry(n,y,e,e=>{let t=h[y];t&&t[0]&&t[0](T.revalidateEvents.ERROR_REVALIDATE_EVENT,e)},{retryCount:(s.retryCount||0)+1,dedupe:!0})))}return o=!1,d(),!0},[y,r]),eh=(0,v.useCallback)(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,A.internalMutate)(r,z.current,...t)},[]);if((0,L.useIsomorphicLayoutEffect)(()=>{H.current=t,U.current=n,(0,N.isUndefined)(er)||(eo.current=er)}),(0,L.useIsomorphicLayoutEffect)(()=>{if(!y)return;let e=ep.bind(E.UNDEFINED,V),t=0,n=function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n==T.revalidateEvents.FOCUS_EVENT){let n=Date.now();q().revalidateOnFocus&&n>t&&W()&&(t=n+q().focusThrottleInterval,e())}else if(n==T.revalidateEvents.RECONNECT_EVENT)q().revalidateOnReconnect&&W()&&e();else if(n==T.revalidateEvents.MUTATE_EVENT)return ep();else if(n==T.revalidateEvents.ERROR_REVALIDATE_EVENT)return ep(r)},r=(0,j.subscribeCallback)(y,h,n);return B.current=!1,z.current=y,w.current=!0,G({_k:b}),el&&((0,N.isUndefined)(ei)||P.IS_SERVER?e():(0,R.rAF)(e)),()=>{B.current=!0,r()}},[y]),(0,L.useIsomorphicLayoutEffect)(()=>{let e;function t(){let t=(0,D.isFunction)(c)?c(Z().data):c;t&&-1!==e&&(e=setTimeout(n,t))}function n(){!Z().error&&(u||q().isVisible())&&(d||q().isOnline())?ep(V).then(t):t()}return t(),()=>{e&&(clearTimeout(e),e=-1)}},[c,u,d,y]),(0,v.useDebugValue)(es),a&&(0,N.isUndefined)(ei)&&y){if(!_.IS_REACT_LEGACY&&P.IS_SERVER)throw Error("Fallback data is required when using Suspense in SSR.");H.current=t,U.current=n,B.current=!1;let e=g[y];if((0,N.isUndefined)(e)||F(eh(e)),(0,N.isUndefined)(ea)){let e=ep(V);(0,N.isUndefined)(es)||(e.status="fulfilled",e.value=!0),F(e)}else throw ea}return{mutate:eh,get data(){return $.data=!0,es},get error(){return $.error=!0,ea},get isValidating(){return $.isValidating=!0,eu},get isLoading(){return $.isLoading=!0,ed}}};y.OBJECT.defineProperty(b.SWRConfig,"defaultValue",{value:w.defaultConfig});let z=(0,j.withArgs)(B),H=_.IS_REACT_LEGACY?e=>{e()}:v.default.startTransition,U=e=>{let[,t]=(0,v.useState)({}),n=(0,v.useRef)(!1),r=(0,v.useRef)(e),i=(0,v.useRef)({data:!1,error:!1,isValidating:!1}),a=(0,v.useCallback)(e=>{let a=!1,o=r.current;for(let t in e){let n=t;o[n]!==e[n]&&(o[n]=e[n],i.current[n]&&(a=!0))}a&&!n.current&&t({})},[]);return(0,L.useIsomorphicLayoutEffect)(()=>(n.current=!1,()=>{n.current=!0})),[r,i.current,a]},q=()=>function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{mutate:r}=(0,j.useSWRConfig)(),i=(0,v.useRef)(e),a=(0,v.useRef)(t),o=(0,v.useRef)(n),s=(0,v.useRef)(0),[l,c,u]=U({data:E.UNDEFINED,error:E.UNDEFINED,isMutating:!1}),d=l.current,p=(0,v.useCallback)(async(e,t)=>{let[n,l]=(0,k.serialize)(i.current);if(!a.current)throw Error("Can’t trigger the mutation: missing fetcher.");if(!n)throw Error("Can’t trigger the mutation: missing key.");let c=(0,O.mergeObjects)((0,O.mergeObjects)({populateCache:!1,throwOnError:!0},o.current),t),d=(0,I.getTimestamp)();s.current=d,u({isMutating:!0});try{let t=await r(n,a.current(l,{arg:e}),(0,O.mergeObjects)(c,{throwOnError:!0}));return s.current<=d&&(H(()=>u({data:t,isMutating:!1,error:void 0})),null==c.onSuccess||c.onSuccess.call(c,t,n,c)),t}catch(e){if(s.current<=d&&(H(()=>u({error:e,isMutating:!1})),null==c.onError||c.onError.call(c,e,n,c),c.throwOnError))throw e}},[]),h=(0,v.useCallback)(()=>{s.current=(0,I.getTimestamp)(),u({data:E.UNDEFINED,error:E.UNDEFINED,isMutating:!1})},[]);return(0,L.useIsomorphicLayoutEffect)(()=>{i.current=e,a.current=t,o.current=n}),{trigger:p,reset:h,get data(){return c.data=!0,d.data},get error(){return c.error=!0,d.error},get isMutating(){return c.isMutating=!0,d.isMutating}}},W=(0,j.withMiddleware)(z,q);e.s(["default",()=>W],72047);var Z=t,G=r;let K={};async function X(e,t){let{arg:n}=t,r=l(n.activeForkKey);if(r)return fetch(e,{method:"POST",body:JSON.stringify({chatId:n.chatId,messageId:r})}).then(e=>e.json())}function $(){let{chatId:e}=eh(),{trigger:t}=W("/chat/api/chat/leaf",X),{data:n,mutate:r}=(0,Z.default)(["chat:leaf:cache",e],null),i=(0,G.useCallback)(e=>{r(t=>{if(!e)return t;let n=!1,r={...t||K};for(let t of e)r[t]!==e&&(r[t]=e,n=!0);return n?r:t})},[r]);return{cacheForkKey:i,saveLeafMessageId:(0,G.useCallback)(e=>{let{chatId:n,activeForkKey:r}=e;n&&t({chatId:n,activeForkKey:r})},[t]),forkKeyCache:n||K,switchForkKey:i}}var Y=e.i(480118),J=e.i(726718);e.s(["getChatActions",()=>ed,"getChatAtoms",()=>eu,"getWritableChatAtoms",()=>es],819969);var Q=e.i(205341),ee=e.i(753533),et=e.i(142219),en=e.i(470259),er=e.i(452703);e.i(168204);var ei=e.i(225695),ea=e.i(972287);let eo=new Map,es=(0,ee.cacheResultById)(eo,()=>({awaitingChatSubmissionResponse:(0,Q.atom)(!1),isStreaming:(0,Q.atom)(!1),isStreamingBlock:(0,Q.atom)(!1),lastStableBlock:(0,Q.atom)(null),forkKeyCache:(0,Q.atom)({}),userInitiatedAbort:(0,Q.atom)(!1),template:(0,Q.atom)(null),data:(0,Q.atom)({activeBlock:null,activeForkKey:[],messages:[],title:"Untitled",designSystemId:null}),attributes:(0,Q.atom)({access:3,session:void 0,team:void 0,isAdmin:!1,isAuthor:!1,ownerId:void 0,authorId:void 0,canWriteToChat:!1,designSystemId:null}),permissions:(0,Q.atom)({access:3,session:void 0,team:void 0,isAdmin:!1,isAuthor:!1,ownerId:void 0,authorId:void 0,canWriteToChat:!1}),externalMeta:(0,Q.atom)({error:en.SWR_PROMISE_NOT_FOUND}),project:(0,Q.atom)({error:en.SWR_PROMISE_NOT_FOUND,status:0}),latest:(0,Q.atom)({error:en.SWR_PROMISE_NOT_FOUND})})),el=new Map,ec=new Map,eu=(0,ee.cacheResultById)(el,e=>{let t=es(e);return{...t,deploymentState:(0,Q.atom)(e=>{let n=e(t.externalMeta);if(n.error){if(n.error===en.MISSING_MFA_SCOPE)return"two-factor-error";if(n.error!==en.NOT_FOUND)return"error"}return n.deployment?(0,er.mapReadyStateToDeploymentState)(n.deployment.readyState):"not-deployed"}),isAuthor:(0,Q.atom)(e=>e(t.permissions).isAuthor),canWriteToChat:(0,Q.atom)(e=>!!e(t.permissions).canWriteToChat),activeForkKey:(0,Q.atom)(e=>e(t.data).activeForkKey),activeBlock:(0,Q.atom)(e=>e(t.data).activeBlock),hasMessages:(0,Q.atom)(e=>e(t.data).messages.length>0),messages:(0,Q.atom)(e=>e(t.data).messages.map(e=>({...e,content:"string"==typeof e.content?{type:"parts",...(0,ei.createMDXMessageContent)(e.content)}:{type:"message-binary-format",value:e.content}}))),title:(0,Q.atom)(e=>e(t.data).title),designSystemId:(0,Q.atom)(e=>e(t.data).designSystemId),activeDesignSystem:(0,Q.atom)(e=>{let n=e(t.data),r=e((0,ea.getScopedAtoms)().designSystems);return n.designSystemId&&Array.isArray(r)&&r.find(e=>e.designSystemId===n.designSystemId)||null})}});function ed(e){let t=es(e);return{setChatData:e=>et.store.set(t.data,e),setActiveBlock:e=>{let n=et.store.get(t.data);et.store.set(t.data,{...n,activeBlock:e})},setAuthorId:e=>et.store.set(t.data,{...et.store.get(t.data),authorId:e}),setOwnerId:e=>et.store.set(t.data,{...et.store.get(t.data),ownerId:e}),setCanWriteToChat:e=>{et.store.set(t.data,{...et.store.get(t.data),canWriteToChat:e}),et.store.set(t.permissions,{...et.store.get(t.permissions),canWriteToChat:e})},setIsStreamingBlock:e=>et.store.set(t.isStreamingBlock,e),setLastStableBlock:e=>et.store.set(t.lastStableBlock,e),setChatPermissions:e=>et.store.set(t.permissions,e),setAwaitingChatSubmissionResponse:e=>et.store.set(t.awaitingChatSubmissionResponse,e),setIsStreaming:e=>et.store.set(t.isStreaming,e),setMessages:e=>et.store.set(t.data,{...et.store.get(t.data),messages:e}),setChatTitle:e=>et.store.set(t.data,{...et.store.get(t.data),title:e}),setActiveForkKey:e=>et.store.set(t.data,{...et.store.get(t.data),activeForkKey:e}),updateForkKeyCache:e=>et.store.set(t.forkKeyCache,e),addToForkKeyCache:(e,n)=>et.store.set(t.forkKeyCache,{...et.store.get(t.forkKeyCache),[e]:n}),updateActiveForkKey:e=>{let n=et.store.get(t.data);et.store.set(t.data,{...n,activeForkKey:e})},appendMessage:e=>{let n=et.store.get(t.data);et.store.set(t.data,{...n,messages:[...n.messages,e]})},updateMessage:(e,n)=>{let r=et.store.get(t.data);et.store.set(t.data,{...r,messages:r.messages.map(t=>t.id===e?{...t,...n}:t)})},removeMessage:e=>{let n=et.store.get(t.data);et.store.set(t.data,{...n,messages:n.messages.filter(t=>t.id!==e)})},updateMessageAttachments:(e,n)=>{let r=et.store.get(t.data),i=r.messages.find(t=>t.id===e);if(!i||"user"!==i.role)return;let a={...i,attachments:[...i.attachments||[],...n]};et.store.set(t.data,{...r,messages:r.messages.map(t=>t.id===e?a:t)})},updateMessageEditingContent:(e,n,r)=>{let i=et.store.get(t.data),a=i.messages.find(t=>t.id===e);if(!a||"user"!==a.role)return;let o={...a,editingContent:n,editingAttachments:r};et.store.set(t.data,{...i,messages:i.messages.map(t=>t.id===e?o:t)})},setUserInitiatedAbort:e=>et.store.set(t.userInitiatedAbort,e),abortStreaming:()=>{if(!et.store.get(t.isStreaming))return;et.store.set(t.userInitiatedAbort,!0);let e=et.store.get(t.data);if(e.messages.length>0){let n=e.messages[e.messages.length-1];"assistant"===n.role&&et.store.set(t.data,{...e,messages:[...e.messages.slice(0,-1),{...n,streaming:!1}]})}et.store.set(t.isStreaming,!1)}}}function ep(e){return null!=e?e:"_no_chat_"}function eh(){let{data:e,mutate:n}=(0,t.default)("chat:id"),i=(0,Y.usePathname)();return(0,r.useEffect)(()=>{(0,J.getChatIdFromPathname)(i)||n(void 0,!1)},[i,n]),{chatId:e}}function ef(){let{chatId:e}=eh(),{setIsStreaming:t}=ed(null!=e?e:"no_chat"),{saveLeafMessageId:a,cacheForkKey:o}=$(),{mutate:s}=(0,n.useSWRConfig)();return(0,r.useCallback)(n=>{s(["chat:state",e],r=>{var s;let l=null!=r?r:i;return(l.activeForkKey&&o(l.activeForkKey),"function"==typeof n)?{...l,...n(l)}:(n.activeForkKey&&n.saveLeafMessageId&&e&&(delete n.saveLeafMessageId,a({chatId:e,activeForkKey:n.activeForkKey})),t(null!=(s=n.isStreaming)&&s),{...l,...n})})},[s,e,t,o,a])}function em(){let e=ep(eh().chatId),{data:n}=(0,t.default)(["chat:state",e]);return{...null!=n?n:i,chatId:e}}function eg(){let e=ep(eh().chatId),{data:n}=(0,t.default)(["chat:state",e]);return(0,r.useMemo)(()=>{let t=null!=n?n:i;return{messages:t.messages,activeForkKey:t.activeForkKey,chatId:e}},[null==n?void 0:n.messages,null==n?void 0:n.activeForkKey,e])}function ev(){let e=ep(eh().chatId),{data:n}=(0,t.default)(["chat:state",e]);return(0,r.useMemo)(()=>{let t=null!=n?n:i;return{isLoading:t.isLoading,isStreaming:t.isStreaming,isSyncing:t.isSyncing,isContinuing:t.isContinuing,isRestoring:t.isRestoring,initialStreamPromise:t.initialStreamPromise,chatId:e}},[null==n?void 0:n.isLoading,null==n?void 0:n.isStreaming,null==n?void 0:n.isSyncing,null==n?void 0:n.isContinuing,null==n?void 0:n.isRestoring,null==n?void 0:n.initialStreamPromise,e])}function ex(){var e;let n=ep(eh().chatId),{data:a}=(0,t.default)(["chat:state",n]),o=(0,r.useRef)(void 0);return(0,r.useMemo)(()=>{var e;let t=(null!=(e=null==a?void 0:a.messages)?e:i.messages).length;return o.current&&o.current.messagesLength===t&&o.current.chatId===n||(o.current={messagesLength:t,chatId:n}),o.current},[null==a||null==(e=a.messages)?void 0:e.length,n])}function ey(){let e=ep(eh().chatId),{data:n}=(0,t.default)(["chat:state",e]);return(0,r.useMemo)(()=>({isAuthor:(null!=n?n:i).isAuthor,chatId:e}),[null==n?void 0:n.isAuthor,e])}function eb(){let e=ep(eh().chatId),{data:n}=(0,t.default)(["chat:state",e]);return(0,r.useMemo)(()=>({undo:(null!=n?n:i).undo,chatId:e}),[null==n?void 0:n.undo,e])}function ew(){let e=ep(eh().chatId),{data:n}=(0,t.default)(["chat:state",e]);return(0,r.useMemo)(()=>({lastSyncedAt:(null!=n?n:i).lastSyncedAt,chatId:e}),[null==n?void 0:n.lastSyncedAt,e])}function ej(){let e=ep(eh().chatId),{data:n}=(0,t.default)(["chat:state",e]);return(0,r.useMemo)(()=>({prefillOptions:(null!=n?n:i).prefillOptions,chatId:e}),[null==n?void 0:n.prefillOptions,e])}function eC(){let e=ep(eh().chatId),{data:n}=(0,t.default)(["chat:state",e]);return(0,r.useMemo)(()=>({hashMessageId:(null!=n?n:i).hashMessageId,chatId:e}),[null==n?void 0:n.hashMessageId,e])}(0,ee.cacheResultById)(ec,(e,t)=>({editingContent:(0,Q.atom)(n=>{var r;let i=n(t).find(t=>t.id===e);return i&&"user"===i.role&&null!=(r=i.editingContent)?r:null}),editingAttachments:(0,Q.atom)(n=>{var r;let i=n(t).find(t=>t.id===e);return i&&"user"===i.role&&null!=(r=i.editingAttachments)?r:null})}))},179381,(e,t,n)=>{t.exports=function(){this.__data__=[],this.size=0}},278744,(e,t,n)=>{t.exports=function(e,t){return e===t||e!=e&&t!=t}},756755,(e,t,n)=>{var r=e.r(278744);t.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return -1}},366612,(e,t,n)=>{var r=e.r(756755),i=Array.prototype.splice;t.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():i.call(t,n,1),--this.size,!0)}},280256,(e,t,n)=>{var r=e.r(756755);t.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},780094,(e,t,n)=>{var r=e.r(756755);t.exports=function(e){return r(this.__data__,e)>-1}},26145,(e,t,n)=>{var r=e.r(756755);t.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},922416,(e,t,n)=>{var r=e.r(179381),i=e.r(366612),a=e.r(280256),o=e.r(780094),s=e.r(26145);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=a,l.prototype.has=o,l.prototype.set=s,t.exports=l},708027,(e,t,n)=>{var r=e.r(922416);t.exports=function(){this.__data__=new r,this.size=0}},205153,(e,t,n)=>{t.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},541364,(e,t,n)=>{t.exports=function(e){return this.__data__.get(e)}},689631,(e,t,n)=>{t.exports=function(e){return this.__data__.has(e)}},363883,(e,t,n)=>{var r=e.r(423748),i=e.r(791606),a="[object AsyncFunction]",o="[object Function]",s="[object GeneratorFunction]",l="[object Proxy]";t.exports=function(e){if(!i(e))return!1;var t=r(e);return t==o||t==s||t==a||t==l}},656921,(e,t,n)=>{t.exports=e.r(818408)["__core-js_shared__"]},763803,(e,t,n)=>{var r=e.r(656921),i=function(){var e=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();t.exports=function(e){return!!i&&i in e}},395331,(e,t,n)=>{var r=Function.prototype.toString;t.exports=function(e){if(null!=e){try{return r.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},732150,(e,t,n)=>{var r=e.r(363883),i=e.r(763803),a=e.r(791606),o=e.r(395331),s=/[\\^$.*+?()[\]{}|]/g,l=/^\[object .+?Constructor\]$/,c=Object.prototype,u=Function.prototype.toString,d=c.hasOwnProperty,p=RegExp("^"+u.call(d).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(e){return!(!a(e)||i(e))&&(r(e)?p:l).test(o(e))}},861686,(e,t,n)=>{t.exports=function(e,t){return null==e?void 0:e[t]}},622280,(e,t,n)=>{var r=e.r(732150),i=e.r(861686);t.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},74136,(e,t,n)=>{t.exports=e.r(622280)(e.r(818408),"Map")},95269,(e,t,n)=>{t.exports=e.r(622280)(Object,"create")},814640,(e,t,n)=>{var r=e.r(95269);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},502814,(e,t,n)=>{t.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=!!t,t}},320134,(e,t,n)=>{var r=e.r(95269),i="__lodash_hash_undefined__",a=Object.prototype.hasOwnProperty;t.exports=function(e){var t=this.__data__;if(r){var n=t[e];return n===i?void 0:n}return a.call(t,e)?t[e]:void 0}},602951,(e,t,n)=>{var r=e.r(95269),i=Object.prototype.hasOwnProperty;t.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},479981,(e,t,n)=>{var r=e.r(95269),i="__lodash_hash_undefined__";t.exports=function(e,t){var n=this.__data__;return this.size+=+!this.has(e),n[e]=r&&void 0===t?i:t,this}},804937,(e,t,n)=>{var r=e.r(814640),i=e.r(502814),a=e.r(320134),o=e.r(602951),s=e.r(479981);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=a,l.prototype.has=o,l.prototype.set=s,t.exports=l},662682,(e,t,n)=>{var r=e.r(804937),i=e.r(922416),a=e.r(74136);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(a||i),string:new r}}},368725,(e,t,n)=>{t.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},548365,(e,t,n)=>{var r=e.r(368725);t.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},591270,(e,t,n)=>{var r=e.r(548365);t.exports=function(e){var t=r(this,e).delete(e);return this.size-=!!t,t}},87911,(e,t,n)=>{var r=e.r(548365);t.exports=function(e){return r(this,e).get(e)}},923680,(e,t,n)=>{var r=e.r(548365);t.exports=function(e){return r(this,e).has(e)}},327495,(e,t,n)=>{var r=e.r(548365);t.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=+(n.size!=i),this}},141177,(e,t,n)=>{var r=e.r(662682),i=e.r(591270),a=e.r(87911),o=e.r(923680),s=e.r(327495);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=a,l.prototype.has=o,l.prototype.set=s,t.exports=l},527270,(e,t,n)=>{var r=e.r(922416),i=e.r(74136),a=e.r(141177),o=200;t.exports=function(e,t){var n=this.__data__;if(n instanceof r){var s=n.__data__;if(!i||s.length<o-1)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new a(s)}return n.set(e,t),this.size=n.size,this}},875266,(e,t,n)=>{var r=e.r(922416),i=e.r(708027),a=e.r(205153),o=e.r(541364),s=e.r(689631),l=e.r(527270);function c(e){var t=this.__data__=new r(e);this.size=t.size}c.prototype.clear=i,c.prototype.delete=a,c.prototype.get=o,c.prototype.has=s,c.prototype.set=l,t.exports=c},239372,(e,t,n)=>{t.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},347474,(e,t,n)=>{var r=e.r(622280);t.exports=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}()},930215,(e,t,n)=>{var r=e.r(347474);t.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},263217,(e,t,n)=>{var r=e.r(930215),i=e.r(278744),a=Object.prototype.hasOwnProperty;t.exports=function(e,t,n){var o=e[t];a.call(e,t)&&i(o,n)&&(void 0!==n||t in e)||r(e,t,n)}},606227,(e,t,n)=>{var r=e.r(263217),i=e.r(930215);t.exports=function(e,t,n,a){var o=!n;n||(n={});for(var s=-1,l=t.length;++s<l;){var c=t[s],u=a?a(n[c],e[c],c,n,e):void 0;void 0===u&&(u=e[c]),o?i(n,c,u):r(n,c,u)}return n}},45203,(e,t,n)=>{t.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},648313,(e,t,n)=>{var r=e.r(423748),i=e.r(819674),a="[object Arguments]";t.exports=function(e){return i(e)&&r(e)==a}},417288,(e,t,n)=>{var r=e.r(648313),i=e.r(819674),a=Object.prototype,o=a.hasOwnProperty,s=a.propertyIsEnumerable;t.exports=r(function(){return arguments}())?r:function(e){return i(e)&&o.call(e,"callee")&&!s.call(e,"callee")}},272098,(e,t,n)=>{t.exports=Array.isArray},124019,(e,t,n)=>{t.exports=function(){return!1}},385370,(e,t,n)=>{var r=e.r(818408),i=e.r(124019),a=n&&!n.nodeType&&n,o=a&&t&&!t.nodeType&&t,s=o&&o.exports===a?r.Buffer:void 0;t.exports=(s?s.isBuffer:void 0)||i},729582,(e,t,n)=>{var r=0x1fffffffffffff,i=/^(?:0|[1-9]\d*)$/;t.exports=function(e,t){var n=typeof e;return!!(t=null==t?r:t)&&("number"==n||"symbol"!=n&&i.test(e))&&e>-1&&e%1==0&&e<t}},145373,(e,t,n)=>{var r=0x1fffffffffffff;t.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}},719575,(e,t,n)=>{var r=e.r(423748),i=e.r(145373),a=e.r(819674),o="[object Arguments]",s="[object Array]",l="[object Boolean]",c="[object Date]",u="[object Error]",d="[object Function]",p="[object Map]",h="[object Number]",f="[object Object]",m="[object RegExp]",g="[object Set]",v="[object String]",x="[object WeakMap]",y="[object ArrayBuffer]",b="[object DataView]",w="[object Float64Array]",j="[object Int8Array]",C="[object Int16Array]",k="[object Int32Array]",S="[object Uint8Array]",N="[object Uint8ClampedArray]",E="[object Uint16Array]",M="[object Uint32Array]",I={};I["[object Float32Array]"]=I[w]=I[j]=I[C]=I[k]=I[S]=I[N]=I[E]=I[M]=!0,I[o]=I[s]=I[y]=I[l]=I[b]=I[c]=I[u]=I[d]=I[p]=I[h]=I[f]=I[m]=I[g]=I[v]=I[x]=!1,t.exports=function(e){return a(e)&&i(e.length)&&!!I[r(e)]}},632900,(e,t,n)=>{t.exports=function(e){return function(t){return e(t)}}},29979,(e,t,n)=>{var r=e.r(472668),i=n&&!n.nodeType&&n,a=i&&t&&!t.nodeType&&t,o=a&&a.exports===i&&r.process;t.exports=function(){try{var e=a&&a.require&&a.require("util").types;if(e)return e;return o&&o.binding&&o.binding("util")}catch(e){}}()},713376,(e,t,n)=>{var r=e.r(719575),i=e.r(632900),a=e.r(29979),o=a&&a.isTypedArray;t.exports=o?i(o):r},127424,(e,t,n)=>{var r=e.r(45203),i=e.r(417288),a=e.r(272098),o=e.r(385370),s=e.r(729582),l=e.r(713376),c=Object.prototype.hasOwnProperty;t.exports=function(e,t){var n=a(e),u=!n&&i(e),d=!n&&!u&&o(e),p=!n&&!u&&!d&&l(e),h=n||u||d||p,f=h?r(e.length,String):[],m=f.length;for(var g in e)(t||c.call(e,g))&&!(h&&("length"==g||d&&("offset"==g||"parent"==g)||p&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||s(g,m)))&&f.push(g);return f}},570795,(e,t,n)=>{var r=Object.prototype;t.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}},991915,(e,t,n)=>{t.exports=function(e,t){return function(n){return e(t(n))}}},642918,(e,t,n)=>{t.exports=e.r(991915)(Object.keys,Object)},603114,(e,t,n)=>{var r=e.r(570795),i=e.r(642918),a=Object.prototype.hasOwnProperty;t.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))a.call(e,n)&&"constructor"!=n&&t.push(n);return t}},707850,(e,t,n)=>{var r=e.r(363883),i=e.r(145373);t.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},833089,(e,t,n)=>{var r=e.r(127424),i=e.r(603114),a=e.r(707850);t.exports=function(e){return a(e)?r(e):i(e)}},908687,(e,t,n)=>{var r=e.r(606227),i=e.r(833089);t.exports=function(e,t){return e&&r(t,i(t),e)}},242151,(e,t,n)=>{t.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},206645,(e,t,n)=>{var r=e.r(791606),i=e.r(570795),a=e.r(242151),o=Object.prototype.hasOwnProperty;t.exports=function(e){if(!r(e))return a(e);var t=i(e),n=[];for(var s in e)"constructor"==s&&(t||!o.call(e,s))||n.push(s);return n}},975419,(e,t,n)=>{var r=e.r(127424),i=e.r(206645),a=e.r(707850);t.exports=function(e){return a(e)?r(e,!0):i(e)}},120341,(e,t,n)=>{var r=e.r(606227),i=e.r(975419);t.exports=function(e,t){return e&&r(t,i(t),e)}},44242,(e,t,n)=>{var r=e.r(818408),i=n&&!n.nodeType&&n,a=i&&t&&!t.nodeType&&t,o=a&&a.exports===i?r.Buffer:void 0,s=o?o.allocUnsafe:void 0;t.exports=function(e,t){if(t)return e.slice();var n=e.length,r=s?s(n):new e.constructor(n);return e.copy(r),r}},133442,(e,t,n)=>{t.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},419519,(e,t,n)=>{t.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}},287024,(e,t,n)=>{t.exports=function(){return[]}},896852,(e,t,n)=>{var r=e.r(419519),i=e.r(287024),a=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols;t.exports=o?function(e){return null==e?[]:r(o(e=Object(e)),function(t){return a.call(e,t)})}:i},603332,(e,t,n)=>{var r=e.r(606227),i=e.r(896852);t.exports=function(e,t){return r(e,i(e),t)}},334666,(e,t,n)=>{t.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},530968,(e,t,n)=>{t.exports=e.r(991915)(Object.getPrototypeOf,Object)},667874,(e,t,n)=>{var r=e.r(334666),i=e.r(530968),a=e.r(896852),o=e.r(287024);t.exports=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,a(e)),e=i(e);return t}:o},983664,(e,t,n)=>{var r=e.r(606227),i=e.r(667874);t.exports=function(e,t){return r(e,i(e),t)}},41612,(e,t,n)=>{var r=e.r(334666),i=e.r(272098);t.exports=function(e,t,n){var a=t(e);return i(e)?a:r(a,n(e))}},628423,(e,t,n)=>{var r=e.r(41612),i=e.r(896852),a=e.r(833089);t.exports=function(e){return r(e,a,i)}},326640,(e,t,n)=>{var r=e.r(41612),i=e.r(667874),a=e.r(975419);t.exports=function(e){return r(e,a,i)}},531751,(e,t,n)=>{t.exports=e.r(622280)(e.r(818408),"DataView")},31337,(e,t,n)=>{t.exports=e.r(622280)(e.r(818408),"Promise")},511524,(e,t,n)=>{t.exports=e.r(622280)(e.r(818408),"Set")},115942,(e,t,n)=>{t.exports=e.r(622280)(e.r(818408),"WeakMap")},626568,(e,t,n)=>{var r=e.r(531751),i=e.r(74136),a=e.r(31337),o=e.r(511524),s=e.r(115942),l=e.r(423748),c=e.r(395331),u="[object Map]",d="[object Object]",p="[object Promise]",h="[object Set]",f="[object WeakMap]",m="[object DataView]",g=c(r),v=c(i),x=c(a),y=c(o),b=c(s),w=l;(r&&w(new r(new ArrayBuffer(1)))!=m||i&&w(new i)!=u||a&&w(a.resolve())!=p||o&&w(new o)!=h||s&&w(new s)!=f)&&(w=function(e){var t=l(e),n=t==d?e.constructor:void 0,r=n?c(n):"";if(r)switch(r){case g:return m;case v:return u;case x:return p;case y:return h;case b:return f}return t}),t.exports=w},137208,(e,t,n)=>{var r=Object.prototype.hasOwnProperty;t.exports=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&r.call(e,"index")&&(n.index=e.index,n.input=e.input),n}},533576,(e,t,n)=>{t.exports=e.r(818408).Uint8Array},688187,(e,t,n)=>{var r=e.r(533576);t.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},255438,(e,t,n)=>{var r=e.r(688187);t.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},997169,(e,t,n)=>{var r=/\w*$/;t.exports=function(e){var t=new e.constructor(e.source,r.exec(e));return t.lastIndex=e.lastIndex,t}},790793,(e,t,n)=>{var r=e.r(407667),i=r?r.prototype:void 0,a=i?i.valueOf:void 0;t.exports=function(e){return a?Object(a.call(e)):{}}},651235,(e,t,n)=>{var r=e.r(688187);t.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},299513,(e,t,n)=>{var r=e.r(688187),i=e.r(255438),a=e.r(997169),o=e.r(790793),s=e.r(651235),l="[object Boolean]",c="[object Date]",u="[object Map]",d="[object Number]",p="[object RegExp]",h="[object Set]",f="[object String]",m="[object Symbol]",g="[object ArrayBuffer]",v="[object DataView]",x="[object Float32Array]",y="[object Float64Array]",b="[object Int8Array]",w="[object Int16Array]",j="[object Int32Array]",C="[object Uint8Array]",k="[object Uint8ClampedArray]",S="[object Uint16Array]",N="[object Uint32Array]";t.exports=function(e,t,n){var E=e.constructor;switch(t){case g:return r(e);case l:case c:return new E(+e);case v:return i(e,n);case x:case y:case b:case w:case j:case C:case k:case S:case N:return s(e,n);case u:return new E;case d:case f:return new E(e);case p:return a(e);case h:return new E;case m:return o(e)}}},116947,(e,t,n)=>{var r=e.r(791606),i=Object.create;t.exports=function(){function e(){}return function(t){if(!r(t))return{};if(i)return i(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}()},807299,(e,t,n)=>{var r=e.r(116947),i=e.r(530968),a=e.r(570795);t.exports=function(e){return"function"!=typeof e.constructor||a(e)?{}:r(i(e))}},44732,(e,t,n)=>{var r=e.r(626568),i=e.r(819674),a="[object Map]";t.exports=function(e){return i(e)&&r(e)==a}},249084,(e,t,n)=>{var r=e.r(44732),i=e.r(632900),a=e.r(29979),o=a&&a.isMap;t.exports=o?i(o):r},292596,(e,t,n)=>{var r=e.r(626568),i=e.r(819674),a="[object Set]";t.exports=function(e){return i(e)&&r(e)==a}},791316,(e,t,n)=>{var r=e.r(292596),i=e.r(632900),a=e.r(29979),o=a&&a.isSet;t.exports=o?i(o):r},716543,(e,t,n)=>{var r=e.r(875266),i=e.r(239372),a=e.r(263217),o=e.r(908687),s=e.r(120341),l=e.r(44242),c=e.r(133442),u=e.r(603332),d=e.r(983664),p=e.r(628423),h=e.r(326640),f=e.r(626568),m=e.r(137208),g=e.r(299513),v=e.r(807299),x=e.r(272098),y=e.r(385370),b=e.r(249084),w=e.r(791606),j=e.r(791316),C=e.r(833089),k=e.r(975419),S=1,N=2,E=4,M="[object Arguments]",I="[object Array]",D="[object Boolean]",T="[object Date]",A="[object Error]",L="[object Function]",P="[object GeneratorFunction]",R="[object Map]",_="[object Number]",O="[object Object]",F="[object RegExp]",V="[object Set]",B="[object String]",z="[object Symbol]",H="[object WeakMap]",U="[object ArrayBuffer]",q="[object DataView]",W="[object Float32Array]",Z="[object Float64Array]",G="[object Int8Array]",K="[object Int16Array]",X="[object Int32Array]",$="[object Uint8Array]",Y="[object Uint8ClampedArray]",J="[object Uint16Array]",Q="[object Uint32Array]",ee={};function et(e,t,n,I,D,T){var A,R=t&S,_=t&N,F=t&E;if(n&&(A=D?n(e,I,D,T):n(e)),void 0!==A)return A;if(!w(e))return e;var V=x(e);if(V){if(A=m(e),!R)return c(e,A)}else{var B=f(e),z=B==L||B==P;if(y(e))return l(e,R);if(B==O||B==M||z&&!D){if(A=_||z?{}:v(e),!R)return _?d(e,s(A,e)):u(e,o(A,e))}else{if(!ee[B])return D?e:{};A=g(e,B,R)}}T||(T=new r);var H=T.get(e);if(H)return H;T.set(e,A),j(e)?e.forEach(function(r){A.add(et(r,t,n,r,e,T))}):b(e)&&e.forEach(function(r,i){A.set(i,et(r,t,n,i,e,T))});var U=F?_?h:p:_?k:C,q=V?void 0:U(e);return i(q||e,function(r,i){q&&(r=e[i=r]),a(A,i,et(r,t,n,i,e,T))}),A}ee[M]=ee[I]=ee[U]=ee[q]=ee[D]=ee[T]=ee[W]=ee[Z]=ee[G]=ee[K]=ee[X]=ee[R]=ee[_]=ee[O]=ee[F]=ee[V]=ee[B]=ee[z]=ee[$]=ee[Y]=ee[J]=ee[Q]=!0,ee[A]=ee[L]=ee[H]=!1,t.exports=et},120311,(e,t,n)=>{var r=e.r(716543),i=1,a=4;t.exports=function(e){return r(e,i|a)}},75356,e=>{"use strict";let t=24;e.s(["PROJECT_PAGE_SIZE",0,t])},443324,(e,t,n)=>{var r=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",r={};function i(e,t){if(!r[e]){r[e]={};for(var n=0;n<e.length;n++)r[e][e.charAt(n)]=n}return r[e][t]}var a={compressToBase64:function(e){if(null==e)return"";var n=a._compress(e,6,function(e){return t.charAt(e)});switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:a._decompress(e.length,32,function(n){return i(t,e.charAt(n))})},compressToUTF16:function(t){return null==t?"":a._compress(t,15,function(t){return e(t+32)})+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:a._decompress(e.length,16384,function(t){return e.charCodeAt(t)-32})},compressToUint8Array:function(e){for(var t=a.compress(e),n=new Uint8Array(2*t.length),r=0,i=t.length;r<i;r++){var o=t.charCodeAt(r);n[2*r]=o>>>8,n[2*r+1]=o%256}return n},decompressFromUint8Array:function(t){if(null==t)return a.decompress(t);for(var n=Array(t.length/2),r=0,i=n.length;r<i;r++)n[r]=256*t[2*r]+t[2*r+1];var o=[];return n.forEach(function(t){o.push(e(t))}),a.decompress(o.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":a._compress(e,6,function(e){return n.charAt(e)})},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),a._decompress(e.length,32,function(t){return i(n,e.charAt(t))}))},compress:function(t){return a._compress(t,16,function(t){return e(t)})},_compress:function(e,t,n){if(null==e)return"";var r,i,a,o={},s={},l="",c="",u="",d=2,p=3,h=2,f=[],m=0,g=0;for(a=0;a<e.length;a+=1)if(l=e.charAt(a),Object.prototype.hasOwnProperty.call(o,l)||(o[l]=p++,s[l]=!0),c=u+l,Object.prototype.hasOwnProperty.call(o,c))u=c;else{if(Object.prototype.hasOwnProperty.call(s,u)){if(256>u.charCodeAt(0)){for(r=0;r<h;r++)m<<=1,g==t-1?(g=0,f.push(n(m)),m=0):g++;for(r=0,i=u.charCodeAt(0);r<8;r++)m=m<<1|1&i,g==t-1?(g=0,f.push(n(m)),m=0):g++,i>>=1}else{for(r=0,i=1;r<h;r++)m=m<<1|i,g==t-1?(g=0,f.push(n(m)),m=0):g++,i=0;for(r=0,i=u.charCodeAt(0);r<16;r++)m=m<<1|1&i,g==t-1?(g=0,f.push(n(m)),m=0):g++,i>>=1}0==--d&&(d=Math.pow(2,h),h++),delete s[u]}else for(r=0,i=o[u];r<h;r++)m=m<<1|1&i,g==t-1?(g=0,f.push(n(m)),m=0):g++,i>>=1;0==--d&&(d=Math.pow(2,h),h++),o[c]=p++,u=String(l)}if(""!==u){if(Object.prototype.hasOwnProperty.call(s,u)){if(256>u.charCodeAt(0)){for(r=0;r<h;r++)m<<=1,g==t-1?(g=0,f.push(n(m)),m=0):g++;for(r=0,i=u.charCodeAt(0);r<8;r++)m=m<<1|1&i,g==t-1?(g=0,f.push(n(m)),m=0):g++,i>>=1}else{for(r=0,i=1;r<h;r++)m=m<<1|i,g==t-1?(g=0,f.push(n(m)),m=0):g++,i=0;for(r=0,i=u.charCodeAt(0);r<16;r++)m=m<<1|1&i,g==t-1?(g=0,f.push(n(m)),m=0):g++,i>>=1}0==--d&&(d=Math.pow(2,h),h++),delete s[u]}else for(r=0,i=o[u];r<h;r++)m=m<<1|1&i,g==t-1?(g=0,f.push(n(m)),m=0):g++,i>>=1;0==--d&&(d=Math.pow(2,h),h++)}for(r=0,i=2;r<h;r++)m=m<<1|1&i,g==t-1?(g=0,f.push(n(m)),m=0):g++,i>>=1;for(;;){if(m<<=1,g==t-1){f.push(n(m));break}g++}return f.join("")},decompress:function(e){return null==e?"":""==e?null:a._decompress(e.length,32768,function(t){return e.charCodeAt(t)})},_decompress:function(t,n,r){var i,a,o,s,l,c,u,d,p=[],h=4,f=4,m=3,g="",v=[],x={val:r(0),position:n,index:1};for(a=0;a<3;a+=1)p[a]=a;for(s=0,c=4,u=1;u!=c;)l=x.val&x.position,x.position>>=1,0==x.position&&(x.position=n,x.val=r(x.index++)),s|=(l>0)*u,u<<=1;switch(i=s){case 0:for(s=0,c=256,u=1;u!=c;)l=x.val&x.position,x.position>>=1,0==x.position&&(x.position=n,x.val=r(x.index++)),s|=(l>0)*u,u<<=1;d=e(s);break;case 1:for(s=0,c=65536,u=1;u!=c;)l=x.val&x.position,x.position>>=1,0==x.position&&(x.position=n,x.val=r(x.index++)),s|=(l>0)*u,u<<=1;d=e(s);break;case 2:return""}for(p[3]=d,o=d,v.push(d);;){if(x.index>t)return"";for(s=0,c=Math.pow(2,m),u=1;u!=c;)l=x.val&x.position,x.position>>=1,0==x.position&&(x.position=n,x.val=r(x.index++)),s|=(l>0)*u,u<<=1;switch(d=s){case 0:for(s=0,c=256,u=1;u!=c;)l=x.val&x.position,x.position>>=1,0==x.position&&(x.position=n,x.val=r(x.index++)),s|=(l>0)*u,u<<=1;p[f++]=e(s),d=f-1,h--;break;case 1:for(s=0,c=65536,u=1;u!=c;)l=x.val&x.position,x.position>>=1,0==x.position&&(x.position=n,x.val=r(x.index++)),s|=(l>0)*u,u<<=1;p[f++]=e(s),d=f-1,h--;break;case 2:return v.join("")}if(0==h&&(h=Math.pow(2,m),m++),p[d])g=p[d];else{if(d!==f)return null;g=o+o.charAt(0)}v.push(g),p[f++]=o+g.charAt(0),h--,o=g,0==h&&(h=Math.pow(2,m),m++)}}};return a}();"function"==typeof define&&define.amd?(t=>void 0!==t&&e.v(t))((e.r,r)):null!=t?t.exports=r:"undefined"!=typeof angular&&null!=angular&&angular.module("LZString",[]).factory("LZString",function(){return r})},254211,941813,569543,e=>{"use strict";var t=e.i(205341);let n=10,r=50;e.s(["MAX_FAVORITES",0,n,"MAX_RECENT_CHATS",0,r],941813);var i=e.i(75356),a=e.i(443324);e.i(541536);var o=e.i(23474),s=e.i(917675);let l=o.z.object({webSearch:o.z.boolean(),generateImages:o.z.boolean(),designSystemId:o.z.string().nullable().default(null)}),c="v0-durable-chat-state",u=o.z.object({lastUpdated:o.z.number()}),d={lastUpdated:M()},p="v0-durable-scoped-state",h=o.z.object({sidebarRecentChatsSkeleton:o.z.number(),sidebarFavoriteChatsAndProjectsSkeleton:o.z.number(),sidebarRecentChatsCollapsed:o.z.boolean(),sidebarFavoriteChatsAndProjectsCollapsed:o.z.boolean(),projectsSkeleton:o.z.number(),lastUpdated:o.z.number()}),f={sidebarRecentChatsSkeleton:Math.floor(r/2),sidebarFavoriteChatsAndProjectsSkeleton:Math.floor(n),sidebarRecentChatsCollapsed:!1,sidebarFavoriteChatsAndProjectsCollapsed:!1,projectsSkeleton:i.PROJECT_PAGE_SIZE,lastUpdated:M()},m="v0-durable-root-state",g=o.z.enum(["build","ask"]),v=o.z.object({ratio:o.z.number(),visible:o.z.boolean().default(!0),savedRatio:o.z.number().optional(),savedVisibility:o.z.boolean().optional()}),x="input",y="output",b=v.extend({id:o.z.literal(x)}),w=v.extend({id:o.z.literal(y)}),j=o.z.union([b,w]),C=o.z.object({sidebarCollapsed:o.z.boolean(),lastUpdated:o.z.number(),modelConfiguration:s.ModelConfigurationSchema,toolConfiguration:l,messageMode:g,shouldShowUpgrade:o.z.boolean().default(!1),chatPanelLayout:o.z.array(j),chatMobilePanel:o.z.enum([x,y]),dismissedFeatureDialogs:o.z.record(o.z.string(),o.z.boolean()).default({})}),k={sidebarCollapsed:!1,lastUpdated:M(),modelConfiguration:{modelId:"v0-1.5-md",thinking:!1,imageGenerations:!1},toolConfiguration:{webSearch:!0,generateImages:!0,designSystemId:null},messageMode:"build",shouldShowUpgrade:!1,chatMobilePanel:x,chatPanelLayout:[{id:x,ratio:.3,visible:!0},{id:y,ratio:.7,visible:!0}],dismissedFeatureDialogs:{}},S={chat:{schema:u,keyedSchema:o.z.record(o.z.string(),u),cookieKey:c},scoped:{schema:h,keyedSchema:o.z.record(o.z.string(),h),cookieKey:p},root:{schema:C,keyedSchema:o.z.record(o.z.literal("root"),C),cookieKey:m}};function N(e,t){try{if(!t)return null;let n=(0,a.decompressFromBase64)(t);if(!n)return null;let r=JSON.parse(n),i=e.safeParse(r);if(!i.success)throw Error("Invalid durable state",{cause:i.error});return i.data}catch(e){return console.warn("Error parsing durable state cookie:",e),null}}function E(e){return(0,a.compressToBase64)(JSON.stringify(e))}function M(){let e=new Date,t=e.getFullYear()%100,n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0"),i=String(e.getHours()).padStart(2,"0"),a=String(e.getMinutes()).padStart(2,"0");return parseInt("".concat(t).concat(n).concat(r).concat(i).concat(a))}function I(e,t){return e-t}e.s(["CHAT_INPUT_PANEL_ID",0,x,"CHAT_OUTPUT_PANEL_ID",0,y,"DEFAULT_DURABLE_CHAT_STATE",0,d,"DEFAULT_DURABLE_ROOT_STATE",0,k,"DEFAULT_DURABLE_SCOPED_STATE",0,f,"DURABLE_STORES",0,S,"compareCompactTimestamps",()=>I,"compressDurableState",()=>E,"getCurrentCompactTimestamp",()=>M,"parseDurableStateCookie",()=>N],569543);var D=e.i(753533),T=e.i(142219),A=e.i(162061);let L=2048;function P(e){let t=S[e],n=A.default.get(t.cookieKey);return N(t.keyedSchema,n)}function R(e,t,n){let r=P(e),i={[t]:n},a={...r,...i},o=E(a);for(;o.length>L&&Object.keys(a).length>0;){let e=_(a);if(!e)break;delete a[e],o=E(a)}A.default.set(S[e].cookieKey,o,{expires:365})}function _(e){var t;return null!=(t=Object.entries(e).sort((e,t)=>{let[,n]=e,[,r]=t;return I(n.lastUpdated,r.lastUpdated)}).map(e=>{let[t]=e;return t})[0])?t:null}let O={chat:new Map,scoped:new Map,root:new Map},F=(0,D.cacheResultById)(O.chat,e=>{let n=V(e);function r(e,t,n){let r=V(e);R("chat",e,{...r,[t]:n,lastUpdated:M()})}let i=(0,t.atom)(n.lastUpdated,(t,n,a)=>{r(e,"lastUpdated",a),n(i,a)});return{lastUpdated:i}});function V(e,t){if(t&&e in t)return t[e];let n=z(e);if(n)return n;let r=B(e);if(r)return R("chat",e,r),r;let i=d;return R("chat",e,i),i}function B(e){let t=O.chat.get(e);return t?{lastUpdated:T.store.get(t.lastUpdated)}:null}function z(e){let t=P("chat");return t&&e in t?t[e]:null}let H=(0,D.cacheResultById)(O.scoped,e=>{let n=U(e);function r(e,t,n){let r=U(e);R("scoped",e,{...r,[t]:n,lastUpdated:M()})}let i=(0,t.atom)(n.sidebarRecentChatsSkeleton,(t,n,a)=>{r(e,"sidebarRecentChatsSkeleton",a),n(i,a)}),a=(0,t.atom)(n.sidebarFavoriteChatsAndProjectsSkeleton,(t,n,i)=>{r(e,"sidebarFavoriteChatsAndProjectsSkeleton",i),n(a,i)}),o=(0,t.atom)(n.sidebarRecentChatsCollapsed,(t,n,i)=>{r(e,"sidebarRecentChatsCollapsed",i),n(o,i)}),s=(0,t.atom)(n.sidebarFavoriteChatsAndProjectsCollapsed,(t,n,i)=>{r(e,"sidebarFavoriteChatsAndProjectsCollapsed",i),n(s,i)}),l=(0,t.atom)(n.projectsSkeleton,(t,n,i)=>{r(e,"projectsSkeleton",i),n(l,i)}),c=(0,t.atom)(n.lastUpdated,(t,n,i)=>{r(e,"lastUpdated",i),n(c,i)});return{sidebarRecentChatsSkeleton:i,sidebarFavoriteChatsAndProjectsSkeleton:a,sidebarRecentChatsCollapsed:o,sidebarFavoriteChatsAndProjectsCollapsed:s,projectsSkeleton:l,lastUpdated:c}});function U(e,t){if(t&&e in t)return t[e];let n=W(e);if(n)return n;let r=q(e);if(r)return R("scoped",e,r),r;let i=f;return R("scoped",e,i),i}function q(e){let t=O.scoped.get(e);if(!t)return null;let n=T.store.get(t.sidebarRecentChatsSkeleton),r=T.store.get(t.sidebarFavoriteChatsAndProjectsSkeleton),i=T.store.get(t.sidebarRecentChatsCollapsed),a=T.store.get(t.sidebarFavoriteChatsAndProjectsCollapsed);return{sidebarRecentChatsSkeleton:n,sidebarFavoriteChatsAndProjectsSkeleton:r,sidebarRecentChatsCollapsed:i,sidebarFavoriteChatsAndProjectsCollapsed:a,projectsSkeleton:T.store.get(t.projectsSkeleton),lastUpdated:T.store.get(t.lastUpdated)}}function W(e){let t=P("scoped");return t&&e in t?t[e]:null}let Z=(0,D.cacheResultById)(O.root,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"root";if("root"!==e)throw Error('Invalid rootId, must be "root"');let n=G(e);function r(e,t,n){let r=G(e);R("root",e,{...r,[t]:n,lastUpdated:M()})}let i=(0,t.atom)(n.sidebarCollapsed,(t,n,a)=>{r(e,"sidebarCollapsed",a),n(i,a)}),a=(0,t.atom)(n.lastUpdated,(t,n,i)=>{r(e,"lastUpdated",i),n(a,i)}),o=(0,t.atom)(n.modelConfiguration,(t,n,i)=>{r(e,"modelConfiguration",i),n(o,i)}),s=(0,t.atom)(n.messageMode,(t,n,i)=>{r(e,"messageMode",i),n(s,i)}),l=(0,t.atom)(n.shouldShowUpgrade,(t,n,i)=>{r(e,"shouldShowUpgrade",i),n(l,i)}),c=(0,t.atom)(n.chatPanelLayout,(t,n,i)=>{r(e,"chatPanelLayout",i),n(c,i)}),u=(0,t.atom)(n.chatMobilePanel,(t,n,i)=>{r(e,"chatMobilePanel",i),n(u,i)}),d=(0,t.atom)(n.dismissedFeatureDialogs,(t,n,i)=>{r(e,"dismissedFeatureDialogs",i),n(d,i)}),p=(0,t.atom)(n.toolConfiguration,(t,n,i)=>{r(e,"toolConfiguration",i),n(p,i)});return{sidebarCollapsed:i,lastUpdated:a,modelConfiguration:o,toolConfiguration:p,messageMode:s,shouldShowUpgrade:l,chatPanelLayout:c,chatMobilePanel:u,dismissedFeatureDialogs:d}});function G(e,t){if(t&&e in t&&t[e])return t[e];let n=X(e);if(n)return n;let r=K(e);if(r)return R("root",e,r),r;let i=k;return R("root",e,i),i}function K(e){let t=O.root.get(e);if(!t)return null;let n=T.store.get(t.sidebarCollapsed),r=T.store.get(t.lastUpdated),i=T.store.get(t.modelConfiguration),a=T.store.get(t.toolConfiguration),o=T.store.get(t.messageMode),s=T.store.get(t.shouldShowUpgrade),l=T.store.get(t.chatPanelLayout);return{sidebarCollapsed:n,lastUpdated:r,modelConfiguration:i,toolConfiguration:a,messageMode:o,shouldShowUpgrade:s,chatPanelLayout:l,chatMobilePanel:T.store.get(t.chatMobilePanel),dismissedFeatureDialogs:T.store.get(t.dismissedFeatureDialogs)}}function X(e){let t=P("root");return t&&e in t&&t[e]?t[e]:null}function $(e){let t={chat:[],scoped:[],root:[]};for(let n of Object.keys(S)){let r=(null==e?void 0:e[n])?Object.keys(e[n]):[],i=P(n),a=new Set([...i?Object.keys(i):[],...Array.from(O[n].keys()),...r]);t[n]=Array.from(a)}return t}e.s(["getDurableChatAtoms",0,F,"getDurableChatState",()=>V,"getDurableRootAtoms",0,Z,"getDurableRootState",()=>G,"getDurableScopedAtoms",0,H,"getDurableScopedState",()=>U,"getDurableStateKeys",()=>$],254211)},647370,(e,t,n)=>{var r="__lodash_hash_undefined__";t.exports=function(e){return this.__data__.set(e,r),this}},403852,(e,t,n)=>{t.exports=function(e){return this.__data__.has(e)}},25964,(e,t,n)=>{var r=e.r(141177),i=e.r(647370),a=e.r(403852);function o(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}o.prototype.add=o.prototype.push=i,o.prototype.has=a,t.exports=o},577484,(e,t,n)=>{t.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},689808,(e,t,n)=>{t.exports=function(e,t){return e.has(t)}},275483,(e,t,n)=>{var r=e.r(25964),i=e.r(577484),a=e.r(689808),o=1,s=2;t.exports=function(e,t,n,l,c,u){var d=n&o,p=e.length,h=t.length;if(p!=h&&!(d&&h>p))return!1;var f=u.get(e),m=u.get(t);if(f&&m)return f==t&&m==e;var g=-1,v=!0,x=n&s?new r:void 0;for(u.set(e,t),u.set(t,e);++g<p;){var y=e[g],b=t[g];if(l)var w=d?l(b,y,g,t,e,u):l(y,b,g,e,t,u);if(void 0!==w){if(w)continue;v=!1;break}if(x){if(!i(t,function(e,t){if(!a(x,t)&&(y===e||c(y,e,n,l,u)))return x.push(t)})){v=!1;break}}else if(!(y===b||c(y,b,n,l,u))){v=!1;break}}return u.delete(e),u.delete(t),v}},380060,(e,t,n)=>{t.exports=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}},449123,(e,t,n)=>{t.exports=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}},339965,(e,t,n)=>{var r=e.r(407667),i=e.r(533576),a=e.r(278744),o=e.r(275483),s=e.r(380060),l=e.r(449123),c=1,u=2,d="[object Boolean]",p="[object Date]",h="[object Error]",f="[object Map]",m="[object Number]",g="[object RegExp]",v="[object Set]",x="[object String]",y="[object Symbol]",b="[object ArrayBuffer]",w="[object DataView]",j=r?r.prototype:void 0,C=j?j.valueOf:void 0;t.exports=function(e,t,n,r,j,k,S){switch(n){case w:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case b:if(e.byteLength!=t.byteLength||!k(new i(e),new i(t)))break;return!0;case d:case p:case m:return a(+e,+t);case h:return e.name==t.name&&e.message==t.message;case g:case x:return e==t+"";case f:var N=s;case v:var E=r&c;if(N||(N=l),e.size!=t.size&&!E)break;var M=S.get(e);if(M)return M==t;r|=u,S.set(e,t);var I=o(N(e),N(t),r,j,k,S);return S.delete(e),I;case y:if(C)return C.call(e)==C.call(t)}return!1}},703206,(e,t,n)=>{var r=e.r(628423),i=1,a=Object.prototype.hasOwnProperty;t.exports=function(e,t,n,o,s,l){var c=n&i,u=r(e),d=u.length;if(d!=r(t).length&&!c)return!1;for(var p=d;p--;){var h=u[p];if(!(c?h in t:a.call(t,h)))return!1}var f=l.get(e),m=l.get(t);if(f&&m)return f==t&&m==e;var g=!0;l.set(e,t),l.set(t,e);for(var v=c;++p<d;){var x=e[h=u[p]],y=t[h];if(o)var b=c?o(y,x,h,t,e,l):o(x,y,h,e,t,l);if(!(void 0===b?x===y||s(x,y,n,o,l):b)){g=!1;break}v||(v="constructor"==h)}if(g&&!v){var w=e.constructor,j=t.constructor;w!=j&&"constructor"in e&&"constructor"in t&&!("function"==typeof w&&w instanceof w&&"function"==typeof j&&j instanceof j)&&(g=!1)}return l.delete(e),l.delete(t),g}},954525,(e,t,n)=>{var r=e.r(875266),i=e.r(275483),a=e.r(339965),o=e.r(703206),s=e.r(626568),l=e.r(272098),c=e.r(385370),u=e.r(713376),d=1,p="[object Arguments]",h="[object Array]",f="[object Object]",m=Object.prototype.hasOwnProperty;t.exports=function(e,t,n,g,v,x){var y=l(e),b=l(t),w=y?h:s(e),j=b?h:s(t);w=w==p?f:w,j=j==p?f:j;var C=w==f,k=j==f,S=w==j;if(S&&c(e)){if(!c(t))return!1;y=!0,C=!1}if(S&&!C)return x||(x=new r),y||u(e)?i(e,t,n,g,v,x):a(e,t,w,n,g,v,x);if(!(n&d)){var N=C&&m.call(e,"__wrapped__"),E=k&&m.call(t,"__wrapped__");if(N||E){var M=N?e.value():e,I=E?t.value():t;return x||(x=new r),v(M,I,n,g,x)}}return!!S&&(x||(x=new r),o(e,t,n,g,v,x))}},733698,(e,t,n)=>{var r=e.r(954525),i=e.r(819674);function a(e,t,n,o,s){return e===t||(null!=e&&null!=t&&(i(e)||i(t))?r(e,t,n,o,a,s):e!=e&&t!=t)}t.exports=a},40455,(e,t,n)=>{var r=e.r(733698);t.exports=function(e,t){return r(e,t)}},654225,894688,695608,874486,187195,838208,313084,124251,213917,632814,770496,73687,428350,605667,e=>{"use strict";var t=e.i(832520);e.i(541536);var n=e.i(23474),r=e.i(53223),i=e.i(120311),a=n,o=t,s=e.i(86395),l=t;function c(e){this.content=e}e.s([],894688),c.prototype={constructor:c,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return -1},get:function(e){var t=this.find(e);return -1==t?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,i=r.find(e),a=r.content.slice();return -1==i?a.push(n||e,t):(a[i+1]=t,n&&(a[i]=n)),new c(a)},remove:function(e){var t=this.find(e);if(-1==t)return this;var n=this.content.slice();return n.splice(t,2),new c(n)},addToStart:function(e,t){return new c([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new c(n)},addBefore:function(e,t,n){var r=this.remove(t),i=r.content.slice(),a=r.find(e);return i.splice(-1==a?i.length:a,0,t,n),new c(i)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return(e=c.from(e)).size?new c(e.content.concat(this.subtract(e).content)):this},append:function(e){return(e=c.from(e)).size?new c(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=c.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach(function(t,n){e[t]=n}),e},get size(){return this.content.length>>1}},c.from=function(e){if(e instanceof c)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new c(t)};let u=c;function d(e,t,n){for(let r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;let i=e.child(r),a=t.child(r);if(i==a){n+=i.nodeSize;continue}if(!i.sameMarkup(a))return n;if(i.isText&&i.text!=a.text){for(let e=0;i.text[e]==a.text[e];e++)n++;return n}if(i.content.size||a.content.size){let e=d(i.content,a.content,n+1);if(null!=e)return e}n+=i.nodeSize}}function p(e,t,n,r){for(let i=e.childCount,a=t.childCount;;){if(0==i||0==a)return i==a?null:{a:n,b:r};let o=e.child(--i),s=t.child(--a),l=o.nodeSize;if(o==s){n-=l,r-=l;continue}if(!o.sameMarkup(s))return{a:n,b:r};if(o.isText&&o.text!=s.text){let e=0,t=Math.min(o.text.length,s.text.length);for(;e<t&&o.text[o.text.length-e-1]==s.text[s.text.length-e-1];)e++,n--,r--;return{a:n,b:r}}if(o.content.size||s.content.size){let e=p(o.content,s.content,n-1,r-1);if(e)return e}n-=l,r-=l}}class h{nodesBetween(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0;for(let a=0,o=0;o<t;a++){let s=this.content[a],l=o+s.nodeSize;if(l>e&&!1!==n(s,r+o,i||null,a)&&s.content.size){let i=o+1;s.nodesBetween(Math.max(0,e-i),Math.min(s.content.size,t-i),n,r+i)}o=l}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,n,r){let i="",a=!0;return this.nodesBetween(e,t,(o,s)=>{let l=o.isText?o.text.slice(Math.max(e,s)-s,t-s):o.isLeaf?r?"function"==typeof r?r(o):r:o.type.spec.leafText?o.type.spec.leafText(o):"":"";o.isBlock&&(o.isLeaf&&l||o.isTextblock)&&n&&(a?a=!1:i+=n),i+=l},0),i}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,n=e.firstChild,r=this.content.slice(),i=0;for(t.isText&&t.sameMarkup(n)&&(r[r.length-1]=t.withText(t.text+n.text),i=1);i<e.content.length;i++)r.push(e.content[i]);return new h(r,this.size+e.size)}cut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.size;if(0==e&&t==this.size)return this;let n=[],r=0;if(t>e)for(let i=0,a=0;a<t;i++){let o=this.content[i],s=a+o.nodeSize;s>e&&((a<e||s>t)&&(o=o.isText?o.cut(Math.max(0,e-a),Math.min(o.text.length,t-a)):o.cut(Math.max(0,e-a-1),Math.min(o.content.size,t-a-1))),n.push(o),r+=o.nodeSize),a=s}return new h(n,r)}cutByIndex(e,t){return e==t?h.empty:0==e&&t==this.content.length?this:new h(this.content.slice(e,t))}replaceChild(e,t){let n=this.content[e];if(n==t)return this;let r=this.content.slice(),i=this.size+t.nodeSize-n.nodeSize;return r[e]=t,new h(r,i)}addToStart(e){return new h([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new h(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,n=0;t<this.content.length;t++){let r=this.content[t];e(r,n,t),n+=r.nodeSize}}findDiffStart(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return d(this,e,t)}findDiffEnd(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.size,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.size;return p(this,e,t,n)}findIndex(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(0==e)return m(0,e);if(e==this.size)return m(this.content.length,e);if(e>this.size||e<0)throw RangeError("Position ".concat(e," outside of fragment (").concat(this,")"));for(let n=0,r=0;;n++){let i=r+this.child(n).nodeSize;if(i>=e){if(i==e||t>0)return m(n+1,i);return m(n,r)}r=i}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return h.empty;if(!Array.isArray(t))throw RangeError("Invalid input for Fragment.fromJSON");return new h(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return h.empty;let t,n=0;for(let r=0;r<e.length;r++){let i=e[r];n+=i.nodeSize,r&&i.isText&&e[r-1].sameMarkup(i)?(t||(t=e.slice(0,r)),t[t.length-1]=i.withText(t[t.length-1].text+i.text)):t&&t.push(i)}return new h(t||e,n)}static from(e){if(!e)return h.empty;if(e instanceof h)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new h([e],e.nodeSize);throw RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}constructor(e,t){if(this.content=e,this.size=t||0,null==t)for(let t=0;t<e.length;t++)this.size+=e[t].nodeSize}}h.empty=new h([],0);let f={index:0,offset:0};function m(e,t){return f.index=e,f.offset=t,f}function g(e,t){if(e===t)return!0;if(!(e&&"object"==typeof e)||!(t&&"object"==typeof t))return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!g(e[n],t[n]))return!1}else{for(let n in e)if(!(n in t)||!g(e[n],t[n]))return!1;for(let n in t)if(!(n in e))return!1}return!0}class v{addToSet(e){let t,n=!1;for(let r=0;r<e.length;r++){let i=e[r];if(this.eq(i))return e;if(this.type.excludes(i.type))t||(t=e.slice(0,r));else{if(i.type.excludes(this.type))return e;!n&&i.type.rank>this.type.rank&&(t||(t=e.slice(0,r)),t.push(this),n=!0),t&&t.push(i)}}return t||(t=e.slice()),n||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&g(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw RangeError("Invalid input for Mark.fromJSON");let n=e.marks[t.type];if(!n)throw RangeError("There is no mark type ".concat(t.type," in this schema"));let r=n.create(t.attrs);return n.checkAttrs(r.attrs),r}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&0==e.length)return v.none;if(e instanceof v)return[e];let t=e.slice();return t.sort((e,t)=>e.type.rank-t.type.rank),t}constructor(e,t){this.type=e,this.attrs=t}}v.none=[];class x extends Error{}class y{get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let n=w(this.content,e+this.openStart,t);return n&&new y(n,this.openStart,this.openEnd)}removeBetween(e,t){return new y(b(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return y.empty;let n=t.openStart||0,r=t.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw RangeError("Invalid input for Slice.fromJSON");return new y(h.fromJSON(e,t.content),n,r)}static maxOpen(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=0,r=0;for(let r=e.firstChild;r&&!r.isLeaf&&(t||!r.type.spec.isolating);r=r.firstChild)n++;for(let n=e.lastChild;n&&!n.isLeaf&&(t||!n.type.spec.isolating);n=n.lastChild)r++;return new y(e,n,r)}constructor(e,t,n){this.content=e,this.openStart=t,this.openEnd=n}}function b(e,t,n){let{index:r,offset:i}=e.findIndex(t),a=e.maybeChild(r),{index:o,offset:s}=e.findIndex(n);if(i==t||a.isText){if(s!=n&&!e.child(o).isText)throw RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(r!=o)throw RangeError("Removing non-flat range");return e.replaceChild(r,a.copy(b(a.content,t-i-1,n-i-1)))}function w(e,t,n,r){let{index:i,offset:a}=e.findIndex(t),o=e.maybeChild(i);if(a==t||o.isText)return r&&!r.canReplace(i,i,n)?null:e.cut(0,t).append(n).append(e.cut(t));let s=w(o.content,t-a-1,n);return s&&e.replaceChild(i,o.copy(s))}function j(e,t,n){if(n.openStart>e.depth)throw new x("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new x("Inconsistent open depths");return C(e,t,n,0)}function C(e,t,n,r){let i=e.index(r),a=e.node(r);if(i==t.index(r)&&r<e.depth-n.openStart){let o=C(e,t,n,r+1);return a.copy(a.content.replaceChild(i,o))}if(!n.content.size)return M(a,D(e,t,r));if(n.openStart||n.openEnd||e.depth!=r||t.depth!=r){let{start:i,end:o}=T(n,e);return M(a,I(e,i,o,t,r))}{let r=e.parent,i=r.content;return M(r,i.cut(0,e.parentOffset).append(n.content).append(i.cut(t.parentOffset)))}}function k(e,t){if(!t.type.compatibleContent(e.type))throw new x("Cannot join "+t.type.name+" onto "+e.type.name)}function S(e,t,n){let r=e.node(n);return k(r,t.node(n)),r}function N(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function E(e,t,n,r){let i=(t||e).node(n),a=0,o=t?t.index(n):i.childCount;e&&(a=e.index(n),e.depth>n?a++:e.textOffset&&(N(e.nodeAfter,r),a++));for(let e=a;e<o;e++)N(i.child(e),r);t&&t.depth==n&&t.textOffset&&N(t.nodeBefore,r)}function M(e,t){return e.type.checkContent(t),e.copy(t)}function I(e,t,n,r,i){let a=e.depth>i&&S(e,t,i+1),o=r.depth>i&&S(n,r,i+1),s=[];return E(null,e,i,s),a&&o&&t.index(i)==n.index(i)?(k(a,o),N(M(a,I(e,t,n,r,i+1)),s)):(a&&N(M(a,D(e,t,i+1)),s),E(t,n,i,s),o&&N(M(o,D(n,r,i+1)),s)),E(r,null,i,s),new h(s)}function D(e,t,n){let r=[];return E(null,e,n,r),e.depth>n&&N(M(S(e,t,n+1),D(e,t,n+1)),r),E(t,null,n,r),new h(r)}function T(e,t){let n=t.depth-e.openStart,r=t.node(n).copy(e.content);for(let e=n-1;e>=0;e--)r=t.node(e).copy(h.from(r));return{start:r.resolveNoCache(e.openStart+n),end:r.resolveNoCache(r.content.size-e.openEnd-n)}}y.empty=new y(h.empty,0,0);class A{resolveDepth(e){return null==e?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[3*this.resolveDepth(e)]}index(e){return this.path[3*this.resolveDepth(e)+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)}start(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(!(e=this.resolveDepth(e)))throw RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]}after(e){if(!(e=this.resolveDepth(e)))throw RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],r=e.child(t);return n?e.child(t).cut(n):r}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let n=this.path[3*t],r=0==t?0:this.path[3*t-1]+1;for(let t=0;t<e;t++)r+=n.child(t).nodeSize;return r}marks(){let e=this.parent,t=this.index();if(0==e.content.size)return v.none;if(this.textOffset)return e.child(t).marks;let n=e.maybeChild(t-1),r=e.maybeChild(t);if(!n){let e=n;n=r,r=e}let i=n.marks;for(var a=0;a<i.length;a++)!1!==i[a].type.spec.inclusive||r&&i[a].isInSet(r.marks)||(i=i[a--].removeFromSet(i));return i}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let n=t.marks,r=e.parent.maybeChild(e.index());for(var i=0;i<n.length;i++)!1!==n[i].type.spec.inclusive||r&&n[i].isInSet(r.marks)||(n=n[i--].removeFromSet(n));return n}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,t=arguments.length>1?arguments[1]:void 0;if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new _(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw RangeError("Position "+t+" out of range");let n=[],r=0,i=t;for(let t=e;;){let{index:e,offset:a}=t.content.findIndex(i),o=i-a;if(n.push(t,e,r+a),!o||(t=t.child(e)).isText)break;i=o-1,r+=a+1}return new A(t,n,i)}static resolveCached(e,t){let n=R.get(e);if(n)for(let e=0;e<n.elts.length;e++){let r=n.elts[e];if(r.pos==t)return r}else R.set(e,n=new L);let r=n.elts[n.i]=A.resolve(e,t);return n.i=(n.i+1)%P,r}constructor(e,t,n){this.pos=e,this.path=t,this.parentOffset=n,this.depth=t.length/3-1}}class L{constructor(){this.elts=[],this.i=0}}let P=12,R=new WeakMap;class _{get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}constructor(e,t,n){this.$from=e,this.$to=t,this.depth=n}}let O=Object.create(null);class F{get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.content.nodesBetween(e,t,n,r,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,n,r){return this.content.textBetween(e,t,n,r)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,n){return this.type==e&&g(this.attrs,t||e.defaultAttrs||O)&&v.sameSet(this.marks,n||v.none)}copy(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e==this.content?this:new F(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new F(this.type,this.attrs,this.content,e)}cut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.content.size;return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.content.size,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e==t)return y.empty;let r=this.resolve(e),i=this.resolve(t),a=n?0:r.sharedDepth(t),o=r.start(a);return new y(r.node(a).content.cut(r.pos-o,i.pos-o),r.depth-a,i.depth-a)}replace(e,t,n){return j(this.resolve(e),this.resolve(t),n)}nodeAt(e){for(let t=this;;){let{index:n,offset:r}=t.content.findIndex(e);if(!(t=t.maybeChild(n)))return null;if(r==e||t.isText)return t;e-=r+1}}childAfter(e){let{index:t,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:n}}childBefore(e){if(0==e)return{node:null,index:0,offset:0};let{index:t,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(t),index:t,offset:n};let r=this.content.child(t-1);return{node:r,index:t-1,offset:n-r.nodeSize}}resolve(e){return A.resolveCached(this,e)}resolveNoCache(e){return A.resolve(this,e)}rangeHasMark(e,t,n){let r=!1;return t>e&&this.nodesBetween(e,t,e=>(n.isInSet(e.marks)&&(r=!0),!r)),r}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),B(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h.empty,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n.childCount,a=this.contentMatchAt(e).matchFragment(n,r,i),o=a&&a.matchFragment(this.content,t);if(!o||!o.validEnd)return!1;for(let e=r;e<i;e++)if(!this.type.allowsMarks(n.child(e).marks))return!1;return!0}canReplaceWith(e,t,n,r){if(r&&!this.type.allowsMarks(r))return!1;let i=this.contentMatchAt(e).matchType(n),a=i&&i.matchFragment(this.content,t);return!!a&&a.validEnd}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=v.none;for(let t=0;t<this.marks.length;t++){let n=this.marks[t];n.type.checkAttrs(n.attrs),e=n.addToSet(e)}if(!v.sameSet(e,this.marks))throw RangeError("Invalid collection of marks for node ".concat(this.type.name,": ").concat(this.marks.map(e=>e.type.name)));this.content.forEach(e=>e.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(e=>e.toJSON())),e}static fromJSON(e,t){let n;if(!t)throw RangeError("Invalid input for Node.fromJSON");if(t.marks){if(!Array.isArray(t.marks))throw RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw RangeError("Invalid text node in JSON");return e.text(t.text,n)}let r=h.fromJSON(e,t.content),i=e.nodeType(t.type).create(t.attrs,r,n);return i.type.checkAttrs(i.attrs),i}constructor(e,t,n,r=v.none){this.type=e,this.attrs=t,this.marks=r,this.content=n||h.empty}}F.prototype.text=void 0;class V extends F{toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):B(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new V(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new V(this.type,this.attrs,e,this.marks)}cut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.text.length;return 0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}constructor(e,t,n,r){if(super(e,t,null,r),!n)throw RangeError("Empty text nodes are not allowed");this.text=n}}function B(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class z{static parse(e,t){let n=new H(e,t);if(null==n.next)return z.empty;let r=U(n);n.next&&n.err("Unexpected trailing text");let i=Q($(r));return ee(i,n),i}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.childCount,r=this;for(let i=t;r&&i<n;i++)r=r.matchType(e.child(i).type);return r}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let n=0;n<e.next.length;n++)if(this.next[t].type==e.next[n].type)return!0;return!1}fillBefore(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[this];function i(a,o){let s=a.matchFragment(e,n);if(s&&(!t||s.validEnd))return h.from(o.map(e=>e.createAndFill()));for(let e=0;e<a.next.length;e++){let{type:t,next:n}=a.next[e];if(!(t.isText||t.hasRequiredAttrs())&&-1==r.indexOf(n)){r.push(n);let e=i(n,o.concat(t));if(e)return e}}return null}return i(this,[])}findWrapping(e){for(let t=0;t<this.wrapCache.length;t+=2)if(this.wrapCache[t]==e)return this.wrapCache[t+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let r=n.shift(),i=r.match;if(i.matchType(e)){let e=[];for(let t=r;t.type;t=t.via)e.push(t.type);return e.reverse()}for(let e=0;e<i.next.length;e++){let{type:a,next:o}=i.next[e];a.isLeaf||a.hasRequiredAttrs()||a.name in t||r.type&&!o.validEnd||(n.push({match:a.contentMatch,type:a,via:r}),t[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw RangeError("There's no ".concat(e,"th edge in this content match"));return this.next[e]}toString(){let e=[];function t(n){e.push(n);for(let r=0;r<n.next.length;r++)-1==e.indexOf(n.next[r].next)&&t(n.next[r].next)}return t(this),e.map((t,n)=>{let r=n+(t.validEnd?"*":" ")+" ";for(let n=0;n<t.next.length;n++)r+=(n?", ":"")+t.next[n].type.name+"->"+e.indexOf(t.next[n].next);return r}).join("\n")}constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}}z.empty=new z(!0);class H{get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw SyntaxError(e+" (in content expression '"+this.string+"')")}constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}}function U(e){let t=[];do t.push(q(e));while(e.eat("|"))return 1==t.length?t[0]:{type:"choice",exprs:t}}function q(e){let t=[];do t.push(W(e));while(e.next&&")"!=e.next&&"|"!=e.next)return 1==t.length?t[0]:{type:"seq",exprs:t}}function W(e){let t=X(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else if(e.eat("{"))t=G(e,t);else break;return t}function Z(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function G(e,t){let n=Z(e),r=n;return e.eat(",")&&(r="}"!=e.next?Z(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function K(e,t){let n=e.nodeTypes,r=n[t];if(r)return[r];let i=[];for(let e in n){let r=n[e];r.isInGroup(t)&&i.push(r)}return 0==i.length&&e.err("No node type or group '"+t+"' found"),i}function X(e){if(e.eat("(")){let t=U(e);return e.eat(")")||e.err("Missing closing paren"),t}if(/\W/.test(e.next))e.err("Unexpected token '"+e.next+"'");else{let t=K(e,e.next).map(t=>(null==e.inline?e.inline=t.isInline:e.inline!=t.isInline&&e.err("Mixing inline and block content"),{type:"name",value:t}));return e.pos++,1==t.length?t[0]:{type:"choice",exprs:t}}}function $(e){let t=[[]];return i(a(e,0),n()),t;function n(){return t.push([])-1}function r(e,n,r){let i={term:r,to:n};return t[e].push(i),i}function i(e,t){e.forEach(e=>e.to=t)}function a(e,t){if("choice"==e.type)return e.exprs.reduce((e,n)=>e.concat(a(n,t)),[]);if("seq"==e.type)for(let r=0;;r++){let o=a(e.exprs[r],t);if(r==e.exprs.length-1)return o;i(o,t=n())}else if("star"==e.type){let o=n();return r(t,o),i(a(e.expr,o),o),[r(o)]}else if("plus"==e.type){let o=n();return i(a(e.expr,t),o),i(a(e.expr,o),o),[r(o)]}else if("opt"==e.type)return[r(t)].concat(a(e.expr,t));else if("range"==e.type){let o=t;for(let t=0;t<e.min;t++){let t=n();i(a(e.expr,o),t),o=t}if(-1==e.max)i(a(e.expr,o),o);else for(let t=e.min;t<e.max;t++){let t=n();r(o,t),i(a(e.expr,o),t),o=t}return[r(o)]}else if("name"==e.type)return[r(t,void 0,e.value)];else throw Error("Unknown expr type")}}function Y(e,t){return t-e}function J(e,t){let n=[];return r(t),n.sort(Y);function r(t){let i=e[t];if(1==i.length&&!i[0].term)return r(i[0].to);n.push(t);for(let e=0;e<i.length;e++){let{term:t,to:a}=i[e];t||-1!=n.indexOf(a)||r(a)}}}function Q(e){let t=Object.create(null);return n(J(e,0));function n(r){let i=[];r.forEach(t=>{e[t].forEach(t=>{let n,{term:r,to:a}=t;if(r){for(let e=0;e<i.length;e++)i[e][0]==r&&(n=i[e][1]);J(e,a).forEach(e=>{n||i.push([r,n=[]]),-1==n.indexOf(e)&&n.push(e)})}})});let a=t[r.join(",")]=new z(r.indexOf(e.length-1)>-1);for(let e=0;e<i.length;e++){let r=i[e][1].sort(Y);a.next.push({type:i[e][0],next:t[r.join(",")]||n(r)})}return a}}function ee(e,t){for(let n=0,r=[e];n<r.length;n++){let e=r[n],i=!e.validEnd,a=[];for(let t=0;t<e.next.length;t++){let{type:n,next:o}=e.next[t];a.push(n.name),i&&!(n.isText||n.hasRequiredAttrs())&&(i=!1),-1==r.indexOf(o)&&r.push(o)}i&&t.err("Only non-generatable nodes ("+a.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function et(e){let t=Object.create(null);for(let n in e){let r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function en(e,t){let n=Object.create(null);for(let r in e){let i=t&&t[r];if(void 0===i){let t=e[r];if(t.hasDefault)i=t.default;else throw RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function er(e,t,n,r){for(let r in t)if(!(r in e))throw RangeError("Unsupported attribute ".concat(r," for ").concat(n," of type ").concat(r));for(let n in e){let r=e[n];r.validate&&r.validate(t[n])}}function ei(e,t){let n=Object.create(null);if(t)for(let r in t)n[r]=new es(e,r,t[r]);return n}class ea{get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==z.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:en(this.attrs,e)}create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(this.isText)throw Error("NodeType.create can't construct text nodes");return new F(this,this.computeAttrs(e),h.from(t),v.setFrom(n))}createChecked(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return t=h.from(t),this.checkContent(t),new F(this,this.computeAttrs(e),t,v.setFrom(n))}createAndFill(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(e=this.computeAttrs(e),(t=h.from(t)).size){let e=this.contentMatch.fillBefore(t);if(!e)return null;t=e.append(t)}let r=this.contentMatch.matchFragment(t),i=r&&r.fillBefore(h.empty,!0);return i?new F(this,e,t.append(i),v.setFrom(n)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let t=0;t<e.childCount;t++)if(!this.allowsMarks(e.child(t).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw RangeError("Invalid content for node ".concat(this.name,": ").concat(e.toString().slice(0,50)))}checkAttrs(e){er(this.attrs,e,"node",this.name)}allowsMarkType(e){return null==this.markSet||this.markSet.indexOf(e)>-1}allowsMarks(e){if(null==this.markSet)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){let t;if(null==this.markSet)return e;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:v.none:e}static compile(e,t){let n=Object.create(null);e.forEach((e,r)=>n[e]=new ea(e,t,r));let r=t.spec.topNode||"doc";if(!n[r])throw RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw RangeError("Every schema needs a 'text' type");for(let e in n.text.attrs)throw RangeError("The text node type should not have attributes");return n}constructor(e,t,n){this.name=e,this.schema=t,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=ei(e,n.attrs),this.defaultAttrs=et(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==e),this.isText="text"==e}}function eo(e,t,n){let r=n.split("|");return n=>{let i=null===n?"null":typeof n;if(0>r.indexOf(i))throw RangeError("Expected value of type ".concat(r," for attribute ").concat(t," on type ").concat(e,", got ").concat(i))}}class es{get isRequired(){return!this.hasDefault}constructor(e,t,n){this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate="string"==typeof n.validate?eo(e,t,n.validate):n.validate}}class el{create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return!e&&this.instance?this.instance:new v(this,en(this.attrs,e))}static compile(e,t){let n=Object.create(null),r=0;return e.forEach((e,i)=>n[e]=new el(e,r++,t,i)),n}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){er(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}constructor(e,t,n,r){this.name=e,this.rank=t,this.schema=n,this.spec=r,this.attrs=ei(e,r.attrs),this.excluded=null;let i=et(this.attrs);this.instance=i?new v(this,i):null}}class ec{node(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if("string"==typeof e)e=this.nodeType(e);else if(e instanceof ea){if(e.schema!=this)throw RangeError("Node type from different schema used ("+e.name+")")}else throw RangeError("Invalid node type: "+e);return e.createChecked(t,n,r)}text(e,t){let n=this.nodes.text;return new V(n,n.defaultAttrs,e,v.setFrom(t))}mark(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return F.fromJSON(this,e)}markFromJSON(e){return v.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw RangeError("Unknown node type: "+e);return t}constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let n in e)t[n]=e[n];t.nodes=u.from(e.nodes),t.marks=u.from(e.marks||{}),this.nodes=ea.compile(this.spec.nodes,this),this.marks=el.compile(this.spec.marks,this);let n=Object.create(null);for(let e in this.nodes){if(e in this.marks)throw RangeError(e+" can not be both a node and a mark");let t=this.nodes[e],r=t.spec.content||"",i=t.spec.marks;if(t.contentMatch=n[r]||(n[r]=z.parse(r,this.nodes)),t.inlineContent=t.contentMatch.inlineContent,t.spec.linebreakReplacement){if(this.linebreakReplacement)throw RangeError("Multiple linebreak nodes defined");if(!t.isInline||!t.isLeaf)throw RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=t}t.markSet="_"==i?null:i?eu(this,i.split(" ")):""!=i&&t.inlineContent?null:[]}for(let e in this.marks){let t=this.marks[e],n=t.spec.excludes;t.excluded=null==n?[t]:""==n?[]:eu(this,n.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}}function eu(e,t){let n=[];for(let r=0;r<t.length;r++){let i=t[r],a=e.marks[i],o=a;if(a)n.push(a);else for(let t in e.marks){let r=e.marks[t];("_"==i||r.spec.group&&r.spec.group.split(" ").indexOf(i)>-1)&&n.push(o=r)}if(!o)throw SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}function ed(e){return null!=e.tag}function ep(e){return null!=e.style}class eh{parse(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new ej(this,t,!1);return n.addAll(e,v.none,t.from,t.to),n.finish()}parseSlice(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new ej(this,t,!0);return n.addAll(e,v.none,t.from,t.to),y.maxOpen(n.finish())}matchTag(e,t,n){for(let r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){let n=this.tags[r];if(ek(e,n.tag)&&(void 0===n.namespace||e.namespaceURI==n.namespace)&&(!n.context||t.matchesContext(n.context))){if(n.getAttrs){let t=n.getAttrs(e);if(!1===t)continue;n.attrs=t||void 0}return n}}}matchStyle(e,t,n,r){for(let i=r?this.styles.indexOf(r)+1:0;i<this.styles.length;i++){let r=this.styles[i],a=r.style;if(0==a.indexOf(e)&&(!r.context||n.matchesContext(r.context))&&(!(a.length>e.length)||61==a.charCodeAt(e.length)&&a.slice(e.length+1)==t)){if(r.getAttrs){let e=r.getAttrs(t);if(!1===e)continue;r.attrs=e||void 0}return r}}}static schemaRules(e){let t=[];function n(e){let n=null==e.priority?50:e.priority,r=0;for(;r<t.length;r++){let e=t[r];if((null==e.priority?50:e.priority)<n)break}t.splice(r,0,e)}for(let t in e.marks){let r=e.marks[t].spec.parseDOM;r&&r.forEach(e=>{n(e=eS(e)),e.mark||e.ignore||e.clearMark||(e.mark=t)})}for(let t in e.nodes){let r=e.nodes[t].spec.parseDOM;r&&r.forEach(e=>{n(e=eS(e)),e.node||e.ignore||e.mark||(e.node=t)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new eh(e,eh.schemaRules(e)))}constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let n=this.matchedStyles=[];t.forEach(e=>{if(ed(e))this.tags.push(e);else if(ep(e)){let t=/[^=]*/.exec(e.style)[0];0>n.indexOf(t)&&n.push(t),this.styles.push(e)}}),this.normalizeLists=!this.tags.some(t=>{if(!/^(ul|ol)\b/.test(t.tag)||!t.node)return!1;let n=e.nodes[t.node];return n.contentMatch.matchType(n)})}}let ef={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},em={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},eg={ol:!0,ul:!0},ev=1,ex=2,ey=4;function eb(e,t,n){return null!=t?(t?ev:0)|("full"===t?ex:0):e&&"pre"==e.whitespace?ev|ex:n&~ey}class ew{findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(h.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let t=this.type.contentMatch,n;return(n=t.findWrapping(e.type))?(this.match=t,n):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&ev)){let e=this.content[this.content.length-1],t;if(e&&e.isText&&(t=/[ \t\r\n\u000c]+$/.exec(e.text))){let n=e;e.text.length==t[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-t[0].length))}}let t=h.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(h.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!ef.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}constructor(e,t,n,r,i,a){this.type=e,this.attrs=t,this.marks=n,this.solid=r,this.options=a,this.content=[],this.activeMarks=v.none,this.match=i||(a&ey?null:e.contentMatch)}}class ej{get top(){return this.nodes[this.open]}addDOM(e,t){3==e.nodeType?this.addTextNode(e,t):1==e.nodeType&&this.addElement(e,t)}addTextNode(e,t){let n=e.nodeValue,r=this.top,i=r.options&ex?"full":this.localPreserveWS||(r.options&ev)>0;if("full"===i||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(i)n="full"!==i?n.replace(/\r?\n|\r/g," "):n.replace(/\r\n?/g,"\n");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let t=r.content[r.content.length-1],i=e.previousSibling;(!t||i&&"BR"==i.nodeName||t.isText&&/[ \t\r\n\u000c]$/.test(t.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n),t),this.findInText(e)}else this.findInside(e)}addElement(e,t,n){let r=this.localPreserveWS,i=this.top;("PRE"==e.tagName||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let a=e.nodeName.toLowerCase(),o;eg.hasOwnProperty(a)&&this.parser.normalizeLists&&eC(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(o=this.parser.matchTag(e,this,n));e:if(s?s.ignore:em.hasOwnProperty(a))this.findInside(e),this.ignoreFallback(e,t);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let n,r=this.needsBlock;if(ef.hasOwnProperty(a))i.content.length&&i.content[0].isInline&&this.open&&(this.open--,i=this.top),n=!0,i.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let o=s&&s.skip?t:this.readStyles(e,t);o&&this.addAll(e,o),n&&this.sync(i),this.needsBlock=r}else{let n=this.readStyles(e,t);n&&this.addElementByRule(e,s,n,!1===s.consuming?o:void 0)}this.localPreserveWS=r}leafFallback(e,t){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"),t)}ignoreFallback(e,t){"BR"!=e.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"),t)}readStyles(e,t){let n=e.style;if(n&&n.length)for(let e=0;e<this.parser.matchedStyles.length;e++){let r=this.parser.matchedStyles[e],i=n.getPropertyValue(r);if(i)for(let e;;){let n=this.parser.matchStyle(r,i,this,e);if(!n)break;if(n.ignore)return null;if(t=n.clearMark?t.filter(e=>!n.clearMark(e)):t.concat(this.parser.schema.marks[n.mark].create(n.attrs)),!1===n.consuming)e=n;else break}}return t}addElementByRule(e,t,n,r){let i,a;if(t.node)if((a=this.parser.schema.nodes[t.node]).isLeaf)this.insertNode(a.create(t.attrs),n)||this.leafFallback(e,n);else{let e=this.enter(a,t.attrs||null,n,t.preserveWhitespace);e&&(i=!0,n=e)}else{let e=this.parser.schema.marks[t.mark];n=n.concat(e.create(t.attrs))}let o=this.top;if(a&&a.isLeaf)this.findInside(e);else if(r)this.addElement(e,n,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(e=>this.insertNode(e,n));else{let r=e;"string"==typeof t.contentElement?r=e.querySelector(t.contentElement):"function"==typeof t.contentElement?r=t.contentElement(e):t.contentElement&&(r=t.contentElement),this.findAround(e,r,!0),this.addAll(r,n),this.findAround(e,r,!1)}i&&this.sync(o)&&this.open--}addAll(e,t,n,r){let i=n||0;for(let a=n?e.childNodes[n]:e.firstChild,o=null==r?null:e.childNodes[r];a!=o;a=a.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(a,t);this.findAtPoint(e,i)}findPlace(e,t){let n,r;for(let t=this.open;t>=0;t--){let i=this.nodes[t],a=i.findWrapping(e);if(a&&(!n||n.length>a.length)&&(n=a,r=i,!a.length)||i.solid)break}if(!n)return null;this.sync(r);for(let e=0;e<n.length;e++)t=this.enterInner(n[e],null,t,!1);return t}insertNode(e,t){if(e.isInline&&this.needsBlock&&!this.top.type){let e=this.textblockFromContext();e&&(t=this.enterInner(e,null,t))}let n=this.findPlace(e,t);if(n){this.closeExtra();let t=this.top;t.match&&(t.match=t.match.matchType(e.type));let r=v.none;for(let i of n.concat(e.marks))(t.type?t.type.allowsMarkType(i.type):eN(i.type,e.type))&&(r=i.addToSet(r));return t.content.push(e.mark(r)),!0}return!1}enter(e,t,n,r){let i=this.findPlace(e.create(t),n);return i&&(i=this.enterInner(e,t,n,!0,r)),i}enterInner(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4?arguments[4]:void 0;this.closeExtra();let a=this.top;a.match=a.match&&a.match.matchType(e);let o=eb(e,i,a.options);a.options&ey&&0==a.content.length&&(o|=ey);let s=v.none;return n=n.filter(t=>(a.type?!a.type.allowsMarkType(t.type):!eN(t.type,e))||(s=t.addToSet(s),!1)),this.nodes.push(new ew(e,t,s,r,null,o)),this.open++,n}closeExtra(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;else this.localPreserveWS&&(this.nodes[t].options|=ev);return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let n=this.nodes[t].content;for(let t=n.length-1;t>=0;t--)e+=n[t].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,n){if(e!=t&&this.find)for(let r=0;r<this.find.length;r++)null==this.find[r].pos&&1==e.nodeType&&e.contains(this.find[r].node)&&t.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),n=this.options.context,r=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),i=-(n?n.depth+1:0)+ +!r,a=(e,o)=>{for(;e>=0;e--){let s=t[e];if(""==s){if(e==t.length-1||0==e)continue;for(;o>=i;o--)if(a(e-1,o))return!0;return!1}{let e=o>0||0==o&&r?this.nodes[o].type:n&&o>=i?n.node(o-i).type:null;if(!e||e.name!=s&&!e.isInGroup(s))return!1;o--}}return!0};return a(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let e in this.parser.schema.nodes){let t=this.parser.schema.nodes[e];if(t.isTextblock&&t.defaultAttrs)return t}}constructor(e,t,n){this.parser=e,this.options=t,this.isOpen=n,this.open=0,this.localPreserveWS=!1;let r=t.topNode,i,a=eb(null,t.preserveWhitespace,0)|(n?ey:0);i=r?new ew(r.type,r.attrs,v.none,!0,t.topMatch||r.type.contentMatch,a):n?new ew(null,null,v.none,!0,null,a):new ew(e.schema.topNodeType,null,v.none,!0,null,a),this.nodes=[i],this.find=t.findPositions,this.needsBlock=!1}}function eC(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let e=1==t.nodeType?t.nodeName.toLowerCase():null;e&&eg.hasOwnProperty(e)&&n?(n.appendChild(t),t=n):"li"==e?n=t:e&&(n=null)}}function ek(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function eS(e){let t={};for(let n in e)t[n]=e[n];return t}function eN(e,t){let n=t.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(e))continue;let a=[],o=e=>{a.push(e);for(let n=0;n<e.edgeCount;n++){let{type:r,next:i}=e.edge(n);if(r==t||0>a.indexOf(i)&&o(i))return!0}};if(o(i.contentMatch))return!0}}class eE{serializeFragment(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;n||(n=eI(t).createDocumentFragment());let r=n,i=[];return e.forEach(e=>{if(i.length||e.marks.length){let n=0,a=0;for(;n<i.length&&a<e.marks.length;){let t=e.marks[a];if(!this.marks[t.type.name]){a++;continue}if(!t.eq(i[n][0])||!1===t.type.spec.spanning)break;n++,a++}for(;n<i.length;)r=i.pop()[1];for(;a<e.marks.length;){let n=e.marks[a++],o=this.serializeMark(n,e.isInline,t);o&&(i.push([n,r]),r.appendChild(o.dom),r=o.contentDOM||o.dom)}}r.appendChild(this.serializeNodeInner(e,t))}),n}serializeNodeInner(e,t){let{dom:n,contentDOM:r}=eL(eI(t),this.nodes[e.type.name](e),null,e.attrs);if(r){if(e.isLeaf)throw RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,r)}return n}serializeNode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.serializeNodeInner(e,t);for(let r=e.marks.length-1;r>=0;r--){let i=this.serializeMark(e.marks[r],e.isInline,t);i&&((i.contentDOM||i.dom).appendChild(n),n=i.dom)}return n}serializeMark(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.marks[e.type.name];return r&&eL(eI(n),r(e,t),null,e.attrs)}static renderSpec(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return eL(e,t,n,r)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new eE(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=eM(e.nodes);return t.text||(t.text=e=>e.text),t}static marksFromSchema(e){return eM(e.marks)}constructor(e,t){this.nodes=e,this.marks=t}}function eM(e){let t={};for(let n in e){let r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function eI(e){return e.document||window.document}let eD=new WeakMap;function eT(e){let t=eD.get(e);return void 0===t&&eD.set(e,t=eA(e)),t}function eA(e){let t=null;function n(e){if(e&&"object"==typeof e)if(Array.isArray(e))if("string"==typeof e[0])t||(t=[]),t.push(e);else for(let t=0;t<e.length;t++)n(e[t]);else for(let t in e)n(e[t])}return n(e),t}function eL(e,t,n,r){let i;if("string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};if(t.dom&&null!=t.dom.nodeType)return t;let a=t[0],o;if("string"!=typeof a)throw RangeError("Invalid array passed to renderSpec");if(r&&(o=eT(r))&&o.indexOf(t)>-1)throw RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s=a.indexOf(" ");s>0&&(n=a.slice(0,s),a=a.slice(s+1));let l=n?e.createElementNS(n,a):e.createElement(a),c=t[1],u=1;if(c&&"object"==typeof c&&null==c.nodeType&&!Array.isArray(c)){for(let e in u=2,c)if(null!=c[e]){let t=e.indexOf(" ");t>0?l.setAttributeNS(e.slice(0,t),e.slice(t+1),c[e]):l.setAttribute(e,c[e])}}for(let a=u;a<t.length;a++){let o=t[a];if(0===o){if(a<t.length-1||a>u)throw RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}{let{dom:t,contentDOM:a}=eL(e,o,n,r);if(l.appendChild(t),a){if(i)throw RangeError("Multiple content holes");i=a}}}return{dom:l,contentDOM:i}}e.s(["DOMParser",()=>eh,"DOMSerializer",()=>eE,"Fragment",()=>h,"Mark",()=>v,"MarkType",()=>el,"Node",()=>F,"NodeRange",()=>_,"ReplaceError",()=>x,"Schema",()=>ec,"Slice",()=>y],695608);let eP=65535,eR=65536;function e_(e,t){return e+t*eR}function eO(e){return e&eP}function eF(e){return(e-(e&eP))/eR}let eV=1,eB=2,ez=4,eH=8;class eU{get deleted(){return(this.delInfo&eH)>0}get deletedBefore(){return(this.delInfo&(eV|ez))>0}get deletedAfter(){return(this.delInfo&(eB|ez))>0}get deletedAcross(){return(this.delInfo&ez)>0}constructor(e,t,n){this.pos=e,this.delInfo=t,this.recover=n}}class eq{recover(e){let t=0,n=eO(e);if(!this.inverted)for(let e=0;e<n;e++)t+=this.ranges[3*e+2]-this.ranges[3*e+1];return this.ranges[3*n]+t+eF(e)}mapResult(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(e,t,!1)}map(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(e,t,!0)}_map(e,t,n){let r=0,i=this.inverted?2:1,a=this.inverted?1:2;for(let o=0;o<this.ranges.length;o+=3){let s=this.ranges[o]-(this.inverted?r:0);if(s>e)break;let l=this.ranges[o+i],c=this.ranges[o+a],u=s+l;if(e<=u){let i=l?e==s?-1:e==u?1:t:t,a=s+r+(i<0?0:c);if(n)return a;let d=e==(t<0?s:u)?null:e_(o/3,e-s),p=e==s?eB:e==u?eV:ez;return(t<0?e!=s:e!=u)&&(p|=eH),new eU(a,p,d)}r+=c-l}return n?e+r:new eU(e+r,0,null)}touches(e,t){let n=0,r=eO(t),i=this.inverted?2:1,a=this.inverted?1:2;for(let t=0;t<this.ranges.length;t+=3){let o=this.ranges[t]-(this.inverted?n:0);if(o>e)break;let s=this.ranges[t+i];if(e<=o+s&&t==3*r)return!0;n+=this.ranges[t+a]-s}return!1}forEach(e){let t=this.inverted?2:1,n=this.inverted?1:2;for(let r=0,i=0;r<this.ranges.length;r+=3){let a=this.ranges[r],o=a-(this.inverted?i:0),s=a+(this.inverted?0:i),l=this.ranges[r+t],c=this.ranges[r+n];e(o,o+l,s,s+c),i+=c-l}}invert(){return new eq(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return 0==e?eq.empty:new eq(e<0?[0,-e,0]:[0,0,e])}constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&eq.empty)return eq.empty}}eq.empty=new eq([]);class eW{slice(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.maps.length;return new eW(this.maps,this.mirror,e,t)}copy(){return new eW(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,t){this.to=this.maps.push(e),null!=t&&this.setMirror(this.maps.length-1,t)}appendMapping(e){for(let t=0,n=this.maps.length;t<e.maps.length;t++){let r=e.getMirror(t);this.appendMap(e.maps[t],null!=r&&r<t?n+r:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,n=this.maps.length+e.maps.length;t>=0;t--){let r=e.getMirror(t);this.appendMap(e.maps[t].invert(),null!=r&&r>t?n-r-1:void 0)}}invert(){let e=new eW;return e.appendMappingInverted(this),e}map(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this.mirror)return this._map(e,t,!0);for(let n=this.from;n<this.to;n++)e=this.maps[n].map(e,t);return e}mapResult(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(e,t,!1)}_map(e,t,n){let r=0;for(let n=this.from;n<this.to;n++){let i=this.maps[n].mapResult(e,t);if(null!=i.recover){let t=this.getMirror(n);if(null!=t&&t>n&&t<this.to){n=t,e=this.maps[t].recover(i.recover);continue}}r|=i.delInfo,e=i.pos}return n?e:new eU(e,r,null)}constructor(e=[],t,n=0,r=e.length){this.maps=e,this.mirror=t,this.from=n,this.to=r}}let eZ=Object.create(null);class eG{getMap(){return eq.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw RangeError("Invalid input for Step.fromJSON");let n=eZ[t.stepType];if(!n)throw RangeError("No step type ".concat(t.stepType," defined"));return n.fromJSON(e,t)}static jsonID(e,t){if(e in eZ)throw RangeError("Duplicate use of step JSON ID "+e);return eZ[e]=t,t.prototype.jsonID=e,t}}class eK{static ok(e){return new eK(e,null)}static fail(e){return new eK(null,e)}static fromReplace(e,t,n,r){try{return eK.ok(e.replace(t,n,r))}catch(e){if(e instanceof x)return eK.fail(e.message);throw e}}constructor(e,t){this.doc=e,this.failed=t}}function eX(e,t,n){let r=[];for(let i=0;i<e.childCount;i++){let a=e.child(i);a.content.size&&(a=a.copy(eX(a.content,t,a))),a.isInline&&(a=t(a,n,i)),r.push(a)}return h.fromArray(r)}class e$ extends eG{apply(e){let t=e.slice(this.from,this.to),n=e.resolve(this.from),r=n.node(n.sharedDepth(this.to)),i=new y(eX(t.content,(e,t)=>e.isAtom&&t.type.allowsMarkType(this.mark.type)?e.mark(this.mark.addToSet(e.marks)):e,r),t.openStart,t.openEnd);return eK.fromReplace(e,this.from,this.to,i)}invert(){return new eY(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new e$(t.pos,n.pos,this.mark)}merge(e){return e instanceof e$&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new e$(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw RangeError("Invalid input for AddMarkStep.fromJSON");return new e$(t.from,t.to,e.markFromJSON(t.mark))}constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}}eG.jsonID("addMark",e$);class eY extends eG{apply(e){let t=e.slice(this.from,this.to),n=new y(eX(t.content,e=>e.mark(this.mark.removeFromSet(e.marks)),e),t.openStart,t.openEnd);return eK.fromReplace(e,this.from,this.to,n)}invert(){return new e$(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new eY(t.pos,n.pos,this.mark)}merge(e){return e instanceof eY&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new eY(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw RangeError("Invalid input for RemoveMarkStep.fromJSON");return new eY(t.from,t.to,e.markFromJSON(t.mark))}constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}}eG.jsonID("removeMark",eY);class eJ extends eG{apply(e){let t=e.nodeAt(this.pos);if(!t)return eK.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return eK.fromReplace(e,this.pos,this.pos+1,new y(h.from(n),0,+!t.isLeaf))}invert(e){let t=e.nodeAt(this.pos);if(t){let e=this.mark.addToSet(t.marks);if(e.length==t.marks.length){for(let n=0;n<t.marks.length;n++)if(!t.marks[n].isInSet(e))return new eJ(this.pos,t.marks[n]);return new eJ(this.pos,this.mark)}}return new eQ(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new eJ(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new eJ(t.pos,e.markFromJSON(t.mark))}constructor(e,t){super(),this.pos=e,this.mark=t}}eG.jsonID("addNodeMark",eJ);class eQ extends eG{apply(e){let t=e.nodeAt(this.pos);if(!t)return eK.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return eK.fromReplace(e,this.pos,this.pos+1,new y(h.from(n),0,+!t.isLeaf))}invert(e){let t=e.nodeAt(this.pos);return t&&this.mark.isInSet(t.marks)?new eJ(this.pos,this.mark):this}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new eQ(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new eQ(t.pos,e.markFromJSON(t.mark))}constructor(e,t){super(),this.pos=e,this.mark=t}}eG.jsonID("removeNodeMark",eQ);class e0 extends eG{apply(e){return this.structure&&e2(e,this.from,this.to)?eK.fail("Structure replace would overwrite content"):eK.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new eq([this.from,this.to-this.from,this.slice.size])}invert(e){return new e0(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deletedAcross&&n.deletedAcross?null:new e0(t.pos,Math.max(t.pos,n.pos),this.slice)}merge(e){if(!(e instanceof e0)||e.structure||this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart)if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;else{let t=this.slice.size+e.slice.size==0?y.empty:new y(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new e0(e.from,this.to,t,this.structure)}{let t=this.slice.size+e.slice.size==0?y.empty:new y(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new e0(this.from,this.to+(e.to-e.from),t,this.structure)}}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw RangeError("Invalid input for ReplaceStep.fromJSON");return new e0(t.from,t.to,y.fromJSON(e,t.slice),!!t.structure)}constructor(e,t,n,r=!1){super(),this.from=e,this.to=t,this.slice=n,this.structure=r}}eG.jsonID("replace",e0);class e1 extends eG{apply(e){if(this.structure&&(e2(e,this.from,this.gapFrom)||e2(e,this.gapTo,this.to)))return eK.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return eK.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,t.content);return n?eK.fromReplace(e,this.from,this.to,n):eK.fail("Content does not fit in gap")}getMap(){return new eq([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new e1(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),r=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),i=this.to==this.gapTo?n.pos:e.map(this.gapTo,1);return t.deletedAcross&&n.deletedAcross||r<t.pos||i>n.pos?null:new e1(t.pos,n.pos,r,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to||"number"!=typeof t.gapFrom||"number"!=typeof t.gapTo||"number"!=typeof t.insert)throw RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new e1(t.from,t.to,t.gapFrom,t.gapTo,y.fromJSON(e,t.slice),t.insert,!!t.structure)}constructor(e,t,n,r,i,a,o=!1){super(),this.from=e,this.to=t,this.gapFrom=n,this.gapTo=r,this.slice=i,this.insert=a,this.structure=o}}function e2(e,t,n){let r=e.resolve(t),i=n-t,a=r.depth;for(;i>0&&a>0&&r.indexAfter(a)==r.node(a).childCount;)a--,i--;if(i>0){let e=r.node(a).maybeChild(r.indexAfter(a));for(;i>0;){if(!e||e.isLeaf)return!0;e=e.firstChild,i--}}return!1}function e5(e,t,n,r){let i,a,o=[],s=[];e.doc.nodesBetween(t,n,(e,l,c)=>{if(!e.isInline)return;let u=e.marks;if(!r.isInSet(u)&&c.type.allowsMarkType(r.type)){let c=Math.max(l,t),d=Math.min(l+e.nodeSize,n),p=r.addToSet(u);for(let e=0;e<u.length;e++)u[e].isInSet(p)||(i&&i.to==c&&i.mark.eq(u[e])?i.to=d:o.push(i=new eY(c,d,u[e])));a&&a.to==c?a.to=d:s.push(a=new e$(c,d,r))}}),o.forEach(t=>e.step(t)),s.forEach(t=>e.step(t))}function e4(e,t,n,r){let i=[],a=0;e.doc.nodesBetween(t,n,(e,o)=>{if(!e.isInline)return;a++;let s=null;if(r instanceof el){let t=e.marks,n;for(;n=r.isInSet(t);)(s||(s=[])).push(n),t=n.removeFromSet(t)}else r?r.isInSet(e.marks)&&(s=[r]):s=e.marks;if(s&&s.length){let r=Math.min(o+e.nodeSize,n);for(let e=0;e<s.length;e++){let n=s[e],l;for(let e=0;e<i.length;e++){let t=i[e];t.step==a-1&&n.eq(i[e].style)&&(l=t)}l?(l.to=r,l.step=a):i.push({style:n,from:Math.max(o,t),to:r,step:a})}}}),i.forEach(t=>e.step(new eY(t.from,t.to,t.style)))}function e3(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.contentMatch,i=!(arguments.length>4)||void 0===arguments[4]||arguments[4],a=e.doc.nodeAt(t),o=[],s=t+1;for(let t=0;t<a.childCount;t++){let l=a.child(t),c=s+l.nodeSize,u=r.matchType(l.type);if(u){r=u;for(let t=0;t<l.marks.length;t++)n.allowsMarkType(l.marks[t].type)||e.step(new eY(s,c,l.marks[t]));if(i&&l.isText&&"pre"!=n.whitespace){let e,t=/\r?\n|\r/g,r;for(;e=t.exec(l.text);)r||(r=new y(h.from(n.schema.text(" ",n.allowedMarks(l.marks))),0,0)),o.push(new e0(s+e.index,s+e.index+e[0].length,r))}}else o.push(new e0(s,c,y.empty));s=c}if(!r.validEnd){let t=r.fillBefore(h.empty,!0);e.replace(s,s,new y(t,0,0))}for(let t=o.length-1;t>=0;t--)e.step(o[t])}function e7(e,t,n){return(0==t||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function e9(e){let t=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let n=e.depth;;--n){let r=e.$from.node(n),i=e.$from.index(n),a=e.$to.indexAfter(n);if(n<e.depth&&r.canReplace(i,a,t))return n;if(0==n||r.type.spec.isolating||!e7(r,i,a))break}return null}function e6(e,t,n){let{$from:r,$to:i,depth:a}=t,o=r.before(a+1),s=i.after(a+1),l=o,c=s,u=h.empty,d=0;for(let e=a,t=!1;e>n;e--)t||r.index(e)>0?(t=!0,u=h.from(r.node(e).copy(u)),d++):l--;let p=h.empty,f=0;for(let e=a,t=!1;e>n;e--)t||i.after(e+1)<i.end(e)?(t=!0,p=h.from(i.node(e).copy(p)),f++):c++;e.step(new e1(l,c,o,s,new y(u.append(p),d,f),u.size-d,!0))}function e8(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e,i=tt(e,t),a=i&&tn(r,t);return a?i.map(te).concat({type:t,attrs:n}).concat(a.map(te)):null}function te(e){return{type:e,attrs:null}}function tt(e,t){let{parent:n,startIndex:r,endIndex:i}=e,a=n.contentMatchAt(r).findWrapping(t);if(!a)return null;let o=a.length?a[0]:t;return n.canReplaceWith(r,i,o)?a:null}function tn(e,t){let{parent:n,startIndex:r,endIndex:i}=e,a=n.child(r),o=t.contentMatch.findWrapping(a.type);if(!o)return null;let s=(o.length?o[o.length-1]:t).contentMatch;for(let e=r;s&&e<i;e++)s=s.matchType(n.child(e).type);return s&&s.validEnd?o:null}function tr(e,t,n){let r=h.empty;for(let e=n.length-1;e>=0;e--){if(r.size){let t=n[e].type.contentMatch.matchFragment(r);if(!t||!t.validEnd)throw RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=h.from(n[e].type.create(n[e].attrs,r))}let i=t.start,a=t.end;e.step(new e1(i,a,i,a,new y(r,0,0),n.length,!0))}function ti(e,t,n,r,i){if(!r.isTextblock)throw RangeError("Type given to setBlockType should be a textblock");let a=e.steps.length;e.doc.nodesBetween(t,n,(t,n)=>{let o="function"==typeof i?i(t):i;if(t.isTextblock&&!t.hasMarkup(r,o)&&ts(e.doc,e.mapping.slice(a).map(n),r)){let i=null;if(r.schema.linebreakReplacement){let e="pre"==r.whitespace,t=!!r.contentMatch.matchType(r.schema.linebreakReplacement);e&&!t?i=!1:!e&&t&&(i=!0)}!1===i&&to(e,t,n,a),e3(e,e.mapping.slice(a).map(n,1),r,void 0,null===i);let s=e.mapping.slice(a),l=s.map(n,1),c=s.map(n+t.nodeSize,1);return e.step(new e1(l,c,l+1,c-1,new y(h.from(r.create(o,null,t.marks)),0,0),1,!0)),!0===i&&ta(e,t,n,a),!1}})}function ta(e,t,n,r){t.forEach((i,a)=>{if(i.isText){let o,s=/\r?\n|\r/g;for(;o=s.exec(i.text);){let i=e.mapping.slice(r).map(n+1+a+o.index);e.replaceWith(i,i+1,t.type.schema.linebreakReplacement.create())}}})}function to(e,t,n,r){t.forEach((i,a)=>{if(i.type==i.type.schema.linebreakReplacement){let i=e.mapping.slice(r).map(n+1+a);e.replaceWith(i,i+1,t.type.schema.text("\n"))}})}function ts(e,t,n){let r=e.resolve(t),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function tl(e,t,n,r,i){let a=e.doc.nodeAt(t);if(!a)throw RangeError("No node at given position");n||(n=a.type);let o=n.create(r,null,i||a.marks);if(a.isLeaf)return e.replaceWith(t,t+a.nodeSize,o);if(!n.validContent(a.content))throw RangeError("Invalid content for node type "+n.name);e.step(new e1(t,t+a.nodeSize,t+1,t+a.nodeSize-1,new y(h.from(o),0,0),1,!0))}function tc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,i=e.resolve(t),a=i.depth-n,o=r&&r[r.length-1]||i.parent;if(a<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let e=i.depth-1,t=n-2;e>a;e--,t--){let n=i.node(e),a=i.index(e);if(n.type.spec.isolating)return!1;let o=n.content.cutByIndex(a,n.childCount),s=r&&r[t+1];s&&(o=o.replaceChild(0,s.type.create(s.attrs)));let l=r&&r[t]||n;if(!n.canReplace(a+1,n.childCount)||!l.type.validContent(o))return!1}let s=i.indexAfter(a),l=r&&r[0];return i.node(a).canReplaceWith(s,s,l?l.type:i.node(a+1).type)}function tu(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,i=e.doc.resolve(t),a=h.empty,o=h.empty;for(let e=i.depth,t=i.depth-n,s=n-1;e>t;e--,s--){a=h.from(i.node(e).copy(a));let t=r&&r[s];o=h.from(t?t.type.create(t.attrs,o):i.node(e).copy(o))}e.step(new e0(t,t,new y(a.append(o),n,n),!0))}function td(e,t){let n=e.resolve(t),r=n.index();return th(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function tp(e,t){t.content.size||e.type.compatibleContent(t.type);let n=e.contentMatchAt(e.childCount),{linebreakReplacement:r}=e.type.schema;for(let i=0;i<t.childCount;i++){let a=t.child(i),o=a.type==r?e.type.schema.nodes.text:a.type;if(!(n=n.matchType(o))||!e.type.allowsMarks(a.marks))return!1}return n.validEnd}function th(e,t){return!!(e&&t&&!e.isLeaf&&tp(e,t))}function tf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=e.resolve(t);for(let e=r.depth;;e--){let i,a,o=r.index(e);if(e==r.depth?(i=r.nodeBefore,a=r.nodeAfter):n>0?(i=r.node(e+1),o++,a=r.node(e).maybeChild(o)):(i=r.node(e).maybeChild(o-1),a=r.node(e+1)),i&&!i.isTextblock&&th(i,a)&&r.node(e).canReplace(o,o+1))return t;if(0==e)break;t=n<0?r.before(e):r.after(e)}}function tm(e,t,n){let r=null,{linebreakReplacement:i}=e.doc.type.schema,a=e.doc.resolve(t-n),o=a.node().type;if(i&&o.inlineContent){let e="pre"==o.whitespace,t=!!o.contentMatch.matchType(i);e&&!t?r=!1:!e&&t&&(r=!0)}let s=e.steps.length;if(!1===r){let r=e.doc.resolve(t+n);to(e,r.node(),r.before(),s)}o.inlineContent&&e3(e,t+n-1,o,a.node().contentMatchAt(a.index()),null==r);let l=e.mapping.slice(s),c=l.map(t-n);if(e.step(new e0(c,l.map(t+n,-1),y.empty,!0)),!0===r){let t=e.doc.resolve(c);ta(e,t.node(),t.before(),e.steps.length)}return e}function tg(e,t,n){let r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(0==r.parentOffset)for(let e=r.depth-1;e>=0;e--){let t=r.index(e);if(r.node(e).canReplaceWith(t,t,n))return r.before(e+1);if(t>0)return null}if(r.parentOffset==r.parent.content.size)for(let e=r.depth-1;e>=0;e--){let t=r.indexAfter(e);if(r.node(e).canReplaceWith(t,t,n))return r.after(e+1);if(t<r.node(e).childCount)break}return null}function tv(e,t,n){let r=e.resolve(t);if(!n.content.size)return t;let i=n.content;for(let e=0;e<n.openStart;e++)i=i.firstChild.content;for(let e=1;e<=(0==n.openStart&&n.size?2:1);e++)for(let t=r.depth;t>=0;t--){let n=t==r.depth?0:r.pos<=(r.start(t+1)+r.end(t+1))/2?-1:1,a=r.index(t)+ +(n>0),o=r.node(t),s=!1;if(1==e)s=o.canReplace(a,a,i);else{let e=o.contentMatchAt(a).findWrapping(i.firstChild.type);s=e&&o.canReplaceWith(a,a,e[0])}if(s)return 0==n?r.pos:n<0?r.before(t+1):r.after(t+1)}return null}function tx(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:y.empty;if(t==n&&!r.size)return null;let i=e.resolve(t),a=e.resolve(n);return ty(i,a,r)?new e0(t,n,r):new tb(i,a,r).fit()}function ty(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}eG.jsonID("replaceAround",e1);class tb{get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,n=this.$from,r=this.close(e<0?this.$to:n.doc.resolve(e));if(!r)return null;let i=this.placed,a=n.depth,o=r.depth;for(;a&&o&&1==i.childCount;)i=i.firstChild.content,a--,o--;let s=new y(i,a,o);return e>-1?new e1(n.pos,e,this.$to.pos,this.$to.end(),s,t):s.size||n.pos!=this.$to.pos?new e0(n.pos,r.pos,s):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,n=0,r=this.unplaced.openEnd;n<e;n++){let i=t.firstChild;if(t.childCount>1&&(r=0),i.type.spec.isolating&&r<=n){e=n;break}t=i.content}for(let t=1;t<=2;t++)for(let n=1==t?e:this.unplaced.openStart;n>=0;n--){let e,r=null,i=(e=n?(r=tC(this.unplaced.content,n-1).firstChild).content:this.unplaced.content).firstChild;for(let e=this.depth;e>=0;e--){let{type:a,match:o}=this.frontier[e],s,l=null;if(1==t&&(i?o.matchType(i.type)||(l=o.fillBefore(h.from(i),!1)):r&&a.compatibleContent(r.type)))return{sliceDepth:n,frontierDepth:e,parent:r,inject:l};if(2==t&&i&&(s=o.findWrapping(i.type)))return{sliceDepth:n,frontierDepth:e,parent:r,wrap:s};if(r&&o.matchType(r.type))break}}}openMore(){let{content:e,openStart:t,openEnd:n}=this.unplaced,r=tC(e,t);return!!r.childCount&&!r.firstChild.isLeaf&&(this.unplaced=new y(e,t+1,Math.max(n,r.size+t>=e.size-n?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:n}=this.unplaced,r=tC(e,t);if(r.childCount<=1&&t>0){let i=e.size-t<=t+r.size;this.unplaced=new y(tw(e,t-1,1),t-1,i?t-1:n)}else this.unplaced=new y(tw(e,t,1),t,n)}placeNodes(e){let{sliceDepth:t,frontierDepth:n,parent:r,inject:i,wrap:a}=e;for(;this.depth>n;)this.closeFrontierNode();if(a)for(let e=0;e<a.length;e++)this.openFrontierNode(a[e]);let o=this.unplaced,s=r?r.content:o.content,l=o.openStart-t,c=0,u=[],{match:d,type:p}=this.frontier[n];if(i){for(let e=0;e<i.childCount;e++)u.push(i.child(e));d=d.matchFragment(i)}let f=s.size+t-(o.content.size-o.openEnd);for(;c<s.childCount;){let e=s.child(c),t=d.matchType(e.type);if(!t)break;(++c>1||0==l||e.content.size)&&(d=t,u.push(tk(e.mark(p.allowedMarks(e.marks)),1==c?l:0,c==s.childCount?f:-1)))}let m=c==s.childCount;m||(f=-1),this.placed=tj(this.placed,n,h.from(u)),this.frontier[n].match=d,m&&f<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let e=0,t=s;e<f;e++){let e=t.lastChild;this.frontier.push({type:e.type,match:e.contentMatchAt(e.childCount)}),t=e.content}this.unplaced=m?0==t?y.empty:new y(tw(o.content,t-1,1),t-1,f<0?o.openEnd:t-1):new y(tw(o.content,t,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return -1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!tS(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return -1;let{depth:n}=this.$to,r=this.$to.after(n);for(;n>1&&r==this.$to.end(--n);)++r;return r}findCloseLevel(e){t:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:n,type:r}=this.frontier[t],i=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),a=tS(e,t,r,n,i);if(a){for(let n=t-1;n>=0;n--){let{match:t,type:r}=this.frontier[n],i=tS(e,n,r,t,!0);if(!i||i.childCount)continue t}return{depth:t,fit:a,move:i?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=tj(this.placed,t.depth,t.fit)),e=t.move;for(let n=t.depth+1;n<=e.depth;n++){let t=e.node(n),r=t.type.contentMatch.fillBefore(t.content,!0,e.index(n));this.openFrontierNode(t.type,t.attrs,r)}return e}openFrontierNode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,r=this.frontier[this.depth];r.match=r.match.matchType(e),this.placed=tj(this.placed,this.depth,h.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(h.empty,!0);e.childCount&&(this.placed=tj(this.placed,this.frontier.length,e))}constructor(e,t,n){this.$from=e,this.$to=t,this.unplaced=n,this.frontier=[],this.placed=h.empty;for(let t=0;t<=e.depth;t++){let n=e.node(t);this.frontier.push({type:n.type,match:n.contentMatchAt(e.indexAfter(t))})}for(let t=e.depth;t>0;t--)this.placed=h.from(e.node(t).copy(this.placed))}}function tw(e,t,n){return 0==t?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(tw(e.firstChild.content,t-1,n)))}function tj(e,t,n){return 0==t?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(tj(e.lastChild.content,t-1,n)))}function tC(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function tk(e,t,n){if(t<=0)return e;let r=e.content;return t>1&&(r=r.replaceChild(0,tk(r.firstChild,t-1,1==r.childCount?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(h.empty,!0)))),e.copy(r)}function tS(e,t,n,r,i){let a=e.node(t),o=i?e.indexAfter(t):e.index(t);if(o==a.childCount&&!n.compatibleContent(a.type))return null;let s=r.fillBefore(a.content,!0,o);return s&&!tN(n,a.content,o)?s:null}function tN(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}function tE(e){return e.spec.defining||e.spec.definingForContent}function tM(e,t,n,r){if(!r.size)return e.deleteRange(t,n);let i=e.doc.resolve(t),a=e.doc.resolve(n);if(ty(i,a,r))return e.step(new e0(t,n,r));let o=tA(i,e.doc.resolve(n));0==o[o.length-1]&&o.pop();let s=-(i.depth+1);o.unshift(s);for(let e=i.depth,t=i.pos-1;e>0;e--,t--){let n=i.node(e).type.spec;if(n.defining||n.definingAsContext||n.isolating)break;o.indexOf(e)>-1?s=e:i.before(e)==t&&o.splice(1,0,-e)}let l=o.indexOf(s),c=[],u=r.openStart;for(let e=r.content,t=0;;t++){let n=e.firstChild;if(c.push(n),t==r.openStart)break;e=n.content}for(let e=u-1;e>=0;e--){let t=c[e],n=tE(t.type);if(n&&!t.sameMarkup(i.node(Math.abs(s)-1)))u=e;else if(n||!t.type.isTextblock)break}for(let t=r.openStart;t>=0;t--){let s=(t+u+1)%(r.openStart+1),d=c[s];if(d)for(let t=0;t<o.length;t++){let c=o[(t+l)%o.length],u=!0;c<0&&(u=!1,c=-c);let p=i.node(c-1),h=i.index(c-1);if(p.canReplaceWith(h,h,d.type,d.marks))return e.replace(i.before(c),u?a.after(c):n,new y(tI(r.content,0,r.openStart,s),s,r.openEnd))}}let d=e.steps.length;for(let s=o.length-1;s>=0&&(e.replace(t,n,r),!(e.steps.length>d));s--){let e=o[s];e<0||(t=i.before(e),n=a.after(e))}}function tI(e,t,n,r,i){if(t<n){let i=e.firstChild;e=e.replaceChild(0,i.copy(tI(i.content,t+1,n,r,i)))}if(t>r){let t=i.contentMatchAt(0),n=t.fillBefore(e).append(e);e=n.append(t.matchFragment(n).fillBefore(h.empty,!0))}return e}function tD(e,t,n,r){if(!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let i=tg(e.doc,t,r.type);null!=i&&(t=n=i)}e.replaceRange(t,n,new y(h.from(r),0,0))}function tT(e,t,n){let r=e.doc.resolve(t),i=e.doc.resolve(n),a=tA(r,i);for(let t=0;t<a.length;t++){let n=a[t],o=t==a.length-1;if(o&&0==n||r.node(n).type.contentMatch.validEnd)return e.delete(r.start(n),i.end(n));if(n>0&&(o||r.node(n-1).canReplace(r.index(n-1),i.indexAfter(n-1))))return e.delete(r.before(n),i.after(n))}for(let a=1;a<=r.depth&&a<=i.depth;a++)if(t-r.start(a)==r.depth-a&&n>r.end(a)&&i.end(a)-n!=i.depth-a&&r.start(a-1)==i.start(a-1)&&r.node(a-1).canReplace(r.index(a-1),i.index(a-1)))return e.delete(r.before(a),n);e.delete(t,n)}function tA(e,t){let n=[],r=Math.min(e.depth,t.depth);for(let i=r;i>=0;i--){let r=e.start(i);if(r<e.pos-(e.depth-i)||t.end(i)>t.pos+(t.depth-i)||e.node(i).type.spec.isolating||t.node(i).type.spec.isolating)break;(r==t.start(i)||i==e.depth&&i==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&i&&t.start(i-1)==r-1)&&n.push(i)}return n}class tL extends eG{apply(e){let t=e.nodeAt(this.pos);if(!t)return eK.fail("No node at attribute step's position");let n=Object.create(null);for(let e in t.attrs)n[e]=t.attrs[e];n[this.attr]=this.value;let r=t.type.create(n,null,t.marks);return eK.fromReplace(e,this.pos,this.pos+1,new y(h.from(r),0,+!t.isLeaf))}getMap(){return eq.empty}invert(e){return new tL(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new tL(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if("number"!=typeof t.pos||"string"!=typeof t.attr)throw RangeError("Invalid input for AttrStep.fromJSON");return new tL(t.pos,t.attr,t.value)}constructor(e,t,n){super(),this.pos=e,this.attr=t,this.value=n}}eG.jsonID("attr",tL);class tP extends eG{apply(e){let t=Object.create(null);for(let n in e.attrs)t[n]=e.attrs[n];t[this.attr]=this.value;let n=e.type.create(t,e.content,e.marks);return eK.ok(n)}getMap(){return eq.empty}invert(e){return new tP(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if("string"!=typeof t.attr)throw RangeError("Invalid input for DocAttrStep.fromJSON");return new tP(t.attr,t.value)}constructor(e,t){super(),this.attr=e,this.value=t}}eG.jsonID("docAttr",tP);let tR=class extends Error{};(tR=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n}).prototype=Object.create(Error.prototype),tR.prototype.constructor=tR,tR.prototype.name="TransformError";class t_{get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new tR(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y.empty,r=tx(this.doc,e,t,n);return r&&this.step(r),this}replaceWith(e,t,n){return this.replace(e,t,new y(h.from(n),0,0))}delete(e,t){return this.replace(e,t,y.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,n){return tM(this,e,t,n),this}replaceRangeWith(e,t,n){return tD(this,e,t,n),this}deleteRange(e,t){return tT(this,e,t),this}lift(e,t){return e6(this,e,t),this}join(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return tm(this,e,t),this}wrap(e,t){return tr(this,e,t),this}setBlockType(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return ti(this,e,t,n,r),this}setNodeMarkup(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return tl(this,e,t,n,r),this}setNodeAttribute(e,t,n){return this.step(new tL(e,t,n)),this}setDocAttribute(e,t){return this.step(new tP(e,t)),this}addNodeMark(e,t){return this.step(new eJ(e,t)),this}removeNodeMark(e,t){if(!(t instanceof v)){let n=this.doc.nodeAt(e);if(!n)throw RangeError("No node at position "+e);if(!(t=t.isInSet(n.marks)))return this}return this.step(new eQ(e,t)),this}split(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0;return tu(this,e,t,n),this}addMark(e,t,n){return e5(this,e,t,n),this}removeMark(e,t,n){return e4(this,e,t,n),this}clearIncompatible(e,t,n){return e3(this,e,t,n),this}constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new eW}}e.s(["Mapping",()=>eW,"ReplaceAroundStep",()=>e1,"ReplaceStep",()=>e0,"Transform",()=>t_,"canJoin",()=>td,"canSplit",()=>tc,"dropPoint",()=>tv,"findWrapping",()=>e8,"joinPoint",()=>tf,"liftTarget",()=>e9,"replaceStep",()=>tx],874486);let tO=Object.create(null);class tF{get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y.empty,n=t.content.lastChild,r=null;for(let e=0;e<t.openEnd;e++)r=n,n=n.lastChild;let i=e.steps.length,a=this.ranges;for(let o=0;o<a.length;o++){let{$from:s,$to:l}=a[o],c=e.mapping.slice(i);e.replaceRange(c.map(s.pos),c.map(l.pos),o?y.empty:t),0==o&&tX(e,i,(n?n.isInline:r&&r.isTextblock)?-1:1)}}replaceWith(e,t){let n=e.steps.length,r=this.ranges;for(let i=0;i<r.length;i++){let{$from:a,$to:o}=r[i],s=e.mapping.slice(n),l=s.map(a.pos),c=s.map(o.pos);i?e.deleteRange(l,c):(e.replaceRangeWith(l,c,t),tX(e,n,t.isInline?-1:1))}}static findFrom(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.parent.inlineContent?new tH(e):tK(e.node(0),e.parent,e.pos,e.index(),t,n);if(r)return r;for(let r=e.depth-1;r>=0;r--){let i=t<0?tK(e.node(0),e.node(r),e.before(r+1),e.index(r),t,n):tK(e.node(0),e.node(r),e.after(r+1),e.index(r)+1,t,n);if(i)return i}return null}static near(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.findFrom(e,t)||this.findFrom(e,-t)||new tZ(e.node(0))}static atStart(e){return tK(e,e,0,0,1)||new tZ(e)}static atEnd(e){return tK(e,e,e.content.size,e.childCount,-1)||new tZ(e)}static fromJSON(e,t){if(!t||!t.type)throw RangeError("Invalid input for Selection.fromJSON");let n=tO[t.type];if(!n)throw RangeError("No selection type ".concat(t.type," defined"));return n.fromJSON(e,t)}static jsonID(e,t){if(e in tO)throw RangeError("Duplicate use of selection JSON ID "+e);return tO[e]=t,t.prototype.jsonID=e,t}getBookmark(){return tH.between(this.$anchor,this.$head).getBookmark()}constructor(e,t,n){this.$anchor=e,this.$head=t,this.ranges=n||[new tV(e.min(t),e.max(t))]}}tF.prototype.visible=!0;class tV{constructor(e,t){this.$from=e,this.$to=t}}let tB=!1;function tz(e){tB||e.parent.inlineContent||(tB=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class tH extends tF{get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let n=e.resolve(t.map(this.head));if(!n.parent.inlineContent)return tF.near(n);let r=e.resolve(t.map(this.anchor));return new tH(r.parent.inlineContent?r:n,n)}replace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y.empty;if(super.replace(e,t),t==y.empty){let t=this.$from.marksAcross(this.$to);t&&e.ensureMarks(t)}}eq(e){return e instanceof tH&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new tU(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if("number"!=typeof t.anchor||"number"!=typeof t.head)throw RangeError("Invalid input for TextSelection.fromJSON");return new tH(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=e.resolve(t);return new this(r,n==t?r:e.resolve(n))}static between(e,t,n){let r=e.pos-t.pos;if((!n||r)&&(n=r>=0?1:-1),!t.parent.inlineContent){let e=tF.findFrom(t,n,!0)||tF.findFrom(t,-n,!0);if(!e)return tF.near(t,n);t=e.$head}return e.parent.inlineContent||(0==r?e=t:(e=(tF.findFrom(e,-n,!0)||tF.findFrom(e,n,!0)).$anchor).pos<t.pos!=r<0&&(e=t)),new tH(e,t)}constructor(e,t=e){tz(e),tz(t),super(e,t)}}tF.jsonID("text",tH);class tU{map(e){return new tU(e.map(this.anchor),e.map(this.head))}resolve(e){return tH.between(e.resolve(this.anchor),e.resolve(this.head))}constructor(e,t){this.anchor=e,this.head=t}}class tq extends tF{map(e,t){let{deleted:n,pos:r}=t.mapResult(this.anchor),i=e.resolve(r);return n?tF.near(i):new tq(i)}content(){return new y(h.from(this.node),0,0)}eq(e){return e instanceof tq&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new tW(this.anchor)}static fromJSON(e,t){if("number"!=typeof t.anchor)throw RangeError("Invalid input for NodeSelection.fromJSON");return new tq(e.resolve(t.anchor))}static create(e,t){return new tq(e.resolve(t))}static isSelectable(e){return!e.isText&&!1!==e.type.spec.selectable}constructor(e){let t=e.nodeAfter;super(e,e.node(0).resolve(e.pos+t.nodeSize)),this.node=t}}tq.prototype.visible=!1,tF.jsonID("node",tq);class tW{map(e){let{deleted:t,pos:n}=e.mapResult(this.anchor);return t?new tU(n,n):new tW(n)}resolve(e){let t=e.resolve(this.anchor),n=t.nodeAfter;return n&&tq.isSelectable(n)?new tq(t):tF.near(t)}constructor(e){this.anchor=e}}class tZ extends tF{replace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y.empty;if(t==y.empty){e.delete(0,e.doc.content.size);let t=tF.atStart(e.doc);t.eq(e.selection)||e.setSelection(t)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new tZ(e)}map(e){return new tZ(e)}eq(e){return e instanceof tZ}getBookmark(){return tG}constructor(e){super(e.resolve(0),e.resolve(e.content.size))}}tF.jsonID("all",tZ);let tG={map(){return this},resolve:e=>new tZ(e)};function tK(e,t,n,r,i){let a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(t.inlineContent)return tH.create(e,n);for(let o=r-(i>0?0:1);i>0?o<t.childCount:o>=0;o+=i){let r=t.child(o);if(r.isAtom){if(!a&&tq.isSelectable(r))return tq.create(e,n-(i<0?r.nodeSize:0))}else{let t=tK(e,r,n+i,i<0?r.childCount:0,i,a);if(t)return t}n+=r.nodeSize*i}return null}function tX(e,t,n){let r,i=e.steps.length-1;if(i<t)return;let a=e.steps[i];(a instanceof e0||a instanceof e1)&&(e.mapping.maps[i].forEach((e,t,n,i)=>{null==r&&(r=i)}),e.setSelection(tF.near(e.doc.resolve(r),n)))}let t$=1,tY=2,tJ=4;class tQ extends t_{get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|t$)&~tY,this.storedMarks=null,this}get selectionSet(){return(this.updated&t$)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=tY,this}ensureMarks(e){return v.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&tY)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~tY,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=this.selection;return t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||v.none))),n.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,n){let r=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(r.text(e),!0):this.deleteSelection();{if(null==n&&(n=t),n=null==n?t:n,!e)return this.deleteRange(t,n);let i=this.storedMarks;if(!i){let e=this.doc.resolve(t);i=n==t?e.marks():e.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,r.text(e,i)),this.selection.empty||this.setSelection(tF.near(this.selection.$to)),this}}setMeta(e,t){return this.meta["string"==typeof e?e:e.key]=t,this}getMeta(e){return this.meta["string"==typeof e?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=tJ,this}get scrolledIntoView(){return(this.updated&tJ)>0}constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}}function t0(e,t){return t&&e?e.bind(t):e}class t1{constructor(e,t,n){this.name=e,this.init=t0(t.init,n),this.apply=t0(t.apply,n)}}let t2=[new t1("doc",{init:e=>e.doc||e.schema.topNodeType.createAndFill(),apply:e=>e.doc}),new t1("selection",{init:(e,t)=>e.selection||tF.atStart(t.doc),apply:e=>e.selection}),new t1("storedMarks",{init:e=>e.storedMarks||null,apply:(e,t,n,r)=>r.selection.$cursor?e.storedMarks:null}),new t1("scrollToSelection",{init:()=>0,apply:(e,t)=>e.scrolledIntoView?t+1:t})];class t5{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=t2.slice(),t&&t.forEach(e=>{if(this.pluginsByKey[e.key])throw RangeError("Adding different instances of a keyed plugin ("+e.key+")");this.plugins.push(e),this.pluginsByKey[e.key]=e,e.spec.state&&this.fields.push(new t1(e.key,e.spec.state,e))})}}class t4{get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;for(let n=0;n<this.config.plugins.length;n++)if(n!=t){let t=this.config.plugins[n];if(t.spec.filterTransaction&&!t.spec.filterTransaction.call(t,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],n=this.applyInner(e),r=null;for(;;){let i=!1;for(let a=0;a<this.config.plugins.length;a++){let o=this.config.plugins[a];if(o.spec.appendTransaction){let s=r?r[a].n:0,l=r?r[a].state:this,c=s<t.length&&o.spec.appendTransaction.call(o,s?t.slice(s):t,l,n);if(c&&n.filterTransaction(c,a)){if(c.setMeta("appendedTransaction",e),!r){r=[];for(let e=0;e<this.config.plugins.length;e++)r.push(e<a?{state:n,n:t.length}:{state:this,n:0})}t.push(c),n=n.applyInner(c),i=!0}r&&(r[a]={state:n,n:t.length})}}if(!i)return{state:n,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw RangeError("Applying a mismatched transaction");let t=new t4(this.config),n=this.config.fields;for(let r=0;r<n.length;r++){let i=n[r];t[i.name]=i.apply(e,this[i.name],this,t)}return t}get tr(){return new tQ(this)}static create(e){let t=new t5(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new t4(t);for(let r=0;r<t.fields.length;r++)n[t.fields[r].name]=t.fields[r].init(e,n);return n}reconfigure(e){let t=new t5(this.schema,e.plugins),n=t.fields,r=new t4(t);for(let t=0;t<n.length;t++){let i=n[t].name;r[i]=this.hasOwnProperty(i)?this[i]:n[t].init(e,r)}return r}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(e=>e.toJSON())),e&&"object"==typeof e)for(let n in e){if("doc"==n||"selection"==n)throw RangeError("The JSON fields `doc` and `selection` are reserved");let r=e[n],i=r.spec.state;i&&i.toJSON&&(t[n]=i.toJSON.call(r,this[r.key]))}return t}static fromJSON(e,t,n){if(!t)throw RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw RangeError("Required config field 'schema' missing");let r=new t5(e.schema,e.plugins),i=new t4(r);return r.fields.forEach(r=>{if("doc"==r.name)i.doc=F.fromJSON(e.schema,t.doc);else if("selection"==r.name)i.selection=tF.fromJSON(i.doc,t.selection);else if("storedMarks"==r.name)t.storedMarks&&(i.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(n)for(let a in n){let o=n[a],s=o.spec.state;if(o.key==r.name&&s&&s.fromJSON&&Object.prototype.hasOwnProperty.call(t,a)){i[r.name]=s.fromJSON.call(o,e,t[a],i);return}}i[r.name]=r.init(e,i)}}),i}constructor(e){this.config=e}}function t3(e,t,n){for(let r in e){let i=e[r];i instanceof Function?i=i.bind(t):"handleDOMEvents"==r&&(i=t3(i,t,{})),n[r]=i}return n}class t7{getState(e){return e[this.key]}constructor(e){this.spec=e,this.props={},e.props&&t3(e.props,this,this.props),this.key=e.key?e.key.key:t6("plugin")}}let t9=Object.create(null);function t6(e){return e in t9?e+"$"+ ++t9[e]:(t9[e]=0,e+"$")}class t8{get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}constructor(e="key"){this.key=t6(e)}}e.s(["AllSelection",()=>tZ,"EditorState",()=>t4,"NodeSelection",()=>tq,"Plugin",()=>t7,"PluginKey",()=>t8,"Selection",()=>tF,"SelectionRange",()=>tV,"TextSelection",()=>tH],187195),e.s([],838208);let ne=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},nt=function(e){let t=e.assignedSlot||e.parentNode;return t&&11==t.nodeType?t.host:t},nn=null,nr=function(e,t,n){let r=nn||(nn=document.createRange());return r.setEnd(e,null==n?e.nodeValue.length:n),r.setStart(e,t||0),r},ni=function(){nn=null},na=function(e,t,n,r){return n&&(ns(e,t,n,r,-1)||ns(e,t,n,r,1))},no=/^(img|br|input|textarea|hr)$/i;function ns(e,t,n,r,i){for(;;){if(e==n&&t==r)return!0;if(t==(i<0?0:nl(e))){let n=e.parentNode;if(!n||1!=n.nodeType||np(e)||no.test(e.nodeName)||"false"==e.contentEditable)return!1;t=ne(e)+(i<0?0:1),e=n}else{if(1!=e.nodeType||"false"==(e=e.childNodes[t+(i<0?-1:0)]).contentEditable)return!1;t=i<0?nl(e):0}}}function nl(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function nc(e,t){for(;;){if(3==e.nodeType&&t)return e;if(1==e.nodeType&&t>0){if("false"==e.contentEditable)return null;t=nl(e=e.childNodes[t-1])}else{if(!e.parentNode||np(e))return null;t=ne(e),e=e.parentNode}}}function nu(e,t){for(;;){if(3==e.nodeType&&t<e.nodeValue.length)return e;if(1==e.nodeType&&t<e.childNodes.length){if("false"==e.contentEditable)return null;e=e.childNodes[t],t=0}else{if(!e.parentNode||np(e))return null;t=ne(e)+1,e=e.parentNode}}}function nd(e,t,n){for(let r=0==t,i=t==nl(e);r||i;){if(e==n)return!0;let t=ne(e);if(!(e=e.parentNode))return!1;r=r&&0==t,i=i&&t==nl(e)}}function np(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}let nh=function(e){return e.focusNode&&na(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function nf(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function nm(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function ng(e,t,n){if(e.caretPositionFromPoint)try{let r=e.caretPositionFromPoint(t,n);if(r)return{node:r.offsetNode,offset:Math.min(nl(r.offsetNode),r.offset)}}catch(e){}if(e.caretRangeFromPoint){let r=e.caretRangeFromPoint(t,n);if(r)return{node:r.startContainer,offset:Math.min(nl(r.startContainer),r.startOffset)}}}let nv="undefined"!=typeof navigator?navigator:null,nx="undefined"!=typeof document?document:null,ny=nv&&nv.userAgent||"",nb=/Edge\/(\d+)/.exec(ny),nw=/MSIE \d/.exec(ny),nj=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ny),nC=!!(nw||nj||nb),nk=nw?document.documentMode:nj?+nj[1]:nb?+nb[1]:0,nS=!nC&&/gecko\/(\d+)/i.test(ny);nS&&(/Firefox\/(\d+)/.exec(ny)||[0,0])[1];let nN=!nC&&/Chrome\/(\d+)/.exec(ny),nE=!!nN,nM=nN?+nN[1]:0,nI=!nC&&!!nv&&/Apple Computer/.test(nv.vendor),nD=nI&&(/Mobile\/\w+/.test(ny)||!!nv&&nv.maxTouchPoints>2),nT=nD||!!nv&&/Mac/.test(nv.platform),nA=!!nv&&/Win/.test(nv.platform),nL=/Android \d/.test(ny),nP=!!nx&&"webkitFontSmoothing"in nx.documentElement.style,nR=nP?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function n_(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function nO(e,t){return"number"==typeof e?e:e[t]}function nF(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function nV(e,t,n){let r=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,a=e.dom.ownerDocument;for(let o=n||e.dom;o;o=nt(o)){if(1!=o.nodeType)continue;let e=o,n=e==a.body,s=n?n_(a):nF(e),l=0,c=0;if(t.top<s.top+nO(r,"top")?c=-(s.top-t.top+nO(i,"top")):t.bottom>s.bottom-nO(r,"bottom")&&(c=t.bottom-t.top>s.bottom-s.top?t.top+nO(i,"top")-s.top:t.bottom-s.bottom+nO(i,"bottom")),t.left<s.left+nO(r,"left")?l=-(s.left-t.left+nO(i,"left")):t.right>s.right-nO(r,"right")&&(l=t.right-s.right+nO(i,"right")),l||c)if(n)a.defaultView.scrollBy(l,c);else{let n=e.scrollLeft,r=e.scrollTop;c&&(e.scrollTop+=c),l&&(e.scrollLeft+=l);let i=e.scrollLeft-n,a=e.scrollTop-r;t={left:t.left-i,top:t.top-a,right:t.right-i,bottom:t.bottom-a}}if(n||/^(fixed|sticky)$/.test(getComputedStyle(o).position))break}}function nB(e){let t,n,r=e.dom.getBoundingClientRect(),i=Math.max(0,r.top);for(let a=(r.left+r.right)/2,o=i+1;o<Math.min(innerHeight,r.bottom);o+=5){let r=e.root.elementFromPoint(a,o);if(!r||r==e.dom||!e.dom.contains(r))continue;let s=r.getBoundingClientRect();if(s.top>=i-20){t=r,n=s.top;break}}return{refDOM:t,refTop:n,stack:nz(e.dom)}}function nz(e){let t=[],n=e.ownerDocument;for(let r=e;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e!=n);r=nt(r));return t}function nH(e){let{refDOM:t,refTop:n,stack:r}=e,i=t?t.getBoundingClientRect().top:0;nU(r,0==i?0:i-n)}function nU(e,t){for(let n=0;n<e.length;n++){let{dom:r,top:i,left:a}=e[n];r.scrollTop!=i+t&&(r.scrollTop=i+t),r.scrollLeft!=a&&(r.scrollLeft=a)}}let nq=null;function nW(e){if(e.setActive)return e.setActive();if(nq)return e.focus(nq);let t=nz(e);e.focus(null==nq?{get preventScroll(){return nq={preventScroll:!0},!0}}:void 0),nq||(nq=!1,nU(t,0))}function nZ(e,t){let n,r,i,a=2e8,o,s=0,l=t.top,c=t.top;for(let u=e.firstChild,d=0;u;u=u.nextSibling,d++){let e;if(1==u.nodeType)e=u.getClientRects();else{if(3!=u.nodeType)continue;e=nr(u).getClientRects()}for(let p=0;p<e.length;p++){let h=e[p];if(h.top<=l&&h.bottom>=c){l=Math.max(h.bottom,l),c=Math.min(h.top,c);let e=h.left>t.left?h.left-t.left:h.right<t.left?t.left-h.right:0;if(e<a){i=u,a=e,o=e&&3==i.nodeType?{left:h.right<t.left?h.right:h.left,top:t.top}:t,1==u.nodeType&&e&&(s=d+ +(t.left>=(h.left+h.right)/2));continue}}else h.top>t.top&&!n&&h.left<=t.left&&h.right>=t.left&&(n=u,r={left:Math.max(h.left,Math.min(h.right,t.left)),top:h.top});!i&&(t.left>=h.right&&t.top>=h.top||t.left>=h.left&&t.top>=h.bottom)&&(s=d+1)}}return(!i&&n&&(i=n,o=r,a=0),i&&3==i.nodeType)?nG(i,o):!i||a&&1==i.nodeType?{node:e,offset:s}:nZ(i,o)}function nG(e,t){let n=e.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(e,i+1),r.setStart(e,i);let n=n1(r,1);if(n.top!=n.bottom&&nK(t,n))return{node:e,offset:i+ +(t.left>=(n.left+n.right)/2)}}return{node:e,offset:0}}function nK(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function nX(e,t){let n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}function n$(e,t,n){let{node:r,offset:i}=nZ(t,n),a=-1;if(1==r.nodeType&&!r.firstChild){let e=r.getBoundingClientRect();a=e.left!=e.right&&n.left>(e.left+e.right)/2?1:-1}return e.docView.posFromDOM(r,i,a)}function nY(e,t,n,r){let i=-1;for(let n=t,a=!1;n!=e.dom;){let t=e.docView.nearestDesc(n,!0),o;if(!t)return null;if(1==t.dom.nodeType&&(t.node.isBlock&&t.parent||!t.contentDOM)&&((o=t.dom.getBoundingClientRect()).width||o.height)&&(t.node.isBlock&&t.parent&&(!a&&o.left>r.left||o.top>r.top?i=t.posBefore:(!a&&o.right<r.left||o.bottom<r.top)&&(i=t.posAfter),a=!0),!t.contentDOM&&i<0&&!t.node.isText))return(t.node.isBlock?r.top<(o.top+o.bottom)/2:r.left<(o.left+o.right)/2)?t.posBefore:t.posAfter;n=t.dom.parentNode}return i>-1?i:e.docView.posFromDOM(t,n,-1)}function nJ(e,t,n){let r=e.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),a=i;;){let n=e.childNodes[a];if(1==n.nodeType){let e=n.getClientRects();for(let r=0;r<e.length;r++){let i=e[r];if(nK(t,i))return nJ(n,t,i)}}if((a=(a+1)%r)==i)break}return e}function nQ(e,t){let n,r=e.dom.ownerDocument,i,a=0,o=ng(r,t.left,t.top);o&&({node:i,offset:a}=o);let s=(e.root.elementFromPoint?e.root:r).elementFromPoint(t.left,t.top);if(!s||!e.dom.contains(1!=s.nodeType?s.parentNode:s)){let n=e.dom.getBoundingClientRect();if(!nK(t,n)||!(s=nJ(e.dom,t,n)))return null}if(nI)for(let e=s;i&&e;e=nt(e))e.draggable&&(i=void 0);if(s=nX(s,t),i){let r;if(nS&&1==i.nodeType&&(a=Math.min(a,i.childNodes.length))<i.childNodes.length){let e=i.childNodes[a],n;"IMG"==e.nodeName&&(n=e.getBoundingClientRect()).right<=t.left&&n.bottom>t.top&&a++}nP&&a&&1==i.nodeType&&1==(r=i.childNodes[a-1]).nodeType&&"false"==r.contentEditable&&r.getBoundingClientRect().top>=t.top&&a--,i==e.dom&&a==i.childNodes.length-1&&1==i.lastChild.nodeType&&t.top>i.lastChild.getBoundingClientRect().bottom?n=e.state.doc.content.size:(0==a||1!=i.nodeType||"BR"!=i.childNodes[a-1].nodeName)&&(n=nY(e,i,a,t))}null==n&&(n=n$(e,s,t));let l=e.docView.nearestDesc(s,!0);return{pos:n,inside:l?l.posAtStart-l.border:-1}}function n0(e){return e.top<e.bottom||e.left<e.right}function n1(e,t){let n=e.getClientRects();if(n.length){let e=n[t<0?0:n.length-1];if(n0(e))return e}return Array.prototype.find.call(n,n0)||e.getBoundingClientRect()}let n2=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function n5(e,t,n){let{node:r,offset:i,atom:a}=e.docView.domFromPos(t,n<0?-1:1),o=nP||nS;if(3==r.nodeType)if(o&&(n2.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let e=n1(nr(r,i,i),n);if(nS&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let t=n1(nr(r,i-1,i-1),-1);if(t.top==e.top){let n=n1(nr(r,i,i+1),-1);if(n.top!=e.top)return n4(n,n.left<t.left)}}return e}else{let e=i,t=i,a=n<0?1:-1;return n<0&&!i?(t++,a=-1):n>=0&&i==r.nodeValue.length?(e--,a=1):n<0?e--:t++,n4(n1(nr(r,e,t),a),a<0)}if(!e.state.doc.resolve(t-(a||0)).parent.inlineContent){if(null==a&&i&&(n<0||i==nl(r))){let e=r.childNodes[i-1];if(1==e.nodeType)return n3(e.getBoundingClientRect(),!1)}if(null==a&&i<nl(r)){let e=r.childNodes[i];if(1==e.nodeType)return n3(e.getBoundingClientRect(),!0)}return n3(r.getBoundingClientRect(),n>=0)}if(null==a&&i&&(n<0||i==nl(r))){let e=r.childNodes[i-1],t=3==e.nodeType?nr(e,nl(e)-!o):1!=e.nodeType||"BR"==e.nodeName&&e.nextSibling?null:e;if(t)return n4(n1(t,1),!1)}if(null==a&&i<nl(r)){let e=r.childNodes[i];for(;e.pmViewDesc&&e.pmViewDesc.ignoreForCoords;)e=e.nextSibling;let t=e?3==e.nodeType?nr(e,0,+!o):1==e.nodeType?e:null:null;if(t)return n4(n1(t,-1),!0)}return n4(n1(3==r.nodeType?nr(r):r,-n),n>=0)}function n4(e,t){if(0==e.width)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function n3(e,t){if(0==e.height)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function n7(e,t,n){let r=e.state,i=e.root.activeElement;r!=t&&e.updateState(t),i!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),i!=e.dom&&i&&i.focus()}}function n9(e,t,n){let r=t.selection,i="up"==n?r.$from:r.$to;return n7(e,t,()=>{let{node:t}=e.docView.domFromPos(i.pos,"up"==n?-1:1);for(;;){let n=e.docView.nearestDesc(t,!0);if(!n)break;if(n.node.isBlock){t=n.contentDOM||n.dom;break}t=n.dom.parentNode}let r=n5(e,i.pos,1);for(let e=t.firstChild;e;e=e.nextSibling){let t;if(1==e.nodeType)t=e.getClientRects();else{if(3!=e.nodeType)continue;t=nr(e,0,e.nodeValue.length).getClientRects()}for(let e=0;e<t.length;e++){let i=t[e];if(i.bottom>i.top+1&&("up"==n?r.top-i.top>(i.bottom-r.top)*2:i.bottom-r.bottom>(r.bottom-i.top)*2))return!1}}return!0})}let n6=/[\u0590-\u08ac]/;function n8(e,t,n){let{$head:r}=t.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,a=!i,o=i==r.parent.content.size,s=e.domSelection();return s?n6.test(r.parent.textContent)&&s.modify?n7(e,t,()=>{let{focusNode:t,focusOffset:i,anchorNode:a,anchorOffset:o}=e.domSelectionRange(),l=s.caretBidiLevel;s.modify("move",n,"character");let c=r.depth?e.docView.domAfterPos(r.before()):e.dom,{focusNode:u,focusOffset:d}=e.domSelectionRange(),p=u&&!c.contains(1==u.nodeType?u:u.parentNode)||t==u&&i==d;try{s.collapse(a,o),t&&(t!=a||i!=o)&&s.extend&&s.extend(t,i)}catch(e){}return null!=l&&(s.caretBidiLevel=l),p}):"left"==n||"backward"==n?a:o:r.pos==r.start()||r.pos==r.end()}let re=null,rt=null,rn=!1;function rr(e,t,n){return re==t&&rt==n?rn:(re=t,rt=n,rn="up"==n||"down"==n?n9(e,t,n):n8(e,t,n))}let ri=0,ra=1,ro=2,rs=3;class rl{matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,n){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,n=this.posAtStart;;t++){let r=this.children[t];if(r==e)return n;n+=r.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,n){let r;if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode))if(n<0){let n,r;if(e==this.contentDOM)n=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.previousSibling}for(;n&&!((r=n.pmViewDesc)&&r.parent==this);)n=n.previousSibling;return n?this.posBeforeChild(r)+r.size:this.posAtStart}else{let n,r;if(e==this.contentDOM)n=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.nextSibling}for(;n&&!((r=n.pmViewDesc)&&r.parent==this);)n=n.nextSibling;return n?this.posBeforeChild(r):this.posAtEnd}if(e==this.dom&&this.contentDOM)r=t>ne(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))r=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(let t=e;;t=t.parentNode){if(t==this.dom){r=!1;break}if(t.previousSibling)break}if(null==r&&t==e.childNodes.length)for(let t=e;;t=t.parentNode){if(t==this.dom){r=!0;break}if(t.nextSibling)break}}return(null==r?n>0:r)?this.posAtEnd:this.posAtStart}nearestDesc(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(let n=!0,r=e;r;r=r.parentNode){let i=this.getDesc(r),a;if(i&&(!t||i.node))if(!n||!(a=i.nodeDOM)||(1==a.nodeType?a.contains(1==e.nodeType?e:e.parentNode):a==e))return i;else n=!1}}getDesc(e){let t=e.pmViewDesc;for(let e=t;e;e=e.parent)if(e==this)return t}posFromDOM(e,t,n){for(let r=e;r;r=r.parentNode){let i=this.getDesc(r);if(i)return i.localPosFromDOM(e,t,n)}return -1}descAt(e){for(let t=0,n=0;t<this.children.length;t++){let r=this.children[t],i=n+r.size;if(n==e&&i!=n){for(;!r.border&&r.children.length;)for(let e=0;e<r.children.length;e++){let t=r.children[e];if(t.size){r=t;break}}return r}if(e<i)return r.descAt(e-n-r.border);n=i}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let n=0,r=0;for(let t=0;n<this.children.length;n++){let i=this.children[n],a=t+i.size;if(a>e||i instanceof rm){r=e-t;break}t=a}if(r)return this.children[n].domFromPos(r-this.children[n].border,t);for(let e;n&&!(e=this.children[n-1]).size&&e instanceof rc&&e.side>=0;n--);if(t<=0){let e,r=!0;for(;(e=n?this.children[n-1]:null)&&e.dom.parentNode!=this.contentDOM;n--,r=!1);return e&&t&&r&&!e.border&&!e.domAtom?e.domFromPos(e.size,t):{node:this.contentDOM,offset:e?ne(e.dom)+1:0}}{let e,r=!0;for(;(e=n<this.children.length?this.children[n]:null)&&e.dom.parentNode!=this.contentDOM;n++,r=!1);return e&&r&&!e.border&&!e.domAtom?e.domFromPos(0,t):{node:this.contentDOM,offset:e?ne(e.dom):this.contentDOM.childNodes.length}}}parseRange(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let r=-1,i=-1;for(let a=n,o=0;;o++){let n=this.children[o],s=a+n.size;if(-1==r&&e<=s){let i=a+n.border;if(e>=i&&t<=s-n.border&&n.node&&n.contentDOM&&this.contentDOM.contains(n.contentDOM))return n.parseRange(e,t,i);e=a;for(let t=o;t>0;t--){let n=this.children[t-1];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(1)){r=ne(n.dom)+1;break}e-=n.size}-1==r&&(r=0)}if(r>-1&&(s>t||o==this.children.length-1)){t=s;for(let e=o+1;e<this.children.length;e++){let n=this.children[e];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(-1)){i=ne(n.dom);break}t+=n.size}-1==i&&(i=this.contentDOM.childNodes.length);break}a=s}return{node:this.contentDOM,from:e,to:t,fromOffset:r,toOffset:i}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:n}=this.domFromPos(e,0);if(1!=t.nodeType||n==t.childNodes.length)throw RangeError("No node after pos "+e);return t.childNodes[n]}setSelection(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=Math.min(e,t),a=Math.max(e,t);for(let o=0,s=0;o<this.children.length;o++){let l=this.children[o],c=s+l.size;if(i>s&&a<c)return l.setSelection(e-s-l.border,t-s-l.border,n,r);s=c}let o=this.domFromPos(e,e?-1:1),s=t==e?o:this.domFromPos(t,t?-1:1),l=n.root.getSelection(),c=n.domSelectionRange(),u=!1;if((nS||nI)&&e==t){let{node:e,offset:t}=o;if(3==e.nodeType){if((u=!!(t&&"\n"==e.nodeValue[t-1]))&&t==e.nodeValue.length)for(let t=e,n;t;t=t.parentNode){if(n=t.nextSibling){"BR"==n.nodeName&&(o=s={node:n.parentNode,offset:ne(n)+1});break}let e=t.pmViewDesc;if(e&&e.node&&e.node.isBlock)break}}else{let n=e.childNodes[t-1];u=n&&("BR"==n.nodeName||"false"==n.contentEditable)}}if(nS&&c.focusNode&&c.focusNode!=s.node&&1==c.focusNode.nodeType){let e=c.focusNode.childNodes[c.focusOffset];e&&"false"==e.contentEditable&&(r=!0)}if(!(r||u&&nI)&&na(o.node,o.offset,c.anchorNode,c.anchorOffset)&&na(s.node,s.offset,c.focusNode,c.focusOffset))return;let d=!1;if((l.extend||e==t)&&!u){l.collapse(o.node,o.offset);try{e!=t&&l.extend(s.node,s.offset),d=!0}catch(e){}}if(!d){if(e>t){let e=o;o=s,s=e}let n=document.createRange();n.setEnd(s.node,s.offset),n.setStart(o.node,o.offset),l.removeAllRanges(),l.addRange(n)}}ignoreMutation(e){return!this.contentDOM&&"selection"!=e.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let n=0,r=0;r<this.children.length;r++){let i=this.children[r],a=n+i.size;if(n==a?e<=a&&t>=n:e<a&&t>n){let r=n+i.border,o=a-i.border;if(e>=r&&t<=o){this.dirty=e==n||t==a?ro:ra,e==r&&t==o&&(i.contentLost||i.dom.parentNode!=this.contentDOM)?i.dirty=rs:i.markDirty(e-r,t-r);return}i.dirty=i.dom!=i.contentDOM||i.dom.parentNode!=this.contentDOM||i.children.length?rs:ro}n=a}this.dirty=ro}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let n=1==e?ro:ra;t.dirty<n&&(t.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}constructor(e,t,n,r){this.parent=e,this.children=t,this.dom=n,this.contentDOM=r,this.dirty=ri,n.pmViewDesc=this}}class rc extends rl{matchesWidget(e){return this.dirty==ri&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return!!t&&t(e)}ignoreMutation(e){return"selection"!=e.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}constructor(e,t,n,r){let i,a=t.type.toDOM;if("function"==typeof a&&(a=a(n,()=>i?i.parent?i.parent.posBeforeChild(i):void 0:r)),!t.type.spec.raw){if(1!=a.nodeType){let e=document.createElement("span");e.appendChild(a),a=e}a.contentEditable="false",a.classList.add("ProseMirror-widget")}super(e,[],a,null),this.widget=t,this.widget=t,i=this}}class ru extends rl{get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue}constructor(e,t,n,r){super(e,[],t,null),this.textDOM=n,this.text=r}}class rd extends rl{static create(e,t,n,r){let i=r.nodeViews[t.type.name],a=i&&i(t,r,n);return a&&a.dom||(a=eE.renderSpec(document,t.type.spec.toDOM(t,n),null,t.attrs)),new rd(e,t,a.dom,a.contentDOM||a.dom,a)}parseRule(){return this.dirty&rs||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=rs&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=ri){let e=this.parent;for(;!e.node;)e=e.parent;e.dirty<this.dirty&&(e.dirty=this.dirty),this.dirty=ri}}slice(e,t,n){let r=rd.create(this.parent,this.mark,!0,n),i=this.children,a=this.size;t<a&&(i=rA(i,t,a,n)),e>0&&(i=rA(i,0,e,n));for(let e=0;e<i.length;e++)i[e].parent=r;return r.children=i,r}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}constructor(e,t,n,r,i){super(e,[],n,r),this.mark=t,this.spec=i}}class rp extends rl{static create(e,t,n,r,i,a){let o=i.nodeViews[t.type.name],s,l=o&&o(t,i,()=>s?s.parent?s.parent.posBeforeChild(s):void 0:a,n,r),c=l&&l.dom,u=l&&l.contentDOM;if(t.isText)if(c){if(3!=c.nodeType)throw RangeError("Text must be rendered as a DOM text node")}else c=document.createTextNode(t.text);else if(!c){let e=eE.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs);({dom:c,contentDOM:u}=e)}u||t.isText||"BR"==c.nodeName||(c.hasAttribute("contenteditable")||(c.contentEditable="false"),t.type.spec.draggable&&(c.draggable=!0));let d=c;return(c=rC(c,n,t),l)?s=new rg(e,t,n,r,c,u||null,d,l,i,a+1):t.isText?new rf(e,t,n,r,c,d,i):new rp(e,t,n,r,c,u||null,d,i,a+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(e.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(let t=this.children.length-1;t>=0;t--){let n=this.children[t];if(this.dom.contains(n.dom.parentNode)){e.contentElement=n.dom.parentNode;break}}e.contentElement||(e.getContent=()=>h.empty)}else e.contentElement=this.contentDOM;else e.getContent=()=>this.node.content;return e}matchesNode(e,t,n){return this.dirty==ri&&e.eq(this.node)&&rk(t,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return+!this.node.isLeaf}updateChildren(e,t){let n=this.node.inlineContent,r=t,i=e.composing?this.localCompositionInfo(e,t):null,a=i&&i.pos>-1?i:null,o=i&&i.pos<0,s=new rN(this,a&&a.node,e);rI(this.node,this.innerDeco,(t,i,a)=>{t.spec.marks?s.syncToMarks(t.spec.marks,n,e):t.type.side>=0&&!a&&s.syncToMarks(i==this.node.childCount?v.none:this.node.child(i).marks,n,e),s.placeWidget(t,e,r)},(t,a,l,c)=>{let u;s.syncToMarks(t.marks,n,e),s.findNodeMatch(t,a,l,c)||o&&e.state.selection.from>r&&e.state.selection.to<r+t.nodeSize&&(u=s.findIndexWithChild(i.node))>-1&&s.updateNodeAt(t,a,l,u,e)||s.updateNextNode(t,a,l,e,c,r)||s.addNode(t,a,l,e,r),r+=t.nodeSize}),s.syncToMarks([],n,e),this.node.isTextblock&&s.addTextblockHacks(),s.destroyRest(),(s.changed||this.dirty==ro)&&(a&&this.protectLocalComposition(e,a),rv(this.contentDOM,this.children,e),nD&&rD(this.dom))}localCompositionInfo(e,t){let{from:n,to:r}=e.state.selection;if(!(e.state.selection instanceof tH)||n<t||r>t+this.node.content.size)return null;let i=e.input.compositionNode;if(!i||!this.dom.contains(i.parentNode))return null;if(!this.node.inlineContent)return{node:i,pos:-1,text:""};{let e=i.nodeValue,a=rT(this.node.content,e,n-t,r-t);return a<0?null:{node:i,pos:a,text:e}}}protectLocalComposition(e,t){let{node:n,pos:r,text:i}=t;if(this.getDesc(n))return;let a=n;for(;a.parentNode!=this.contentDOM;a=a.parentNode){for(;a.previousSibling;)a.parentNode.removeChild(a.previousSibling);for(;a.nextSibling;)a.parentNode.removeChild(a.nextSibling);a.pmViewDesc&&(a.pmViewDesc=void 0)}let o=new ru(this,a,n,i);e.input.compositionNodes.push(o),this.children=rA(this.children,r,r+i.length,e,o)}update(e,t,n,r){return this.dirty!=rs&&!!e.sameMarkup(this.node)&&(this.updateInner(e,t,n,r),!0)}updateInner(e,t,n,r){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=ri}updateOuterDeco(e){if(rk(e,this.outerDeco))return;let t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=rw(this.dom,this.nodeDOM,rb(this.outerDeco,this.node,t),rb(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){1==this.nodeDOM.nodeType&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}constructor(e,t,n,r,i,a,o,s,l){super(e,[],i,a),this.node=t,this.outerDeco=n,this.innerDeco=r,this.nodeDOM=o}}function rh(e,t,n,r,i){rC(r,t,e);let a=new rp(void 0,e,t,n,r,r,r,i,0);return a.contentDOM&&a.updateChildren(i,0),a}class rf extends rp{parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,n,r){return this.dirty!=rs&&(this.dirty==ri||!!this.inParent())&&!!e.sameMarkup(this.node)&&(this.updateOuterDeco(t),(this.dirty!=ri||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=e,this.dirty=ri,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,n){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,n)}ignoreMutation(e){return"characterData"!=e.type&&"selection"!=e.type}slice(e,t,n){let r=this.node.cut(e,t),i=document.createTextNode(r.text);return new rf(this.parent,r,this.outerDeco,this.innerDeco,i,i,n)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(0==e||t==this.nodeDOM.nodeValue.length)&&(this.dirty=rs)}get domAtom(){return!1}isText(e){return this.node.text==e}constructor(e,t,n,r,i,a,o){super(e,t,n,r,i,null,a,o,0)}}class rm extends rl{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==ri&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class rg extends rp{update(e,t,n,r){if(this.dirty==rs)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let i=this.spec.update(e,t,n);return i&&this.updateInner(e,t,n,r),i}return(!!this.contentDOM||!!e.isLeaf)&&super.update(e,t,n,r)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,n,r){this.spec.setSelection?this.spec.setSelection(e,t,n.root):super.setSelection(e,t,n,r)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}constructor(e,t,n,r,i,a,o,s,l,c){super(e,t,n,r,i,a,o,l,c),this.spec=s}}function rv(e,t,n){let r=e.firstChild,i=!1;for(let a=0;a<t.length;a++){let o=t[a],s=o.dom;if(s.parentNode==e){for(;s!=r;)r=rS(r),i=!0;r=r.nextSibling}else i=!0,e.insertBefore(s,r);if(o instanceof rd){let t=r?r.previousSibling:e.lastChild;rv(o.contentDOM,o.children,n),r=t?t.nextSibling:e.firstChild}}for(;r;)r=rS(r),i=!0;i&&n.trackWrites==e&&(n.trackWrites=null)}let rx=function(e){e&&(this.nodeName=e)};rx.prototype=Object.create(null);let ry=[new rx];function rb(e,t,n){if(0==e.length)return ry;let r=n?ry[0]:new rx,i=[r];for(let a=0;a<e.length;a++){let o=e[a].type.attrs;if(o)for(let e in o.nodeName&&i.push(r=new rx(o.nodeName)),o){let a=o[e];null!=a&&(n&&1==i.length&&i.push(r=new rx(t.isInline?"span":"div")),"class"==e?r.class=(r.class?r.class+" ":"")+a:"style"==e?r.style=(r.style?r.style+";":"")+a:"nodeName"!=e&&(r[e]=a))}}return i}function rw(e,t,n,r){if(n==ry&&r==ry)return t;let i=t;for(let t=0;t<r.length;t++){let a=r[t],o=n[t];if(t){let t;o&&o.nodeName==a.nodeName&&i!=e&&(t=i.parentNode)&&t.nodeName.toLowerCase()==a.nodeName||((t=document.createElement(a.nodeName)).pmIsDeco=!0,t.appendChild(i),o=ry[0]),i=t}rj(i,o||ry[0],a)}return i}function rj(e,t,n){for(let r in t)"class"==r||"style"==r||"nodeName"==r||r in n||e.removeAttribute(r);for(let r in n)"class"!=r&&"style"!=r&&"nodeName"!=r&&n[r]!=t[r]&&e.setAttribute(r,n[r]);if(t.class!=n.class){let r=t.class?t.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let t=0;t<r.length;t++)-1==i.indexOf(r[t])&&e.classList.remove(r[t]);for(let t=0;t<i.length;t++)-1==r.indexOf(i[t])&&e.classList.add(i[t]);0==e.classList.length&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let n=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,r;for(;r=n.exec(t.style);)e.style.removeProperty(r[1])}n.style&&(e.style.cssText+=n.style)}}function rC(e,t,n){return rw(e,e,ry,rb(t,n,1!=e.nodeType))}function rk(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function rS(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class rN{destroyBetween(e,t){if(e!=t){for(let n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,n){let r=0,i=this.stack.length>>1,a=Math.min(i,e.length);for(;r<a&&(r==i-1?this.top:this.stack[r+1<<1]).matchesMark(e[r])&&!1!==e[r].type.spec.spanning;)r++;for(;r<i;)this.destroyRest(),this.top.dirty=ri,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<e.length;){this.stack.push(this.top,this.index+1);let r=-1;for(let t=this.index;t<Math.min(this.index+3,this.top.children.length);t++){let n=this.top.children[t];if(n.matchesMark(e[i])&&!this.isLocked(n.dom)){r=t;break}}if(r>-1)r>this.index&&(this.changed=!0,this.destroyBetween(this.index,r)),this.top=this.top.children[this.index];else{let r=rd.create(this.top,e[i],t,n);this.top.children.splice(this.index,0,r),this.top=r,this.changed=!0}this.index=0,i++}}findNodeMatch(e,t,n,r){let i=-1,a;if(r>=this.preMatch.index&&(a=this.preMatch.matches[r-this.preMatch.index]).parent==this.top&&a.matchesNode(e,t,n))i=this.top.children.indexOf(a,this.index);else for(let r=this.index,a=Math.min(this.top.children.length,r+5);r<a;r++){let a=this.top.children[r];if(a.matchesNode(e,t,n)&&!this.preMatch.matched.has(a)){i=r;break}}return!(i<0)&&(this.destroyBetween(this.index,i),this.index++,!0)}updateNodeAt(e,t,n,r,i){let a=this.top.children[r];return a.dirty==rs&&a.dom==a.contentDOM&&(a.dirty=ro),!!a.update(e,t,n,i)&&(this.destroyBetween(this.index,r),this.index++,!0)}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return -1;if(t==this.top.contentDOM){let t=e.pmViewDesc;if(t){for(let e=this.index;e<this.top.children.length;e++)if(this.top.children[e]==t)return e}return -1}e=t}}updateNextNode(e,t,n,r,i,a){for(let o=this.index;o<this.top.children.length;o++){let s=this.top.children[o];if(s instanceof rp){let l=this.preMatch.matched.get(s);if(null!=l&&l!=i)return!1;let c=s.dom,u,d=this.isLocked(c)&&!(e.isText&&s.node&&s.node.isText&&s.nodeDOM.nodeValue==e.text&&s.dirty!=rs&&rk(t,s.outerDeco));if(!d&&s.update(e,t,n,r))return this.destroyBetween(this.index,o),s.dom!=c&&(this.changed=!0),this.index++,!0;if(!d&&(u=this.recreateWrapper(s,e,t,n,r,a)))return this.destroyBetween(this.index,o),this.top.children[this.index]=u,u.contentDOM&&(u.dirty=ro,u.updateChildren(r,a+1),u.dirty=ri),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,n,r,i,a){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!rk(n,e.outerDeco)||!r.eq(e.innerDeco))return null;let o=rp.create(this.top,t,n,r,i,a);if(o.contentDOM)for(let t of(o.children=e.children,e.children=[],o.children))t.parent=o;return e.destroy(),o}addNode(e,t,n,r,i){let a=rp.create(this.top,e,t,n,r,i);a.contentDOM&&a.updateChildren(r,i+1),this.top.children.splice(this.index++,0,a),this.changed=!0}placeWidget(e,t,n){let r=this.index<this.top.children.length?this.top.children[this.index]:null;if(r&&r.matchesWidget(e)&&(e==r.widget||!r.widget.type.toDOM.parentNode))this.index++;else{let r=new rc(this.top,e,t,n);this.top.children.splice(this.index++,0,r),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof rd;)e=(t=e).children[t.children.length-1];(!e||!(e instanceof rf)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((nI||nE)&&e&&"false"==e.dom.contentEditable&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let n=document.createElement(e);"IMG"==e&&(n.className="ProseMirror-separator",n.alt=""),"BR"==e&&(n.className="ProseMirror-trailingBreak");let r=new rm(this.top,[],n,null);t!=this.top?t.children.push(r):t.children.splice(this.index++,0,r),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||1==e.nodeType&&e.contains(this.lock.parentNode))}constructor(e,t,n){this.lock=t,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=rE(e.node.content,e)}}function rE(e,t){let n=t,r=n.children.length,i=e.childCount,a=new Map,o=[];n:for(;i>0;){let s;for(;;)if(r){let e=n.children[r-1];if(e instanceof rd)n=e,r=e.children.length;else{s=e,r--;break}}else if(n==t)break n;else r=n.parent.children.indexOf(n),n=n.parent;let l=s.node;if(l){if(l!=e.child(i-1))break;--i,a.set(s,i),o.push(s)}}return{index:i,matched:a,matches:o.reverse()}}function rM(e,t){return e.type.side-t.type.side}function rI(e,t,n,r){let i=t.locals(e),a=0;if(0==i.length){for(let n=0;n<e.childCount;n++){let o=e.child(n);r(o,i,t.forChild(a,o),n),a+=o.nodeSize}return}let o=0,s=[],l=null;for(let c=0;;){let u,d,p,h;for(;o<i.length&&i[o].to==a;){let e=i[o++];e.widget&&(u?(d||(d=[u])).push(e):u=e)}if(u)if(d){d.sort(rM);for(let e=0;e<d.length;e++)n(d[e],c,!!l)}else n(u,c,!!l);if(l)h=-1,p=l,l=null;else if(c<e.childCount)h=c,p=e.child(c++);else break;for(let e=0;e<s.length;e++)s[e].to<=a&&s.splice(e--,1);for(;o<i.length&&i[o].from<=a&&i[o].to>a;)s.push(i[o++]);let f=a+p.nodeSize;if(p.isText){let e=f;o<i.length&&i[o].from<e&&(e=i[o].from);for(let t=0;t<s.length;t++)s[t].to<e&&(e=s[t].to);e<f&&(l=p.cut(e-a),p=p.cut(0,e-a),f=e,h=-1)}else for(;o<i.length&&i[o].to<f;)o++;let m=p.isInline&&!p.isLeaf?s.filter(e=>!e.inline):s.slice();r(p,m,t.forChild(a,p),h),a=f}}function rD(e){if("UL"==e.nodeName||"OL"==e.nodeName){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function rT(e,t,n,r){for(let i=0,a=0;i<e.childCount&&a<=r;){let o=e.child(i++),s=a;if(a+=o.nodeSize,!o.isText)continue;let l=o.text;for(;i<e.childCount;){let t=e.child(i++);if(a+=t.nodeSize,!t.isText)break;l+=t.text}if(a>=n){if(a>=r&&l.slice(r-t.length-s,r-s)==t)return r-t.length;let e=s<r?l.lastIndexOf(t,r-s-1):-1;if(e>=0&&e+t.length+s>=n)return s+e;if(n==r&&l.length>=r+t.length-s&&l.slice(r-s,r-s+t.length)==t)return r}}return -1}function rA(e,t,n,r,i){let a=[];for(let o=0,s=0;o<e.length;o++){let l=e[o],c=s,u=s+=l.size;c>=n||u<=t?a.push(l):(c<t&&a.push(l.slice(0,t-c,r)),i&&(a.push(i),i=void 0),u>n&&a.push(l.slice(n-c,l.size,r)))}return a}function rL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.domSelectionRange(),r=e.state.doc;if(!n.focusNode)return null;let i=e.docView.nearestDesc(n.focusNode),a=i&&0==i.size,o=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let s=r.resolve(o),l,c;if(nh(n)){for(l=o;i&&!i.node;)i=i.parent;let e=i.node;if(i&&e.isAtom&&tq.isSelectable(e)&&i.parent&&!(e.isInline&&nd(n.focusNode,n.focusOffset,i.dom))){let e=i.posBefore;c=new tq(o==e?s:r.resolve(e))}}else{if(n instanceof e.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let t=o,i=o;for(let r=0;r<n.rangeCount;r++){let a=n.getRangeAt(r);t=Math.min(t,e.docView.posFromDOM(a.startContainer,a.startOffset,1)),i=Math.max(i,e.docView.posFromDOM(a.endContainer,a.endOffset,-1))}if(t<0)return null;[l,o]=i==e.state.selection.anchor?[i,t]:[t,i],s=r.resolve(o)}else l=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let u=r.resolve(l);if(!c){let n="pointer"==t||e.state.selection.head<s.pos&&!a?1:-1;c=rq(e,u,s,n)}return c}function rP(e){return e.editable?e.hasFocus():rZ(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function rR(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.state.selection;if(rH(e,n),rP(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&nE){let t=e.domSelectionRange(),n=e.domObserver.currentSelection;if(t.anchorNode&&n.anchorNode&&na(t.anchorNode,t.anchorOffset,n.anchorNode,n.anchorOffset)){e.input.mouseDown.delayedSelectionSync=!0,e.domObserver.setCurSelection();return}}if(e.domObserver.disconnectSelection(),e.cursorWrapper)rz(e);else{let{anchor:r,head:i}=n,a,o;r_&&!(n instanceof tH)&&(n.$from.parent.inlineContent||(a=rO(e,n.from)),n.empty||n.$from.parent.inlineContent||(o=rO(e,n.to))),e.docView.setSelection(r,i,e,t),r_&&(a&&rV(a),o&&rV(o)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&rB(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}let r_=nI||nE&&nM<63;function rO(e,t){let{node:n,offset:r}=e.docView.domFromPos(t,0),i=r<n.childNodes.length?n.childNodes[r]:null,a=r?n.childNodes[r-1]:null;if(nI&&i&&"false"==i.contentEditable)return rF(i);if((!i||"false"==i.contentEditable)&&(!a||"false"==a.contentEditable)){if(i)return rF(i);else if(a)return rF(a)}}function rF(e){return e.contentEditable="true",nI&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function rV(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function rB(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{(!rP(e)||e.state.selection.visible)&&e.dom.classList.remove("ProseMirror-hideselection")},20))})}function rz(e){let t=e.domSelection(),n=document.createRange();if(!t)return;let r=e.cursorWrapper.dom,i="IMG"==r.nodeName;i?n.setStart(r.parentNode,ne(r)+1):n.setStart(r,0),n.collapse(!0),t.removeAllRanges(),t.addRange(n),!i&&!e.state.selection.visible&&nC&&nk<=11&&(r.disabled=!0,r.disabled=!1)}function rH(e,t){if(t instanceof tq){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(rU(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else rU(e)}function rU(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function rq(e,t,n,r){return e.someProp("createSelectionBetween",r=>r(e,t,n))||tH.between(t,n,r)}function rW(e){return(!e.editable||!!e.hasFocus())&&rZ(e)}function rZ(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(e){return!1}}function rG(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.domSelectionRange();return na(t.node,t.offset,n.anchorNode,n.anchorOffset)}function rK(e,t){let{$anchor:n,$head:r}=e.selection,i=t>0?n.max(r):n.min(r),a=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return a&&tF.findFrom(a,t)}function rX(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function r$(e,t,n){let r=e.state.selection;if(r instanceof tH){if(n.indexOf("s")>-1){let{$head:n}=r,i=n.textOffset?null:t<0?n.nodeBefore:n.nodeAfter;if(!i||i.isText||!i.isLeaf)return!1;let a=e.state.doc.resolve(n.pos+i.nodeSize*(t<0?-1:1));return rX(e,new tH(r.$anchor,a))}else if(!r.empty)return!1;else if(e.endOfTextblock(t>0?"forward":"backward")){let n=rK(e.state,t);return!!n&&n instanceof tq&&rX(e,n)}else if(!(nT&&n.indexOf("m")>-1)){let n=r.$head,i=n.textOffset?null:t<0?n.nodeBefore:n.nodeAfter,a;if(!i||i.isText)return!1;let o=t<0?n.pos-i.nodeSize:n.pos;return!!(i.isAtom||(a=e.docView.descAt(o))&&!a.contentDOM)&&(tq.isSelectable(i)?rX(e,new tq(t<0?e.state.doc.resolve(n.pos-i.nodeSize):n)):!!nP&&rX(e,new tH(e.state.doc.resolve(t<0?o:o+i.nodeSize))))}}else{if(r instanceof tq&&r.node.isInline)return rX(e,new tH(t>0?r.$to:r.$from));let n=rK(e.state,t);return!!n&&rX(e,n)}}function rY(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function rJ(e,t){let n=e.pmViewDesc;return n&&0==n.size&&(t<0||e.nextSibling||"BR"!=e.nodeName)}function rQ(e,t){return t<0?r0(e):r1(e)}function r0(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i,a,o=!1;for(nS&&1==n.nodeType&&r<rY(n)&&rJ(n.childNodes[r],-1)&&(o=!0);;)if(r>0)if(1!=n.nodeType)break;else{let e=n.childNodes[r-1];if(rJ(e,-1))i=n,a=--r;else if(3==e.nodeType)r=(n=e).nodeValue.length;else break}else if(r2(n))break;else{let t=n.previousSibling;for(;t&&rJ(t,-1);)i=n.parentNode,a=ne(t),t=t.previousSibling;if(t)r=rY(n=t);else{if((n=n.parentNode)==e.dom)break;r=0}}o?r3(e,n,r):i&&r3(e,i,a)}function r1(e){let t,n,r=e.domSelectionRange(),i=r.focusNode,a=r.focusOffset;if(!i)return;let o=rY(i);for(;;)if(a<o){if(1!=i.nodeType)break;if(rJ(i.childNodes[a],1))t=i,n=++a;else break}else if(r2(i))break;else{let r=i.nextSibling;for(;r&&rJ(r,1);)t=r.parentNode,n=ne(r)+1,r=r.nextSibling;if(r)a=0,o=rY(i=r);else{if((i=i.parentNode)==e.dom)break;a=o=0}}t&&r3(e,t,n)}function r2(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function r5(e,t){for(;e&&t==e.childNodes.length&&!np(e);)t=ne(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let n=e.childNodes[t];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;e=n,t=0}}function r4(e,t){for(;e&&!t&&!np(e);)t=ne(e),e=e.parentNode;for(;e&&t;){let n=e.childNodes[t-1];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;t=(e=n).childNodes.length}}function r3(e,t,n){if(3!=t.nodeType){let e,r;(r=r5(t,n))?(t=r,n=0):(e=r4(t,n))&&(t=e,n=e.nodeValue.length)}let r=e.domSelection();if(!r)return;if(nh(r)){let e=document.createRange();e.setEnd(t,n),e.setStart(t,n),r.removeAllRanges(),r.addRange(e)}else r.extend&&r.extend(t,n);e.domObserver.setCurSelection();let{state:i}=e;setTimeout(()=>{e.state==i&&rR(e)},50)}function r7(e,t){let n=e.state.doc.resolve(t);if(!(nE||nA)&&n.parent.inlineContent){let r=e.coordsAtPos(t);if(t>n.start()){let n=e.coordsAtPos(t-1),i=(n.top+n.bottom)/2;if(i>r.top&&i<r.bottom&&Math.abs(n.left-r.left)>1)return n.left<r.left?"ltr":"rtl"}if(t<n.end()){let n=e.coordsAtPos(t+1),i=(n.top+n.bottom)/2;if(i>r.top&&i<r.bottom&&Math.abs(n.left-r.left)>1)return n.left>r.left?"ltr":"rtl"}}return"rtl"==getComputedStyle(e.dom).direction?"rtl":"ltr"}function r9(e,t,n){let r=e.state.selection;if(r instanceof tH&&!r.empty||n.indexOf("s")>-1||nT&&n.indexOf("m")>-1)return!1;let{$from:i,$to:a}=r;if(!i.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let n=rK(e.state,t);if(n&&n instanceof tq)return rX(e,n)}if(!i.parent.inlineContent){let n=t<0?i:a,o=r instanceof tZ?tF.near(n,t):tF.findFrom(n,t);return!!o&&rX(e,o)}return!1}function r6(e,t){if(!(e.state.selection instanceof tH))return!0;let{$head:n,$anchor:r,empty:i}=e.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let a=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(a&&!a.isText){let r=e.state.tr;return t<0?r.delete(n.pos-a.nodeSize,n.pos):r.delete(n.pos,n.pos+a.nodeSize),e.dispatch(r),!0}return!1}function r8(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function ie(e){if(!nI||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&1==t.nodeType&&0==n&&t.firstChild&&"false"==t.firstChild.contentEditable){let n=t.firstChild;r8(e,n,"true"),setTimeout(()=>r8(e,n,"false"),20)}return!1}function it(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function ir(e,t){let n=t.keyCode,r=it(t);if(8==n||nT&&72==n&&"c"==r)return r6(e,-1)||rQ(e,-1);if(46==n&&!t.shiftKey||nT&&68==n&&"c"==r)return r6(e,1)||rQ(e,1);if(13==n||27==n)return!0;if(37==n||nT&&66==n&&"c"==r){let t=37==n?"ltr"==r7(e,e.state.selection.from)?-1:1:-1;return r$(e,t,r)||rQ(e,t)}if(39==n||nT&&70==n&&"c"==r){let t=39==n?"ltr"==r7(e,e.state.selection.from)?1:-1:1;return r$(e,t,r)||rQ(e,t)}else if(38==n||nT&&80==n&&"c"==r)return r9(e,-1,r)||rQ(e,-1);else if(40==n||nT&&78==n&&"c"==r)return ie(e)||r9(e,1,r)||rQ(e,1);else if(r==(nT?"m":"c")&&(66==n||73==n||89==n||90==n))return!0;return!1}function ii(e,t){e.someProp("transformCopied",n=>{t=n(t,e)});let n=[],{content:r,openStart:i,openEnd:a}=t;for(;i>1&&a>1&&1==r.childCount&&1==r.firstChild.childCount;){i--,a--;let e=r.firstChild;n.push(e.type.name,e.attrs!=e.type.defaultAttrs?e.attrs:null),r=e.content}let o=e.someProp("clipboardSerializer")||eE.fromSchema(e.state.schema),s=ig(),l=s.createElement("div");l.appendChild(o.serializeFragment(r,{document:s}));let c=l.firstChild,u,d=0;for(;c&&1==c.nodeType&&(u=ih[c.nodeName.toLowerCase()]);){for(let e=u.length-1;e>=0;e--){let t=s.createElement(u[e]);for(;l.firstChild;)t.appendChild(l.firstChild);l.appendChild(t),d++}c=l.firstChild}return c&&1==c.nodeType&&c.setAttribute("data-pm-slice","".concat(i," ").concat(a).concat(d?" -".concat(d):""," ").concat(JSON.stringify(n))),{dom:l,text:e.someProp("clipboardTextSerializer",n=>n(t,e))||t.content.textBetween(0,t.content.size,"\n\n"),slice:t}}function ia(e,t,n,r,i){let a,o,s=i.parent.type.spec.code;if(!n&&!t)return null;let l=t&&(r||s||!n);if(l){if(e.someProp("transformPastedText",n=>{t=n(t,s||r,e)}),s)return t?new y(h.from(e.state.schema.text(t.replace(/\r\n?/g,"\n"))),0,0):y.empty;let n=e.someProp("clipboardTextParser",n=>n(t,i,r,e));if(n)o=n;else{let n=i.marks(),{schema:r}=e.state,o=eE.fromSchema(r);a=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(e=>{let t=a.appendChild(document.createElement("p"));e&&t.appendChild(o.serializeNode(r.text(e,n)))})}}else e.someProp("transformPastedHTML",t=>{n=t(n,e)}),a=iy(n),nP&&ib(a);let c=a&&a.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let e=+u[3];e>0;e--){let e=a.firstChild;for(;e&&1!=e.nodeType;)e=e.nextSibling;if(!e)break;a=e}if(o||(o=(e.someProp("clipboardParser")||e.someProp("domParser")||eh.fromSchema(e.state.schema)).parseSlice(a,{preserveWhitespace:!!(l||u),context:i,ruleFromNode:e=>"BR"!=e.nodeName||e.nextSibling||!e.parentNode||io.test(e.parentNode.nodeName)?null:{ignore:!0}})),u)o=iw(ip(o,+u[1],+u[2]),u[4]);else if((o=y.maxOpen(is(o.content,i),!0)).openStart||o.openEnd){let e=0,t=0;for(let t=o.content.firstChild;e<o.openStart&&!t.type.spec.isolating;e++,t=t.firstChild);for(let e=o.content.lastChild;t<o.openEnd&&!e.type.spec.isolating;t++,e=e.lastChild);o=ip(o,e,t)}return e.someProp("transformPasted",t=>{o=t(o,e)}),o}let io=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function is(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let r=t.node(n).contentMatchAt(t.index(n)),i,a=[];if(e.forEach(e=>{if(!a)return;let t=r.findWrapping(e.type),n;if(!t)return a=null;if(n=a.length&&i.length&&ic(t,i,e,a[a.length-1],0))a[a.length-1]=n;else{a.length&&(a[a.length-1]=iu(a[a.length-1],i.length));let n=il(e,t);a.push(n),r=r.matchType(n.type),i=t}}),a)return h.from(a)}return e}function il(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;for(let r=t.length-1;r>=n;r--)e=t[r].create(null,h.from(e));return e}function ic(e,t,n,r,i){if(i<e.length&&i<t.length&&e[i]==t[i]){let a=ic(e,t,n,r.lastChild,i+1);if(a)return r.copy(r.content.replaceChild(r.childCount-1,a));if(r.contentMatchAt(r.childCount).matchType(i==e.length-1?n.type:e[i+1]))return r.copy(r.content.append(h.from(il(n,e,i+1))))}}function iu(e,t){if(0==t)return e;let n=e.content.replaceChild(e.childCount-1,iu(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(h.empty,!0);return e.copy(n.append(r))}function id(e,t,n,r,i,a){let o=t<0?e.firstChild:e.lastChild,s=o.content;return e.childCount>1&&(a=0),i<r-1&&(s=id(s,t,n,r,i+1,a)),i>=n&&(s=t<0?o.contentMatchAt(0).fillBefore(s,a<=i).append(s):s.append(o.contentMatchAt(o.childCount).fillBefore(h.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,o.copy(s))}function ip(e,t,n){return t<e.openStart&&(e=new y(id(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new y(id(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}let ih={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},im=null;function ig(){return im||(im=document.implementation.createHTMLDocument("title"))}let iv=null;function ix(e){let t=window.trustedTypes;return t?(iv||(iv=t.createPolicy("ProseMirrorClipboard",{createHTML:e=>e})),iv.createHTML(e)):e}function iy(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n=ig().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(e),i;if((i=r&&ih[r[1].toLowerCase()])&&(e=i.map(e=>"<"+e+">").join("")+e+i.map(e=>"</"+e+">").reverse().join("")),n.innerHTML=ix(e),i)for(let e=0;e<i.length;e++)n=n.querySelector(i[e])||n;return n}function ib(e){let t=e.querySelectorAll(nE?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let r=t[n];1==r.childNodes.length&&" "==r.textContent&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}function iw(e,t){if(!e.size)return e;let n=e.content.firstChild.type.schema,r;try{r=JSON.parse(t)}catch(t){return e}let{content:i,openStart:a,openEnd:o}=e;for(let e=r.length-2;e>=0;e-=2){let t=n.nodes[r[e]];if(!t||t.hasRequiredAttrs())break;i=h.from(t.create(r[e+1],i)),a++,o++}return new y(i,a,o)}let ij={},iC={},ik={touchstart:!0,touchmove:!0};class iS{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function iN(e){for(let t in ij){let n=ij[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=t=>{!iT(e,t)||iD(e,t)||!e.editable&&t.type in iC||n(e,t)},ik[t]?{passive:!0}:void 0)}nI&&e.dom.addEventListener("input",()=>null),iI(e)}function iE(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function iM(e){for(let t in e.domObserver.stop(),e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}function iI(e){e.someProp("handleDOMEvents",t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=t=>iD(e,t))})}function iD(e,t){return e.someProp("handleDOMEvents",n=>{let r=n[t.type];return!!r&&(r(e,t)||t.defaultPrevented)})}function iT(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function iA(e,t){iD(e,t)||!ij[t.type]||!e.editable&&t.type in iC||ij[t.type](e,t)}function iL(e){return{left:e.clientX,top:e.clientY}}function iP(e,t){let n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}function iR(e,t,n,r,i){if(-1==r)return!1;let a=e.state.doc.resolve(r);for(let r=a.depth+1;r>0;r--)if(e.someProp(t,t=>r>a.depth?t(e,n,a.nodeAfter,a.before(r),i,!0):t(e,n,a.node(r),a.before(r),i,!1)))return!0;return!1}function i_(e,t,n){if(e.focused||e.focus(),e.state.selection.eq(t))return;let r=e.state.tr.setSelection(t);"pointer"==n&&r.setMeta("pointer",!0),e.dispatch(r)}function iO(e,t){if(-1==t)return!1;let n=e.state.doc.resolve(t),r=n.nodeAfter;return!!(r&&r.isAtom&&tq.isSelectable(r))&&(i_(e,new tq(n),"pointer"),!0)}function iF(e,t){if(-1==t)return!1;let n=e.state.selection,r,i;n instanceof tq&&(r=n.node);let a=e.state.doc.resolve(t);for(let e=a.depth+1;e>0;e--){let t=e>a.depth?a.nodeAfter:a.node(e);if(tq.isSelectable(t)){i=r&&n.$from.depth>0&&e>=n.$from.depth&&a.before(n.$from.depth+1)==n.$from.pos?a.before(n.$from.depth):a.before(e);break}}return null!=i&&(i_(e,tq.create(e.state.doc,i),"pointer"),!0)}function iV(e,t,n,r,i){return iR(e,"handleClickOn",t,n,r)||e.someProp("handleClick",n=>n(e,t,r))||(i?iF(e,n):iO(e,n))}function iB(e,t,n,r){return iR(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",n=>n(e,t,r))}function iz(e,t,n,r){return iR(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",n=>n(e,t,r))||iH(e,n,r)}function iH(e,t,n){if(0!=n.button)return!1;let r=e.state.doc;if(-1==t)return!!r.inlineContent&&(i_(e,tH.create(r,0,r.content.size),"pointer"),!0);let i=r.resolve(t);for(let t=i.depth+1;t>0;t--){let n=t>i.depth?i.nodeAfter:i.node(t),a=i.before(t);if(n.inlineContent)i_(e,tH.create(r,a+1,a+1+n.content.size),"pointer");else{if(!tq.isSelectable(n))continue;i_(e,tq.create(r,a),"pointer")}return!0}}function iU(e){return iJ(e)}iC.keydown=(e,t)=>{let n=t;if((e.input.shiftKey=16==n.keyCode||n.shiftKey,!iZ(e,n))&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!nL||!nE||13!=n.keyCode))if(229!=n.keyCode&&e.domObserver.forceFlush(),!nD||13!=n.keyCode||n.ctrlKey||n.altKey||n.metaKey)e.someProp("handleKeyDown",t=>t(e,n))||ir(e,n)?n.preventDefault():iE(e,"key");else{let t=Date.now();e.input.lastIOSEnter=t,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==t&&(e.someProp("handleKeyDown",t=>t(e,nf(13,"Enter"))),e.input.lastIOSEnter=0)},200)}},iC.keyup=(e,t)=>{16==t.keyCode&&(e.input.shiftKey=!1)},iC.keypress=(e,t)=>{let n=t;if(iZ(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||nT&&n.metaKey)return;if(e.someProp("handleKeyPress",t=>t(e,n)))return void n.preventDefault();let r=e.state.selection;if(!(r instanceof tH)||!r.$from.sameParent(r.$to)){let t=String.fromCharCode(n.charCode);/[\r\n]/.test(t)||e.someProp("handleTextInput",n=>n(e,r.$from.pos,r.$to.pos,t))||e.dispatch(e.state.tr.insertText(t).scrollIntoView()),n.preventDefault()}};let iq=nT?"metaKey":"ctrlKey";ij.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let r=iU(e),i=Date.now(),a="singleClick";i-e.input.lastClick.time<500&&iP(n,e.input.lastClick)&&!n[iq]&&("singleClick"==e.input.lastClick.type?a="doubleClick":"doubleClick"==e.input.lastClick.type&&(a="tripleClick")),e.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:a};let o=e.posAtCoords(iL(n));o&&("singleClick"==a?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new iW(e,o,n,!!r)):("doubleClick"==a?iB:iz)(e,o.pos,o.inside,n)?n.preventDefault():iE(e,"pointer"))};class iW{done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>rR(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(iL(e))),this.updateAllowDefault(e),this.allowDefault||!t?iE(this.view,"pointer"):iV(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():0==e.button&&(this.flushed||nI&&this.mightDrag&&!this.mightDrag.node.isAtom||nE&&!this.view.state.selection.visible&&2>=Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to)))?(i_(this.view,tF.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):iE(this.view,"pointer")}move(e){this.updateAllowDefault(e),iE(this.view,"pointer"),0==e.buttons&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}constructor(e,t,n,r){let i,a;if(this.view=e,this.pos=t,this.event=n,this.flushed=r,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[iq],this.allowDefault=n.shiftKey,t.inside>-1)i=e.state.doc.nodeAt(t.inside),a=t.inside;else{let n=e.state.doc.resolve(t.pos);i=n.parent,a=n.depth?n.before():0}let o=r?null:n.target,s=o?e.docView.nearestDesc(o,!0):null;this.target=s&&1==s.dom.nodeType?s.dom:null;let{selection:l}=e.state;(0==n.button&&i.type.spec.draggable&&!1!==i.type.spec.selectable||l instanceof tq&&l.from<=a&&l.to>a)&&(this.mightDrag={node:i,pos:a,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&nS&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),iE(e,"pointer")}}function iZ(e,t){return!!e.composing||!!(nI&&500>Math.abs(t.timeStamp-e.input.compositionEndedAt))&&(e.input.compositionEndedAt=-2e8,!0)}ij.touchstart=e=>{e.input.lastTouch=Date.now(),iU(e),iE(e,"pointer")},ij.touchmove=e=>{e.input.lastTouch=Date.now(),iE(e,"pointer")},ij.contextmenu=e=>iU(e);let iG=nL?5e3:-1;function iK(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>iJ(e),t))}function iX(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=iY());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function i$(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let n=nc(t.focusNode,t.focusOffset),r=nu(t.focusNode,t.focusOffset);if(n&&r&&n!=r){let t=r.pmViewDesc,i=e.domObserver.lastChangedTextNode;if(n==i||r==i)return i;if(!t||!t.isText(r.nodeValue))return r;if(e.input.compositionNode==r){let e=n.pmViewDesc;if(!(!e||!e.isText(n.nodeValue)))return r}}return n||r}function iY(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}function iJ(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!nL||!(e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),iX(e),t||e.docView&&e.docView.dirty){let n=rL(e);return n&&!n.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(n)):(e.markCursor||t)&&!e.state.selection.empty?e.dispatch(e.state.tr.deleteSelection()):e.updateState(e.state),!0}return!1}}function iQ(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()},50)}iC.compositionstart=iC.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$to;if(t.selection instanceof tH&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(e=>!1===e.type.spec.inclusive)))e.markCursor=e.state.storedMarks||n.marks(),iJ(e,!0),e.markCursor=null;else if(iJ(e,!t.selection.empty),nS&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let t=e.domSelectionRange();for(let n=t.focusNode,r=t.focusOffset;n&&1==n.nodeType&&0!=r;){let t=r<0?n.lastChild:n.childNodes[r-1];if(!t)break;if(3==t.nodeType){let n=e.domSelection();n&&n.collapse(t,t.nodeValue.length);break}n=t,r=-1}}e.input.composing=!0}iK(e,iG)},iC.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,iK(e,20))};let i0=nC&&nk<15||nD&&nR<604;function i1(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}function i2(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=e.input.shiftKey&&45!=e.input.lastKeyCode;setTimeout(()=>{e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?i5(e,r.value,null,i,t):i5(e,r.textContent,r.innerHTML,i,t)},50)}function i5(e,t,n,r,i){let a=ia(e,t,n,r,e.state.selection.$from);if(e.someProp("handlePaste",t=>t(e,i,a||y.empty)))return!0;if(!a)return!1;let o=i1(a),s=o?e.state.tr.replaceSelectionWith(o,r):e.state.tr.replaceSelection(a);return e.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function i4(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let n=e.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}ij.copy=iC.cut=(e,t)=>{let n=t,r=e.state.selection,i="cut"==n.type;if(r.empty)return;let a=i0?null:n.clipboardData,{dom:o,text:s}=ii(e,r.content());a?(n.preventDefault(),a.clearData(),a.setData("text/html",o.innerHTML),a.setData("text/plain",s)):iQ(e,o),i&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},iC.paste=(e,t)=>{let n=t;if(e.composing&&!nL)return;let r=i0?null:n.clipboardData,i=e.input.shiftKey&&45!=e.input.lastKeyCode;r&&i5(e,i4(r),r.getData("text/html"),i,n)?n.preventDefault():i2(e,n)};class i3{constructor(e,t,n){this.slice=e,this.move=t,this.node=n}}let i7=nT?"altKey":"ctrlKey";for(let e in ij.dragstart=(e,t)=>{let n,r=t,i=e.input.mouseDown;if(i&&i.done(),!r.dataTransfer)return;let a=e.state.selection,o=a.empty?null:e.posAtCoords(iL(r));if(o&&o.pos>=a.from&&o.pos<=(a instanceof tq?a.to-1:a.to));else if(i&&i.mightDrag)n=tq.create(e.state.doc,i.mightDrag.pos);else if(r.target&&1==r.target.nodeType){let t=e.docView.nearestDesc(r.target,!0);t&&t.node.type.spec.draggable&&t!=e.docView&&(n=tq.create(e.state.doc,t.posBefore))}let s=(n||e.state.selection).content(),{dom:l,text:c,slice:u}=ii(e,s);r.dataTransfer.files.length&&nE&&!(nM>120)||r.dataTransfer.clearData(),r.dataTransfer.setData(i0?"Text":"text/html",l.innerHTML),r.dataTransfer.effectAllowed="copyMove",i0||r.dataTransfer.setData("text/plain",c),e.dragging=new i3(u,!r[i7],n)},ij.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)},iC.dragover=iC.dragenter=(e,t)=>t.preventDefault(),iC.drop=(e,t)=>{let n=t,r=e.dragging;if(e.dragging=null,!n.dataTransfer)return;let i=e.posAtCoords(iL(n));if(!i)return;let a=e.state.doc.resolve(i.pos),o=r&&r.slice;o?e.someProp("transformPasted",t=>{o=t(o,e)}):o=ia(e,i4(n.dataTransfer),i0?null:n.dataTransfer.getData("text/html"),!1,a);let s=!!(r&&!n[i7]);if(e.someProp("handleDrop",t=>t(e,n,o||y.empty,s)))return void n.preventDefault();if(!o)return;n.preventDefault();let l=o?tv(e.state.doc,a.pos,o):a.pos;null==l&&(l=a.pos);let c=e.state.tr;if(s){let{node:e}=r;e?e.replace(c):c.deleteSelection()}let u=c.mapping.map(l),d=0==o.openStart&&0==o.openEnd&&1==o.content.childCount,p=c.doc;if(d?c.replaceRangeWith(u,u,o.content.firstChild):c.replaceRange(u,u,o),c.doc.eq(p))return;let h=c.doc.resolve(u);if(d&&tq.isSelectable(o.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(o.content.firstChild))c.setSelection(new tq(h));else{let t=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((e,n,r,i)=>t=i),c.setSelection(rq(e,h,c.doc.resolve(t)))}e.focus(),e.dispatch(c.setMeta("uiEvent","drop"))},ij.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&rR(e)},20))},ij.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)},ij.beforeinput=(e,t)=>{let n=t;if(nE&&nL&&"deleteContentBackward"==n.inputType){e.domObserver.flushSoon();let{domChangeCount:t}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=t||(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",t=>t(e,nf(8,"Backspace")))))return;let{$cursor:n}=e.state.selection;n&&n.pos>0&&e.dispatch(e.state.tr.delete(n.pos-1,n.pos).scrollIntoView())},50)}},iC)ij[e]=iC[e];function i9(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class i6{map(e,t,n,r){let{pos:i,deleted:a}=e.mapResult(t.from+r,this.side<0?-1:1);return a?null:new at(i-n,i-n,this)}valid(){return!0}eq(e){return this==e||e instanceof i6&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&i9(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}constructor(e,t){this.toDOM=e,this.spec=t||ar,this.side=this.spec.side||0}}class i8{map(e,t,n,r){let i=e.map(t.from+r,this.spec.inclusiveStart?-1:1)-n,a=e.map(t.to+r,this.spec.inclusiveEnd?1:-1)-n;return i>=a?null:new at(i,a,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof i8&&i9(this.attrs,e.attrs)&&i9(this.spec,e.spec)}static is(e){return e.type instanceof i8}destroy(){}constructor(e,t){this.attrs=e,this.spec=t||ar}}class ae{map(e,t,n,r){let i=e.mapResult(t.from+r,1);if(i.deleted)return null;let a=e.mapResult(t.to+r,-1);return a.deleted||a.pos<=i.pos?null:new at(i.pos-n,a.pos-n,this)}valid(e,t){let{index:n,offset:r}=e.content.findIndex(t.from),i;return r==t.from&&!(i=e.child(n)).isText&&r+i.nodeSize==t.to}eq(e){return this==e||e instanceof ae&&i9(this.attrs,e.attrs)&&i9(this.spec,e.spec)}destroy(){}constructor(e,t){this.attrs=e,this.spec=t||ar}}class at{copy(e,t){return new at(e,t,this.type)}eq(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,n){return this.type.map(e,this,t,n)}static widget(e,t,n){return new at(e,e,new i6(t,n))}static inline(e,t,n,r){return new at(e,t,new i8(n,r))}static node(e,t,n,r){return new at(e,t,new ae(n,r))}get spec(){return this.type.spec}get inline(){return this.type instanceof i8}get widget(){return this.type instanceof i6}constructor(e,t,n){this.from=e,this.to=t,this.type=n}}let an=[],ar={};class ai{static create(e,t){return t.length?ap(t,e,0,ar):aa}find(e,t,n){let r=[];return this.findInner(null==e?0:e,null==t?1e9:t,r,0,n),r}findInner(e,t,n,r,i){for(let a=0;a<this.local.length;a++){let o=this.local[a];o.from<=t&&o.to>=e&&(!i||i(o.spec))&&n.push(o.copy(o.from+r,o.to+r))}for(let a=0;a<this.children.length;a+=3)if(this.children[a]<t&&this.children[a+1]>e){let o=this.children[a]+1;this.children[a+2].findInner(e-o,t-o,n,r+o,i)}}map(e,t,n){return this==aa||0==e.maps.length?this:this.mapInner(e,t,0,0,n||ar)}mapInner(e,t,n,r,i){let a;for(let o=0;o<this.local.length;o++){let s=this.local[o].map(e,n,r);s&&s.type.valid(t,s)?(a||(a=[])).push(s):i.onRemove&&i.onRemove(this.local[o].spec)}return this.children.length?as(this.children,a||[],e,t,n,r,i):a?new ai(a.sort(ah),an):aa}add(e,t){return t.length?this==aa?ai.create(e,t):this.addInner(e,t,0):this}addInner(e,t,n){let r,i=0;e.forEach((e,a)=>{let o=a+n,s;if(s=au(t,e,o)){for(r||(r=this.children.slice());i<r.length&&r[i]<a;)i+=3;r[i]==a?r[i+2]=r[i+2].addInner(e,s,o+1):r.splice(i,0,a,a+e.nodeSize,ap(s,e,o+1,ar)),i+=3}});let a=al(i?ad(t):t,-n);for(let t=0;t<a.length;t++)a[t].type.valid(e,a[t])||a.splice(t--,1);return new ai(a.length?this.local.concat(a).sort(ah):this.local,r||this.children)}remove(e){return 0==e.length||this==aa?this:this.removeInner(e,0)}removeInner(e,t){let n=this.children,r=this.local;for(let r=0;r<n.length;r+=3){let i,a=n[r]+t,o=n[r+1]+t;for(let t=0,n;t<e.length;t++)(n=e[t])&&n.from>a&&n.to<o&&(e[t]=null,(i||(i=[])).push(n));if(!i)continue;n==this.children&&(n=this.children.slice());let s=n[r+2].removeInner(i,a+1);s!=aa?n[r+2]=s:(n.splice(r,3),r-=3)}if(r.length){for(let n=0,i;n<e.length;n++)if(i=e[n])for(let e=0;e<r.length;e++)r[e].eq(i,t)&&(r==this.local&&(r=this.local.slice()),r.splice(e--,1))}return n==this.children&&r==this.local?this:r.length||n.length?new ai(r,n):aa}forChild(e,t){let n,r;if(this==aa)return this;if(t.isLeaf)return ai.empty;for(let t=0;t<this.children.length;t+=3)if(this.children[t]>=e){this.children[t]==e&&(n=this.children[t+2]);break}let i=e+1,a=i+t.content.size;for(let e=0;e<this.local.length;e++){let t=this.local[e];if(t.from<a&&t.to>i&&t.type instanceof i8){let e=Math.max(i,t.from)-i,n=Math.min(a,t.to)-i;e<n&&(r||(r=[])).push(t.copy(e,n))}}if(r){let e=new ai(r.sort(ah),an);return n?new ao([e,n]):e}return n||aa}eq(e){if(this==e)return!0;if(!(e instanceof ai)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return af(this.localsInner(e))}localsInner(e){if(this==aa)return an;if(e.inlineContent||!this.local.some(i8.is))return this.local;let t=[];for(let e=0;e<this.local.length;e++)this.local[e].type instanceof i8||t.push(this.local[e]);return t}forEachSet(e){e(this)}constructor(e,t){this.local=e.length?e:an,this.children=t.length?t:an}}ai.empty=new ai([],[]),ai.removeOverlap=af;let aa=ai.empty;class ao{map(e,t){let n=this.members.map(n=>n.map(e,t,ar));return ao.from(n)}forChild(e,t){if(t.isLeaf)return ai.empty;let n=[];for(let r=0;r<this.members.length;r++){let i=this.members[r].forChild(e,t);i!=aa&&(i instanceof ao?n=n.concat(i.members):n.push(i))}return ao.from(n)}eq(e){if(!(e instanceof ao)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,n=!0;for(let r=0;r<this.members.length;r++){let i=this.members[r].localsInner(e);if(i.length)if(t){n&&(t=t.slice(),n=!1);for(let e=0;e<i.length;e++)t.push(i[e])}else t=i}return t?af(n?t:t.sort(ah)):an}static from(e){switch(e.length){case 0:return aa;case 1:return e[0];default:return new ao(e.every(e=>e instanceof ai)?e:e.reduce((e,t)=>e.concat(t instanceof ai?t:t.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}constructor(e){this.members=e}}function as(e,t,n,r,i,a,o){let s=e.slice();for(let e=0,t=a;e<n.maps.length;e++){let r=0;n.maps[e].forEach((e,n,i,a)=>{let o=a-i-(n-e);for(let i=0;i<s.length;i+=3){let a=s[i+1];if(a<0||e>a+t-r)continue;let l=s[i]+t-r;n>=l?s[i+1]=e<=l?-2:-1:e>=t&&o&&(s[i]+=o,s[i+1]+=o)}r+=o}),t=n.maps[e].map(t,-1)}let l=!1;for(let t=0;t<s.length;t+=3)if(s[t+1]<0){if(-2==s[t+1]){l=!0,s[t+1]=-1;continue}let c=n.map(e[t]+a),u=c-i;if(u<0||u>=r.content.size){l=!0;continue}let d=n.map(e[t+1]+a,-1)-i,{index:p,offset:h}=r.content.findIndex(u),f=r.maybeChild(p);if(f&&h==u&&h+f.nodeSize==d){let r=s[t+2].mapInner(n,f,c+1,e[t]+a+1,o);r!=aa?(s[t]=u,s[t+1]=d,s[t+2]=r):(s[t+1]=-2,l=!0)}else l=!0}if(l){let l=ap(ac(s,e,t,n,i,a,o),r,0,o);t=l.local;for(let e=0;e<s.length;e+=3)s[e+1]<0&&(s.splice(e,3),e-=3);for(let e=0,t=0;e<l.children.length;e+=3){let n=l.children[e];for(;t<s.length&&s[t]<n;)t+=3;s.splice(t,0,l.children[e],l.children[e+1],l.children[e+2])}}return new ai(t.sort(ah),s)}function al(e,t){if(!t||!e.length)return e;let n=[];for(let r=0;r<e.length;r++){let i=e[r];n.push(new at(i.from+t,i.to+t,i.type))}return n}function ac(e,t,n,r,i,a,o){function s(e,t){for(let a=0;a<e.local.length;a++){let s=e.local[a].map(r,i,t);s?n.push(s):o.onRemove&&o.onRemove(e.local[a].spec)}for(let n=0;n<e.children.length;n+=3)s(e.children[n+2],e.children[n]+t+1)}for(let n=0;n<e.length;n+=3)-1==e[n+1]&&s(e[n+2],t[n]+a+1);return n}function au(e,t,n){if(t.isLeaf)return null;let r=n+t.nodeSize,i=null;for(let t=0,a;t<e.length;t++)(a=e[t])&&a.from>n&&a.to<r&&((i||(i=[])).push(a),e[t]=null);return i}function ad(e){let t=[];for(let n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function ap(e,t,n,r){let i=[],a=!1;t.forEach((t,o)=>{let s=au(e,t,o+n);if(s){a=!0;let e=ap(s,t,n+o+1,r);e!=aa&&i.push(o,o+t.nodeSize,e)}});let o=al(a?ad(e):e,-n).sort(ah);for(let e=0;e<o.length;e++)o[e].type.valid(t,o[e])||(r.onRemove&&r.onRemove(o[e].spec),o.splice(e--,1));return o.length||i.length?new ai(o,i):aa}function ah(e,t){return e.from-t.from||e.to-t.to}function af(e){let t=e;for(let n=0;n<t.length-1;n++){let r=t[n];if(r.from!=r.to)for(let i=n+1;i<t.length;i++){let a=t[i];if(a.from==r.from){a.to!=r.to&&(t==e&&(t=e.slice()),t[i]=a.copy(a.from,r.to),am(t,i+1,a.copy(r.to,a.to)));continue}a.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,a.from),am(t,i,r.copy(a.from,r.to)));break}}return t}function am(e,t,n){for(;t<e.length&&ah(n,e[t])>0;)t++;e.splice(t,0,n)}function ag(e){let t=[];return e.someProp("decorations",n=>{let r=n(e.state);r&&r!=aa&&t.push(r)}),e.cursorWrapper&&t.push(ai.create(e.state.doc,[e.cursorWrapper.deco])),ao.from(t)}let av={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},ax=nC&&nk<=11;class ay{set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}}class ab{flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,av)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(rW(this.view)){if(this.suppressingSelectionUpdates)return rR(this.view);if(nC&&nk<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&na(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,n;for(let n=e.focusNode;n;n=nt(n))t.add(n);for(let r=e.anchorNode;r;r=nt(r))if(t.has(r)){n=r;break}let r=n&&this.view.docView.nearestDesc(n);if(r&&r.ignoreMutation({type:"selection",target:3==n.nodeType?n.parentNode:n}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let n=e.domSelectionRange(),r=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&rW(e)&&!this.ignoreSelectionChange(n),i=-1,a=-1,o=!1,s=[];if(e.editable)for(let e=0;e<t.length;e++){let n=this.registerMutation(t[e],s);n&&(i=i<0?n.from:Math.min(n.from,i),a=a<0?n.to:Math.max(n.to,a),n.typeOver&&(o=!0))}if(nS&&s.length){let t=s.filter(e=>"BR"==e.nodeName);if(2==t.length){let[e,n]=t;e.parentNode&&e.parentNode.parentNode==n.parentNode?n.remove():e.remove()}else{let{focusNode:n}=this.currentSelection;for(let r of t){let t=r.parentNode;t&&"LI"==t.nodeName&&(!n||aN(e,n)!=t)&&r.remove()}}}let l=null;i<0&&r&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&nh(n)&&(l=rL(e))&&l.eq(tF.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,rR(e),this.currentSelection.set(n),e.scrollToSelection()):(i>-1||r)&&(i>-1&&(e.docView.markDirty(i,a),aC(e)),this.handleDOMChange(i,a,o,s),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(n)||rR(e),this.currentSelection.set(n))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let n=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(n==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style"))||!n||n.ignoreMutation(e))return null;if("childList"==e.type){for(let n=0;n<e.addedNodes.length;n++){let r=e.addedNodes[n];t.push(r),3==r.nodeType&&(this.lastChangedTextNode=r)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};let r=e.previousSibling,i=e.nextSibling;if(nC&&nk<=11&&e.addedNodes.length)for(let t=0;t<e.addedNodes.length;t++){let{previousSibling:n,nextSibling:a}=e.addedNodes[t];(!n||0>Array.prototype.indexOf.call(e.addedNodes,n))&&(r=n),(!a||0>Array.prototype.indexOf.call(e.addedNodes,a))&&(i=a)}let a=r&&r.parentNode==e.target?ne(r)+1:0,o=n.localPosFromDOM(e.target,a,-1),s=i&&i.parentNode==e.target?ne(i):e.target.childNodes.length;return{from:o,to:n.localPosFromDOM(e.target,s,1)}}return"attributes"==e.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=e.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new ay,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(e=>{for(let t=0;t<e.length;t++)this.queue.push(e[t]);nC&&nk<=11&&e.some(e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length)?this.flushSoon():this.flush()}),ax&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}}let aw=new WeakMap,aj=!1;function aC(e){!aw.has(e)&&(aw.set(e,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace))&&(e.requiresGeckoHackNode=nS,aj||(console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),aj=!0))}function ak(e,t){let n=t.startContainer,r=t.startOffset,i=t.endContainer,a=t.endOffset,o=e.domAtPos(e.state.selection.anchor);return na(o.node,o.offset,i,a)&&([n,r,i,a]=[i,a,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:a}}function aS(e,t){let n;if(t.getComposedRanges){let n=t.getComposedRanges(e.root)[0];if(n)return ak(e,n)}function r(e){e.preventDefault(),e.stopImmediatePropagation(),n=e.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",r,!0),n?ak(e,n):null}function aN(e,t){for(let n=t.parentNode;n&&n!=e.dom;n=n.parentNode){let t=e.docView.nearestDesc(n,!0);if(t&&t.node.isBlock)return n}return null}function aE(e,t,n){let r,{node:i,fromOffset:a,toOffset:o,from:s,to:l}=e.docView.parseRange(t,n),c=e.domSelectionRange(),u=c.anchorNode;if(u&&e.dom.contains(1==u.nodeType?u:u.parentNode)&&(r=[{node:u,offset:c.anchorOffset}],nh(c)||r.push({node:c.focusNode,offset:c.focusOffset})),nE&&8===e.input.lastKeyCode)for(let e=o;e>a;e--){let t=i.childNodes[e-1],n=t.pmViewDesc;if("BR"==t.nodeName&&!n){o=e;break}if(!n||n.size)break}let d=e.state.doc,p=e.someProp("domParser")||eh.fromSchema(e.state.schema),h=d.resolve(s),f=null,m=p.parse(i,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:a,to:o,preserveWhitespace:"pre"!=h.parent.type.whitespace||"full",findPositions:r,ruleFromNode:aM,context:h});if(r&&null!=r[0].pos){let e=r[0].pos,t=r[1]&&r[1].pos;null==t&&(t=e),f={anchor:e+s,head:t+s}}return{doc:m,sel:f,from:s,to:l}}function aM(e){let t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(nI&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let e=document.createElement("div");return e.appendChild(document.createElement("li")),{skip:e}}else if(e.parentNode.lastChild==e||nI&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}let aI=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function aD(e,t,n,r,i){let a,o,s,l,c,u,d=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let t=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,n=rL(e,t);if(n&&!e.state.selection.eq(n)){if(nE&&nL&&13===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",t=>t(e,nf(13,"Enter"))))return;let r=e.state.tr.setSelection(n);"pointer"==t?r.setMeta("pointer",!0):"key"==t&&r.scrollIntoView(),d&&r.setMeta("composition",d),e.dispatch(r)}return}let p=e.state.doc.resolve(t),h=p.sharedDepth(n);t=p.before(h+1),n=e.state.doc.resolve(n).after(h+1);let f=e.state.selection,m=aE(e,t,n),g=e.state.doc,v=g.slice(m.from,m.to);8===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime?(a=e.state.selection.to,o="end"):(a=e.state.selection.from,o="start"),e.input.lastKeyCode=null;let x=aR(v.content,m.doc.content,m.from,a,o);if(x&&e.input.domChangeCount++,(nD&&e.input.lastIOSEnter>Date.now()-225||nL)&&i.some(e=>1==e.nodeType&&!aI.test(e.nodeName))&&(!x||x.endA>=x.endB)&&e.someProp("handleKeyDown",t=>t(e,nf(13,"Enter")))){e.input.lastIOSEnter=0;return}if(!x)if(r&&f instanceof tH&&!f.empty&&f.$head.sameParent(f.$anchor)&&!e.composing&&!(m.sel&&m.sel.anchor!=m.sel.head))x={start:f.from,endA:f.to,endB:f.to};else{if(m.sel){let t=aT(e,e.state.doc,m.sel);if(t&&!t.eq(e.state.selection)){let n=e.state.tr.setSelection(t);d&&n.setMeta("composition",d),e.dispatch(n)}}return}e.state.selection.from<e.state.selection.to&&x.start==x.endB&&e.state.selection instanceof tH&&(x.start>e.state.selection.from&&x.start<=e.state.selection.from+2&&e.state.selection.from>=m.from?x.start=e.state.selection.from:x.endA<e.state.selection.to&&x.endA>=e.state.selection.to-2&&e.state.selection.to<=m.to&&(x.endB+=e.state.selection.to-x.endA,x.endA=e.state.selection.to)),nC&&nk<=11&&x.endB==x.start+1&&x.endA==x.start&&x.start>m.from&&"  "==m.doc.textBetween(x.start-m.from-1,x.start-m.from+1)&&(x.start--,x.endA--,x.endB--);let y=m.doc.resolveNoCache(x.start-m.from),b=m.doc.resolveNoCache(x.endB-m.from),w=g.resolve(x.start),j=y.sameParent(b)&&y.parent.inlineContent&&w.end()>=x.endA;if((nD&&e.input.lastIOSEnter>Date.now()-225&&(!j||i.some(e=>"DIV"==e.nodeName||"P"==e.nodeName))||!j&&y.pos<m.doc.content.size&&!y.sameParent(b)&&(s=tF.findFrom(m.doc.resolve(y.pos+1),1,!0))&&s.head==b.pos)&&e.someProp("handleKeyDown",t=>t(e,nf(13,"Enter")))){e.input.lastIOSEnter=0;return}if(e.state.selection.anchor>x.start&&aL(g,x.start,x.endA,y,b)&&e.someProp("handleKeyDown",t=>t(e,nf(8,"Backspace")))){nL&&nE&&e.domObserver.suppressSelectionUpdates();return}nE&&x.endB==x.start&&(e.input.lastChromeDelete=Date.now()),nL&&!j&&y.start()!=b.start()&&0==b.parentOffset&&y.depth==b.depth&&m.sel&&m.sel.anchor==m.sel.head&&m.sel.head==x.endA&&(x.endB-=2,b=m.doc.resolveNoCache(x.endB-m.from),setTimeout(()=>{e.someProp("handleKeyDown",function(t){return t(e,nf(13,"Enter"))})},20));let C=x.start,k=x.endA;if(j){if(y.pos==b.pos)nC&&nk<=11&&0==y.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>rR(e),20)),l=e.state.tr.delete(C,k),c=g.resolve(x.start).marksAcross(g.resolve(x.endA));else if(x.endA==x.endB&&(u=aA(y.parent.content.cut(y.parentOffset,b.parentOffset),w.parent.content.cut(w.parentOffset,x.endA-w.start()))))l=e.state.tr,"add"==u.type?l.addMark(C,k,u.mark):l.removeMark(C,k,u.mark);else if(y.parent.child(y.index()).isText&&y.index()==b.index()-!b.textOffset){let t=y.parent.textBetween(y.parentOffset,b.parentOffset);if(e.someProp("handleTextInput",n=>n(e,C,k,t)))return;l=e.state.tr.insertText(t,C,k)}}if(l||(l=e.state.tr.replace(C,k,m.doc.slice(x.start-m.from,x.endB-m.from))),m.sel){let t=aT(e,l.doc,m.sel);t&&!(nE&&e.composing&&t.empty&&(x.start!=x.endB||e.input.lastChromeDelete<Date.now()-100)&&(t.head==C||t.head==l.mapping.map(k)-1)||nC&&t.empty&&t.head==C)&&l.setSelection(t)}c&&l.ensureMarks(c),d&&l.setMeta("composition",d),e.dispatch(l.scrollIntoView())}function aT(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:rq(e,t.resolve(n.anchor),t.resolve(n.head))}function aA(e,t){let n=e.firstChild.marks,r=t.firstChild.marks,i=n,a=r,o,s,l;for(let e=0;e<r.length;e++)i=r[e].removeFromSet(i);for(let e=0;e<n.length;e++)a=n[e].removeFromSet(a);if(1==i.length&&0==a.length)s=i[0],o="add",l=e=>e.mark(s.addToSet(e.marks));else{if(0!=i.length||1!=a.length)return null;s=a[0],o="remove",l=e=>e.mark(s.removeFromSet(e.marks))}let c=[];for(let e=0;e<t.childCount;e++)c.push(l(t.child(e)));if(h.from(c).eq(e))return{mark:s,type:o}}function aL(e,t,n,r,i){if(n-t<=i.pos-r.pos||aP(r,!0,!1)<i.pos)return!1;let a=e.resolve(t);if(!r.parent.isTextblock){let e=a.nodeAfter;return null!=e&&n==t+e.nodeSize}if(a.parentOffset<a.parent.content.size||!a.parent.isTextblock)return!1;let o=e.resolve(aP(a,!0,!0));return!(!o.parent.isTextblock||o.pos>n||aP(o,!0,!1)<n)&&r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function aP(e,t,n){let r=e.depth,i=t?e.end():e.pos;for(;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,i++,t=!1;if(n){let t=e.node(r).maybeChild(e.indexAfter(r));for(;t&&!t.isLeaf;)t=t.firstChild,i++}return i}function aR(e,t,n,r,i){let a=e.findDiffStart(t,n);if(null==a)return null;let{a:o,b:s}=e.findDiffEnd(t,n+e.size,n+t.size);if("end"==i){let e=Math.max(0,a-Math.min(o,s));r-=o+e-a}if(o<a&&e.size<t.size){let e=r<=a&&r>=o?a-r:0;(a-=e)&&a<t.size&&a_(t.textBetween(a-1,a+1))&&(a+=e?1:-1),s=a+(s-o),o=a}else if(s<a){let t=r<=a&&r>=s?a-r:0;(a-=t)&&a<e.size&&a_(e.textBetween(a-1,a+1))&&(a+=t?1:-1),o=a+(o-s),s=a}return{start:a,endA:o,endB:s}}function a_(e){if(2!=e.length)return!1;let t=e.charCodeAt(0),n=e.charCodeAt(1);return t>=56320&&t<=57343&&n>=55296&&n<=56319}class aO{get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;for(let t in this._props={},e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&iI(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(aq),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let e in this._props)t[e]=this._props[e];for(let n in t.state=this.state,e)t[n]=e[n];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var n;let r=this.state,i=!1,a=!1;e.storedMarks&&this.composing&&(iX(this),a=!0),this.state=e;let o=r.plugins!=e.plugins||this._props.plugins!=t.plugins;if(o||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let e=aH(this);aU(e,this.nodeViews)&&(this.nodeViews=e,i=!0)}(o||t.handleDOMEvents!=this._props.handleDOMEvents)&&iI(this),this.editable=aB(this),aV(this);let s=ag(this),l=aF(this),c=r.plugins==e.plugins||r.doc.eq(e.doc)?e.scrollToSelection>r.scrollToSelection?"to selection":"preserve":"reset",u=i||!this.docView.matchesNode(e.doc,l,s);(u||!e.selection.eq(r.selection))&&(a=!0);let d="preserve"==c&&a&&null==this.dom.style.overflowAnchor&&nB(this);if(a){this.domObserver.stop();let t=u&&(nC||nE)&&!this.composing&&!r.selection.empty&&!e.selection.empty&&az(r.selection,e.selection);if(u){let n=nE?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=i$(this)),(i||!this.docView.update(e.doc,l,s,this))&&(this.docView.updateOuterDeco(l),this.docView.destroy(),this.docView=rh(e.doc,l,s,this.dom,this)),n&&!this.trackWrites&&(t=!0)}t||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&rG(this))?rR(this,t):(rH(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(r),(null==(n=this.dragging)?void 0:n.node)&&!r.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,r),"reset"==c?this.dom.scrollTop=0:"to selection"==c?this.scrollToSelection():d&&nH(d)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(e&&this.dom.contains(1==e.nodeType?e:e.parentNode))if(this.someProp("handleScrollToSelection",e=>e(this)));else if(this.state.selection instanceof tq){let t=this.docView.domAfterPos(this.state.selection.from);1==t.nodeType&&nV(this,t.getBoundingClientRect(),e)}else nV(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(e&&e.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let t=0;t<this.pluginViews.length;t++){let n=this.pluginViews[t];n.update&&n.update(this,e)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let e=0;e<this.directPlugins.length;e++){let t=this.directPlugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}for(let e=0;e<this.state.plugins.length;e++){let t=this.state.plugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}}}updateDraggedNode(e,t){let n=e.node,r=-1;if(this.state.doc.nodeAt(n.from)==n.node)r=n.from;else{let e=n.from+(this.state.doc.content.size-t.doc.content.size);(e>0&&this.state.doc.nodeAt(e))==n.node&&(r=e)}this.dragging=new i3(e.slice,e.move,r<0?void 0:tq.create(this.state.doc,r))}someProp(e,t){let n=this._props&&this._props[e],r;if(null!=n&&(r=t?t(n):n))return r;for(let n=0;n<this.directPlugins.length;n++){let i=this.directPlugins[n].props[e];if(null!=i&&(r=t?t(i):i))return r}let i=this.state.plugins;if(i)for(let n=0;n<i.length;n++){let a=i[n].props[e];if(null!=a&&(r=t?t(a):a))return r}}hasFocus(){if(nC){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if("false"==e.contentEditable)return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&nW(this.dom),rR(this),this.domObserver.start()}get root(){let e=this._root;if(null==e){for(let e=this.dom.parentNode;e;e=e.parentNode)if(9==e.nodeType||11==e.nodeType&&e.host)return e.getSelection||(Object.getPrototypeOf(e).getSelection=()=>e.ownerDocument.getSelection()),this._root=e}return e||document}updateRoot(){this._root=null}posAtCoords(e){return nQ(this,e)}coordsAtPos(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return n5(this,e,t)}domAtPos(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=this.docView.posFromDOM(e,t,n);if(null==r)throw RangeError("DOM position not inside the editor");return r}endOfTextblock(e,t){return rr(this,t||this.state,e)}pasteHTML(e,t){return i5(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return i5(this,e,null,!0,t||new ClipboardEvent("paste"))}destroy(){this.docView&&(iM(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],ag(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,ni())}get isDestroyed(){return null==this.docView}dispatchEvent(e){return iA(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?nI&&11===this.root.nodeType&&nm(this.dom.ownerDocument)==this.dom&&aS(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new iS,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(aq),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):"function"==typeof e?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=aB(this),aV(this),this.nodeViews=aH(this),this.docView=rh(this.state.doc,aF(this),ag(this),this.dom,this),this.domObserver=new ab(this,(e,t,n,r)=>aD(this,e,t,n,r)),this.domObserver.start(),iN(this),this.updatePluginViews()}}function aF(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",n=>{if("function"==typeof n&&(n=n(e.state)),n)for(let e in n)"class"==e?t.class+=" "+n[e]:"style"==e?t.style=(t.style?t.style+";":"")+n[e]:t[e]||"contenteditable"==e||"nodeName"==e||(t[e]=String(n[e]))}),t.translate||(t.translate="no"),[at.node(0,e.state.doc.content.size,t)]}function aV(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:at.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function aB(e){return!e.someProp("editable",t=>!1===t(e.state))}function az(e,t){let n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}function aH(e){let t=Object.create(null);function n(e){for(let n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function aU(e,t){let n=0,r=0;for(let r in e){if(e[r]!=t[r])return!0;n++}for(let e in t)r++;return n!=r}function aq(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw RangeError("Plugins passed directly to the view must not have a state component")}e.s(["Decoration",()=>at,"DecorationSet",()=>ai,"EditorView",()=>aO],313084);for(var aW={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},aZ={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},aG="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),aK="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),aX=0;aX<10;aX++)aW[48+aX]=aW[96+aX]=String(aX);for(var aX=1;aX<=24;aX++)aW[aX+111]="F"+aX;for(var aX=65;aX<=90;aX++)aW[aX]=String.fromCharCode(aX+32),aZ[aX]=String.fromCharCode(aX);for(var a$ in aW)aZ.hasOwnProperty(a$)||(aZ[a$]=aW[a$]);function aY(e){var t=!(aG&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||aK&&e.shiftKey&&e.key&&1==e.key.length||"Unidentified"==e.key)&&e.key||(e.shiftKey?aZ:aW)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}let aJ="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function aQ(e){let t,n,r,i,a=e.split(/-(?!$)/),o=a[a.length-1];"Space"==o&&(o=" ");for(let e=0;e<a.length-1;e++){let o=a[e];if(/^(cmd|meta|m)$/i.test(o))i=!0;else if(/^a(lt)?$/i.test(o))t=!0;else if(/^(c|ctrl|control)$/i.test(o))n=!0;else if(/^s(hift)?$/i.test(o))r=!0;else if(/^mod$/i.test(o))aJ?i=!0:n=!0;else throw Error("Unrecognized modifier name: "+o)}return t&&(o="Alt-"+o),n&&(o="Ctrl-"+o),i&&(o="Meta-"+o),r&&(o="Shift-"+o),o}function a0(e){let t=Object.create(null);for(let n in e)t[aQ(n)]=e[n];return t}function a1(e,t){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2];return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function a2(e){return new t7({props:{handleKeyDown:a5(e)}})}function a5(e){let t=a0(e);return function(e,n){let r=aY(n),i,a=t[a1(r,n)];if(a&&a(e.state,e.dispatch,e))return!0;if(1==r.length&&" "!=r){if(n.shiftKey){let i=t[a1(r,n,!1)];if(i&&i(e.state,e.dispatch,e))return!0}if((n.shiftKey||n.altKey||n.metaKey||r.charCodeAt(0)>127)&&(i=aW[n.keyCode])&&i!=r){let r=t[a1(i,n)];if(r&&r(e.state,e.dispatch,e))return!0}}return!1}}e.s(["keydownHandler",()=>a5,"keymap",()=>a2],124251);let a4=(e,t)=>!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function a3(e,t){let{$cursor:n}=e.selection;return n&&(t?t.endOfTextblock("backward",e):!(n.parentOffset>0))?n:null}let a7=(e,t,n)=>{let r=a3(e,n);if(!r)return!1;let i=on(r);if(!i){let n=r.blockRange(),i=n&&e9(n);return null!=i&&(t&&t(e.tr.lift(n,i).scrollIntoView()),!0)}let a=i.nodeBefore;if(ob(e,i,t,-1))return!0;if(0==r.parent.content.size&&(oe(a,"end")||tq.isSelectable(a)))for(let n=r.depth;;n--){let o=tx(e.doc,r.before(n),r.after(n),y.empty);if(o&&o.slice.size<o.to-o.from){if(t){let n=e.tr.step(o);n.setSelection(oe(a,"end")?tF.findFrom(n.doc.resolve(n.mapping.map(i.pos,-1)),-1):tq.create(n.doc,i.pos-a.nodeSize)),t(n.scrollIntoView())}return!0}if(1==n||r.node(n-1).childCount>1)break}return!!a.isAtom&&i.depth==r.depth-1&&(t&&t(e.tr.delete(i.pos-a.nodeSize,i.pos).scrollIntoView()),!0)},a9=(e,t,n)=>{let r=a3(e,n);if(!r)return!1;let i=on(r);return!!i&&a8(e,i,t)},a6=(e,t,n)=>{let r=or(e,n);if(!r)return!1;let i=oo(r);return!!i&&a8(e,i,t)};function a8(e,t,n){let r=t.nodeBefore,i=t.pos-1;for(;!r.isTextblock;i--){if(r.type.spec.isolating)return!1;let e=r.lastChild;if(!e)return!1;r=e}let a=t.nodeAfter,o=t.pos+1;for(;!a.isTextblock;o++){if(a.type.spec.isolating)return!1;let e=a.firstChild;if(!e)return!1;a=e}let s=tx(e.doc,i,o,y.empty);if(!s||s.from!=i||s instanceof e0&&s.slice.size>=o-i)return!1;if(n){let t=e.tr.step(s);t.setSelection(tH.create(t.doc,i)),n(t.scrollIntoView())}return!0}function oe(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(let r=e;r;r="start"==t?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&1!=r.childCount)break}return!1}let ot=(e,t,n)=>{let{$head:r,empty:i}=e.selection,a=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;a=on(r)}let o=a&&a.nodeBefore;return!!o&&!!tq.isSelectable(o)&&(t&&t(e.tr.setSelection(tq.create(e.doc,a.pos-o.nodeSize)).scrollIntoView()),!0)};function on(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function or(e,t){let{$cursor:n}=e.selection;return n&&(t?t.endOfTextblock("forward",e):!(n.parentOffset<n.parent.content.size))?n:null}let oi=(e,t,n)=>{let r=or(e,n);if(!r)return!1;let i=oo(r);if(!i)return!1;let a=i.nodeAfter;if(ob(e,i,t,1))return!0;if(0==r.parent.content.size&&(oe(a,"start")||tq.isSelectable(a))){let n=tx(e.doc,r.before(),r.after(),y.empty);if(n&&n.slice.size<n.to-n.from){if(t){let r=e.tr.step(n);r.setSelection(oe(a,"start")?tF.findFrom(r.doc.resolve(r.mapping.map(i.pos)),1):tq.create(r.doc,r.mapping.map(i.pos))),t(r.scrollIntoView())}return!0}}return!!a.isAtom&&i.depth==r.depth-1&&(t&&t(e.tr.delete(i.pos,i.pos+a.nodeSize).scrollIntoView()),!0)},oa=(e,t,n)=>{let{$head:r,empty:i}=e.selection,a=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;a=oo(r)}let o=a&&a.nodeAfter;return!!o&&!!tq.isSelectable(o)&&(t&&t(e.tr.setSelection(tq.create(e.doc,a.pos)).scrollIntoView()),!0)};function oo(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}let ol=(e,t)=>{let n=e.selection,r=n instanceof tq,i;if(r){if(n.node.isTextblock||!td(e.doc,n.from))return!1;i=n.from}else if(null==(i=tf(e.doc,n.from,-1)))return!1;if(t){let n=e.tr.join(i);r&&n.setSelection(tq.create(n.doc,i-e.doc.resolve(i).nodeBefore.nodeSize)),t(n.scrollIntoView())}return!0},oc=(e,t)=>{let n=e.selection,r;if(n instanceof tq){if(n.node.isTextblock||!td(e.doc,n.to))return!1;r=n.to}else if(null==(r=tf(e.doc,n.to,1)))return!1;return t&&t(e.tr.join(r).scrollIntoView()),!0},ou=(e,t)=>{let{$from:n,$to:r}=e.selection,i=n.blockRange(r),a=i&&e9(i);return null!=a&&(t&&t(e.tr.lift(i,a).scrollIntoView()),!0)},od=(e,t)=>{let{$head:n,$anchor:r}=e.selection;return!!n.parent.type.spec.code&&!!n.sameParent(r)&&(t&&t(e.tr.insertText("\n").scrollIntoView()),!0)};function op(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}let oh=(e,t)=>{let{$head:n,$anchor:r}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),a=n.indexAfter(-1),o=op(i.contentMatchAt(a));if(!o||!i.canReplaceWith(a,a,o))return!1;if(t){let r=n.after(),i=e.tr.replaceWith(r,r,o.createAndFill());i.setSelection(tF.near(i.doc.resolve(r),1)),t(i.scrollIntoView())}return!0},of=(e,t)=>{let n=e.selection,{$from:r,$to:i}=n;if(n instanceof tZ||r.parent.inlineContent||i.parent.inlineContent)return!1;let a=op(i.parent.contentMatchAt(i.indexAfter()));if(!a||!a.isTextblock)return!1;if(t){let n=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,o=e.tr.insert(n,a.createAndFill());o.setSelection(tH.create(o.doc,n+1)),t(o.scrollIntoView())}return!0},om=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let r=n.before();if(tc(e.doc,r))return t&&t(e.tr.split(r).scrollIntoView()),!0}let r=n.blockRange(),i=r&&e9(r);return null!=i&&(t&&t(e.tr.lift(r,i).scrollIntoView()),!0)},og=function(e){return(e,t)=>{let{$from:n,$to:r}=e.selection;if(e.selection instanceof tq&&e.selection.node.isBlock)return!!n.parentOffset&&!!tc(e.doc,n.pos)&&(t&&t(e.tr.split(n.pos).scrollIntoView()),!0);if(!n.depth)return!1;let i=[],a,o,s=!1,l=!1;for(let e=n.depth;;e--){if(n.node(e).isBlock){s=n.end(e)==n.pos+(n.depth-e),l=n.start(e)==n.pos-(n.depth-e),o=op(n.node(e-1).contentMatchAt(n.indexAfter(e-1)));let t=void 0;i.unshift(t||(s&&o?{type:o}:null)),a=e;break}if(1==e)return!1;i.unshift(null)}let c=e.tr;(e.selection instanceof tH||e.selection instanceof tZ)&&c.deleteSelection();let u=c.mapping.map(n.pos),d=tc(c.doc,u,i.length,i);if(d||(i[0]=o?{type:o}:null,d=tc(c.doc,u,i.length,i)),c.split(u,i.length,i),!s&&l&&n.node(a).type!=o){let e=c.mapping.map(n.before(a)),t=c.doc.resolve(e);o&&n.node(a-1).canReplaceWith(t.index(),t.index()+1,o)&&c.setNodeMarkup(c.mapping.map(n.before(a)),o)}return t&&t(c.scrollIntoView()),!0}}(),ov=(e,t)=>{let{$from:n,to:r}=e.selection,i,a=n.sharedDepth(r);return 0!=a&&(i=n.before(a),t&&t(e.tr.setSelection(tq.create(e.doc,i))),!0)},ox=(e,t)=>(t&&t(e.tr.setSelection(new tZ(e.doc))),!0);function oy(e,t,n){let r=t.nodeBefore,i=t.nodeAfter,a=t.index();return!!r&&!!i&&!!r.type.compatibleContent(i.type)&&(!r.content.size&&t.parent.canReplace(a-1,a)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),!0):!!t.parent.canReplace(a,a+1)&&!!(i.isTextblock||td(e.doc,t.pos))&&(n&&n(e.tr.join(t.pos).scrollIntoView()),!0))}function ob(e,t,n,r){let i=t.nodeBefore,a=t.nodeAfter,o,s,l=i.type.spec.isolating||a.type.spec.isolating;if(!l&&oy(e,t,n))return!0;let c=!l&&t.parent.canReplace(t.index(),t.index()+1);if(c&&(o=(s=i.contentMatchAt(i.childCount)).findWrapping(a.type))&&s.matchType(o[0]||a.type).validEnd){if(n){let r=t.pos+a.nodeSize,s=h.empty;for(let e=o.length-1;e>=0;e--)s=h.from(o[e].create(null,s));s=h.from(i.copy(s));let l=e.tr.step(new e1(t.pos-1,r,t.pos,r,new y(s,1,0),o.length,!0)),c=l.doc.resolve(r+2*o.length);c.nodeAfter&&c.nodeAfter.type==i.type&&td(l.doc,c.pos)&&l.join(c.pos),n(l.scrollIntoView())}return!0}let u=a.type.spec.isolating||r>0&&l?null:tF.findFrom(t,1),d=u&&u.$from.blockRange(u.$to),p=d&&e9(d);if(null!=p&&p>=t.depth)return n&&n(e.tr.lift(d,p).scrollIntoView()),!0;if(c&&oe(a,"start",!0)&&oe(i,"end")){let r=i,o=[];for(;o.push(r),!r.isTextblock;)r=r.lastChild;let s=a,l=1;for(;!s.isTextblock;s=s.firstChild)l++;if(r.canReplace(r.childCount,r.childCount,s.content)){if(n){let r=h.empty;for(let e=o.length-1;e>=0;e--)r=h.from(o[e].copy(r));n(e.tr.step(new e1(t.pos-o.length,t.pos+a.nodeSize,t.pos+l,t.pos+a.nodeSize-l,new y(r,o.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function ow(e){return function(t,n){let r=t.selection,i=e<0?r.$from:r.$to,a=i.depth;for(;i.node(a).isInline;){if(!a)return!1;a--}return!!i.node(a).isTextblock&&(n&&n(t.tr.setSelection(tH.create(t.doc,e<0?i.start(a):i.end(a)))),!0)}}let oj=ow(-1),oC=ow(1);function ok(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n,r){let{$from:i,$to:a}=n.selection,o=i.blockRange(a),s=o&&e8(o,e,t);return!!s&&(r&&r(n.tr.wrap(o,s).scrollIntoView()),!0)}}function oS(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n,r){let i=!1;for(let r=0;r<n.selection.ranges.length&&!i;r++){let{$from:{pos:a},$to:{pos:o}}=n.selection.ranges[r];n.doc.nodesBetween(a,o,(r,a)=>{if(i)return!1;if(!(!r.isTextblock||r.hasMarkup(e,t)))if(r.type==e)i=!0;else{let t=n.doc.resolve(a),r=t.index();i=t.parent.canReplaceWith(r,r+1,e)}})}if(!i)return!1;if(r){let i=n.tr;for(let r=0;r<n.selection.ranges.length;r++){let{$from:{pos:a},$to:{pos:o}}=n.selection.ranges[r];i.setBlockType(a,o,e,t)}r(i.scrollIntoView())}return!0}}function oN(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}let oE=oN(a4,a7,ot),oM=oN(a4,oi,oa),oI={Enter:oN(od,of,om,og),"Mod-Enter":oh,Backspace:oE,"Mod-Backspace":oE,"Shift-Backspace":oE,Delete:oM,"Mod-Delete":oM,"Mod-a":ox},oD={"Ctrl-h":oI.Backspace,"Alt-Backspace":oI["Mod-Backspace"],"Ctrl-d":oI.Delete,"Ctrl-Alt-Backspace":oI["Mod-Delete"],"Alt-Delete":oI["Mod-Delete"],"Alt-d":oI["Mod-Delete"],"Ctrl-a":oj,"Ctrl-e":oC};for(let e in oI)oD[e]=oI[e];function oT(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n,r){let{$from:i,$to:a}=n.selection,o=i.blockRange(a);if(!o)return!1;let s=r?n.tr:null;return!!oA(s,o,e,t)&&(r&&r(s.scrollIntoView()),!0)}}function oA(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=!1,a=t,o=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(n)&&0==t.startIndex){if(0==t.$from.index(t.depth-1))return!1;let e=o.resolve(t.start-2);a=new _(e,e,t.depth),t.endIndex<t.parent.childCount&&(t=new _(t.$from,o.resolve(t.$to.end(t.depth)),t.depth)),i=!0}let s=e8(a,n,r,t);return!!s&&(e&&oL(e,t,s,i,n),!0)}function oL(e,t,n,r,i){let a=h.empty;for(let e=n.length-1;e>=0;e--)a=h.from(n[e].type.create(n[e].attrs,a));e.step(new e1(t.start-2*!!r,t.end,t.start,t.end,new y(a,0,0),n.length,!0));let o=0;for(let e=0;e<n.length;e++)n[e].type==i&&(o=e+1);let s=n.length-o,l=t.start+n.length-2*!!r,c=t.parent;for(let n=t.startIndex,r=t.endIndex,i=!0;n<r;n++,i=!1)!i&&tc(e.doc,l,s)&&(e.split(l,s),l+=2*s),l+=c.child(n).nodeSize;return e}function oP(e){return function(t,n){let{$from:r,$to:i}=t.selection,a=r.blockRange(i,t=>t.childCount>0&&t.firstChild.type==e);return!!a&&(!n||(r.node(a.depth-1).type==e?oR(t,n,e,a):o_(t,n,a)))}}function oR(e,t,n,r){let i=e.tr,a=r.end,o=r.$to.end(r.depth);a<o&&(i.step(new e1(a-1,o,a,o,new y(h.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new _(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));let s=e9(r);if(null==s)return!1;i.lift(r,s);let l=i.mapping.map(a,-1)-1;return td(i.doc,l)&&i.join(l),t(i.scrollIntoView()),!0}function o_(e,t,n){let r=e.tr,i=n.parent;for(let e=n.end,t=n.endIndex-1,a=n.startIndex;t>a;t--)e-=i.child(t).nodeSize,r.delete(e-1,e+1);let a=r.doc.resolve(n.start),o=a.nodeAfter;if(r.mapping.map(n.end)!=n.start+a.nodeAfter.nodeSize)return!1;let s=0==n.startIndex,l=n.endIndex==i.childCount,c=a.node(-1),u=a.index(-1);if(!c.canReplace(u+ +!s,u+1,o.content.append(l?h.empty:h.from(i))))return!1;let d=a.pos,p=d+o.nodeSize;return r.step(new e1(d-!!s,p+ +!!l,d+1,p-1,new y((s?h.empty:h.from(i.copy(h.empty))).append(l?h.empty:h.from(i.copy(h.empty))),+!s,+!l),+!s)),t(r.scrollIntoView()),!0}function oO(e){return function(t,n){let{$from:r,$to:i}=t.selection,a=r.blockRange(i,t=>t.childCount>0&&t.firstChild.type==e);if(!a)return!1;let o=a.startIndex;if(0==o)return!1;let s=a.parent,l=s.child(o-1);if(l.type!=e)return!1;if(n){let r=l.lastChild&&l.lastChild.type==s.type,i=h.from(r?e.create():null),o=new y(h.from(e.create(null,h.from(s.type.create(null,i)))),r?3:1,0),c=a.start,u=a.end;n(t.tr.step(new e1(c-(r?3:1),u,c,u,o,1,!0)).scrollIntoView())}return!0}}function oF(e){let{state:t,transaction:n}=e,{selection:r}=n,{doc:i}=n,{storedMarks:a}=n;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return a},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,a=n.storedMarks,n}}}"undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):"undefined"!=typeof os&&os.platform&&os.platform();class oV{get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){let{rawCommands:e,editor:t,state:n}=this,{view:r}=t,{tr:i}=n,a=this.buildProps(i);return Object.fromEntries(Object.entries(e).map(e=>{let[t,n]=e;var o=this;return[t,function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];let l=n(...t)(a);return i.getMeta("preventDispatch")||o.hasCustomState||r.dispatch(i),l}]}))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],{rawCommands:n,editor:r,state:i}=this,{view:a}=r,o=[],s=!!e,l=e||i.tr,c=()=>(s||!t||l.getMeta("preventDispatch")||this.hasCustomState||a.dispatch(l),o.every(e=>!0===e)),u={...Object.fromEntries(Object.entries(n).map(e=>{let[n,r]=e;var i=this;return[n,function(){for(var e=arguments.length,n=Array(e),a=0;a<e;a++)n[a]=arguments[a];let s=i.buildProps(l,t),c=r(...n)(s);return o.push(c),u}]})),run:c};return u}createCan(e){let{rawCommands:t,state:n}=this,r=!1,i=e||n.tr,a=this.buildProps(i,r);return{...Object.fromEntries(Object.entries(t).map(e=>{let[t,n]=e;return[t,function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return n(...t)({...a,dispatch:void 0})}]})),chain:()=>this.createChain(i,r)}}buildProps(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],{rawCommands:n,editor:r,state:i}=this,{view:a}=r,o={tr:e,editor:r,view:a,state:oF({state:i,transaction:e}),dispatch:t?()=>void 0:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(n).map(e=>{let[t,n]=e;return[t,function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return n(...t)(o)}]}))}};return o}constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}}class oB{on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let i=this.callbacks[e];return i&&i.forEach(e=>e.apply(this,n)),this}off(e,t){let n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter(e=>e!==t):delete this.callbacks[e]),this}once(e,t){var n=this;let r=function(){for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];n.off(e,r),t.apply(n,a)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}constructor(){this.callbacks={}}}function oz(e,t,n){return void 0===e.config[t]&&e.parent?oz(e.parent,t,n):"function"==typeof e.config[t]?e.config[t].bind({...n,parent:e.parent?oz(e.parent,t,n):null}):e.config[t]}function oH(e){let t=e.filter(e=>"extension"===e.type);return{baseExtensions:t,nodeExtensions:e.filter(e=>"node"===e.type),markExtensions:e.filter(e=>"mark"===e.type)}}function oU(e){let t=[],{nodeExtensions:n,markExtensions:r}=oH(e),i=[...n,...r],a={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(e=>{let n={name:e.name,options:e.options,storage:e.storage,extensions:i},r=oz(e,"addGlobalAttributes",n);r&&r().forEach(e=>{e.types.forEach(n=>{Object.entries(e.attributes).forEach(e=>{let[r,i]=e;t.push({type:n,name:r,attribute:{...a,...i}})})})})}),i.forEach(e=>{let n={name:e.name,options:e.options,storage:e.storage},r=oz(e,"addAttributes",n);r&&Object.entries(r()).forEach(n=>{let[r,i]=n,o={...a,...i};"function"==typeof(null==o?void 0:o.default)&&(o.default=o.default()),(null==o?void 0:o.isRequired)&&(null==o?void 0:o.default)===void 0&&delete o.default,t.push({type:e.name,name:r,attribute:o})})}),t}function oq(e,t){if("string"==typeof e){if(!t.nodes[e])throw Error("There is no node type named '".concat(e,"'. Maybe you forgot to add the extension?"));return t.nodes[e]}return e}function oW(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(e=>!!e).reduce((e,t)=>{let n={...e};return Object.entries(t).forEach(e=>{let[t,r]=e;if(!n[t]){n[t]=r;return}if("class"===t){let e=r?String(r).split(" "):[],i=n[t]?n[t].split(" "):[],a=e.filter(e=>!i.includes(e));n[t]=[...i,...a].join(" ")}else if("style"===t){let e=r?r.split(";").map(e=>e.trim()).filter(Boolean):[],i=n[t]?n[t].split(";").map(e=>e.trim()).filter(Boolean):[],a=new Map;i.forEach(e=>{let[t,n]=e.split(":").map(e=>e.trim());a.set(t,n)}),e.forEach(e=>{let[t,n]=e.split(":").map(e=>e.trim());a.set(t,n)}),n[t]=Array.from(a.entries()).map(e=>{let[t,n]=e;return"".concat(t,": ").concat(n)}).join("; ")}else n[t]=r}),n},{})}function oZ(e,t){return t.filter(t=>t.type===e.type.name).filter(e=>e.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(e.attrs)||{}:{[t.name]:e.attrs[t.name]}).reduce((e,t)=>oW(e,t),{})}function oG(e){return"function"==typeof e}function oK(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return oG(e)?t?e.bind(t)(...r):e(...r):e}function oX(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 0===Object.keys(e).length&&e.constructor===Object}function o$(e){return"string"!=typeof e?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):"true"===e||"false"!==e&&e}function oY(e,t){return"style"in e?e:{...e,getAttrs:n=>{let r=e.getAttrs?e.getAttrs(n):e.attrs;if(!1===r)return!1;let i=t.reduce((e,t)=>{let r=t.attribute.parseHTML?t.attribute.parseHTML(n):o$(n.getAttribute(t.name));return null==r?e:{...e,[t.name]:r}},{});return{...r,...i}}}}function oJ(e){return Object.fromEntries(Object.entries(e).filter(e=>{let[t,n]=e;return!("attrs"===t&&oX(n))&&null!=n}))}function oQ(e,t){var n;let r=oU(e),{nodeExtensions:i,markExtensions:a}=oH(e),o=null==(n=i.find(e=>oz(e,"topNode")))?void 0:n.name;return new ec({topNode:o,nodes:Object.fromEntries(i.map(n=>{let i=r.filter(e=>e.type===n.name),a={name:n.name,options:n.options,storage:n.storage,editor:t},o=oJ({...e.reduce((e,t)=>{let r=oz(t,"extendNodeSchema",a);return{...e,...r?r(n):{}}},{}),content:oK(oz(n,"content",a)),marks:oK(oz(n,"marks",a)),group:oK(oz(n,"group",a)),inline:oK(oz(n,"inline",a)),atom:oK(oz(n,"atom",a)),selectable:oK(oz(n,"selectable",a)),draggable:oK(oz(n,"draggable",a)),code:oK(oz(n,"code",a)),whitespace:oK(oz(n,"whitespace",a)),linebreakReplacement:oK(oz(n,"linebreakReplacement",a)),defining:oK(oz(n,"defining",a)),isolating:oK(oz(n,"isolating",a)),attrs:Object.fromEntries(i.map(e=>{var t;return[e.name,{default:null==(t=null==e?void 0:e.attribute)?void 0:t.default}]}))}),s=oK(oz(n,"parseHTML",a));s&&(o.parseDOM=s.map(e=>oY(e,i)));let l=oz(n,"renderHTML",a);l&&(o.toDOM=e=>l({node:e,HTMLAttributes:oZ(e,i)}));let c=oz(n,"renderText",a);return c&&(o.toText=c),[n.name,o]})),marks:Object.fromEntries(a.map(n=>{let i=r.filter(e=>e.type===n.name),a={name:n.name,options:n.options,storage:n.storage,editor:t},o=oJ({...e.reduce((e,t)=>{let r=oz(t,"extendMarkSchema",a);return{...e,...r?r(n):{}}},{}),inclusive:oK(oz(n,"inclusive",a)),excludes:oK(oz(n,"excludes",a)),group:oK(oz(n,"group",a)),spanning:oK(oz(n,"spanning",a)),code:oK(oz(n,"code",a)),attrs:Object.fromEntries(i.map(e=>{var t;return[e.name,{default:null==(t=null==e?void 0:e.attribute)?void 0:t.default}]}))}),s=oK(oz(n,"parseHTML",a));s&&(o.parseDOM=s.map(e=>oY(e,i)));let l=oz(n,"renderHTML",a);return l&&(o.toDOM=e=>l({mark:e,HTMLAttributes:oZ(e,i)})),[n.name,o]}))})}function o0(e,t){return t.nodes[e]||t.marks[e]||null}function o1(e,t){return Array.isArray(t)?t.some(t=>("string"==typeof t?t:t.name)===e.name):t}function o2(e,t){let n=eE.fromSchema(t).serializeFragment(e),r=document.implementation.createHTMLDocument().createElement("div");return r.appendChild(n),r.innerHTML}let o5=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n="",r=e.parentOffset;return e.parent.nodesBetween(Math.max(0,r-t),r,(e,t,i,a)=>{var o,s;let l=(null==(s=(o=e.type.spec).toText)?void 0:s.call(o,{node:e,pos:t,parent:i,index:a}))||e.textContent||"%leaf%";n+=e.isAtom&&!e.isText?l:l.slice(0,Math.max(0,r-t))}),n};function o4(e){return"[object RegExp]"===Object.prototype.toString.call(e)}class o3{constructor(e){this.find=e.find,this.handler=e.handler}}let o7=(e,t)=>{if(o4(t))return t.exec(e);let n=t(e);if(!n)return null;let r=[n.text];return r.index=n.index,r.input=e,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function o9(e){var t;let{editor:n,from:r,to:i,text:a,rules:o,plugin:s}=e,{view:l}=n;if(l.composing)return!1;let c=l.state.doc.resolve(r);if(c.parent.type.spec.code||(null==(t=c.nodeBefore||c.nodeAfter)?void 0:t.marks.find(e=>e.type.spec.code)))return!1;let u=!1,d=o5(c)+a;return o.forEach(e=>{if(u)return;let t=o7(d,e.find);if(!t)return;let o=l.state.tr,c=oF({state:l.state,transaction:o}),p={from:r-(t[0].length-a.length),to:i},{commands:h,chain:f,can:m}=new oV({editor:n,state:c});null!==e.handler({state:c,range:p,match:t,commands:h,chain:f,can:m})&&o.steps.length&&(o.setMeta(s,{transform:o,from:r,to:i,text:a}),l.dispatch(o),u=!0)}),u}function o6(e){let{editor:t,rules:n}=e,r=new t7({state:{init:()=>null,apply(e,i,a){let o=e.getMeta(r);if(o)return o;let s=e.getMeta("applyInputRules");return s&&setTimeout(()=>{let{text:e}=s;"string"==typeof e||(e=o2(h.from(e),a.schema));let{from:i}=s,o=i+e.length;o9({editor:t,from:i,to:o,text:e,rules:n,plugin:r})}),e.selectionSet||e.docChanged?null:i}},props:{handleTextInput:(e,i,a,o)=>o9({editor:t,from:i,to:a,text:o,rules:n,plugin:r}),handleDOMEvents:{compositionend:e=>(setTimeout(()=>{let{$cursor:i}=e.state.selection;i&&o9({editor:t,from:i.pos,to:i.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(e,i){if("Enter"!==i.key)return!1;let{$cursor:a}=e.state.selection;return!!a&&o9({editor:t,from:a.pos,to:a.pos,text:"\n",rules:n,plugin:r})}},isInputRules:!0});return r}function o8(e){return Object.prototype.toString.call(e).slice(8,-1)}function se(e){return"Object"===o8(e)&&e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function st(e,t){let n={...e};return se(e)&&se(t)&&Object.keys(t).forEach(r=>{se(t[r])&&se(e[r])?n[r]=st(e[r],t[r]):n[r]=t[r]}),n}class sn{static create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new sn(e)}configure(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.extend({...this.config,addOptions:()=>st(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new sn(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(t.name,'".')),t.options=oK(oz(t,"addOptions",{name:t.name})),t.storage=oK(oz(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit(e){let{editor:t,mark:n}=e,{tr:r}=t.state,i=t.state.selection.$from;if(i.pos===i.end()){let e=i.marks();if(!e.find(e=>(null==e?void 0:e.type.name)===n.name))return!1;let a=e.find(e=>(null==e?void 0:e.type.name)===n.name);return a&&r.removeStoredMark(a),r.insertText(" ",i.pos),t.view.dispatch(r),!0}return!1}constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(this.name,'".')),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=oK(oz(this,"addOptions",{name:this.name}))),this.storage=oK(oz(this,"addStorage",{name:this.name,options:this.options}))||{}}}function sr(e){return"number"==typeof e}class si{constructor(e){this.find=e.find,this.handler=e.handler}}let sa=(e,t,n)=>{if(o4(t))return[...e.matchAll(t)];let r=t(e,n);return r?r.map(t=>{let n=[t.text];return n.index=t.index,n.input=e,n.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),n.push(t.replaceWith)),n}):[]};function so(e){let{editor:t,state:n,from:r,to:i,rule:a,pasteEvent:o,dropEvent:s}=e,{commands:l,chain:c,can:u}=new oV({editor:t,state:n}),d=[];return n.doc.nodesBetween(r,i,(e,t)=>{if(!e.isTextblock||e.type.spec.code)return;let p=Math.max(r,t),h=Math.min(i,t+e.content.size);sa(e.textBetween(p-t,h-t,void 0,"￼"),a.find,o).forEach(e=>{if(void 0===e.index)return;let t=p+e.index+1,r=t+e[0].length,i={from:n.tr.mapping.map(t),to:n.tr.mapping.map(r)},h=a.handler({state:n,range:i,match:e,commands:l,chain:c,can:u,pasteEvent:o,dropEvent:s});d.push(h)})}),d.every(e=>null!==e)}let ss=null,sl=e=>{var t;let n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return null==(t=n.clipboardData)||t.setData("text/html",e),n};function sc(e){let t,{editor:n,rules:r}=e,i=null,a=!1,o=!1,s="undefined"!=typeof ClipboardEvent?new ClipboardEvent("paste"):null;try{t="undefined"!=typeof DragEvent?new DragEvent("drop"):null}catch(e){t=null}let l=e=>{let{state:r,from:i,to:a,rule:o,pasteEvt:l}=e,c=r.tr;if(so({editor:n,state:oF({state:r,transaction:c}),from:Math.max(i-1,0),to:a.b-1,rule:o,pasteEvent:l,dropEvent:t})&&c.steps.length){try{t="undefined"!=typeof DragEvent?new DragEvent("drop"):null}catch(e){t=null}return s="undefined"!=typeof ClipboardEvent?new ClipboardEvent("paste"):null,c}};return r.map(e=>new t7({view(e){let t=t=>{var r;(i=(null==(r=e.dom.parentElement)?void 0:r.contains(t.target))?e.dom.parentElement:null)&&(ss=n)},r=()=>{ss&&(ss=null)};return window.addEventListener("dragstart",t),window.addEventListener("dragend",r),{destroy(){window.removeEventListener("dragstart",t),window.removeEventListener("dragend",r)}}},props:{handleDOMEvents:{drop:(e,n)=>{if(o=i===e.dom.parentElement,t=n,!o){let e=ss;e&&setTimeout(()=>{let t=e.state.selection;t&&e.commands.deleteRange({from:t.from,to:t.to})},10)}return!1},paste:(e,t)=>{var n;let r=null==(n=t.clipboardData)?void 0:n.getData("text/html");return s=t,a=!!(null==r?void 0:r.includes("data-pm-slice")),!1}}},appendTransaction:(t,n,r)=>{let i=t[0],c="paste"===i.getMeta("uiEvent")&&!a,u="drop"===i.getMeta("uiEvent")&&!o,d=i.getMeta("applyPasteRules"),p=!!d;if(!c&&!u&&!p)return;if(p){let{text:t}=d;"string"==typeof t||(t=o2(h.from(t),r.schema));let{from:n}=d,i=n+t.length;return l({rule:e,state:r,from:n,to:{b:i},pasteEvt:sl(t)})}let f=n.doc.content.findDiffStart(r.doc.content),m=n.doc.content.findDiffEnd(r.doc.content);if(sr(f)&&m&&f!==m.b)return l({rule:e,state:r,from:f,to:m,pasteEvt:s})}}))}function su(e){return Array.from(new Set(e.filter((t,n)=>e.indexOf(t)!==n)))}class sd{static resolve(e){let t=sd.sort(sd.flatten(e)),n=su(t.map(e=>e.name));return n.length&&console.warn("[tiptap warn]: Duplicate extension names found: [".concat(n.map(e=>"'".concat(e,"'")).join(", "),"]. This can lead to issues.")),t}static flatten(e){return e.map(e=>{let t={name:e.name,options:e.options,storage:e.storage},n=oz(e,"addExtensions",t);return n?[e,...this.flatten(n())]:e}).flat(10)}static sort(e){let t=100;return e.sort((e,n)=>{let r=oz(e,"priority")||t,i=oz(n,"priority")||t;return r>i?-1:+(r<i)})}get commands(){return this.extensions.reduce((e,t)=>{let n={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:o0(t.name,this.schema)},r=oz(t,"addCommands",n);return r?{...e,...r()}:e},{})}get plugins(){let{editor:e}=this,t=sd.sort([...this.extensions].reverse()),n=[],r=[],i=t.map(t=>{let i={name:t.name,options:t.options,storage:t.storage,editor:e,type:o0(t.name,this.schema)},a=[],o=oz(t,"addKeyboardShortcuts",i),s={};if("mark"===t.type&&oz(t,"exitable",i)&&(s.ArrowRight=()=>sn.handleExit({editor:e,mark:t})),o){let t=Object.fromEntries(Object.entries(o()).map(t=>{let[n,r]=t;return[n,()=>r({editor:e})]}));s={...s,...t}}let l=a2(s);a.push(l);let c=oz(t,"addInputRules",i);o1(t,e.options.enableInputRules)&&c&&n.push(...c());let u=oz(t,"addPasteRules",i);o1(t,e.options.enablePasteRules)&&u&&r.push(...u());let d=oz(t,"addProseMirrorPlugins",i);if(d){let e=d();a.push(...e)}return a}).flat();return[o6({editor:e,rules:n}),...sc({editor:e,rules:r}),...i]}get attributes(){return oU(this.extensions)}get nodeViews(){let{editor:e}=this,{nodeExtensions:t}=oH(this.extensions);return Object.fromEntries(t.filter(e=>!!oz(e,"addNodeView")).map(t=>{let n=this.attributes.filter(e=>e.type===t.name),r={name:t.name,options:t.options,storage:t.storage,editor:e,type:oq(t.name,this.schema)},i=oz(t,"addNodeView",r);if(!i)return[];let a=(r,a,o,s,l)=>{let c=oZ(r,n);return i()({node:r,view:a,getPos:o,decorations:s,innerDecorations:l,editor:e,extension:t,HTMLAttributes:c})};return[t.name,a]}))}setupExtensions(){this.extensions.forEach(e=>{var t;this.editor.extensionStorage[e.name]=e.storage;let n={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:o0(e.name,this.schema)};"mark"===e.type&&(null==(t=oK(oz(e,"keepOnSplit",n)))||t)&&this.splittableMarks.push(e.name);let r=oz(e,"onBeforeCreate",n),i=oz(e,"onCreate",n),a=oz(e,"onUpdate",n),o=oz(e,"onSelectionUpdate",n),s=oz(e,"onTransaction",n),l=oz(e,"onFocus",n),c=oz(e,"onBlur",n),u=oz(e,"onDestroy",n);r&&this.editor.on("beforeCreate",r),i&&this.editor.on("create",i),a&&this.editor.on("update",a),o&&this.editor.on("selectionUpdate",o),s&&this.editor.on("transaction",s),l&&this.editor.on("focus",l),c&&this.editor.on("blur",c),u&&this.editor.on("destroy",u)})}constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=sd.resolve(e),this.schema=oQ(this.extensions,t),this.setupExtensions()}}class sp{static create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new sp(e)}configure(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.extend({...this.config,addOptions:()=>st(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new sp({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(t.name,'".')),t.options=oK(oz(t,"addOptions",{name:t.name})),t.storage=oK(oz(t,"addStorage",{name:t.name,options:t.options})),t}constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(this.name,'".')),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=oK(oz(this,"addOptions",{name:this.name}))),this.storage=oK(oz(this,"addStorage",{name:this.name,options:this.options}))||{}}}function sh(e,t,n){let{from:r,to:i}=t,{blockSeparator:a="\n\n",textSerializers:o={}}=n||{},s="";return e.nodesBetween(r,i,(e,n,l,c)=>{var u;e.isBlock&&n>r&&(s+=a);let d=null==o?void 0:o[e.type.name];if(d)return l&&(s+=d({node:e,pos:n,parent:l,index:c,range:t})),!1;e.isText&&(s+=null==(u=null==e?void 0:e.text)?void 0:u.slice(Math.max(r,n)-n,i-n))}),s}function sf(e){return Object.fromEntries(Object.entries(e.nodes).filter(e=>{let[,t]=e;return t.spec.toText}).map(e=>{let[t,n]=e;return[t,n.spec.toText]}))}let sm=sp.create({name:"clipboardTextSerializer",addOptions:()=>({blockSeparator:void 0}),addProseMirrorPlugins(){return[new t7({key:new t8("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{let{editor:e}=this,{state:t,schema:n}=e,{doc:r,selection:i}=t,{ranges:a}=i,o=Math.min(...a.map(e=>e.$from.pos)),s=Math.max(...a.map(e=>e.$to.pos)),l=sf(n);return sh(r,{from:o,to:s},{...void 0!==this.options.blockSeparator?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}});function sg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{strict:!0},r=Object.keys(t);return!r.length||r.every(r=>n.strict?t[r]===e[r]:o4(t[r])?t[r].test(e[r]):t[r]===e[r])}function sv(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.find(e=>e.type===t&&sg(Object.fromEntries(Object.keys(n).map(t=>[t,e.attrs[t]])),n))}function sx(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return!!sv(e,t,n)}function sy(e,t,n){var r;if(!e||!t)return;let i=e.parent.childAfter(e.parentOffset);if(i.node&&i.node.marks.some(e=>e.type===t)||(i=e.parent.childBefore(e.parentOffset)),!i.node||!i.node.marks.some(e=>e.type===t)||(n=n||(null==(r=i.node.marks[0])?void 0:r.attrs),!sv([...i.node.marks],t,n)))return;let a=i.index,o=e.start()+i.offset,s=a+1,l=o+i.node.nodeSize;for(;a>0&&sx([...e.parent.child(a-1).marks],t,n);)a-=1,o-=e.parent.child(a).nodeSize;for(;s<e.parent.childCount&&sx([...e.parent.child(s).marks],t,n);)l+=e.parent.child(s).nodeSize,s+=1;return{from:o,to:l}}function sb(e,t){if("string"==typeof e){if(!t.marks[e])throw Error("There is no mark type named '".concat(e,"'. Maybe you forgot to add the extension?"));return t.marks[e]}return e}function sw(e){return e instanceof tH}function sj(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Math.min(Math.max(e,t),n)}function sC(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!t)return null;let n=tF.atStart(e),r=tF.atEnd(e);if("start"===t||!0===t)return n;if("end"===t)return r;let i=n.from,a=r.to;return"all"===t?tH.create(e,sj(0,i,a),sj(e.content.size,i,a)):tH.create(e,sj(t,i,a),sj(t,i,a))}function sk(){return"Android"===navigator.platform||/android/i.test(navigator.userAgent)}function sS(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}let sN=e=>{let t=e.childNodes;for(let n=t.length-1;n>=0;n-=1){let r=t[n];3===r.nodeType&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?e.removeChild(r):1===r.nodeType&&sN(r)}return e};function sE(e){let t="<body>".concat(e,"</body>");return sN(new window.DOMParser().parseFromString(t,"text/html").body)}function sM(e,t,n){if(e instanceof F||e instanceof h)return e;n={slice:!0,parseOptions:{},...n};let r="object"==typeof e&&null!==e,i="string"==typeof e;if(r)try{if(Array.isArray(e)&&e.length>0)return h.fromArray(e.map(e=>t.nodeFromJSON(e)));let r=t.nodeFromJSON(e);return n.errorOnInvalidContent&&r.check(),r}catch(r){if(n.errorOnInvalidContent)throw Error("[tiptap error]: Invalid JSON content",{cause:r});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",r),sM("",t,n)}if(i){if(n.errorOnInvalidContent){let r=!1,i="",a=new ec({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:e=>(r=!0,i="string"==typeof e?e:e.outerHTML,null)}]}})});if(n.slice?eh.fromSchema(a).parseSlice(sE(e),n.parseOptions):eh.fromSchema(a).parse(sE(e),n.parseOptions),n.errorOnInvalidContent&&r)throw Error("[tiptap error]: Invalid HTML content",{cause:Error("Invalid element found: ".concat(i))})}let r=eh.fromSchema(t);return n.slice?r.parseSlice(sE(e),n.parseOptions).content:r.parse(sE(e),n.parseOptions)}return sM("",t,n)}function sI(e,t,n){let r=e.steps.length-1;if(r<t)return;let i=e.steps[r];if(!(i instanceof e0||i instanceof e1))return;let a=e.mapping.maps[r],o=0;a.forEach((e,t,n,r)=>{0===o&&(o=r)}),e.setSelection(tF.near(e.doc.resolve(o),n))}let sD=e=>!("type"in e);function sT(){return"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)}function sA(e){let t,n,r,i,a=e.split(/-(?!$)/),o=a[a.length-1];"Space"===o&&(o=" ");for(let e=0;e<a.length-1;e+=1){let o=a[e];if(/^(cmd|meta|m)$/i.test(o))i=!0;else if(/^a(lt)?$/i.test(o))t=!0;else if(/^(c|ctrl|control)$/i.test(o))n=!0;else if(/^s(hift)?$/i.test(o))r=!0;else if(/^mod$/i.test(o))sS()||sT()?i=!0:n=!0;else throw Error("Unrecognized modifier name: ".concat(o))}return t&&(o="Alt-".concat(o)),n&&(o="Ctrl-".concat(o)),i&&(o="Meta-".concat(o)),r&&(o="Shift-".concat(o)),o}function sL(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{from:r,to:i,empty:a}=e.selection,o=t?oq(t,e.schema):null,s=[];e.doc.nodesBetween(r,i,(e,t)=>{if(e.isText)return;let n=Math.max(r,t),a=Math.min(i,t+e.nodeSize);s.push({node:e,from:n,to:a})});let l=i-r,c=s.filter(e=>!o||o.name===e.node.type.name).filter(e=>sg(e.node.attrs,n,{strict:!1}));return a?!!c.length:c.reduce((e,t)=>e+t.to-t.from,0)>=l}function sP(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function sR(e,t){let n="string"==typeof t?[t]:t;return Object.keys(e).reduce((t,r)=>(n.includes(r)||(t[r]=e[r]),t),{})}function s_(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return sM(e,t,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}function sO(e,t){let n=sb(t,e.schema),{from:r,to:i,empty:a}=e.selection,o=[];a?(e.storedMarks&&o.push(...e.storedMarks),o.push(...e.selection.$head.marks())):e.doc.nodesBetween(r,i,e=>{o.push(...e.marks)});let s=o.find(e=>e.type.name===n.name);return s?{...s.attrs}:{}}function sF(e){for(let t=0;t<e.edgeCount;t+=1){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function sV(e,t){for(let n=e.depth;n>0;n-=1){let r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}function sB(e){return t=>sV(t.$from,e)}function sz(e,t){let n={from:0,to:e.content.size};return sh(e,n,t)}function sH(e,t){let n=oq(t,e.schema),{from:r,to:i}=e.selection,a=[];e.doc.nodesBetween(r,i,e=>{a.push(e)});let o=a.reverse().find(e=>e.type.name===n.name);return o?{...o.attrs}:{}}function sU(e,t){let n=sP("string"==typeof t?t:t.name,e.schema);return"node"===n?sH(e,t):"mark"===n?sO(e,t):{}}function sq(e,t,n){let r=[];return e===t?n.resolve(e).marks().forEach(t=>{let i=sy(n.resolve(e),t.type);i&&r.push({mark:t,...i})}):n.nodesBetween(e,t,(e,t)=>{e&&(null==e?void 0:e.nodeSize)!==void 0&&r.push(...e.marks.map(n=>({from:t,to:t+e.nodeSize,mark:n})))}),r}function sW(e,t,n){return Object.fromEntries(Object.entries(n).filter(n=>{let[r]=n,i=e.find(e=>e.type===t&&e.name===r);return!!i&&i.attribute.keepOnSplit}))}function sZ(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{empty:r,ranges:i}=e.selection,a=t?sb(t,e.schema):null;if(r)return!!(e.storedMarks||e.selection.$from.marks()).filter(e=>!a||a.name===e.type.name).find(e=>sg(e.attrs,n,{strict:!1}));let o=0,s=[];if(i.forEach(t=>{let{$from:n,$to:r}=t,i=n.pos,a=r.pos;e.doc.nodesBetween(i,a,(e,t)=>{if(!e.isText&&!e.marks.length)return;let n=Math.max(i,t),r=Math.min(a,t+e.nodeSize);o+=r-n,s.push(...e.marks.map(e=>({mark:e,from:n,to:r})))})}),0===o)return!1;let l=s.filter(e=>!a||a.name===e.mark.type.name).filter(e=>sg(e.mark.attrs,n,{strict:!1})).reduce((e,t)=>e+t.to-t.from,0),c=s.filter(e=>!a||e.mark.type!==a&&e.mark.type.excludes(a)).reduce((e,t)=>e+t.to-t.from,0);return(l>0?l+c:l)>=o}function sG(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t)return sL(e,null,n)||sZ(e,null,n);let r=sP(t,e.schema);return"node"===r?sL(e,t,n):"mark"===r&&sZ(e,t,n)}function sK(e,t){let{nodeExtensions:n}=oH(t),r=n.find(t=>t.name===e);if(!r)return!1;let i={name:r.name,options:r.options,storage:r.storage},a=oK(oz(r,"group",i));return"string"==typeof a&&a.split(" ").includes("list")}function sX(e){var t;let{checkChildren:n=!0,ignoreWhitespace:r=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(r){if("hardBreak"===e.type.name)return!0;if(e.isText)return/^\s*$/m.test(null!=(t=e.text)?t:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(0===e.content.childCount)return!0;if(n){let t=!0;return e.content.forEach(e=>{!1!==t&&(sX(e,{ignoreWhitespace:r,checkChildren:n})||(t=!1))}),t}return!1}function s$(e){return e instanceof tq}function sY(e,t,n){let r=0,i=e.state.doc.content.size,a=sj(t,r,i),o=sj(n,r,i),s=e.coordsAtPos(a),l=e.coordsAtPos(o,-1),c=Math.min(s.top,l.top),u=Math.max(s.bottom,l.bottom),d=Math.min(s.left,l.left),p=Math.max(s.right,l.right),h=p-d,f=u-c,m=d,g=c,v={top:c,bottom:u,left:d,right:p,width:h,height:f,x:m,y:g};return{...v,toJSON:()=>v}}function sJ(e,t,n){var r;let{selection:i}=t,a=null;if(sw(i)&&(a=i.$cursor),a){let t=null!=(r=e.storedMarks)?r:a.marks();return!!n.isInSet(t)||!t.some(e=>e.type.excludes(n))}let{ranges:o}=i;return o.some(t=>{let{$from:r,$to:i}=t,a=0===r.depth&&e.doc.inlineContent&&e.doc.type.allowsMarkType(n);return e.doc.nodesBetween(r.pos,i.pos,(e,t,r)=>{if(a)return!1;if(e.isInline){let t=!r||r.type.allowsMarkType(n),i=!!n.isInSet(e.marks)||!e.marks.some(e=>e.type.excludes(n));a=t&&i}return!a}),a})}function sQ(e,t){let n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){let r=n.filter(e=>null==t?void 0:t.includes(e.type.name));e.tr.ensureMarks(r)}}let s0=(e,t)=>{let n=sB(e=>e.type===t)(e.selection);if(!n)return!0;let r=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(void 0===r)return!0;let i=e.doc.nodeAt(r);return!(n.node.type===(null==i?void 0:i.type)&&td(e.doc,n.pos))||(e.join(n.pos),!0)},s1=(e,t)=>{let n=sB(e=>e.type===t)(e.selection);if(!n)return!0;let r=e.doc.resolve(n.start).after(n.depth);if(void 0===r)return!0;let i=e.doc.nodeAt(r);return!(n.node.type===(null==i?void 0:i.type)&&td(e.doc,r))||(e.join(r),!0)};var s2=Object.freeze({__proto__:null,blur:()=>e=>{let{editor:t,view:n}=e;return requestAnimationFrame(()=>{var e;t.isDestroyed||(n.dom.blur(),null==(e=null==window?void 0:window.getSelection())||e.removeAllRanges())}),!0},clearContent:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t=>{let{commands:n}=t;return n.setContent("",e)}},clearNodes:()=>e=>{let{state:t,tr:n,dispatch:r}=e,{selection:i}=n,{ranges:a}=i;return!r||(a.forEach(e=>{let{$from:r,$to:i}=e;t.doc.nodesBetween(r.pos,i.pos,(e,t)=>{if(e.type.isText)return;let{doc:r,mapping:i}=n,a=r.resolve(i.map(t)),o=r.resolve(i.map(t+e.nodeSize)),s=a.blockRange(o);if(!s)return;let l=e9(s);if(e.type.isTextblock){let{defaultType:e}=a.parent.contentMatchAt(a.index());n.setNodeMarkup(s.start,e)}(l||0===l)&&n.lift(s,l)})}),!0)},command:e=>t=>e(t),createParagraphNear:()=>e=>{let{state:t,dispatch:n}=e;return of(t,n)},cut:(e,t)=>n=>{let{editor:r,tr:i}=n,{state:a}=r,o=a.doc.slice(e.from,e.to);i.deleteRange(e.from,e.to);let s=i.mapping.map(t);return i.insert(s,o.content),i.setSelection(new tH(i.doc.resolve(s-1))),!0},deleteCurrentNode:()=>e=>{let{tr:t,dispatch:n}=e,{selection:r}=t,i=r.$anchor.node();if(i.content.size>0)return!1;let a=t.selection.$anchor;for(let e=a.depth;e>0;e-=1)if(a.node(e).type===i.type){if(n){let n=a.before(e),r=a.after(e);t.delete(n,r).scrollIntoView()}return!0}return!1},deleteNode:e=>t=>{let{tr:n,state:r,dispatch:i}=t,a=oq(e,r.schema),o=n.selection.$anchor;for(let e=o.depth;e>0;e-=1)if(o.node(e).type===a){if(i){let t=o.before(e),r=o.after(e);n.delete(t,r).scrollIntoView()}return!0}return!1},deleteRange:e=>t=>{let{tr:n,dispatch:r}=t,{from:i,to:a}=e;return r&&n.delete(i,a),!0},deleteSelection:()=>e=>{let{state:t,dispatch:n}=e;return a4(t,n)},enter:()=>e=>{let{commands:t}=e;return t.keyboardShortcut("Enter")},exitCode:()=>e=>{let{state:t,dispatch:n}=e;return oh(t,n)},extendMarkRange:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{tr:r,state:i,dispatch:a}=n,o=sb(e,i.schema),{doc:s,selection:l}=r,{$from:c,from:u,to:d}=l;if(a){let e=sy(c,o,t);if(e&&e.from<=u&&e.to>=d){let t=tH.create(s,e.from,e.to);r.setSelection(t)}}return!0}},first:e=>t=>{let n="function"==typeof e?e(t):e;for(let e=0;e<n.length;e+=1)if(n[e](t))return!0;return!1},focus:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{editor:r,view:i,tr:a,dispatch:o}=n;t={scrollIntoView:!0,...t};let s=()=>{(sS()||sk())&&i.dom.focus(),requestAnimationFrame(()=>{!r.isDestroyed&&(i.focus(),(null==t?void 0:t.scrollIntoView)&&r.commands.scrollIntoView())})};if(i.hasFocus()&&null===e||!1===e)return!0;if(o&&null===e&&!sw(r.state.selection))return s(),!0;let l=sC(a.doc,e)||r.state.selection,c=r.state.selection.eq(l);return o&&(c||a.setSelection(l),c&&a.storedMarks&&a.setStoredMarks(a.storedMarks),s()),!0}},forEach:(e,t)=>n=>e.every((e,r)=>t(e,{...n,index:r})),insertContent:(e,t)=>n=>{let{tr:r,commands:i}=n;return i.insertContentAt({from:r.selection.from,to:r.selection.to},e,t)},insertContentAt:(e,t,n)=>r=>{var i;let{tr:a,dispatch:o,editor:s}=r;if(o){let r,o;n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};try{r=sM(t,s.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions},errorOnInvalidContent:null!=(i=n.errorOnInvalidContent)?i:s.options.enableContentCheck})}catch(e){return s.emit("contentError",{editor:s,error:e,disableCollaboration:()=>{s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}}),!1}let{from:l,to:c}="number"==typeof e?{from:e,to:e}:{from:e.from,to:e.to},u=!0,d=!0;if((sD(r)?r:[r]).forEach(e=>{e.check(),u=!!u&&e.isText&&0===e.marks.length,d=!!d&&e.isBlock}),l===c&&d){let{parent:e}=a.doc.resolve(l);!e.isTextblock||e.type.spec.code||e.childCount||(l-=1,c+=1)}if(u){if(Array.isArray(t))o=t.map(e=>e.text||"").join("");else if(t instanceof h){let e="";t.forEach(t=>{t.text&&(e+=t.text)}),o=e}else o="object"==typeof t&&t&&t.text?t.text:t;a.insertText(o,l,c)}else o=r,a.replaceWith(l,c,o);n.updateSelection&&sI(a,a.steps.length-1,-1),n.applyInputRules&&a.setMeta("applyInputRules",{from:l,text:o}),n.applyPasteRules&&a.setMeta("applyPasteRules",{from:l,text:o})}return!0},joinBackward:()=>e=>{let{state:t,dispatch:n}=e;return a7(t,n)},joinDown:()=>e=>{let{state:t,dispatch:n}=e;return oc(t,n)},joinForward:()=>e=>{let{state:t,dispatch:n}=e;return oi(t,n)},joinItemBackward:()=>e=>{let{state:t,dispatch:n,tr:r}=e;try{let e=tf(t.doc,t.selection.$from.pos,-1);if(null==e)return!1;return r.join(e,2),n&&n(r),!0}catch(e){return!1}},joinItemForward:()=>e=>{let{state:t,dispatch:n,tr:r}=e;try{let e=tf(t.doc,t.selection.$from.pos,1);if(null==e)return!1;return r.join(e,2),n&&n(r),!0}catch(e){return!1}},joinTextblockBackward:()=>e=>{let{state:t,dispatch:n}=e;return a9(t,n)},joinTextblockForward:()=>e=>{let{state:t,dispatch:n}=e;return a6(t,n)},joinUp:()=>e=>{let{state:t,dispatch:n}=e;return ol(t,n)},keyboardShortcut:e=>t=>{let{editor:n,view:r,tr:i,dispatch:a}=t,o=sA(e).split(/-(?!$)/),s=o.find(e=>!["Alt","Ctrl","Meta","Shift"].includes(e)),l=new KeyboardEvent("keydown",{key:"Space"===s?" ":s,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),c=n.captureTransaction(()=>{r.someProp("handleKeyDown",e=>e(r,l))});return null==c||c.steps.forEach(e=>{let t=e.map(i.mapping);t&&a&&i.maybeStep(t)}),!0},lift:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{state:r,dispatch:i}=n,a=oq(e,r.schema);return!!sL(r,a,t)&&ou(r,i)}},liftEmptyBlock:()=>e=>{let{state:t,dispatch:n}=e;return om(t,n)},liftListItem:e=>t=>{let{state:n,dispatch:r}=t;return oP(oq(e,n.schema))(n,r)},newlineInCode:()=>e=>{let{state:t,dispatch:n}=e;return od(t,n)},resetAttributes:(e,t)=>n=>{let{tr:r,state:i,dispatch:a}=n,o=null,s=null,l=sP("string"==typeof e?e:e.name,i.schema);return!!l&&("node"===l&&(o=oq(e,i.schema)),"mark"===l&&(s=sb(e,i.schema)),a&&r.selection.ranges.forEach(e=>{i.doc.nodesBetween(e.$from.pos,e.$to.pos,(e,n)=>{o&&o===e.type&&r.setNodeMarkup(n,void 0,sR(e.attrs,t)),s&&e.marks.length&&e.marks.forEach(i=>{s===i.type&&r.addMark(n,n+e.nodeSize,s.create(sR(i.attrs,t)))})})}),!0)},scrollIntoView:()=>e=>{let{tr:t,dispatch:n}=e;return n&&t.scrollIntoView(),!0},selectAll:()=>e=>{let{tr:t,dispatch:n}=e;if(n){let e=new tZ(t.doc);t.setSelection(e)}return!0},selectNodeBackward:()=>e=>{let{state:t,dispatch:n}=e;return ot(t,n)},selectNodeForward:()=>e=>{let{state:t,dispatch:n}=e;return oa(t,n)},selectParentNode:()=>e=>{let{state:t,dispatch:n}=e;return ov(t,n)},selectTextblockEnd:()=>e=>{let{state:t,dispatch:n}=e;return oC(t,n)},selectTextblockStart:()=>e=>{let{state:t,dispatch:n}=e;return oj(t,n)},setContent:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return i=>{var a,o;let{editor:s,tr:l,dispatch:c,commands:u}=i,{doc:d}=l;if("full"!==n.preserveWhitespace){let i=s_(e,s.schema,n,{errorOnInvalidContent:null!=(a=r.errorOnInvalidContent)?a:s.options.enableContentCheck});return c&&l.replaceWith(0,d.content.size,i).setMeta("preventUpdate",!t),!0}return c&&l.setMeta("preventUpdate",!t),u.insertContentAt({from:0,to:d.content.size},e,{parseOptions:n,errorOnInvalidContent:null!=(o=r.errorOnInvalidContent)?o:s.options.enableContentCheck})}},setMark:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{tr:r,state:i,dispatch:a}=n,{selection:o}=r,{empty:s,ranges:l}=o,c=sb(e,i.schema);if(a)if(s){let e=sO(i,c);r.addStoredMark(c.create({...e,...t}))}else l.forEach(e=>{let n=e.$from.pos,a=e.$to.pos;i.doc.nodesBetween(n,a,(e,i)=>{let o=Math.max(i,n),s=Math.min(i+e.nodeSize,a);e.marks.find(e=>e.type===c)?e.marks.forEach(e=>{c===e.type&&r.addMark(o,s,c.create({...e.attrs,...t}))}):r.addMark(o,s,c.create(t))})});return sJ(i,r,c)}},setMeta:(e,t)=>n=>{let{tr:r}=n;return r.setMeta(e,t),!0},setNode:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let r,{state:i,dispatch:a,chain:o}=n,s=oq(e,i.schema);return(i.selection.$anchor.sameParent(i.selection.$head)&&(r=i.selection.$anchor.parent.attrs),s.isTextblock)?o().command(e=>{let{commands:n}=e;return!!oS(s,{...r,...t})(i)||n.clearNodes()}).command(e=>{let{state:n}=e;return oS(s,{...r,...t})(n,a)}).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)}},setNodeSelection:e=>t=>{let{tr:n,dispatch:r}=t;if(r){let{doc:t}=n,r=sj(e,0,t.content.size),i=tq.create(t,r);n.setSelection(i)}return!0},setTextSelection:e=>t=>{let{tr:n,dispatch:r}=t;if(r){let{doc:t}=n,{from:r,to:i}="number"==typeof e?{from:e,to:e}:e,a=tH.atStart(t).from,o=tH.atEnd(t).to,s=sj(r,a,o),l=sj(i,a,o),c=tH.create(t,s,l);n.setSelection(c)}return!0},sinkListItem:e=>t=>{let{state:n,dispatch:r}=t;return oO(oq(e,n.schema))(n,r)},splitBlock:function(){let{keepMarks:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=>{let{tr:n,state:r,dispatch:i,editor:a}=t,{selection:o,doc:s}=n,{$from:l,$to:c}=o,u=sW(a.extensionManager.attributes,l.node().type.name,l.node().attrs);if(o instanceof tq&&o.node.isBlock)return!!l.parentOffset&&!!tc(s,l.pos)&&(i&&(e&&sQ(r,a.extensionManager.splittableMarks),n.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;let d=c.parentOffset===c.parent.content.size,p=0===l.depth?void 0:sF(l.node(-1).contentMatchAt(l.indexAfter(-1))),h=d&&p?[{type:p,attrs:u}]:void 0,f=tc(n.doc,n.mapping.map(l.pos),1,h);if(!h&&!f&&tc(n.doc,n.mapping.map(l.pos),1,p?[{type:p}]:void 0)&&(f=!0,h=p?[{type:p,attrs:u}]:void 0),i){if(f&&(o instanceof tH&&n.deleteSelection(),n.split(n.mapping.map(l.pos),1,h),p&&!d&&!l.parentOffset&&l.parent.type!==p)){let e=n.mapping.map(l.before()),t=n.doc.resolve(e);l.node(-1).canReplaceWith(t.index(),t.index()+1,p)&&n.setNodeMarkup(n.mapping.map(l.before()),p)}e&&sQ(r,a.extensionManager.splittableMarks),n.scrollIntoView()}return f}},splitListItem:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{var r;let{tr:i,state:a,dispatch:o,editor:s}=n,l=oq(e,a.schema),{$from:c,$to:u}=a.selection,d=a.selection.node;if(d&&d.isBlock||c.depth<2||!c.sameParent(u))return!1;let p=c.node(-1);if(p.type!==l)return!1;let f=s.extensionManager.attributes;if(0===c.parent.content.size&&c.node(-1).childCount===c.indexAfter(-1)){if(2===c.depth||c.node(-3).type!==l||c.index(-2)!==c.node(-2).childCount-1)return!1;if(o){let e=h.empty,n=c.index(-1)?1:c.index(-2)?2:3;for(let t=c.depth-n;t>=c.depth-3;t-=1)e=h.from(c.node(t).copy(e));let a=c.indexAfter(-1)<c.node(-2).childCount?1:c.indexAfter(-2)<c.node(-3).childCount?2:3,o={...sW(f,c.node().type.name,c.node().attrs),...t},s=(null==(r=l.contentMatch.defaultType)?void 0:r.createAndFill(o))||void 0;e=e.append(h.from(l.createAndFill(null,s)||void 0));let u=c.before(c.depth-(n-1));i.replace(u,c.after(-a),new y(e,4-n,0));let d=-1;i.doc.nodesBetween(u,i.doc.content.size,(e,t)=>{if(d>-1)return!1;e.isTextblock&&0===e.content.size&&(d=t+1)}),d>-1&&i.setSelection(tH.near(i.doc.resolve(d))),i.scrollIntoView()}return!0}let m=u.pos===c.end()?p.contentMatchAt(0).defaultType:null,g={...sW(f,p.type.name,p.attrs),...t},v={...sW(f,c.node().type.name,c.node().attrs),...t};i.delete(c.pos,u.pos);let x=m?[{type:l,attrs:g},{type:m,attrs:v}]:[{type:l,attrs:g}];if(!tc(i.doc,c.pos,2))return!1;if(o){let{selection:e,storedMarks:t}=a,{splittableMarks:n}=s.extensionManager,r=t||e.$to.parentOffset&&e.$from.marks();if(i.split(c.pos,2,x).scrollIntoView(),!r||!o)return!0;let l=r.filter(e=>n.includes(e.type.name));i.ensureMarks(l)}return!0}},toggleList:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return i=>{let{editor:a,tr:o,state:s,dispatch:l,chain:c,commands:u,can:d}=i,{extensions:p,splittableMarks:h}=a.extensionManager,f=oq(e,s.schema),m=oq(t,s.schema),{selection:g,storedMarks:v}=s,{$from:x,$to:y}=g,b=x.blockRange(y),w=v||g.$to.parentOffset&&g.$from.marks();if(!b)return!1;let j=sB(e=>sK(e.type.name,p))(g);if(b.depth>=1&&j&&b.depth-j.depth<=1){if(j.node.type===f)return u.liftListItem(m);if(sK(j.node.type.name,p)&&f.validContent(j.node.content)&&l)return c().command(()=>(o.setNodeMarkup(j.pos,f),!0)).command(()=>s0(o,f)).command(()=>s1(o,f)).run()}return n&&w&&l?c().command(()=>{let e=d().wrapInList(f,r),t=w.filter(e=>h.includes(e.type.name));return o.ensureMarks(t),!!e||u.clearNodes()}).wrapInList(f,r).command(()=>s0(o,f)).command(()=>s1(o,f)).run():c().command(()=>!!d().wrapInList(f,r)||u.clearNodes()).wrapInList(f,r).command(()=>s0(o,f)).command(()=>s1(o,f)).run()}},toggleMark:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=>{let{state:i,commands:a}=r,{extendEmptyMarkRange:o=!1}=n,s=sb(e,i.schema);return sZ(i,s,t)?a.unsetMark(s,{extendEmptyMarkRange:o}):a.setMark(s,t)}},toggleNode:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=>{let i,{state:a,commands:o}=r,s=oq(e,a.schema),l=oq(t,a.schema),c=sL(a,s,n);return(a.selection.$anchor.sameParent(a.selection.$head)&&(i=a.selection.$anchor.parent.attrs),c)?o.setNode(l,i):o.setNode(s,{...i,...n})}},toggleWrap:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{state:r,commands:i}=n,a=oq(e,r.schema);return sL(r,a,t)?i.lift(a):i.wrapIn(a,t)}},undoInputRule:()=>e=>{let{state:t,dispatch:n}=e,r=t.plugins;for(let e=0;e<r.length;e+=1){let i,a=r[e];if(a.spec.isInputRules&&(i=a.getState(t))){if(n){let e=t.tr,n=i.transform;for(let t=n.steps.length-1;t>=0;t-=1)e.step(n.steps[t].invert(n.docs[t]));if(i.text){let n=e.doc.resolve(i.from).marks();e.replaceWith(i.from,i.to,t.schema.text(i.text,n))}else e.delete(i.from,i.to)}return!0}}return!1},unsetAllMarks:()=>e=>{let{tr:t,dispatch:n}=e,{selection:r}=t,{empty:i,ranges:a}=r;return!!i||(n&&a.forEach(e=>{t.removeMark(e.$from.pos,e.$to.pos)}),!0)},unsetMark:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{var r;let{tr:i,state:a,dispatch:o}=n,{extendEmptyMarkRange:s=!1}=t,{selection:l}=i,c=sb(e,a.schema),{$from:u,empty:d,ranges:p}=l;if(!o)return!0;if(d&&s){let{from:e,to:t}=l,n=null==(r=u.marks().find(e=>e.type===c))?void 0:r.attrs,a=sy(u,c,n);a&&(e=a.from,t=a.to),i.removeMark(e,t,c)}else p.forEach(e=>{i.removeMark(e.$from.pos,e.$to.pos,c)});return i.removeStoredMark(c),!0}},updateAttributes:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{tr:r,state:i,dispatch:a}=n,o=null,s=null,l=sP("string"==typeof e?e:e.name,i.schema);return!!l&&("node"===l&&(o=oq(e,i.schema)),"mark"===l&&(s=sb(e,i.schema)),a&&r.selection.ranges.forEach(e=>{let n,a,l,c,u=e.$from.pos,d=e.$to.pos;r.selection.empty?i.doc.nodesBetween(u,d,(e,t)=>{o&&o===e.type&&(l=Math.max(t,u),c=Math.min(t+e.nodeSize,d),n=t,a=e)}):i.doc.nodesBetween(u,d,(e,i)=>{i<u&&o&&o===e.type&&(l=Math.max(i,u),c=Math.min(i+e.nodeSize,d),n=i,a=e),i>=u&&i<=d&&(o&&o===e.type&&r.setNodeMarkup(i,void 0,{...e.attrs,...t}),s&&e.marks.length&&e.marks.forEach(n=>{if(s===n.type){let a=Math.max(i,u),o=Math.min(i+e.nodeSize,d);r.addMark(a,o,s.create({...n.attrs,...t}))}}))}),a&&(void 0!==n&&r.setNodeMarkup(n,void 0,{...a.attrs,...t}),s&&a.marks.length&&a.marks.forEach(e=>{s===e.type&&r.addMark(l,c,s.create({...e.attrs,...t}))}))}),!0)}},wrapIn:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{state:r,dispatch:i}=n;return ok(oq(e,r.schema),t)(r,i)}},wrapInList:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{state:r,dispatch:i}=n;return oT(oq(e,r.schema),t)(r,i)}}});let s5=sp.create({name:"commands",addCommands:()=>({...s2})}),s4=sp.create({name:"drop",addProseMirrorPlugins(){return[new t7({key:new t8("tiptapDrop"),props:{handleDrop:(e,t,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:n,moved:r})}}})]}}),s3=sp.create({name:"editable",addProseMirrorPlugins(){return[new t7({key:new t8("editable"),props:{editable:()=>this.editor.options.editable}})]}}),s7=sp.create({name:"focusEvents",addProseMirrorPlugins(){let{editor:e}=this;return[new t7({key:new t8("focusEvents"),props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;let r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:(t,n)=>{e.isFocused=!1;let r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}}),s9=sp.create({name:"keymap",addKeyboardShortcuts(){let e=()=>this.editor.commands.first(e=>{let{commands:t}=e;return[()=>t.undoInputRule(),()=>t.command(e=>{let{tr:n}=e,{selection:r,doc:i}=n,{empty:a,$anchor:o}=r,{pos:s,parent:l}=o,c=o.parent.isTextblock&&s>0?n.doc.resolve(s-1):o,u=c.parent.type.spec.isolating,d=o.pos-o.parentOffset,p=u&&1===c.parent.childCount?d===o.pos:tF.atStart(i).from===s;return!!a&&!!l.type.isTextblock&&!l.textContent.length&&!!p&&(!p||"paragraph"!==o.parent.type.name)&&t.clearNodes()}),()=>t.deleteSelection(),()=>t.joinBackward(),()=>t.selectNodeBackward()]}),t=()=>this.editor.commands.first(e=>{let{commands:t}=e;return[()=>t.deleteSelection(),()=>t.deleteCurrentNode(),()=>t.joinForward(),()=>t.selectNodeForward()]}),n={Enter:()=>this.editor.commands.first(e=>{let{commands:t}=e;return[()=>t.newlineInCode(),()=>t.createParagraphNear(),()=>t.liftEmptyBlock(),()=>t.splitBlock()]}),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},r={...n},i={...n,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return sS()||sT()?i:r},addProseMirrorPlugins(){return[new t7({key:new t8("clearDocument"),appendTransaction:(e,t,n)=>{if(e.some(e=>e.getMeta("composition")))return;let r=e.some(e=>e.docChanged)&&!t.doc.eq(n.doc),i=e.some(e=>e.getMeta("preventClearDocument"));if(!r||i)return;let{empty:a,from:o,to:s}=t.selection,l=tF.atStart(t.doc).from,c=tF.atEnd(t.doc).to,u=o===l&&s===c;if(a||!u||!sX(n.doc))return;let d=n.tr,p=oF({state:n,transaction:d}),{commands:h}=new oV({editor:this.editor,state:p});if(h.clearNodes(),d.steps.length)return d}})]}}),s6=sp.create({name:"paste",addProseMirrorPlugins(){return[new t7({key:new t8("tiptapPaste"),props:{handlePaste:(e,t,n)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:n})}}})]}}),s8=sp.create({name:"tabindex",addProseMirrorPlugins(){return[new t7({key:new t8("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class le{get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return null!=(e=this.actualDepth)?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,n=this.to;if(this.isBlock){if(0===this.content.size)return void console.error("You can’t set content on a block node. Tried to set content on ".concat(this.name," at ").concat(this.pos));t=this.from+1,n=this.to-1}this.editor.commands.insertContentAt({from:t,to:n},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+ +!this.node.isText}get parent(){if(0===this.depth)return null;let e=this.resolvedPos.start(this.resolvedPos.depth-1);return new le(this.resolvedPos.doc.resolve(e),this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new le(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new le(e,this.editor)}get children(){let e=[];return this.node.content.forEach((t,n)=>{let r=t.isBlock&&!t.isTextblock,i=t.isAtom&&!t.isText,a=this.pos+n+ +!i,o=this.resolvedPos.doc.resolve(a);if(!r&&o.depth<=this.depth)return;let s=new le(o,this.editor,r,r?t:null);r&&(s.actualDepth=this.depth+1),e.push(new le(o,this.editor,r,r?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){let e=this.children;return e[e.length-1]||null}closest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,r=this.parent;for(;r&&!n;){if(r.node.type.name===e)if(Object.keys(t).length>0){let e=r.node.attrs,n=Object.keys(t);for(let r=0;r<n.length;r+=1){let i=n[r];if(e[i]!==t[i])break}}else n=r;r=r.parent}return n}querySelector(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[];if(!this.children||0===this.children.length)return r;let i=Object.keys(t);return this.children.forEach(a=>{(!n||!(r.length>0))&&(a.node.type.name===e&&i.every(e=>t[e]===a.node.attrs[e])&&r.push(a),n&&r.length>0||(r=r.concat(a.querySelectorAll(e,t,n))))}),r}setAttribute(e){let{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}constructor(e,t,n=!1,r=null){this.currentNode=null,this.actualDepth=null,this.isBlock=n,this.resolvedPos=e,this.editor=t,this.currentNode=r}}let lt='.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  white-space: break-spaces;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n  font-feature-settings: "liga" 0; /* the above doesn\'t seem to work in Edge */\n}\n\n.ProseMirror [contenteditable="false"] {\n  white-space: normal;\n}\n\n.ProseMirror [contenteditable="false"] [contenteditable="true"] {\n  white-space: pre-wrap;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\nimg.ProseMirror-separator {\n  display: inline !important;\n  border: none !important;\n  margin: 0 !important;\n  width: 0 !important;\n  height: 0 !important;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n  margin: 0;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n\n.tippy-box[data-animation=fade][data-state=hidden] {\n  opacity: 0\n}';function ln(e,t,n){let r=document.querySelector("style[data-tiptap-style".concat(n?"-".concat(n):"","]"));if(null!==r)return r;let i=document.createElement("style");return t&&i.setAttribute("nonce",t),i.setAttribute("data-tiptap-style".concat(n?"-".concat(n):""),""),i.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(i),i}class lr extends oB{get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=ln(lt,this.options.injectNonce))}setOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options={...this.options,...e},this.view&&this.state&&!this.isDestroyed&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){let n=oG(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(e){if(this.isDestroyed)return;let t=this.state.plugins,n=t;if([].concat(e).forEach(e=>{let r="string"==typeof e?"".concat(e,"$"):e.key;n=t.filter(e=>!e.key.startsWith(r))}),t.length===n.length)return;let r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var e,t;let n=[...this.options.enableCoreExtensions?[s3,sm.configure({blockSeparator:null==(t=null==(e=this.options.coreExtensionOptions)?void 0:e.clipboardTextSerializer)?void 0:t.blockSeparator}),s5,s7,s9,s8,s4,s6].filter(e=>"object"!=typeof this.options.enableCoreExtensions||!1!==this.options.enableCoreExtensions[e.name]):[],...this.options.extensions].filter(e=>["extension","node","mark"].includes(null==e?void 0:e.type));this.extensionManager=new sd(n,this)}createCommandManager(){this.commandManager=new oV({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let t;try{t=s_(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(e=>"collaboration"!==e.name),this.createExtensionManager()}}),t=s_(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}let n=sC(t,this.options.autofocus);this.view=new aO(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...null==(e=this.options.editorProps)?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:t4.create({doc:t,selection:n||void 0})});let r=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(r),this.createNodeViews(),this.prependClass(),this.view.dom.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className="tiptap ".concat(this.view.dom.className)}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;let t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(e=>{var t;return null==(t=this.capturedTransaction)?void 0:t.step(e)});return}let t=this.state.apply(e),n=!this.state.selection.eq(t.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),n&&this.emit("selectionUpdate",{editor:this,transaction:e});let r=e.getMeta("focus"),i=e.getMeta("blur");r&&this.emit("focus",{editor:this,event:r.event,transaction:e}),i&&this.emit("blur",{editor:this,event:i.event,transaction:e}),!e.docChanged||e.getMeta("preventUpdate")||this.emit("update",{editor:this,transaction:e})}getAttributes(e){return sU(this.state,e)}isActive(e,t){let n="string"==typeof e?e:null,r="string"==typeof e?t:e;return sG(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return o2(this.state.doc.content,this.schema)}getText(e){let{blockSeparator:t="\n\n",textSerializers:n={}}=e||{};return sz(this.state.doc,{blockSeparator:t,textSerializers:{...sf(this.schema),...n}})}get isEmpty(){return sX(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){let e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(null==(e=this.view)?void 0:e.docView)}$node(e,t){var n;return(null==(n=this.$doc)?void 0:n.querySelector(e,t))||null}$nodes(e,t){var n;return(null==(n=this.$doc)?void 0:n.querySelectorAll(e,t))||null}$pos(e){return new le(this.state.doc.resolve(e),this)}get $doc(){return this.$pos(0)}constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:e=>{let{error:t}=e;throw t},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",e=>{let{event:t,slice:n,moved:r}=e;return this.options.onDrop(t,n,r)}),this.on("paste",e=>{let{event:t,slice:n}=e;return this.options.onPaste(t,n)}),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}}function li(e){return new o3({find:e.find,handler:t=>{let{state:n,range:r,match:i}=t,a=oK(e.getAttributes,void 0,i);if(!1===a||null===a)return null;let{tr:o}=n,s=i[i.length-1],l=i[0];if(s){let t=l.search(/\S/),i=r.from+l.indexOf(s),c=i+s.length;if(sq(r.from,r.to,n.doc).filter(t=>t.mark.type.excluded.find(n=>n===e.type&&n!==t.mark.type)).filter(e=>e.to>i).length)return null;c<r.to&&o.delete(c,r.to),i>r.from&&o.delete(r.from+t,i);let u=r.from+t+s.length;o.addMark(r.from+t,u,e.type.create(a||{})),o.removeStoredMark(e.type)}}})}function la(e){return new o3({find:e.find,handler:t=>{let{state:n,range:r,match:i}=t,a=oK(e.getAttributes,void 0,i)||{},{tr:o}=n,s=r.from,l=r.to,c=e.type.create(a);if(i[1]){let e=s+i[0].lastIndexOf(i[1]);e>l?e=l:l=e+i[1].length;let t=i[0][i[0].length-1];o.insertText(t,s+i[0].length-1),o.replaceWith(e,l,c)}else if(i[0]){let t=e.type.isInline?s:s-1;o.insert(t,e.type.create(a)).delete(o.mapping.map(s),o.mapping.map(l))}o.scrollIntoView()}})}function lo(e){return new o3({find:e.find,handler:t=>{let{state:n,range:r,match:i}=t,a=n.doc.resolve(r.from),o=oK(e.getAttributes,void 0,i)||{};if(!a.node(-1).canReplaceWith(a.index(-1),a.indexAfter(-1),e.type))return null;n.tr.delete(r.from,r.to).setBlockType(r.from,r.from,e.type,o)}})}function ls(e){return new o3({find:e.find,handler:t=>{let{state:n,range:r,match:i,chain:a}=t,o=oK(e.getAttributes,void 0,i)||{},s=n.tr.delete(r.from,r.to),l=s.doc.resolve(r.from).blockRange(),c=l&&e8(l,e.type,o);if(!c)return null;if(s.wrap(l,c),e.keepMarks&&e.editor){let{selection:t,storedMarks:r}=n,{splittableMarks:i}=e.editor.extensionManager,a=r||t.$to.parentOffset&&t.$from.marks();if(a){let e=a.filter(e=>i.includes(e.type.name));s.ensureMarks(e)}}if(e.keepAttributes){let t="bulletList"===e.type.name||"orderedList"===e.type.name?"listItem":"taskList";a().updateAttributes(t,o).run()}let u=s.doc.resolve(r.from-1).nodeBefore;u&&u.type===e.type&&td(s.doc,r.from-1)&&(!e.joinPredicate||e.joinPredicate(i,u))&&s.join(r.from-1)}})}class ll{static create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new ll(e)}configure(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.extend({...this.config,addOptions:()=>st(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new ll(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(t.name,'".')),t.options=oK(oz(t,"addOptions",{name:t.name})),t.storage=oK(oz(t,"addStorage",{name:t.name,options:t.options})),t}constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(this.name,'".')),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=oK(oz(this,"addOptions",{name:this.name}))),this.storage=oK(oz(this,"addStorage",{name:this.name,options:this.options}))||{}}}class lc{mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(e){var t,n,r,i,a,o,s;let{view:l}=this.editor,c=e.target,u=3===c.nodeType?null==(t=c.parentElement)?void 0:t.closest("[data-drag-handle]"):c.closest("[data-drag-handle]");if(!this.dom||(null==(n=this.contentDOM)?void 0:n.contains(c))||!u)return;let d=0,p=0;if(this.dom!==u){let t=this.dom.getBoundingClientRect(),n=u.getBoundingClientRect(),s=null!=(r=e.offsetX)?r:null==(i=e.nativeEvent)?void 0:i.offsetX,l=null!=(a=e.offsetY)?a:null==(o=e.nativeEvent)?void 0:o.offsetY;d=n.x-t.x+s,p=n.y-t.y+l}null==(s=e.dataTransfer)||s.setDragImage(this.dom,d,p);let h=this.getPos();if("number"!=typeof h)return;let f=tq.create(l.state.doc,h),m=l.state.tr.setSelection(f);l.dispatch(m)}stopEvent(e){var t;if(!this.dom)return!1;if("function"==typeof this.options.stopEvent)return this.options.stopEvent({event:e});let n=e.target;if(!(this.dom.contains(n)&&!(null==(t=this.contentDOM)?void 0:t.contains(n))))return!1;let r=e.type.startsWith("drag"),i="drop"===e.type;if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(n.tagName)||n.isContentEditable)&&!i&&!r)return!0;let{isEditable:a}=this.editor,{isDragging:o}=this,s=!!this.node.type.spec.draggable,l=tq.isSelectable(this.node),c="copy"===e.type,u="paste"===e.type,d="cut"===e.type,p="mousedown"===e.type;if(!s&&l&&r&&e.target===this.dom&&e.preventDefault(),s&&r&&!o&&e.target===this.dom)return e.preventDefault(),!1;if(s&&a&&!o&&p){let e=n.closest("[data-drag-handle]");e&&(this.dom===e||this.dom.contains(e))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!o&&!i&&!c&&!u&&!d&&(!p||!l)}ignoreMutation(e){return!this.dom||!this.contentDOM||("function"==typeof this.options.ignoreMutation?this.options.ignoreMutation({mutation:e}):!!this.node.isLeaf||!!this.node.isAtom||!("selection"===e.type||this.dom.contains(e.target)&&"childList"===e.type&&(sS()||sk())&&this.editor.isFocused&&[...Array.from(e.addedNodes),...Array.from(e.removedNodes)].every(e=>e.isContentEditable))&&(this.contentDOM===e.target&&"attributes"===e.type||!this.contentDOM.contains(e.target)))}updateAttributes(e){this.editor.commands.command(t=>{let{tr:n}=t,r=this.getPos();return"number"==typeof r&&(n.setNodeMarkup(r,void 0,{...this.node.attrs,...e}),!0)})}deleteNode(){let e=this.getPos();if("number"!=typeof e)return;let t=e+this.node.nodeSize;this.editor.commands.deleteRange({from:e,to:t})}constructor(e,t,n){this.isDragging=!1,this.component=e,this.editor=t.editor,this.options={stopEvent:null,ignoreMutation:null,...n},this.extension=t.extension,this.node=t.node,this.decorations=t.decorations,this.innerDecorations=t.innerDecorations,this.view=t.view,this.HTMLAttributes=t.HTMLAttributes,this.getPos=t.getPos,this.mount()}}function lu(e){return new si({find:e.find,handler:t=>{let{state:n,range:r,match:i,pasteEvent:a}=t,o=oK(e.getAttributes,void 0,i,a);if(!1===o||null===o)return null;let{tr:s}=n,l=i[i.length-1],c=i[0],u=r.to;if(l){let t=c.search(/\S/),i=r.from+c.indexOf(l),a=i+l.length;if(sq(r.from,r.to,n.doc).filter(t=>t.mark.type.excluded.find(n=>n===e.type&&n!==t.mark.type)).filter(e=>e.to>i).length)return null;a<r.to&&s.delete(a,r.to),i>r.from&&s.delete(r.from+t,i),u=r.from+t+l.length,s.addMark(r.from+t,u,e.type.create(o||{})),s.removeStoredMark(e.type)}}})}function ld(e){return e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}function lp(e){var t;let{char:n,allowSpaces:r,allowToIncludeChar:i,allowedPrefixes:a,startOfLine:o,$position:s}=e,l=r&&!i,c=ld(n),u=new RegExp("\\s".concat(c,"$")),d=o?"^":"",p=i?"":c,h=l?RegExp("".concat(d).concat(c,".*?(?=\\s").concat(p,"|$)"),"gm"):RegExp("".concat(d,"(?:^)?").concat(c,"[^\\s").concat(p,"]*"),"gm"),f=(null==(t=s.nodeBefore)?void 0:t.isText)&&s.nodeBefore.text;if(!f)return null;let m=s.pos-f.length,g=Array.from(f.matchAll(h)).pop();if(!g||void 0===g.input||void 0===g.index)return null;let v=g.input.slice(Math.max(0,g.index-1),g.index),x=new RegExp("^[".concat(null==a?void 0:a.join(""),"\0]?$")).test(v);if(null!==a&&!x)return null;let y=m+g.index,b=y+g[0].length;return(l&&u.test(f.slice(b-1,b+1))&&(g[0]+=" ",b+=1),y<s.pos&&b>=s.pos)?{range:{from:y,to:b},query:g[0].slice(n.length),text:g[0]}:null}e.s(["Editor",()=>lr,"Extension",()=>sp,"Mark",()=>sn,"Node",()=>ll,"NodeView",()=>lc,"callOrReturn",()=>oK,"escapeForRegEx",()=>ld,"getExtensionField",()=>oz,"getRenderedAttributes",()=>oZ,"getText",()=>sz,"getTextSerializersFromSchema",()=>sf,"isNodeEmpty",()=>sX,"isNodeSelection",()=>s$,"isTextSelection",()=>sw,"markInputRule",()=>li,"markPasteRule",()=>lu,"mergeAttributes",()=>oW,"nodeInputRule",()=>la,"posToDOMRect",()=>sY,"textblockTypeInputRule",()=>lo,"wrappingInputRule",()=>ls],213917);let lh=new t8("suggestion");function lf(e){let t,{pluginKey:n=lh,editor:r,char:i="@",allowSpaces:a=!1,allowToIncludeChar:o=!1,allowedPrefixes:s=[" "],startOfLine:l=!1,decorationTag:c="span",decorationClass:u="suggestion",command:d=()=>null,items:p=()=>[],render:h=()=>({}),allow:f=()=>!0,findSuggestionMatch:m=lp}=e,g=null==h?void 0:h(),v=new t7({key:n,view(){return{update:async(e,n)=>{var i,a,o,s,l,c,u;let h=null==(i=this.key)?void 0:i.getState(n),f=null==(a=this.key)?void 0:a.getState(e.state),m=h.active&&f.active&&h.range.from!==f.range.from,v=!h.active&&f.active,x=h.active&&!f.active,y=!v&&!x&&h.query!==f.query,b=v||m&&y,w=y||m,j=x||m&&y;if(!b&&!w&&!j)return;let C=j&&!b?h:f,k=e.dom.querySelector('[data-decoration-id="'.concat(C.decorationId,'"]'));t={editor:r,range:C.range,query:C.query,text:C.text,items:[],command:e=>d({editor:r,range:C.range,props:e}),decorationNode:k,clientRect:k?()=>{var t;let{decorationId:n}=null==(t=this.key)?void 0:t.getState(r.state),i=e.dom.querySelector('[data-decoration-id="'.concat(n,'"]'));return(null==i?void 0:i.getBoundingClientRect())||null}:null},b&&(null==(o=null==g?void 0:g.onBeforeStart)||o.call(g,t)),w&&(null==(s=null==g?void 0:g.onBeforeUpdate)||s.call(g,t)),(w||b)&&(t.items=await p({editor:r,query:C.query})),j&&(null==(l=null==g?void 0:g.onExit)||l.call(g,t)),w&&(null==(c=null==g?void 0:g.onUpdate)||c.call(g,t)),b&&(null==(u=null==g?void 0:g.onStart)||u.call(g,t))},destroy:()=>{var e;t&&(null==(e=null==g?void 0:g.onExit)||e.call(g,t))}}},state:{init:()=>({active:!1,range:{from:0,to:0},query:null,text:null,composing:!1}),apply(e,t,n,c){let{isEditable:u}=r,{composing:d}=r.view,{selection:p}=e,{empty:h,from:g}=p,v={...t};if(v.composing=d,u&&(h||r.view.composing)){(g<t.range.from||g>t.range.to)&&!d&&!t.composing&&(v.active=!1);let e=m({char:i,allowSpaces:a,allowToIncludeChar:o,allowedPrefixes:s,startOfLine:l,$position:p.$from}),n="id_".concat(Math.floor(0xffffffff*Math.random()));e&&f({editor:r,state:c,range:e.range,isActive:t.active})?(v.active=!0,v.decorationId=t.decorationId?t.decorationId:n,v.range=e.range,v.query=e.query,v.text=e.text):v.active=!1}else v.active=!1;return v.active||(v.decorationId=null,v.range={from:0,to:0},v.query=null,v.text=null),v}},props:{handleKeyDown(e,t){var n;let{active:r,range:i}=v.getState(e.state);return!!r&&((null==(n=null==g?void 0:g.onKeyDown)?void 0:n.call(g,{view:e,event:t,range:i}))||!1)},decorations(e){let{active:t,range:n,decorationId:r}=v.getState(e);return t?ai.create(e.doc,[at.inline(n.from,n.to,{nodeName:c,class:u,"data-decoration-id":r})]):null}}});return v}var lm=e.i(200407),lg=e.i(545858),lv=e.i(966346),lx=e.i(940393),ly=e.i(304649),lb=n,lw=e.i(142219);let lj=lb.z.object({data:lb.z.object({id:lb.z.string(),title:lb.z.string(),value:lb.z.string()})});function lC(e){let{fuseResults:t,command:n,editor:r,range:i,keyboardHandler:a,selectedIndex:o,emptyMessage:s="No results found.",renderFuseResult:c}=e,u=(0,lm.useRef)(null),d=(0,lm.useCallback)(e=>{let r=t[e];r&&n(r)},[n,t]);return(0,lm.useEffect)(()=>{let e=()=>{let e=u.current;if(!e||!i)return;let{from:t}=i,n=r.view.coordsAtPos(t),a=e.offsetHeight,o="".concat(n.left,"px"),s="".concat(n.top-a-8,"px");e.style.left=o,e.style.top=s};return window.addEventListener("scroll",e,!0),window.addEventListener("resize",e),requestAnimationFrame(e),()=>{window.removeEventListener("scroll",e,!0),window.removeEventListener("resize",e)}},[r,i]),(0,lm.useEffect)(()=>{let e=["ArrowUp","ArrowDown","Enter"],t=t=>{if(e.includes(t.key))return t.preventDefault(),t.stopPropagation(),a(t),!0};return document.addEventListener("keydown",t,!0),()=>document.removeEventListener("keydown",t,!0)},[a]),(0,lg.createPortal)((0,l.jsx)("div",{ref:u,className:"fixed z-50 w-72",style:{top:0,left:0},children:(0,l.jsx)(lx.Command,{className:(0,ly.cn)("material-menu animate-in fade-in-0 zoom-in-95 border border-gray-200",0===t.length&&"hidden"),children:(0,l.jsxs)(lx.CommandList,{className:"max-h-min",children:[(0,l.jsx)(lx.CommandEmpty,{children:s}),(0,l.jsx)(lx.CommandGroup,{children:t.map((e,n)=>(0,l.jsx)(lx.CommandItem,{value:e.item.data.title,onSelect:()=>d(n),tabIndex:0,className:(0,ly.cn)(n===o?"bg-gray-100":"","my-1 h-8 px-2",0===n?"mt-0":"",n===t.length-1?"mb-0":""),children:c({fuseResult:e,isSelected:n===o})},e.item.data.id))})]})})}),document.body)}function lk(e){let{char:t,pluginKey:n,options:r,getFuseResults:i,onCommand:a,renderFuseResult:o}=e;return sp.create({name:"".concat(t,"MenuExtension"),addOptions:()=>r||{},addProseMirrorPlugins(){return[lf({editor:this.editor,char:t,pluginKey:n,items:e=>{let{query:t}=e,n=lw.store.get(i);return n?n.call(this,t):[]},render:()=>{let e,t=0,n=[],r=e=>{t=e,u()},i=i=>{if("ArrowUp"===i.event.key)return r((t-1+n.length)%n.length),!0;if("ArrowDown"===i.event.key)return r((t+1)%n.length),!0;if("Enter"===i.event.key){let r=n[t];return r&&a(this.editor,r,e),!0}if("Tab"===i.event.key){i.event.preventDefault();let e=i.event.shiftKey?-1:1;return r((t+e+n.length)%n.length),!0}return"Escape"===i.event.key&&(d(),!0)},s=null,c=null,u=()=>{c&&c.render((0,l.jsx)(lC,{fuseResults:n,command:t=>a(this.editor,t,e),editor:this.editor,range:e,renderFuseResult:o,keyboardHandler:t=>i({event:t,view:this.editor.view,range:e}),selectedIndex:t}))},d=()=>{c&&(c.unmount(),c=null),s&&(s.remove(),s=null)};return{onStart:r=>{e=r.range,t=0,n=r.items,s=document.createElement("div"),document.body.appendChild(s),c=(0,lv.createRoot)(s),u()},onUpdate:t=>{n=t.items,e=t.range,u()},onKeyDown:i,onExit:d}},command:()=>{}})]}})}function lS(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;if(!t.length)return e;let r=t.find(e=>e.key===n);if(!(null==r?void 0:r.indices))return e;let i=[...r.indices].sort((e,t)=>e[0]-t[0]),a=[],o=0;return i.forEach((t,n)=>{let[r,i]=t;i-r+1<=2||(r>o&&a.push(e.slice(o,r)),a.push((0,l.jsx)("span",{className:"rounded-sm bg-teal-100 dark:bg-[#13776C]",children:e.slice(r,i+1)},n)),o=i+1)}),o<e.length&&a.push(e.slice(o)),a}e.s(["MenuItemBaseSchema",0,lj,"createMenuExtension",()=>lk,"highlightFuseMatches",()=>lS],632814);var lN=n;let lE=lN.z.discriminatedUnion("type",[lj.extend({type:lN.z.literal("search-web")})]),lM="actionMenuItem";function lI(e){let{type:t,data:n}=e;return(0,o.jsx)(s.Globe,{})}e.s(["ACTION_MENU_ITEM_TYPE",0,lM,"ActionMenuItemSchema",0,lE,"getActionMenuItemIcon",()=>lI],770496);var lD=t,lT=e.i(530346),lA=e.i(122736),lL=e.i(349774),lP=s,lR=n;let l_=lR.z.discriminatedUnion("type",[lj.extend({type:lR.z.literal("file")}),lj.extend({type:lR.z.literal("url")}),lj.extend({type:lR.z.literal("directory")})]),lO="mentionMenuItem";function lF(e){let{type:t,data:n}=e;if(!n.value)return{icon:null};switch(t){case"file":if(n.value.endsWith(".tsx"))return{icon:(0,lD.jsx)(lT.LogoReact,{}),className:"text-current"};return{icon:(0,lD.jsx)(lL.File,{})};case"directory":return{icon:(0,lD.jsx)(lA.FolderOpen,{})};case"url":return{icon:(0,lD.jsx)(lP.Globe,{})};default:return{icon:t}}}e.s(["MENTION_MENU_ITEM_TYPE",0,lO,"MentionMenuItemSchema",0,l_,"getMentionIcon",()=>lF],73687);var lV=e.i(139962);let lB=a.z.object({id:a.z.string(),name:a.z.string(),url:a.z.string(),content:a.z.string().or(a.z.instanceof(ArrayBuffer)).optional(),status:a.z.enum(["uploading","done","compressing"]).optional(),size:a.z.number(),isImage:a.z.boolean(),isSavedDraft:a.z.boolean().optional(),v0Type:lV.v0AttachmentTypeSchema,tokens:a.z.number().optional(),contentType:a.z.string().optional()}),lz=a.z.object({file:a.z.string(),componentName:a.z.string().optional(),line:a.z.number(),column:a.z.number(),sourceContext:a.z.string()}),lH=a.z.union([a.z.discriminatedUnion("type",[a.z.object({type:a.z.literal("local-file"),data:a.z.lazy(()=>lB)}),a.z.object({type:a.z.literal("quote"),data:a.z.object({quote:a.z.string()})}),a.z.object({type:a.z.literal("refinement-element"),data:a.z.object({file:a.z.string(),line:a.z.number(),column:a.z.number(),sourceContext:a.z.string(),componentName:a.z.string().optional()})})]),lE,l_]);function lU(e){return e.filter(e=>"local-file"===e.type&&"done"===e.data.status).map(e=>({url:e.data.url,name:e.data.name,size:e.data.size,content:"string"==typeof e.data.content?e.data.content:void 0,v0Type:e.data.v0Type,contentType:e.data.contentType}))}e.s(["PromptContextItemSchema",0,lH,"RefinementElementDataSchema",0,lz,"convertContextToAttachments",()=>lU],428350);let lq="v0-local-drafts",lW="_new-chat_",lZ=n.z.object({json:n.z.string().nullable(),html:n.z.string().nullable(),context:n.z.array(lH).default([]),updatedAt:n.z.number().default(()=>Date.now()),refinementElementSelected:lz.nullable().catch(()=>null)}),lG=lZ.extend({id:n.z.string()}),lK=lZ.extend({localFileInfos:n.z.array(n.z.any()).optional(),fileMap:n.z.record(n.z.string(),n.z.any()).default({}),promptQueue:n.z.array(lG).default([])}),lX=n.z.record(n.z.string(),lK),l$={json:null,html:null,refinementElementSelected:null,context:[],localFileInfos:[],fileMap:{},updatedAt:Date.now(),promptQueue:[]};function lY(){try{let e=localStorage.getItem(lq);if(!e)return{};let t=JSON.parse(e),n=lX.safeParse(t);if(n.success)return n.data;let r={};for(let[e,n]of Object.entries(t)){let t=lK.safeParse(n);if(t.success){r[e]=t.data;continue}if(n&&"object"==typeof n&&"context"in n&&Array.isArray(n.context)){let t=n.context.filter(e=>lH.safeParse(e).success),i=lK.safeParse({...n,context:t});if(i.success){r[e]=i.data;continue}}console.debug("Dropping invalid draft from localStorage:",e)}return r}catch(e){return console.debug("Error parsing drafts from localStorage:",e),{}}}function lJ(e){try{localStorage.setItem(lq,JSON.stringify(e))}catch(e){console.debug("Error saving drafts to localStorage:",e)}}function lQ(e,t){let n=t?lW:e;return{getLocalDraft:function(){try{var t;let i=lY();if(!(n in i))return l$;let a=i[n],o=null;if(a.json)try{o=JSON.parse(a.json)}catch(t){console.warn("Failed to parse draft json for chat",e,t),(0,r.track)("PromptDraftSaveError",{chatId:e,errorMsg:t.message})}let s=null!=(t=a.context)?t:[];return(!s||0===s.length)&&Array.isArray(a.localFileInfos)&&(s=a.localFileInfos.map(e=>({type:"local-file",data:e}))),{...a,json:o,context:s,fileMap:a.fileMap,promptQueue:a.promptQueue||a.messageQueue||[]}}catch(t){return console.debug("Draft not found for chat:",e),l$}},updateLocalDraft:function(t){let{json:a,html:o,context:s,fileMap:l,promptQueue:c,refinementElementSelected:u}=t;try{var d,p;let e=lY(),t=null!=(d=e[n])?d:l$,r=void 0===a?t.json:"object"==typeof a?JSON.stringify((0,i.default)(a)):a,h=void 0===o?t.html:o,f=void 0===s?null!=(p=t.context)?p:t.localFileInfos?t.localFileInfos.map(e=>({type:"local-file",data:e})):[]:s,m=void 0===l?t.fileMap:l,g=void 0===c?t.promptQueue:c,v=!r||"null"===r||'{"type":"doc","content":[{"type":"paragraph"}]}'===r,x=!h||"<p></p>"===h,y=f.length>0,b=g.length>0;if(v&&x&&!y&&!b){delete e[n],lJ(e);return}let w=void 0===u?t.refinementElementSelected:u;e[n]={json:r,html:h,refinementElementSelected:w,context:f,fileMap:m,updatedAt:Date.now(),promptQueue:g},lJ(e)}catch(t){console.debug("Ignored localStorage error:",t),(0,r.track)("PromptDraftSaveError",{chatId:e,errorMsg:t.message})}},deleteLocalDraft:function(){let e=lY();delete e[n],lJ(e)}}}function l0(e){let{placeholderElementId:n,chatId:r,isNewChat:i}=e,a=l1(n),o=l1("".concat(a,"-focus"));return(0,t.jsx)("script",{id:"v0-draft-inject-script-".concat(a),dangerouslySetInnerHTML:{__html:"\n          const ".concat(a," = document.getElementById('").concat(n,"');\n          if (").concat(a,") {\n            // Resolve Drafts\n            try {\n              const draftsJson = localStorage.getItem('").concat(lq,"');\n              if (draftsJson) {\n                const drafts = JSON.parse(draftsJson);\n                const draftKey = ").concat(i?"'".concat(lW,"'"):"'".concat(r,"'"),";\n                const draft = drafts[draftKey];\n                \n                if (draft && draft.html) {\n                  ").concat(a,".innerHTML = draft.html;\n                }\n              }\n            } catch (error) {\n              console.debug('Error accessing draft from localStorage:', error);\n            }\n\n            // Focus the placeholder persistently\n            let userRemovedFocus = false;\n            let focusInterval;\n            let focusAttempts = 0;\n            \n            // Track if user manually removes focus\n            ").concat(a,".addEventListener('blur', () => {\n              if (document.activeElement !== ").concat(a,") {\n                userRemovedFocus = true;\n                if (focusInterval) clearInterval(focusInterval);\n              }\n            });\n            \n            // Try focusing every 10ms until successful or user removes focus\n            focusInterval = setInterval(() => {\n              const ").concat(o," = document.getElementById('").concat(n,"');\n              if (!").concat(o,") {\n                clearInterval(focusInterval);\n                return;\n              }\n\n              if (userRemovedFocus) {\n                clearInterval(focusInterval);\n                return;\n              }\n              \n              if (document.activeElement !== ").concat(o,") {\n                focusAttempts++;\n                ").concat(o,".focus();\n                // Move cursor to end after focusing\n                const range = document.createRange();\n                const selection = window.getSelection();\n                if (").concat(o,".childNodes.length > 0) {\n                  range.selectNodeContents(").concat(o,");\n                  range.collapse(false);\n                  selection.removeAllRanges();\n                  selection.addRange(range);\n                }\n              } else {\n                // Successfully focused, stop trying\n                clearInterval(focusInterval);\n              }\n            }, 16);\n          }\n        ")}})}function l1(e){return e.replace(/[^a-zA-Z0-9]/g,"_")}function l2(e){return{content:e.json?JSON.parse(e.json):{version:1,parts:[]},attachments:lU(e.context)}}function l5(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"file";return e.map((e,n)=>{var r,i;return{id:"".concat(t,"-").concat(Date.now(),"-").concat(n,"-").concat(Math.random().toString(36).substring(2,11)),name:e.name||"attachment",url:e.url,content:e.content,status:"done",size:e.size,isImage:null!=(i=null==(r=e.contentType)?void 0:r.startsWith("image/"))&&i,v0Type:e.v0Type||"screenshot",contentType:e.contentType}})}function l4(e,t){if(!e)return;let n=e;if(Array.isArray(n))for(let e of n)l4(e,t);else if(Array.isArray(n.content))for(let e of n.content)l4(e,t);else if("text"===n.type)t.push({type:"mdx",content:n.text||""});else if("hardBreak"===n.type)t.push({type:"mdx",content:"\n"});else if(n.type===lO){let e=n.attrs;switch(e.type){case"file":t.push({type:"mention-file",filePath:e.data.value});break;case"url":t.push({type:"mention-url",url:e.data.value});break;case"directory":t.push({type:"mention-directory",directoryPath:e.data.value});break;default:return e.type}}}function l3(e){let t=[];for(let n of e){let e=n.type;switch(e){case"hidden-context":case"refinement-element":case"confirmed-steps":case"parse-error":break;case"mdx":t.push({type:"text",text:n.content||""});break;case"mention-url":t.push({type:"mentionMenuItem",attrs:{data:{id:"mention-url-".concat(n.url),value:n.url,title:n.url},type:"url"}});break;case"mention-file":t.push({type:"mentionMenuItem",attrs:{data:{id:"mention-file-".concat(n.filePath),value:n.filePath,title:n.filePath},type:"file"}});break;case"mention-directory":t.push({type:"mentionMenuItem",attrs:{data:{id:"mention-directory-".concat(n.directoryPath),value:n.directoryPath,title:n.directoryPath},type:"directory"}});break;default:return e}}return{content:[{content:t,type:"paragraph"}],type:"doc"}}function l7(e,t,n){if(!t)return;let r=t;if((null==r?void 0:r.type)===e&&n.push(r.attrs),Array.isArray(r))for(let t of r)l7(e,t,n);else if(Array.isArray(null==r?void 0:r.content))for(let t of r.content)l7(e,t,n)}e.s(["InlineInjectDraftScript",()=>l0,"convertAttachmentsToLocalFiles",()=>l5,"convertQueuedMessageToSubmitPayload",()=>l2,"localDraftController",()=>lQ],654225),e.s(["getContentJsonFromMessageContentParts",()=>l3,"getMessageContentPartsFromContentJson",()=>l4,"getNodesFromContentJson",()=>l7],605667)},382559,e=>{"use strict";var t=e.i(200407),n=e.i(346970);function r(e){let{data:r,mutate:i}=(0,n.default)(["block:file-editing-status",e],{fallbackData:!1});return[r,(0,t.useCallback)(e=>{i(e)},[i])]}e.s(["useFileEditingStatus",()=>r])},318452,879332,e=>{"use strict";var t=e.i(605528);let n=(0,t.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8ZM10.5 11.5607L9.96967 11.0303L8 9.06066L6.03033 11.0303L5.5 11.5607L4.43934 10.5L4.96967 9.96967L6.93934 8L4.96967 6.03033L4.43934 5.5L5.5 4.43934L6.03033 4.96967L8 6.93934L9.96967 4.96967L10.5 4.43934L11.5607 5.5L11.0303 6.03033L9.06066 8L11.0303 9.96967L11.5607 10.5L10.5 11.5607Z" fill="currentColor"/>');e.s(["CrossCircleFill",0,n],318452);let r=(0,t.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M9.24996 12.0607L8.71963 11.5303L5.89641 8.7071C5.50588 8.31657 5.50588 7.68341 5.89641 7.29288L8.71963 4.46966L9.24996 3.93933L10.3106 4.99999L9.78029 5.53032L7.31062 7.99999L9.78029 10.4697L10.3106 11L9.24996 12.0607Z" fill="currentColor"/>');e.s(["ChevronLeftSmall",0,r],879332)},356388,e=>{"use strict";let t=(0,e.i(605528).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M11.5 9.75V11.25C11.5 11.3881 11.3881 11.5 11.25 11.5H4.75C4.61193 11.5 4.5 11.3881 4.5 11.25L4.5 4.75C4.5 4.61193 4.61193 4.5 4.75 4.5H6.25H7V3H6.25H4.75C3.7835 3 3 3.7835 3 4.75V11.25C3 12.2165 3.7835 13 4.75 13H11.25C12.2165 13 13 12.2165 13 11.25V9.75V9H11.5V9.75ZM8.5 3H9.25H12.2495C12.6637 3 12.9995 3.33579 12.9995 3.75V6.75V7.5H11.4995V6.75V5.56066L8.53033 8.52978L8 9.06011L6.93934 7.99945L7.46967 7.46912L10.4388 4.5H9.25H8.5V3Z" fill="currentColor"/>');e.s(["ExternalSmall",0,t])},295548,674523,921097,53708,e=>{"use strict";var t=e.i(605528);let n=(0,t.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M8.55846 0.5C9.13413 0.5 9.65902 0.829456 9.90929 1.34788L15.8073 13.5653C16.1279 14.2293 15.6441 15 14.9068 15H1.09316C0.355835 15 -0.127943 14.2293 0.192608 13.5653L6.09065 1.34787C6.34092 0.829454 6.86581 0.5 7.44148 0.5H8.55846ZM8.74997 4.75V5.5V8V8.75H7.24997V8V5.5V4.75H8.74997ZM7.99997 12C8.55226 12 8.99997 11.5523 8.99997 11C8.99997 10.4477 8.55226 10 7.99997 10C7.44769 10 6.99997 10.4477 6.99997 11C6.99997 11.5523 7.44769 12 7.99997 12Z" fill="currentColor"/>');e.s(["WarningFill",0,n],295548);let r=["upstash","neon","supabase","blob","groq","fal","deepinfra","xai"],i={upstash:"Upstash for Redis",neon:"Neon",supabase:"Supabase",blob:"Blob",groq:"Groq",xai:"Grok",fal:"fal",deepinfra:"Deep Infra","api-key":"Groq"},a={"Upstash for Redis":"upstash",Neon:"neon",Supabase:"supabase",Blob:"blob",Groq:"groq",Grok:"xai",fal:"fal","Deep Infra":"deepinfra"},o={"Upstash for Redis":"database",Neon:"database",Supabase:"database",Blob:"database",Groq:"ai",Grok:"ai",fal:"ai","Deep Infra":"ai"},s={Supabase:"/chat-static/citation/supabase.svg",Neon:"/chat-static/citation/neon.svg","Upstash for Redis":"/chat-static/citation/upstash.svg",Blob:"/chat-static/icons/blob-no-background.svg",fal:"/chat-static/icons/fal.svg",Groq:"/chat-static/icons/groq-no-background.svg",Grok:"/chat-static/icons/grok.svg","Deep Infra":"/chat-static/icons/deepinfra.svg"},l=["supabase","neon"],c=["Groq","Grok","fal","Deep Infra"],u=[new Set(l)],d={"edge-config":{title:"Edge Config",description:"Ultra-low latency reads",icon:"/chat-static/icons/edge-config.svg"},blob:{title:"Blob",description:"Fast object storage",icon:"/chat-static/icons/blob.svg"}};e.s(["AI_INTEGRATION_NAMES",0,c,"INTEGRATION_NAME_TO_CATEGORY",0,o,"INTEGRATION_NAME_TO_SLUG",0,a,"INTEGRATION_NAME_TO_SVG",0,s,"INTEGRATION_SLUG_TO_NAME",0,i,"POTENTIALLY_CONFLICTING_INTEGRATIONS",0,u,"RECOMMENDED_INTEGRATION_SLUGS",0,r,"SQL_STORE_SLUGS",0,l,"STORE_INFO",0,d],674523);var p=e.i(346970);function h(e){let{data:t,isLoading:n,mutate:r,error:i}=(0,p.default)(e?["chat:dont-show-again",e]:null,{revalidateOnFocus:!1,revalidateOnMount:!1,revalidateOnReconnect:!1}),a=(n,i)=>{if(!e)return;let a=[...t||[],...n,...i];return r(async()=>{let t=await fetch("/chat/api/chat/integrations/dont-show-again",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chatId:e,missingEnvVars:n,missingIntegrations:i})});if(!(await t.json()).success)throw Error('Failed to update "don\'t show again" list');return a},{optimisticData:a,rollbackOnError:!0,revalidate:!1})};return{dontShowAgain:t,isLoading:n,error:i,refetchDontShowAgain:r,addToDontShowAgain:a}}e.s(["useDontShowAgain",()=>h],921097);let f=(0,t.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M13.5 4.5C14.3284 4.5 15 3.82843 15 3C15 2.17157 14.3284 1.5 13.5 1.5C13.1212 1.5 12.7752 1.64043 12.5111 1.87207C12.4768 1.89889 12.4444 1.92909 12.4143 1.96262L8.29606 6.55029L7.64437 4.68404C6.97852 2.77723 5.17966 1.5 3.15993 1.5H2V3H3.15993C4.54185 3 5.77265 3.87389 6.22823 5.17855L7.1522 7.82454L4.24177 11.0667C3.85139 11.5016 3.16427 11.5008 2.57158 11.5001C2.54756 11.5 2.52369 11.5 2.5 11.5C1.67157 11.5 1 12.1716 1 13C1 13.8284 1.67157 14.5 2.5 14.5C2.87465 14.5 3.21721 14.3627 3.48009 14.1356C3.52245 14.1049 3.56223 14.0692 3.59859 14.0287L7.71672 9.44115L8.87551 12.7596C9.23003 13.7748 10.1878 14.4548 11.2631 14.4548C11.9338 14.4548 12.5771 14.1884 13.0514 13.7141L14.5303 12.2352L13.4697 11.1745L11.9907 12.6534C11.7978 12.8464 11.536 12.9548 11.2631 12.9548C10.8256 12.9548 10.4359 12.6781 10.2917 12.2651L8.86058 8.1669L11.7636 4.93297C12.1536 4.49852 12.8399 4.49929 13.4317 4.49995C13.4546 4.49997 13.4774 4.5 13.5 4.5Z" fill="currentColor"/>');e.s(["Variable",0,f],53708)},379584,e=>{"use strict";var t=e.i(547259),n=(0,t.createServerReference)("40a47f441954fa5b6ae190c165e33051e25c49bb24",t.callServer,void 0,t.findSourceMapURL,"exportChat");e.s(["exportChat",()=>n])},967658,e=>{"use strict";let t=(0,e.i(121793).default)("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);e.s(["default",()=>t])},685816,e=>{"use strict";var t=e.i(967658);e.s(["FileJson",()=>t.default])},768167,e=>{"use strict";var t=e.i(346970),n=e.i(912106);function r(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],{data:n,mutate:r}=(0,t.default)("showOnboardingModal",null,{fallbackData:e});return{showOnboardingModal:n,setShowOnboardingModal:r}}function i(e){return(0,n.mutate)("showOnboardingModal",e)}e.s(["mutateOnboardingModal",()=>i,"useOnboardingModal",()=>r])},120945,e=>{"use strict";var t=e.i(832520),n=e.i(686832),r=e.i(780292),i=e.i(37737),a=e.i(200407);function o(e){let{type:o,children:s,forceOpen:l,onOpenChange:c,onOpenAutoFocus:u,...d}=e,p=(0,i.getDialogsAtoms)(),h=(0,r.useAtomValue)(p.visibleDialogType),f=(0,r.useAtomValue)(p.dialogOpen),m=(0,a.useId)(),g=(0,a.useCallback)(e=>{c&&c(e),e&&f?(0,i.openDialog)(f):l||(0,i.closeDialog)()},[f,l,c]),v=(0,a.useMemo)(()=>h===o||l,[o,h,l]),x=(0,a.useCallback)(e=>{if(u)u(e);else{e.preventDefault();let t=document.getElementById(m);t&&t.focus()}},[u,m]);return(0,t.jsx)(n.Modal,{"aria-description":"Dialog",id:m,open:v,onOpenChange:g,onOpenAutoFocus:x,tabIndex:-1,...d,children:s})}e.s(["AtomicDialog",()=>o])},261825,228520,e=>{"use strict";e.s(["TeamCreateDialog",()=>o],261825);var t=e.i(832520),n=e.i(686832),r=e.i(176248),i=e.i(120945);e.i(904347);var a=e.i(37737);function o(){return(0,t.jsxs)(i.AtomicDialog,{type:"createTeam",children:[(0,t.jsxs)(n.ModalHeader,{children:[(0,t.jsx)(n.ModalTitle,{children:"Create a Team on Vercel"}),(0,t.jsxs)(n.ModalDescription,{children:["You will be redirected to"," ",(0,t.jsx)("span",{className:"font-medium",children:"vercel.com"})," to create a new Vercel team. If you create a Vercel Pro team, you will be charged for the Vercel Pro subscription in addition to the v0 Team plan."]})]}),(0,t.jsxs)(n.ModalFooter,{children:[(0,t.jsx)(r.Button,{size:"sm",variant:"secondary",onClick:a.closeDialog,children:"Cancel"}),(0,t.jsx)(r.Button,{size:"sm",asChild:!0,variant:"default",children:(0,t.jsx)("a",{href:"https://vercel.com/dashboard?createTeam=v0-checkout-page",target:"_blank",children:"Continue to Vercel"})})]})]})}e.s(["TeamRequestAccessDialog",()=>g],228520);var s=t,l=n,c=r,u=e.i(32170),d=e.i(200407);e.i(563948);var p=e.i(407562),h=e.i(837062),f=i,m=a;function g(e){let{slug:t,name:n}=e,{user:r}=(0,u.useUser)(),{refreshScopes:i}=(0,h.useScopes)(),[a,o]=(0,d.useTransition)(),g=(0,d.useCallback)(e=>{a||o(async()=>{if(!(await fetch("/chat/api/team/request-access/".concat(e),{method:"POST"})).ok)return void p.toast.error("Failed to request access");p.toast.success("Access requested"),(0,m.closeDialog)(),i()})},[a,i]);return(0,s.jsxs)(f.AtomicDialog,{type:"requestAccess",children:[(0,s.jsxs)(l.ModalHeader,{children:[(0,s.jsx)(l.ModalTitle,{children:"Request Access"}),(0,s.jsxs)(l.ModalDescription,{children:["Your account"," ",(0,s.jsx)("b",{className:"font-medium",children:(null==r?void 0:r.name)||(null==r?void 0:r.username)})," does not have permission to use v0 in"," ",(0,s.jsx)("b",{className:"font-medium",children:n||t})," Team. Request access, or switch to a different Team."]})]}),(0,s.jsxs)(l.ModalFooter,{children:[(0,s.jsx)(c.Button,{size:"sm",variant:"secondary",onClick:m.closeDialog,children:"Cancel"}),(0,s.jsx)(c.Button,{disabled:a,onClick:()=>g(t),size:"sm",children:"Request Access"})]})]})}},206037,e=>{"use strict";var t=e.i(346970),n=e.i(403055),r=t;let i=e=>fetch(e).then(e=>e.json()),a=()=>{let{data:e,isLoading:t}=(0,r.default)("/api/auth/info",i);return{user:null==e?void 0:e.user,isLoggedIn:t?void 0:!!(null==e?void 0:e.user),agreementStatus:t||null==e?void 0:e.agreementStatus}};function o(e,r){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0,{isLoggedIn:s}=a(),{data:l,isLoading:c,mutate:u}=(0,t.default)(()=>{let t;if((null==r?void 0:r.startsWith("team_"))&&(t=r),e&&s){let e=new URLSearchParams;return t&&e.set("teamId",t),i&&e.set("paymentMethod","true"),"/api/plan?".concat(e.toString())}return null},n.fetcher,{revalidateOnFocus:!1,dedupingInterval:o}),d=l;if(l&&Array.isArray(l.plans))for(let e=l.plans.length-1;e>=0;e--){let t=l.plans[e].slug;("v0-platinum"===t||"v0-ultra"===t)&&l.plans.splice(e,1)}return{planInfo:d,planSlug:null==d?void 0:d.currentPlanSlug,isLoading:c,update:u}}function s(e){return"subscription"in e.current}e.s(["isUserPlanInfo",()=>s,"usePlanInfo",()=>o],206037)},3156,419412,307778,e=>{"use strict";e.s(["TeamUpgradeDialog",()=>h],3156);var t=e.i(832520),n=e.i(686832),r=e.i(176248),i=e.i(596359),a=e.i(356388),o=e.i(297239),s=e.i(206037),l=e.i(298515),c=e.i(491341),u=e.i(53223),d=e.i(120945);e.i(904347);var p=e.i(37737);function h(e){var h;let{id:f,name:m,slug:g}=e,v=(0,o.useT)(),{planInfo:x,isLoading:y}=(0,s.usePlanInfo)(!0,f),b=null==x||null==(h=x.plans)?void 0:h.find(e=>"v0-team"===e.slug);if(y||!b)return null;let w=(0,l.formatPlanTotalPrice)(b);return(0,t.jsxs)(d.AtomicDialog,{type:"upgradeTeam",children:[(0,t.jsxs)(n.ModalHeader,{className:"pb-4!",children:[(0,t.jsx)(n.ModalTitle,{children:v("teamUpgradeDialog.title")}),(0,t.jsx)(n.ModalDescription,{children:v("teamUpgradeDialog.description")(m||g)})]}),(0,t.jsxs)(n.ModalContent,{className:"flex flex-col gap-4",children:[(0,t.jsxs)("div",{className:"border-alpha-200 bg-muted m-0 space-y-3 rounded-sm border p-4!",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("p",{className:"font-semibold",children:v("teamUpgradeDialog.planName")("Team")}),(0,t.jsxs)("div",{className:"inline-flex items-center gap-0.5",children:[(0,t.jsx)("p",{className:"text-xl font-semibold leading-7",children:w}),(0,t.jsx)("p",{className:"leading-5 text-gray-500",children:v("teamUpgradeDialog.userPerMonth")})]})]}),(0,t.jsx)("p",{className:"font-semibold",children:v("teamUpgradeDialog.forFastMovingTeams")}),(0,t.jsxs)("ul",{className:"space-y-3 text-sm",children:[(0,t.jsxs)("li",{className:"flex items-center gap-2",children:[(0,t.jsx)(i.Check,{size:20})," ",v("teamUpgradeDialog.everythingInPremium")]}),(0,t.jsxs)("li",{className:"flex items-center gap-2",children:[(0,t.jsx)(i.Check,{size:20})," ",v("teamUpgradeDialog.evenHigherLimits")]}),(0,t.jsxs)("li",{className:"flex items-center gap-2",children:[(0,t.jsx)(i.Check,{size:20})," ",v("teamUpgradeDialog.centralizedBilling")]})]})]}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:[v("teamUpgradeDialog.learnMore")," ",(0,t.jsxs)(c.default,{className:"inline-flex items-center text-blue-600",href:"/pricing",children:[v("teamUpgradeDialog.pricingPage"),(0,t.jsx)(a.ExternalSmall,{})]}),v("teamUpgradeDialog.afterLearnMore")]})]}),(0,t.jsxs)(n.ModalFooter,{children:[(0,t.jsx)(r.Button,{size:"sm",variant:"secondary",onClick:p.closeDialog,children:v("teamUpgradeDialog.cancel")}),(0,t.jsx)(r.Button,{asChild:!0,onClick:()=>{(0,u.track)("ClickGoToUpgradeTeamPage",{teamId:f}),(0,p.closeDialog)()},size:"sm",children:(0,t.jsx)(c.default,{href:"/chat/upgrade?teamId=".concat(f),children:v("teamUpgradeDialog.startTeamPlan")})})]})]})}var f=e.i(547259),m=(0,f.createServerReference)("40c785a751fcc84f237e9f2c88996e1646bde3a944",f.callServer,void 0,f.findSourceMapURL,"updateChatTitle");e.s(["updateChatTitle",()=>m],419412);var g=t,v=e.i(304649);function x(e){let{className:t,...n}=e;return(0,g.jsx)("svg",{className:(0,v.cn)("h-4 w-4 animate-spin",t),fill:"currentColor",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg",...n,children:(0,g.jsx)("path",{d:"M232 128a104 104 0 0 1-208 0c0-41 23.81-78.36 60.66-95.27a8 8 0 0 1 6.68 14.54C60.15 61.59 40 93.27 40 128a88 88 0 0 0 176 0c0-34.73-20.15-66.41-51.34-80.73a8 8 0 0 1 6.68-14.54C208.19 49.64 232 87 232 128Z"})})}e.s(["IconSpinner",()=>x],307778)},589910,e=>{"use strict";var t=e.i(832520),n=e.i(304649);function r(e){let{count:r,max:i,className:a,displayThreshold:o,alertThreshold:s,message:l,messageThreshold:c,...u}=e;return o=null!=o?o:.75*i,c=null!=c?c:.9*i,s=null!=s?s:.95*i,(0,t.jsxs)("div",{className:(0,n.cn)("pointer-events-none items-center gap-2 rounded-md px-2 py-1 text-xs",r>=o?"flex":"hidden",r>=s?"text-red-500":"text-gray-500",a),...u,children:[l&&r>=c&&(0,t.jsx)("span",{children:l}),(0,t.jsxs)("span",{className:"ml-auto tabular-nums",children:[r.toLocaleString(),"/",i.toLocaleString()]})]})}e.s(["InputCounter",()=>r])},988388,(e,t,n)=>{"use strict";let r=/[|\\{}()[\]^$+*?.-]/g;t.exports=e=>{if("string"!=typeof e)throw TypeError("Expected a string");return e.replace(r,"\\$&")}},702739,(e,t,n)=>{var r=1/0,i="[object Symbol]",a=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,o=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]","g"),s={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"ss"},l=e.g&&e.g.Object===Object&&e.g,c="object"==typeof self&&self&&self.Object===Object&&self,u=l||c||Function("return this")(),d=function(e){return function(t){return null==e?void 0:e[t]}}(s),p=Object.prototype.toString,h=u.Symbol,f=h?h.prototype:void 0,m=f?f.toString:void 0;function g(e){if("string"==typeof e)return e;if(x(e))return m?m.call(e):"";var t=e+"";return"0"==t&&1/e==-r?"-0":t}function v(e){return!!e&&"object"==typeof e}function x(e){return"symbol"==typeof e||v(e)&&p.call(e)==i}function y(e){return null==e?"":g(e)}t.exports=function(e){return(e=y(e))&&e.replace(a,d).replace(o,"")}},605634,(e,t,n)=>{t.exports=[["ß","ss"],["ä","ae"],["Ä","Ae"],["ö","oe"],["Ö","Oe"],["ü","ue"],["Ü","Ue"],["À","A"],["Á","A"],["Â","A"],["Ã","A"],["Ä","Ae"],["Å","A"],["Æ","AE"],["Ç","C"],["È","E"],["É","E"],["Ê","E"],["Ë","E"],["Ì","I"],["Í","I"],["Î","I"],["Ï","I"],["Ð","D"],["Ñ","N"],["Ò","O"],["Ó","O"],["Ô","O"],["Õ","O"],["Ö","Oe"],["Ő","O"],["Ø","O"],["Ù","U"],["Ú","U"],["Û","U"],["Ü","Ue"],["Ű","U"],["Ý","Y"],["Þ","TH"],["ß","ss"],["à","a"],["á","a"],["â","a"],["ã","a"],["ä","ae"],["å","a"],["æ","ae"],["ç","c"],["è","e"],["é","e"],["ê","e"],["ë","e"],["ì","i"],["í","i"],["î","i"],["ï","i"],["ð","d"],["ñ","n"],["ò","o"],["ó","o"],["ô","o"],["õ","o"],["ö","oe"],["ő","o"],["ø","o"],["ù","u"],["ú","u"],["û","u"],["ü","ue"],["ű","u"],["ý","y"],["þ","th"],["ÿ","y"],["ẞ","SS"],["à","a"],["À","A"],["á","a"],["Á","A"],["â","a"],["Â","A"],["ã","a"],["Ã","A"],["è","e"],["È","E"],["é","e"],["É","E"],["ê","e"],["Ê","E"],["ì","i"],["Ì","I"],["í","i"],["Í","I"],["ò","o"],["Ò","O"],["ó","o"],["Ó","O"],["ô","o"],["Ô","O"],["õ","o"],["Õ","O"],["ù","u"],["Ù","U"],["ú","u"],["Ú","U"],["ý","y"],["Ý","Y"],["ă","a"],["Ă","A"],["Đ","D"],["đ","d"],["ĩ","i"],["Ĩ","I"],["ũ","u"],["Ũ","U"],["ơ","o"],["Ơ","O"],["ư","u"],["Ư","U"],["ạ","a"],["Ạ","A"],["ả","a"],["Ả","A"],["ấ","a"],["Ấ","A"],["ầ","a"],["Ầ","A"],["ẩ","a"],["Ẩ","A"],["ẫ","a"],["Ẫ","A"],["ậ","a"],["Ậ","A"],["ắ","a"],["Ắ","A"],["ằ","a"],["Ằ","A"],["ẳ","a"],["Ẳ","A"],["ẵ","a"],["Ẵ","A"],["ặ","a"],["Ặ","A"],["ẹ","e"],["Ẹ","E"],["ẻ","e"],["Ẻ","E"],["ẽ","e"],["Ẽ","E"],["ế","e"],["Ế","E"],["ề","e"],["Ề","E"],["ể","e"],["Ể","E"],["ễ","e"],["Ễ","E"],["ệ","e"],["Ệ","E"],["ỉ","i"],["Ỉ","I"],["ị","i"],["Ị","I"],["ọ","o"],["Ọ","O"],["ỏ","o"],["Ỏ","O"],["ố","o"],["Ố","O"],["ồ","o"],["Ồ","O"],["ổ","o"],["Ổ","O"],["ỗ","o"],["Ỗ","O"],["ộ","o"],["Ộ","O"],["ớ","o"],["Ớ","O"],["ờ","o"],["Ờ","O"],["ở","o"],["Ở","O"],["ỡ","o"],["Ỡ","O"],["ợ","o"],["Ợ","O"],["ụ","u"],["Ụ","U"],["ủ","u"],["Ủ","U"],["ứ","u"],["Ứ","U"],["ừ","u"],["Ừ","U"],["ử","u"],["Ử","U"],["ữ","u"],["Ữ","U"],["ự","u"],["Ự","U"],["ỳ","y"],["Ỳ","Y"],["ỵ","y"],["Ỵ","Y"],["ỷ","y"],["Ỷ","Y"],["ỹ","y"],["Ỹ","Y"],["ء","e"],["آ","a"],["أ","a"],["ؤ","w"],["إ","i"],["ئ","y"],["ا","a"],["ب","b"],["ة","t"],["ت","t"],["ث","th"],["ج","j"],["ح","h"],["خ","kh"],["د","d"],["ذ","dh"],["ر","r"],["ز","z"],["س","s"],["ش","sh"],["ص","s"],["ض","d"],["ط","t"],["ظ","z"],["ع","e"],["غ","gh"],["ـ","_"],["ف","f"],["ق","q"],["ك","k"],["ل","l"],["م","m"],["ن","n"],["ه","h"],["و","w"],["ى","a"],["ي","y"],["َ‎","a"],["ُ","u"],["ِ‎","i"],["٠","0"],["١","1"],["٢","2"],["٣","3"],["٤","4"],["٥","5"],["٦","6"],["٧","7"],["٨","8"],["٩","9"],["چ","ch"],["ک","k"],["گ","g"],["پ","p"],["ژ","zh"],["ی","y"],["۰","0"],["۱","1"],["۲","2"],["۳","3"],["۴","4"],["۵","5"],["۶","6"],["۷","7"],["۸","8"],["۹","9"],["ټ","p"],["ځ","z"],["څ","c"],["ډ","d"],["ﺫ","d"],["ﺭ","r"],["ړ","r"],["ﺯ","z"],["ږ","g"],["ښ","x"],["ګ","g"],["ڼ","n"],["ۀ","e"],["ې","e"],["ۍ","ai"],["ٹ","t"],["ڈ","d"],["ڑ","r"],["ں","n"],["ہ","h"],["ھ","h"],["ے","e"],["А","A"],["а","a"],["Б","B"],["б","b"],["В","V"],["в","v"],["Г","G"],["г","g"],["Д","D"],["д","d"],["Е","E"],["е","e"],["Ж","Zh"],["ж","zh"],["З","Z"],["з","z"],["И","I"],["и","i"],["Й","J"],["й","j"],["К","K"],["к","k"],["Л","L"],["л","l"],["М","M"],["м","m"],["Н","N"],["н","n"],["О","O"],["о","o"],["П","P"],["п","p"],["Р","R"],["р","r"],["С","S"],["с","s"],["Т","T"],["т","t"],["У","U"],["у","u"],["Ф","F"],["ф","f"],["Х","H"],["х","h"],["Ц","Cz"],["ц","cz"],["Ч","Ch"],["ч","ch"],["Ш","Sh"],["ш","sh"],["Щ","Shh"],["щ","shh"],["Ъ",""],["ъ",""],["Ы","Y"],["ы","y"],["Ь",""],["ь",""],["Э","E"],["э","e"],["Ю","Yu"],["ю","yu"],["Я","Ya"],["я","ya"],["Ё","Yo"],["ё","yo"],["ă","a"],["Ă","A"],["ș","s"],["Ș","S"],["ț","t"],["Ț","T"],["ţ","t"],["Ţ","T"],["ş","s"],["Ş","s"],["ç","c"],["Ç","c"],["ğ","g"],["Ğ","g"],["ı","i"],["İ","i"],["ա","a"],["բ","b"],["գ","ɡ"],["դ","d"],["ե","ye"],["զ","z"],["է","e"],["ը","u"],["թ","t"],["ժ","zh"],["ի","i"],["լ","l"],["խ","kh"],["ծ","ts"],["կ","k"],["հ","h"],["ձ","dz"],["ղ","r"],["ճ","j"],["մ","m"],["յ","j"],["ն","n"],["շ","sh"],["ո","vo"],["չ","ch"],["պ","p"],["ջ","j"],["ռ","r"],["ս","s"],["վ","v"],["տ","t"],["ր","re"],["ց","ts"],["ու","u"],["ւ","v"],["փ","p"],["ք","q"],["օ","o"],["ֆ","f"],["և","yev"],["ა","a"],["ბ","b"],["გ","g"],["დ","d"],["ე","e"],["ვ","v"],["ზ","z"],["თ","t"],["ი","i"],["კ","k"],["ლ","l"],["მ","m"],["ნ","n"],["ო","o"],["პ","p"],["ჟ","zh"],["რ","r"],["ს","s"],["ტ","t"],["უ","u"],["ფ","ph"],["ქ","q"],["ღ","gh"],["ყ","k"],["შ","sh"],["ჩ","ch"],["ც","ts"],["ძ","dz"],["წ","ts"],["ჭ","tch"],["ხ","kh"],["ჯ","j"],["ჰ","h"],["č","c"],["ď","d"],["ě","e"],["ň","n"],["ř","r"],["š","s"],["ť","t"],["ů","u"],["ž","z"],["Č","C"],["Ď","D"],["Ě","E"],["Ň","N"],["Ř","R"],["Š","S"],["Ť","T"],["Ů","U"],["Ž","Z"],["ހ","h"],["ށ","sh"],["ނ","n"],["ރ","r"],["ބ","b"],["ޅ","lh"],["ކ","k"],["އ","a"],["ވ","v"],["މ","m"],["ފ","f"],["ދ","dh"],["ތ","th"],["ލ","l"],["ގ","g"],["ޏ","gn"],["ސ","s"],["ޑ","d"],["ޒ","z"],["ޓ","t"],["ޔ","y"],["ޕ","p"],["ޖ","j"],["ޗ","ch"],["ޘ","tt"],["ޙ","hh"],["ޚ","kh"],["ޛ","th"],["ޜ","z"],["ޝ","sh"],["ޞ","s"],["ޟ","d"],["ޠ","t"],["ޡ","z"],["ޢ","a"],["ޣ","gh"],["ޤ","q"],["ޥ","w"],["ަ","a"],["ާ","aa"],["ި","i"],["ީ","ee"],["ު","u"],["ޫ","oo"],["ެ","e"],["ޭ","ey"],["ޮ","o"],["ޯ","oa"],["ް",""],["α","a"],["β","v"],["γ","g"],["δ","d"],["ε","e"],["ζ","z"],["η","i"],["θ","th"],["ι","i"],["κ","k"],["λ","l"],["μ","m"],["ν","n"],["ξ","ks"],["ο","o"],["π","p"],["ρ","r"],["σ","s"],["τ","t"],["υ","y"],["φ","f"],["χ","x"],["ψ","ps"],["ω","o"],["ά","a"],["έ","e"],["ί","i"],["ό","o"],["ύ","y"],["ή","i"],["ώ","o"],["ς","s"],["ϊ","i"],["ΰ","y"],["ϋ","y"],["ΐ","i"],["Α","A"],["Β","B"],["Γ","G"],["Δ","D"],["Ε","E"],["Ζ","Z"],["Η","I"],["Θ","TH"],["Ι","I"],["Κ","K"],["Λ","L"],["Μ","M"],["Ν","N"],["Ξ","KS"],["Ο","O"],["Π","P"],["Ρ","R"],["Σ","S"],["Τ","T"],["Υ","Y"],["Φ","F"],["Χ","X"],["Ψ","PS"],["Ω","O"],["Ά","A"],["Έ","E"],["Ί","I"],["Ό","O"],["Ύ","Y"],["Ή","I"],["Ώ","O"],["Ϊ","I"],["Ϋ","Y"],["ā","a"],["ē","e"],["ģ","g"],["ī","i"],["ķ","k"],["ļ","l"],["ņ","n"],["ū","u"],["Ā","A"],["Ē","E"],["Ģ","G"],["Ī","I"],["Ķ","k"],["Ļ","L"],["Ņ","N"],["Ū","U"],["č","c"],["š","s"],["ž","z"],["Č","C"],["Š","S"],["Ž","Z"],["ą","a"],["č","c"],["ę","e"],["ė","e"],["į","i"],["š","s"],["ų","u"],["ū","u"],["ž","z"],["Ą","A"],["Č","C"],["Ę","E"],["Ė","E"],["Į","I"],["Š","S"],["Ų","U"],["Ū","U"],["Ќ","Kj"],["ќ","kj"],["Љ","Lj"],["љ","lj"],["Њ","Nj"],["њ","nj"],["Тс","Ts"],["тс","ts"],["ą","a"],["ć","c"],["ę","e"],["ł","l"],["ń","n"],["ś","s"],["ź","z"],["ż","z"],["Ą","A"],["Ć","C"],["Ę","E"],["Ł","L"],["Ń","N"],["Ś","S"],["Ź","Z"],["Ż","Z"],["Є","Ye"],["І","I"],["Ї","Yi"],["Ґ","G"],["є","ye"],["і","i"],["ї","yi"],["ґ","g"]]},307232,(e,t,n)=>{var r=e.r(702739),i=e.r(988388),a=e.r(605634);Object.keys||(Object.keys=function(e){if(e!==Object(e))throw TypeError("Object.keys called on a non-object");var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push(t);return n}),t.exports=function(e,t){if("string"!=typeof e)throw TypeError("Expected a string, got `"+typeof e+"`");var n=e,o=t||{};o=[{customReplacements:[]},o].reduce(function(e,t){try{var n=e;return Object.keys(t).forEach(function(e){n[e]=t[e]}),n}catch(t){return e}},{});var s=[].concat(a).concat(o.customReplacements).filter(Boolean);return r(n=function(e,t){return t.reduce(function(e,t){var n=t[0],r=t[1];return"string"!=typeof n?e:e.replace(RegExp(i(n),"g"),r)},e)}(n=n.normalize(),s))}},858269,(e,t,n)=>{var r=e.r(988388),i=e.r(307232);t.exports=function(e){var t,n;if("string"!=typeof e)throw TypeError("Expected a string, got `"+typeof e+"`");return t=i(e,{customReplacements:[["&"," and "]]}).replace(/([A-Z]{2,})([a-z\d]+)/g,"$1 $2").replace(/([a-z\d]+)([A-Z]{2,})/g,"$1 $2").replace(/([a-z\d])([A-Z])/g,"$1 $2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1 $2").toLowerCase().replace(/[^a-z\d]+/g,"-").replace(/\\/g,""),n=r("-"),t.replace(RegExp(n+"{2,}","g"),"-").replace(RegExp("^"+n+"|"+n+"$","g"),"")}},476171,e=>{"use strict";var t=e.i(858269);function n(e,n){return n?"".concat((0,t.default)(n.slice(0,50)),"-").concat(e):e}e.s(["getSluggifiedId",()=>n])},867751,88114,e=>{"use strict";e.s(["ChatRenameDialog",()=>N],867751);var t=e.i(832520),n=e.i(200407),r=e.i(176248),i=e.i(686832),a=e.i(419412),o=e.i(480118);e.i(563948);var s=e.i(407562),l=e.i(763480),c=e.i(307778),u=e.i(246300),d=e.i(120485),p=e.i(470259);e.i(541536);var h=e.i(23474),f=e.i(589910),m=e.i(297239),g=e.i(873013),v=e.i(70165),x=e.i(703699),y=e.i(476171);e.i(904347);var b=e.i(37737),w=e.i(120945),j=e.i(584497);e.i(472428);var C=e.i(152641);let k=h.z.object({title:h.z.string().min(1,"Title is required").max(100,"Title must be less than 100 characters")}),S=100;function N(e){let{chatId:h}=e,N=(0,o.useRouter)(),[E,M]=(0,n.useTransition)(),{title:I,setMetadata:D}=(0,j.useChatMetadata)(h),[T,A]=(0,n.useState)(""),L=(0,g.useRewrittenParams)(),{data:P,setData:R}=(0,u.useChatHistory)(),{data:_,setData:O}=(0,u.useChatFavorites)(),[F,V]=(0,n.useState)(""),B="string"==typeof L.id?(0,x.extractChatIdFromSlug)(L.id):null,z=n.default.useRef(null),H=(0,m.useT)(),U=(0,v.useIsMobile)(),{data:q,mutate:W}=(0,C.useServerQuerySWR)(["scoped","chats"],{});(0,n.useEffect)(()=>{let e=null==P?void 0:P.find(e=>e.chatId===h);V((null==e?void 0:e.title)||I||""),A((null==e?void 0:e.title)||I||"")},[P,I,h]),(0,n.useEffect)(()=>{setTimeout(()=>{var e,t;null==(e=z.current)||e.focus(),U||null==(t=z.current)||t.select()},0)},[U]);let Z=(0,n.useCallback)(()=>{M(async()=>{try{let e=await W({serverMutate:(0,a.updateChatTitle)({chatId:h,title:T.trim()||"Untitled"}),optimisticData:{favorites:q.favorites.map(e=>e.chatId===h?{...e,title:T.trim()||"Untitled"}:e),history:q.history.map(e=>e.chatId===h?{...e,title:T.trim()||"Untitled"}:e)}}),t=null==_?void 0:_.find(e=>e.chatId===h);if("success"in e){if(t&&O(e=>e.map(e=>e.chatId===h?{...e,title:T.trim()||"Untitled"}:e)),(null==P?void 0:P.find(e=>e.chatId===h))&&R(e=>e.map(e=>e.chatId===h?{...e,title:T.trim()||"Untitled"}:e)),B===h&&D({title:T.trim()||"Untitled"}),s.toast.success(H("updateChatTitleDialog.successToast")),new RegExp("/chat/.*".concat(h)).test(window.location.pathname)){let e=(0,y.getSluggifiedId)(h,T);window.history.replaceState(null,"","/chat/".concat(e))}(0,b.closeDialog)()}else throw Error(p.FAILED_TO_UPDATE_CHAT_TITLE)}catch(e){(0,d.handleChatError)(e,N)||s.toast.error("Failed to update chat title. Please try again."),O(()=>_||[]),R(()=>P||[])}})},[W,h,T,q.favorites,q.history,_,P,B,H,O,R,D,N]),G=(0,n.useCallback)(e=>{e.preventDefault();let t=k.safeParse({title:T});if(!t.success){var n;let e=t.error.flatten().fieldErrors;s.toast.error((null==(n=e.title)?void 0:n[0])||"Invalid title");return}Z()},[Z,T]);return(0,t.jsx)(w.AtomicDialog,{type:"updateChatTitle",children:(0,t.jsxs)("form",{onSubmit:G,children:[(0,t.jsxs)(i.ModalHeader,{children:[(0,t.jsx)(i.ModalTitle,{children:H("updateChatTitleDialog.title")}),(0,t.jsxs)(i.ModalDescription,{children:[(0,t.jsx)("label",{className:"sr-only",htmlFor:"newChatTitle",children:H("updateChatTitleDialog.newChatTitle")}),(0,t.jsx)(l.Input,{"aria-label":H("updateChatTitleDialog.newChatTitle"),autoComplete:"off",autoFocus:!0,className:"w-full",id:"newChatTitle",maxLength:S,onChange:e=>A(e.target.value),placeholder:F||H("updateChatTitleDialog.enterNewTitle"),ref:z,value:T}),(0,t.jsx)(f.InputCounter,{className:"mt-2",count:T.length,max:S,message:"Title must be less than ".concat(S," characters")})]})]}),(0,t.jsxs)(i.ModalFooter,{children:[(0,t.jsx)(r.Button,{onClick:b.closeDialog,size:"sm",type:"button",variant:"secondary",children:H("updateChatTitleDialog.cancel")}),(0,t.jsx)(r.Button,{disabled:E,size:"sm",type:"submit",children:E?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.IconSpinner,{"aria-hidden":"true",className:"size-4"}),(0,t.jsx)("span",{children:H("updateChatTitleDialog.saving")})]}):H("updateChatTitleDialog.save")})]})]})})}var E=e.i(547259),M=(0,E.createServerReference)("409e72f2f1214ac87a6221ba55242d6ec601328870",E.callServer,void 0,E.findSourceMapURL,"deleteChat");e.s(["deleteChat",()=>M],88114)},729602,e=>{"use strict";var t=e.i(480118),n=e.i(726718);function r(e){if(!(0,n.isHome)(e))return(0,n.getChatIdFromPathname)(e)}function i(){return r((0,t.usePathname)())}e.s(["useChatId",()=>i],729602)},652461,e=>{"use strict";e.s(["ChatDeleteDialog",()=>g]);var t=e.i(832520),n=e.i(176248);e.i(563948);var r=e.i(407562),i=e.i(686832),a=e.i(200407),o=e.i(480118),s=e.i(246300),l=e.i(53223),c=e.i(88114),u=e.i(297239),d=e.i(307778),p=e.i(120485),h=e.i(120945);e.i(904347);var f=e.i(37737),m=e.i(729602);function g(e){let{chatId:g}=e,v=(0,o.useRouter)(),x=(0,m.useChatId)(),[y,b]=(0,a.useTransition)(),{setData:w}=(0,s.useChatHistory)(),j=(0,u.useT)(),C=()=>{b(async()=>{try{(0,l.track)("ClickDeleteChat",{targetChatId:g});let e=await (0,c.deleteChat)({payload:{chatId:g}});if(null==e?void 0:e.error)throw Error(e.error);w(e=>e.filter(e=>e.chatId!==g)),(0,f.closeDialog)(),r.toast.success(j("deleteChatDialog.successToast")),x===g&&v.push("/chat")}catch(e){(0,p.handleChatError)(e)||r.toast.error("Something went wrong. Please try again.")}})};return(0,t.jsxs)(h.AtomicDialog,{type:"deleteChat",children:[(0,t.jsxs)(i.ModalHeader,{children:[(0,t.jsx)(i.ModalTitle,{children:j("deleteChatDialog.title")}),(0,t.jsx)(i.ModalDescription,{children:j("deleteChatDialog.description")})]}),(0,t.jsxs)(i.ModalFooter,{children:[(0,t.jsx)(n.Button,{size:"sm",variant:"secondary",onClick:f.closeDialog,children:j("deleteChatDialog.cancel")}),(0,t.jsx)(n.Button,{disabled:y,onClick:C,size:"sm",variant:"destructive",children:y?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.IconSpinner,{className:"size-4"}),j("deleteChatDialog.deleting")]}):j("deleteChatDialog.delete")})]})]})}},418111,e=>{"use strict";var t=e.i(547259),n=(0,t.createServerReference)("40fd21c10ffa1f82a63eb8d295f3cca0ada3efb892",t.callServer,void 0,t.findSourceMapURL,"restoreBlock");e.s(["restoreBlock",()=>n])},608142,e=>{"use strict";let t=(0,e.i(605528).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M12.0607 6.74999L11.5303 7.28032L8.7071 10.1035C8.31657 10.4941 7.68341 10.4941 7.29288 10.1035L4.46966 7.28032L3.93933 6.74999L4.99999 5.68933L5.53032 6.21966L7.99999 8.68933L10.4697 6.21966L11 5.68933L12.0607 6.74999Z" fill="currentColor"/>');e.s(["ChevronDownSmall",0,t])},370912,e=>{"use strict";var t=e.i(92479),n=e.i(346970),r=e.i(200407);function i(){let{chatId:e}=(0,t.useChatId)(),{data:i,mutate:a}=(0,n.default)(["block:createdAt",e]);return{getBlockCreatedAt:(0,r.useCallback)(e=>{var t;return null!=(t=null==i?void 0:i.get(e))?t:void 0},[i]),setBlockCreatedAt:(0,r.useCallback)((e,t)=>{a(new Map(null==i?void 0:i.set(e,t)))},[i,a])}}e.s(["useBlockCreatedAt",()=>i])},848258,e=>{"use strict";var t=e.i(200407),n=e.i(92479),r=e.i(480118),i=e.i(346970);function a(){let{parentRef:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=(0,t.useRef)(null),a=(0,t.useRef)(null),[s,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)(!0),{messages:d,activeForkKey:p}=(0,n.useChatMessages)(),{hashMessageId:h}=(0,n.useChatHashNavigation)(),f=(0,r.usePathname)(),m=(0,t.useRef)(null),g=(0,t.useCallback)((e,t,n,r)=>{a.current&&a.current.scrollToIndex(e,{align:r?"start":"end",smooth:t})},[]),v=(0,t.useCallback)(e=>{g(1/0,e)},[g]),x=(0,t.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!n){if(m.current===e)return;m.current=e}let i=new Set(null!=r?r:p||[]),a=d.filter(e=>i.has(e.id)).findIndex(t=>t.id===e);-1!==a&&setTimeout(()=>g(a,!0,null==r?void 0:r.length,!0),t)},[d,g,p]),y=(0,t.useCallback)(()=>{if(!i.current)return;let e=i.current.scrollTop,t=i.current.scrollHeight;u(e+i.current.clientHeight>=t-100),l(e<=100)},[]);return(0,t.useEffect)(()=>{let t=e=>{e.preventDefault();let t=window.location.hash.slice(1);t&&x(t)},n=e=>{var t;let n=e.target.closest("a");if(n&&(null==(t=n.getAttribute("href"))?void 0:t.startsWith("#"))){e.preventDefault(),e.stopPropagation();let t=n.getAttribute("href").slice(1);window.history.pushState(null,"","".concat(f,"#").concat(t)),window.scrollTo(0,0),x(t)}},r=null==e?void 0:e.current;return window.addEventListener("hashchange",t),null==r||r.addEventListener("click",n),window.location.hash?x(window.location.hash.slice(1),0):h&&x(h,0),()=>{window.removeEventListener("hashchange",t),null==r||r.removeEventListener("click",n)}},[f,x,h,e]),o({scrollToHash:x,scrollToBottom:v}),{isAtBottom:c,isAtTop:s,containerRef:i,vlistRef:a,scrollToBottom:v,scrollToHash:x,scrollToIndex:g,handleScroll:y}}function o(e){let{data:n,mutate:r}=(0,i.default)("scroll-functions",null,{fallbackData:e?{scrollToHash:e.scrollToHash,scrollToBottom:e.scrollToBottom}:void 0});return(0,t.useEffect)(()=>{e&&r({scrollToHash:e.scrollToHash,scrollToBottom:e.scrollToBottom})},[null==e?void 0:e.scrollToHash,null==e?void 0:e.scrollToBottom,r,e]),null!=n?n:{scrollToHash:()=>{},scrollToBottom:()=>{}}}e.s(["useChatScroll",()=>a,"useScrollToMessage",()=>o])},862664,e=>{"use strict";var t=e.i(92479),n=e.i(346970),r=e.i(200407);function i(){let{chatId:e}=(0,t.useChatId)(),{data:i,mutate:a}=(0,n.default)(["blocks-deployed",e]);return{getBlockDeployed:(0,r.useCallback)(e=>{var t;return!!(null==i||null==(t=i.get(e))?void 0:t.deploymentId)},[i]),setBlockDeployed:(0,r.useCallback)((e,t)=>{a(new Map(null==i?void 0:i.set(e,t)))},[i,a])}}e.s(["useDeployedBlocks",()=>i])},362530,e=>{"use strict";let t=(0,e.i(605528).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M8.7071 2.39644C8.31658 2.00592 7.68341 2.00592 7.29289 2.39644L4.46966 5.21966L3.93933 5.74999L4.99999 6.81065L5.53032 6.28032L7.99999 3.81065L10.4697 6.28032L11 6.81065L12.0607 5.74999L11.5303 5.21966L8.7071 2.39644ZM5.53032 9.71966L4.99999 9.18933L3.93933 10.25L4.46966 10.7803L7.29289 13.6035C7.68341 13.9941 8.31658 13.9941 8.7071 13.6035L11.5303 10.7803L12.0607 10.25L11 9.18933L10.4697 9.71966L7.99999 12.1893L5.53032 9.71966Z" fill="currentColor"/>');e.s(["ChevronUpDown",0,t])},948780,e=>{"use strict";let t=(0,e.i(605528).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M1.5 4.875C1.5 3.01104 3.01104 1.5 4.875 1.5C6.20018 1.5 7.34838 2.26364 7.901 3.37829C8.1902 3.96162 8.79547 4.5 9.60112 4.5H12.25C13.4926 4.5 14.5 5.50736 14.5 6.75C14.5 7.42688 14.202 8.03329 13.7276 8.44689L13.1622 8.93972L14.1479 10.0704L14.7133 9.57758C15.5006 8.89123 16 7.8785 16 6.75C16 4.67893 14.3211 3 12.25 3H9.60112C9.51183 3 9.35322 2.93049 9.2449 2.71201C8.44888 1.1064 6.79184 0 4.875 0C2.18261 0 0 2.18261 0 4.875V6.40385C0 7.69502 0.598275 8.84699 1.52982 9.59656L2.11415 10.0667L3.0545 8.89808L2.47018 8.42791C1.87727 7.95083 1.5 7.22166 1.5 6.40385V4.875ZM7.29289 7.39645C7.68342 7.00592 8.31658 7.00592 8.70711 7.39645L11.7803 10.4697L12.3107 11L11.25 12.0607L10.7197 11.5303L8.75 9.56066V15.25V16H7.25V15.25V9.56066L5.28033 11.5303L4.75 12.0607L3.68934 11L4.21967 10.4697L7.29289 7.39645Z" fill="currentColor"/>');e.s(["CloudUpload",0,t])},497880,146464,e=>{"use strict";var t=e.i(605528);let n=(0,t.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M5.5 2.5V1.75H4V2.5V13.5V14.25H5.5V13.5V2.5ZM12 2.5V1.75H10.5V2.5V13.5V14.25H12V13.5V2.5Z" fill="currentColor"/>');e.s(["Pause",0,n],497880);let r=(0,t.withNewIcon)('<path d="M9 7L12.5 2.5" stroke="var(--ds-red-700)" stroke-width="1.5"/>\n  <path d="M10.5 9.5L15.75 10.5" stroke="var(--ds-blue-600)" stroke-width="1.5"/>\n  <path d="M10 8L15.75 6" stroke="var(--ds-teal-600)" stroke-width="1.5"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M6.14568 3.56625L7 2L7.85432 3.56625L12.1818 11.5L13 13H11.2914H2.70863H1L1.81818 11.5L3.31818 8.75H0V7.25H4.13636L6.14568 3.56625ZM3.52681 11.5L7 5.13249L10.4732 11.5H3.52681Z" fill="currentColor"/>');e.s(["PrismColor",0,r],146464)},697856,e=>{"use strict";var t=e.i(92479),n=e.i(346970),r=e.i(200407),i=e.i(547259),a=(0,i.createServerReference)("40c99dd78e84fd8691c20bd0bc6297aab8678a9c34",i.callServer,void 0,i.findSourceMapURL,"updateBlockShareStatus");e.i(563948);var o=e.i(407562);function s(){let{chatId:e}=(0,t.useChatId)(),{data:i,mutate:s}=(0,n.default)(["blocks-shared",e]),l=(0,r.useCallback)(e=>{var t;return null!=(t=null==i?void 0:i.get(e))&&t},[i]);return{getBlockShared:l,setBlockShared:(0,r.useCallback)((e,t)=>{s(new Map(null==i?void 0:i.set(e,t)));try{a({blockId:e,shared:t})}catch(e){o.toast.error("Failed to update block publish status")}},[i,s]),updateBlockInSharedMap:(0,r.useCallback)((e,t)=>{s(new Map(null==i?void 0:i.set(e,t)))},[i,s])}}e.s(["useSharedBlocks",()=>s],697856)},745587,e=>{"use strict";var t=e.i(200407),n=e.i(346970);function r(e){let{blockId:r,loadingPath:i,files:a}=e,{data:o,mutate:s}=(0,n.default)(["block:activeFile",r]),{data:l,mutate:c}=(0,n.default)(["block:autoSwitch",r]),u=void 0===l||l,d=(0,t.useMemo)(()=>{var e,t;let n=null==a||null==(e=a.findLast(e=>!e.isMerged))?void 0:e.meta.file;return n||(null==a||null==(t=a[0])?void 0:t.meta.file)},[a,r]),p=o;return u&&i&&(p=i),p||(p=d),{activeFilePath:p,setActiveFilePath:s,autoSwitch:u,setAutoSwitch:c}}function i(e){let{blockId:t}=e,{mutate:r}=(0,n.default)(["block:activeFile",t]);return r}e.s(["useActiveFile",()=>r,"useSetActiveFile",()=>i])},316799,e=>{"use strict";e.s(["useLastOpenedBlock",()=>s]);var t=e.i(200407),n=e.i(449381),r=e.i(92479),i=e.i(818273),a=e.i(696871);let o=e=>"last-opened-block:".concat(e);function s(){let{messages:e,chatId:s,activeForkKey:l}=(0,r.useChatMessages)(),c=(0,n.useSetActiveBlockView)();return{reopenLastBlock:(0,t.useCallback)(()=>{var t,n;let r=localStorage.getItem(o(s));if(r)for(let n of e.filter(e=>null==l?void 0:l.includes(e.id))){let e=(0,i.getBlocksFromState)(null!=(t=n.content)?t:"",n.id).find(e=>e.id===r);if(e)return c(!0,e),!0}for(let t of[...e].reverse().filter(e=>null==l?void 0:l.includes(e.id))){let e=(0,i.getBlocksFromState)(null!=(n=t.content)?n:"",t.id).filter(e=>{var t;return!a.INLINE_BLOCK_TYPES.includes(null!=(t=e.meta.type)?t:"")});if(0!==e.length)return c(!0,e[e.length-1]),!0}return!1},[e,c,s,l]),saveLastOpenedBlock:(0,t.useCallback)(e=>{e?localStorage.setItem(o(s),e):localStorage.removeItem(o(s))},[s])}}},696825,e=>{"use strict";var t=e.i(92479),n=e.i(346970),r=e.i(200407);function i(){let{chatId:e}=(0,t.useChatId)(),{data:i,mutate:a}=(0,n.default)(["block:forked-from",e]);return{getBlockForked:(0,r.useCallback)(e=>{var t;return null!=(t=null==i?void 0:i.get(e))?t:void 0},[i]),setBlockForked:(0,r.useCallback)((e,t)=>{a(new Map(null==i?void 0:i.set(e,t)))},[i,a])}}e.s(["useForkedBlocks",()=>i])},863785,978855,e=>{"use strict";var t=e.i(92479),n=e.i(346970),r=e.i(200407);function i(){let{chatId:e}=(0,t.useChatId)(),{data:i,mutate:a}=(0,n.default)(["block:template-ids",e]);return{getBlockTemplateId:(0,r.useCallback)(e=>{var t;return null!=(t=null==i?void 0:i.get(e))?t:void 0},[i]),setBlockTemplateId:(0,r.useCallback)((e,t)=>{a(new Map(null==i?void 0:i.set(e,t)))},[i,a])}}e.s(["useBlockTemplateId",()=>i],863785);var a=e.i(832520),o=r,s=e.i(716360),l=e.i(529693),c=e.i(608142),u=e.i(304649),d=e.i(372506),p=e.i(297239);let h=(0,a.jsx)(c.ChevronDownSmall,{className:"text-gray-500! transition-colors group-hover/thinking:text-gray-900!"});function f(e){let{text:t,children:n,isLoading:r=!1,forceOpen:i=!1,triggerClassName:c}=e,f=(0,p.useT)(),g=null!=t?t:f("messages.loadingText"),v=o.default.useRef(null),x=(0,a.jsx)(d.Content,{className:"group/content data-[state=open]:animate-accordion-down data-[state=closed]:animate-accordion-up overflow-hidden pt-2",children:(0,a.jsx)("div",{ref:v,className:"transition-[filter,opacity] duration-500 group-data-[state=closed]/content:opacity-0 group-data-[state=open]/content:opacity-100 group-data-[state=closed]/content:blur-lg group-data-[state=open]/content:blur-0",children:n})}),y=(0,a.jsxs)("div",{className:(0,u.cn)("group/thinking flex w-full min-w-0 flex-1 flex-row items-center gap-1 text-sm",c),children:[(0,a.jsx)("div",{className:"transition-colors group-hover/thinking:text-gray-900",children:g}),(0,a.jsx)("div",{className:(0,u.cn)("translate-y-px transition-all group-data-[state=open]/trigger:rotate-180"),children:n?h:null})]});return(0,a.jsx)(d.Root,{className:"not-first:-mt-1 text-gray-500 [&+.block-preview]:mt-4",type:"single","data-seg":"skip",collapsible:!0,value:i?"thinking":void 0,onValueChange:e=>{"thinking"===e&&v.current&&(v.current.children[0].style.opacity="1")},children:(0,a.jsxs)(d.Item,{value:"thinking",children:[(0,a.jsx)(d.Trigger,{className:(0,u.cn)("group/trigger w-full",!n&&"pointer-events-none -translate-y-px"),tabIndex:n?void 0:-1,children:(0,a.jsx)(s.AnimatePresence,{mode:"wait",children:(0,a.jsx)(l.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"flex",children:r?(0,a.jsx)(m,{children:y}):y},g)})}),n||i?x:null]})})}function m(e){let{children:t,className:n}=e;return(0,a.jsx)(l.motion.div,{animate:{backgroundPosition:["100% 50%","-100% 50%"]},transition:{duration:1.5,repeat:1/0,ease:"linear"},style:{background:"linear-gradient(90deg, hsl(var(--gray-400)) 0%, hsl(var(--gray-400)) 35%, hsl(var(--gray-900)) 50%, hsl(var(--gray-400)) 65%, hsl(var(--gray-400)) 100%)",backgroundSize:"200% 100%",WebkitBackgroundClip:"text",backgroundClip:"text"},className:(0,u.cn)("flex items-center text-transparent",n),children:t})}e.s(["LoadingText",()=>m,"Thinking",()=>f],978855)},661385,e=>{"use strict";async function t(e){let t=await fetch("/chat/api/blocks",{method:"PUT",body:JSON.stringify(e)});if(!t.ok)return{success:!1};let n=await t.json();return{success:n.success,transformedSource:n.success?n.transformedSource:void 0,sourceVersionKey:n.success?n.sourceVersionKey:void 0}}e.s(["updateCodeBlockSource",()=>t])},894906,e=>{"use strict";e.s(["useUpdateBlockData",()=>o]);var t=e.i(455552),n=e.i(661385),r=e.i(301331),i=e.i(200407),a=e.i(449381);function o(e){let o=(0,a.useActiveBlockState)(),{updateBlockData:s}=(0,r.useBlockHistory)({blockId:e}),l=(0,a.useSetActiveBlockState)();return(0,i.useCallback)(async function(r,i){let a=(0,t.createMultiFileSource)({files:r,blockType:"code-project"}),c=await (0,n.updateCodeBlockSource)({blockId:e,source:a,movedFile:null==i?void 0:i.moveFile});return c.transformedSource&&(a=c.transformedSource),o&&e===o.id&&l({...o,hasSourceBeenEdited:!0,source:a,sourceVersionKey:c.sourceVersionKey}),s({blockId:e,data:{sourceVersionKey:c.sourceVersionKey,hasSourceBeenEdited:!0,source:a,lastEditedAt:new Date().toISOString()}}),c},[e,o,s,l])}},204575,74356,487581,e=>{"use strict";function t(e){return!0===e||"object"==typeof e&&"warning"in e}e.i(832520),e.i(644471),e.i(343632),e.i(634066),e.i(845210),e.s(["canShowPreview",()=>t],74356);var n=e.i(142219),r=e.i(205341);let i=(0,r.atom)([]),a=(0,r.atom)(null),o=(0,r.atom)(null),s=(0,r.atom)(null);function l(e){return"v0-preview-".concat(e)}async function c(e,t,r){let i=l(e);for(let e=0;e<10;e++){let e=document.getElementById(i);if(e){var o;n.store.set(a,t),n.store.set(s,{callback:r}),null==(o=e.contentWindow)||o.postMessage({type:"preload_client",id:t,__v0_remote__:!0},"*");break}await new Promise(e=>setTimeout(e,200))}}e.s(["previewBlockCollectedErrorsVersion",0,a,"previewBlockDisplayedErrorsVersion",0,o,"previewBlockErrorsAtom",0,i,"previewBlockPreloadingSuccessCallback",0,s],487581),e.s(["getBlockIframeId",()=>l,"preloadIframeForBlock",()=>c],204575)},577247,e=>{"use strict";var t=e.i(200407),n=e.i(167343);let r=new Set,i=new Set;function a(){for(let e of(i.clear(),i.add(window.location.origin),document.querySelectorAll("iframe"))){let t=e.getAttribute("src");if(t&&!t.startsWith("/"))try{let e=new URL(t);i.add(e.origin)}catch(e){console.warn("Invalid iframe src: ".concat(t),e)}}for(let e of document.querySelectorAll("script[src]")){let t=e.getAttribute("src");if(t&&!t.startsWith("/"))try{let e=new URL(t);i.add(e.origin)}catch(e){console.warn("Invalid script src: ".concat(t),e)}}}function o(e,o){(0,t.useEffect)(()=>(r.add(e),()=>{r.delete(e)}),o||[e]),(0,n.default)("global-messages",()=>{a();let e=e=>{if(!e.defaultPrevented){if(!i.has(e.origin)&&(a(),!i.has(e.origin)))return void console.warn("Received message from untrusted origin: ".concat(e.origin,"."));for(let t of r)t(e)}};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}})}e.s(["useMessage",()=>o])},914483,e=>{"use strict";var t=e.i(205341),n=e.i(780292);let r=function(){let e=new Map;return function(n,r){return e.has(n)||e.set(n,(0,t.atom)(r)),e.get(n)}}();function i(e,t){return(0,n.useAtomValue)(r(e,t))}function a(e,t){return(0,n.useSetAtom)(r(e,t))}function o(e,t){return(0,n.useAtom)(r(e,t))}e.s(["useGet",()=>i,"useGetSet",()=>o,"useSet",()=>a])},775320,e=>{"use strict";let t=0,n=.2;function r(e){return Math.round(1e4*e)/1e4}function i(e){let t=e.filter(e=>e.visible);if(0===t.length)return e;if(1===t.length)return e.map(e=>e.visible?{...e,ratio:1}:e);let n=t.reduce((e,t)=>e+t.ratio,0);if(.001>=Math.abs(n-1))return e;let i=1/n;return e.map(e=>e.visible?{...e,ratio:r(e.ratio*i)}:e)}function a(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=e.panelsLayout.findIndex(e=>e.id===t);if(-1===a||!e.panelsLayout[a].visible)return e;let o=e.panelsLayout.filter(e=>e.visible);if(o.length<=1)return{panelsLayout:e.panelsLayout.map(e=>e.id===t?{...e,visible:!1,savedRatio:e.ratio,ratio:0,savedVisibility:n?e.visible:e.savedVisibility}:e),mobilePanel:e.mobilePanel};let s=o.filter(e=>e.id!==t).reduce((e,t)=>e+t.ratio,0),l=s>0?1/s:0,c=e.panelsLayout.map(e=>e.id===t?{...e,visible:!1,savedRatio:e.ratio,ratio:0,savedVisibility:n?e.visible:e.savedVisibility}:e.visible?{...e,ratio:r(e.ratio*l)}:e),u=e.mobilePanel;if(e.mobilePanel===t){let e=c.find(e=>e.visible);e&&(u=e.id)}return{panelsLayout:i(c),mobilePanel:u}}function o(e,t){let a=e.panelsLayout.findIndex(e=>e.id===t);if(-1===a||e.panelsLayout[a].visible)return e;let o=e.panelsLayout[a],s=e.panelsLayout.filter(e=>e.visible);if(0===s.length)return{panelsLayout:e.panelsLayout.map(e=>e.id===t?{...e,visible:!0,ratio:1}:e),mobilePanel:e.mobilePanel};let l=n+.05,c=Math.max(l,o.savedRatio||l),u=s.reduce((e,t)=>e+t.ratio,0),d=Math.min(c,.8),p=r(1-d)/u;return{panelsLayout:i(e.panelsLayout.map(e=>e.id===t?{...e,visible:!0,ratio:d}:e.visible?{...e,ratio:r(e.ratio*p)}:e)),mobilePanel:e.mobilePanel}}function s(e,t){return -1===e.panelsLayout.findIndex(e=>e.id===t)?e:{panelsLayout:e.panelsLayout.map(e=>({...e,savedRatio:e.visible?e.ratio:e.savedRatio,savedVisibility:e.visible,visible:e.id===t,ratio:+(e.id===t)})),mobilePanel:t}}function l(e,t,a,o,s,l){var c,u,d,p;let h=e.panelsLayout.findIndex(e=>e.id===t),f=e.panelsLayout.findIndex(e=>e.id===a);if(-1===h||-1===f||!e.panelsLayout[h].visible||!e.panelsLayout[f].visible)return e;let m=e.panelsLayout[h],g=e.panelsLayout[f],v=r(m.ratio+o),x=r(g.ratio-o),y=null!=(c=null==s?void 0:s[t])?c:n,b=null!=(u=null==s?void 0:s[a])?u:n,w=null!=(d=null==l?void 0:l[t])?d:1,j=null!=(p=null==l?void 0:l[a])?p:1;if(v<y||v>w||x<b||x>j)return e;let C=e.panelsLayout.map(e=>e.id===t?{...e,ratio:v}:e.id===a?{...e,ratio:x}:e);return{...e,panelsLayout:i(C)}}function c(e,t){let n=[];return e.panelsLayout.forEach((r,i)=>{n.push(r.visible?"".concat(r.ratio,"fr"):"0fr"),i<e.panelsLayout.length-1&&n.push("".concat(t,"px"))}),n.join(" ")}function u(e){let t=[];return e.panelsLayout.forEach((n,r)=>{t.push(n.id),r<e.panelsLayout.length-1&&t.push("resize-".concat(r))}),'"'.concat(t.join(" "),'"')}function d(e){return{desktopGridTemplateAreas:u(e),desktopGridTemplateColumns:c(e,t),desktopGridTemplateColumnsUsingCqw:c(e,t)}}function p(e){return 1!==e.panelsLayout.filter(e=>e.visible).length?e:{panelsLayout:i(e.panelsLayout.map(e=>!0===e.savedVisibility?{...e,visible:!0,ratio:e.savedRatio||n}:e)),mobilePanel:e.mobilePanel}}e.s(["MIN_PANEL_RATIO",0,n,"RESIZE_HANDLE_WIDTH",0,t,"collapsePanel",()=>a,"computeGridProperties",()=>d,"expandPanel",()=>o,"fullscreenPanel",()=>s,"resizePanel",()=>l,"restoreSavedVisibility",()=>p])},374022,e=>{"use strict";var t=e.i(205341);let n={get url(){return`file://${e.P("node_modules/.pnpm/jotai@2.8.0_@types+react@19.1.7_react@19.1.1/node_modules/jotai/esm/vanilla/utils.mjs")}`}},r=Symbol((n.env?n.env.MODE:void 0)!=="production"?"RESET":""),i=(e,t,n)=>(t.has(n)?t:t.set(n,e())).get(n),a=new WeakMap,o=(e,t,n,r)=>{let o=i(()=>new WeakMap,a,t),s=i(()=>new WeakMap,o,n);return i(e,s,r)};function s(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.is;return o(()=>{let i=Symbol(),a=e=>{let[t,a]=e;if(a===i)return n(t);let o=n(t,a);return r(a,o)?a:o},o=(0,t.atom)(t=>{let n=t(o);return a([t(e),n])});return o.init=i,o},e,n,r)}let l=e=>"function"==typeof(null==e?void 0:e.then),c=function(){let e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{try{return window.localStorage}catch(e){(n.env?n.env.MODE:void 0)!=="production"&&"undefined"!=typeof window&&console.warn(e);return}},i=arguments.length>1?arguments[1]:void 0,a={getItem:(n,a)=>{var o,s;let c=n=>{if(e!==(n=n||"")){try{t=JSON.parse(n,null==i?void 0:i.reviver)}catch(e){return a}e=n}return t},u=null!=(s=null==(o=r())?void 0:o.getItem(n))?s:null;return l(u)?u.then(c):c(u)},setItem:(e,t)=>{var n;return null==(n=r())?void 0:n.setItem(e,JSON.stringify(t,null==i?void 0:i.replacer))},removeItem:e=>{var t;return null==(t=r())?void 0:t.removeItem(e)}};return"undefined"!=typeof window&&"function"==typeof window.addEventListener&&window.Storage&&(a.subscribe=(e,t,n)=>{if(!(r()instanceof window.Storage))return()=>{};let i=i=>{if(i.storageArea===r()&&i.key===e){let e;try{e=JSON.parse(i.newValue||"")}catch(t){e=n}t(e)}};return window.addEventListener("storage",i),()=>{window.removeEventListener("storage",i)}}),a}();function u(e,i){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c,o=arguments.length>3?arguments[3]:void 0,s=null==o?void 0:o.getOnInit,l=(0,t.atom)(s?a.getItem(e,i):i);return(n.env?n.env.MODE:void 0)!=="production"&&(l.debugPrivate=!0),l.onMount=t=>{let n;return t(a.getItem(e,i)),a.subscribe&&(n=a.subscribe(e,t,i)),n},(0,t.atom)(e=>e(l),(t,n,o)=>{let s="function"==typeof o?o(t(l)):o;return s===r?(n(l,i),a.removeItem(e)):s instanceof Promise?s.then(t=>(n(l,t),a.setItem(e,t))):(n(l,s),a.setItem(e,s))})}e.s(["atomWithStorage",()=>u,"selectAtom",()=>s])},385671,923510,e=>{"use strict";var t=e.i(205341),n=e.i(753533),r=e.i(254211),i=e.i(142219),a=e.i(569543),o=t,s=i,l=e.i(775320),c=n,u=e.i(374022);let d=new Map,p=(0,c.cacheResultById)(d,()=>({resizingId:(0,o.atom)(null),isReordering:(0,o.atom)(!1),disableLayoutAnimations:(0,o.atom)(!1),autoCollapsiblePanels:(0,o.atom)(new Set),panelMinRatios:(0,o.atom)(new Map),panelMaxRatios:(0,o.atom)(new Map),cursorState:(0,o.atom)("normal")}));function h(e){return Object.freeze(e.map(e=>e.id))}function f(e){return Object.freeze(e.filter(e=>e.visible).map(e=>e.id))}function m(e,t){return e.length===t.length&&e.every((e,n)=>e===t[n])}let g=new Map,v=(0,c.cacheResultById)(g,(e,t)=>{let n=p(e),{panelsLayoutAtom:r,mobilePanelAtom:i}=t,a=(0,u.selectAtom)((0,o.atom)(e=>h(e(r))),e=>e,m),s=(0,u.selectAtom)((0,o.atom)(e=>f(e(r))),e=>e,m),c=(0,o.atom)(e=>{let t={panelsLayout:e(r),mobilePanel:e(i)};return(0,l.computeGridProperties)(t)}),d=(0,o.atom)(()=>!0);return{...n,panelsLayout:r,mobilePanel:i,gridProperties:c,isResizing:(0,o.atom)(e=>null!==e(n.resizingId)),panelOrder:a,visiblePanels:s,visiblePanelsLength:(0,o.atom)(e=>e(s).length),controlsEnabled:d,isEmptyStateVisible:(0,o.atom)(e=>0===e(s).length)}}),x=(e,t)=>{let n=p(e),{panelsLayoutAtom:r,mobilePanelAtom:i}=t,a=e=>{let t={panelsLayout:s.store.get(r),mobilePanel:s.store.get(i)},n=(0,l.expandPanel)(t,e);s.store.set(r,n.panelsLayout),s.store.set(i,n.mobilePanel)},o=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={panelsLayout:s.store.get(r),mobilePanel:s.store.get(i)},a=(0,l.collapsePanel)(n,e,t);s.store.set(r,a.panelsLayout),s.store.set(i,a.mobilePanel)};return{setIsResizing:e=>{s.store.set(n.resizingId,e)},resizePanel:e=>{let{index:t,delta:a}=e,o=s.store.get(r),c=s.store.get(i),u=o[t],d=o.slice(t+1).find(e=>e.visible);if(!u||!d||!u.visible)return!1;let p={panelsLayout:o,mobilePanel:c},h=s.store.get(n.panelMinRatios),f=s.store.get(n.panelMaxRatios),m=Object.fromEntries(h),g=Object.fromEntries(f),v=(0,l.resizePanel)(p,u.id,d.id,a,m,g);return v!==p&&(s.store.set(r,v.panelsLayout),s.store.set(i,v.mobilePanel),!0)},movePanel:e=>{let{id:t,direction:i}=e,a=s.store.get(r),o=a.findIndex(e=>e.id===t),l=o+("left"===i?-1:1);if(-1===o||l<0||l>=a.length)return;s.store.set(n.isReordering,!0);let c=[...a],u=c[o];c[o]=c[l],c[l]=u,s.store.set(r,c),requestAnimationFrame(()=>{s.store.set(n.isReordering,!1)})},togglePanel:e=>{let t=s.store.get(r),n=s.store.get(i),l=t.find(t=>t.id===e);if(l)if(l.visible){o(e);let n=t.find(t=>t.id!==e&&t.visible);n&&s.store.set(i,n.id)}else a(e),n!==e&&s.store.set(i,e)},openPanel:a,closePanel:o,fullscreenPanel:e=>{let t={panelsLayout:s.store.get(r),mobilePanel:s.store.get(i)},n=(0,l.fullscreenPanel)(t,e);s.store.set(r,n.panelsLayout),s.store.set(i,n.mobilePanel)},restoreSavedVisibility:()=>{let e={panelsLayout:s.store.get(r),mobilePanel:s.store.get(i)},t=(0,l.restoreSavedVisibility)(e);s.store.set(r,t.panelsLayout),s.store.set(i,t.mobilePanel)},setMobilePanel:e=>{s.store.set(i,e)},setPanelsLayout:e=>{s.store.set(r,e)},isPanelFullscreen:e=>{let t=s.store.get(r);return t.some(t=>t.id===e&&t.visible)&&t.every(t=>t.id===e||!t.visible)},registerAutoCollapsiblePanel:e=>{let t=new Set(s.store.get(n.autoCollapsiblePanels));t.add(e),s.store.set(n.autoCollapsiblePanels,t)},unregisterAutoCollapsiblePanel:e=>{let t=new Set(s.store.get(n.autoCollapsiblePanels));t.delete(e),s.store.set(n.autoCollapsiblePanels,t)},isAutoCollapsible:e=>s.store.get(n.autoCollapsiblePanels).has(e),setPanelMinRatio:(e,t)=>{let r=new Map(s.store.get(n.panelMinRatios));r.set(e,t),s.store.set(n.panelMinRatios,r)},setPanelMaxRatio:(e,t)=>{let r=new Map(s.store.get(n.panelMaxRatios));r.set(e,t),s.store.set(n.panelMaxRatios,r)},removePanelRatios:e=>{let t=s.store.get(n.panelMinRatios),r=s.store.get(n.panelMaxRatios),i=new Map(t),a=new Map(r);i.delete(e),a.delete(e),s.store.set(n.panelMinRatios,i),s.store.set(n.panelMaxRatios,a)},getPanelMinRatio:e=>{var t;return null!=(t=s.store.get(n.panelMinRatios).get(e))?t:l.MIN_PANEL_RATIO},getPanelMaxRatio:e=>{var t;return null!=(t=s.store.get(n.panelMaxRatios).get(e))?t:1},setCursorState:e=>{s.store.set(n.cursorState,e)}}};e.s(["getPanelLayoutActions",0,x,"getPanelLayoutAtoms",0,v],923510);let y=null,b=(0,n.cacheResult)(y,()=>{let e=(0,r.getDurableRootAtoms)("root");return{panelsLayoutAtom:e.chatPanelLayout,mobilePanelAtom:e.chatMobilePanel}}),w=null,j=(0,n.cacheResult)(w,()=>({activeTabIntent:(0,t.atom)("preview"),previewSize:(0,t.atom)("desktop")})),C=null,k=(0,n.cacheResult)(C,()=>{let e=j(),n=v("chat",b());return{...e,isChatOnRight:(0,t.atom)(e=>{var t;return(null==(t=e(n.panelsLayout)[1])?void 0:t.id)===a.CHAT_INPUT_PANEL_ID}),isInputPanelOpen:(0,t.atom)(e=>e(n.panelsLayout).some(e=>e.id===a.CHAT_INPUT_PANEL_ID&&e.visible)),isResizing:(0,t.atom)(e=>e(n.isResizing)),deviceStyles:(0,t.atom)(t=>{let n=t(e.previewSize),r={width:"100%",height:"100%"};switch(n){case"phone":return{width:"max(40cqh, 300px)",height:"max(90%, 600px)"};case"tablet":return{width:"max(70cqh, 700px)",height:"max(55%, 550px)"};default:return r}}),isDesktopPreviewSize:(0,t.atom)(t=>"desktop"===t(e.previewSize))}}),S=null,N=(0,n.cacheResult)(S,()=>{let e=v("chat",b()),t=x("chat",b()),n=j(),r=e=>{t.movePanel({id:a.CHAT_INPUT_PANEL_ID,direction:e?"right":"left"})};return{setChatOnRight:r,toggleInputPanel:()=>{t.togglePanel(a.CHAT_INPUT_PANEL_ID)},setActiveTabIntent:e=>{i.store.set(n.activeTabIntent,e)},toggleChatPosition:()=>{var t;r((null==(t=i.store.get(e.panelsLayout)[1])?void 0:t.id)!==a.CHAT_INPUT_PANEL_ID)},isChatOnRight:()=>{var t;return(null==(t=i.store.get(e.panelsLayout)[1])?void 0:t.id)===a.CHAT_INPUT_PANEL_ID},setMobilePanel:e=>{t.setMobilePanel(e)},setPreviewSize:e=>{i.store.set(n.previewSize,e)}}});function E(){return{atoms:k(),actions:N()}}e.s(["getChatLayoutActions",0,N,"getChatLayoutAtoms",0,k,"getWritableChatPanelLayoutAtoms",0,b,"useChatLayout",()=>E],385671)},270793,(e,t,n)=>{"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}var a=[[{color:"0, 0, 0",class:"ansi-black"},{color:"187, 0, 0",class:"ansi-red"},{color:"0, 187, 0",class:"ansi-green"},{color:"187, 187, 0",class:"ansi-yellow"},{color:"0, 0, 187",class:"ansi-blue"},{color:"187, 0, 187",class:"ansi-magenta"},{color:"0, 187, 187",class:"ansi-cyan"},{color:"255,255,255",class:"ansi-white"}],[{color:"85, 85, 85",class:"ansi-bright-black"},{color:"255, 85, 85",class:"ansi-bright-red"},{color:"0, 255, 0",class:"ansi-bright-green"},{color:"255, 255, 85",class:"ansi-bright-yellow"},{color:"85, 85, 255",class:"ansi-bright-blue"},{color:"255, 85, 255",class:"ansi-bright-magenta"},{color:"85, 255, 255",class:"ansi-bright-cyan"},{color:"255, 255, 255",class:"ansi-bright-white"}]];t.exports=function(){function e(){i(this,e),this.fg=this.bg=this.fg_truecolor=this.bg_truecolor=null,this.bright=0}return r(e,null,[{key:"escapeForHtml",value:function(t){return new e().escapeForHtml(t)}},{key:"linkify",value:function(t){return new e().linkify(t)}},{key:"ansiToHtml",value:function(t,n){return new e().ansiToHtml(t,n)}},{key:"ansiToJson",value:function(t,n){return new e().ansiToJson(t,n)}},{key:"ansiToText",value:function(t){return new e().ansiToText(t)}}]),r(e,[{key:"setupPalette",value:function(){this.PALETTE_COLORS=[];for(var e=0;e<2;++e)for(var t=0;t<8;++t)this.PALETTE_COLORS.push(a[e][t].color);for(var n=[0,95,135,175,215,255],r=function(e,t,r){return n[e]+", "+n[t]+", "+n[r]},i=0;i<6;++i)for(var o=0;o<6;++o)for(var s=0;s<6;++s)this.PALETTE_COLORS.push(r(i,o,s));for(var l=8,c=0;c<24;++c,l+=10)this.PALETTE_COLORS.push(r(l,l,l))}},{key:"escapeForHtml",value:function(e){return e.replace(/[&<>]/gm,function(e){return"&"==e?"&amp;":"<"==e?"&lt;":">"==e?"&gt;":""})}},{key:"linkify",value:function(e){return e.replace(/(https?:\/\/[^\s]+)/gm,function(e){return'<a href="'+e+'">'+e+"</a>"})}},{key:"ansiToHtml",value:function(e,t){return this.process(e,t,!0)}},{key:"ansiToJson",value:function(e,t){return(t=t||{}).json=!0,t.clearLine=!1,this.process(e,t,!0)}},{key:"ansiToText",value:function(e){return this.process(e,{},!1)}},{key:"process",value:function(e,t,n){var r=this,i=this,a=e.split(/\033\[/),o=a.shift();null==t&&(t={}),t.clearLine=/\r/.test(e);var s=a.map(function(e){return r.processChunk(e,t,n)});if(t&&t.json){var l=i.processChunkJson("");return l.content=o,l.clearLine=t.clearLine,s.unshift(l),t.remove_empty&&(s=s.filter(function(e){return!e.isEmpty()})),s}return s.unshift(o),s.join("")}},{key:"processChunkJson",value:function(e,t,n){var r=(t=void 0===t?{}:t).use_classes=void 0!==t.use_classes&&t.use_classes,i=t.key=r?"class":"color",o={content:e,fg:null,bg:null,fg_truecolor:null,bg_truecolor:null,clearLine:t.clearLine,decoration:null,was_processed:!1,isEmpty:function(){return!o.content}},s=e.match(/^([!\x3c-\x3f]*)([\d;]*)([\x20-\x2c]*[\x40-\x7e])([\s\S]*)/m);if(!s)return o;o.content=s[4];var l=s[2].split(";");if(""!==s[1]||"m"!==s[3]||!n)return o;var c=this;for(c.decoration=null;l.length>0;){var u=parseInt(l.shift());if(isNaN(u)||0===u)c.fg=c.bg=c.decoration=null;else if(1===u)c.decoration="bold";else if(2===u)c.decoration="dim";else if(3==u)c.decoration="italic";else if(4==u)c.decoration="underline";else if(5==u)c.decoration="blink";else if(7===u)c.decoration="reverse";else if(8===u)c.decoration="hidden";else if(9===u)c.decoration="strikethrough";else if(39==u)c.fg=null;else if(49==u)c.bg=null;else if(u>=30&&u<38)c.fg=a[0][u%10][i];else if(u>=90&&u<98)c.fg=a[1][u%10][i];else if(u>=40&&u<48)c.bg=a[0][u%10][i];else if(u>=100&&u<108)c.bg=a[1][u%10][i];else if(38===u||48===u){var d=38===u;if(l.length>=1){var p=l.shift();if("5"===p&&l.length>=1){var h=parseInt(l.shift());if(h>=0&&h<=255)if(r){var f=h>=16?"ansi-palette-"+h:a[+(h>7)][h%8].class;d?c.fg=f:c.bg=f}else this.PALETTE_COLORS||c.setupPalette(),d?c.fg=this.PALETTE_COLORS[h]:c.bg=this.PALETTE_COLORS[h]}else if("2"===p&&l.length>=3){var m=parseInt(l.shift()),g=parseInt(l.shift()),v=parseInt(l.shift());if(m>=0&&m<=255&&g>=0&&g<=255&&v>=0&&v<=255){var x=m+", "+g+", "+v;r?d?(c.fg="ansi-truecolor",c.fg_truecolor=x):(c.bg="ansi-truecolor",c.bg_truecolor=x):d?c.fg=x:c.bg=x}}}}}return null===c.fg&&null===c.bg&&null===c.decoration||(o.fg=c.fg,o.bg=c.bg,o.fg_truecolor=c.fg_truecolor,o.bg_truecolor=c.bg_truecolor,o.decoration=c.decoration,o.was_processed=!0),o}},{key:"processChunk",value:function(e,t,n){var r=this;t=t||{};var i=this.processChunkJson(e,t,n);if(t.json)return i;if(i.isEmpty())return"";if(!i.was_processed)return i.content;var a=t.use_classes,o=[],s=[],l={},c=function(e){var t=[],n=void 0;for(n in e)e.hasOwnProperty(n)&&t.push("data-"+n+'="'+r.escapeForHtml(e[n])+'"');return t.length>0?" "+t.join(" "):""};return(i.fg&&(a?(s.push(i.fg+"-fg"),null!==i.fg_truecolor&&(l["ansi-truecolor-fg"]=i.fg_truecolor,i.fg_truecolor=null)):o.push("color:rgb("+i.fg+")")),i.bg&&(a?(s.push(i.bg+"-bg"),null!==i.bg_truecolor&&(l["ansi-truecolor-bg"]=i.bg_truecolor,i.bg_truecolor=null)):o.push("background-color:rgb("+i.bg+")")),i.decoration&&(a?s.push("ansi-"+i.decoration):"bold"===i.decoration?o.push("font-weight:bold"):"dim"===i.decoration?o.push("opacity:0.5"):"italic"===i.decoration?o.push("font-style:italic"):"reverse"===i.decoration?o.push("filter:invert(100%)"):"hidden"===i.decoration?o.push("visibility:hidden"):"strikethrough"===i.decoration?o.push("text-decoration:line-through"):o.push("text-decoration:"+i.decoration)),a)?'<span class="'+s.join(" ")+'"'+c(l)+">"+i.content+"</span>":'<span style="'+o.join(";")+'"'+c(l)+">"+i.content+"</span>"}}]),e}()},864812,(e,t,n)=>{function r(e){if(!e)return"";if(!/\r/.test(e))return e;for(e=e.replace(/\r+\n/gm,"\n");/\r./.test(e);)e=e.replace(/^([^\r\n]*)\r+([^\r\n]+)/gm,function(e,t,n){return n+t.slice(n.length)});return e}function i(e){for(var t=0,n=0;n<e.length;n++)e[t].length<=e[n].length&&(t=n);return t}function a(e){if(!/\r/.test(e))return e;for(var t=e.split("\r"),n=[];t.length>0;){var r=i(t);n.push(t[r]),t=t.slice(r+1)}return n.join("\r")}function o(e){if(!e)return"";if(!/\r/.test(e))return e;if(!/\n/.test(e))return a(e);var t=(e=e.replace(/\r+\n/gm,"\n")).lastIndexOf("\n");return r(e.slice(0,t))+"\n"+a(e.slice(t+1))}t.exports=r,t.exports.escapeCarriageReturn=r,t.exports.escapeCarriageReturnSafe=o},243025,(e,t,n)=>{"use strict";var r=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=e.e&&e.e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(n,"__esModule",{value:!0});let a=r(e.r(270793)),o=e.r(864812),s=i(e.r(200407));function l(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e=o.escapeCarriageReturn(p(e)),a.default.ansiToJson(e,{json:!0,remove_empty:!0,use_classes:t})}function c(e){let t="";return(e.bg&&(t+="".concat(e.bg,"-bg ")),e.fg&&(t+="".concat(e.fg,"-fg ")),e.decoration&&(t+="ansi-".concat(e.decoration," ")),""===t)?null:t=t.substring(0,t.length-1)}function u(e){let t={};return e.bg&&(t.backgroundColor="rgb(".concat(e.bg,")")),e.fg&&(t.color="rgb(".concat(e.fg,")")),t}function d(e,t,n,r){let i,a=t?null:u(n),o=t?c(n):null;if(!e)return s.createElement("span",{style:a,key:r,className:o},n.content);let l=[],d=/(\s|^)(https?:\/\/(?:www\.|(?!www))[^\s.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,})/g,p=0;for(;null!==(i=d.exec(n.content));){let[,e,t]=i,r=i.index+e.length;r>p&&l.push(n.content.substring(p,r));let a=t.startsWith("www.")?"http://".concat(t):t;l.push(s.createElement("a",{key:p,href:a,target:"_blank"},"".concat(t))),p=d.lastIndex}return p<n.content.length&&l.push(n.content.substring(p)),s.createElement("span",{style:a,key:r,className:o},l)}function p(e){let t=e;do t=(e=t).replace(/[^\n]\x08/gm,"");while(t.length<e.length)return e}n.default=function(e){let{className:t,useClasses:n,children:r,linkify:i}=e;return s.createElement("code",{className:t},l(null!=r?r:"",null!=n&&n).map(d.bind(null,null!=i&&i,null!=n&&n)))}},110909,__turbopack_context__=>{"use strict";var _path$8,_path$7,_path$6,_path2$5,_path$5,_path2$4,_path$4,_path2$3,_path$3,_path2$2,_path$2,_path2$1,_path$1,_path,_path2,__TURBOPACK__imported__module__832520__=__turbopack_context__.i(832520),__TURBOPACK__imported__module__200407__=__turbopack_context__.i(200407),__TURBOPACK__imported__module__832520__1=__TURBOPACK__imported__module__832520__,__TURBOPACK__imported__module__200407__1=__TURBOPACK__imported__module__200407__;function isObject(e){return"[object Object]"===Object.prototype.toString.call(e)}function objectSize(e){return Array.isArray(e)?e.length:isObject(e)?Object.keys(e).length:0}function stringifyForCopying(e,t){if("string"==typeof e)return e;try{return JSON.stringify(e,(e,t)=>{switch(typeof t){case"bigint":return String(t)+"n";case"number":case"boolean":case"object":case"string":return t;default:return String(t)}},t)}catch(e){return"".concat(e.name,": ").concat(e.message)||"JSON.stringify failed"}}function isCollapsed(e,t,n,r,i,a){if(a&&void 0!==a.collapsed)return!!a.collapsed;if("boolean"==typeof r)return r;if("number"==typeof r&&t>r)return!0;let o=objectSize(e);if("function"==typeof r){let i=safeCall(r,[{node:e,depth:t,indexOrName:n,size:o}]);if("boolean"==typeof i)return i}return!!(Array.isArray(e)&&o>i||isObject(e)&&o>i)}function isCollapsed_largeArray(e,t,n,r,i,a){if(a&&void 0!==a.collapsed)return!!a.collapsed;if("boolean"==typeof r)return r;if("number"==typeof r&&t>r)return!0;let o=Math.ceil(e.length/100);if("function"==typeof r){let i=safeCall(r,[{node:e,depth:t,indexOrName:n,size:o}]);if("boolean"==typeof i)return i}return!!(Array.isArray(e)&&o>i||isObject(e)&&o>i)}function ifDisplay(e,t,n){return"boolean"==typeof e?e:"number"==typeof e&&!!(t>e)||"collapsed"===e&&!!n||"expanded"===e&&!n}function safeCall(e,t){try{return e(...t)}catch(e){reportError(e)}}function editableAdd(e){if(!0===e||isObject(e)&&!0===e.add)return!0}function editableEdit(e){if(!0===e||isObject(e)&&!0===e.edit)return!0}function editableDelete(e){if(!0===e||isObject(e)&&!0===e.delete)return!0}function isReactComponent(e){return"function"==typeof e}function customAdd(e){return!e||void 0===e.add||!!e.add}function customEdit(e){return!e||void 0===e.edit||!!e.edit}function customDelete(e){return!e||void 0===e.delete||!!e.delete}function customCopy(e){return!e||void 0===e.enableClipboard||!!e.enableClipboard}function customMatchesURL(e){return!e||void 0===e.matchesURL||!!e.matchesURL}function resolveEvalFailedNewValue(e,t){return"string"===e?t.trim().replace(/^\"([\s\S]+?)\"$/,"$1"):t}function _extends$8(){return(_extends$8=Object.assign.bind()).apply(this,arguments)}var SvgAngleDown=function(e){return __TURBOPACK__imported__module__200407__1.createElement("svg",_extends$8({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),_path$8||(_path$8=__TURBOPACK__imported__module__200407__1.createElement("path",{fill:"currentColor",d:"M12.473 5.806a.666.666 0 0 0-.946 0L8.473 8.86a.667.667 0 0 1-.946 0L4.473 5.806a.667.667 0 1 0-.946.94l3.06 3.06a2 2 0 0 0 2.826 0l3.06-3.06a.667.667 0 0 0 0-.94Z"})))};function _extends$7(){return(_extends$7=Object.assign.bind()).apply(this,arguments)}var SvgCopy=function(e){return __TURBOPACK__imported__module__200407__1.createElement("svg",_extends$7({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),_path$7||(_path$7=__TURBOPACK__imported__module__200407__1.createElement("path",{fill:"currentColor",d:"M17.542 2.5h-4.75a3.963 3.963 0 0 0-3.959 3.958v4.75a3.963 3.963 0 0 0 3.959 3.959h4.75a3.963 3.963 0 0 0 3.958-3.959v-4.75A3.963 3.963 0 0 0 17.542 2.5Zm2.375 8.708a2.378 2.378 0 0 1-2.375 2.375h-4.75a2.378 2.378 0 0 1-2.375-2.375v-4.75a2.378 2.378 0 0 1 2.375-2.375h4.75a2.378 2.378 0 0 1 2.375 2.375v4.75Zm-4.75 6.334a3.963 3.963 0 0 1-3.959 3.958h-4.75A3.963 3.963 0 0 1 2.5 17.542v-4.75a3.963 3.963 0 0 1 3.958-3.959.791.791 0 1 1 0 1.584 2.378 2.378 0 0 0-2.375 2.375v4.75a2.378 2.378 0 0 0 2.375 2.375h4.75a2.378 2.378 0 0 0 2.375-2.375.792.792 0 1 1 1.584 0Z"})))};function _extends$6(){return(_extends$6=Object.assign.bind()).apply(this,arguments)}var SvgCopied=function(e){return __TURBOPACK__imported__module__200407__1.createElement("svg",_extends$6({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),_path$6||(_path$6=__TURBOPACK__imported__module__200407__1.createElement("path",{fill:"currentColor",d:"M17.25 3H6.75A3.755 3.755 0 0 0 3 6.75v10.5A3.754 3.754 0 0 0 6.75 21h10.5A3.754 3.754 0 0 0 21 17.25V6.75A3.755 3.755 0 0 0 17.25 3Zm2.25 14.25a2.25 2.25 0 0 1-2.25 2.25H6.75a2.25 2.25 0 0 1-2.25-2.25V6.75A2.25 2.25 0 0 1 6.75 4.5h10.5a2.25 2.25 0 0 1 2.25 2.25v10.5Z"})),_path2$5||(_path2$5=__TURBOPACK__imported__module__200407__1.createElement("path",{fill:"#14C786",d:"M10.312 14.45 7.83 11.906a.625.625 0 0 0-.896 0 .659.659 0 0 0 0 .918l2.481 2.546a1.264 1.264 0 0 0 .896.381 1.237 1.237 0 0 0 .895-.38l5.858-6.011a.658.658 0 0 0 0-.919.625.625 0 0 0-.896 0l-5.857 6.01Z"})))};function CopyButton(e){let{node:t}=e,{customizeCopy:n}=(0,__TURBOPACK__imported__module__200407__1.useContext)(JsonViewContext),[r,i]=(0,__TURBOPACK__imported__module__200407__1.useState)(!1);return r?(0,__TURBOPACK__imported__module__832520__1.jsx)(SvgCopied,{className:"json-view--copy",style:{display:"inline-block"}}):(0,__TURBOPACK__imported__module__832520__1.jsx)(SvgCopy,{onClick:e=>{e.stopPropagation();let r=n(t);"string"==typeof r&&r&&navigator.clipboard.writeText(r),i(!0),setTimeout(()=>i(!1),3e3)},className:"json-view--copy"})}function NameValue(e){let{indexOrName:t,value:n,depth:r,parent:i,deleteHandle:a,editHandle:o}=e;return(0,__TURBOPACK__imported__module__832520__1.jsxs)("div",Object.assign({className:"json-view--pair"},{children:[(0,__TURBOPACK__imported__module__832520__1.jsx)("span",Object.assign({className:"number"==typeof t?"json-view--index":"json-view--property"},{children:t})),":"," ",(0,__TURBOPACK__imported__module__832520__1.jsx)(JsonNode,{node:n,depth:r+1,deleteHandle:a,editHandle:o,parent:i,indexOrName:t})]}))}function _extends$5(){return(_extends$5=Object.assign.bind()).apply(this,arguments)}var SvgTrash=function(e){return __TURBOPACK__imported__module__200407__1.createElement("svg",_extends$5({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),_path$5||(_path$5=__TURBOPACK__imported__module__200407__1.createElement("path",{fill:"currentColor",d:"M18.75 6h-2.325a3.757 3.757 0 0 0-3.675-3h-1.5a3.757 3.757 0 0 0-3.675 3H5.25a.75.75 0 0 0 0 1.5H6v9.75A3.754 3.754 0 0 0 9.75 21h4.5A3.754 3.754 0 0 0 18 17.25V7.5h.75a.75.75 0 1 0 0-1.5Zm-7.5-1.5h1.5A2.255 2.255 0 0 1 14.872 6H9.128a2.255 2.255 0 0 1 2.122-1.5Zm5.25 12.75a2.25 2.25 0 0 1-2.25 2.25h-4.5a2.25 2.25 0 0 1-2.25-2.25V7.5h9v9.75Z"})),_path2$4||(_path2$4=__TURBOPACK__imported__module__200407__1.createElement("path",{fill:"#DA0000",d:"M10.5 16.5a.75.75 0 0 0 .75-.75v-4.5a.75.75 0 1 0-1.5 0v4.5a.75.75 0 0 0 .75.75ZM13.5 16.5a.75.75 0 0 0 .75-.75v-4.5a.75.75 0 1 0-1.5 0v4.5a.75.75 0 0 0 .75.75Z"})))};function _extends$4(){return(_extends$4=Object.assign.bind()).apply(this,arguments)}var SvgAddSquare=function(e){return __TURBOPACK__imported__module__200407__1.createElement("svg",_extends$4({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),_path$4||(_path$4=__TURBOPACK__imported__module__200407__1.createElement("path",{fill:"currentColor",d:"M21 6.75v10.5A3.754 3.754 0 0 1 17.25 21H6.75A3.754 3.754 0 0 1 3 17.25V6.75A3.754 3.754 0 0 1 6.75 3h10.5A3.754 3.754 0 0 1 21 6.75Zm-1.5 0c0-1.24-1.01-2.25-2.25-2.25H6.75C5.51 4.5 4.5 5.51 4.5 6.75v10.5c0 1.24 1.01 2.25 2.25 2.25h10.5c1.24 0 2.25-1.01 2.25-2.25V6.75Z"})),_path2$3||(_path2$3=__TURBOPACK__imported__module__200407__1.createElement("path",{fill:"#14C786",d:"M15 12.75a.75.75 0 1 0 0-1.5h-2.25V9a.75.75 0 1 0-1.5 0v2.25H9a.75.75 0 1 0 0 1.5h2.25V15a.75.75 0 1 0 1.5 0v-2.25H15Z"})))};function _extends$3(){return(_extends$3=Object.assign.bind()).apply(this,arguments)}var SvgDone=function(e){return __TURBOPACK__imported__module__200407__1.createElement("svg",_extends$3({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),_path$3||(_path$3=__TURBOPACK__imported__module__200407__1.createElement("path",{fill:"currentColor",d:"M12 3a9 9 0 1 0 9 9 9.01 9.01 0 0 0-9-9Zm0 16.5a7.5 7.5 0 1 1 7.5-7.5 7.509 7.509 0 0 1-7.5 7.5Z"})),_path2$2||(_path2$2=__TURBOPACK__imported__module__200407__1.createElement("path",{fill:"#14C786",d:"m10.85 13.96-1.986-2.036a.5.5 0 0 0-.716 0 .527.527 0 0 0 0 .735l1.985 2.036a1.01 1.01 0 0 0 .717.305.99.99 0 0 0 .716-.305l4.686-4.808a.526.526 0 0 0 0-.735.5.5 0 0 0-.716 0l-4.687 4.809Z"})))};function _extends$2(){return(_extends$2=Object.assign.bind()).apply(this,arguments)}var SvgCancel=function(e){return __TURBOPACK__imported__module__200407__1.createElement("svg",_extends$2({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),_path$2||(_path$2=__TURBOPACK__imported__module__200407__1.createElement("path",{fill:"#DA0000",d:"M15 9a.75.75 0 0 0-1.06 0L12 10.94 10.06 9A.75.75 0 0 0 9 10.06L10.94 12 9 13.94A.75.75 0 0 0 10.06 15L12 13.06 13.94 15A.75.75 0 0 0 15 13.94L13.06 12 15 10.06A.75.75 0 0 0 15 9Z"})),_path2$1||(_path2$1=__TURBOPACK__imported__module__200407__1.createElement("path",{fill:"currentColor",d:"M12 3a9 9 0 1 0 9 9 9.01 9.01 0 0 0-9-9Zm0 16.5a7.5 7.5 0 1 1 7.5-7.5 7.509 7.509 0 0 1-7.5 7.5Z"})))};function LargeArrayNode(e){let{originNode:t,node:n,depth:r,index:i,deleteHandle:a,customOptions:o,startIndex:s}=e,{enableClipboard:l,src:c,onEdit:u,onChange:d,forceUpdate:p,displaySize:h}=(0,__TURBOPACK__imported__module__200407__1.useContext)(JsonViewContext),[f,m]=(0,__TURBOPACK__imported__module__200407__1.useState)(!0),g=(0,__TURBOPACK__imported__module__200407__1.useCallback)((e,n,i)=>{t[e]=n,u&&u({newValue:n,oldValue:i,depth:r,src:c,indexOrName:e,parentType:"array"}),d&&d({type:"edit",depth:r,src:c,indexOrName:e,parentType:"array"}),p()},[n,u,d,p]),v=e=>{t.splice(e,1),p()},x=(0,__TURBOPACK__imported__module__832520__1.jsxs)(__TURBOPACK__imported__module__832520__1.Fragment,{children:[!f&&(0,__TURBOPACK__imported__module__832520__1.jsxs)("span",Object.assign({onClick:()=>m(!0),className:"jv-size-chevron"},{children:[ifDisplay(h,r,f)&&(0,__TURBOPACK__imported__module__832520__1.jsxs)("span",Object.assign({className:"jv-size"},{children:[objectSize(n)," Items"]})),(0,__TURBOPACK__imported__module__832520__1.jsx)(SvgAngleDown,{className:"jv-chevron"})]})),!f&&l&&customCopy(o)&&(0,__TURBOPACK__imported__module__832520__1.jsx)(CopyButton,{node:n})]});return(0,__TURBOPACK__imported__module__832520__1.jsxs)("div",{children:[(0,__TURBOPACK__imported__module__832520__1.jsx)("span",{children:"["}),x,f?(0,__TURBOPACK__imported__module__832520__1.jsxs)("button",Object.assign({onClick:()=>m(!1),className:"jv-button"},{children:[s," ... ",s+n.length-1]})):(0,__TURBOPACK__imported__module__832520__1.jsx)("div",Object.assign({className:"jv-indent"},{children:n.map((e,t)=>(0,__TURBOPACK__imported__module__832520__1.jsx)(NameValue,{indexOrName:t+s,value:e,depth:r,parent:n,deleteHandle:v,editHandle:g},String(i)+String(t)))})),(0,__TURBOPACK__imported__module__832520__1.jsx)("span",{children:"]"})]})}function LargeArray(e){let{node:t,depth:n,deleteHandle:r,indexOrName:i,customOptions:a}=e,o=[];for(let e=0;e<t.length;e+=100)o.push(t.slice(e,e+100));let{collapsed:s,enableClipboard:l,collapseObjectsAfterLength:c,editable:u,onDelete:d,src:p,onAdd:h,onEdit:f,onChange:m,forceUpdate:g,displaySize:v}=(0,__TURBOPACK__imported__module__200407__1.useContext)(JsonViewContext),[x,y]=(0,__TURBOPACK__imported__module__200407__1.useState)(isCollapsed_largeArray(t,n,i,s,c,a));(0,__TURBOPACK__imported__module__200407__1.useEffect)(()=>{y(isCollapsed_largeArray(t,n,i,s,c,a))},[s,c]);let[b,w]=(0,__TURBOPACK__imported__module__200407__1.useState)(!1),j=()=>{w(!1),r&&r(i),d&&d({value:t,depth:n,src:p,indexOrName:i,parentType:"array"}),m&&m({type:"delete",depth:n,src:p,indexOrName:i,parentType:"array"})},[C,k]=(0,__TURBOPACK__imported__module__200407__1.useState)(!1),S=()=>{let e=t;e.push(null),h&&h({indexOrName:e.length-1,depth:n,src:p,parentType:"array"}),m&&m({type:"add",indexOrName:e.length-1,depth:n,src:p,parentType:"array"}),g()},N=b||C,E=()=>{w(!1),k(!1)},M=(0,__TURBOPACK__imported__module__832520__1.jsxs)(__TURBOPACK__imported__module__832520__1.Fragment,{children:[!x&&!N&&(0,__TURBOPACK__imported__module__832520__1.jsxs)("span",Object.assign({onClick:()=>y(!0),className:"jv-size-chevron"},{children:[ifDisplay(v,n,x)&&(0,__TURBOPACK__imported__module__832520__1.jsxs)("span",Object.assign({className:"jv-size"},{children:[t.length," Items"]})),(0,__TURBOPACK__imported__module__832520__1.jsx)(SvgAngleDown,{className:"jv-chevron"})]})),N&&(0,__TURBOPACK__imported__module__832520__1.jsx)(SvgDone,{className:"json-view--edit",style:{display:"inline-block"},onClick:C?S:j}),N&&(0,__TURBOPACK__imported__module__832520__1.jsx)(SvgCancel,{className:"json-view--edit",style:{display:"inline-block"},onClick:E}),!x&&!N&&l&&customCopy(a)&&(0,__TURBOPACK__imported__module__832520__1.jsx)(CopyButton,{node:t}),!x&&!N&&editableAdd(u)&&customAdd(a)&&(0,__TURBOPACK__imported__module__832520__1.jsx)(SvgAddSquare,{className:"json-view--edit",onClick:()=>{S()}}),!x&&!N&&editableDelete(u)&&customDelete(a)&&r&&(0,__TURBOPACK__imported__module__832520__1.jsx)(SvgTrash,{className:"json-view--edit",onClick:()=>w(!0)})]});return(0,__TURBOPACK__imported__module__832520__1.jsxs)(__TURBOPACK__imported__module__832520__1.Fragment,{children:[(0,__TURBOPACK__imported__module__832520__1.jsx)("span",{children:"["}),M,x?(0,__TURBOPACK__imported__module__832520__1.jsx)("button",Object.assign({onClick:()=>y(!1),className:"jv-button"},{children:"..."})):(0,__TURBOPACK__imported__module__832520__1.jsx)("div",Object.assign({className:"jv-indent"},{children:o.map((e,r)=>(0,__TURBOPACK__imported__module__832520__1.jsx)(LargeArrayNode,{originNode:t,node:e,depth:n,index:r,startIndex:100*r},String(i)+String(r)))})),(0,__TURBOPACK__imported__module__832520__1.jsx)("span",{children:"]"}),x&&ifDisplay(v,n,x)&&(0,__TURBOPACK__imported__module__832520__1.jsxs)("span",Object.assign({onClick:()=>y(!1),className:"jv-size"},{children:[t.length," Items"]}))]})}function ObjectNode(e){let{node:t,depth:n,indexOrName:r,deleteHandle:i,customOptions:a}=e,{collapsed:o,enableClipboard:s,ignoreLargeArray:l,collapseObjectsAfterLength:c,editable:u,onDelete:d,src:p,onAdd:h,onEdit:f,onChange:m,forceUpdate:g,displaySize:v}=(0,__TURBOPACK__imported__module__200407__1.useContext)(JsonViewContext);if(!l&&Array.isArray(t)&&t.length>100)return(0,__TURBOPACK__imported__module__832520__1.jsx)(LargeArray,{node:t,depth:n,indexOrName:r,deleteHandle:i,customOptions:a});let x=isObject(t),[y,b]=(0,__TURBOPACK__imported__module__200407__1.useState)(isCollapsed(t,n,r,o,c,a));(0,__TURBOPACK__imported__module__200407__1.useEffect)(()=>{b(isCollapsed(t,n,r,o,c,a))},[o,c]);let w=(0,__TURBOPACK__imported__module__200407__1.useCallback)((e,r,i)=>{Array.isArray(t)?t[+e]=r:t&&(t[e]=r),f&&f({newValue:r,oldValue:i,depth:n,src:p,indexOrName:e,parentType:x?"object":"array"}),m&&m({type:"edit",depth:n,src:p,indexOrName:e,parentType:x?"object":"array"}),g()},[t,f,m,g]),j=e=>{Array.isArray(t)?t.splice(+e,1):t&&delete t[e],g()},[C,k]=(0,__TURBOPACK__imported__module__200407__1.useState)(!1),S=()=>{k(!1),i&&i(r),d&&d({value:t,depth:n,src:p,indexOrName:r,parentType:x?"object":"array"}),m&&m({type:"delete",depth:n,src:p,indexOrName:r,parentType:x?"object":"array"})},[N,E]=(0,__TURBOPACK__imported__module__200407__1.useState)(!1),M=(0,__TURBOPACK__imported__module__200407__1.useRef)(null),I=()=>{var e;if(x){let r=null==(e=M.current)?void 0:e.value;r&&(t[r]=null,M.current&&(M.current.value=""),E(!1),h&&h({indexOrName:r,depth:n,src:p,parentType:"object"}),m&&m({type:"add",indexOrName:r,depth:n,src:p,parentType:"object"}))}else if(Array.isArray(t)){let e=t;e.push(null),h&&h({indexOrName:e.length-1,depth:n,src:p,parentType:"array"}),m&&m({type:"add",indexOrName:e.length-1,depth:n,src:p,parentType:"array"})}g()},D=e=>{"Enter"===e.key?(e.preventDefault(),I()):"Escape"===e.key&&A()},T=C||N,A=()=>{k(!1),E(!1)},L=(0,__TURBOPACK__imported__module__832520__1.jsxs)(__TURBOPACK__imported__module__832520__1.Fragment,{children:[!y&&!T&&(0,__TURBOPACK__imported__module__832520__1.jsxs)("span",Object.assign({onClick:()=>b(!0),className:"jv-size-chevron"},{children:[ifDisplay(v,n,y)&&(0,__TURBOPACK__imported__module__832520__1.jsxs)("span",Object.assign({className:"jv-size"},{children:[objectSize(t)," Items"]})),(0,__TURBOPACK__imported__module__832520__1.jsx)(SvgAngleDown,{className:"jv-chevron"})]})),N&&x&&(0,__TURBOPACK__imported__module__832520__1.jsx)("input",{className:"json-view--input",placeholder:"property",ref:M,onKeyDown:D}),T&&(0,__TURBOPACK__imported__module__832520__1.jsx)(SvgDone,{className:"json-view--edit",style:{display:"inline-block"},onClick:N?I:S}),T&&(0,__TURBOPACK__imported__module__832520__1.jsx)(SvgCancel,{className:"json-view--edit",style:{display:"inline-block"},onClick:A}),!y&&!T&&s&&customCopy(a)&&(0,__TURBOPACK__imported__module__832520__1.jsx)(CopyButton,{node:t}),!y&&!T&&editableAdd(u)&&customAdd(a)&&(0,__TURBOPACK__imported__module__832520__1.jsx)(SvgAddSquare,{className:"json-view--edit",onClick:()=>{x?(E(!0),setTimeout(()=>{var e;return null==(e=M.current)?void 0:e.focus()})):I()}}),!y&&!T&&editableDelete(u)&&customDelete(a)&&i&&(0,__TURBOPACK__imported__module__832520__1.jsx)(SvgTrash,{className:"json-view--edit",onClick:()=>k(!0)})]});return Array.isArray(t)?(0,__TURBOPACK__imported__module__832520__1.jsxs)(__TURBOPACK__imported__module__832520__1.Fragment,{children:[(0,__TURBOPACK__imported__module__832520__1.jsx)("span",{children:"["}),L,y?(0,__TURBOPACK__imported__module__832520__1.jsx)("button",Object.assign({onClick:()=>b(!1),className:"jv-button"},{children:"..."})):(0,__TURBOPACK__imported__module__832520__1.jsx)("div",Object.assign({className:"jv-indent"},{children:t.map((e,i)=>(0,__TURBOPACK__imported__module__832520__1.jsx)(NameValue,{indexOrName:i,value:e,depth:n,parent:t,deleteHandle:j,editHandle:w},String(r)+String(i)))})),(0,__TURBOPACK__imported__module__832520__1.jsx)("span",{children:"]"}),y&&ifDisplay(v,n,y)&&(0,__TURBOPACK__imported__module__832520__1.jsxs)("span",Object.assign({onClick:()=>b(!1),className:"jv-size"},{children:[objectSize(t)," Items"]}))]}):x?(0,__TURBOPACK__imported__module__832520__1.jsxs)(__TURBOPACK__imported__module__832520__1.Fragment,{children:[(0,__TURBOPACK__imported__module__832520__1.jsx)("span",{children:"{"}),L,y?(0,__TURBOPACK__imported__module__832520__1.jsx)("button",Object.assign({onClick:()=>b(!1),className:"jv-button"},{children:"..."})):(0,__TURBOPACK__imported__module__832520__1.jsx)("div",Object.assign({className:"jv-indent"},{children:Object.entries(t).map(e=>{let[i,a]=e;return(0,__TURBOPACK__imported__module__832520__1.jsx)(NameValue,{indexOrName:i,value:a,depth:n,parent:t,deleteHandle:j,editHandle:w},String(r)+String(i))})})),(0,__TURBOPACK__imported__module__832520__1.jsx)("span",{children:"}"}),y&&ifDisplay(v,n,y)&&(0,__TURBOPACK__imported__module__832520__1.jsxs)("span",Object.assign({onClick:()=>b(!1),className:"jv-size"},{children:[objectSize(t)," Items"]}))]}):null}let LongString=__TURBOPACK__imported__module__200407__1.default.forwardRef((e,t)=>{let{str:n,className:r,ctrlClick:i}=e,{collapseStringMode:a,collapseStringsAfterLength:o,customizeCollapseStringUI:s}=(0,__TURBOPACK__imported__module__200407__1.useContext)(JsonViewContext),[l,c]=(0,__TURBOPACK__imported__module__200407__1.useState)(!0),u=(0,__TURBOPACK__imported__module__200407__1.useRef)(null);o=o>0?o:0;let d=n.replace(/\s+/g," "),p="function"==typeof s?s(d,l):"string"==typeof s?s:"...",h=e=>{var t;if((e.ctrlKey||e.metaKey)&&i)i(e);else{let e=window.getSelection();if(e&&e.anchorOffset!==e.focusOffset&&(null==(t=e.anchorNode)?void 0:t.parentElement)===u.current)return;c(!l)}};if(n.length<=o)return(0,__TURBOPACK__imported__module__832520__1.jsxs)("span",Object.assign({ref:u,className:r,onClick:i},{children:['"',n,'"']}));if("address"===a)return n.length<=10?(0,__TURBOPACK__imported__module__832520__1.jsxs)("span",Object.assign({ref:u,className:r,onClick:i},{children:['"',n,'"']})):(0,__TURBOPACK__imported__module__832520__1.jsxs)("span",Object.assign({ref:u,onClick:h,className:r+" cursor-pointer"},{children:['"',l?[d.slice(0,6),p,d.slice(-4)]:n,'"']}));if("directly"===a)return(0,__TURBOPACK__imported__module__832520__1.jsxs)("span",Object.assign({ref:u,onClick:h,className:r+" cursor-pointer"},{children:['"',l?[d.slice(0,o),p]:n,'"']}));if("word"===a){let e=o,t=o+1,i=d,a=1;for(;;){if(/\W/.test(n[e])){i=n.slice(0,e);break}if(/\W/.test(n[t])){i=n.slice(0,t);break}if(6===a){i=n.slice(0,o);break}a++,e--,t++}return(0,__TURBOPACK__imported__module__832520__1.jsxs)("span",Object.assign({ref:u,onClick:h,className:r+" cursor-pointer"},{children:['"',l?[i,p]:n,'"']}))}return(0,__TURBOPACK__imported__module__832520__1.jsxs)("span",Object.assign({ref:u,className:r},{children:['"',n,'"']}))});function _extends$1(){return(_extends$1=Object.assign.bind()).apply(this,arguments)}var SvgEdit=function(e){return __TURBOPACK__imported__module__200407__1.createElement("svg",_extends$1({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),_path$1||(_path$1=__TURBOPACK__imported__module__200407__1.createElement("path",{fill:"currentColor",d:"M17.25 3H6.75A3.754 3.754 0 0 0 3 6.75v10.5A3.754 3.754 0 0 0 6.75 21h10.5A3.754 3.754 0 0 0 21 17.25V6.75A3.754 3.754 0 0 0 17.25 3Zm2.25 14.25c0 1.24-1.01 2.25-2.25 2.25H6.75c-1.24 0-2.25-1.01-2.25-2.25V6.75c0-1.24 1.01-2.25 2.25-2.25h10.5c1.24 0 2.25 1.01 2.25 2.25v10.5Zm-6.09-9.466-5.031 5.03a2.981 2.981 0 0 0-.879 2.121v1.19c0 .415.336.75.75.75h1.19c.8 0 1.554-.312 2.12-.879l5.03-5.03a2.252 2.252 0 0 0 0-3.182c-.85-.85-2.331-.85-3.18 0Zm-2.91 7.151c-.28.28-.666.44-1.06.44H9v-.44c0-.4.156-.777.44-1.06l3.187-3.188 1.06 1.061-3.187 3.188Zm5.03-5.03-.782.783-1.06-1.061.782-.782a.766.766 0 0 1 1.06 0 .75.75 0 0 1 0 1.06Z"})))};function _extends(){return(_extends=Object.assign.bind()).apply(this,arguments)}var SvgLink=function(e){return __TURBOPACK__imported__module__200407__1.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),_path||(_path=__TURBOPACK__imported__module__200407__1.createElement("path",{fill:"currentColor",d:"M6.75 3h5.5v1.5h-5.5C5.51 4.5 4.5 5.51 4.5 6.75v10.5c0 1.24 1.01 2.25 2.25 2.25h10.5c1.24 0 2.25-1.01 2.25-2.25v-5.5H21v5.5A3.754 3.754 0 0 1 17.25 21H6.75A3.754 3.754 0 0 1 3 17.25V6.75A3.754 3.754 0 0 1 6.75 3Z"})),_path2||(_path2=__TURBOPACK__imported__module__200407__1.createElement("path",{fill:"currentColor",d:"M20.013 3h-3.946a.987.987 0 0 0 0 1.973h1.564l-6.342 6.342a1.004 1.004 0 0 0 0 1.396 1.004 1.004 0 0 0 1.396 0l6.342-6.342v1.564a.987.987 0 0 0 1.973 0V3.987A.987.987 0 0 0 20.013 3Z"})))};function JsonNode(param){let customReturn,{node,depth,deleteHandle:_deleteHandle,indexOrName,parent,editHandle}=param,{collapseStringsAfterLength,enableClipboard,editable,src,onDelete,onChange,customizeNode,matchesURL,urlRegExp}=(0,__TURBOPACK__imported__module__200407__1.useContext)(JsonViewContext);if("function"==typeof customizeNode&&(customReturn=safeCall(customizeNode,[{node,depth,indexOrName}])),customReturn){if((0,__TURBOPACK__imported__module__200407__1.isValidElement)(customReturn))return customReturn;else if(isReactComponent(customReturn)){let CustomComponent=customReturn;return(0,__TURBOPACK__imported__module__832520__1.jsx)(CustomComponent,{node:node,depth:depth,indexOrName:indexOrName})}}if(Array.isArray(node)||isObject(node))return(0,__TURBOPACK__imported__module__832520__1.jsx)(ObjectNode,{node:node,depth:depth,indexOrName:indexOrName,deleteHandle:_deleteHandle,customOptions:"object"==typeof customReturn?customReturn:void 0});{let type=typeof node,[editing,setEditing]=(0,__TURBOPACK__imported__module__200407__1.useState)(!1),[deleting,setDeleting]=(0,__TURBOPACK__imported__module__200407__1.useState)(!1),valueRef=(0,__TURBOPACK__imported__module__200407__1.useRef)(null),edit=()=>{setEditing(!0),setTimeout(()=>{var e,t;null==(e=window.getSelection())||e.selectAllChildren(valueRef.current),null==(t=valueRef.current)||t.focus()})},done=(0,__TURBOPACK__imported__module__200407__1.useCallback)(()=>{let newValue=valueRef.current.innerText;try{("{}"===newValue||"[]"===newValue)&&(newValue="(".concat(newValue,")"));let evalValue=eval(newValue);editHandle&&editHandle(indexOrName,evalValue,node)}catch(e){let trimmedStringValue=resolveEvalFailedNewValue(type,newValue);editHandle&&editHandle(indexOrName,trimmedStringValue,node)}setEditing(!1)},[editHandle]),cancel=()=>{setEditing(!1),setDeleting(!1)},deleteHandle=()=>{setDeleting(!1),_deleteHandle&&_deleteHandle(indexOrName),onDelete&&onDelete({value:node,depth,src,indexOrName:indexOrName,parentType:Array.isArray(parent)?"array":"object"}),onChange&&onChange({depth,src,indexOrName:indexOrName,parentType:Array.isArray(parent)?"array":"object",type:"delete"})},handleKeyDown=(0,__TURBOPACK__imported__module__200407__1.useCallback)(e=>{"Enter"===e.key?(e.preventDefault(),done()):"Escape"===e.key&&cancel()},[done]),isEditing=editing||deleting,ctrlClick=!isEditing&&editableEdit(editable)&&customEdit(customReturn)&&editHandle?e=>{(e.ctrlKey||e.metaKey)&&edit()}:void 0,Icons=(0,__TURBOPACK__imported__module__832520__1.jsxs)(__TURBOPACK__imported__module__832520__1.Fragment,{children:[isEditing&&(0,__TURBOPACK__imported__module__832520__1.jsx)(SvgDone,{className:"json-view--edit",style:{display:"inline-block"},onClick:deleting?deleteHandle:done}),isEditing&&(0,__TURBOPACK__imported__module__832520__1.jsx)(SvgCancel,{className:"json-view--edit",style:{display:"inline-block"},onClick:cancel}),!isEditing&&enableClipboard&&customCopy(customReturn)&&(0,__TURBOPACK__imported__module__832520__1.jsx)(CopyButton,{node:node}),!isEditing&&matchesURL&&"string"===type&&urlRegExp.test(node)&&customMatchesURL(customReturn)&&(0,__TURBOPACK__imported__module__832520__1.jsx)("a",Object.assign({href:node,target:"_blank",className:"json-view--link"},{children:(0,__TURBOPACK__imported__module__832520__1.jsx)(SvgLink,{})})),!isEditing&&editableEdit(editable)&&customEdit(customReturn)&&editHandle&&(0,__TURBOPACK__imported__module__832520__1.jsx)(SvgEdit,{className:"json-view--edit",onClick:edit}),!isEditing&&editableDelete(editable)&&customDelete(customReturn)&&_deleteHandle&&(0,__TURBOPACK__imported__module__832520__1.jsx)(SvgTrash,{className:"json-view--edit",onClick:()=>setDeleting(!0)})]}),className="json-view--string";switch("string"==typeof(null==customReturn?void 0:customReturn.className)&&(className+=" "+customReturn.className),type){case"number":case"bigint":className="json-view--number";break;case"boolean":className="json-view--boolean";break;case"object":className="json-view--null"}deleting&&(className+=" json-view--deleting");let displayValue=String(node);"bigint"===type&&(displayValue+="n");let EditingElement=(0,__TURBOPACK__imported__module__200407__1.useMemo)(()=>(0,__TURBOPACK__imported__module__832520__1.jsx)("span",{contentEditable:!0,className:className,dangerouslySetInnerHTML:{__html:"string"===type?'"'.concat(displayValue,'"'):displayValue},ref:valueRef,onKeyDown:handleKeyDown}),[displayValue,type,handleKeyDown]);return"string"===type?(0,__TURBOPACK__imported__module__832520__1.jsxs)(__TURBOPACK__imported__module__832520__1.Fragment,{children:[editing?EditingElement:node.length>collapseStringsAfterLength?(0,__TURBOPACK__imported__module__832520__1.jsx)(LongString,{str:node,ref:valueRef,className:className,ctrlClick:ctrlClick}):(0,__TURBOPACK__imported__module__832520__1.jsxs)("span",Object.assign({className:className,onClick:ctrlClick},{children:['"',displayValue,'"']})),Icons]}):(0,__TURBOPACK__imported__module__832520__1.jsxs)(__TURBOPACK__imported__module__832520__1.Fragment,{children:[editing?EditingElement:(0,__TURBOPACK__imported__module__832520__1.jsx)("span",Object.assign({className:className,onClick:ctrlClick},{children:displayValue})),Icons]})}}let defaultURLRegExp=/^(((ht|f)tps?):\/\/)?([^!@#$%^&*?.\s-]([^!@#$%^&*?.\s]{0,63}[^!@#$%^&*?.\s])?\.)+[a-z]{2,6}\/?/,JsonViewContext=(0,__TURBOPACK__imported__module__200407__1.createContext)({src:void 0,collapseStringsAfterLength:99,collapseStringMode:"directly",customizeCollapseStringUI:void 0,collapseObjectsAfterLength:20,collapsed:!1,enableClipboard:!0,editable:!1,onEdit:void 0,onDelete:void 0,onAdd:void 0,onChange:void 0,forceUpdate:()=>{},customizeNode:void 0,customizeCopy:()=>{},displaySize:void 0,matchesURL:!1,urlRegExp:defaultURLRegExp,ignoreLargeArray:!1});function JsonView(e){let{src:t,collapseStringsAfterLength:n=99,collapseStringMode:r="directly",customizeCollapseStringUI:i,collapseObjectsAfterLength:a=99,collapsed:o,enableClipboard:s=!0,editable:l=!1,onEdit:c,onDelete:u,onAdd:d,onChange:p,dark:h=!1,theme:f="default",customizeNode:m,customizeCopy:g=stringifyForCopying,displaySize:v,style:x,className:y,matchesURL:b=!1,urlRegExp:w=defaultURLRegExp,ignoreLargeArray:j=!1}=e,[C,k]=(0,__TURBOPACK__imported__module__200407__1.useState)(0),S=(0,__TURBOPACK__imported__module__200407__1.useCallback)(()=>k(e=>++e),[]),[N,E]=(0,__TURBOPACK__imported__module__200407__1.useState)(t);return(0,__TURBOPACK__imported__module__200407__1.useEffect)(()=>E(t),[t]),(0,__TURBOPACK__imported__module__832520__1.jsx)(JsonViewContext.Provider,Object.assign({value:{src:N,collapseStringsAfterLength:n,collapseStringMode:r,customizeCollapseStringUI:i,collapseObjectsAfterLength:a,collapsed:o,enableClipboard:s,editable:l,onEdit:c,onDelete:u,onAdd:d,onChange:p,forceUpdate:S,customizeNode:m,customizeCopy:g,displaySize:v,matchesURL:b,urlRegExp:w,ignoreLargeArray:j}},{children:(0,__TURBOPACK__imported__module__832520__1.jsx)("code",Object.assign({className:"json-view"+(h?" dark":"")+(f&&"default"!==f?" json-view_"+f:"")+(y?" "+y:""),style:x},{children:(0,__TURBOPACK__imported__module__832520__1.jsx)(JsonNode,{node:N,depth:1,editHandle:(e,t,n)=>{E(t),c&&c({newValue:t,oldValue:n,depth:1,src:N,indexOrName:e,parentType:null}),p&&p({type:"edit",depth:1,src:N,indexOrName:e,parentType:null})},deleteHandle:()=>{E(void 0),u&&u({value:N,depth:1,src:N,indexOrName:"",parentType:null}),p&&p({depth:1,src:N,indexOrName:"",parentType:null,type:"delete"})}})}))}))}var __TURBOPACK__imported__module__243025__=__turbopack_context__.i(243025),__TURBOPACK__imported__module__304649__=__turbopack_context__.i(304649),__TURBOPACK__imported__module__596359__=__turbopack_context__.i(596359),__TURBOPACK__imported__module__422981__=__turbopack_context__.i(422981),__TURBOPACK__imported__module__978036__=__turbopack_context__.i(978036),__TURBOPACK__imported__module__88919__=__turbopack_context__.i(88919),__TURBOPACK__imported__module__681816__=__turbopack_context__.i(681816),__TURBOPACK__imported__module__633577__=__turbopack_context__.i(633577),__TURBOPACK__imported__module__242759__=__turbopack_context__.i(242759);function getEventStyle(e){switch(e){case"error":return"text-red-700! bg-red-50 hover:bg-red-100";case"warn":return"text-amber-700 bg-amber-50 hover:bg-amber-100";default:return"text-gray-700 hover:bg-gray-100"}}function CodeOutputAttachmentView(e){let{value:t}=e;return Array.isArray(t)?(0,__TURBOPACK__imported__module__832520__.jsx)("div",{className:"flex flex-col gap-2 font-mono text-[13px] leading-4 text-gray-900",children:[...t].map((e,t)=>{let[n,r]=e;return n.startsWith("image/")?(0,__TURBOPACK__imported__module__832520__.jsx)("img",{alt:"Attachment ".concat(t),src:"data:".concat(n,";base64,").concat(r)},t):n.startsWith("text/")||n.startsWith("application/")?(0,__TURBOPACK__imported__module__832520__.jsx)("div",{className:"whitespace-pre-wrap",children:r},t):null})}):null}let JsonRowView=(0,__TURBOPACK__imported__module__200407__.memo)(e=>{let{src:t,className:n,style:r}=e;return"string"==typeof t?(0,__TURBOPACK__imported__module__832520__.jsx)("span",{className:(0,__TURBOPACK__imported__module__304649__.cn)("whitespace-break-spaces break-all leading-[1.12] text-gray-900",n),children:(0,__TURBOPACK__imported__module__832520__.jsx)(__TURBOPACK__imported__module__243025__.default,{children:t})}):(0,__TURBOPACK__imported__module__832520__.jsx)(JsonView,{className:(0,__TURBOPACK__imported__module__304649__.cn)("leading-4 text-gray-900 [&_.jv-chevron]:ml-1 [&_.jv-chevron]:inline-block [&_.jv-chevron]:size-3 [&_.jv-chevron]:text-gray-500 [&_.jv-indent]:pl-4",n),collapsed:1,editable:!1,enableClipboard:!1,src:t,theme:"default",style:r})});JsonRowView.displayName="JsonRowView";let CodeOutput=(0,__TURBOPACK__imported__module__200407__.memo)(e=>{let{value:t,className:n,inline:r}=e;return(0,__TURBOPACK__imported__module__832520__.jsx)("output",{"aria-label":"Code execution output",className:(0,__TURBOPACK__imported__module__304649__.cn)("codeblock not-prose relative flex w-full flex-col overflow-y-auto font-mono text-[13px]",n),children:t?"error"in t?(0,__TURBOPACK__imported__module__832520__.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,__TURBOPACK__imported__module__832520__.jsx)(__TURBOPACK__imported__module__681816__.ErrorComponent,{error:Error(t.error,{cause:"code-execution-error"})})}):(0,__TURBOPACK__imported__module__832520__.jsxs)(__TURBOPACK__imported__module__832520__.Fragment,{children:[t.stdout.length?t.stdout.map((e,t)=>(0,__TURBOPACK__imported__module__832520__.jsx)(CodeOutputMessage,{inline:r,children:e.map((e,n)=>(0,__TURBOPACK__imported__module__832520__.jsx)(JsonRowView,{src:e,className:"leading-normal"},"".concat(t,"-").concat(n,"-stdout")))},"".concat(t,"-stdout"))):null,t.stderr.length?t.stderr.map((e,t)=>(0,__TURBOPACK__imported__module__832520__.jsx)(CodeOutputMessage,{className:r?getEventStyle("error"):void 0,inline:r,children:e.map((e,n)=>(0,__TURBOPACK__imported__module__832520__.jsx)(JsonRowView,{className:(0,__TURBOPACK__imported__module__304649__.cn)("leading-normal [&_.jv-chevron]:ml-1 [&_.jv-chevron]:inline-block [&_.jv-chevron]:size-3 [&_.jv-chevron]:text-gray-500 [&_.jv-indent]:pl-4",r&&"text-red-700"),src:e,style:{color:"rgb(192,27,93)"}},"".concat(t,"-").concat(n,"-stderr")))},"".concat(t,"-stderr"))):null,t.returned?(0,__TURBOPACK__imported__module__832520__.jsx)(CodeOutputMessage,{inline:r,children:"$$attachments"in t.returned?t.returned.$$attachments.length>0?(0,__TURBOPACK__imported__module__832520__.jsx)(CodeOutputAttachmentView,{value:t.returned.$$attachments}):null:(0,__TURBOPACK__imported__module__832520__.jsx)(JsonRowView,{className:"leading-normal [&_.jv-chevron]:ml-1 [&_.jv-chevron]:inline-block [&_.jv-chevron]:size-3 [&_.jv-chevron]:text-gray-500 [&_.jv-indent]:pl-4",src:t.returned})}):null]}):null})});function CodeOutputMessage(e){let{children:t,fileName:n,isCopied:r,handleCopy:i,handleDownload:a,handleFileOpen:o,inline:s,className:l}=e,{scp:c}=(0,__TURBOPACK__imported__module__242759__.useFlags)();return null===t?null:(0,__TURBOPACK__imported__module__832520__.jsxs)("div",{className:(0,__TURBOPACK__imported__module__304649__.cn)("border-alpha-200 group/code-output-message flex w-full flex-col gap-2 border-b p-2 text-[13px] last:border-b-0",!s&&"pl-2.5",l),children:[(0,__TURBOPACK__imported__module__832520__.jsxs)("div",{className:"relative flex w-full items-baseline gap-3",children:[!s&&(0,__TURBOPACK__imported__module__832520__.jsx)("div",{"aria-hidden":!0,className:"select-none text-pink-700 dark:text-pink-500",children:(0,__TURBOPACK__imported__module__832520__.jsx)(__TURBOPACK__imported__module__422981__.ChevronRight,{size:8})}),n?(0,__TURBOPACK__imported__module__832520__.jsx)("button",{className:"codeblock not-prose line-clamp-1 font-mono text-blue-700 underline",onClick:o,children:n}):t,c&&!s&&(0,__TURBOPACK__imported__module__832520__.jsx)("div",{className:(0,__TURBOPACK__imported__module__304649__.cn)("pointer-events-none absolute inset-y-0 right-0 z-10"),children:(0,__TURBOPACK__imported__module__832520__.jsxs)(__TURBOPACK__imported__module__633577__.ActionGroup,{className:"pointer-events-auto sticky top-3 flex -translate-y-1.5 opacity-0 group-hover:opacity-100 has-data-[state='delayed-open']:opacity-100 has-data-[state='instant-open']:opacity-100 has-data-[state=open]:opacity-100 md:top-5 in-data-[touch-active=true]:opacity-100",children:[(0,__TURBOPACK__imported__module__832520__.jsx)(__TURBOPACK__imported__module__633577__.Action,{"aria-label":"Copy",onClick:i,tooltip:"Copy",children:(0,__TURBOPACK__imported__module__832520__.jsx)("span",{"aria-hidden":!0,children:r?(0,__TURBOPACK__imported__module__832520__.jsx)(__TURBOPACK__imported__module__596359__.Check,{}):(0,__TURBOPACK__imported__module__832520__.jsx)(__TURBOPACK__imported__module__978036__.Copy,{className:"pointer-events-none"})})}),(0,__TURBOPACK__imported__module__832520__.jsx)(__TURBOPACK__imported__module__633577__.ActionSeparator,{className:"author-action"}),(0,__TURBOPACK__imported__module__832520__.jsx)(__TURBOPACK__imported__module__633577__.Action,{"aria-label":"Download",onClick:a,tooltip:"Download",children:(0,__TURBOPACK__imported__module__832520__.jsx)("span",{"aria-hidden":!0,children:(0,__TURBOPACK__imported__module__832520__.jsx)(__TURBOPACK__imported__module__88919__.Download,{className:"pointer-events-none"})})})]})})]}),n&&(0,__TURBOPACK__imported__module__832520__.jsx)("div",{className:"pl-5",children:t})]})}CodeOutput.displayName="CodeOutput",__turbopack_context__.s(["CodeOutput",()=>CodeOutput,"CodeOutputMessage",()=>CodeOutputMessage,"JsonRowView",()=>JsonRowView,"getEventStyle",()=>getEventStyle],110909)},483962,e=>{"use strict";var t=e.i(832520),n=e.i(200407),r=e.i(162061),i=e.i(529693),a=e.i(304649),o=e.i(827728);function s(e){let{show:n,axis:r,side:i,resizing:o,dotsHandle:s,onMouseDown:l,onFocus:c,onBlur:u,ref:d}=e,p={"aria-orientation":"x"===r?"vertical":"horizontal",onBlur:u,onFocus:c,onMouseDown:l,ref:d,role:"separator",tabIndex:0};return s?(0,t.jsx)("div",{className:(0,a.cn)("group absolute flex items-center justify-center focus:outline-hidden","x"===r?(0,a.cn)("inset-y-0 w-5 cursor-col-resize flex-col","start"===i?"left-[-19px]":"right-[-19px]"):(0,a.cn)("inset-x-0 h-5 cursor-row-resize flex-row","start"===i?"top-[-19px]":"bottom-[-19px]")),...p,children:(0,t.jsxs)("div",{className:"flex gap-0.5",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,t.jsx)("div",{className:"size-[2.5px] rounded-full bg-gray-400 transition-colors duration-300 group-hover:bg-black group-focus:bg-black"}),(0,t.jsx)("div",{className:"size-[2.5px] rounded-full bg-gray-400 transition-colors duration-300 group-hover:bg-black group-focus:bg-black"}),(0,t.jsx)("div",{className:"size-[2.5px] rounded-full bg-gray-400 transition-colors duration-300 group-hover:bg-black group-focus:bg-black"})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,t.jsx)("div",{className:"size-[2.5px] rounded-full bg-gray-400 transition-colors duration-300 group-hover:bg-black group-focus:bg-black"}),(0,t.jsx)("div",{className:"size-[2.5px] rounded-full bg-gray-400 transition-colors duration-300 group-hover:bg-black group-focus:bg-black"}),(0,t.jsx)("div",{className:"size-[2.5px] rounded-full bg-gray-400 transition-colors duration-300 group-hover:bg-black group-focus:bg-black"})]})]})}):n?(0,t.jsx)("div",{className:(0,a.cn)("group absolute z-10 focus:outline-hidden","x"===r&&(0,a.cn)("inset-y-0 w-3 cursor-col-resize","start"===i?"-left-1.5":"-right-1.5"),"y"===r&&(0,a.cn)("inset-x-0 h-3 cursor-row-resize","start"===i?"-top-1.5":"-bottom-1.5")),...p,children:(0,t.jsx)("div",{className:(0,a.cn)("absolute inset-0 transition-all duration-200 group-hover:bg-gray-300 group-focus:bg-gray-400","x"===r&&(0,a.cn)("mx-auto group-hover:w-[3px] group-focus:w-[3px]",o?"w-1":"w-0"),"y"===r&&(0,a.cn)("my-auto group-hover:h-[3px] group-focus:h-[3px]",o?"h-1":"h-0"))})}):null}let l=(0,n.memo)(e=>{var l,c;let{show:u,innerClassName:d,dotsHandle:p=!1,onTrack:h,className:f,initialSize:m,animated:g=!0,minSizePx:v,minNegativeSpace:x,axis:y,side:b,children:w,cookieName:j,snapTo:C,forceInitialSize:k,onResize:S,ref:N}=e,E=(0,n.useRef)(null),M=(0,n.useRef)(null),I=(0,n.useRef)(null),[D,T]=(0,n.useState)(!1),[A,L]=(0,n.useState)(!1),[P,R]=(0,n.useState)(0),[_,O]=(0,n.useState)(0),[F,V]=(0,n.useState)(!1),B=(0,n.useState)(()=>{if("undefined"==typeof document)return null;let e=r.default.get(j);if(null===e)return null;let t=Number(e);return isNaN(t)?null:t})[0],z=(0,n.useRef)(k?m:null!=B?B:m);(0,n.useEffect)(()=>{N&&(N.current={setSize:e=>{z.current=e,E.current&&("x"===y?E.current.style.width="".concat(e,"%"):E.current.style.height="".concat(e,"%")),null==S||S(e)},getSize:()=>z.current,getContainer:()=>E.current})},[N,y,S]);let H=(0,n.useCallback)(e=>{var t,n,r,i;e.stopPropagation(),e.preventDefault(),null==(t=M.current)||t.focus(),L(!0),T(!0),R("x"===y?e.clientX:e.clientY),I.current=z.current,O(null!=(i="x"===y?null==(n=E.current)?void 0:n.clientWidth:null==(r=E.current)?void 0:r.clientHeight)?i:0),V(!0)},[y]),U=(0,n.useCallback)(e=>{var t,n;if(!D||!A)return;let r=null==(t=E.current)?void 0:t.parentElement,i=null!=(n="x"===y?null==r?void 0:r.clientWidth:null==r?void 0:r.clientHeight)?n:0,a=_+(P-("x"===y?e.clientX:e.clientY))*("start"===b?1:-1);C&&"y"===y&&a<C.threshold&&(a=C.size);let o=a/i*100;if(void 0!==x){let e=(i-x)/i*100;o>e&&(o=e)}"x"===y?E.current.style.width="".concat(o,"%"):E.current.style.height="".concat(o,"%"),z.current=o,null==S||S(o)},[y,A,D,b,P,_,C,x,S]),q=(0,n.useCallback)(()=>{var e;D&&(T(!1),L(!1),null==(e=M.current)||e.blur(),r.default.set(j,String(z.current),{expires:7}),null==h||h(I.current,z.current))},[j,h,D]);(0,o.useEventListener)("mousemove",U),(0,o.useEventListener)("mouseup",q),(0,o.useEventListener)("keydown",e=>{var t,n,r,i,a;if(!D||"ArrowLeft"!==e.key&&"ArrowRight"!==e.key)return;let o=(e.shiftKey?12:4)*("ArrowLeft"===e.key?1:-1)*("start"===b?1:-1),s=null==(t=E.current)?void 0:t.parentElement,l=null!=(i="x"===y?null==s?void 0:s.clientWidth:null==s?void 0:s.clientHeight)?i:0,c=(null!=(a="x"===y?null==(n=E.current)?void 0:n.clientWidth:null==(r=E.current)?void 0:r.clientHeight)?a:0)/l*100+o;if(C&&"y"===y&&c/100*l<C.threshold&&(c=C.size/l*100),void 0!==x){let e=(l-x)/l*100;c>e&&(c=e)}"x"===y?E.current.style.width="".concat(c,"%"):E.current.style.height="".concat(c,"%"),z.current=c},M);let W=(0,n.useCallback)(()=>{var e;if(void 0===x)return;let t=null==(e=E.current)?void 0:e.parentElement,n="x"===y?null==t?void 0:t.clientWidth:null==t?void 0:t.clientHeight;if(n)return(n-x)/n*100},[y,x]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:(0,a.cn)("fixed inset-0 z-50",D?"x"===y?"cursor-col-resize":"cursor-row-resize":"pointer-events-none")}),(0,t.jsxs)(i.motion.div,{animate:"x"===y?{width:u?"".concat(null!=(l=z.current)?l:m,"%"):"0%",height:"100%",minWidth:u?"".concat(v,"px"):0,maxWidth:u&&x?"".concat(W(),"%"):void 0,opacity:+!!u}:{height:u?"".concat(null!=(c=z.current)?c:m,"%"):"0%",width:"100%",minHeight:u?"".concat(v,"px"):0,maxHeight:u&&x?"".concat(W(),"%"):void 0,opacity:+!!u},"aria-hidden":!u,className:(0,a.cn)("relative",f),inert:!u,initial:!1,layout:"size",onAnimationComplete:()=>{F&&V(!1)},ref:E,transition:F||!g?{type:!1}:{type:"spring",damping:25,stiffness:180,mass:1},children:[(0,t.jsx)(s,{axis:y,dotsHandle:p,onBlur:q,onFocus:()=>{T(!0),V(!0)},onMouseDown:H,ref:M,resizing:D,show:u,side:b}),(0,t.jsx)("div",{className:(0,a.cn)("absolute inset-0",d),children:w})]})]})});l.displayName="Resizable",e.s(["Resizable",()=>l])},407211,e=>{"use strict";var t=e.i(832520),n=e.i(176248),r=e.i(200407),i=e.i(707827),a=e.i(53223),o=e.i(982225),s=e.i(304649);function l(e){let{buttonText:l="Run Code",variant:c="default",setOutput:u,codeExecutionBlockProps:d,execute:p,editedValue:h,disabled:f}=e,[m,g]=(0,r.useState)(!1);return(0,t.jsxs)(n.Button,{className:"ghost"===c?"h-6 text-gray-500 has-[>svg]:px-1":"","data-testid":"run-code-button",disabled:m||f,onClick:async()=>{try{g(!0),(0,a.track)("ClickRunCode",{code:h||d.source});let e=await p(d,h);u(e)}finally{g(!1)}},size:"sm",variant:"ghost"===c?"ghost":"secondary",children:[m?(0,t.jsx)(i.Spinner,{size:16,wrapperClassName:"text-gray-500"}):(0,t.jsx)(o.PlayCircle,{className:(0,s.cn)("translate-y-[-0.5px] [&_circle]:[vector-effect:non-scaling-stroke]","ghost"===c?"text-gray-500 [&_path]:fill-gray-500":"text-gray-900 [&_path]:fill-gray-900")}),l]},"execute")}e.s(["CodeExecutionRunButton",()=>l])},638200,e=>{"use strict";var t=e.i(832520),n=e.i(304649);function r(e){let{size:r=16,className:i}=e;return(0,t.jsxs)("svg",{className:(0,n.cn)("trash-icon overflow-visible",i),fill:"currentColor",height:r,viewBox:"0 0 16 16",width:r,xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("style",{children:"\n        .trash-icon .trash-lid {\n            transition: transform 0.35s cubic-bezier(0.35, 0.2, 0.14, 0.95);\n            transform-origin: center;\n        }\n\n        button:has(.trash-icon):hover .trash-lid, button:has(.trash-icon):focus-visible .trash-lid {\n          transform: translate(-0px, -2px) rotate(-10deg);\n        }\n            \n       "}),(0,t.jsx)("path",{className:"trash-lid",clipRule:"evenodd",d:"M6.75 2.75C6.75 2.0596 7.3096 1.5 8 1.5 8.6904 1.5 9.25 2.0596 9.25 2.75V3H6.75V2.75ZM5.25 3V2.75C5.25 1.2312 6.4812 0 8 0 9.5188 0 10.75 1.2312 10.75 2.75V3H12.9201 13 15V4.5H14.25 13.8846 1.75 1V3H1.75 3.0799 5.25Z",fill:"currentColor",fillRule:"evenodd"}),(0,t.jsx)("path",{clipRule:"evenodd",d:"M2.1154 4.5H13.8846L13.1776 13.6917C13.0774 14.9942 11.9913 16 10.6849 16H5.3151C4.0087 16 2.9226 14.9942 2.8224 13.6917L2.1154 4.5ZM4.318 13.5767 3.6198 4.5H12.3802L11.682 13.5767C11.6419 14.0977 11.2075 14.5 10.6849 14.5H5.3151C4.7925 14.5 4.3581 14.0977 4.318 13.5767Z",fill:"currentColor",fillRule:"evenodd"})]})}e.s(["AnimatedTrash",()=>r])},676648,e=>{"use strict";let t=(0,e.i(605528).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M0.191137 2.06228L0.751694 2.56055L14.2517 14.5605L14.8122 15.0588L15.8088 13.9377L15.2482 13.4394L13.4399 11.832L16.3183 8.48938V7.51059L13.1149 3.79053C10.6442 0.921301 6.36413 0.684726 3.59378 3.07992L1.74824 1.43943L1.18768 0.941162L0.191137 2.06228ZM14.7602 7.99998L12.3187 10.8354L10.6699 9.36978C11.249 8.24171 11.0661 6.82347 10.1213 5.87865C9.08954 4.8469 7.49326 4.72376 6.32676 5.50923L4.72751 4.08767C6.88288 2.36327 10.1023 2.59076 11.9783 4.76931L14.7602 7.99998ZM7.52702 6.57613L9.46929 8.30259C9.56713 7.82531 9.43091 7.30959 9.06063 6.93931C8.64578 6.52446 8.0484 6.4034 7.52702 6.57613ZM-0.318359 7.51059L1.40386 5.5106L2.54051 6.48938L1.23971 7.99998L4.02168 11.2307C5.52853 12.9805 7.90301 13.4734 9.89972 12.7017L10.4405 14.1008C7.88008 15.0904 4.82516 14.4625 2.88503 12.2094L-0.318359 8.48938V7.51059Z" fill="currentColor"/>');e.s(["EyeOff",0,t])},889800,e=>{"use strict";let t=(0,e.i(605528).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M8.00002 1.25C5.33749 1.25 3.02334 2.73677 1.84047 4.92183L1.48342 5.58138L2.80253 6.29548L3.15958 5.63592C4.09084 3.91566 5.90986 2.75 8.00002 2.75C10.4897 2.75 12.5941 4.40488 13.2713 6.67462H11.8243H11.0743V8.17462H11.8243H15.2489C15.6631 8.17462 15.9989 7.83883 15.9989 7.42462V4V3.25H14.4989V4V5.64468C13.4653 3.06882 10.9456 1.25 8.00002 1.25ZM1.50122 10.8555V12.5V13.25H0.0012207V12.5V9.07538C0.0012207 8.66117 0.337007 8.32538 0.751221 8.32538H4.17584H4.92584V9.82538H4.17584H2.72876C3.40596 12.0951 5.51032 13.75 8.00002 13.75C10.0799 13.75 11.8912 12.5958 12.8266 10.8895L13.1871 10.2318L14.5025 10.9529L14.142 11.6105C12.9539 13.7779 10.6494 15.25 8.00002 15.25C5.05453 15.25 2.53485 13.4313 1.50122 10.8555Z" fill="currentColor"/>');e.s(["RefreshClockwise",0,t])},127169,167343,e=>{"use strict";var t=e.i(200407),n=t,r=e.i(957573),i=e.i(827330),a=e.i(355045),o=e.i(887139),s=e.i(391795),l=e.i(9694),c=e.i(762380),u=e.i(957212),d=e.i(642790),p=e.i(518273),h=e.i(726295),f=e.i(912866),m=e.i(635316),g=e.i(649440),v=e.i(754883),x=e.i(265540),y=e.i(671183),b=e.i(612034),w=e.i(396350),j=e.i(880092);let C=n.default.use||(e=>{switch(e.status){case"pending":throw e;case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e}}),k={dedupe:!0},S=(e,t,i)=>{let{cache:a,compare:o,suspense:S,fallbackData:N,revalidateOnMount:E,revalidateIfStale:M,refreshInterval:I,refreshWhenHidden:D,refreshWhenOffline:T,keepPreviousData:A}=i,[L,P,R,_]=l.SWRGlobalState.get(a),[O,F]=(0,c.serialize)(e),V=(0,n.useRef)(!1),B=(0,n.useRef)(!1),z=(0,n.useRef)(O),H=(0,n.useRef)(t),U=(0,n.useRef)(i),q=()=>U.current,W=()=>q().isVisible()&&q().isOnline(),[Z,G,K,X]=(0,u.createCacheHelper)(a,O),$=(0,n.useRef)({}).current,Y=(0,d.isUndefined)(N)?(0,d.isUndefined)(i.fallback)?p.UNDEFINED:i.fallback[O]:N;Y&&(0,h.isPromiseLike)(Y)&&(Y=C(Y));let J=(e,t)=>{for(let n in $){let r=n;if("data"===r){if(!o(e[r],t[r])&&(!(0,d.isUndefined)(e[r])||!o(es,t[r])))return!1}else if(t[r]!==e[r])return!1}return!0},Q=(0,n.useMemo)(()=>{let e=!!O&&!!t&&((0,d.isUndefined)(E)?!q().isPaused()&&!S&&!1!==M:E),n=t=>{let n=(0,j.mergeObjects)(t);return(delete n._k,e)?{isValidating:!0,isLoading:!0,...n}:n},r=Z(),i=X(),a=n(r),o=r===i?a:n(i),s=a;return[()=>{let e=n(Z());return J(e,s)?(s.data=e.data,s.isLoading=e.isLoading,s.isValidating=e.isValidating,s.error=e.error,s):(s=e,e)},()=>o]},[a,O]),ee=(0,r.useSyncExternalStore)((0,n.useCallback)(e=>K(O,(t,n)=>{J(n,t)||e()}),[a,O]),Q[0],Q[1]),et=!V.current,en=L[O]&&L[O].length>0,er=ee.data,ei=(0,d.isUndefined)(er)?Y:er,ea=ee.error,eo=(0,n.useRef)(ei),es=A?(0,d.isUndefined)(er)?eo.current:er:ei,el=(!en||!!(0,d.isUndefined)(ea))&&(et&&!(0,d.isUndefined)(E)?E:!q().isPaused()&&(S?!(0,d.isUndefined)(ei)&&M:(0,d.isUndefined)(ei)||M)),ec=!!(O&&t&&et&&el),eu=(0,d.isUndefined)(ee.isValidating)?ec:ee.isValidating,ed=(0,d.isUndefined)(ee.isLoading)?ec:ee.isLoading,ep=(0,n.useCallback)(async e=>{let t,n,r=H.current;if(!O||!r||B.current||q().isPaused())return!1;let a=!0,s=e||{},l=!R[O]||!s.dedupe,c=()=>w.IS_REACT_LEGACY?!B.current&&O===z.current&&V.current:O===z.current,u={isValidating:!1,isLoading:!1},h=()=>{G(u)},v=()=>{let e=R[O];e&&e[1]===n&&delete R[O]},x={isValidating:!0};(0,d.isUndefined)(Z().data)&&(x.isLoading=!0);try{if(l&&(G(x),i.loadingTimeout&&(0,d.isUndefined)(Z().data)&&setTimeout(()=>{a&&c()&&q().onLoadingSlow(O,i)},i.loadingTimeout),R[O]=[r(F),(0,f.getTimestamp)()]),[t,n]=R[O],t=await t,l&&setTimeout(v,i.dedupingInterval),!R[O]||R[O][1]!==n)return l&&c()&&q().onDiscarded(O),!1;u.error=p.UNDEFINED;let e=P[O];if(!(0,d.isUndefined)(e)&&(n<=e[0]||n<=e[1]||0===e[1]))return h(),l&&c()&&q().onDiscarded(O),!1;let s=Z().data;u.data=o(s,t)?s:t,l&&c()&&q().onSuccess(t,O,i)}catch(n){v();let e=q(),{shouldRetryOnError:t}=e;!e.isPaused()&&(u.error=n,l&&c()&&(e.onError(n,O,e),(!0===t||(0,m.isFunction)(t)&&t(n))&&(!q().revalidateOnFocus||!q().revalidateOnReconnect||W())&&e.onErrorRetry(n,O,e,e=>{let t=L[O];t&&t[0]&&t[0](g.revalidateEvents.ERROR_REVALIDATE_EVENT,e)},{retryCount:(s.retryCount||0)+1,dedupe:!0})))}return a=!1,h(),!0},[O,a]),eh=(0,n.useCallback)(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,v.internalMutate)(a,z.current,...t)},[]);if((0,x.useIsomorphicLayoutEffect)(()=>{H.current=t,U.current=i,(0,d.isUndefined)(er)||(eo.current=er)}),(0,x.useIsomorphicLayoutEffect)(()=>{if(!O)return;let e=ep.bind(p.UNDEFINED,k),t=0,n=function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n==g.revalidateEvents.FOCUS_EVENT){let n=Date.now();q().revalidateOnFocus&&n>t&&W()&&(t=n+q().focusThrottleInterval,e())}else if(n==g.revalidateEvents.RECONNECT_EVENT)q().revalidateOnReconnect&&W()&&e();else if(n==g.revalidateEvents.MUTATE_EVENT)return ep();else if(n==g.revalidateEvents.ERROR_REVALIDATE_EVENT)return ep(r)},r=(0,s.subscribeCallback)(O,L,n);return B.current=!1,z.current=O,V.current=!0,G({_k:F}),el&&((0,d.isUndefined)(ei)||y.IS_SERVER?e():(0,b.rAF)(e)),()=>{B.current=!0,r()}},[O]),(0,x.useIsomorphicLayoutEffect)(()=>{let e;function t(){let t=(0,m.isFunction)(I)?I(Z().data):I;t&&-1!==e&&(e=setTimeout(n,t))}function n(){!Z().error&&(D||q().isVisible())&&(T||q().isOnline())?ep(k).then(t):t()}return t(),()=>{e&&(clearTimeout(e),e=-1)}},[I,D,T,O]),(0,n.useDebugValue)(es),S&&(0,d.isUndefined)(ei)&&O){if(!w.IS_REACT_LEGACY&&y.IS_SERVER)throw Error("Fallback data is required when using Suspense in SSR.");H.current=t,U.current=i,B.current=!1;let e=_[O];if((0,d.isUndefined)(e)||C(eh(e)),(0,d.isUndefined)(ea)){let e=ep(k);(0,d.isUndefined)(es)||(e.status="fulfilled",e.value=!0),C(e)}else throw ea}return{mutate:eh,get data(){return $.data=!0,es},get error(){return $.error=!0,ea},get isValidating(){return $.isValidating=!0,eu},get isLoading(){return $.isLoading=!0,ed}}};i.OBJECT.defineProperty(a.SWRConfig,"defaultValue",{value:o.defaultConfig});let N=(0,s.withArgs)(S),E=new WeakMap,M="$sub$",I=e=>(t,n,r)=>{let[i,a]=(0,c.serialize)(t),o=i?M+i:void 0,s=e(o,null,r),{cache:l}=r;E.has(l)||E.set(l,[new Map,new Map]);let[d,p]=E.get(l);return(0,x.useIsomorphicLayoutEffect)(()=>{if(!o)return;let[,e]=(0,u.createCacheHelper)(l,o),t=d.get(o)||0,r=(t,n)=>{null!=t?e({error:t}):(e({error:void 0}),s.mutate(n,!1))};if(d.set(o,t+1),!t){let e=n(a,{next:r});if("function"!=typeof e)throw Error("The `subscribe` function must return a function to unsubscribe.");p.set(o,e)}return()=>{let e=d.get(o)-1;if(d.set(o,e),!e){let e=p.get(o);null==e||e()}}},[o]),{get data(){return s.data},get error(){return s.error}}},D=(0,s.withMiddleware)(N,I);e.s(["default",()=>D],167343);let T=new Set;function A(e,n){(0,t.useEffect)(()=>(T.add(e),()=>{T.delete(e)}),n||[e]),D("global-shortcuts",()=>{let e=e=>{if(!e.defaultPrevented)for(let t of T)t(e)};return document.addEventListener("keydown",e,{capture:!0}),()=>{document.removeEventListener("keydown",e,{capture:!0})}})}e.s(["useShortcut",()=>A],127169)},566274,432008,481556,e=>{"use strict";var t=e.i(200407),n=e.i(346970);function r(){var e;let{data:r,mutate:i}=(0,n.default)("result:full-screen"),{mutate:a}=(0,n.default)("state:select"),o=(0,t.useCallback)((e,t)=>{i(n=>{if(!n&&!e)return;let r=new URL(window.location.href),i=r.searchParams,o=i.get("b"),s=null!=t?t:o;return s&&(e?i.set("f","1"):i.delete("f"),i.set("b",s),r.search=i.toString(),window.history.replaceState({},"",r.toString())),a(!1),{value:e}})},[i,a]);return{fullScreenResult:null!=(e=null==r?void 0:r.value)&&e,setFullscreenResult:o,source:null==r?void 0:r.source}}e.s(["useFullscreenResult",()=>r],566274);var i=e.i(832520),a=e.i(545858),o=e.i(304649),s=e.i(529693),l=t;let c=900,u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c;return e<t},d=()=>{let[e,t]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{let e=window.matchMedia("(max-width: ".concat(c-1,"px)")),n=()=>{t(u(window.innerWidth))};return e.addEventListener("change",n),n(),()=>e.removeEventListener("change",n)},[]),e};e.s(["useShouldShowBlocksInDrawer",0,d],432008);var p=e.i(127169);function h(e){let{children:t,allowOnMobile:n}=e,{fullScreenResult:l,setFullscreenResult:c,source:u}=r(),h=d(),f=l&&(n||!h);(0,p.useShortcut)(e=>{"Escape"===e.key&&c(!1)});let m=e=>{if(!e)return void c(!1);e.target===e.currentTarget&&c(!1)},g=(0,i.jsx)("div",{className:(0,o.cn)(f?"fixed inset-0":"size-full",f&&"ssr"!==u&&"animate-in zoom-in-90"),children:(0,i.jsx)("div",{className:"bg-background size-full overflow-clip!",children:t})}),v=(0,o.cn)(f?"bg-alpha-700 dark:bg-alpha-900 fixed inset-0 z-60":"h-full w-full",f&&"ssr"!==u&&"animate-in fade-in duration-300");if(!f)return(0,i.jsx)("div",{className:"h-full w-full",children:t});let x="ssr"===u?(0,i.jsx)("div",{"data-testid":"fullscreen-overlay-ssr",className:v,onClick:m,children:g}):(0,i.jsx)(s.motion.div,{"data-testid":"fullscreen-overlay",className:v,onClick:m,children:g});return(0,a.createPortal)(x,document.body)}e.s(["FullscreenContainer",()=>h],481556)},242828,(e,t,n)=>{var r="Expected a function",i=0/0,a="[object Symbol]",o=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt,d=e.g&&e.g.Object===Object&&e.g,p="object"==typeof self&&self&&self.Object===Object&&self,h=d||p||Function("return this")(),f=Object.prototype.toString,m=Math.max,g=Math.min,v=function(){return h.Date.now()};function x(e,t,n){var i,a,o,s,l,c,u=0,d=!1,p=!1,h=!0;if("function"!=typeof e)throw TypeError(r);function f(t){var n=i,r=a;return i=a=void 0,u=t,s=e.apply(r,n)}function x(e){return u=e,l=setTimeout(C,t),d?f(e):s}function b(e){var n=e-c,r=e-u,i=t-n;return p?g(i,o-r):i}function w(e){var n=e-c,r=e-u;return void 0===c||n>=t||n<0||p&&r>=o}function C(){var e=v();if(w(e))return k(e);l=setTimeout(C,b(e))}function k(e){return(l=void 0,h&&i)?f(e):(i=a=void 0,s)}function S(){return void 0===l?s:k(v())}function N(){var e=v(),n=w(e);if(i=arguments,a=this,c=e,n){if(void 0===l)return x(c);if(p)return l=setTimeout(C,t),f(c)}return void 0===l&&(l=setTimeout(C,t)),s}return t=j(t)||0,y(n)&&(d=!!n.leading,o=(p="maxWait"in n)?m(j(n.maxWait)||0,t):o,h="trailing"in n?!!n.trailing:h),N.cancel=function(){void 0!==l&&clearTimeout(l),u=0,i=c=a=l=void 0},N.flush=S,N}function y(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function b(e){return!!e&&"object"==typeof e}function w(e){return"symbol"==typeof e||b(e)&&f.call(e)==a}function j(e){if("number"==typeof e)return e;if(w(e))return i;if(y(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=y(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(o,"");var n=l.test(e);return n||c.test(e)?u(e.slice(2),n?2:8):s.test(e)?i:+e}t.exports=function(e,t,n){var i=!0,a=!0;if("function"!=typeof e)throw TypeError(r);return y(n)&&(i="leading"in n?!!n.leading:i,a="trailing"in n?!!n.trailing:a),x(e,t,{leading:i,maxWait:t,trailing:a})}},780752,658252,218139,e=>{"use strict";e.s(["RefreshPreview",()=>c],780752);var t=e.i(832520),n=e.i(200407),r=e.i(899488),i=e.i(889800),a=e.i(297239),o=e.i(204575),s=e.i(768619);let l=e=>{if(!e)return;let t=document.getElementById((0,o.getBlockIframeId)(e));if(t instanceof HTMLIFrameElement)if(t.contentDocument)t.contentDocument.location.reload();else if(t.srcdoc){let e=t.srcdoc;t.srcdoc="",setTimeout(()=>{t.srcdoc=e},10)}else t.src=(0,s.getIframeSrc)(t)};function c(e){let{blockId:o}=e,s=(0,a.useT)(),c=(0,n.useCallback)(()=>{o&&l(o)},[o]);return(0,t.jsx)(r.CodeBlockButton,{"aria-label":s("previewBlock.refresh"),onClick:()=>c(),tooltip:{side:"bottom",content:s("previewBlock.refresh")},children:(0,t.jsx)("span",{children:(0,t.jsx)(i.RefreshClockwise,{})})})}var u=t,d=e.i(566274),p=r,h=e.i(415117),f=a;function m(){let{setFullscreenResult:e}=(0,d.useFullscreenResult)(),t=(0,f.useT)();return(0,u.jsx)(p.CodeBlockButton,{"aria-label":t("previewBlock.fullscreen"),className:"flex",onClick:()=>e(!0),tooltip:{side:"bottom",content:t("previewBlock.fullscreen")},children:(0,u.jsx)(h.Fullscreen,{})})}e.s(["FullscreenButton",()=>m],658252);var g=t,v=n,x=e.i(847801);e.i(563948);var y=e.i(407562),b=e.i(529693),w=e.i(716360),j=e.i(517953),C=e.i(176248),k=a,S=e.i(707827),N=e.i(926788),E=e.i(455552),M=e.i(926224);let I=(0,x.default)(()=>e.A(643931).then(e=>e.ConflictEditor),{loadableGenerated:{modules:[430433]},ssr:!1});function D(e){let{hasUnappliedChanges:t,blockId:n,source:r,onApply:i,showFadeOut:a}=e,[o,s]=(0,v.useState)(!1),[l,c]=(0,v.useState)(!1),u=(0,k.useT)(),[d,p]=(0,v.useState)(null),[h,f]=(0,v.useState)(null),m=async()=>{s(!0);let e=await fetch("/chat/api/chat/remote/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bid:n,blockSource:r})});if(s(!1),e.ok){let t=await e.json();t.success?(c(!0),setTimeout(()=>c(!1),2e3),y.toast.success(u("unappliedChanges.savedChanges"))):(y.toast.error("Local: conflict detected. Check your console"),p(t.conflicts)),i()}else y.toast.error(u("unappliedChanges.failedToApplyChanges"))},x=async()=>{if(h)try{let e=[...(0,M.parseMultiFileSource)({source:r,blockType:"local",blockId:n})];for(let t of h){let n=e.find(e=>e.meta.file===t.file);n&&(n.source=t.content)}let t=(0,E.createMultiFileSource)({files:e,blockType:"local"}),a=await fetch("/chat/api/chat/remote/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bid:n,blockSource:t,resolvedConflicts:!0})});a.ok&&(await a.json()).success?(c(!0),setTimeout(()=>c(!1),2e3),y.toast.success(u("unappliedChanges.savedChanges")),i(),p(null)):y.toast.error(u("unappliedChanges.failedToApplyChanges"))}catch(e){y.toast.error(u("unappliedChanges.failedToApplyChanges"))}},D=(0,v.useCallback)(e=>{e.every(e=>e.resolved)?f(e):f(null)},[]);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(w.AnimatePresence,{children:t&&!l?(0,g.jsxs)(g.Fragment,{children:[a?(0,g.jsx)(b.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15,ease:"easeOut"},className:"from-muted pointer-events-none absolute inset-x-0 bottom-0 z-10 flex h-36 items-end justify-center bg-linear-to-t to-transparent"},"unsaved-changes-bg"):null,(0,g.jsx)(b.motion.div,{initial:{opacity:0,y:20,scale:.95,width:320},animate:{opacity:1,y:0,scale:1,width:o?96:320},exit:{opacity:0},transition:{duration:.15,ease:"easeOut",width:{type:"spring",stiffness:300,damping:30}},className:"shadow-modal bg-background absolute inset-x-0 bottom-3 z-50 mx-auto flex h-11 items-center justify-between rounded-full p-2 pl-3 text-sm font-medium",children:o?(0,g.jsxs)("div",{className:"flex items-center gap-2 text-gray-500",children:[(0,g.jsx)(S.Spinner,{size:16}),"Saving"]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{className:"flex items-center gap-2",children:[(0,g.jsx)(j.Warning,{className:"text-gray-500!"}),"Unsaved Changes"]}),(0,g.jsx)("div",{className:"flex items-center gap-2",children:(0,g.jsx)(C.Button,{size:"sm",className:"h-7",rounded:!0,disabled:o,onClick:m,children:u("unappliedChanges.apply")})})]})},"unsaved-changes-island")]}):null}),(0,g.jsx)(N.Dialog,{open:null!==d,children:(0,g.jsxs)(N.DialogContent,{className:"max-h-[90vh] w-full max-w-[90vw] overflow-auto",children:[(0,g.jsxs)(N.DialogHeader,{children:[(0,g.jsx)(N.DialogTitle,{children:"Conflict Detected"}),(0,g.jsx)(N.DialogDescription,{children:"Please resolve them before saving."})]}),(0,g.jsx)(v.Suspense,{fallback:(0,g.jsx)(S.Spinner,{}),children:d?(0,g.jsx)(I,{conflicts:d,onEdit:D}):null}),(0,g.jsxs)(N.DialogFooter,{children:[(0,g.jsx)(C.Button,{variant:"secondary",onClick:()=>{alert("You must resolve conflicts before continuing")},children:"Cancel"}),(0,g.jsx)(C.Button,{onClick:x,disabled:null===h,children:"Confirm"})]})]})})]})}e.s(["UnappliedChanges",()=>D],218139)},534607,e=>{"use strict";var t=e.i(200407);function n(){let[e,n]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{n(navigator.userAgent.toUpperCase().includes("MAC"))},[]),e}e.s(["useMac",()=>n])},230905,e=>{"use strict";e.s(["UnsavedChanges",()=>M,"unsavedChangesAtoms",()=>E,"useUnsavedChanges",()=>D]);var t=e.i(832520),n=e.i(517953),r=e.i(176248),i=e.i(200407),a=e.i(449381),o=e.i(297239),s=e.i(53223);e.i(563948);var l=e.i(407562),c=e.i(529693),u=e.i(716360),d=e.i(707827),p=e.i(301331),h=e.i(455552),f=e.i(926224),m=e.i(443265),g=e.i(827728),v=e.i(534607),x=e.i(661385),y=e.i(304649),b=e.i(92479),w=e.i(120282),j=e.i(479273),C=e.i(487581),k=e.i(205341),S=e.i(780292),N=e.i(84079);let E=(0,k.atom)(!1);function M(e){let{mergedFromBlockId:p,hasUnsavedChanges:h,overrideBlockId:f,resetValue:x,onSave:b,clearEditValueMap:C,isV3:k}=e,[M,D]=(0,S.useAtom)(E),[T,A]=(0,i.useState)(!1),[L,P]=(0,i.useState)(!0),R=(0,a.useActiveBlockState)(),_=(0,o.useT)(),O=(0,v.useMac)();(0,g.useEventListener)("code-editor-saved",async()=>{h&&await b({setSaving:D,setForceHide:A})}),(0,g.useEventListener)("code-editor-reset",()=>{h&&H()}),I(h);let{locale:F}=(0,j.useLocale)(),V=()=>P(!1),B=()=>P(!0);(0,g.useEventListener)("hide-saved-changes",V),(0,g.useEventListener)("show-saved-changes",B);let z=null!=p?p:(null==R?void 0:R.id)||f;if(!z)return null;let H=()=>{(0,s.track)("ResetUnsavedEditCode",{blockId:z}),D(!0);try{x(),z&&(0,N.sendToIframeFromBlockId)(z,{type:"devtools_revert_design"}),l.toast.success(_("codeBlockActions.resetChanges"),{position:"bottom-right"}),setTimeout(()=>A(!1),2e3),C()}catch(e){l.toast.error(_("codeBlockActions.failedToResetChanges"),{position:"bottom-right"})}D(!1),window.dispatchEvent(new CustomEvent("inline-edit-cleanup-decorations"))};return(0,t.jsx)(u.AnimatePresence,{children:h&&!T&&L?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15,ease:"easeOut"},className:"from-muted pointer-events-none absolute inset-x-0 bottom-0 z-10 flex h-36 items-end justify-center"},"unsaved-changes-bg"),(0,t.jsx)(c.motion.div,{initial:{opacity:0,y:20,scale:.95,width:F===w.esLocaleInfo.iso639?370:320},animate:{opacity:1,y:0,scale:1,width:M?F===w.esLocaleInfo.iso639?136:112:F===w.esLocaleInfo.iso639?370:320},exit:{opacity:0},transition:{duration:.15,ease:"easeOut",width:{type:"spring",stiffness:300,damping:30}},className:(0,y.cn)("shadow-modal bg-background absolute inset-x-0 z-50 mx-auto flex h-11 items-center justify-between gap-2 rounded-full p-2 pl-3 text-sm font-medium",k?"bottom-16":"bottom-3"),children:M?(0,t.jsxs)("div",{className:"flex items-center gap-2 text-gray-500",children:[(0,t.jsx)(d.Spinner,{size:16}),_("codeBlockActions.saving")]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(n.Warning,{className:"text-gray-500!"}),_("codeBlockActions.unsavedChanges")]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(r.Button,{size:"sm",className:"h-7",rounded:!0,variant:"secondary",disabled:M,onClick:H,children:_("codeBlockActions.reset")}),(0,t.jsx)(r.Button,{tooltip:{content:(0,t.jsxs)(m.KbdGroup,{children:[(0,t.jsx)(m.Kbd,{children:O?"⌘":"Ctrl"}),(0,t.jsx)(m.Kbd,{children:"S"})]})},size:"sm",className:"h-7",rounded:!0,variant:"blue",disabled:M,onClick:()=>{b({setSaving:D,setForceHide:A})},children:_("codeBlockActions.save")})]})]})},"unsaved-changes-island")]}):null})}function I(e){(0,i.useEffect)(()=>{let t=t=>{e&&(t.preventDefault(),t.returnValue="")};return window.addEventListener("beforeunload",t),()=>{window.removeEventListener("beforeunload",t)}},[e])}function D(e){let{blockId:t,editValueMap:n,source:r,meta:c,files:u,clearEditValueMap:d,isAdminSaving:m}=e,g=(0,o.useT)(),v=(0,a.useActiveBlockState)(),y=(0,a.useSetActiveBlockState)(),{updateBlockData:w}=(0,p.useBlockHistory)({blockId:t}),{chatId:j}=(0,b.useChatId)(),k=(0,S.useSetAtom)(C.previewBlockErrorsAtom);return{onSave:async e=>{let{setSaving:i,setForceHide:a}=e,o=t;if((0,s.track)("SaveEditCode",{blockId:o,chatId:j||""}),m&&!window.confirm("[V0 ADMIN] Are you sure you want to save these changes to the user's block?"))return;let u=Object.entries(n||{});if(!n||u.length<1||!u.some(e=>{let[t,n]=e;return!!n}))return(0,s.track)("SaveEditCodeError",{blockId:o,chatId:j||"",error:"no-edits"}),l.toast.error(g("codeBlockActions.failedToSaveChanges"),{position:"bottom-right"});let d=u[0][1]||r;if("code-project"===c.type){let e=(0,f.parseMultiFileSource)({source:r,blockType:"code-project",blockId:o});for(let t of e){let e=n[t.meta.file||""];e&&(t.source=e)}d=(0,h.createMultiFileSource)({files:e,blockType:"code-project"})}i(!0);let p=await (0,x.updateCodeBlockSource)({blockId:o,source:d});i(!1),k([]),p.success?(v&&o===v.id&&y({...v,hasSourceBeenEdited:!0,source:d,lastEditedAt:new Date().toISOString()}),w({blockId:o,data:{hasSourceBeenEdited:!0,source:d,lastEditedAt:new Date().toISOString(),sourceVersionKey:p.sourceVersionKey}}),window.dispatchEvent(new CustomEvent("inline-edit-cleanup-decorations")),a(!0),setTimeout(()=>a(!1),2e3),l.toast.success(g("codeBlockActions.savedChanges"),{position:"bottom-right"})):((0,s.track)("SaveEditCodeError",{blockId:o,chatId:j||"",error:"failed-to-save"}),l.toast.error(g("codeBlockActions.failedToSaveChanges")))},hasUnsavedChanges:(0,i.useMemo)(()=>{if(!n)return!1;for(let e of u){let t=n[e.meta.file||""];if(t&&t.trimEnd()!==e.source.trimEnd())return!0}return!1},[n,u]),clearEditValueMap:d}}},227308,e=>{"use strict";var t=e.i(832520),n=e.i(200407),r=e.i(186638),i=e.i(716360),a=e.i(529693),o=e.i(647217),s=e.i(304649),l=e.i(162061);let c=(0,n.createContext)(void 0),u=()=>{let e=(0,n.useContext)(c);if(void 0===e)throw Error("useResizableContext must be used within a FileTreeProvider");return e};function d(e){let{className:n,...i}=e,{leftId:a,rightId:o,groupId:l,panelGroupRef:c}=u();return(0,t.jsxs)(r.PanelResizeHandle,{onDragging:()=>{var e,t,n,i;let s=null==(e=r.getPanelElement(a))?void 0:e.offsetWidth,u=null==(t=r.getPanelElement(o))?void 0:t.offsetWidth,d=null==(n=r.getPanelGroupElement(l))?void 0:n.offsetWidth;if(!s||!u||!d)return;let p=s/d*100,h=u/d*100;null==(i=c.current)||i.setLayout([p,h])},className:(0,s.cn)("group relative z-20 w-0 overflow-visible! outline-hidden! ring-0!",n),...i,children:[(0,t.jsx)("div",{className:"absolute inset-0 h-full w-3 translate-x-[-50%] outline-0! ring-0!"}),(0,t.jsx)("div",{className:"absolute inset-0 h-full w-0 translate-x-[-50%] outline-0! ring-0! transition-all duration-200 group-data-[resize-handle-active=keyboard]:w-[3px] group-data-[resize-handle-state=drag]:w-[3px] group-data-[resize-handle-state=hover]:w-[3px] group-data-[resize-handle-active=keyboard]:bg-gray-400 group-data-[resize-handle-state=drag]:bg-gray-400 group-data-[resize-handle-state=hover]:bg-gray-300 group-data-[resize-handle-active=keyboard]:outline-hidden"})]})}let p=(0,n.forwardRef)((e,i)=>((0,n.useEffect)(()=>{let t=document.getElementById(e.id);t&&i&&("function"==typeof i?i(t):i.current=t)},[e.id,i]),(0,t.jsx)(r.Panel,{...e})));p.displayName="ForwardPanel";let h=a.motion.create(p);function f(e){let t=r.getPanelElement(e);if(!t)return 100;let n=parseFloat(getComputedStyle(t).minWidth);return isNaN(n)?100:n}function m(e){let{isFallbackSize:i,collapseSide:a,leftId:o,rightId:s,defaultSizeRef:u,cookie:d,id:p,...h}=e,m=(0,n.useRef)(null),g=(0,n.useRef)(!1),v=(0,n.useMemo)(()=>({leftId:o,rightId:s,panelGroupRef:m,groupId:p}),[o,s,p,m]);return(0,t.jsx)(c.Provider,{value:v,children:(0,t.jsx)(r.PanelGroup,{id:p,ref:m,onLayout:e=>{var t,n;if(e.length<2)return;let[c,h]=e;if(g.current)return g.current=!1;if(!h||!c)return;let v="right"===a?h:c,x="right"===a?c:h;u.current=v,i||l.default.set(d,v.toString(),{expires:30});let y=r.getPanelElement(o),b=r.getPanelElement(s),w=r.getPanelGroupElement(p);if(!y||!b||!w)return;let j=f("right"===a?s:o),C=f("right"===a?o:s);if(v/100*w.offsetWidth<j){let e=j/w.offsetWidth*100;g.current=!0;let n="right"===a?[100-e,e]:[e,100-e];null==(t=m.current)||t.setLayout(n)}else if(x/100*w.offsetWidth<C){let e=C/w.offsetWidth*100;g.current=!0;let t="right"===a?[e,100-e]:[100-e,e];null==(n=m.current)||n.setLayout(t)}},...h})})}function g(e){let{collapseSide:n,isOpen:l,order:c,defaultSize:u,className:p,innerContainerClassname:f,handleTestId:m,handleClassName:g,collapseId:v,children:x}=e,y=(0,o.useMotionValue)(0),b=(0,o.useMotionValue)(1),w={hidden:{flex:"0 1 0px",minWidth:0,overflow:"visible",transition:{when:"beforeChildren",duration:0}}},j={initial:{width:"100%",display:"absolute",opacity:0,x:"right"===n?"100%":"-100%"},visible:()=>({width:["100%","100%"],opacity:[b.get(),1],display:["absolute","block"],x:[y.get(),0],transition:{type:"spring",damping:60,stiffness:1100}}),hidden:()=>{var e,t;return{width:null!=(t=null==(e=r.getPanelElement(v))?void 0:e.offsetWidth)?t:0,display:"absolute",opacity:0,x:"right"===n?"100%":"-100%",transition:{type:"spring",damping:60,stiffness:800}}}};return(0,t.jsx)(i.AnimatePresence,{initial:!1,mode:"wait",children:l?(0,t.jsxs)(t.Fragment,{children:["right"===n?(0,t.jsx)(d,{"data-testid":m,className:(0,s.cn)("sticky top-0",g)},"resize-handle"):null,(0,t.jsx)(h,{transition:{duration:0},variants:w,exit:"hidden",id:v,order:c,defaultSize:u,style:{overflow:"clip"},className:(0,s.cn)("relative",p),children:(0,t.jsx)(a.motion.div,{style:{x:y,opacity:b,willChange:"auto"},variants:j,initial:"initial",animate:"visible",exit:"hidden",className:(0,s.cn)("border-alpha-200 absolute inset-y-0 right-0 h-full w-full","right"===n?"right-0 border-l":"left-0 border-r",f),children:x})},"right-panel"),"left"===n?(0,t.jsx)(d,{"data-testid":m,className:"sticky top-0"},"resize-handle"):null]}):(0,t.jsx)(r.Panel,{order:c,defaultSize:0},"zero-panel")})}function v(e){let{initialSize:t,fallbackSize:r=50}=e,[i,a]=(0,n.useState)("number"==typeof t?t:r),o=(0,n.useRef)(i),s=(0,n.useRef)(!0),[l,c]=(0,n.useState)("number"!=typeof t);return(0,n.useEffect)(()=>{"number"!=typeof t&&t.then(e=>{a(e),c(!1),s.current&&(o.current=e,s.current=!1)})},[t]),{initialSize:i,defaultSizeRef:o,isFallbackSize:l}}e.s(["CollapsiblePanel",()=>g,"PanelGroup",()=>m,"usePanelSize",()=>v])},510810,190966,e=>{"use strict";var t=e.i(605528);let n=(0,t.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M0 5.25136V4.2487L0.463236 4.05702L7.71324 1.05702L8 0.938354L8.28676 1.05702L15.5368 4.05702L16 4.2487V5.25136L15.5368 5.44304L8.28676 8.44304L8 8.5617L7.71324 8.44304L0.463236 5.44304L0 5.25136ZM0 8.45825V6.83491L0.536764 7.05702L8 10.1453L15.4632 7.05702L16 6.83491V8.45825L8.28676 11.6499L8 11.7686L7.71324 11.6499L0 8.45825ZM0 11.7083V10.0849L0.536764 10.307L8 13.3953L15.4632 10.307L16 10.0849V11.7083L8.28676 14.8999L8 15.0186L7.71324 14.8999L0 11.7083ZM8 6.93835L2.71154 4.75003L8 2.5617L13.2885 4.75003L8 6.93835Z" fill="currentColor"/>');e.s(["Layers",0,n],510810);let r=(0,t.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M14 6V4.5C14 3.39543 13.1046 2.5 12 2.5C10.8954 2.5 10 3.39543 10 4.5V6H10.5H12V7.5V12.5C12 13.8807 10.8807 15 9.5 15H2.5C1.11929 15 0 13.8807 0 12.5V7.5V6H1.5H8.5V4.5C8.5 2.567 10.067 1 12 1C13.933 1 15.5 2.567 15.5 4.5V6H14ZM10.5 7.5H10H8.5H1.5V12.5C1.5 13.0523 1.94772 13.5 2.5 13.5H9.5C10.0523 13.5 10.5 13.0523 10.5 12.5V7.5Z" fill="currentColor"/>');e.s(["LockOpen",0,r],190966)},431843,e=>{"use strict";class t{diff(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"function"==typeof r?(n=r,r={}):"callback"in r&&(n=r.callback);let i=this.castInput(e,r),a=this.castInput(t,r),o=this.removeEmpty(this.tokenize(i,r)),s=this.removeEmpty(this.tokenize(a,r));return this.diffWithOptionsObj(o,s,r,n)}diffWithOptionsObj(e,t,n,r){var i;let a=e=>(e=this.postProcess(e,n),r)?void setTimeout(function(){r(e)},0):e,o=t.length,s=e.length,l=1,c=o+s;null!=n.maxEditLength&&(c=Math.min(c,n.maxEditLength));let u=null!=(i=n.timeout)?i:1/0,d=Date.now()+u,p=[{oldPos:-1,lastComponent:void 0}],h=this.extractCommon(p[0],t,e,0,n);if(p[0].oldPos+1>=s&&h+1>=o)return a(this.buildValues(p[0].lastComponent,t,e));let f=-1/0,m=1/0,g=()=>{for(let r=Math.max(f,-l);r<=Math.min(m,l);r+=2){let i,l=p[r-1],c=p[r+1];l&&(p[r-1]=void 0);let u=!1;if(c){let e=c.oldPos-r;u=c&&0<=e&&e<o}let d=l&&l.oldPos+1<s;if(!u&&!d){p[r]=void 0;continue}if(i=!d||u&&l.oldPos<c.oldPos?this.addToPath(c,!0,!1,0,n):this.addToPath(l,!1,!0,1,n),h=this.extractCommon(i,t,e,r,n),i.oldPos+1>=s&&h+1>=o)return a(this.buildValues(i.lastComponent,t,e))||!0;p[r]=i,i.oldPos+1>=s&&(m=Math.min(m,r-1)),h+1>=o&&(f=Math.max(f,r+1))}l++};if(r)!function e(){setTimeout(function(){if(l>c||Date.now()>d)return r(void 0);g()||e()},0)}();else for(;l<=c&&Date.now()<=d;){let e=g();if(e)return e}}addToPath(e,t,n,r,i){let a=e.lastComponent;return a&&!i.oneChangePerToken&&a.added===t&&a.removed===n?{oldPos:e.oldPos+r,lastComponent:{count:a.count+1,added:t,removed:n,previousComponent:a.previousComponent}}:{oldPos:e.oldPos+r,lastComponent:{count:1,added:t,removed:n,previousComponent:a}}}extractCommon(e,t,n,r,i){let a=t.length,o=n.length,s=e.oldPos,l=s-r,c=0;for(;l+1<a&&s+1<o&&this.equals(n[s+1],t[l+1],i);)l++,s++,c++,i.oneChangePerToken&&(e.lastComponent={count:1,previousComponent:e.lastComponent,added:!1,removed:!1});return c&&!i.oneChangePerToken&&(e.lastComponent={count:c,previousComponent:e.lastComponent,added:!1,removed:!1}),e.oldPos=s,l}equals(e,t,n){return n.comparator?n.comparator(e,t):e===t||!!n.ignoreCase&&e.toLowerCase()===t.toLowerCase()}removeEmpty(e){let t=[];for(let n=0;n<e.length;n++)e[n]&&t.push(e[n]);return t}castInput(e,t){return e}tokenize(e,t){return Array.from(e)}join(e){return e.join("")}postProcess(e,t){return e}get useLongestToken(){return!1}buildValues(e,t,n){let r,i=[];for(;e;)i.push(e),r=e.previousComponent,delete e.previousComponent,e=r;i.reverse();let a=i.length,o=0,s=0,l=0;for(;o<a;o++){let e=i[o];if(e.removed)e.value=this.join(n.slice(l,l+e.count)),l+=e.count;else{if(!e.added&&this.useLongestToken){let r=t.slice(s,s+e.count);r=r.map(function(e,t){let r=n[l+t];return r.length>e.length?r:e}),e.value=this.join(r)}else e.value=this.join(t.slice(s,s+e.count));s+=e.count,e.added||(l+=e.count)}}return i}}class n extends t{equals(e,t,n){return n.ignoreWhitespace?(n.newlineIsToken&&e.includes("\n")||(e=e.trim()),n.newlineIsToken&&t.includes("\n")||(t=t.trim())):n.ignoreNewlineAtEof&&!n.newlineIsToken&&(e.endsWith("\n")&&(e=e.slice(0,-1)),t.endsWith("\n")&&(t=t.slice(0,-1))),super.equals(e,t,n)}constructor(){super(...arguments),this.tokenize=a}}let r=new n;function i(e,t,n){return r.diff(e,t,n)}function a(e,t){t.stripTrailingCr&&(e=e.replace(/\r\n/g,"\n"));let n=[],r=e.split(/(\n|\r\n)/);r[r.length-1]||r.pop();for(let e=0;e<r.length;e++){let i=r[e];e%2&&!t.newlineIsToken?n[n.length-1]+=i:n.push(i)}return n}e.s(["diffLines",()=>i],431843)},638041,e=>{"use strict";var t=e.i(431843);let n=(e,n)=>{let r=e.split("\n"),i=n.split("\n");if(r.length>2e3||i.length>2e3)return{diffs:[],addedCount:Math.max(i.length-r.length,0),removedCount:Math.max(r.length-i.length,0)};let a=t.diffLines(e.trim(),n.trim(),{ignoreWhitespace:!0});return{addedCount:a.filter(e=>e.added).length,removedCount:a.filter(e=>e.removed).length,diffs:a}};e.s(["getDiff",0,n])},238120,e=>{"use strict";let t=(0,e.i(121793).default)("FilePen",[["path",{d:"M12 22h6a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v10",key:"x7tsz2"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10.4 12.6a2 2 0 1 1 3 3L8 21l-4 1 1-4Z",key:"o3xyfb"}]]);e.s(["default",()=>t])},161911,788018,e=>{"use strict";var t=e.i(238120);e.s(["FileEdit",()=>t.default],161911);var n=e.i(832520);function r(e){return(0,n.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.5 13.5V6.5V5.41421C14.5 5.149 14.3946 4.89464 14.2071 4.70711L9.79289 0.292893C9.60536 0.105357 9.351 0 9.08579 0H8H3H1.5V1.5V8H3V1.5H8V5V6.5H9.5H13V13.5C13 14.0523 12.5523 14.5 12 14.5H6V16H12C13.3807 16 14.5 14.8807 14.5 13.5ZM9.5 5V2.12132L12.3787 5H9.5ZM2.31885 12.8194H0V11.3194H2.31885V9H3.81885V11.3194H6.13775V12.8194H3.81885V15.1377H2.31885V12.8194Z",fill:"currentColor"})})}e.s(["FilePlus",()=>r],788018)},223215,e=>{"use strict";var t=e.i(832520);function n(){return(0,t.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("path",{d:"M11.3333 8H2",stroke:"currentcolor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,t.jsx)("path",{d:"M7.33325 12L11.3333 8L7.33325 4",stroke:"currentcolor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,t.jsx)("path",{d:"M14 3.33203V12.6654",stroke:"currentcolor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})}e.s(["CollapseArrow",()=>n])},313595,44756,934994,804089,e=>{"use strict";e.s(["NewFileDialog",()=>f,"createFile",()=>h,"useNewFileDialog",()=>p],313595);var t=e.i(832520),n=e.i(176248),r=e.i(200407),i=e.i(297239),a=e.i(355805),o=e.i(46601);e.i(563948);var s=e.i(407562),l=e.i(686832),c=e.i(763480),u=e.i(894906),d=e.i(914483);function p(){let[e,t]=(0,d.useGetSet)("showNewFileDialog",!1),[n,r]=(0,d.useGetSet)("newFileDialogData",{folderName:""});return{newFileDialogData:n,setNewFileDialogData:r,showNewFileDialog:e,setShowNewFileDialog:t}}async function h(e,t,n,r,i,o){let s="".concat(n.folderName,"/").concat(r);n.folderName||(s=r);let l=r.split(".").pop(),c={source:i,meta:{file:s},blockId:e,lang:(0,a.cleanLangNoCustom)(l),isDeleted:!1,isEdit:!1,isMerged:!1,isMoved:!1,isRecovered:!1,isLocked:!1,isFixed:!1,isQuickEdit:!1,isTerminated:!1,isAttachmentQuickEdit:!1,isUserEdit:!0};if(!(await o([...t,c])).success)throw Error("Failed")}function f(e){let{blockId:a,sourceFiles:d,onSuccess:f}=e,{newFileDialogData:m,showNewFileDialog:g,setShowNewFileDialog:v}=p(),x=(0,u.useUpdateBlockData)(a),[y,b]=(0,r.useState)(!1),[w,j]=(0,r.useState)(""),C=(0,i.useT)();(0,r.useEffect)(()=>{g&&j("")},[g]);let k=(0,r.useCallback)(async e=>{e.preventDefault();try{b(!0),await h(a,d,m,w,"",x),null==f||f()}catch(e){s.toast.error(C("fileTreeActions.newFileNotificationError"))}finally{b(!1)}},[a,d,m,f,C,x,w]);return(0,t.jsxs)(l.Modal,{onOpenChange:v,open:g,responsive:!1,children:[(0,t.jsx)(l.ModalHeader,{children:(0,t.jsx)(l.ModalTitle,{children:C("fileTreeActions.newFile")})}),(0,t.jsx)(l.ModalContent,{children:(0,t.jsx)("form",{className:"flex flex-col gap-6",onSubmit:k,children:(0,t.jsx)(c.Input,{onChange:e=>j(e.target.value),disabled:y,value:w})})}),(0,t.jsxs)(l.ModalFooter,{children:[(0,t.jsx)(l.ModalClose,{asChild:!0,children:(0,t.jsx)(n.Button,{size:"sm",variant:"secondary",children:C("fileTreeActions.cancel")})}),(0,t.jsx)(n.Button,{"data-testid":"confirm-delete-message",disabled:y,onClick:k,size:"sm",children:y?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.IconSpinner,{className:"size-4"}),C("fileTreeActions.creating")]}):C("fileTreeActions.create")})]})]})}e.s(["DeleteFileDialog",()=>N,"deleteFile",()=>S,"useDeleteFileDialog",()=>k],44756);var m=t,g=n,v=r,x=i,y=o,b=s,w=l,j=u,C=d;function k(){let[e,t]=(0,C.useGetSet)("showDeleteFileDialog",!1),[n,r]=(0,C.useGetSet)("deleteFileDialogData",{fileName:""});return{showDeleteFileDialog:e,setShowDeleteFileDialog:t,deleteFileDialogData:n,setDeleteFileDialogData:r}}async function S(e,t,n){let r=[...e];for(let e of r)if(e.meta.file===t.fileName){e.isDeleted=!0,e.isUserEdit=!0,e.isMerged=!1,e.moveToEnd=!0;break}if(!(await n(r)).success)throw Error("Failed")}function N(e){let{blockId:t,sourceFiles:n,onSuccess:r}=e,{showDeleteFileDialog:i,setShowDeleteFileDialog:a,deleteFileDialogData:o}=k(),s=(0,j.useUpdateBlockData)(t),[l,c]=(0,v.useState)(!1),u=(0,x.useT)(),d=(0,v.useCallback)(async()=>{try{c(!0),await S(n,o,s),r()}catch(e){b.toast.error(u("fileTreeActions.fileDeletedNotificationError"))}finally{c(!1)}},[o,n,r,s,u]);return(0,m.jsxs)(w.Modal,{onOpenChange:a,open:i,responsive:!1,children:[(0,m.jsx)(w.ModalHeader,{children:(0,m.jsx)(w.ModalTitle,{children:u("fileTreeActions.deleteFile")})}),(0,m.jsx)(w.ModalContent,{children:(0,m.jsxs)("p",{children:["Are you sure you want to delete"," ",(0,m.jsx)("span",{className:"font-bold",children:o.fileName}),"?"]})}),(0,m.jsxs)(w.ModalFooter,{children:[(0,m.jsx)(w.ModalClose,{asChild:!0,children:(0,m.jsx)(g.Button,{size:"sm",variant:"secondary",children:u("fileTreeActions.cancel")})}),(0,m.jsx)(g.Button,{"data-testid":"confirm-delete-message",disabled:l,onClick:d,size:"sm",variant:"destructive",children:l?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(y.IconSpinner,{className:"size-4"}),u("fileTreeActions.deleting")]}):u("fileTreeActions.delete")})]})]})}e.s(["DeleteFolderDialog",()=>F,"deleteFolder",()=>O,"useDeleteFolderDialog",()=>_],934994);var E=t,M=n,I=r,D=i,T=o,A=s,L=l,P=u,R=d;function _(){let[e,t]=(0,R.useGetSet)("showDeleteFolderDialog",!1),[n,r]=(0,R.useGetSet)("deleteFolderDialogData",{folderName:"",source:""});return{deleteFolderDialogData:n,setDeleteFolderDialogData:r,showDeleteFolderDialog:e,setShowDeleteFolderDialog:t}}async function O(e,t,n){let r=[...e];for(let e of r)e.meta.file.startsWith(t.folderName+"/")&&(e.isDeleted=!0,e.isUserEdit=!0,e.isMerged=!1,e.moveToEnd=!0);if(!(await n(r)).success)throw Error("Failed")}function F(e){let{blockId:t,sourceFiles:n,onSuccess:r}=e,{deleteFolderDialogData:i,showDeleteFolderDialog:a,setShowDeleteFolderDialog:o}=_(),s=(0,P.useUpdateBlockData)(t),[l,c]=(0,I.useState)(!1),u=(0,D.useT)(),d=(0,I.useCallback)(async()=>{try{c(!0),await O(n,i,s),r()}catch(e){A.toast.error(u("fileTreeActions.folderDeletedNotificationError"))}finally{c(!1)}},[i,n,r,s,u]);return(0,E.jsxs)(L.Modal,{onOpenChange:o,open:a,responsive:!1,children:[(0,E.jsx)(L.ModalHeader,{children:(0,E.jsx)(L.ModalTitle,{children:u("fileTreeActions.deleteFolder")})}),(0,E.jsx)(L.ModalContent,{children:(0,E.jsxs)("p",{className:"mb-2",children:["Are you sure you want to delete"," ",(0,E.jsx)("span",{className:"font-bold",children:i.folderName}),"?"]})}),(0,E.jsxs)(L.ModalFooter,{children:[(0,E.jsx)(L.ModalClose,{asChild:!0,children:(0,E.jsx)(M.Button,{size:"sm",variant:"secondary",children:u("fileTreeActions.cancel")})}),(0,E.jsx)(M.Button,{"data-testid":"confirm-delete-message",disabled:l,onClick:d,size:"sm",variant:"destructive",children:l?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(T.IconSpinner,{className:"size-4"}),u("fileTreeActions.deleting")]}):u("fileTreeActions.delete")})]})]})}var V=t,B=n,z=r,H=i,U=o,q=l,W=c,Z=d;function G(){let[e,t]=(0,Z.useGetSet)("showNewFolderDialog",!1),[n,r]=(0,Z.useGetSet)("newFolderDialogData",{folderName:""});return{newFolderDialogData:n,setNewFolderDialogData:r,showNewFolderDialog:e,setShowNewFolderDialog:t}}function K(e){let{blockId:t}=e,[n,r]=(0,Z.useGetSet)("tempFolders-".concat(t),[]);return{tempFolders:n,setTempFolders:r}}function X(e){let{onSuccess:t}=e,{newFolderDialogData:n,showNewFolderDialog:r,setShowNewFolderDialog:i}=G(),[a,o]=(0,z.useState)(!1),[s,l]=(0,z.useState)(""),c=(0,H.useT)();(0,z.useEffect)(()=>{r&&l("")},[r]);let u=(0,z.useCallback)(e=>{e.preventDefault(),o(!0),t(n.folderName?"".concat(n.folderName,"/").concat(s):s),o(!1)},[n,t,s]);return(0,V.jsxs)(q.Modal,{onOpenChange:i,open:r,responsive:!1,children:[(0,V.jsx)(q.ModalHeader,{children:(0,V.jsx)(q.ModalTitle,{children:c("fileTreeActions.newFolder")})}),(0,V.jsx)(q.ModalContent,{children:(0,V.jsx)("form",{className:"flex flex-col gap-6",onSubmit:u,children:(0,V.jsx)(W.Input,{onChange:e=>l(e.target.value),disabled:a,value:s})})}),(0,V.jsxs)(q.ModalFooter,{children:[(0,V.jsx)(q.ModalClose,{asChild:!0,children:(0,V.jsx)(B.Button,{size:"sm",variant:"secondary",children:c("fileTreeActions.cancel")})}),(0,V.jsx)(B.Button,{"data-testid":"confirm-delete-message",disabled:a,onClick:u,size:"sm",children:a?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(U.IconSpinner,{className:"size-4"}),c("fileTreeActions.creating")]}):c("fileTreeActions.create")})]})]})}e.s(["NewFolderDialog",()=>X,"useNewFolderDialog",()=>G,"useTempFolders",()=>K],804089)},811140,e=>{"use strict";e.s(["RenameFileDialog",()=>h,"renameFile",()=>p,"useRenameFileDialog",()=>d]);var t=e.i(832520),n=e.i(176248),r=e.i(200407),i=e.i(297239),a=e.i(46601);e.i(563948);var o=e.i(407562),s=e.i(686832),l=e.i(763480),c=e.i(894906),u=e.i(914483);function d(){let[e,t]=(0,u.useGetSet)("showRenameFileDialog",!1),[n,r]=(0,u.useGetSet)("renameFileDialogData",{fileName:""});return{renameFileDialogData:n,setRenameFileDialogData:r,showRenameFileDialog:e,setShowRenameFileDialog:t}}async function p(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=[...e],o=a.findIndex(e=>e.meta.file===t.fileName);if(-1===o)throw Error("File not found");let s=t.fileName.split("/").slice(0,-1).join("/"),l=i?n:s?"".concat(s,"/").concat(n):n;if(a[o].meta.file=l,a[o].isMoved=!0,a[o].isUserEdit=!0,!(await r([...a],{moveFile:{from:t.fileName,to:l}})).success)throw Error("Failed");return l}function h(e){let{blockId:u,sourceFiles:h,onSuccess:f}=e,{renameFileDialogData:m,showRenameFileDialog:g,setShowRenameFileDialog:v}=d(),x=(0,c.useUpdateBlockData)(u),[y,b]=(0,r.useState)(!1),[w,j]=(0,r.useState)(""),C=(0,i.useT)();(0,r.useEffect)(()=>{j(m.fileName.split("/").slice(-1)[0])},[m.fileName]);let k=(0,r.useCallback)(async e=>{e.preventDefault();try{b(!0);let e=await p(h,m,w,x);f(e)}catch(e){o.toast.error(C("fileTreeActions.renameFileNotificationError"))}finally{b(!1)}},[h,f,m,C,x,w]);return(0,t.jsxs)(s.Modal,{onOpenChange:v,open:g,responsive:!1,children:[(0,t.jsx)(s.ModalHeader,{children:(0,t.jsx)(s.ModalTitle,{children:C("fileTreeActions.renameFile")})}),(0,t.jsx)(s.ModalContent,{children:(0,t.jsx)("form",{className:"flex flex-col gap-6",onSubmit:k,children:(0,t.jsx)(l.Input,{onChange:e=>j(e.target.value),disabled:y,value:w})})}),(0,t.jsxs)(s.ModalFooter,{children:[(0,t.jsx)(s.ModalClose,{asChild:!0,children:(0,t.jsx)(n.Button,{size:"sm",variant:"secondary",children:C("fileTreeActions.cancel")})}),(0,t.jsx)(n.Button,{"data-testid":"confirm-delete-message",disabled:y,onClick:k,size:"sm",children:y?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.IconSpinner,{className:"size-4"}),C("fileTreeActions.renaming")]}):C("fileTreeActions.rename")})]})]})}},840030,951993,818845,453609,e=>{"use strict";var t=e.i(832520),n=e.i(304649);function r(e){let{className:r,...i}=e;return(0,t.jsxs)("svg",{className:(0,n.cn)("h-4 w-4",r),fill:"none",height:"16",viewBox:"0 0 16 16",width:"16",xmlns:"http://www.w3.org/2000/svg",...i,children:[(0,t.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13 10.4V11.2H10.6V10.4C10.6 9.73726 11.1373 9.2 11.8 9.2C12.4627 9.2 13 9.73726 13 10.4ZM9.4 11.2V10.4C9.4 9.07452 10.4745 8 11.8 8C13.1255 8 14.2 9.07452 14.2 10.4V11.2H15V14.8C15 15.4627 14.4627 16 13.8 16H9.8C9.13726 16 8.6 15.4627 8.6 14.8V11.2H9.4Z",fill:"currentColor"}),(0,t.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.5 7V6.5V5.41421C14.5 5.149 14.3946 4.89464 14.2071 4.70711L9.79289 0.292893C9.60536 0.105357 9.351 0 9.08579 0H8H3H1.5V1.5V13.5C1.5 14.8807 2.61929 16 4 16H7V14.5H4C3.44772 14.5 3 14.0523 3 13.5V1.5H8V5V6.5H9.5H13V7H14.5ZM9.5 5V2.12132L12.3787 5H9.5Z",fill:"currentColor"})]})}e.s(["IconLockFiles",()=>r],840030);var i=t,a=n;function o(e){let{className:t,...n}=e;return(0,i.jsxs)("svg",{className:(0,a.cn)("h-4 w-4",t),fill:"none",height:"16",viewBox:"0 0 16 16",width:"16",xmlns:"http://www.w3.org/2000/svg",...n,children:[(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.39997 10.7499C9.39997 10.1148 8.8851 9.5999 8.24997 9.5999C7.61485 9.5999 7.09997 10.1148 7.09997 10.7499V11.1428H5.89997V10.7499C5.89997 9.45203 6.95211 8.3999 8.24997 8.3999C9.54784 8.3999 10.6 9.45203 10.6 10.7499V11.2H15V14.8C15 15.4627 14.4627 16 13.8 16H9.8C9.13725 16 8.59999 15.4627 8.59999 14.8V11.2H9.39997V10.7499Z",fill:"currentColor"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.5 10V6.5V5.41421C14.5 5.149 14.3946 4.89464 14.2071 4.70711L9.79289 0.292893C9.60536 0.105357 9.351 0 9.08579 0H8H3H1.5V1.5V13.5C1.5 14.8807 2.61929 16 4 16H7V14.5H4C3.44772 14.5 3 14.0523 3 13.5V1.5H8V5V6.5H9.5H13V10H14.5ZM9.5 5V2.12132L12.3787 5H9.5Z",fill:"currentColor"})]})}e.s(["IconUnlockFiles",()=>o],951993),e.s(["useToggleFileLock",()=>p],818845),e.i(563948);var s=e.i(407562),l=e.i(894906),c=e.i(297239),u=e.i(200407),d=e.i(53223);let p=e=>{let{blockId:t,sourceFiles:n,onChange:r}=e,i=(0,l.useUpdateBlockData)(t),a=(0,c.useT)(),[o,p]=(0,u.useState)(null);return{handleToggleFileLock:(0,u.useCallback)(async e=>{let o,l,c=[...n],u="locking";for(let t of c)if(("single-file"!==e.variant||t.meta.file===e.fileNameToEdit)&&("folder"!==e.variant||t.meta.file.startsWith(e.folderName+"/"))){if(("single-file"===e.variant&&t.isLocked||"all-files"===e.variant&&"unlock"===e.mode||"folder"===e.variant&&"unlock"===e.mode)&&(u="unlocking"),"single-file"===e.variant?t.isLocked=!t.isLocked:t.isLocked="lock"===e.mode,"single-file"===e.variant)break;"other-files"===e.variant&&(t.meta.file===e.fileNameToNotLock?t.isLocked=!1:t.isLocked=!0)}"all-files"===e.variant?p({type:"locking"===u?"locking-all":"unlocking-all"}):"folder"===e.variant?p({type:"locking"===u?"locking-folder":"unlocking-folder",folderName:e.folderName}):p({type:u,fileName:"single-file"===e.variant?e.fileNameToEdit:e.fileNameToNotLock});try{o=await i(c)}catch(e){o={success:!1}}l="single-file"===e.variant?"locking"===u?"fileTreeActions.fileLockedNotification":"fileTreeActions.fileUnlockNotification":"locking"===u?"fileTreeActions.filesLockedNotification":"fileTreeActions.filesUnlockedNotification",p(null),o.success?((0,d.track)("LockFiles",{variant:e.variant,state:u,blockId:t}),s.toast.success(a(l),{position:"bottom-right"}),r()):((0,d.track)("LockFilesError",{variant:e.variant,state:u,blockId:t}),console.error(o),s.toast.error(a("fileTreeActions.fileLockNotificationError"),{position:"bottom-right"}))},[n,i,a,r,t]),lockingStatus:o}};var h=t,f=n;function m(e){let{className:t,...n}=e;return(0,h.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,className:(0,f.cn)("h-4 w-4",t),children:[(0,h.jsx)("path",{d:"M6.74884 6.75L2.24884 2.25M5.99884 1.5H1.75C1.61193 1.5 1.5 1.61193 1.5 1.75V6",stroke:"#717179",strokeWidth:"1.5",strokeLinecap:"square",strokeLinejoin:"round"}),(0,h.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.0001 9.4V10.2H10.6001V9.4C10.6001 8.73726 11.1374 8.2 11.8001 8.2C12.4628 8.2 13.0001 8.73726 13.0001 9.4ZM9.4001 10.2V9.4C9.4001 8.07452 10.4746 7 11.8001 7C13.1256 7 14.2001 8.07452 14.2001 9.4V10.2H15.0001V13.8C15.0001 14.4627 14.4628 15 13.8001 15H9.8001C9.13736 15 8.6001 14.4627 8.6001 13.8V10.2H9.4001Z",fill:"#717179"})]})}e.s(["IconLockOthers",()=>m],453609)},519738,e=>{"use strict";e.s(["useBlockVersionInfo",()=>r]);var t=e.i(200407),n=e.i(301331);function r(e){let{history:r,currentBlockIndex:i,latestBlock:a}=(0,n.useBlockHistory)({blockId:e,searchAll:!0}),o=(0,t.useMemo)(()=>!a||!e||a.id===e,[a,e]),s=(0,t.useMemo)(()=>i+1,[i]),l=(0,t.useMemo)(()=>r.length,[r]);return{isLatest:o,currentVersion:s,latestVersion:l,totalVersions:r.length,versionsBehind:o?0:l-s}}},970210,(e,t,n)=>{function r(e,t){"boolean"==typeof t&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}t.exports=r,r.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},r.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},r.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=new Date().getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var n=this._timeouts.shift();if(void 0===n)if(!this._cachedTimeouts)return!1;else this._errors.splice(0,this._errors.length-1),n=this._cachedTimeouts.slice(-1);var r=this;return this._timer=setTimeout(function(){r._attempts++,r._operationTimeoutCb&&(r._timeout=setTimeout(function(){r._operationTimeoutCb(r._attempts)},r._operationTimeout),r._options.unref&&r._timeout.unref()),r._fn(r._attempts)},n),this._options.unref&&this._timer.unref(),!0},r.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var n=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){n._operationTimeoutCb()},n._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},r.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},r.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},r.prototype.start=r.prototype.try,r.prototype.errors=function(){return this._errors},r.prototype.attempts=function(){return this._attempts},r.prototype.mainError=function(){if(0===this._errors.length)return null;for(var e={},t=null,n=0,r=0;r<this._errors.length;r++){var i=this._errors[r],a=i.message,o=(e[a]||0)+1;e[a]=o,o>=n&&(t=i,n=o)}return t}},731238,(e,t,n)=>{var r=e.r(970210);n.operation=function(e){return new r(n.timeouts(e),{forever:e&&(e.forever||e.retries===1/0),unref:e&&e.unref,maxRetryTime:e&&e.maxRetryTime})},n.timeouts=function(e){if(e instanceof Array)return[].concat(e);var t={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var n in e)t[n]=e[n];if(t.minTimeout>t.maxTimeout)throw Error("minTimeout is greater than maxTimeout");for(var r=[],i=0;i<t.retries;i++)r.push(this.createTimeout(i,t));return e&&e.forever&&!r.length&&r.push(this.createTimeout(i,t)),r.sort(function(e,t){return e-t}),r},n.createTimeout=function(e,t){var n=Math.round((t.randomize?Math.random()+1:1)*Math.max(t.minTimeout,1)*Math.pow(t.factor,e));return Math.min(n,t.maxTimeout)},n.wrap=function(e,t,r){if(t instanceof Array&&(r=t,t=null),!r)for(var i in r=[],e)"function"==typeof e[i]&&r.push(i);for(var a=0;a<r.length;a++){var o=r[a],s=e[o];e[o]=(function(r){var i=n.operation(t),a=Array.prototype.slice.call(arguments,1),o=a.pop();a.push(function(e){i.retry(e)||(e&&(arguments[0]=i.mainError()),o.apply(this,arguments))}),i.attempt(function(){r.apply(e,a)})}).bind(e,s),e[o].options=t}}},629103,(e,t,n)=>{t.exports=e.r(731238)},452172,(e,t,n)=>{var r=e.r(629103);t.exports=function(e,t){return new Promise(function(n,i){var a,o=t||{};function s(e){i(e||Error("Aborted"))}function l(e,t){if(e.bail)return void s(e);a.retry(e)?o.onRetry&&o.onRetry(e,t):i(a.mainError())}function c(t){var r;try{r=e(s,t)}catch(e){l(e,t);return}Promise.resolve(r).then(n).catch(function(e){l(e,t)})}"randomize"in o||(o.randomize=!0),(a=r.operation(o)).attempt(c)})}},655263,(e,t,n)=>{"use strict";t.exports=s,t.exports.format=l,t.exports.parse=c;var r=/\B(?=(\d{3})+(?!\d))/g,i=/(?:\.0*|(\.[^0]+)0+)$/,a={b:1,kb:1024,mb:1048576,gb:0x40000000,tb:0x10000000000,pb:0x4000000000000},o=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i;function s(e,t){return"string"==typeof e?c(e):"number"==typeof e?l(e,t):null}function l(e,t){if(!Number.isFinite(e))return null;var n=Math.abs(e),o=t&&t.thousandsSeparator||"",s=t&&t.unitSeparator||"",l=t&&void 0!==t.decimalPlaces?t.decimalPlaces:2,c=!!(t&&t.fixedDecimals),u=t&&t.unit||"";u&&a[u.toLowerCase()]||(u=n>=a.pb?"PB":n>=a.tb?"TB":n>=a.gb?"GB":n>=a.mb?"MB":n>=a.kb?"KB":"B");var d=(e/a[u.toLowerCase()]).toFixed(l);return c||(d=d.replace(i,"$1")),o&&(d=d.split(".").map(function(e,t){return 0===t?e.replace(r,o):e}).join(".")),d+s+u}function c(e){if("number"==typeof e&&!isNaN(e))return e;if("string"!=typeof e)return null;var t,n=o.exec(e),r="b";return(n?(t=parseFloat(n[1]),r=n[4].toLowerCase()):(t=parseInt(e,10),r="b"),isNaN(t))?null:Math.floor(a[r]*t)}},906202,(e,t,n)=>{t.exports=function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}},547763,228495,718943,e=>{"use strict";e.i(723900);var t,n,r=e.i(133473);let i=globalThis.fetch.bind(globalThis);var a=e.i(452172),o=e.i(655263);let s={toWeb(){throw Error("Vercel Blob: Sorry, we cannot get a Readable stream in this environment. If you see this message please open an issue here: https://github.com/vercel/storage/ with details on your environment.")}};var l=e.i(906202);function c(e){if(null==e?void 0:e.token)return e.token;if(r.default.env.BLOB_READ_WRITE_TOKEN)return r.default.env.BLOB_READ_WRITE_TOKEN;throw new u("No token found. Either configure the `BLOB_READ_WRITE_TOKEN` environment variable, or pass a `token` option to your calls.")}var u=class extends Error{constructor(e){super("Vercel Blob: ".concat(e))}};function d(e){if("object"!=typeof e||null===e)return!1;let t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}var p=!1;try{((null==(t=r.default.env.DEBUG)?void 0:t.includes("blob"))||(null==(n=r.default.env.NEXT_PUBLIC_DEBUG)?void 0:n.includes("blob")))&&(p=!0)}catch(e){}function h(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];p&&console.debug("vercel-blob: ".concat(e),...n)}var f=950,m=class extends u{constructor(){super("Access denied, please provide a valid token for this resource.")}},g=class extends u{constructor(e){super("Content type mismatch, ".concat(e))}},v=class extends u{constructor(){super("This store does not exist.")}},x=class extends u{constructor(){super("This store has been suspended.")}},y=class extends u{constructor(){super("Unknown error, please visit https://vercel.com/help.")}},b=class extends u{constructor(){super("The requested blob does not exist")}},w=class extends u{constructor(){super("The blob service is currently not available. Please try again.")}},j=class extends u{constructor(e){super("Too many requests please lower the number of concurrent requests ".concat(e?" - try again in ".concat(e," seconds"):"",".")),this.retryAfter=null!=e?e:0}},C=class extends u{constructor(){super("The request was aborted.")}},k=7;function S(){let e=null;try{e=r.default.env.VERCEL_BLOB_API_VERSION_OVERRIDE||r.default.env.NEXT_PUBLIC_VERCEL_BLOB_API_VERSION_OVERRIDE}catch(e){}return"".concat(null!=e?e:k)}function N(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=null;try{t=r.default.env.VERCEL_BLOB_API_URL||r.default.env.NEXT_PUBLIC_VERCEL_BLOB_API_URL}catch(e){}return"".concat(t||"https://blob.vercel-storage.com").concat(e)}function E(){try{let e=r.default.env.VERCEL_BLOB_RETRIES||"10";return parseInt(e,10)}catch(e){return 10}}function M(e){let t=e.headers.get("retry-after");return new j(t?parseInt(t,10):void 0)}async function I(e){var t,n,r;let i,a,o;try{let o=await e.json();i=null!=(n=null==(t=o.error)?void 0:t.code)?n:"unknown_error",a=null==(r=o.error)?void 0:r.message}catch(e){i="unknown_error"}switch((null==a?void 0:a.includes("contentType"))&&a.includes("is not allowed")&&(i="content_type_not_allowed"),i){case"store_suspended":o=new x;break;case"forbidden":o=new m;break;case"content_type_not_allowed":o=new g(a);break;case"not_found":o=new b;break;case"store_not_found":o=new v;break;case"bad_request":o=new u(null!=a?a:"Bad request");break;case"service_unavailable":o=new w;break;case"rate_limited":o=M(e);break;default:o=new y}return{code:i,error:o}}async function D(e,t,n){let r=S(),o=c(n),s=T(),[,,,l=""]=o.split("_"),u="".concat(l,":").concat(Date.now(),":").concat(Math.random().toString(16).slice(2)),d=0,p=await (0,a.default)(async n=>{let a;try{a=await i(N(e),{...t,headers:{"x-api-blob-request-id":u,"x-api-blob-request-attempt":String(d),"x-api-version":r,authorization:"Bearer ".concat(o),...s,...t.headers}})}catch(e){if(e instanceof DOMException&&"AbortError"===e.name)return void n(new C);throw e}if(a.ok)return a;let{code:l,error:c}=await I(a);if("unknown_error"===l||"service_unavailable"===l||"internal_server_error"===l)throw c;n(c)},{retries:E(),onRetry:t=>{h("retrying API request to ".concat(e),t.message),d+=1}});if(!p)throw new y;return await p.json()}function T(){let e={};try{"VERCEL_BLOB_PROXY_THROUGH_ALTERNATIVE_API"in r.default.env?e["x-proxy-through-alternative-api"]=r.default.env.VERCEL_BLOB_PROXY_THROUGH_ALTERNATIVE_API:"NEXT_PUBLIC_VERCEL_BLOB_PROXY_THROUGH_ALTERNATIVE_API"in r.default.env&&(e["x-proxy-through-alternative-api"]=r.default.env.NEXT_PUBLIC_VERCEL_BLOB_PROXY_THROUGH_ALTERNATIVE_API)}catch(e){}return e}var A={cacheControlMaxAge:"x-cache-control-max-age",addRandomSuffix:"x-add-random-suffix",contentType:"x-content-type"};function L(e,t){let n={};return e.includes("contentType")&&t.contentType&&(n[A.contentType]=t.contentType),e.includes("addRandomSuffix")&&void 0!==t.addRandomSuffix&&(n[A.addRandomSuffix]=t.addRandomSuffix?"1":"0"),e.includes("cacheControlMaxAge")&&void 0!==t.cacheControlMaxAge&&(n[A.cacheControlMaxAge]=t.cacheControlMaxAge.toString()),n}async function P(e){let{pathname:t,options:n,extraChecks:r,getToken:i}=e;if(!t)throw new u("pathname is required");if(t.length>f)throw new u("pathname is too long, maximum length is ".concat(f));if(!n)throw new u("missing options, see usage");if("public"!==n.access)throw new u('access must be "public"');return r&&r(n),i&&(n.token=await i(t,n)),n}function R(e){let{allowedOptions:t,getToken:n,extraChecks:r}=e;return async(e,i,a)=>{let o=await P({pathname:e,options:a,extraChecks:r,getToken:n}),s=L(t,o);return _({uploadId:o.uploadId,key:o.key,pathname:e,headers:s,options:o,parts:i})}}async function _(e){let{uploadId:t,key:n,pathname:r,parts:i,headers:a,options:o}=e;try{let e=await D("/mpu/".concat(r),{method:"POST",headers:{...a,"content-type":"application/json","x-mpu-action":"complete","x-mpu-upload-id":t,"x-mpu-key":encodeURI(n)},body:JSON.stringify(i),signal:o.abortSignal},o);return h("mpu: complete",e),e}catch(e){if(e instanceof TypeError&&("Failed to fetch"===e.message||"fetch failed"===e.message))throw new w;throw e}}function O(e){let{allowedOptions:t,getToken:n,extraChecks:r}=e;return async(e,i)=>{let a=await P({pathname:e,options:i,extraChecks:r,getToken:n}),o=L(t,a),s=await F(e,o,a);return{key:s.key,uploadId:s.uploadId}}}async function F(e,t,n){h("mpu: create","pathname:",e);try{let r=await D("/mpu/".concat(e),{method:"POST",headers:{...t,"x-mpu-action":"create"},signal:n.abortSignal},n);return h("mpu: create",r),r}catch(e){if(e instanceof TypeError&&("Failed to fetch"===e.message||"fetch failed"===e.message))throw new w;throw e}}function V(e){let{allowedOptions:t,getToken:n,extraChecks:r}=e;return async(e,i,a)=>{let o=await P({pathname:e,options:a,extraChecks:r,getToken:n}),s=L(t,o);if(d(i))throw new u("Body must be a string, buffer or stream. You sent a plain JavaScript object, double check what you're trying to upload.");return{etag:(await B({uploadId:o.uploadId,key:o.key,pathname:e,part:{blob:i,partNumber:o.partNumber},headers:s,options:o})).etag,partNumber:o.partNumber}}}async function B(e){var t,n,r;let{uploadId:i,key:a,pathname:o,headers:s,options:l,internalAbortController:c=new AbortController,part:u}=e,d=D("/mpu/".concat(o),{signal:c.signal,method:"POST",headers:{...s,"x-mpu-action":"upload","x-mpu-key":encodeURI(a),"x-mpu-upload-id":i,"x-mpu-part-number":u.partNumber.toString()},body:u.blob,duplex:"half"},l);function p(){c.abort()}(null==(t=l.abortSignal)?void 0:t.aborted)?p():null==(n=l.abortSignal)||n.addEventListener("abort",p);let h=await d;return null==(r=l.abortSignal)||r.removeEventListener("abort",p),h}var z="undefined"!=typeof window?6:8,H=8388608,U=8388608*z*2;function q(e){let{uploadId:t,key:n,pathname:r,stream:i,headers:a,options:s}=e;h("mpu: upload init","key:",n);let l=new AbortController;return new Promise((e,c)=>{let u=[],d=[],p=i.getReader(),f=0,m=!1,g=1,v=!1,x=0,y=!1,b=0,j=[],C=0;async function k(){for(h("mpu: upload read start","activeUploads:",f,"currentBytesInMemory:","".concat((0,o.default)(x),"/").concat((0,o.default)(U)),"bytesSent:",(0,o.default)(b)),m=!0;x<U&&!v;)try{let{value:e,done:t}=await p.read();if(t){y=!0,h("mpu: upload read consumed the whole stream"),j.length>0&&(u.push({partNumber:g++,blob:new Blob(j,{type:"application/octet-stream"})}),N()),m=!1;return}x+=e.byteLength;let n=0;for(;n<e.byteLength;){let t=H-C,r=Math.min(n+t,e.byteLength),i=e.slice(n,r);j.push(i),C+=i.byteLength,n=r,C===H&&(u.push({partNumber:g++,blob:new Blob(j,{type:"application/octet-stream"})}),j=[],C=0,N())}}catch(e){E(e)}h("mpu: upload read end","activeUploads:",f,"currentBytesInMemory:","".concat((0,o.default)(x),"/").concat((0,o.default)(U)),"bytesSent:",(0,o.default)(b)),m=!1}async function S(i){f++,h("mpu: upload send part start","partNumber:",i.partNumber,"size:",i.blob.size,"activeUploads:",f,"currentBytesInMemory:","".concat((0,o.default)(x),"/").concat((0,o.default)(U)),"bytesSent:",(0,o.default)(b));try{let c=await B({uploadId:t,key:n,pathname:r,headers:a,options:s,internalAbortController:l,part:i});if(h("mpu: upload send part end","partNumber:",i.partNumber,"activeUploads",f,"currentBytesInMemory:","".concat((0,o.default)(x),"/").concat((0,o.default)(U)),"bytesSent:",(0,o.default)(b)),v)return;if(d.push({partNumber:i.partNumber,etag:c.etag}),x-=i.blob.size,f--,b+=i.blob.size,u.length>0&&N(),y){0===f&&(p.releaseLock(),e(d));return}m||k().catch(E)}catch(e){E(e)}}function N(){if(!v)for(h("send parts","activeUploads",f,"partsToUpload",u.length);f<z&&u.length>0;){let e=u.shift();e&&S(e)}}function E(e){v||(v=!0,l.abort(),p.releaseLock(),e instanceof TypeError&&("Failed to fetch"===e.message||"fetch failed"===e.message)?c(new w):c(e))}k().catch(E)})}function W(e){let t;return e instanceof ReadableStream?e:e instanceof Blob?e.stream():Z(e)?s.toWeb(e):(t=e instanceof ArrayBuffer?e:K(e)?e.buffer:G(e),new ReadableStream({start(e){e.enqueue(t),e.close()}}))}function Z(e){return"object"==typeof e&&"function"==typeof e.pipe&&e.readable&&"function"==typeof e._read&&"object"==typeof e._readableState}function G(e){return new TextEncoder().encode(e)}function K(e){return(0,l.default)(e)}async function X(e,t,n,r){h("mpu: init","pathname:",e,"headers:",n);let i=W(t),a=await F(e,n,r),o=await q({uploadId:a.uploadId,key:a.key,pathname:e,stream:i,headers:n,options:r});return await _({uploadId:a.uploadId,key:a.key,pathname:e,parts:o,headers:n,options:r})}function $(e){let{allowedOptions:t,getToken:n,extraChecks:r}=e;return async function(e,i,a){if(!i)throw new u("body is required");if(d(i))throw new u("Body must be a string, buffer or stream. You sent a plain JavaScript object, double check what you're trying to upload.");let o=await P({pathname:e,options:a,extraChecks:r,getToken:n}),s=L(t,o);if(!0===o.multipart)return X(e,i,s,o);let l=await D("/".concat(e),{method:"PUT",body:i,headers:s,duplex:"half",signal:o.abortSignal},o);return{url:l.url,downloadUrl:l.downloadUrl,pathname:l.pathname,contentType:l.contentType,contentDisposition:l.contentDisposition}}}function Y(e){let{allowedOptions:t,getToken:n,extraChecks:r}=e;return async(e,i)=>{let a=await P({pathname:e,options:i,extraChecks:r,getToken:n}),o=L(t,a),s=await F(e,o,a);return{key:s.key,uploadId:s.uploadId,async uploadPart(t,n){if(d(n))throw new u("Body must be a string, buffer or stream. You sent a plain JavaScript object, double check what you're trying to upload.");return{etag:(await B({uploadId:s.uploadId,key:s.key,pathname:e,part:{partNumber:t,blob:n},headers:o,options:a})).etag,partNumber:t}},complete:async t=>_({uploadId:s.uploadId,key:s.key,pathname:e,parts:t,headers:o,options:a})}}}async function J(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.endsWith("/")?e:"".concat(e,"/"),r={};r[A.addRandomSuffix]="0";let i=await D("/".concat(n),{method:"PUT",headers:r,signal:t.abortSignal},t);return{url:i.url,pathname:i.pathname}}function Q(e){return function(t){if("undefined"==typeof window)throw new u("".concat(e," must be called from a client environment"));if(!t.token.startsWith("vercel_blob_client_"))throw new u("".concat(e," must be called with a client token"));if(void 0!==t.addRandomSuffix||void 0!==t.cacheControlMaxAge)throw new u("".concat(e," doesn't allow addRandomSuffix and cacheControlMaxAge. Configure these options at the server side when generating client tokens."))}}e.s(["BlobContentTypeNotAllowed",()=>g,"BlobError",()=>u,"createCompleteMultipartUploadMethod",()=>R,"createCreateMultipartUploadMethod",()=>O,"createCreateMultipartUploaderMethod",()=>Y,"createFolder",()=>J,"createPutMethod",()=>$,"createUploadPartMethod",()=>V,"getTokenFromOptionsOrEnv",()=>c],228495),$({allowedOptions:["contentType"],extraChecks:Q("client/`put`")}),O({allowedOptions:["contentType"],extraChecks:Q("client/`createMultipartUpload`")}),Y({allowedOptions:["contentType"],extraChecks:Q("client/`createMultipartUpload`")}),V({allowedOptions:["contentType"],extraChecks:Q("client/`multipartUpload`")}),R({allowedOptions:["contentType"],extraChecks:Q("client/`completeMultipartUpload`")});var ee=$({allowedOptions:["contentType"],extraChecks(e){if("undefined"==typeof window)throw new u("client/`upload` must be called from a client environment");if(void 0===e.handleUploadUrl)throw new u("client/`upload` requires the 'handleUploadUrl' parameter");if(void 0!==e.addRandomSuffix||void 0!==e.cacheControlMaxAge)throw new u("client/`upload` doesn't allow addRandomSuffix and cacheControlMaxAge. Configure these options at the server side when generating client tokens.")},async getToken(e,t){var n,r;return en({handleUploadUrl:t.handleUploadUrl,pathname:e,clientPayload:null!=(n=t.clientPayload)?n:null,multipart:null!=(r=t.multipart)&&r})}}),et={generateClientToken:"blob.generate-client-token"};async function en(e){let{handleUploadUrl:t,pathname:n}=e,r=ei(t)?t:er(t),a={type:et.generateClientToken,payload:{pathname:n,callbackUrl:r,clientPayload:e.clientPayload,multipart:e.multipart}},o=await i(r,{method:"POST",body:JSON.stringify(a),headers:{"content-type":"application/json"},signal:e.abortSignal});if(!o.ok)throw new u("Failed to  retrieve the client token");try{let{clientToken:e}=await o.json();return e}catch(e){throw new u("Failed to retrieve the client token")}}function er(e){return new URL(e,window.location.href).href}function ei(e){try{return new URL(e),!0}catch(e){return!1}}e.s(["upload",()=>ee],547763);var ea=e.i(547259),eo=(0,ea.createServerReference)("403657f68eee061e742e60a5cd2393ec9f8599d011",ea.callServer,void 0,ea.findSourceMapURL,"importChat");e.s(["importChat",()=>eo],718943)},577745,e=>{"use strict";function t(e){return e.startsWith("image/")&&!e.includes("svg")}function n(e){return(e/1048576).toFixed(2).replace(/\.?0+$/,"")+"MB"}let r=["text/plain","text/markdown","text/html","application/json","text/csv","text/x-python","application/typescript","text/tsx","text/jsx","text/markdown","text/html","text/css","application/yaml","application/yml","application/sql","application/x-sql","application/xml","message/rfc822"],i=["txt","md","json","csv","py","ts","tsx","js","jsx","log","html","css","yml","yaml","mermaid","mjs","mts","sql","map","xml","eml"];function a(e,t){return r.includes(e)||i.includes(t)}e.s(["TEXT_EXTENSIONS",0,i,"bytesToMB",()=>n,"isConvertedToText",()=>a,"isInlinableImageType",()=>t])},599568,e=>{e.v(e.b(["static/chunks/d460a422ace39e7b.js","static/chunks/turbopack-964288b58f4c01c6.js"]))},79259,890374,924804,342220,e=>{"use strict";e.s(["buildUploadPayload",()=>E,"default",()=>S],79259);var t=e.i(200407),n=e.i(323194);e.i(563948);var r=e.i(407562),i=e.i(547763),a=e.i(564997),o=e.i(480118),s=e.i(718943),l=e.i(246300),c=e.i(577745);function u(e){return d(e,!0)}function d(e,t){return Math.floor(.297*("string"==typeof e?e.length:e.charCount)+1379.14*!t)}function p(e){return Math.round(4*e*(1/.9))}function h(e){return Math.round(e/1048576*1334)}function f(e){return h("number"==typeof e?e:e.size)}e.s(["estimateChars",()=>p,"estimateTokensForImageAttachments",()=>f,"estimateTokensForSmallString",()=>u,"estimateTokensForString",()=>d],890374);var m=e.i(346970);let g={attachmentMaxSizeBytes:3932160,contextWindow:199999,image:{maxSizeBytes:3932160,maxDimensionsPixels:{short:8e3,long:8e3},maxPerChat:20}};function v(){let{data:e}=(0,m.default)("model-config");return null!=e?e:g}e.s(["useModelConfig",()=>v],924804);var x=e.i(53223),y=e.i(342681),b=e.i(228495);e.s(["BlobContentTypeNotAllowedError",()=>b.BlobContentTypeNotAllowed],342220);var b=b,w=e.i(667660);let j=[{mimeType:"image/gif",bytes:[71,73,70]},{mimeType:"image/png",bytes:[137,80,78,71]},{mimeType:"image/jpeg",bytes:[255,216]},{mimeType:"image/webp",bytes:[82,73,70,70]}];function C(e){for(let{bytes:t,mimeType:n}of j)if(e.length>=t.length&&t.every((t,n)=>e[n]===t))return n}function k(t,n,r,i){return new Promise((a,o)=>{let s=new Worker(e.r(599568));s.onmessage=e=>{let{blob:n,error:r}=e.data;r?o(Error(r)):n&&a(new File([n],t.name,{type:n.type})),s.terminate()},s.onerror=e=>{o(Error(e.message)),s.terminate()},s.postMessage({file:t,quality:n,shortLimit:r,longLimit:i})})}let S=e=>{let{isSignedIn:d,dragContainerRef:p,projectId:h,onFinish:m,onSuccess:g,onError:j,canUpload:C,onUploadStart:k,disablePaste:S,disableDrag:D}=e,T=h?"project-source":"prompt-attachment",[A,L]=(0,t.useState)(!1),[P,R]=(0,t.useState)(!1),_=(0,t.useRef)(null),{user:O}=(0,w.useActiveScope)(),F=v(),{revalidate:V}=(0,l.useChatHistory)(),B=(0,o.useRouter)(),{setShowSignInDialog:z}=(0,n.useSignInDialog)(),H=null!=j?j:e=>r.toast.error(e),U=(0,t.useCallback)(async e=>{R(!0);let t=5,n=[];try{if(!d)return void z({content:!1});let p=C(e);if(!p.ok){var o;H(null!=(o=p.message)?o:"Failed to upload files","");return}let m=[],v=[];async function l(e){let t,n,o=await I({file:e,config:F}),l=(0,y.generateFileId)();if(o.name.startsWith(a.V0_CHAT_FILE_PREFIX)&&(null==O?void 0:O.isAdminMode)&&!h){let e=await (0,s.importChat)({payload:{file:o}});return"error"in e?(H(e.error,l),{status:"error",message:e.error}):(V(),r.toast.success("Chat imported successfully"),B.push("/chat/".concat(e.chatId)),{status:"success"})}if("application/zip"===o.type||"application/x-zip-compressed"===o.type){let e=await o.arrayBuffer(),t={id:l,name:o.name,size:o.size,isImage:!1,tokens:0,v0Type:"zip",url:"",contentType:o.type,content:e,status:"done"};return m.push(t),{status:"success"}}if((0,c.isInlinableImageType)(o.type)){let e=F.image.maxSizeBytes,{short:t,long:n}=F.image.maxDimensionsPixels;if(o.size>e)return H("".concat(o.name," is larger than ").concat((0,c.bytesToMB)(e)),l),{status:"error",message:"".concat(o.name," is larger than ").concat((0,c.bytesToMB)(e))};let r=await M(o),i=Math.max(r.width||0,r.height||0),a=Math.min(r.width||0,r.height||0);if(i>n||a>t)return H("".concat(o.name," exceeds the maximum dimensions. Long side must be less than or equal to ").concat(n,"px and short side must be less than or equal to ").concat(t,"px."),l),{status:"error",message:"".concat(o.name," exceeds the maximum dimensions. Long side must be less than or equal to ").concat(n,"px and short side must be less than or equal to ").concat(t,"px.")}}(0,c.isConvertedToText)(o.type,o.name.split(".").pop())&&(t=await o.text());let d=o.type.startsWith("image/")?f(o):u(t||""),p={id:l,name:o.name,url:URL.createObjectURL(o),content:t,status:"uploading",size:o.size,isImage:o.type.startsWith("image/"),tokens:d,v0Type:o.v0Type};null==k||k(p);let{pathname:g,clientPayload:w}=await E({file:o,component:T});try{n=await (0,i.upload)(g,o,{access:"public",handleUploadUrl:"/chat/api/chat/upload",clientPayload:JSON.stringify(w)})}catch(t){(0,x.track)("FileUploadError",{fileName:o.name,fileType:o.type,errorMsg:String(t)}),console.error("Failed to upload ".concat(o.name,": ").concat(String(t)));let e="Failed to upload file "+o.name;return t instanceof b.BlobContentTypeNotAllowed&&(e="File type not allowed"),H(e,l),{status:"error",message:e}}if(h){var j;(0,x.track)("UploadSource",{projectId:h,extension:null==(j=o.name.split(".").pop())?void 0:j.toLowerCase(),type:o.type});let e={projectId:h,filename:o.name,url:n.url},t=await fetch("/chat/api/projects/sources",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}});if(!t.ok){let e;try{e=(await t.json()).error}catch(t){e="Failed to start file indexing"}return H(e,l),{status:"error",message:e}}}let C={...n,name:o.name,size:o.size,v0Type:o.v0Type},S={...p,status:"done",url:n.url,contentType:n.contentType};return v.push(C),m.push(S),{status:"success"}}for(let r=0;r<e.length;r+=t){let i=e.slice(r,r+t),a=await Promise.allSettled(i.map(l));n.push(...a)}for(let e of n){if("rejected"===e.status){H("Failed to upload file","");continue}if("error"===e.value.status){H(e.value.message,"");continue}}(m.length>0||v.length>0)&&await (null==g?void 0:g(v,m))}catch(e){H("Unexpected error while uploading files","")}finally{R(!1)}null==m||m()},[m,d,T,z,H,F,null==O?void 0:O.isAdminMode,h,k,V,B,g,C]),q=(0,t.useCallback)(async e=>{if(L(!1),e.preventDefault(),e.stopPropagation(),!e.dataTransfer)return;if(!d)return void z({content:!1});let{files:t,items:n}=e.dataTransfer,r=n?await N(Array.from(n)):await N(Array.from(t));r.ok&&await U(r.value)},[d,z,U,L]);return(0,t.useEffect)(()=>{if(S)return;let e=async e=>{if(e.clipboardData){let t=e.clipboardData.items,n=[],r=async()=>{for(let e of t)if("file"===e.kind){let t=e.getAsFile();t&&n.push(t)}n.length>0&&await U(n)};await r()}};return window.addEventListener("paste",e),()=>{window.removeEventListener("paste",e)}},[F.image.maxSizeBytes,d,z,U,S]),(0,t.useEffect)(()=>{let e=document.documentElement;if(D)return;let t=(null==p?void 0:p.current)||window,n=()=>{L(!0)},r=()=>{L(!1)},i=e=>{e.preventDefault(),e.stopPropagation()};return t.addEventListener("dragenter",n),e.addEventListener("mouseleave",r),t.addEventListener("dragover",i),t.addEventListener("drop",q),()=>{t.removeEventListener("dragenter",n),e.removeEventListener("mouseleave",r),t.removeEventListener("dragover",i),t.removeEventListener("drop",q)}},[q,p,D,L]),{isDraggingFile:A,isUploading:P,inputFileRef:_,onInputChange:async e=>{if(!e.target.files)return;let t=await N(Array.from(e.target.files));t.ok&&(await U(t.value),e.target.value="")},uploadFiles:U}};async function N(e){let t=[];if(!(null==e?void 0:e.length))return{ok:!1};let n=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e.isFile)return[await new Promise(t=>e.file(t))];if(e.isDirectory){let r=e.createReader(),i=await new Promise(e=>r.readEntries(e));return(await Promise.all(i.map(r=>n(r,t+e.name+"/")))).flat()}return[]},i=[];for(let n of e)if("webkitGetAsEntry"in n){let e=n.webkitGetAsEntry();e&&i.push(e)}else t.push(n);for(let e of i){let r=await n(e);t.push(...r)}let a=[];for(let e=0;e<t.length;e++){var o;let n=null==(o=t[e].name.split(".").pop())?void 0:o.toLowerCase();if(".DS_Store"!==t[e].name){if(!n)return r.toast.error("Unsupported file type "+n),{ok:!1};a.push(t[e])}}return{ok:!0,value:a}}async function E(e){var t,n;let{file:r,component:i}=e,a=r.name,o=r.type,s=null==(t=r.name.split(".").pop())?void 0:t.toLowerCase();if(r.type.startsWith("image/")){let e=C(new Uint8Array(await r.arrayBuffer()));o=null!=e?e:r.type,s=null!=(n=null==e?void 0:e.split("/")[1])?n:s,a=r.name.endsWith(".".concat(s))?r.name:"".concat(r.name,".").concat(s)}return{pathname:a,clientPayload:{component:i,fileType:o,extension:s}}}let M=e=>new Promise((t,n)=>{let r=new Image;r.onload=()=>{t({width:r.naturalWidth,height:r.naturalHeight})},r.onerror=()=>{n(Error("Failed to load image"))},r.src=URL.createObjectURL(e)});async function I(e){let{file:t,config:n}=e;if(!(0,c.isInlinableImageType)(t.type))return t;let r=n.image.maxSizeBytes;if(t.size<=r)return t;let i=r/t.size+.1,a=null;for(;null===a;)try{let e=await k(t,i,n.image.maxDimensionsPixels.short,n.image.maxDimensionsPixels.long);if(e.size>r)throw Error("File size still too large");(a=e).v0Type=t.v0Type}catch(e){i<=0?a=t:i-=.1}return a}},380105,222199,e=>{"use strict";e.s(["MultiFileCode",()=>Z],380105);var t=e.i(832520),n=e.i(900050),r=e.i(227308),i=e.i(696871),a=e.i(186638),o=e.i(200407),s=e.i(176248),l=e.i(886272),c=e.i(510810),u=e.i(292273),d=e.i(190966),p=e.i(850722),h=e.i(948780),f=e.i(304649),m=e.i(926224),g=e.i(695444),v=e.i(638041),x=e.i(161911),y=e.i(788018),b=e.i(223215),w=e.i(313595),j=e.i(44756),C=e.i(934994),k=e.i(804089),S=e.i(811140),N=e.i(840030),E=e.i(951993),M=e.i(818845),I=e.i(894906),D=e.i(355805),T=e.i(453609),A=e.i(519738),L=e.i(449381);e.s(["createFileInput",()=>z,"uploadFilesToFileTree",()=>F],222199);var P=D,R=e.i(547763),_=e.i(79259),O=e.i(342220);async function F(e){let{files:t,targetDirectory:n,blockId:r,existingFiles:i=[]}=e;try{let e=[],a=0xa00000;for(let o of Array.from(t)){let t;if(o.size>a)return{success:!1,error:"File ".concat(o.name," is too large. Maximum size is ").concat(a/1048576,"MB")};if(!o.name||""===o.name.trim())return{success:!1,error:"File name cannot be empty"};if(o.name.match(/[<>:"/\\|?*]/))return{success:!1,error:'File name "'.concat(o.name,'" contains invalid characters')};let s=n?"".concat(n,"/").concat(o.name):o.name;if(i.some(e=>e.meta.file===s))return{success:!1,error:'File "'.concat(o.name,'" already exists in this directory')};let l=o.name.split(".").pop()||"",c=(0,P.cleanLangNoCustom)(l),u=V(o.name,o.type),d="",p={file:s};if(u)try{let{pathname:e,clientPayload:n}=await (0,_.buildUploadPayload)({file:o,component:"project-source"}),r=await (0,R.upload)(e,o,{access:"public",handleUploadUrl:"/chat/api/chat/upload",clientPayload:JSON.stringify(n)});t=r.url,p.url=r.url}catch(t){let e="Failed to upload binary file ".concat(o.name);return t instanceof O.BlobContentTypeNotAllowedError?e="File type not allowed for ".concat(o.name):t instanceof Error&&(e=t.message),{success:!1,error:e}}else d=await B(o);let h={source:d,meta:p,blockId:r,lang:c,blobUrl:t,isDeleted:!1,isEdit:!1,isMerged:!1,isMoved:!1,isRecovered:!1,isLocked:!1,isFixed:!1,isQuickEdit:!1,isTerminated:!1,isAttachmentQuickEdit:!1,isUserEdit:!0};e.push(h)}return{success:!0,files:e}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Failed to upload files"}}}function V(e,t){let n=e.toLowerCase(),r=[".jpg",".jpeg",".png",".gif",".bmp",".svg",".ico",".webp",".tiff",".tif",".mp4",".mp3",".wav",".avi",".mov",".mkv",".flv",".webm",".ogg",".aac",".pdf",".doc",".docx",".xls",".xlsx",".ppt",".pptx",".zip",".rar",".7z",".tar",".gz",".bz2",".exe",".dll",".so",".dylib",".app",".bin",".dat",".db",".sqlite"].some(e=>n.endsWith(e)),i=t.startsWith("image/")||t.startsWith("audio/")||t.startsWith("video/")||t.startsWith("application/")&&!t.includes("text")||"application/octet-stream"===t;return r||i}async function B(e){return new Promise((t,n)=>{let r=new FileReader;r.onload=()=>{let e=r.result;"string"==typeof e?t(e):n(Error("Failed to read file content"))},r.onerror=()=>{n(Error("Failed to read file"))},r.readAsText(e)})}function z(e){let{multiple:t=!0,accept:n,onFilesSelected:r}=e,i=document.createElement("input");return i.type="file",i.multiple=t,n&&(i.accept=n),i.onchange=e=>{let t=e.target;t.files&&t.files.length>0&&r(t.files),i.value=""},i}e.i(563948);var H=e.i(407562);let U="file-tree-panel-group",q="file-tree-panel-right",W="file-tree-panel-left";function Z(e){let{showDiffInfo:P,activeFilePath:R,initialFileTreeSize:_,setActiveFile:O,children:V,files:B,loadingPath:Z,blockId:G,source:K,onChange:X}=e,[$,Y]=(0,o.useState)(!!((null==B?void 0:B.length)&&B.length>1)),{defaultSizeRef:J,isFallbackSize:Q}=(0,r.usePanelSize)({initialSize:_,fallbackSize:15}),ee=(0,o.useRef)(!1),{setDeleteFileDialogData:et,setShowDeleteFileDialog:en}=(0,j.useDeleteFileDialog)(),{setDeleteFolderDialogData:er,setShowDeleteFolderDialog:ei}=(0,C.useDeleteFolderDialog)(),{setRenameFileDialogData:ea,setShowRenameFileDialog:eo}=(0,S.useRenameFileDialog)(),{setNewFileDialogData:es,setShowNewFileDialog:el}=(0,w.useNewFileDialog)(),{setNewFolderDialogData:ec,setShowNewFolderDialog:eu}=(0,k.useNewFolderDialog)(),{tempFolders:ed,setTempFolders:ep}=(0,k.useTempFolders)({blockId:G}),eh=(0,I.useUpdateBlockData)(G),ef=(0,L.useActiveBlockState)(),{isLatest:em}=(0,A.useBlockVersionInfo)(null==ef?void 0:ef.id);(0,o.useEffect)(()=>{!ee.current&&(null==B?void 0:B.length)&&B.length>1&&Y(!!B.length)},[B]);let eg=(0,o.useMemo)(()=>{let e=B?B.map(e=>["file"in e.meta?e.meta.file:"",e]):[];for(let t of ed||[])e.push([t,null]);let t=[];for(let[n,r]of e){let e=n.split("/"),i=t;for(let[t,n]of e.entries()){let a=t===e.length-1&&null!==r,o=e.slice(0,t+1).join("/"),s=i.find(e=>e.title===n);if(!s){let e={title:n,value:o,isLocked:(null==r?void 0:r.isLocked)||!1,type:a?r.meta.url?"binary":"text":"directory"},t=null==r?void 0:r.originalCode,l=null==r?void 0:r.source;if(a)if(P&&t&&t!==l&&l){let{addedCount:n,removedCount:r}=(0,v.getDiff)(t,l);e.addedCount=n,e.removedCount=r}else P&&l&&!t&&(e.addedCount=l.split("\n").length,e.removedCount=0);else e.items=[];i.push(e),s=e}a||(i=s.items||[])}}return t},[B,P,ed]),ev=(0,o.useMemo)(()=>(0,m.parseMultiFileSource)({source:K,blockType:"code-project",blockId:G}),[K,G]),{handleToggleFileLock:ex,lockingStatus:ey}=(0,M.useToggleFileLock)({sourceFiles:ev,blockId:G,onChange:X}),eb=(0,o.useCallback)(e=>{let{targetDirectory:t}=e;z({multiple:!0,onFilesSelected:async e=>{try{let n=await F({files:e,targetDirectory:t,blockId:G,existingFiles:ev});if(n.success&&n.files){let e=[...ev,...n.files];await eh(e),X(),H.toast.success("Uploaded ".concat(n.files.length," file(s) to ").concat(t||"root"))}else H.toast.error(n.error||"Failed to upload files")}catch(e){H.toast.error("An unexpected error occurred while uploading files"),console.error("File upload error:",e)}}}).click()},[ev,eh,X,G]),ew=(0,o.useCallback)(e=>{let{item:n}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(g.ContextMenuItem,{onSelect:()=>ex({fileNameToEdit:n.value,variant:"single-file"}),children:[n.isLocked?(0,t.jsx)(d.LockOpen,{}):(0,t.jsx)(u.LockClosed,{}),(0,t.jsx)("span",{children:n.isLocked?"Unlock":"Lock"})]}),(0,t.jsxs)(g.ContextMenuItem,{onSelect:()=>ex({mode:"lock",variant:"all-files"}),children:[(0,t.jsx)(N.IconLockFiles,{}),"Lock All"]}),(0,t.jsxs)(g.ContextMenuItem,{onSelect:()=>ex({mode:"unlock",variant:"all-files"}),children:[(0,t.jsx)(E.IconUnlockFiles,{}),"Unlock All"]}),(0,t.jsxs)(g.ContextMenuItem,{onSelect:()=>ex({mode:"lock",variant:"other-files",fileNameToNotLock:n.value}),children:[(0,t.jsx)(T.IconLockOthers,{}),"Lock Other Files"]}),em&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g.ContextMenuSeparator,{}),(0,t.jsxs)(g.ContextMenuItem,{onSelect:()=>{eo(!0),ea({fileName:n.value})},children:[(0,t.jsx)(x.FileEdit,{}),"Rename"]}),(0,t.jsxs)(g.ContextMenuItem,{onSelect:()=>{let e=n.value,t=e.lastIndexOf("/");eb({targetDirectory:t>0?e.substring(0,t):""})},children:[(0,t.jsx)(h.CloudUpload,{}),"Upload Files"]}),(0,t.jsxs)(g.ContextMenuItem,{onSelect:async()=>{try{let e,t=ev.find(e=>e.meta.file===n.value);if(!t)throw Error("File not found");let r=t.meta.file.split("/"),i=r[r.length-1],a=r.length>1?r.slice(0,-1).join("/"):"",o=i.split("."),s=o.reverse().pop()||"",l=o.reverse().join("."),c=s.match(/-copy(-(\d+))?$/),u=s,d=c?c[2]?parseInt(c[2])+1:2:1;do u=c?s.replace(/-copy(-\d+)?$/,"-copy-".concat(d)):"".concat(s,"-copy").concat(d>1?"-".concat(d):""),e="".concat(a?"".concat(a,"/"):"").concat(u).concat(l?".".concat(l):""),d++;while(ev.some(t=>t.meta.file===e))let p={source:t.source,meta:{file:e},blockId:G,lang:(0,D.cleanLangNoCustom)(l),isDeleted:!1,isEdit:!1,isMerged:!1,isMoved:!1,isRecovered:!1,isFixed:!1,isQuickEdit:!1,isTerminated:!1,isAttachmentQuickEdit:!1,isLocked:!1,isUserEdit:!0};if((await eh([...ev,p])).success)X();else throw Error("Failed")}catch(e){throw Error("Failed")}},children:[(0,t.jsx)(c.Layers,{}),(0,t.jsx)("span",{children:"Duplicate"})]})]}),em&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g.ContextMenuSeparator,{}),(0,t.jsxs)(g.ContextMenuItem,{variant:"destructive",onSelect:()=>{en(!0),et({fileName:n.value})},children:[(0,t.jsx)(p.Trash,{}),"Delete"]})]})]})},[em,G,X,et,ea,en,eo,ex,ev,eh,eb]),ej=(0,o.useCallback)(e=>{let{item:n}=e;return(0,t.jsxs)(t.Fragment,{children:[em&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(g.ContextMenuItem,{onSelect:()=>{es({folderName:n.value}),el(!0)},children:[(0,t.jsx)(y.FilePlus,{}),"New File"]}),(0,t.jsxs)(g.ContextMenuItem,{onSelect:()=>{ec({folderName:n.value}),eu(!0)},children:[(0,t.jsx)(l.FolderPlus,{}),"New Folder"]}),(0,t.jsxs)(g.ContextMenuItem,{onSelect:()=>eb({targetDirectory:n.value}),children:[(0,t.jsx)(h.CloudUpload,{}),"Upload Files"]}),(0,t.jsx)(g.ContextMenuSeparator,{})]}),(0,t.jsxs)(g.ContextMenuItem,{onSelect:()=>ex({variant:"folder",mode:"lock",folderName:n.value}),children:[(0,t.jsx)(N.IconLockFiles,{}),"Lock Folder"]}),(0,t.jsxs)(g.ContextMenuItem,{onSelect:()=>ex({variant:"folder",mode:"unlock",folderName:n.value}),children:[(0,t.jsx)(E.IconUnlockFiles,{}),"Unlock Folder"]}),em&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g.ContextMenuSeparator,{}),(0,t.jsxs)(g.ContextMenuItem,{variant:"destructive",onSelect:()=>{ep(e=>(e||[]).filter(e=>e!==n.value)),ei(!0),er({folderName:n.value,source:K})},children:[(0,t.jsx)(p.Trash,{}),"Delete"]})]})]})},[em,er,es,ec,ei,ep,eu,ex,el,K,eb]),eC=(0,o.useCallback)(()=>(0,t.jsxs)(t.Fragment,{children:[em&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(g.ContextMenuItem,{onSelect:()=>{el(!0),es({folderName:""})},children:[(0,t.jsx)(y.FilePlus,{}),"New File"]}),(0,t.jsxs)(g.ContextMenuItem,{onSelect:()=>{eu(!0),ec({folderName:""})},children:[(0,t.jsx)(l.FolderPlus,{}),"New Folder"]}),(0,t.jsxs)(g.ContextMenuItem,{onSelect:()=>eb({targetDirectory:""}),children:[(0,t.jsx)(h.CloudUpload,{}),"Upload Files"]}),(0,t.jsx)(g.ContextMenuSeparator,{})]}),(0,t.jsxs)(g.ContextMenuItem,{onSelect:()=>ex({mode:"lock",variant:"all-files"}),children:[(0,t.jsx)(N.IconLockFiles,{}),"Lock All"]}),(0,t.jsxs)(g.ContextMenuItem,{onSelect:()=>ex({mode:"unlock",variant:"all-files"}),children:[(0,t.jsx)(E.IconUnlockFiles,{}),"Unlock All"]})]}),[em,el,ex,es,eu,ec,eb]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(r.PanelGroup,{isFallbackSize:Q,collapseSide:"left",cookie:i.FILE_TREE_RESIZE_COOKIE,id:U,className:"h-screen w-screen",direction:"horizontal",leftId:W,rightId:q,defaultSizeRef:J,children:[(0,t.jsx)(r.CollapsiblePanel,{className:"z-10 h-full min-w-[160px]",collapseSide:"left",isOpen:$,order:1,defaultSize:J.current,collapseId:W,children:(0,t.jsx)(o.Suspense,{fallback:null,children:(0,t.jsx)("div",{className:"bg-muted flex h-full flex-col",children:(0,t.jsx)(n.FileTree,{loading:Z,active:R,onSelect:O,lockingStatus:ey,className:"w-full flex-1 overflow-y-auto p-1.5 pb-12",items:eg,FileActions:ew,FolderActions:ej,TreeActions:eC})})})}),(0,t.jsx)(a.Panel,{id:q,order:2,defaultSize:$?100-J.current:100,className:"h-full min-w-[200px]",children:V}),(0,t.jsx)(s.Button,{tooltip:"".concat($?"Close":"Open"," File Tree"),className:(0,f.cn)("absolute bottom-2 left-2 z-20 size-7 transition-all",$?"-scale-x-100":""),variant:"secondary",size:"sm",onClick:()=>{ee.current=!0,Y(!$)},children:(0,t.jsx)(b.CollapseArrow,{},"arrow")},"button")]}),(0,t.jsx)(j.DeleteFileDialog,{blockId:G,sourceFiles:ev,onSuccess:()=>{en(!1),X()}}),(0,t.jsx)(C.DeleteFolderDialog,{blockId:G,sourceFiles:ev,onSuccess:()=>{ei(!1),X()}}),(0,t.jsx)(w.NewFileDialog,{blockId:G,sourceFiles:ev,onSuccess:()=>{el(!1),X()}}),(0,t.jsx)(k.NewFolderDialog,{onSuccess:e=>{ep(t=>Array.from(new Set([...t||[],e]))),eu(!1),X()}}),(0,t.jsx)(S.RenameFileDialog,{blockId:G,sourceFiles:ev,onSuccess:e=>{e&&O(e),eo(!1),X()}})]})}},343258,e=>{"use strict";var t=e.i(346970);function n(e){let{blockId:n}=e,{data:r,mutate:i}=(0,t.default)(["block:editValueMap",n],{fallbackData:{}});return{editValueMap:r||{},setEditValueMap:i}}e.s(["useEditValueMap",()=>n])},280738,e=>{"use strict";var t=e.i(832520),n=e.i(304649);function r(e){let{className:r,children:i,bottomBorder:a,onePixelShorter:o}=e;return(0,t.jsx)("div",{className:(0,n.cn)("flex w-full shrink-0 items-center pl-3 pr-2 text-[13px] font-medium text-gray-500",o?"h-[calc(2.25rem-1px)]":"h-9",a&&"border-alpha-200 border-b",r),"data-slot":"block-tab-header",children:i})}e.s(["BlockTabHeader",()=>r])},750955,e=>{"use strict";let t=(0,e.i(605528).withNewIcon)('<path d="M6.0952 9.4643V5.5238H7.6190V10.5476C7.6190 11.1394 7.1394 11.6190 6.5476 11.6190C6.2651 11.6190 5.9862 11.5101 5.7857 11.3096L0 5.5238H2.1548L6.0952 9.4643Z M16 10.0952H14.4762V6.6071L10.9881 10.0952H14.4762V11.6190H10.5238C9.3403 11.6190 8.3810 10.6597 8.3810 9.4762V5.5238H9.9048V9.0238L13.4047 5.5238H9.9048V4H13.8571C15.0407 4 16 4.9594 16 6.1429V10.0952Z" fill="currentColor"/>');e.s(["LogoV0",0,t])},871701,e=>{"use strict";var t=e.i(832520),n=e.i(200407),r=e.i(545858);let i=null,{min:a,max:o,abs:s,floor:l}=Math,c=(e,t,n)=>a(n,o(t,e)),u=e=>[...e].sort((e,t)=>e-t),d="function"==typeof queueMicrotask?queueMicrotask:e=>{Promise.resolve().then(e)},p=e=>{let t,n;return()=>(t||(t=!0,n=e()),n)},h=-1,f=(e,t,n)=>{let r=n?"unshift":"push";for(let n=0;n<t;n++)e[r](h);return e},m=(e,t)=>{let n=e.t[t];return n===h?e.o:n},g=(e,t,n)=>{let r=e.t[t]===h;return e.t[t]=n,e.i=a(t,e.i),r},v=(e,t)=>{if(!e.l)return 0;if(e.i>=t)return e.u[t];e.i<0&&(e.u[0]=0,e.i=0);let n=e.i,r=e.u[n];for(;n<t;)r+=m(e,n),e.u[++n]=r;return e.i=t,r},x=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.l-1;for(;n<=r;){let i=l((n+r)/2),a=v(e,i);if(a<=t){if(a+m(e,i)>t)return i;n=i+1}else r=i-1}return c(n,0,e.l-1)},y=(e,t,n)=>{let r=t-e.l;return e.i=n?-1:a(t-1,e.i),e.l=t,r>0?(f(e.u,r),f(e.t,r,n),e.o*r):(e.u.splice(r),(n?e.t.splice(0,-r):e.t.splice(r)).reduce((t,n)=>t-(n===h?e.o:n),0))},b="undefined"!=typeof window,w=()=>document.documentElement,j=e=>e.ownerDocument,C=e=>e.defaultView,k=p(()=>!!b&&"rtl"===getComputedStyle(w()).direction),S=p(()=>/iP(hone|od|ad)/.test(navigator.userAgent)),N=p(()=>"scrollBehavior"in w().style),E=e=>o(e.h(),e.v()),M=e=>!!e.v(),I=function(e){let t,n,r,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:40,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,p=arguments.length>4?arguments[4]:void 0,b=arguments.length>5&&void 0!==arguments[5]&&arguments[5],w=!!d,j=1,C=0,k=0,N=0,E=0,M=0,I=0,D=0,T=0,A=w?[0,o(d-1,0)]:i,L=[0,0],P=0,R=(t=e,n=l,{o:(r=p)?r[1]:n,t:r&&r[0]?f(r[0].slice(0,a(t,r[0].length)),o(0,t-r[0].length)):f([],t),l:t,i:-1,u:f([],t)}),_=new Set,O=()=>N-k,F=()=>O()+M+E,V=e=>((e,t,n,r)=>{if(r=a(r,e.l-1),v(e,r)<=t){let i=x(e,t+n,r);return[x(e,t,r,i),i]}{let i=x(e,t,void 0,r);return[i,x(e,t+n,i)]}})(R,e,C,L[0]),B=()=>{let e;return(e=R).l?v(e,e.l-1)+m(e,e.l-1):0},z=e=>v(R,e)-M,H=e=>m(R,e),U=e=>{e&&(S()&&0!==D?M+=e:E+=e)};return{p:()=>j,_:()=>{let e;return[(e=R).t.slice(),e.o]},m:()=>{let e,t;return I?[e,t]=L:([e,t]=L=V(o(0,F())),A&&(e=a(e,A[0]),t=o(t,A[1]))),1!==D&&(e-=o(0,c)),2!==D&&(t+=o(0,c)),[o(e,0),a(t,R.l-1)]},S:()=>x(R,F()),$:()=>x(R,F()+C),I:e=>R.t[e]===h,k:()=>!!A&&R.t.slice(o(0,A[0]-1),a(R.l-1,A[1]+1)+1).includes(h),T:z,R:H,M:()=>R.l,C:()=>N,H:()=>0!==D,v:()=>C,W:()=>k,h:B,B:()=>(I=E,E=0,[I,2===T||O()+C>=B()]),J:(e,t)=>{let n=[e,t];return _.add(n),()=>{_.delete(n)}},O:(e,t)=>{let n,r,a=0;switch(e){case 1:{let e=I;I=0;let n=t-N,o=s(n);e&&o<s(e)+1||0!==T||(D=n<0?2:1),w&&(A=i,w=!1),N=t,a=4;let l=O();l>=-C&&l<=B()&&(a+=1,r=o>C);break}case 2:a=8,0!==D&&(n=!0,a+=1),D=0,T=0,A=i;break;case 3:{let e=t.filter(e=>{let[t,n]=e;return R.t[t]!==n});if(!e.length)break;for(let[t,n]of(U(e.reduce((e,t)=>{let[n,r]=t;return(2===T||(A?!w&&n<A[0]:z(n)+(0===D&&0===T?H(n):0)<O()))&&(e+=r-H(n)),e},0)),e)){let e=H(t),r=g(R,t,n);b&&(P+=r?n:n-e)}b&&C&&P>C&&(U(((e,t)=>{let n=0,r=[];e.t.forEach((e,i)=>{e!==h&&(r.push(e),i<t&&n++)}),e.i=-1;let i=u(r),a=i.length,s=a/2|0,l=a%2==0?(i[s-1]+i[s])/2:i[s],c=e.o;return((e.o=l)-c)*o(t-n,0)})(R,x(R,F()))),b=!1),a=3,r=!0;break}case 4:C!==t&&(C=t,a=3);break;case 5:t[1]?(U(y(R,t[0],!0)),T=2):y(R,t[0]),a=1;break;case 6:k=t;break;case 7:T=1;break;case 8:A=V(t),a=1}a&&(j=1+(0x7fffffff&j),n&&M&&(E+=M,M=0),_.forEach(e=>{let[t,n]=e;a&t&&n(r)}))}}},D=setTimeout,T=(e,t)=>t&&k()?-e:e,A=(e,t,n,r,a,o)=>{let s=Date.now,l=0,c=!1,u=!1,d=!1,p=!1,h=(()=>{let t,n=()=>{t!=i&&clearTimeout(t)},r=()=>{n(),t=D(()=>{t=i,(()=>{if(c||u)return c=!1,h();d=!1,e.O(2)})()},150)};return r.L=n,r})(),f=()=>{l=s(),d&&(p=!0),o&&e.O(6,o()),e.O(1,r()),h()},m=t=>{if(c||!e.H()||t.ctrlKey)return;let r=s()-l;150>r&&50<r&&(n?t.deltaX:t.deltaY)&&(c=!0)},g=()=>{u=!0,d=p=!1},v=()=>{u=!1,S()&&(d=!0)};return t.addEventListener("scroll",f),t.addEventListener("wheel",m,{passive:!0}),t.addEventListener("touchstart",g,{passive:!0}),t.addEventListener("touchend",v,{passive:!0}),{P:()=>{t.removeEventListener("scroll",f),t.removeEventListener("wheel",m),t.removeEventListener("touchstart",g),t.removeEventListener("touchend",v),h.L()},A:()=>{let[t,i]=e.B();t&&(a(T(t,n),i,p),p=!1,i&&e.v()>e.h()&&e.O(1,r()))}}},L=(e,t)=>{let n,r,i,a=t?"scrollLeft":"scrollTop",o=t?"overflowX":"overflowY",s=async(r,o)=>{if(!n)return void d(()=>s(r,o));i&&i();let l=()=>{let t;return[new Promise((n,r)=>{t=n,i=r,M(e)&&D(r,150)}),e.J(2,()=>{t&&t()})]};if(o&&N()){for(;e.O(8,r()),e.k();){let[e,t]=l();try{await e}catch(e){return}finally{t()}}n.scrollTo({[t?"left":"top"]:T(r(),t),behavior:"smooth"})}else for(;;){let[i,o]=l();try{n[a]=T(r(),t),e.O(7),await i}catch(e){return}finally{o()}}};return{V(s){n=s,r=A(e,s,t,()=>T(s[a],t),(t,n,r)=>{if(r){let e=s.style,t=e[o];e[o]="hidden",D(()=>{e[o]=t})}n?(s[a]=e.C()+t,i&&i()):s[a]+=t})},X(){r&&r.P()},Y(e){s(()=>e)},j(t){t+=e.C(),s(()=>t)},q(t){let{align:n,smooth:r,offset:i=0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t=c(t,0,e.M()-1),"nearest"===n){let r=e.T(t),i=e.C();if(r<i)n="start";else{if(!(r+e.R(t)>i+e.v()))return;n="end"}}s(()=>i+e.W()+e.T(t)+("end"===n?e.R(t)-e.v():"center"===n?(e.R(t)-e.v())/2:0),r)},D:()=>{r&&r.A()}}},P=(e,t)=>{let n,r,i,a=function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=r?"offsetLeft":"offsetTop",s=i+(r&&k()?n.innerWidth-e[o]-e.offsetWidth:e[o]),l=e.offsetParent;return e!==t&&l?a(l,t,n,r,s):s},o=async(r,a)=>{if(!n)return void d(()=>o(r,a));i&&i();let s=()=>{let t;return[new Promise((n,r)=>{t=n,i=r,M(e)&&D(r,150)}),e.J(2,()=>{t&&t()})]},l=C(j(n));if(a&&N()){for(;e.O(8,r()),e.k();){let[e,t]=s();try{await e}catch(e){return}finally{t()}}l.scroll({[t?"left":"top"]:T(r(),t),behavior:"smooth"})}else for(;;){let[n,i]=s();try{l.scroll({[t?"left":"top"]:T(r(),t)}),e.O(7),await n}catch(e){return}finally{i()}}};return{V(i){n=i;let o=t?"scrollX":"scrollY",s=j(i),l=C(s),c=s.body;r=A(e,l,t,()=>T(l[o],t),(n,r)=>{r?l.scroll({[t?"left":"top"]:e.C()+n}):l.scrollBy(t?n:0,t?0:n)},()=>a(i,c,l,t))},X(){r&&r.P(),n=void 0},D:()=>{r&&r.A()},q(r){let{align:i,smooth:s,offset:l=0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!n)return;if(r=c(r,0,e.M()-1),"nearest"===i){let t=e.T(r),n=e.C();if(t<n)i="start";else{if(!(t+e.R(r)>n+e.v()))return;i="end"}}let u=j(n),d=C(u),p=u.documentElement,h=()=>e.v()-(t?p.clientWidth:p.clientHeight);o(()=>l+a(n,u.body,d,t)+e.T(r)+("end"===i?e.R(r)-(e.v()-h()):"center"===i?(e.R(r)-(e.v()-h()))/2:0),s)}}},R=(e,t)=>{let n=L(e,!1),r=L(t,!0);return{V(e){n.V(e),r.V(e)},X(){n.X(),r.X()},Y(e,t){n.Y(t),r.Y(e)},j(e,t){n.j(t),r.j(e)},q(e,t){n.q(t),r.q(e)},D(){n.D(),r.D()}}},_=e=>{let t;return{U(n){(t||(t=new(C(j(n))).ResizeObserver(e))).observe(n)},F(e){t.unobserve(e)},P(){t&&t.disconnect()}}},O=(e,t)=>{let n,r=t?"width":"height",a=new WeakMap,o=_(t=>{let o=[];for(let{target:s,contentRect:l}of t)if(s.offsetParent)if(s===n)e.O(4,l[r]);else{let e=a.get(s);e!=i&&o.push([e,l[r]])}o.length&&e.O(3,o)});return{G(e){o.U(n=e)},K:(e,t)=>(a.set(e,t),o.U(e),()=>{a.delete(e),o.F(e)}),X:o.P}},F=(e,t)=>{let n,r=t?"width":"height",a=t?"innerWidth":"innerHeight",o=new WeakMap,s=_(t=>{let n=[];for(let{target:e,contentRect:a}of t){if(!e.offsetParent)continue;let t=o.get(e);t!=i&&n.push([t,a[r]])}n.length&&e.O(3,n)});return{G(t){let r=C(j(t)),i=()=>{e.O(4,r[a])};r.addEventListener("resize",i),i(),n=()=>{r.removeEventListener("resize",i)}},K:(e,t)=>(o.set(e,t),s.U(e),()=>{o.delete(e),s.F(e)}),X(){n&&n(),s.P()}}},V=(e,t)=>{let n,r="height",i="width",a=new WeakMap,s=new Set,l=new Set,c=new Map,u=(e,t)=>"".concat(e,"-").concat(t),d=_(d=>{let p=new Set,h=new Set;for(let{target:o,contentRect:s}of d)if(o.offsetParent)if(o===n)e.O(4,s[r]),t.O(4,s[i]);else{let e=a.get(o);if(e){let t,n,[a,o]=e,l=u(a,o),d=c.get(l),f=[s[r],s[i]];d?(d[0]!==f[0]&&(t=!0),d[1]!==f[1]&&(n=!0)):t=n=!0,t&&p.add(a),n&&h.add(o),(t||n)&&c.set(l,f)}}if(p.size){let t=[];p.forEach(e=>{let n=0;l.forEach(t=>{let r=c.get(u(e,t));r&&(n=o(n,r[0]))}),n&&t.push([e,n])}),e.O(3,t)}if(h.size){let e=[];h.forEach(t=>{let n=0;s.forEach(e=>{let r=c.get(u(e,t));r&&(n=o(n,r[1]))}),n&&e.push([t,n])}),t.O(3,e)}});return{G(e){d.U(n=e)},K:(e,t,n)=>(a.set(e,[t,n]),s.add(t),l.add(n),d.U(e),()=>{a.delete(e),d.F(e)}),X:d.P}},B=b?n.useLayoutEffect:n.useEffect,z="current",H=(e,t)=>{if(Array.isArray(e))for(let n of e)H(n,t);else null==e||"boolean"==typeof e||t.push(e)},U=(e,t)=>{let n=e.key;return null!=n?n:"_"+t},q=e=>{let t=(0,n.useRef)();return t[z]||(t[z]=e())},W=e=>{let t=(0,n.useRef)(e);return B(()=>{t[z]=e},[e]),t},Z=(0,n.memo)(e=>{let{N:r,Z:i,ee:a,te:o,ne:s,oe:l,re:c,ie:u}=e,d=(0,n.useRef)(null);B(()=>i(d[z],a),[a]);let p=(0,n.useMemo)(()=>{let e={position:s&&u?void 0:"absolute",[c?"height":"width"]:"100%",[c?"top":"left"]:0,[c?k()?"right":"left":"top"]:o,visibility:!s||u?"visible":"hidden"};return c&&(e.display="flex"),e},[o,s,u,c]);return(0,t.jsx)(l,"string"==typeof l?{ref:d,style:p,children:r}:{ref:d,style:p,index:a,children:r})}),G=(e,t)=>(0,n.useMemo)(()=>{if("function"==typeof e)return[e,t||0];let n=(e=>{let t=[];return H(e,t),t})(e);return[e=>n[e],n.length]},[e,t]),K=(0,n.forwardRef)((e,i)=>{let{children:a,count:o,overscan:s,itemSize:l,shift:c,horizontal:p,keepMounted:h,cache:f,startMargin:m=0,ssrCount:g,as:v="div",item:x="div",scrollRef:y,onScroll:b,onScrollEnd:w}=e,[j,C]=G(a,o),k=(0,n.useRef)(null),S=(0,n.useRef)(!!g),N=W(b),M=W(w),[D,T,A,P]=q(()=>{let e=!!p,t=I(C,l,s,g,f,!l);return[t,O(t,e),L(t,e),e]});C!==D.M()&&D.O(5,[C,c]),m!==D.W()&&D.O(6,m);let[R,_]=(0,n.useReducer)(D.p,void 0,D.p),[F,V]=D.m(),H=D.H(),K=D.h(),X=[],$=e=>{let n=j(e);return(0,t.jsx)(Z,{Z:T.K,ee:e,te:D.T(e),ne:D.I(e),oe:x,N:n,re:P,ie:S[z]},U(n,e))};B(()=>{S[z]=!1;let e=D.J(1,e=>{e?(0,r.flushSync)(_):_()}),t=D.J(4,()=>{N[z]&&N[z](D.C())}),n=D.J(8,()=>{M[z]&&M[z]()}),i=e=>{T.G(e),A.V(e)};return y?d(()=>i(y[z])):i(k[z].parentElement),()=>{e(),t(),n(),T.X(),A.X()}},[]),B(()=>{A.D()},[R]),(0,n.useImperativeHandle)(i,()=>({get cache(){return D._()},get scrollOffset(){return D.C()},get scrollSize(){return E(D)},get viewportSize(){return D.v()},findStartIndex:D.S,findEndIndex:D.$,getItemOffset:D.T,getItemSize:D.R,scrollToIndex:A.q,scrollTo:A.Y,scrollBy:A.j}),[]);for(let e=F,t=V;e<=t;e++)X.push($(e));if(h){let e=[],t=[];u(h).forEach(n=>{n<F&&e.push($(n)),n>V&&t.push($(n))}),X.unshift(...e),X.push(...t)}return(0,t.jsx)(v,{ref:k,style:{overflowAnchor:"none",flex:"none",position:"relative",visibility:"hidden",width:P?K:"100%",height:P?"100%":K,pointerEvents:H?"none":void 0},children:X})}),X=((e,r)=>{let{children:i,count:a,overscan:o,itemSize:s,shift:l,horizontal:c,keepMounted:u,reverse:d,cache:p,ssrCount:h,item:f,onScroll:m,onScrollEnd:g,style:v,...x}=e,y=(0,n.useRef)(null),b=d&&!c,w=(0,t.jsx)(K,{ref:r,scrollRef:b?y:void 0,count:a,overscan:o,itemSize:s,shift:l,horizontal:c,keepMounted:u,cache:p,ssrCount:h,item:f,onScroll:m,onScrollEnd:g,children:i});return b&&(w=(0,t.jsx)("div",{style:{visibility:"hidden",display:"flex",flexDirection:"column",justifyContent:"flex-end",minHeight:"100%"},children:w})),(0,t.jsx)("div",{ref:y,...x,style:{display:c?"inline-block":"block",[c?"overflowX":"overflowY"]:"auto",contain:"strict",width:"100%",height:"100%",...v},children:w})},(e,t)=>"".concat(e,"-").concat(t)),$=(0,n.memo)(e=>{let{N:r,Z:i,se:a,le:o,ce:s,de:l,fe:c,ue:u,ne:d,ae:p}=e,h=(0,n.useRef)(null);return B(()=>i.K(h[z],a,o),[o,a]),(0,t.jsx)(p,{ref:h,style:(0,n.useMemo)(()=>({display:"grid",position:"absolute",top:s,[k()?"right":"left"]:l,visibility:d?"hidden":"visible",minHeight:c,minWidth:u}),[s,l,u,c,d]),children:r})});(e,i)=>{let{children:a,row:o,col:s,cellHeight:l=40,cellWidth:c=100,overscan:u=2,initialRowCount:d,initialColCount:p,item:h="div",onScroll:f,onScrollEnd:m,style:g,...v}=e,[x,y,b,w]=q(()=>{let e=I(o,l,u,d),t=I(s,c,u,p);return[e,t,V(e,t),R(e,t)]});o!==x.M()&&x.O(5,[o]),s!==y.M()&&y.O(5,[s]);let[j,C]=(0,n.useReducer)(x.p,void 0,x.p),[k,S]=(0,n.useReducer)(y.p,void 0,y.p),[N,M]=x.m(),[D,T]=y.m(),A=x.H(),L=y.H(),P=E(x),_=E(y),O=(0,n.useRef)(null),F=W(f),H=W(m);B(()=>{let e=O[z],t=x.J(1,e=>{e?(0,r.flushSync)(C):C()}),n=y.J(1,e=>{e?(0,r.flushSync)(S):S()}),i=x.J(4,()=>{F[z]&&F[z](x.C())}),a=x.J(8,()=>{H[z]&&H[z]()});return b.G(e),w.V(e),()=>{t(),n(),b.X(),w.X(),i(),a()}},[]),B(()=>{w.D()},[j,k]),(0,n.useImperativeHandle)(i,()=>({get scrollTop(){return x.C()},get scrollLeft(){return y.C()},get scrollHeight(){return E(x)},get scrollWidth(){return E(y)},get viewportHeight(){return x.v()},get viewportWidth(){return y.v()},scrollToIndex:w.q,scrollTo:w.Y,scrollBy:w.j}),[]);let U=(0,n.useMemo)(()=>{let e=new Map;return(t,n)=>{let r=e.get(X(t,n));return r||e.set(X(t,n),r=a({rowIndex:t,colIndex:n})),r}},[a]),Z=[];for(let e=N;e<=M;e++)for(let n=D;n<=T;n++)Z.push((0,t.jsx)($,{Z:b,se:e,le:n,ce:x.T(e),de:y.T(n),fe:x.R(e),ue:y.R(n),ne:x.I(e)||y.I(n),ae:h,N:U(e,n)},X(e,n)));return(0,t.jsx)("div",{ref:O,...v,style:{overflow:"auto",contain:"strict",width:"100%",height:"100%",...g},children:(0,t.jsx)("div",{style:{overflowAnchor:"none",flex:"none",position:"relative",visibility:"hidden",width:_,height:P,pointerEvents:A||L?"none":void 0},children:Z})})},e.s(["Virtualizer",()=>K])},936990,e=>{"use strict";var t=e.i(346970),n=e.i(242759),r=e.i(667660);function i(e){let{tbb:i}=(0,n.useFlags)(),{activeScope:a}=(0,r.useActiveScope)(),{data:o,error:s,isLoading:l,isValidating:c,mutate:u}=(0,t.default)(i?["/chat/api/plan-info",a]:null,async e=>{let[t]=e,n=await fetch(t);if(!n.ok){let e=n.headers.get("content-type");if(e&&-1!==e.indexOf("application/json"))throw Error((await n.json()).message||"Failed to get plan info");throw Error("Failed to get plan info: ".concat(n.status," ").concat(n.statusText))}return n.json()},{revalidateOnFocus:!1,...e});return{planInfo:o,error:s,isLoading:l,isValidating:c,mutate:u}}e.s(["useTokenBillingPlanInfo",()=>i])},739976,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.parse=c,n.serialize=p;let r=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/,i=/^("?)[\u0021\u0023-\u002B\u002D-\u003A\u003C-\u005B\u005D-\u007E]*\1$/,a=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,o=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,l=(()=>{let e=function(){};return e.prototype=Object.create(null),e})();function c(e,t){let n=new l,r=e.length;if(r<2)return n;let i=(null==t?void 0:t.decode)||h,a=0;do{let t=e.indexOf("=",a);if(-1===t)break;let o=e.indexOf(";",a),s=-1===o?r:o;if(t>s){a=e.lastIndexOf(";",t-1)+1;continue}let l=u(e,a,t),c=d(e,t,l),p=e.slice(l,c);if(void 0===n[p]){let r=u(e,t+1,s),a=d(e,s,r),o=i(e.slice(r,a));n[p]=o}a=s+1}while(a<r)return n}function u(e,t,n){do{let n=e.charCodeAt(t);if(32!==n&&9!==n)return t}while(++t<n)return n}function d(e,t,n){for(;t>n;){let n=e.charCodeAt(--t);if(32!==n&&9!==n)return t+1}return n}function p(e,t,n){let s=(null==n?void 0:n.encode)||encodeURIComponent;if(!r.test(e))throw TypeError("argument name is invalid: ".concat(e));let l=s(t);if(!i.test(l))throw TypeError("argument val is invalid: ".concat(t));let c=e+"="+l;if(!n)return c;if(void 0!==n.maxAge){if(!Number.isInteger(n.maxAge))throw TypeError("option maxAge is invalid: ".concat(n.maxAge));c+="; Max-Age="+n.maxAge}if(n.domain){if(!a.test(n.domain))throw TypeError("option domain is invalid: ".concat(n.domain));c+="; Domain="+n.domain}if(n.path){if(!o.test(n.path))throw TypeError("option path is invalid: ".concat(n.path));c+="; Path="+n.path}if(n.expires){if(!f(n.expires)||!Number.isFinite(n.expires.valueOf()))throw TypeError("option expires is invalid: ".concat(n.expires));c+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(c+="; HttpOnly"),n.secure&&(c+="; Secure"),n.partitioned&&(c+="; Partitioned"),n.priority)switch("string"==typeof n.priority?n.priority.toLowerCase():n.sameSite){case"low":c+="; Priority=Low";break;case"medium":c+="; Priority=Medium";break;case"high":c+="; Priority=High";break;default:throw TypeError("option priority is invalid: ".concat(n.priority))}if(n.sameSite)switch("string"==typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":c+="; SameSite=Strict";break;case"lax":c+="; SameSite=Lax";break;case"none":c+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid: ".concat(n.sameSite))}return c}function h(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(t){return e}}function f(e){return"[object Date]"===s.call(e)}},912074,e=>{"use strict";var t=e.i(739976),n=e.i(139505);e.i(665632);var r=n;function i(e){return e.startsWith(r.ANON_ID_PREFIX)}function a(e){if(!i(e))throw Error("Invalid anonId: ".concat(e))}let o=null,s={};function l(){if("undefined"==typeof document)return;o!==document.cookie&&(o=document.cookie,s=(0,t.parse)(o));let e=s[n.ANON_COOKIE_NAME_DO_NOT_USE_OR_YOU_WILL_BE_FIRED];if(e)return a(e),e}e.s(["getAnonId",()=>l],912074)},745197,525258,e=>{"use strict";var t=e.i(162061),n=e.i(346970),r=e.i(914483),i=e.i(696871),a=e.i(200407),o=e.i(206037),s=e.i(936990),l=e.i(667660),c=e.i(912074),u=e.i(242759),d=e.i(152641),p=e.i(457456),h=e.i(780292),f=u,m=i;function g(){let e=(0,p.getGlobalAtoms)(),{dmule:t}=(0,f.useFlags)(),n=(0,h.useAtomValue)(e.dailyModelUsageRateLimit),{updateDailyModelUsage:r}=(0,p.getGlobalActions)(),{isValidating:i}=(0,d.useServerQuerySWR)(["global","dailyModelUsage"],{},{noRevalidate:!0,revalidateOnFocus:!1});return{isValidating:i,updateDailyModelUsage:t?r:e=>{},...!t?{remaining:m.DAILY_MODEL_USAGE_LIMIT,usage:0,limit:m.DAILY_MODEL_USAGE_LIMIT}:n}}e.s(["useDailyModelUsage",()=>g],525258);let v=(e,t)=>fetch("".concat(e,"?scope=").concat(t)).then(e=>e.json());function x(){var e;let{tbb:t}=(0,u.useFlags)(),{activeScopeSlug:r}=(0,l.useActiveScope)(),i=(0,c.getAnonId)(),o=null!=(e=null!=r?r:i)?e:void 0,{data:s,mutate:d}=(0,n.default)(o&&!t?["/chat/api/rate-limit",o]:null,()=>{if(o)return v("/chat/api/rate-limit",o)});return[s,(0,a.useCallback)(()=>d(e=>{if(void 0!==e)return{...e,remaining:Math.max(e.remaining-1,0)}},{revalidate:!1}),[d])]}function y(){let{tbb:e}=(0,u.useFlags)(),[c]=x(),{isTeam:d,user:p,isActiveScopeReady:h}=(0,l.useActiveScope)(),{planSlug:f}=(0,o.usePlanInfo)(h&&!d,null==p?void 0:p.id,!1),{planInfo:m}=(0,s.useTokenBillingPlanInfo)(),v="v0-level0"===f,{remaining:y}=g(),{data:b,mutate:w}=(0,n.default)("show-daily-usage-upgrade-banner",{fallbackData:!1}),[j,C]=(0,r.useGetSet)("show-upgrade-banner-limit",!1),[k,S]=(0,r.useGetSet)("show-upgrade-banner-general",!1);(0,a.useLayoutEffect)(()=>{if(!f){C(!1),S(!1),w(!1);return}let n=t.default.get(i.DISMISSED_DAILY_UPGRADE_CTA_COOKIE),r=t.default.get(i.DISMISSED_DAILY_MODEL_USAGE_UPGRADE_CTA_COOKIE),a=m?(m.onDemand.balance||0)+(m.balance.remaining||0):void 0,o=!(c&&0===c.remaining||"number"==typeof a&&a<=0)&&"1"===n,s="1"===t.default.get(i.DISMISSED_GENERAL_UPGRADE_CTA_COOKIE),l=!(y<=i.SHOW_NON_DISMISSABLE_UPGRADE_CTA_THRESHOLD_DAILY_MODEL_USAGE)&&(y>i.SHOW_DISMISSABLE_UPGRADE_CTA_THRESHOLD_DAILY_MODEL_USAGE||"1"===r),u=!o&&(c&&c.remaining<i.SHOW_UPGRADE_CTA_THRESHOLD_MESSAGES||e&&"number"==typeof a&&a<i.SHOW_UPGRADE_CTA_THRESHOLD_CREDITS),d=v&&!l,p=c&&c.limit-c.remaining>=1,h=v&&!s&&(p||e);C(null!=u&&u),S(null!=h&&h),w(d)},[c,S,C,w,v,d,f,p,m,e,y]);let N=(0,a.useCallback)(()=>{C(!1),t.default.set(i.DISMISSED_DAILY_UPGRADE_CTA_COOKIE,"1",{expires:1})},[C]),E=(0,a.useCallback)(()=>{S(!1),t.default.set(i.DISMISSED_GENERAL_UPGRADE_CTA_COOKIE,"1",{expires:5})},[S]),M=(0,a.useCallback)(()=>{w(!1),t.default.set(i.DISMISSED_DAILY_MODEL_USAGE_UPGRADE_CTA_COOKIE,"1",{expires:1})},[w]);return{showBannerLimit:j,showBannerGeneral:k,showDailyUsageBannerLimit:b,remaining:null==c?void 0:c.remaining,dismissBannerLimit:N,dismissBannerGeneral:E,dismissDailyUsageBanner:M,userOnFree:v,dailyUsageRemaining:y}}e.s(["useRateLimit",()=>x,"useShowUpgradeBanner",()=>y],745197)},282931,e=>{"use strict";var t=e.i(832520),n=e.i(66920),r=e.i(996174),i=e.i(304649),a=e.i(745197),o=e.i(297239);let s="scroll-down-button";function l(e){let{scrollToBottom:l,hidden:c,className:u,...d}=e,p=(0,o.useT)(),{showBannerLimit:h,showBannerGeneral:f}=(0,a.useShowUpgradeBanner)(),m=h||f;return(0,t.jsx)("div",{id:s,"aria-hidden":c,className:(0,i.cn)("animate-in fade-in slide-in-from-bottom absolute inset-x-0 -top-12 z-10 m-auto flex w-fit items-center justify-center group-has-data-[slot=prompt-actions-container]/form-container:-top-20",c&&"animate-out fade-out slide-out-to-bottom fill-mode-forwards pointer-events-none",m&&"-top-16",u),...d,children:(0,t.jsx)(r.Tooltip,{content:!c&&(0,t.jsx)(r.TooltipContent,{side:"top",sideOffset:14,children:p("scrollDownButton.scrollToBottom")}),children:(0,t.jsx)("button",{className:(0,i.cn)("animate-slow-bounce shadow-base bg-background hover:bg-muted flex size-7 items-center justify-center rounded-full text-gray-500 drop-shadow-md",c&&"hidden"),onClick:e=>{e.stopPropagation(),l()},type:"button",children:(0,t.jsx)(n.ChevronDownIcon,{className:"size-5"})})})})}e.s(["SCROLL_DOWN_BUTTON_ID",0,s,"ScrollDownButton",()=>l])},360174,(e,t,n)=>{var r=e.r(987325),i=e.r(791606),a="Expected a function";t.exports=function(e,t,n){var o=!0,s=!0;if("function"!=typeof e)throw TypeError(a);return i(n)&&(o="leading"in n?!!n.leading:o,s="trailing"in n?!!n.trailing:s),r(e,t,{leading:o,maxWait:t,trailing:s})}},807260,e=>{"use strict";e.s(["useVirtualScroll",()=>c]);var t=e.i(832520),n=e.i(200407),r=e.i(92479),i=e.i(449381),a=e.i(480118),o=e.i(584497),s=e.i(282931),l=e.i(360174);function c(e){let{count:c,pushToBottom:u}=e,d=(0,n.useRef)(null),p=(0,n.useRef)(null),h=(0,n.useRef)(null),{messages:f,activeForkKey:m}=(0,r.useChatMessages)(),{hashMessageId:g}=(0,r.useChatHashNavigation)(),v=(0,i.useActiveBlockView)(),x=(0,a.usePathname)(),{setMetadata:y}=(0,o.useChatMetadata)(),{chatId:b}=(0,r.useChatId)(),[w,j]=(0,n.useState)(!1),[C,k]=(0,n.useState)(!0),S=(0,n.useCallback)((e,t,n)=>{var r;let i=!n&&e>=(null!=t?t:c)-1;null==(r=h.current)||r.scrollToIndex(e,{align:i?"end":"start",smooth:!0}),setTimeout(()=>{i&&p.current&&p.current.scrollTo({top:p.current.scrollHeight-p.current.clientHeight+1,behavior:"smooth"})},0)},[c]),N=(0,n.useRef)(null),E=(0,n.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!n){if(N.current===e)return;N.current=e}let i=new Set(null!=r?r:m||[]),a=f.filter(e=>i.has(e.id)).findIndex(t=>t.id===e);-1!==a&&setTimeout(()=>S(a,null==r?void 0:r.length,n),t)},[f,S,m]),M=(0,n.useCallback)(()=>!!h.current&&h.current.scrollOffset+h.current.viewportSize+20>h.current.scrollSize,[]),I=(0,n.useCallback)(()=>{k(M())},[M]),D=(0,l.default)(I,100);(0,n.useEffect)(()=>{let e=e=>{e.preventDefault();let t=window.location.hash.slice(1);t&&E(t)},t=e=>{var t;let n=e.target.closest("a");if(n&&(null==(t=n.getAttribute("href"))?void 0:t.startsWith("#"))){e.preventDefault(),e.stopPropagation();let t=n.getAttribute("href").slice(1);window.history.pushState(null,"","".concat(x,"#").concat(t)),window.scrollTo(0,0),E(t)}},n=d.current;window.addEventListener("hashchange",e),null==n||n.addEventListener("click",t);let r=p.current?new ResizeObserver(D):void 0;return null==r||r.observe(p.current),window.location.hash?E(window.location.hash.slice(1),250*!!v):g&&E(g,0),()=>{window.removeEventListener("hashchange",e),null==n||n.removeEventListener("click",t),null==r||r.disconnect()}},[v,x,E,y,g,D]);let T=(0,n.useCallback)(()=>{S(c-1),setTimeout(()=>{S(c)},150)},[c,S]),A=(0,n.useRef)(!0),L=(0,n.useRef)(null);(0,n.useEffect)(()=>{if(!h.current||!A.current||window.location.hash&&N.current!==window.location.hash)return;let e="".concat(c,"-").concat(b);L.current!==e&&(L.current=e,S(c))},[c,b,S]),(0,n.useEffect)(()=>{var e;u&&(null==(e=h.current)||e.scrollToIndex(c,{align:"end"}))},[c,u]);let P=C||w;return{containerRef:p,vlistRef:h,scrollToBottom:T,scrollToHash:E,scrollDownButton:(0,n.useMemo)(()=>(0,t.jsx)(s.ScrollDownButton,{hidden:P,scrollToBottom:()=>{j(!0),S(c-1),j(!1)}}),[P,S,c]),handleScroll:I}}},65151,e=>{"use strict";var t=e.i(53223);function n(e){let n=i(e),r=new Blob([n],{type:"text/plain"}),a=URL.createObjectURL(r),o=document.createElement("a");return o.download="output.txt",o.href=a,o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(a),(0,t.track)("DownloadOutputExecutable",{output:n})}function r(e,n){try{let r=e.startsWith("image/")&&!e.includes("svg")?new Blob([Uint8Array.from(atob(n),e=>e.charCodeAt(0))],{type:e}):new Blob([n],{type:e}),i=URL.createObjectURL(r),a=document.createElement("a");a.href=i;let o=e.split("/")[1]||"txt";return a.download="output.".concat(o.startsWith("svg")?"svg":o),a.click(),URL.revokeObjectURL(i),(0,t.track)("DownloadOutputExecutable",{output:"".concat(e," attachment")})}catch(e){console.error("error downloading image: ",e)}}let i=e=>{if(!e)return"No output.";if("error"in e)return"Errored output. "+e.error;if(!Array.isArray(e.stdout)||!Array.isArray(e.stderr))return"Malformed output.";if(0===e.stdout.length&&0===e.stderr.length)return"Empty output.";let t=e.stdout.map(e=>e.map(e=>JSON.stringify(e,void 0,2)).join(" ")).join("\n"),n=e.stderr.map(e=>e.map(e=>JSON.stringify(e,void 0,2)).join(" ")).join("\n");return 0===e.stderr.length?t:0===e.stdout.length?"# stderr\n\n"+n:"# stdout\n\n"+t+"\n\n# stderr\n\n"+n};e.s(["downloadAsFile",()=>n,"downloadAttachment",()=>r,"getOutputString",()=>i])},265281,e=>{"use strict";e.s(["ConsoleViewer",()=>w]);var t=e.i(832520),n=e.i(200407);e.i(541536);var r=e.i(23474),i=e.i(176248),a=e.i(304649),o=e.i(280738),s=e.i(638200),l=e.i(230902),c=e.i(750955),u=e.i(449381),d=e.i(70165),p=e.i(110909),h=e.i(53223),f=e.i(504066),m=e.i(871701),g=e.i(807260),v=e.i(65151),x=e.i(418929);function y(e){let{event:n,canWriteToChat:r,onAskV0:a}=e;return(0,t.jsxs)("div",{className:"flex items-start gap-4 px-2 py-1 font-mono text-sm",children:[(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("time",{className:"text-[13px]",children:[(0,l.format)(new Date(n.timestamp),"HH:mm:ss.SSS"),"Z"]}),n.isServer&&(0,t.jsx)("span",{className:"rounded-full bg-gray-100 px-2 py-0.5 text-xs font-medium text-gray-600",children:"[SERVER]"})]}),(0,t.jsx)("div",{className:"w-full flex-1 whitespace-pre-wrap text-[13px]",children:n.message}),r&&"error"===n.method&&(0,t.jsx)("div",{className:"absolute right-3 top-0.5 opacity-0 transition-opacity group-hover:opacity-100",children:(0,t.jsxs)(i.Button,{onClick:()=>a(n),size:"sm",variant:"secondary",className:"h-[24px] gap-0.5 rounded-md border-none px-1.5 py-0.5 font-sans text-[13px] font-medium shadow-sm",children:["Ask ",(0,t.jsx)(c.LogoV0,{className:"ml-0.5 h-3 w-3"})]})})]})}function b(e){let{event:r,activeFilePath:i,setActiveFilePath:a}=e,o=n.default.useMemo(()=>{try{let e=JSON.parse(r.content);return"string"==typeof e?e:r.content}catch(e){return r.content}},[r.content]),{isCopied:s,copyToClipboard:l,copyImageToClipboard:c}=(0,f.useCopyToClipboard)({timeout:2e3}),u=async e=>{if(s)return;if(r.attachment){let{mimeType:e,data:t}=r.attachment;return e.startsWith("image/")?await c(t,e):await l(t),(0,h.track)("CopyOutputExecutable",{output:"".concat(e," attachment")})}let t=(0,v.getOutputString)(e);return await l(t),(0,h.track)("CopyOutputExecutable",{output:t})},d=async()=>{if(!r.attachment)return(0,v.downloadAsFile)(m());{let{mimeType:e,data:t}=r.attachment;return(0,v.downloadAttachment)(e,t)}},m=()=>({stdout:"stdout"===r.method?[[o]]:[],stderr:"stderr"===r.method?[[o]]:[]}),g=()=>{if(!r.attachment)return(0,t.jsx)(t.Fragment,{});let{mimeType:e,data:n}=r.attachment;if(e.startsWith("image/")){let r="image/svg+xml"===e?"data:".concat(e,",").concat(encodeURIComponent(n)):"data:".concat(e,";base64,").concat(n);return(0,t.jsx)("div",{className:"mt-2 max-w-lg",children:(0,t.jsx)("img",{src:r,alt:"Execution output",className:"max-h-96 w-full rounded-md border object-contain",style:{imageRendering:"auto"}})})}return(0,t.jsx)("pre",{className:"whitespace-pre-wrap break-words",children:n})};return(0,t.jsxs)(p.CodeOutputMessage,{fileName:r.fileName,isCopied:s,handleCopy:()=>void u(m()),handleDownload:()=>void d(),handleFileOpen:()=>{i!==r.fileName&&(null==a||a(r.fileName))},children:["string"==typeof o?(0,t.jsx)("pre",{className:"whitespace-pre-wrap break-words",children:o}):(0,t.jsx)(p.JsonRowView,{src:o,className:"[&_.jv-chevron]:ml-1 [&_.jv-chevron]:inline-block [&_.jv-chevron]:size-3 [&_.jv-chevron]:text-gray-500 [&_.jv-indent]:pl-4",style:"stderr"===r.method?{color:"rgb(192,27,93)"}:void 0}),g()]})}function w(e){let{consoleEvents:n,clearLogs:r,canWriteToChat:l,hideHeader:c,className:h,activeFilePath:f,setActiveFilePath:v}=e,{actions:w}=(0,x.useCurrentChatPrompt)(),{handleInputChange:j,focusPrompt:C}=w,k=(0,u.useSetActiveBlockView)(),{containerRef:S,vlistRef:N,handleScroll:E,scrollDownButton:M}=(0,g.useVirtualScroll)({count:n.length,pushToBottom:!0}),I=e=>{j({initialValue:"The code has the following ".concat(e.method,":\n```\n").concat("console"===e.type?e.message:e.content,"\n```\nRevise the code to address this issue."),force:!0,save:!0}),C(),(0,d.getIsMobile)()&&k(!1)};return(0,t.jsxs)("div",{className:(0,a.cn)("bg-muted flex size-full flex-col items-stretch overflow-hidden",h),children:[!c&&(0,t.jsxs)(o.BlockTabHeader,{className:"justify-between gap-1",bottomBorder:!0,children:[(0,t.jsx)("h3",{className:"text-[13px] font-medium",children:"Console"}),(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsxs)("div",{className:"text-xs",children:[(0,t.jsxs)("span",{children:[n.length," "]}),(0,t.jsx)("span",{children:1===n.length?"event":"events"})]}),(0,t.jsx)("div",{className:"ml-1 h-[16px] w-px bg-gray-200","aria-hidden":!0}),(0,t.jsx)(i.Button,{variant:"ghost",size:"xs",className:"text-gray-500",tooltip:"Clear console output",onClick:r,disabled:0===n.length,children:(0,t.jsx)(s.AnimatedTrash,{})})]})]}),(0,t.jsxs)("div",{className:"relative size-full",style:{contain:"strict"},children:[(0,t.jsx)("div",{className:"h-full w-full overflow-y-auto",ref:S,style:{overflowAnchor:"none"},children:(0,t.jsx)("div",{className:"mx-auto w-full",children:0===n.length?(0,t.jsx)("div",{className:"flex h-full items-center justify-center p-8",children:(0,t.jsx)("div",{className:"text-center text-sm text-gray-500",children:"No logs available to display"})}):(0,t.jsx)(m.Virtualizer,{scrollRef:S,ref:N,onScroll:E,children:n.map((e,n)=>(0,t.jsx)("div",{className:(0,a.cn)("group relative flex min-h-[24px] items-center",(0,p.getEventStyle)(e.method)),children:"console"===e.type?(0,t.jsx)(y,{event:e,canWriteToChat:l,onAskV0:I}):(0,t.jsx)(b,{event:e,activeFilePath:f,setActiveFilePath:v})},"".concat(e.timestamp,"-").concat(n)))})})}),n.length>0?(0,t.jsx)("div",{className:"sticky inset-x-0 bottom-2 z-50 flex justify-center",children:M}):null]})]})}r.z.object({type:r.z.literal("output"),blockId:r.z.string(),fileName:r.z.string(),content:r.z.string(),timestamp:r.z.string(),method:r.z.enum(["stdout","stderr"]),attachment:r.z.object({mimeType:r.z.string(),data:r.z.string()}).optional()})},298450,e=>{"use strict";var t=e.i(200407),n=e.i(346970);function r(e){let{data:r,mutate:i}=(0,n.default)(["block:consoleEvents",e],{fallbackData:{}});return{blockStatus:null!=r?r:{},flagNewEvent:(0,t.useCallback)(t=>i(n=>({...n,[e]:n&&"error"===n[e]?"error":t})),[e,i]),clearEvents:(0,t.useCallback)(()=>i(t=>{let n={...t};return n[e]=null,n}),[e,i])}}e.s(["useNewConsoleEvents",()=>r])},359783,e=>{"use strict";var t=e.i(832520),n=e.i(200407);let r=(0,n.createContext)({});function i(e){let{children:n}=e;return(0,t.jsx)(r.Provider,{value:{},children:n})}function a(){return(0,n.use)(r)}e.s(["DataProvider",()=>i,"useClientGlobalData",()=>a])},917806,930293,e=>{"use strict";e.i(133473);let t=new WeakMap,n=new WeakSet,r=new WeakMap;function i(e){let t="";for(let n=0;n<e.length;n++){let r=e.charCodeAt(n).toString(16);r.length<2&&(r="0"+r),t+=r}return BigInt("0x"+t).toString(36)}function a(e,t){return e?e.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-").substring(0,t).replace(/^-+|-+$/g,""):""}function o(e,t){let{disableLocalhost:n=!1,isPlatformAPI:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=i(e),s=a(t||"",54-o.length),l="";if(l=r?s?"demo-".concat(s,"-").concat(o):"demo-".concat(o):s?"preview-".concat(s,"-").concat(o):"preview-".concat(o),"generated.vusercontent.net".endsWith(".vercel.sh")){let e="generated.vusercontent.net".split(".")[0].replace(/^v0-frame-/g,"");return c("".concat(o,"--").concat(e,".dev-lite.vusercontent.net"))}return c("".concat(l,".vusercontent.net"))}function s(e,t){return o("vm:".concat(e,":").concat(t))}function l(e){let{disableLocalhost:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.replace(/_/g,"--").replace(/[^a-zA-Z0-9-]/g,"").replace(/-+$/,"");if("generated.vusercontent.net".endsWith(".vercel.sh")){let e="generated.vusercontent.net".split(".")[0].replace(/^v0-frame-/g,"");return c("".concat(e,"--").concat(n,".dev.vusercontent.net"))}return c("g-".concat(n,".vusercontent.net"))}function c(e){let t=new URL("https://example.com");return t.hostname=e,t.origin}function u(e,n){if(!e)return;let r=t.get(e);r?r.push(n):t.set(e,[n]),d(e)}function d(e){if(!n.has(e))return;let r=t.get(e);if(r){for(let t of r){var i;null==(i=e.contentWindow)||i.postMessage(t,e.dataset.origin||"")}r.length=0}}let p=[];function h(e,t){let n=r.get(e)||Math.random().toString();return r.set(e,n),p.push({id:n,listener:t}),()=>{let e=p.findIndex(e=>e.listener===t);e>=0&&p.splice(e,1)}}{let e=e=>{if(!(e.origin===l("any")||e.origin.endsWith(".vusercontent.net"))||!e.source)return;let t=Array.from(document.querySelectorAll("iframe[data-v0]")).find(t=>t instanceof HTMLIFrameElement&&t.contentWindow===e.source);if(!t)return;n.add(t),d(t),window.debug&&console.log("child event handler",e.data);let i=r.get(t);for(let t of p)i===t.id&&t.listener(e.data)};window.addEventListener("message",e)}e.s(["getIframeOrigin",()=>l,"getLiteIframeOrigin",()=>o,"getVMIframeOrigin",()=>s,"listenToIframe",()=>h,"sendData",()=>u],917806);var f=e.i(375465),m=e.i(359783);let g=e=>{let t=(0,m.useClientGlobalData)(),n=t.globalSessionTokenCache||(t.globalSessionTokenCache=new Map),{data:r,error:i}=(0,f.default)(e?"frame-token:".concat(e):null,async()=>{let t=await fetch("/chat/api/chat/frame-token?cid=".concat(e));if(!t.ok)throw Error("Failed to fetch session token");return t.text()});return"string"!=typeof r||"string"!=typeof e||n.has(e)||n.set(e,r),{token:e?n.get(e):void 0,error:i}};e.s(["useSessionTokenForFrame",0,g],930293)},259112,e=>{"use strict";class t{options(e){return e&&(this.selfOptions=e),this.selfOptions}pipe(e,t){let n=t;if("string"==typeof e)if(void 0===n)return this.pipes[e];else this.pipes[e]=n;if(e&&e.name){if((n=e).processor===this)return n;this.pipes[n.name]=n}return n.processor=this,n}process(e,t){let n,r=e;r.options=this.options();let i=t||e.pipe||"default";for(;i;)void 0!==r.nextAfterChildren&&(r.next=r.nextAfterChildren,r.nextAfterChildren=null),"string"==typeof i&&(i=this.pipe(i)),i.process(r),n=i,i=null,r&&r.next&&(i=(r=r.next).pipe||n);return r.hasResult?r.result:void 0}constructor(e){this.selfOptions=e||{},this.pipes={}}}let n=t;class r{process(e){if(!this.processor)throw Error("add this pipe to a processor before using it");let t=this.debug,n=this.filters.length,r=e;for(let e=0;e<n;e++){let n=this.filters[e];if(t&&this.log("filter: ".concat(n.filterName)),n(r),"object"==typeof r&&r.exiting){r.exiting=!1;break}}!r.next&&this.resultCheck&&this.resultCheck(r)}log(e){console.log("[jsondiffpatch] ".concat(this.name," pipe, ").concat(e))}append(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.filters.push(...t),this}prepend(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.filters.unshift(...t),this}indexOf(e){if(!e)throw Error("a filter name is required");for(let t=0;t<this.filters.length;t++)if(this.filters[t].filterName===e)return t;throw Error("filter not found: ".concat(e))}list(){return this.filters.map(e=>e.filterName)}after(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let i=this.indexOf(e);return this.filters.splice(i+1,0,...n),this}before(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let i=this.indexOf(e);return this.filters.splice(i,0,...n),this}replace(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let i=this.indexOf(e);return this.filters.splice(i,1,...n),this}remove(e){let t=this.indexOf(e);return this.filters.splice(t,1),this}clear(){return this.filters.length=0,this}shouldHaveResult(e){if(!1===e){this.resultCheck=null;return}if(!this.resultCheck)return this.resultCheck=e=>{if(!e.hasResult){console.log(e);let t=Error("".concat(this.name," failed"));throw t.noResult=!0,t}},this}constructor(e){this.name=e,this.filters=[]}}let i=r;class a{setResult(e){return this.result=e,this.hasResult=!0,this}exit(){return this.exiting=!0,this}push(e,t){return e.parent=this,void 0!==t&&(e.childName=t),e.root=this.root||this,e.options=e.options||this.options,this.children?(this.children[this.children.length-1].next=e,this.children.push(e)):(this.children=[e],this.nextAfterChildren=this.next||null,this.next=e),e.next=this,this}}function o(e){let t=/^\/(.*)\/([gimyu]*)$/.exec(e.toString());return new RegExp(t[1],t[2])}function s(e){if("object"!=typeof e)return e;if(null===e)return null;if(Array.isArray(e))return e.map(s);if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return o(e);let t={};for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=s(e[n]));return t}class l extends a{setResult(e){if(this.options.cloneDiffValues&&"object"==typeof e){let t="function"==typeof this.options.cloneDiffValues?this.options.cloneDiffValues:s;"object"==typeof e[0]&&(e[0]=t(e[0])),"object"==typeof e[1]&&(e[1]=t(e[1]))}return super.setResult(e)}constructor(e,t){super(),this.left=e,this.right=t,this.pipe="diff"}}let c=l;class u extends a{constructor(e,t){super(),this.left=e,this.delta=t,this.pipe="patch"}}let d=u;class p extends a{constructor(e){super(),this.delta=e,this.pipe="reverse"}}let h=p,f=function(e){if(e.left===e.right)return void e.setResult(void 0).exit();if(void 0===e.left){if("function"==typeof e.right)throw Error("functions are not supported");e.setResult([e.right]).exit();return}if(void 0===e.right)return void e.setResult([e.left,0,0]).exit();if("function"==typeof e.left||"function"==typeof e.right)throw Error("functions are not supported");return(e.leftType=null===e.left?"null":typeof e.left,e.rightType=null===e.right?"null":typeof e.right,e.leftType!==e.rightType||"boolean"===e.leftType||"number"===e.leftType||("object"===e.leftType&&(e.leftIsArray=Array.isArray(e.left)),"object"===e.rightType&&(e.rightIsArray=Array.isArray(e.right)),e.leftIsArray!==e.rightIsArray))?void e.setResult([e.left,e.right]).exit():void(e.left instanceof RegExp&&(e.right instanceof RegExp?e.setResult([e.left.toString(),e.right.toString()]).exit():e.setResult([e.left,e.right]).exit()))};f.filterName="trivial";let m=function(e){if(void 0===e.delta)return void e.setResult(e.left).exit();if(e.nested=!Array.isArray(e.delta),e.nested)return;let t=e.delta;if(1===t.length)return void e.setResult(t[0]).exit();if(2===t.length){if(e.left instanceof RegExp){let n=/^\/(.*)\/([gimyu]+)$/.exec(t[1]);if(n)return void e.setResult(new RegExp(n[1],n[2])).exit()}e.setResult(t[1]).exit();return}3===t.length&&0===t[2]&&e.setResult(void 0).exit()};m.filterName="trivial";let g=function(e){if(void 0===e.delta)return void e.setResult(e.delta).exit();if(e.nested=!Array.isArray(e.delta),e.nested)return;let t=e.delta;return 1===t.length?void e.setResult([t[0],0,0]).exit():2===t.length?void e.setResult([t[1],t[0]]).exit():void(3===t.length&&0===t[2]&&e.setResult([t[0]]).exit())};g.filterName="trivial";let v=e=>{let t;if(!e||!e.children)return;let n=e.children.length,r=e.result;for(let i=0;i<n;i++)void 0!==(t=e.children[i]).result&&((r=r||{})[t.childName]=t.result);r&&e.leftIsArray&&(r._t="a"),e.setResult(r).exit()};v.filterName="collectChildren";let x=e=>{let t,n;if(e.leftIsArray||"object"!==e.leftType)return;let r=e.left,i=e.right,a=e.options.propertyFilter;for(t in r)Object.prototype.hasOwnProperty.call(r,t)&&(!a||a(t,e))&&(n=new c(r[t],i[t]),e.push(n,t));for(t in i)Object.prototype.hasOwnProperty.call(i,t)&&(!a||a(t,e))&&void 0===r[t]&&(n=new c(void 0,i[t]),e.push(n,t));if(!e.children||0===e.children.length)return void e.setResult(void 0).exit();e.exit()};x.filterName="objects";let y=function(e){let t,n;if(!e.nested)return;let r=e.delta;if(r._t)return;let i=r;for(t in i)n=new d(e.left[t],i[t]),e.push(n,t);e.exit()};y.filterName="objects";let b=function(e){let t;if(!e||!e.children||e.delta._t)return;let n=e.left,r=e.children.length;for(let i=0;i<r;i++){let r=(t=e.children[i]).childName;Object.prototype.hasOwnProperty.call(e.left,r)&&void 0===t.result?delete n[r]:n[r]!==t.result&&(n[r]=t.result)}e.setResult(n).exit()};b.filterName="collectChildren";let w=function(e){let t,n;if(!e.nested||e.delta._t)return;let r=e.delta;for(t in r)n=new h(r[t]),e.push(n,t);e.exit()};w.filterName="objects";let j=e=>{let t;if(!e||!e.children||e.delta._t)return;let n=e.children.length,r={};for(let i=0;i<n;i++){let n=(t=e.children[i]).childName;r[n]!==t.result&&(r[n]=t.result)}e.setResult(r).exit()};j.filterName="collectChildren";let C=function(e,t,n,r){return e[n]===t[r]},k=function(e,t,n,r){let i,a,o=e.length,s=t.length,l=Array(o+1);for(i=0;i<o+1;i++)for(a=0,l[i]=Array(s+1);a<s+1;a++)l[i][a]=0;for(i=1,l.match=n;i<o+1;i++)for(a=1;a<s+1;a++)n(e,t,i-1,a-1,r)?l[i][a]=l[i-1][a-1]+1:l[i][a]=Math.max(l[i-1][a],l[i][a-1]);return l},S=function(e,t,n,r){let i=t.length,a=n.length,o={sequence:[],indices1:[],indices2:[]};for(;0!==i&&0!==a;)e.match(t,n,i-1,a-1,r)?(o.sequence.unshift(t[i-1]),o.indices1.unshift(i-1),o.indices2.unshift(a-1),--i,--a):e[i][a-1]>e[i-1][a]?--a:--i;return o},N={get:function(e,t,n,r){let i=r||{};return S(k(e,t,n||C,i),e,t,i)}},E=3;function M(e,t,n,r){for(let i=0;i<n;i++){let n=e[i];for(let e=0;e<r;e++){let r=t[e];if(i!==e&&n===r)return!0}}}function I(e,t,n,r,i){let a=e[n],o=t[r];if(a===o)return!0;if("object"!=typeof a||"object"!=typeof o)return!1;let s=i.objectHash;if(!s)return i.matchByPosition&&n===r;i.hashCache1=i.hashCache1||[];let l=i.hashCache1[n];if(void 0===l&&(i.hashCache1[n]=l=s(a,n)),void 0===l)return!1;i.hashCache2=i.hashCache2||[];let c=i.hashCache2[r];return void 0===c&&(i.hashCache2[r]=c=s(o,r)),void 0!==c&&l===c}let D=function(e){let t,n,r,i,a;if(!e.leftIsArray)return;let o={objectHash:e.options&&e.options.objectHash,matchByPosition:e.options&&e.options.matchByPosition},s=0,l=0,u=e.left,d=e.right,p=u.length,h=d.length;for(p>0&&h>0&&!o.objectHash&&"boolean"!=typeof o.matchByPosition&&(o.matchByPosition=!M(u,d,p,h));s<p&&s<h&&I(u,d,s,s,o);)i=new c(u[t=s],d[t]),e.push(i,t),s++;for(;l+s<p&&l+s<h&&I(u,d,p-1-l,h-1-l,o);)n=p-1-l,r=h-1-l,i=new c(u[n],d[r]),e.push(i,r),l++;if(s+l===p){if(p===h)return void e.setResult(void 0).exit();for(a=a||{_t:"a"},t=s;t<h-l;t++)a[t]=[d[t]];return void e.setResult(a).exit()}if(s+l===h){for(a=a||{_t:"a"},t=s;t<p-l;t++)a["_".concat(t)]=[u[t],0,0];e.setResult(a).exit();return}delete o.hashCache1,delete o.hashCache2;let f=u.slice(s,p-l),m=d.slice(s,h-l),g=N.get(f,m,I,o),v=[];for(a=a||{_t:"a"},t=s;t<p-l;t++)0>g.indices1.indexOf(t-s)&&(a["_".concat(t)]=[u[t],0,0],v.push(t));let x=!0;e.options&&e.options.arrays&&!1===e.options.arrays.detectMove&&(x=!1);let y=!1;e.options&&e.options.arrays&&e.options.arrays.includeValueOnMove&&(y=!0);let b=v.length;for(t=s;t<h-l;t++){let l=g.indices2.indexOf(t-s);if(l<0){let l=!1;if(x&&b>0){for(let p=0;p<b;p++)if(I(f,m,(n=v[p])-s,t-s,o)){a["_".concat(n)].splice(1,2,t,E),y||(a["_".concat(n)][0]=""),r=t,i=new c(u[n],d[r]),e.push(i,r),v.splice(p,1),l=!0;break}}l||(a[t]=[d[t]])}else n=g.indices1[l]+s,r=g.indices2[l]+s,i=new c(u[n],d[r]),e.push(i,r)}e.setResult(a).exit()};D.filterName="arrays";let T={numerically:(e,t)=>e-t,numericallyBy:e=>(t,n)=>t[e]-n[e]},A=function(e){let t,n,r;if(!e.nested)return;let i=e.delta;if("a"!==i._t)return;let a=i,o=e.left,s=[],l=[],c=[];for(t in a)if("_t"!==t)if("_"===t[0]){let e=t;if(0===a[e][2]||a[e][2]===E)s.push(parseInt(t.slice(1),10));else throw Error("only removal or move can be applied at original array indices,"+" invalid diff type: ".concat(a[e][2]))}else{let e=t;1===a[e].length?l.push({index:parseInt(e,10),value:a[e][0]}):c.push({index:parseInt(e,10),delta:a[e]})}for(t=(s=s.sort(T.numerically)).length-1;t>=0;t--){n=s[t];let e=a["_".concat(n)],r=o.splice(n,1)[0];e[2]===E&&l.push({index:e[1],value:r})}let u=(l=l.sort(T.numericallyBy("index"))).length;for(t=0;t<u;t++){let e=l[t];o.splice(e.index,0,e.value)}let p=c.length;if(p>0)for(t=0;t<p;t++){let n=c[t];r=new d(o[n.index],n.delta),e.push(r,n.index)}if(!e.children)return void e.setResult(o).exit();e.exit()};A.filterName="arrays";let L=function(e){let t;if(!e||!e.children||"a"!==e.delta._t)return;let n=e.left,r=e.children.length;for(let i=0;i<r;i++)n[(t=e.children[i]).childName]=t.result;e.setResult(n).exit()};L.filterName="arraysCollectChildren";let P=function(e){let t,n;if(!e.nested){let t=e.delta;if(t[2]===E){let n=t;e.newName="_".concat(n[1]),e.setResult([n[0],parseInt(e.childName.substring(1),10),E]).exit()}return}let r=e.delta;if("a"!==r._t)return;let i=r;for(t in i)"_t"!==t&&(n=new h(i[t]),e.push(n,t));e.exit()};P.filterName="arrays";let R=(e,t,n)=>{if("string"==typeof t&&"_"===t[0])return parseInt(t.substring(1),10);if(Array.isArray(n)&&0===n[2])return"_".concat(t);let r=+t;for(let n in e){let i=e[n];if(Array.isArray(i))if(i[2]===E){let e=parseInt(n.substring(1),10),a=i[1];if(a===+t)return e;e<=r&&a>r?r++:e>=r&&a<r&&r--}else 0===i[2]?parseInt(n.substring(1),10)<=r&&r++:1===i.length&&parseInt(n,10)<=r&&r--}return r},_=e=>{let t;if(!e||!e.children)return;let n=e.delta;if("a"!==n._t)return;let r=n,i=e.children.length,a={_t:"a"};for(let n=0;n<i;n++){let i=(t=e.children[n]).newName;void 0===i&&(i=R(r,t.childName,t.result)),a[i]!==t.result&&(a[i]=t.result)}e.setResult(a).exit()};_.filterName="arraysCollectChildren";let O=function(e){e.left instanceof Date?(e.right instanceof Date?e.left.getTime()!==e.right.getTime()?e.setResult([e.left,e.right]):e.setResult(void 0):e.setResult([e.left,e.right]),e.exit()):e.right instanceof Date&&e.setResult([e.left,e.right]).exit()};O.filterName="dates";let F=2,V=60,B=null;function z(e,t){var n;if(!B){let r;if(null==(n=null==e?void 0:e.textDiff)?void 0:n.diffMatchPatch)r=new e.textDiff.diffMatchPatch;else{if(!t)return null;let e=Error("The diff-match-patch library was not provided. Pass the library in through the options or use the `jsondiffpatch/with-text-diffs` entry-point.");throw e.diff_match_patch_not_found=!0,e}B={diff:function(e,t){return r.patch_toText(r.patch_make(e,t))},patch:function(e,t){let n=r.patch_apply(r.patch_fromText(t),e);for(let e=0;e<n[1].length;e++)n[1][e]||(Error("text patch failed").textPatchFailed=!0);return n[0]}}}return B}let H=function(e){if("string"!==e.leftType)return;let t=e.left,n=e.right,r=e.options&&e.options.textDiff&&e.options.textDiff.minLength||V;if(t.length<r||n.length<r)return void e.setResult([t,n]).exit();let i=z(e.options);if(!i)return void e.setResult([t,n]).exit();let a=i.diff;e.setResult([a(t,n),0,F]).exit()};H.filterName="texts";let U=function(e){if(e.nested)return;let t=e.delta;if(t[2]!==F)return;let n=t,r=z(e.options,!0).patch;e.setResult(r(e.left,n[0])).exit()};U.filterName="texts";let q=function(e){let t,n,r,i,a=null,o=/^@@ +-(\d+),(\d+) +\+(\d+),(\d+) +@@$/,s=e.split("\n");for(t=0,n=s.length;t<n;t++){let e=(r=s[t]).slice(0,1);"@"===e?(a=o.exec(r),s[t]="@@ -"+a[3]+","+a[4]+" +"+a[1]+","+a[2]+" @@"):"+"===e?(s[t]="-"+s[t].slice(1),"+"===s[t-1].slice(0,1)&&(i=s[t],s[t]=s[t-1],s[t-1]=i)):"-"===e&&(s[t]="+"+s[t].slice(1))}return s.join("\n")},W=function(e){if(e.nested)return;let t=e.delta;if(t[2]!==F)return;let n=t;e.setResult([q(n[0]),0,F]).exit()};W.filterName="texts";class Z{options(e){return this.processor.options(e)}diff(e,t){return this.processor.process(new c(e,t))}patch(e,t){return this.processor.process(new d(e,t))}reverse(e){return this.processor.process(new h(e))}unpatch(e,t){return this.patch(e,this.reverse(t))}clone(e){return s(e)}constructor(e){this.processor=new n(e),this.processor.pipe(new i("diff").append(v,f,O,H,x,D).shouldHaveResult()),this.processor.pipe(new i("patch").append(b,L,m,U,y,A).shouldHaveResult()),this.processor.pipe(new i("reverse").append(j,_,g,W,w,P).shouldHaveResult())}}let G=Z,K=function(e){return new G(e)}({});function X(e,t){let n=K.clone(e);if(Array.isArray(t)&&9===t[1]&&9===t[2]){let e=t[0].slice(0,-1),r=t[0].slice(-1),i=n;for(let t of e){if("string"==typeof i[t])return i[t]+=r,n;i=i[t]}}return K.patch(n,t),n}e.s(["patch",()=>X],259112)},230869,e=>{"use strict";var t=e.i(696871);function n(e){var n,r,i;let a={isLlmError:!1,isRetried:!1,errorCategory:void 0};if("string"==typeof e)a.isLlmError=e.startsWith(t.LLM_ERROR_PREFIX),a.isRetried=e.endsWith(t.LLM_ERROR_RETRY_SUFFIX),a.errorCategory=null!=(r=e.split(":")[1])?r:"default";else if(null==(n=e.finishReason)?void 0:n.includes("provider_server_error")){let t=e.finishReason.startsWith("retry_provider_server_error"),n=t||!!e.finishReason.startsWith("provider_server_error");a.isLlmError=n,a.isRetried=t,n&&(a.errorCategory=null!=(i=e.finishReason.split(":")[1])?i:"default")}return a}e.s(["isLlmError",()=>n])},85989,306244,967122,664470,246338,e=>{"use strict";async function t(e){return new Promise((t,n)=>{let r=new FileReader;r.onload=e=>{var n;t(null==(n=e.target)?void 0:n.result)},r.onerror=e=>n(e),r.readAsDataURL(e)})}e.s(["readFileAsDataURL",()=>t],85989);let n=new Map;function r(e,t){let r=n.get(e);r&&r.abort();let i=new AbortController;n.set(e,i);let a=i.signal;return a.onabort=()=>{n.delete(e),null==t||t()},a}function i(e){let t=n.get(e);t&&(t.abort(),n.delete(e))}function a(e){n.delete(e)}e.s(["abortKey",()=>i,"createNewAbortSignalForKey",()=>r,"removeAbortController",()=>a],306244),e.s(["useActiveBlockIdRef",()=>p],967122);var o=e.i(449381),s=e.i(200407),l=s,c=e.i(346970);function u(e){let t=(0,l.useRef)(void 0),{data:n,mutate:r}=(0,c.default)(e);return(0,l.useEffect)(()=>{n||r(t)},[n,r]),n}function d(e,t){let n=u(e);return(0,s.useEffect)(()=>{n&&(n.current=t)},[n,t]),n}function p(){let e=(0,o.useActiveBlockState)();return d("activeBlockIdRef",null==e?void 0:e.id)}var h=e.i(547259),f=(0,h.createServerReference)("00f02af6bb0bcde2d9f434f47a6478a31021ead79c",h.callServer,void 0,h.findSourceMapURL,"invalidateRouterCache");function m(e){if(!e||/[^0-9-\s]+/.test(e)||"0000000000000000"===e)return!1;let t=0,n=!1;e=e.replace(/\D/g,"");for(let r=e.length-1;r>=0;r--){let i=parseInt(e.charAt(r),10);n&&(i*=2)>9&&(i-=9),t+=i,n=!n}return t%10==0}function g(e){let t=/\b(?:\d{4}[-\s]?){3}\d{4}\b/g;return(e.match(t)||[]).filter(m).length>0}e.s(["invalidateRouterCache",()=>f],664470),e.s(["hasCreditCards",()=>g],246338)},244760,(e,t,n)=>{!function(n,r){t.exports=r(e.r(200407))}(e.e,e=>(()=>{"use strict";var t={729:e=>{var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function a(e,t,r,a,o){if("function"!=typeof r)throw TypeError("The listener must be a function");var s=new i(r,a||e,o),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,a=r.length,o=Array(a);i<a;i++)o[i]=r[i].fn;return o},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,i,a,o){var s=n?n+e:e;if(!this._events[s])return!1;var l,c,u=this._events[s],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,i),!0;case 5:return u.fn.call(u.context,t,r,i,a),!0;case 6:return u.fn.call(u.context,t,r,i,a,o),!0}for(c=1,l=Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var p,h=u.length;for(c=0;c<h;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,r);break;case 4:u[c].fn.call(u[c].context,t,r,i);break;default:if(!l)for(p=1,l=Array(d-1);p<d;p++)l[p-1]=arguments[p];u[c].fn.apply(u[c].context,l)}}return!0},s.prototype.on=function(e,t,n){return a(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return a(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,i){var a=n?n+e:e;if(!this._events[a])return this;if(!t)return o(this,a),this;var s=this._events[a];if(s.fn)s.fn!==t||i&&!s.once||r&&s.context!==r||o(this,a);else{for(var l=0,c=[],u=s.length;l<u;l++)(s[l].fn!==t||i&&!s[l].once||r&&s[l].context!==r)&&c.push(s[l]);c.length?this._events[a]=1===c.length?c[0]:c:o(this,a)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&o(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s},639:t=>{t.exports=e}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var a=n[e]={exports:{}};return t[e](a,a.exports,r),a.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}r.r(i),r.d(i,{createEvent:()=>M});var t,n=r(729),a=r.n(n),o=r(639),s=!("undefined"==typeof window||null==(t=window.document)||!t.createElement),l=s?o.useLayoutEffect:o.useEffect,c=function(e){var t=(0,o.useRef)(function(){throw Error("Cannot call an event handler during the first render.")});return l(function(){t.current=e}),(0,o.useCallback)(function(){for(var e,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return null==(e=t.current)?void 0:e.apply(null,r)},[])},u=function(e){var t=c(e);l(function(){return window.addEventListener("storage",t),function(){window.removeEventListener("storage",t)}},[t])},d=function(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()},p="react-event-hook:undefined",h=Error("The input value could not be serialized"),f=function e(t){try{var n=d(t),r=JSON.stringify(t,function(e,t){return void 0===t?p:t}),i=m(r);if(d(i)!==n)throw h;return"object"===n&&Object.values(t).forEach(function(t){return e(t)}),"array"===n&&t.forEach(function(t){return e(t)}),r}catch(e){throw h}},m=function(e){return JSON.parse(e,function(e,t){if(t!==p)return t})},g=function(){return"".concat(Date.now(),":").concat(parseInt(Math.random().toString().replace(".",""),10))},v=function(e,t){return f({id:g(),name:e,payload:t})},x=function(e){var t=m(e);return{name:t.name,payload:t.payload}},y="react-event-hook";function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var j=function(e){var t;return[null==(t=e[0])?void 0:t.toUpperCase(),e.slice(1)].join("")},C=["-","_",":","/","."," "],k=function(e){return j(e.toLowerCase())},S=function e(t){var n=w(t.split(new RegExp("[".concat(C.join(""),"](.*)"))),2),r=n[0],i=n[1];return void 0!==r&&void 0!==i?"".concat(k(r)).concat(e(i)):!function(e){return e.toUpperCase()===e&&e.toLowerCase()!==e}(t)?j(t):k(t)},N=new(a()),E=new Map,M=function(t){return function(){var n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.crossTab,a=void 0!==i&&i,o=t.trim(),d=S(o),p="use".concat(d,"Listener"),h="emit".concat(d),f=g(),m=function(){E.has(o)&&E.get(o),E.set(o,f)},b=function(e){var t=c(e);u(function(t){if(a&&t.newValue&&t.key===y){var n=x(t.newValue);n.name===o&&e(n.payload)}}),l(function(){return N.addListener(o,t),function(){N.removeListener(o,t)}},[t])},w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.broadcast,r=void 0!==n&&n;if(s&&(m(),r||N.emit(o,e),a))try{var i=v(o,e);try{window.localStorage.setItem(y,i)}catch(e){}}catch(e){throw Error('Could not emit "'.concat(o,'" event. The event payload might contain values that cannot be serialized.'))}},j=function(e){return w(e)};return j.broadcast=function(e){return w(e,{broadcast:!0})},e(n={},p,b),e(n,h,j),n}}})(),i})())},18547,e=>{"use strict";let{useChatMessageFinishedListener:t,emitChatMessageFinished:n}=(0,e.i(244760).createEvent)("chatMessageFinished")();e.s(["emitChatMessageFinished",0,n,"useChatMessageFinishedListener",0,t])},726988,e=>{"use strict";var t=e.i(346970),n=e.i(183673),r=e.i(200407);function i(e){let{vercelProjectId:i,v0ProjectId:a,refreshInterval:o=0}=e,{refetchVercelProject:s}=(0,n.useVercelProject)({v0ProjectId:a}),l=new URLSearchParams;l.set("projectId",null!=i?i:"");let{data:c,error:u,isLoading:d,mutate:p}=(0,t.default)(i?"/chat/api/integrations/marketplace/storage?".concat(l.toString()):null,async e=>{let t=await fetch(e);if(!t.ok)throw Error("Failed to fetch storage stores");return t.json()},{refreshInterval:o,revalidateOnReconnect:!0,keepPreviousData:!0});return{stores:{data:(0,r.useMemo)(()=>({marketplaceStores:(null==c?void 0:c.marketplaceStores)||[],nativeStores:(null==c?void 0:c.nativeStores)||[]}),[null==c?void 0:c.marketplaceStores,null==c?void 0:c.nativeStores]),isLoading:d,error:u||null,refetch:async()=>{await Promise.all([p(),s()])}},isLoading:d,error:u||null,refetch:async()=>await Promise.all([p(),s()])}}e.s(["useConnectedIntegrations",()=>i])},199929,e=>{"use strict";var t=e.i(832520),n=e.i(304649);function r(e){let{className:r,...i}=e;return(0,t.jsx)("div",{className:(0,n.cn)("flex items-center gap-4 sm:gap-4",r),...i})}function i(e){let{className:r,...i}=e;return(0,t.jsx)("div",{className:(0,n.cn)("flex-1 flex flex-col gap-0.5",r),...i})}function a(e){let{className:r,...i}=e;return(0,t.jsx)("label",{className:(0,n.cn)("text-label-14 font-medium",r),...i})}function o(e){let{className:r,...i}=e;return(0,t.jsx)("p",{className:(0,n.cn)("!text-gray-500 text-label-14",r),...i})}function s(e){let{className:r,...i}=e;return(0,t.jsx)("div",{className:(0,n.cn)("flex gap-2 justify-end items-center",r),...i})}e.s(["SettingsItem",()=>r,"SettingsItemAction",()=>s,"SettingsItemContent",()=>i,"SettingsItemDescription",()=>o,"SettingsItemTitle",()=>a])},572934,e=>{"use strict";var t=e.i(832520),n=e.i(199929),r=e.i(990453),i=e.i(827728);let a=()=>{let[e,t]=(0,i.useLocalStorage)("v0:sg",!0);return[e,t]};function o(){let[e,i]=a();return(0,t.jsxs)(n.SettingsItem,{children:[(0,t.jsxs)(n.SettingsItemContent,{children:[(0,t.jsx)(n.SettingsItemTitle,{children:"Suggestions"}),(0,t.jsx)(n.SettingsItemDescription,{children:"Get relevant in-chat suggestions to refine your project."})]}),(0,t.jsx)(n.SettingsItemAction,{children:(0,t.jsx)(r.Switch,{checked:e,onCheckedChange:i,"aria-label":"Toggle Suggestions"})})]})}e.s(["SuggestionsSetting",()=>o,"useSuggestionsSetting",0,a])},646851,207815,e=>{"use strict";var t=e.i(868275),n=e.i(407562);function r(){let e,t;return{promise:new Promise((n,r)=>{e=n,t=r}),resolve:e,reject:t}}async function i(){try{return(await fetch("/chat/api/chat/resume/ping",{method:"HEAD",cache:"no-store"})).ok}catch(e){return!1}}class a{constructor(){(0,t._)(this,"promise",void 0),(0,t._)(this,"resolve",void 0),(0,t._)(this,"handleOffline",()=>{window.removeEventListener("offline",this.handleOffline),this.resolve()}),(0,t._)(this,"cleanupOfflineListener",()=>{window.removeEventListener("offline",this.handleOffline)}),(0,t._)(this,"resetPromises",()=>{let{promise:e,resolve:t}=r();this.promise=e,this.resolve=t});let{promise:e,resolve:n}=r();this.promise=e,this.resolve=n,window.addEventListener("offline",this.handleOffline)}}class o{clearLoadingToastTimeout(){this.loadingToastTimeout&&(clearTimeout(this.loadingToastTimeout),this.loadingToastTimeout=null)}dismissLoadingToast(){this.toastId&&(n.toast.dismiss(this.toastId),this.toastId=null)}showSuccessToast(){this.toastId&&(this.dismissLoadingToast(),this.toastOpts&&n.toast.success(this.toastOpts.successMessage))}constructor(e){if((0,t._)(this,"toastOpts",void 0),(0,t._)(this,"toastId",null),(0,t._)(this,"loadingToastTimeout",null),this.toastOpts=e,!e)return;let r=Math.max(5e3-(Date.now()-e.lastReconnectedAt),0);this.loadingToastTimeout=setTimeout(()=>{this.toastId=n.toast.loading(e.loadingMessage,{duration:36e5})},r)}}async function s(e){let{promise:t,resolve:n}=r(),i=()=>n();e.defaultValue?n():window.addEventListener(e.eventKey,i),await Promise.race([t,new Promise(t=>setTimeout(t,e.durationMs))]),window.removeEventListener(e.eventKey,i)}async function l(){let e=0;for(;e++<5;)if(await s({defaultValue:"visible"===document.visibilityState,eventKey:"visibilitychange",durationMs:36e5}),await s({defaultValue:await i(),eventKey:"online",durationMs:3e5}),"visible"===document.visibilityState)return!0;return!1}async function c(e,t){var n,r;let i=new URLSearchParams({messageId:e}),a=await fetch("/chat/api/chat/resume?".concat(i.toString()),{method:"GET",cache:"no-store",signal:t});if(!a.ok)throw Error("Failed to fetch resume stream: ".concat(a.statusText));if("application/json"===a.headers.get("Content-Type")){let e=await a.json();return{type:"finished-message",message:e.message,activeBlock:null!=(r=e.activeBlock)?r:null}}let o=null==(n=a.body)?void 0:n.getReader();if(!o)throw Error("Response body is not readable");return{type:"stream",reader:o}}let u=async e=>{let{messageId:t,signal:n,toastOpts:r}=e,i=new o(r);try{let e=await l();if(i.clearLoadingToastTimeout(),!e)return null;let r=500,a=0;for(;a++<3;){await new Promise(e=>setTimeout(e,r*Math.min(1,a-1)));try{let e=await c(t,n);return i.showSuccessToast(),e}catch(e){console.error("Resume attempt ".concat(a," failed:"),e),r*=2}}return null}catch(e){return console.error("Failed to resume stream:",e),null}finally{i.dismissLoadingToast()}};async function d(e){let t=await fetch("/chat/api/stop-agent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to stop agent");return await t.json()}e.s(["OfflineHandler",()=>a,"fetchResumeStream",0,u],646851),e.s(["stopAgent",()=>d],207815)},284627,e=>{"use strict";var t=e.i(753533),n=e.i(92479),r=e.i(205341),i=e.i(142219);let a=["task-read-files-v1","task-search-web-v1","task-search-repo-v1","task-diagnostics-v1","task-coding-v1","task-thinking-v1","task-read-file-v1"],o=new Map,s=(0,t.cacheResultById)(o,()=>({isVisible:(0,r.atom)(!1),fullscreenIntent:(0,r.atom)(!1),lastPartUpdate:(0,r.atom)(null),lastPartUpdatedAt:(0,r.atom)(0),currentPartKey:(0,r.atom)(null),dismissedLoaderIds:(0,r.atom)([])})),l=new Map,c=(0,t.cacheResultById)(l,e=>{let t=s(e);return{...t,loaderType:(0,r.atom)(e=>{let n=e(t.lastPartUpdate);return n?n.type:null}),heading:(0,r.atom)(e=>{let n=e(t.lastPartUpdate);if(!n)return"Working...";let r=p(n.type),{taskNameActive:i}=n;return i||r})}});function u(e){let t=s(e);return{setLastPartUpdate:function(e){i.store.set(t.lastPartUpdate,e)},dismissLoaderId:function(e){let n=i.store.get(t.dismissedLoaderIds);n.includes(e)||i.store.set(t.dismissedLoaderIds,[...n,e])},clearLastPartUpdate:function(){i.store.set(t.lastPartUpdate,null),i.store.set(t.lastPartUpdatedAt,0),i.store.set(t.currentPartKey,null)},setPartKey:function(e){i.store.set(t.currentPartKey,e),i.store.set(t.lastPartUpdatedAt,Date.now())},setIsVisible:function(e){i.store.set(t.isVisible,e)},setFullscreenIntent:function(e){i.store.set(t.fullscreenIntent,e)},hide:function(){i.store.set(t.isVisible,!1)},show:function(){i.store.set(t.isVisible,!0)},toggleFullscreenIntent:function(){let e=i.store.get(t.fullscreenIntent);i.store.set(t.fullscreenIntent,!e)}}}function d(){let e=(0,n.assertChatId)((0,n.useChatId)().chatId);return{atoms:c(e),actions:u(e)}}function p(e){switch(e){case"task-read-files-v1":return"Reading Files...";case"task-search-web-v1":return"Searching the Web...";case"task-search-repo-v1":return"Searching Repository...";case"task-diagnostics-v1":return"Running Diagnostics...";case"task-coding-v1":return"Coding...";case"task-thinking-v1":return"Thinking...";case"task-read-file-v1":return"Reading File...";default:return"Working..."}}e.s(["LOADABLE_RICH_PART_TYPES",0,a,"getLoaderActions",()=>u,"useCurrentChatLoader",()=>d])},521598,e=>{"use strict";var t=e.i(32170),n=e.i(667660),r=e.i(206037);function i(){let{user:e}=(0,t.useUser)(),{activeScope:i}=(0,n.useActiveScope)(),{planSlug:a}=(0,r.usePlanInfo)(!0,null==i?void 0:i.id);return{userOnFree:"v0-level0"===a&&!(null==e?void 0:e.isAdminMode)}}function a(){let{activeScope:e}=(0,n.useActiveScope)(),{planSlug:t}=(0,r.usePlanInfo)(!0,null==e?void 0:e.id);return{userPlanSlug:t}}e.s(["useUserOnFree",()=>i,"useUserPlanSlug",()=>a])},554912,e=>{"use strict";e.s(["useConsole",()=>d,"useUploadActiveBlockLogs",()=>u],554912);var t=e.i(200407),n=e.i(346970),r=e.i(298450),i=e.i(449381),a=e.i(53223),o=e.i(242759),s=e.i(547259),l=(0,s.createServerReference)("40205aae89d1ad3651d778f037bae6f2175434fae3",s.callServer,void 0,s.findSourceMapURL,"saveAgentLogs");function c(){let e=(0,i.useActiveBlockState)(),{consoleEvents:n}=d((null==e?void 0:e.id)||"");return{logs:(0,t.useMemo)(()=>{if(!e||0===n.length)return null;let t=n.filter(e=>"console"===e.type).filter(e=>e.message.startsWith("[v0]")||"error"===e.method).map(e=>{let t=e.message.split(/\r?\n/).map(e=>e.length>500?e.slice(0,500)+"...":e);return"---\n".concat(e.isServer?"[SERVER]":"[CLIENT]","\n---\n").concat(t.join("\n"))}).join("\n");return t.length<1e4?t:t.slice(-1e4)+"\n\n[...truncated to last 10K characters...]"},[n,e]),activeBlockId:(null==e?void 0:e.id)||""}}function u(){let{logs:e,activeBlockId:n}=c(),{sal:r}=(0,o.useFlags)();return{uploadActiveBlockLogs:(0,t.useCallback)(async t=>{let{chatId:i,userMessageId:o}=t;if(e&&r)try{await l({chatId:i,userMessageId:o,logs:e}),(0,a.track)("DebugLogsAttachment",{blockId:n})}catch(e){(0,a.track)("DebugLogsAttachmentError",{blockId:n})}},[e,n,r])}}function d(e){let{data:i=[],mutate:a}=(0,n.default)(["consoleEvents",e],{fallbackData:[]}),{data:o,mutate:s}=(0,n.default)(["expandConsole",e],{fallbackData:null}),{flagNewEvent:l}=(0,r.useNewConsoleEvents)(e),c=(0,t.useCallback)(e=>{a(t=>[...t||[],e]),"message"in e&&e.message.includes("[Fast Refresh]")||("error"===e.method||"stderr"===e.method?l("error"):l("log"))},[a,l]);return{consoleEvents:i,appendConsoleEvent:c,appendCodeOutputEvents:(0,t.useCallback)(e=>{if(a(t=>[...t||[],...e]),e.some(e=>"stderr"===e.method))return void l("error");l("log")},[a,l]),clearConsoleEvents:(0,t.useCallback)(()=>{a([])},[a]),expandConsole:o,setExpandConsole:s}}},472166,e=>{"use strict";e.s(["OPT_RETRY_ID",()=>Y,"useV0Chat",()=>et]);var t=e.i(133473),n=e.i(200407),r=e.i(259112),i=e.i(246300),a=e.i(92479);e.i(563948);var o=e.i(407562),s=e.i(818273),l=e.i(449381),c=e.i(295224),u=e.i(480118),d=e.i(584497),p=e.i(175787),h=e.i(230869),f=e.i(745197),m=e.i(470259),g=e.i(120485),v=e.i(53223),x=e.i(654225),y=e.i(183673),b=e.i(342681),w=e.i(667660),j=e.i(906261),C=e.i(85989),k=e.i(306244),S=e.i(967122),N=e.i(664470),E=e.i(912074),M=e.i(246338),I=e.i(370912),D=e.i(696871),T=e.i(282931),A=e.i(18547),L=e.i(726988),P=e.i(780292),R=e.i(646851),_=e.i(572934),O=e.i(912106),F=e.i(418929);e.i(168204);var V=e.i(225695);e.i(904347);var B=e.i(37737),z=e.i(525258),H=e.i(297239),U=e.i(242759),q=e.i(207815),W=e.i(284627),Z=e.i(204575),G=e.i(521598),K=e.i(554912),X=e.i(76866),$=e.i(519738);let Y="opt-retry-message",J=[{name:"creditCardDetector",action:M.hasCreditCards,confirm:"We've detected a credit card number in your message. Are you sure you want to continue?"}];async function Q(e,t){let n=[];if(t)if(t instanceof FileList)for(let e of Array.from(t)){let{name:t,type:r,size:i}=e,a=await (0,C.readFileAsDataURL)(e);n.push({name:t,contentType:r,url:a,size:i})}else if(Array.isArray(t))for(let e of t){let{name:t,url:r,contentType:i,size:a,v0Type:o,content:s}=e;n.push({name:t,contentType:i,v0Type:o,url:r,size:a,content:s})}else throw Error(m.INVALID_ATTACHMENT_TYPE);return n}function ee(e,t){let n=e["x-v0-project-id"],r=e["x-v0-project-name-base64"],i=e["x-v0-project-color"],a=e["x-v0-project-icon"],o=e["x-v0-project-creator-id"],s=e["x-v0-project-vercel-project-id"]||null;if(n&&r)return{projectId:n,name:atob(r),settings:{color:i,icon:a},vercelProjectId:s,isCreator:t===o}}function et(){let{onSubmit:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeScope:p,user:b}=(0,w.useActiveScope)(),C=b,M=(0,l.useSetActiveBlockState)(),Y=(0,l.useSetActiveBlockView)(),{messages:et,activeForkKey:er,chatId:ea}=(0,a.useChatMessages)(),{isLoading:eo,isSyncing:es}=(0,a.useChatLoadingState)(),{undo:el}=(0,a.useChatUndoState)(),ec=(0,H.useT)(),{actions:eu,atoms:ed}=(0,F.useCurrentChatPrompt)(),{startEditingMessage:ep,setModelId:eh}=eu,ef=(0,a.useSetChatState)(),{setMetadata:em,project:eg}=(0,d.useChatMetadata)(),ev=(0,x.localDraftController)(ea,!1),{quote:ex,setQuote:ey}=(0,d.useChatQuote)(),{revalidate:eb,setData:ew}=(0,i.useChatHistory)(),[ej]=(0,_.useSuggestionsSetting)(),eC=(0,c.useLatest)(e),ek=(0,c.useLatest)(et),[,eS]=(0,f.useRateLimit)(),{usage:eN,updateDailyModelUsage:eE}=(0,z.useDailyModelUsage)(),{age:eM,pipl:eI,dmule:eD}=(0,U.useFlags)(),{userPlanSlug:eT}=(0,G.useUserPlanSlug)(),eA=(0,S.useActiveBlockIdRef)(),{setBlockCreatedAt:eL}=(0,I.useBlockCreatedAt)(),eP=(0,u.useRouter)(),eR=(0,n.useMemo)(()=>(0,E.getAnonId)(),[]),{stores:e_,refetch:eO}=(0,L.useConnectedIntegrations)({v0ProjectId:null==eg?void 0:eg.projectId,vercelProjectId:null==eg?void 0:eg.vercelProjectId,refreshInterval:0}),{refetchVercelProject:eF,envVars:eV}=(0,y.useVercelProject)({v0ProjectId:null==eg?void 0:eg.projectId}),eB=(0,c.useLatest)(eV),{uploadActiveBlockLogs:ez}=(0,K.useUploadActiveBlockLogs)(),eH=(0,l.useActiveBlockState)(),{exitToLatest:eU}=(0,X.useRestoreBlockVersion)(null==eH?void 0:eH.id),{isLatest:eq}=(0,$.useBlockVersionInfo)(null==eH?void 0:eH.id),eW=(0,P.useAtomValue)(ed.isThinking),eZ=(0,P.useAtomValue)(ed.isImageGenerations),eG=(0,P.useAtomValue)(ed.modelId),eK=(0,P.useAtomValue)(ed.toolConfiguration).designSystemId,eX=eM?"v0-1.5-md":eG,e$=(0,n.useCallback)(async(e,n,i)=>{var a,l,c,u,d;if(e.revalidateVercelEnvAndIntegrations){let[[e],t]=await Promise.all([eO(),eF()]);e&&(e_.data=e),(null==t?void 0:t.envVars)&&(eB.current=t.envVars)}if(es)return;for(let t of(eH&&!eq&&"new"===e.action&&eU(eH),J))if("content"in e&&e.content&&t.action((0,V.stringifyMessageContent)(e.content))&&!confirm(t.confirm))return;let f=!!eR;if((null==C?void 0:C.id)||!eR||(C={id:eR,username:"anon",avatar:"",plan:"anon",email:"",name:"Anonymous",teams:[],createdAt:"1970-01-01T00:00:00.000Z"}),!(null==C?void 0:C.id))return;let y=C.id,b=i?i.messages:ek.current,w=i?i.activeForkKey:er,S=w,E=[...b],I=!1,L=e=>{e.preventDefault(),e.returnValue=""};try{let d,E;await eS();let U=(0,k.createNewAbortSignalForKey)(ea,()=>ef({isLoading:!1,isStreaming:!1,isContinuing:!1})),q=(null==n?void 0:n.type)==="resumed",G=(null==n?void 0:n.type)==="initial",K=0===b.length||G;n||null==(u=eC.current)||u.call(eC),ef({isLoading:!0}),K&&(window.history.pushState(null,"","/chat/".concat(ea)),(0,O.mutate)("chat:id",ea,!1),(0,x.localDraftController)(ea,!0).deleteLocalDraft());let X=en({content:"content"in e&&e.content?e.content:{version:1,parts:[]},chatSubmitData:e,quote:ex,isResumingStream:q,messages:b,activeForkKey:w,authorId:y}),$=Promise.resolve(null);if(!K&&(null==X||null==(a=X.newUserMessage)?void 0:a.id)&&($=ez({chatId:ea,userMessageId:X.newUserMessage.id})),!X)return void ef({isLoading:!1,isStreaming:!1,isContinuing:!1});ey(null),ef({prefillOptions:{query:void 0,projectId:void 0},isContinuing:"continue"===e.action,isLoading:"continue"!==e.action,isStreaming:"continue"===e.action,undo:{messages:b,forkKey:S,editingUserMessageId:"edit"===e.action?e.userMessageId:null}});let J=await Q(f,"attachments"in e?e.attachments:void 0);"new"!==e.action&&"edit"!==e.action&&((null==(c=X.newUserMessage)||null==(l=c.attachments)?void 0:l.length)||0)>0&&J.push(...X.newUserMessage.attachments);let{action:et,continueAssistantMessage:er,newUserMessage:eo,newActiveForkKey:es}=X,el=[...b];"type"in e&&eo&&(eo.type=e.type),eo&&!X.isFromQParam&&el.push(eo),ef({messages:el,activeForkKey:es});let eu=document.getElementById(T.SCROLL_DOWN_BUTTON_ID);eu&&eu.click();let ed={};if((null==n?void 0:n.type)==="resumed"){let e=await (0,R.fetchResumeStream)({messageId:n.responseMessageId,signal:U,toastOpts:null});if(!e)throw Error("Failed to resume stream");d=e,ed=n.headers}else{let t=[];e_.error||(t=[...e_.data.marketplaceStores,...e_.data.nativeStores].map(e=>({type:e.type,instanceName:e.name,product:{name:"product"in e?e.product.name:e.integrationName,slug:"slug"in e?e.slug:void 0}})));let r=[];(null==n?void 0:n.type)==="initial"?r=n.integrations:"integrations"in e&&e.integrations&&(r=e.integrations);let i=[...r,...t],a=[];"envVars"in e&&e.envVars?a=e.envVars:(null==n?void 0:n.envVars)&&(a=n.envVars);let o=[...Object.values(eB.current||[]).map(e=>({id:e.id,key:e.key})),...a],s={};(null==n?void 0:n.projectId)&&(s={projectId:n.projectId});let l={};(null==n?void 0:n.messageAttachments)?l={attachments:n.messageAttachments}:J.length>0&&(l={attachments:J});let c=p&&!(0,j.isUserScope)(p)?p.slug:void 0;window.addEventListener("beforeunload",L),q||(0,v.track)("PromptSent",{planSlug:eT||null,promptId:X.userMessageId,isImageGeneration:eZ,origin:(null==et?void 0:et.type)||null,promptText:eo?(0,V.stringifyMessageContent)(eo.content).slice(0,1e3):null,startedAt:Date.now(),attachments:J.map(e=>({name:e.name||null,contentType:e.contentType||null})),projectId:(null==eg?void 0:eg.projectId)||null}),await $;let u=await fetch("/chat/api/chat",{method:"POST",body:JSON.stringify({messageContent:null==eo?void 0:eo.content,messageId:null==eo?void 0:eo.id,forceResponse:"forceResponse"in e?e.forceResponse:void 0,chatId:ea,isNew:K,thinkingMode:X.thinkingMode,messageMode:"new"===e.action?e.messageMode:void 0,figmaContext:"figmaContext"in e?e.figmaContext:void 0,userMessageType:"type"in e?e.type:void 0,forkKey:null==es?void 0:es.slice(0,-1),...s,action:et,...l,team:c,..."workflowState"in e?{workflowState:e.workflowState}:{},..."new"===e.action&&void 0!==e.autopilot?{autopilot:e.autopilot}:{},integrations:i,envVars:o,modelConfiguration:{modelId:eX,imageGenerations:eZ,thinking:eW},suggestedActionsEnabled:ej,..."new"===e.action&&null!==eK?{designSystemId:eK}:{}}),headers:{"Content-Type":"application/json"},signal:U});if(window.removeEventListener("beforeunload",L),!u.ok||!u.body){if(402===u.status)throw Error(m.OUT_OF_CREDITS);let e=await u.text();throw Error(e)}if(eD&&"v0-level0"===C.v0plan){let e=eN+1;eE(e),!K&&e>=D.DAILY_MODEL_USAGE_LIMIT&&(0,B.openDialog)({type:"upgradePlan",data:{customTitle:ec("rateLimit.daily.upgradeTitle")}})}(0,x.localDraftController)(ea,!1).deleteLocalDraft(),ed=Object.fromEntries(u.headers.entries()),d={type:"stream",reader:u.body.getReader()}}let ep=ed["x-v0-url-attachments"]?JSON.parse(atob(ed["x-v0-url-attachments"])):void 0;ep&&void 0!==eo&&(el[el.length-1].attachments=[...el[el.length-1].attachments||[],...ep||[]],ef({messages:el}));let eh=ee(ed,null==p?void 0:p.id);eh&&em({project:eh});let ev=ed["x-v0-user-message-id"];if(!ev)throw Error(m.MISSING_USER_MESSAGE_ID);er&&(el=el.filter(e=>"assistant"!==e.role||e.id!==er.id));let ek=!1,eM=new TextDecoder,eR=ed["x-v0-response-message-id"];if(!eR)throw Error(m.MISSING_ASSISTANT_MESSAGE_ID);let eO=ei({responseMessageId:eR,action:et,newActiveForkKey:es,userMessageServerId:ev}),eF="continue"===e.action,eV=[],eH=()=>eF&&er?er.content:{type:"message-binary-format",value:eV},eU=null,eq={},eG=!1;function P(){if(!eI)return;if(eG)return void eY.setFullscreenIntent(!1);if(!eU)return;let e=eq[eU.id]||eU;z(!0,e)}function _(e){if(eI&&eU&&(0,s.isFetchingDiagnostics)(e)){if(!(null==eA?void 0:eA.current)||eA.current===eU.id)return void P();(0,Z.preloadIframeForBlock)(eA.current,eU.id,()=>P())}}function F(n){U.throwIfAborted();try{var i;let t=JSON.parse(n);eV=(0,r.patch)(eV,t),eF&&(null==(i=eV.find(e=>"markdown"===(0,s.getRowType)(e)))?void 0:i[1])&&(eF=!1),(0,s.didRunOutOfCredits)(eV)&&(0,g.openOutOfCreditsDialog)((null==C?void 0:C.v0plan)||"v0-level0",eP),_(eV);let a=(0,s.getBlocksFromState)({type:"message-binary-format",value:eV},eR),o=(0,s.getMetadataFromState)(eV);if(!ek&&"string"==typeof o.title&&o.title&&(ek=!0,em({title:o.title,project:eg||{isCreator:!0,name:o.title,projectId:"",settings:{color:null,icon:null},vercelProjectId:null}}),K&&o.title&&ew(e=>[{title:o.title,chatId:ea,updatedAt:new Date,shareable:!1,privacy:"private",favorite:!1,optimistic:!0,authorId:y},...e.filter(e=>e.chatId!==ea)],!1)),E={parentId:ev,role:"assistant",content:eH(),context:o.docsContext,id:eR,blocks:a.map(e=>e.id),loadingText:o.loadingText,streaming:!1===eF,finishReason:o.finishReason||null,relevantFiles:o.relevantFiles,grepQueries:o.grepQueries,notifications:o.notifications,usage:o.usage,modelId:o.modelId,thinkingMode:null==X?void 0:X.thinkingMode,continuingMessageId:null==er?void 0:er.id,type:"type"in e&&"added-integration"===e.type?"added-integration":"message",createdAt:E.createdAt||new Date},ef({messages:[...el,E],isLoading:!1,isStreaming:!0}),a.length>=1){let e=a[a.length-1];(!eI||eG)&&(e.id!==(null==eA?void 0:eA.current)||D.INLINE_BLOCK_TYPES.includes(e.type)||M(e)),eq[e.id]=e}return a}catch(e){(0,v.track)("ChatHookError",{chatId:ea,errorCode:m.FAILED_TO_READ_ROW,errorMsg:"Failed to read row: ".concat(n)}),"production"!==t.default.env.VERCEL_ENV&&console.error(e,"Error reading row:",n);return}}E={parentId:ev,role:"assistant",content:eH(),id:eR,streaming:void 0===er,finishReason:null,continuingMessageId:null==er?void 0:er.id,type:"message",createdAt:new Date},ef({messages:[...el,E],activeForkKey:eO,saveLeafMessageId:!0}),I=!0;let e$=new R.OfflineHandler,eY=(0,W.getLoaderActions)(ea),eJ=!1,eQ=()=>{if(eJ)return!0;let e=i?i.messages:b,t=i?i.activeForkKey:w;for(let n of e.filter(e=>null==t?void 0:t.includes(e.id)))if((0,s.getBlocksFromState)(n.content,n.id).length>0)return eJ=!0,!0;return!1};function z(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(null==i?void 0:i.avoidAutoSwitchingBlock){let e=t[1];if(!e)return;o.toast.default("New message is ready to preview",{duration:5e3,action:{children:"View",onClick:()=>{let t=eq[e.id];t&&Y(!0,t)}}});return}Y(...t)}async function H(e){if("finished-message"===e.type){E=e.message,ef({messages:[...el,e.message],activeForkKey:eO}),e.activeBlock&&z(!0,e.activeBlock);return}let t="",n=null;for(eV=[];;){U.throwIfAborted();let r=await Promise.race([e.reader.read(),e$.promise]);if(!r)throw Error("network error");let{value:i,done:a}=r;if(a)break;let o=t+(i instanceof Uint8Array?eM.decode(i):i),{isLlmError:s,isRetried:l,errorCategory:c="default"}=(0,h.isLlmError)(o),u=l?"retry_provider_server_error:".concat(c):"provider_server_error:".concat(c);if(s)throw ef({messages:[...el,{...E,finishReason:u}]}),Error(m.LLM_CALL_ERROR);let d=o.split("\n");for(let e=0;e<d.length-1;e++){let t=F(d[e]),r=(null==t?void 0:t.length)&&t[t.length-1].id!==n;(!n||(null==eA?void 0:eA.current)===n||(null==eU?void 0:eU.id))&&r&&(eL(t[t.length-1].id,new Date().toISOString()),n=t[t.length-1].id,D.INLINE_BLOCK_TYPES.includes(t[t.length-1].type)||(eI?(eQ()?"svelte"===t[t.length-1].language&&(eY.setFullscreenIntent(!0),eG=!0):(eJ=!0,eY.setFullscreenIntent(!0),eG=!0),eG&&z(!0,t[t.length-1]),eU=t[t.length-1]):z(!0,t[t.length-1])))}t=d[d.length-1]}t&&F(t)}let e0=0,e1=0;for(;;)try{await H(d);break}catch(t){if(t instanceof Error&&"AbortError"===t.name||e0++>10)throw t;let e=await (0,R.fetchResumeStream)({messageId:eR,signal:U,toastOpts:{loadingMessage:"Reconnecting",successMessage:"Reconnected",lastReconnectedAt:e1}});if(!e)throw t;e1=Date.now(),d=e,e$.resetPromises()}finally{e$.cleanupOfflineListener()}ef({messages:[...el,{...E,streaming:!1}],isStreaming:!1,isContinuing:!1,initialStreamPromise:void 0}),P(),(0,A.emitChatMessageFinished)(),K&&(await (0,N.invalidateRouterCache)(),eb()),(0,k.removeAbortController)(ea)}catch(t){if(window.removeEventListener("beforeunload",L),t instanceof Error&&"AbortError"===t.name)return;(0,A.emitChatMessageFinished)(),!I&&"onFailToPrompt"in e&&(null==(d=e.onFailToPrompt)||d.call(e)),ef({isLoading:!1,undo:null,isStreaming:!1,isContinuing:!1,initialStreamPromise:void 0,prefillOptions:{query:void 0,projectId:void 0},...!I?{activeForkKey:S,messages:E}:{}}),(0,k.abortKey)(ea),(0,g.handleChatError)(t,eP,"Failed to submit message. Start a new chat, retry, or edit your message.",{scopeSlug:(0,j.isUserScope)(p)||null==p?void 0:p.slug,chatId:ea,projectId:(null==eg?void 0:eg.projectId)||void 0,userPlan:C.v0plan||"v0-level0"})||o.toast.error("An unexpected error occurred. Please refresh the page and try again."),I||0!==E.length||eP.push("/chat")}},[C,er,ek,eS,ea,ef,ev,ex,ey,eC,em,p,eg,ew,eA,M,es,Y,eP,eb]),eY=(0,n.useCallback)(()=>{let e=ek.current;(0,k.abortKey)(ea);let t=e[e.length-1];if(eM&&t&&"assistant"===t.role&&t.id&&(0,q.stopAgent)({assistantMessageId:t.id,chatId:ea}).catch(e=>{(0,v.track)("StopAgentError",{assistantMessageId:t.id,error:e instanceof Error?e.message:String(e)})}),eo&&el){if(ef({activeForkKey:el.forkKey,messages:el.messages}),el.editingUserMessageId){let e=el.messages.find(e=>e.id===el.editingUserMessageId&&"user"===e.role);e&&"user"===e.role&&ep({...e})}}else if(e.length>0){let t=e[e.length-1];"assistant"===t.role&&ef({messages:[...e.slice(0,-1),{...t,streaming:!1}]})}setTimeout(()=>ef({isStreaming:!1,isLoading:!1}),0)},[ea,ek,el,eM,ef,eo,ep]),eJ=(0,n.useRef)(e$),eQ=(0,n.useRef)(ef),e0=(0,n.useRef)(eY);eJ.current=e$,eQ.current=ef,e0.current=eY;let e1=(0,n.useCallback)(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return eJ.current(...t)},[]),e2=(0,n.useCallback)(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return eQ.current(...t)},[]);return{submit:e1,stopLlmResponse:(0,n.useCallback)(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return e0.current(...t)},[]),setChatState:e2}}function en(e){let{content:t,chatSubmitData:n,isResumingStream:r,quote:i,messages:a,activeForkKey:o,authorId:s}=e;switch(n.action){case"continue":case"retry":{let e;if(!o)throw Error(m.MISSING_FORK_KEY_FOR_CONTINUE_RETRY);let t=n.assistantMessageId,r=a.find(e=>"id"in e&&e.id===t&&"assistant"===e.role);if(!r||"assistant"!==r.role||!r.parentId)throw Error(m.NOT_FOUND);"continue"===n.action&&(e={...r,continuingMessageId:t});let i="retry"===n.action?(0,p.replaceIdInForkKey)(o,t,Y+(0,b.generateMessageId)()):o;return{action:{type:n.action,userMessageId:r.parentId,assistantMessageId:t},continueAssistantMessage:e,newActiveForkKey:i,thinkingMode:r.thinkingMode,userMessageId:r.parentId}}case"edit":{if(!t.parts.length)throw Error(m.EMPTY_MESSAGE_ERROR);if(!o)throw Error(m.MISSING_FORK_KEY_FOR_EDIT);er(t,i);let e=n.userMessageId,r=a.find(t=>t.id===e);if((null==r?void 0:r.role)!=="user")throw Error(m.NOT_FOUND);let s=a.find(e=>e.parentId===r.id&&"assistant"===e.role),l=(0,b.generateMessageId)();return{newUserMessage:{role:"user",content:{...t,type:"parts"},id:l,attachments:n.attachments,parentId:r.parentId,type:"message",authorId:r.authorId,createdAt:new Date},userMessageId:r.id,thinkingMode:s&&"thinkingMode"in s?s.thinkingMode:void 0,action:{type:"edit",userMessageId:r.id},newActiveForkKey:(0,p.replaceIdInForkKey)(o,r.id,l)}}case"fix-with-v0":{if(er(t,i),!t.parts.length)throw Error(m.EMPTY_MESSAGE_ERROR);let e=(0,b.generateMessageId)(),n=(0,p.addMessageIdToForkKey)(o,e),r={role:"user",content:{...t,type:"parts"},id:e,attachments:[],parentId:(0,p.getLeafMessageIdFromForkKey)(o),type:"fix-with-v0",authorId:s,createdAt:new Date};return{newUserMessage:r,userMessageId:r.id,newActiveForkKey:n,action:{type:"fix-with-v0"}}}case"new":{if(er(t,i),1===a.length&&"user"===a[0].role)return{isFromQParam:!0,userMessageId:a[0].id,newUserMessage:a[0],newActiveForkKey:(0,p.addMessageIdToForkKey)(void 0,a[0].id)};if(!t.parts.length&&!r&&(!n.attachments||0===n.attachments.length))throw Error(m.EMPTY_MESSAGE_ERROR);if(r)return{newUserMessage:void 0,userMessageId:"",newActiveForkKey:o};let e=(0,b.generateMessageId)(),l=(0,p.addMessageIdToForkKey)(o,e),c={role:"user",content:{...t,type:"parts"},id:e,attachments:n.attachments,parentId:(0,p.getLeafMessageIdFromForkKey)(o),type:"message",authorId:s,createdAt:new Date};return{newUserMessage:c,userMessageId:c.id,newActiveForkKey:l,thinkingMode:void 0}}default:throw Error(m.UNEXPECTED_ERROR)}}function er(e,t){if(t){for(let n of e.parts)if("mdx"===n.type){n.content="".concat(t.split("\n").map(e=>"> "+e).join("\n"),"\n\n").concat(n.content);return}e.parts.unshift({type:"mdx",content:t.split("\n").map(e=>"> "+e).join("\n")})}}function ei(e){let{responseMessageId:t,action:n,newActiveForkKey:r,userMessageServerId:i}=e;if((null==n?void 0:n.type)==="continue"||(null==n?void 0:n.type)==="retry")return(0,p.createSiblingForkKey)(r,t);let a=(0,p.createSiblingForkKey)(r,i);return(0,p.addMessageIdToForkKey)(a,t)}},941088,e=>{"use strict";let t=(0,e.i(605528).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M4.02168 4.76932C6.11619 2.33698 9.88374 2.33698 11.9783 4.76932L14.7602 7.99999L11.9783 11.2307C9.88374 13.663 6.1162 13.663 4.02168 11.2307L1.23971 7.99999L4.02168 4.76932ZM13.1149 3.79054C10.422 0.663244 5.57797 0.663247 2.88503 3.79054L-0.318359 7.5106V8.48938L2.88503 12.2094C5.57797 15.3367 10.422 15.3367 13.1149 12.2094L16.3183 8.48938V7.5106L13.1149 3.79054ZM6.49997 7.99999C6.49997 7.17157 7.17154 6.49999 7.99997 6.49999C8.82839 6.49999 9.49997 7.17157 9.49997 7.99999C9.49997 8.82842 8.82839 9.49999 7.99997 9.49999C7.17154 9.49999 6.49997 8.82842 6.49997 7.99999ZM7.99997 4.99999C6.34311 4.99999 4.99997 6.34314 4.99997 7.99999C4.99997 9.65685 6.34311 11 7.99997 11C9.65682 11 11 9.65685 11 7.99999C11 6.34314 9.65682 4.99999 7.99997 4.99999Z" fill="currentColor"/>');e.s(["Eye",0,t])},235009,e=>{"use strict";var t=e.i(832520),n=e.i(200407),r=e.i(116408),i=e.i(780292),a=e.i(205341),o=e.i(304649),s=e.i(529693),l=e.i(365290);let c=n.createContext(null);function u(){let e=n.useContext(c);if(!e)throw Error("useTabsToggle must be used within TabsToggle");return e}let d=n.forwardRef((e,s)=>{let{className:l,children:u,defaultValue:d,value:p,onValueChange:h,atom:f,...m}=e,g=n.useId(),v=n.useMemo(()=>(0,a.atom)(void 0),[]),[x,y]=(0,i.useAtom)(null!=f?f:v),b=void 0!==f,[w,j]=n.useState(null!=p?p:d),C=b?x:void 0!==p?p:w,k=b?y:e=>j(e),[S,N]=n.useState([]),E=n.useCallback((e,t)=>{N(n=>n.find(t=>t.value===e)?n.map(n=>n.value===e?{value:e,disabled:t}:n):[...n,{value:e,disabled:t}])},[]),M=n.useCallback(e=>{N(t=>t.filter(t=>t.value!==e))},[]),I=n.useCallback(()=>{if(0===S.length)return;let e=(S.findIndex(e=>e.value===C)+1)%S.length,t=0;for(;t<S.length;){let n=S[e];if(!n.disabled){k(n.value),null==h||h(n.value);return}e=(e+1)%S.length,t++}},[S,C,k,h]);return(0,t.jsx)(c.Provider,{value:{activeTab:C,setActiveTab:k,layoutId:g,cycleToNext:I,registerTab:E,unregisterTab:M},children:(0,t.jsx)(r.Root,{ref:s,defaultValue:b?void 0:d,value:C,onValueChange:e=>{k(e),null==h||h(e)},...m,children:(0,t.jsxs)(r.List,{className:(0,o.cn)("text-label-14 relative inline-flex h-7 font-medium",l),"data-layout-id":g,onClick:I,children:[(0,t.jsx)("div",{className:"group absolute inset-0 rounded-[6px] border border-alpha-200 bg-gray-100"}),u]})})})});d.displayName="TabsToggle";let p=n.forwardRef((e,i)=>{let{className:a,children:c,square:d,onClick:p,...h}=e,{activeTab:f,layoutId:m,cycleToNext:g,registerTab:v,unregisterTab:x}=u(),y=f===h.value;n.useEffect(()=>{if(h.value){var e;v(h.value,null!=(e=h.disabled)&&e)}return()=>{h.value&&x(h.value)}},[h.value,h.disabled,v,x]);let b=e=>{let t=y;if(h.disabled||t){e.preventDefault(),e.stopPropagation(),g();return}e.stopPropagation()},w=e=>{e.stopPropagation(),null==p||p(e)};return(0,t.jsxs)(r.Trigger,{ref:i,className:(0,o.cn)("group relative inline-flex items-center justify-center text-gray-600 focus-visible:outline-none focus-visible:ring-0 data-[state=active]:text-gray-900 cursor-pointer",d&&"w-7 max-w-7 px-0",a),style:{...(0,l.transitionStyles)(["color"],{duration:300})},onMouseDown:b,onClick:w,...h,children:[y&&(0,t.jsx)(s.motion.div,{className:(0,o.cn)("bg-background absolute inset-[1px] rounded-[5px] shadow-[0px_2px_2px_0px_rgba(0,0,0,0.04),0px_8px_8px_-8px_rgba(0,0,0,0.04)]","group-focus-visible:ring-offset-background group-focus-visible:ring-2 group-focus-visible:ring-blue-600 group-focus-visible:ring-offset-[1.5px]"),layoutId:"".concat(m,"-indicator"),transition:{type:"spring",bounce:.04,duration:.3}}),(0,t.jsx)("div",{className:(0,o.cn)("z-10 flex items-center justify-center gap-1.5 overflow-hidden px-2",d&&"px-0"),children:c})]})});p.displayName="TabsToggleTrigger",d.Trigger=p,e.s(["TabsToggle",()=>d,"TabsToggleTrigger",()=>p])},805374,e=>{"use strict";e.s(["PreviewBlockTitleActions",()=>v]);var t=e.i(832520),n=e.i(200407),r=e.i(343632),i=e.i(941088),a=e.i(676648),o=e.i(284546),s=e.i(297239),l=e.i(707827),c=e.i(92479),u=e.i(242759),d=e.i(235009),p=e.i(996174),h=e.i(127169),f=e.i(176248),m=e.i(519738),g=e.i(385671);function v(e){let{blockId:v,closed:x}=e,{actions:{setActiveTabIntent:y}}=(0,g.useChatLayout)(),{activeTab:b,previewMeta:w}=(0,o.useActiveTab)(),j=(0,s.useT)(),{isStreaming:C}=(0,c.useChatLoadingState)(),{bl:k}=(0,u.useFlags)(),{isLatest:S}=(0,m.useBlockVersionInfo)(v),{canShowPreviewTab:N}=(0,o.useActiveTab)(),E=!1===N,M=(0,n.useMemo)(()=>{let e,n=w;"error"===n.type&&(e=n.error),x||!C||k||(e=j("previewBlock.previewIsStreaming"));let r=(0,t.jsx)(i.Eye,{});return E&&(r=!x&&C?(0,t.jsx)(l.Spinner,{size:16}):(0,t.jsx)(a.EyeOff,{})),{icon:r,tooltip:e}},[k,x,E,C,j,w]),I=(0,n.useMemo)(()=>({icon:(0,t.jsx)(r.CodeWrap,{}),tooltip:j("previewBlock.code")(!S)}),[j,S]);function D(){y("preview"===b?"code":"preview")}return(0,h.useShortcut)(e=>{"c"===e.key&&e.shiftKey&&e.metaKey&&(e.preventDefault(),D())},[b,D]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(d.TabsToggle,{className:"hidden sm:flex",defaultValue:"preview",value:b,onValueChange:e=>{"code"===e?y(e):"preview"===e&&y(e)},children:[(0,t.jsx)(p.Tooltip,{content:M.tooltip,children:(0,t.jsx)(d.TabsToggleTrigger,{value:"preview",square:!0,disabled:E,children:M.icon})}),(0,t.jsx)(p.Tooltip,{content:I.tooltip,children:(0,t.jsx)(d.TabsToggleTrigger,{value:"code",square:!0,children:I.icon})})]}),(0,t.jsx)(f.Button,{size:"sm",variant:"secondary",className:"sm:hidden px-0 size-7",onClick:D,children:"preview"===b?I.icon:M.icon})]})}},174753,e=>{"use strict";let t=(0,e.i(605528).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M13.5 6.5V13.5C13.5 14.0523 13.0523 14.5 12.5 14.5H9V12.5H7V10.5H9V8.5H7V6.5H5V8.5H7V10.5H5V12.5H7V14.5H4.5C3.94772 14.5 3.5 14.0523 3.5 13.5V1.5H8V5V6.5H9.5H13.5ZM12.8787 5L9.5 1.62132V5H12.8787ZM8 0H9.58579C9.851 0 10.1054 0.105357 10.2929 0.292893L14.7071 4.70711C14.8946 4.89464 15 5.149 15 5.41421V13.5C15 14.8807 13.8807 16 12.5 16H4.5C3.11929 16 2 14.8807 2 13.5V1.5V0H3.5H8Z" fill="currentColor"/>');e.s(["FileZip",0,t])},160769,632082,e=>{"use strict";e.s(["BlockActionDownloadZip",()=>u],160769);var t=e.i(832520),n=e.i(174753),r=e.i(200407);function i(e,t){var n;return!!((null==(n=e.data)?void 0:n.source)&&e.data.lang&&t.includes(e.data.lang))}let a=["ts","typescript","typescriptreact","tsx","javascript","javascriptreact","jsx"];var o=e.i(301331),s=e.i(297239),l=e.i(556355);let c=[...a,"svelte","plaintext"];function u(a){let{blockId:u,lang:d,source:p}=a,h=i({data:{lang:d,source:p}},c),{projectBlocks:f,project:m}=(0,o.useBlockHistory)({blockId:u}),g=f.find(e=>e.id===u),v=(null==g?void 0:g.type)==="code-project",x=(0,r.useCallback)(async()=>{let t=[];if(v)window.open("/chat/api/download-zip?id=".concat(u),"_blank");else{t=f.map(e=>[{name:"".concat(m||"v0-project","/index.tsx"),input:e.source||""}]).flat();let n=(await e.A(950081)).downloadZip,r=await n(t).blob(),i=document.createElement("a");i.href=URL.createObjectURL(r),i.download="".concat(m||"v0-project",".zip"),i.click(),i.remove()}},[u,v,m,f]),y=(0,s.useT)();return u&&h?(0,t.jsxs)(l.DropdownMenuItem,{onSelect:x,children:[(0,t.jsx)(n.FileZip,{}),y("blockActionDownloadZip.downloadZip")]}):null}e.s(["BlockActionCli",()=>k],632082);var d=t,p=e.i(343632),h=r,f=e.i(584497),m=e.i(696871),g=e.i(667660),v=e.i(346970),x=e.i(32170);function y(e){let{expectUser:t}=(0,x.useUser)(),{activeScopeSlug:n}=(0,g.useActiveScope)(),{chatPrivacy:r}=(0,f.useChatPrivacy)(),i="public"===r||"unlisted"===r,{data:a,mutate:o,isValidating:s}=(0,v.default)(["/chat/b/[id]/token",e,i,n],async()=>{if(i||"@remote"===e||!n)return{token:null};let t=await fetch("/chat/b/".concat(e,"/token?scope=").concat(n));return await t.json()},{revalidateOnMount:!0,revalidateOnReconnect:!1,revalidateOnFocus:!1,refreshWhenHidden:!1,refreshInterval:m.CLI_TOKEN_EXPIRATION_MS});return{token:null==a?void 0:a.token,refreshToken:o,isRefreshing:s||t&&!n}}var b=e.i(390695),w=s,j=l;let C="latest";function k(e){let{blockId:t,lang:n,source:r}=e,{token:o,isRefreshing:s}=y(t),l=(0,w.useT)();return i({data:{lang:n,source:r}},a)?(0,d.jsxs)(j.DropdownMenuItem,{svgStyling:!1,className:"flex h-fit max-w-[270px] flex-col items-start gap-2 px-2 py-1.5 hover:bg-transparent! focus:bg-transparent focus-visible:bg-gray-100",onKeyDown:e=>{var t;"Enter"===e.key&&(e.preventDefault(),null==(t=document.getElementById("cli-command-button"))||t.focus())},children:[(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)(p.CodeWrap,{className:"text-gray-500!"}),(0,d.jsx)("h3",{className:"text-sm",children:l("blockActionCli.addToCodebase")})]}),(0,d.jsx)("p",{className:"text-sm",children:l("blockActionCli.runInConsole")}),(0,d.jsx)(S,{id:"cli-command-button",blockId:t,isRefreshing:s,token:o})]}):null}function S(e){let{blockId:t,token:n,isRefreshing:r,id:i}=e,{command:a,displayedUrl:o}=N(t,n);return(0,d.jsx)(b.LinkCopy,{id:i,className:"font-mono",disabled:r,displayLink:'npx shadcn add "'.concat(o,'";'),link:a,showToast:!0,successMessage:"Command copied",errorMessage:"Failed to copy command",loadingMessage:"Copying command..."})}function N(e,t){let[n,r]=(0,h.useMemo)(()=>{let n=new URL("".concat(window.location.origin,"/chat/b/").concat(e)),r="".concat(n.protocol,"//").concat(n.hostname,"/chat/b/").concat(e);return t&&(n.searchParams.set("token",t),r="".concat(r,"?token=").concat(t.substring(0,32),"...")),[n,r]},[e,t]);return{command:"npx shadcn@".concat(C,' add "').concat(n.toString(),'"'),url:n,displayedUrl:r}}},163014,e=>{"use strict";let t=(0,e.i(605528).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M7.25 11.75L7.25 14.4572C4.2595 14.1136 1.88638 11.7405 1.5428 8.75H4.25H5V7.25H4.25H1.5428C1.88638 4.2595 4.2595 1.88638 7.25 1.5428V4.25V5H8.75V4.25V1.5428C11.7405 1.88638 14.1136 4.2595 14.4572 7.25L11.75 7.25H11V8.75L11.75 8.75H14.4572C14.1136 11.7405 11.7405 14.1136 8.75 14.4572V11.75L8.75 11H7.25V11.75ZM15.9653 8.75C15.6102 12.5697 12.5697 15.6102 8.75 15.9653V16H8H7.25V15.9653C3.43032 15.6102 0.389836 12.5697 0.0346937 8.75H0V8V7.25H0.0346937C0.389836 3.43032 3.43032 0.389836 7.25 0.0346937V0H8H8.75V0.0346937C12.5697 0.389836 15.6102 3.43032 15.9653 7.25H16V8V8.75H15.9653Z" fill="currentColor"/>');e.s(["Crosshair",0,t])},622661,493177,868948,395542,e=>{"use strict";var t=e.i(832520);let n=(0,e.i(605528).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M1.5 2.5H14.5V9.75501L1.5 9.755V2.5ZM1.5 11.005V12.5C1.5 13.0523 1.94772 13.5 2.5 13.5H13.5C14.0523 13.5 14.5 13.0523 14.5 12.5V11.005L1.5 11.005ZM0 1H1.5H14.5H16V2.5V12.5C16 13.8807 14.8807 15 13.5 15H2.5C1.11929 15 0 13.8807 0 12.5V2.5V1Z" fill="currentColor"/>');e.s(["Footer",0,n],493177);let r=e=>{let{dotColor:n,className:r}=e;return(0,t.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:r,children:[(0,t.jsx)("circle",{cx:"13.5",cy:"2.5",r:"2.5",className:n}),(0,t.jsx)("path",{d:"M9.79199 1C9.60438 1.46333 9.5 1.96939 9.5 2.5H1.5V9.75488H14.5V6.37402C15.0563 6.23084 15.565 5.96998 16 5.62109V12.5C16 13.8807 14.8807 15 13.5 15H2.5C1.20566 15 0.140824 14.0164 0.0126953 12.7559L0 12.5V1H9.79199ZM1.5 11.0049V12.5C1.5 13.0523 1.94772 13.5 2.5 13.5H13.5C14.0523 13.5 14.5 13.0523 14.5 12.5V11.0049H1.5Z",className:"fill-current"})]})};function i(e){let{status:i,isExpanded:a}=e;return!i||a?(0,t.jsx)(n,{className:"text-gray-600"}):(0,t.jsx)(r,{className:"text-gray-600",dotColor:"error"===i?"fill-red-600":"fill-blue-600"})}e.s(["default",()=>i],622661),e.s(["ErrorBanner",()=>x,"cleanBlockError",()=>y],868948);var a=t,o=e.i(176248),s=e.i(750955),l=e.i(183558),c=e.i(504066),u=e.i(449381),d=e.i(70165),p=e.i(236699),h=e.i(92479),f=e.i(200407),m=e.i(304649),g=e.i(472166);e.i(168204);var v=e.i(225695);function x(e){let{error:t,onDismiss:n}=e,{submit:r}=(0,g.useV0Chat)(),{isAuthor:i}=(0,h.useChatPermissions)(),x=(0,u.useSetActiveBlockView)(),{isCopied:y,copyToClipboard:b}=(0,c.useCopyToClipboard)({timeout:2e3}),[w,j]=(0,f.useState)(!1);if(!t)return null;let C=()=>{b(t)},k=()=>{let e="The code returns the following error:\n```\n".concat(t,"\n```\nRevise the code to address the error.");(0,d.getIsMobile)()&&x(!1),r({type:"fix-with-v0",action:"fix-with-v0",content:(0,v.createMDXMessageContent)(e)})};return(0,a.jsx)("div",{className:"light absolute bottom-0 left-0 z-10 max-w-[400px] p-4",children:(0,a.jsxs)("div",{className:"text-background flex min-w-[300px] flex-col items-center gap-3 rounded-[8px] bg-red-600 p-2 text-sm",role:"alert",children:[(0,a.jsxs)("div",{className:"flex w-full flex-col gap-1",children:[(0,a.jsxs)("div",{className:"flex w-full items-center justify-between font-semibold",children:[(0,a.jsx)("span",{children:"Error"})," ",(0,a.jsxs)(o.Button,{className:"text text-background m-[-4px] hover:text-gray-200",onClick:n,size:"xs",variant:"ghost",children:[(0,a.jsx)(l.CrossSmall,{}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]}),(0,a.jsx)("div",{className:"flex w-full",children:(0,a.jsx)("span",{className:(0,m.cn)("font-small text-background cursor-pointer overflow-hidden whitespace-pre-wrap font-mono text-[11px]",{"line-clamp-2":!w}),onClick:()=>j(!w),children:t})})]}),i&&(0,a.jsxs)("div",{className:"flex w-full justify-end gap-2 align-middle",children:[(0,a.jsx)(o.Button,{className:"border-background text-background bg-transparent px-1.5 py-0.5 hover:no-underline",onClick:C,size:"sm",variant:"link",children:(0,a.jsx)(p.CopyCheck,{isCopied:y})}),(0,a.jsx)("div",{className:"border-alpha-400 border-l"}),(0,a.jsxs)(o.Button,{className:"h-6 rounded-md px-1.5 py-0.5 text-xs",onClick:k,size:"sm",variant:"secondary",children:["Fix with ",(0,a.jsx)(s.LogoV0,{})]})]})]})})}function y(e,t){let n=isNaN(parseInt(e))?e:"An unexpected error occurred (".concat(e,")");return t?"".concat(n,"\n\n").concat(t):n.replace("FatalRendererError: ","")}var b=e.i(926224);let w={LIGHTNING_WEB_COMPONENTS_UNSUPPORTED:"v0 does not currently support previewing LWC",LAYOUT_UNSUPPORTED:"v0 cannot currently preview Next.js layouts",SERVER_ACTION_UNSUPPORTED:"Server Actions cannot be previewed",RSC_UNSUPPORTED:"v0 cannot currently preview React Server Components",API_KEY_UNSUPPORTED:"v0 cannot currently preview components with API keys",REACT_NATIVE_UNSUPPORTED:"v0 cannot currently preview React Native components",ELECTRON_UNSUPPORTED:"v0 cannot currently preview Electron apps",EXPO_UNSUPPORTED:"v0 cannot currently preview Expo components",CLERK_UNSUPPORTED:"v0 does not currently support previewing Clerk",PRISMA_UNSUPPORTED:"v0 does not currently support previewing @prisma/client",BETTER_SQLITE_3_UNSUPPORTED:"v0 does not currently support previewing better-sqlite3",NEXT_INTL_UNSUPPORTED:"v0 does not currently support previewing next-intl",INERTIA_UNSUPPORTED:"v0 does not currently support previewing Inertia.js",EXPRESS_UNSUPPORTED:"v0 does not currently support previewing Express.js",FS_NOT_SUPPORTED:"v0 does not currently support previews with file system access",REMIX_UNSUPPORTED:"v0 does not currently support previewing Remix",REACT_ROUTER_UNSUPPORTED:"v0 does not currently support previewing react-router",MONGODB_UNSUPPORTED:"v0 does not currently support previewing MongoDB",ROUTE_HANDLER_UNSUPPORTED:"v0 cannot preview Route Handlers",REACT_HOOKS:"React hooks cannot be previewed",NON_JS_TS_FILE_UNSUPPORTED:"v0 can not preview this file",TEST_FILES_UNSUPPORTED:"v0 does not currently support previewing tests",NODE_APIS:"v0 does not currently support previewing Node.js APIs",CHAKRA_UNSUPPORTED:"v0 does not currently support previewing Chakra UI",REACT_PDF_UNSUPPORTED:"v0 does not currently support previewing @react-pdf/renderer",SWIPER_UNSUPPORTED:"v0 does not currently support previewing swiper/css",SENDGRID_UNSUPPORTED:"v0 does not currently support previewing @sendgrid/mail",GOOGLEAPIS_UNSUPPORTED:"v0 does not currently support previewing code using googleapis",ANGULAR_UNSUPPORTED:"v0 does not currently support previewing Angular",MATERIAL_UI_ADAPTER_DATE_UNSUPPORTED:"v0 does not currently support previewing @mui/x-date-pickers/AdapterDateFns",PLAYWRIGHT_UNSUPPORTED:"v0 does not currently support previewing Playwright",INSTRUMENTATION_UNSUPPORTED:"v0 does not support previewing instrumentation.ts",LARAVEL_UNSUPPORTED:"v0 does not currently support previewing Laravel",MONGOOSE_UNSUPPORTED:"v0 does not currently support previewing Mongoose"},j={MATERIAL_UI_UTILS_WARNING:"v0 is currently investigating an issue with @mui/utils. We appreciate your patience."},C=[["@clerk/nextjs",w.CLERK_UNSUPPORTED],["@clerk/clerk-react",w.CLERK_UNSUPPORTED],["next-intl",w.NEXT_INTL_UNSUPPORTED],["react-native",w.REACT_NATIVE_UNSUPPORTED],["@prisma/client",w.PRISMA_UNSUPPORTED],["better-sqlite3",w.BETTER_SQLITE_3_UNSUPPORTED],["@sendgrid/mail",w.SENDGRID_UNSUPPORTED],["@inertiajs/react",w.INERTIA_UNSUPPORTED],["@chakra-ui/react",w.CHAKRA_UNSUPPORTED],["@react-pdf/renderer",w.REACT_PDF_UNSUPPORTED],["swiper/css",w.SWIPER_UNSUPPORTED],["swiper/css/navigation",w.SWIPER_UNSUPPORTED],["@playwright/test",w.PLAYWRIGHT_UNSUPPORTED],["angular/router",w.ANGULAR_UNSUPPORTED],["angular/core",w.ANGULAR_UNSUPPORTED],["@angular/router",w.ANGULAR_UNSUPPORTED],["@angular/core",w.ANGULAR_UNSUPPORTED],["@angular/common",w.ANGULAR_UNSUPPORTED],["@mui/x-date-pickers/AdapterDateFns",w.MATERIAL_UI_ADAPTER_DATE_UNSUPPORTED],["@react-navigation/native",w.EXPO_UNSUPPORTED],["@react-navigation/stack",w.EXPO_UNSUPPORTED],["expo-router",w.EXPO_UNSUPPORTED],["express",w.EXPRESS_UNSUPPORTED],["expo-file-system",w.EXPO_UNSUPPORTED],["googleapis",w.GOOGLEAPIS_UNSUPPORTED],["fs",w.FS_NOT_SUPPORTED],["fs/promises",w.FS_NOT_SUPPORTED],["bcrypt",w.NODE_APIS],["@remix-run/node",w.REMIX_UNSUPPORTED],["mongodb",w.MONGODB_UNSUPPORTED],["react-router-dom",w.REACT_ROUTER_UNSUPPORTED],["lwc",w.LIGHTNING_WEB_COMPONENTS_UNSUPPORTED]],k=["GET","POST","PUT","PATCH","DELETE","HEAD","OPTIONS"];function S(e){return k.some(t=>new RegExp("export (default )?async function ".concat(t,"\\(")).test(e)||new RegExp("export const ".concat(t," =")).test(e))}let N=["tsx","html","jsx","js","ts"];function E(e,t){if(t){if(t.startsWith("use-"))return w.REACT_HOOKS;if("instrumentation.ts"===t)return w.INSTRUMENTATION_UNSUPPORTED;let e=t.split("."),n=e[e.length-1],r=e.length>2?e[e.length-2]:void 0;if(n&&!N.some(e=>n===e))return w.NON_JS_TS_FILE_UNSUPPORTED;if(r&&("test"===r||"spec"===r))return w.TEST_FILES_UNSUPPORTED}for(let[t,n]of C)if(new RegExp("from ['\"]".concat(t.replace("/","/"),"['\"]")).test(e))return n;return/\<ClerkProvider/.test(e)?w.CLERK_UNSUPPORTED:/export default function (Root)?Layout/.test(e)?w.LAYOUT_UNSUPPORTED:/(^|\n)['"]use server['"]/.test(e)?w.SERVER_ACTION_UNSUPPORTED:/export default async function/.test(e)?w.RSC_UNSUPPORTED:/(API_KEY|_SECRET) =/.test(e)||/YOUR_API_KEY/.test(e)?w.API_KEY_UNSUPPORTED:!S(e)||w.ROUTE_HANDLER_UNSUPPORTED}let M={NON_SUPPORTED_FILES:"v0 can not detect a page to preview",NO_EXPORTED_COMPONENT:"No exported component found"};function I(e){return"v0 does not currently support ".concat(e)}let D={"next-intl":w.NEXT_INTL_UNSUPPORTED,"react-native":w.REACT_NATIVE_UNSUPPORTED,electron:w.ELECTRON_UNSUPPORTED,"@chakra-ui/react":w.CHAKRA_UNSUPPORTED,"better-sqlite3":w.BETTER_SQLITE_3_UNSUPPORTED,lwc:w.LIGHTNING_WEB_COMPONENTS_UNSUPPORTED,"@playwright/test":w.PLAYWRIGHT_UNSUPPORTED,"angular/router":w.ANGULAR_UNSUPPORTED,"angular/core":w.ANGULAR_UNSUPPORTED,"@angular/router":w.ANGULAR_UNSUPPORTED,"@angular/core":w.ANGULAR_UNSUPPORTED,"@angular/common":w.ANGULAR_UNSUPPORTED,"@mui/x-date-pickers/AdapterDateFns":w.MATERIAL_UI_ADAPTER_DATE_UNSUPPORTED,"@react-navigation/native":w.EXPO_UNSUPPORTED,"@react-navigation/stack":w.EXPO_UNSUPPORTED,"expo-router":w.EXPO_UNSUPPORTED,express:w.EXPRESS_UNSUPPORTED,"expo-file-system":w.EXPO_UNSUPPORTED,googleapis:w.GOOGLEAPIS_UNSUPPORTED,"@remix-run/node":w.REMIX_UNSUPPORTED,mongodb:w.MONGODB_UNSUPPORTED,"react-router-dom":w.REACT_ROUTER_UNSUPPORTED,"laravel-mix":w.LARAVEL_UNSUPPORTED,mongoose:w.MONGOOSE_UNSUPPORTED,"discord-player":I("discord-player"),"fluent-ffmpeg":I("fluent-ffmpeg"),hono:I("hono"),undici:I("undici"),http2:I("http2"),payload:I("payload"),"@nestjs/mongoose":I("@nestjs/mongoose"),"@nestjs/core":I("@nestjs/core"),"@ionic/angular":I("@ionic/angular"),"firebase-admin/database":I("firebase-admin/database"),"firebase-admin":I("firebase-admin"),"firebase-functions":I("firebase-functions"),"puppeteer-core":I("puppeteer-core"),"coffee-script":I("coffee-script"),msw:I("msw"),"msw/node":I("msw/node"),mysql2:I("mysql2"),"mysql2/promise":I("mysql2"),"@worldcoin/idkit":I("@worldcoin/idkit"),"discord.js":I("discord.js"),nativewind:I("nativewind"),commander:I("commander"),cosmiconfig:I("cosmiconfig"),"react-native-svg":I("react-native-svg"),"google-auth-library":I("google-auth-library"),nextra:I("nextra")},T=Object.keys(D).join("|"),A=new RegExp("from ['\"](".concat(T,")['\"]")),L=new RegExp("import ['\"](".concat(T,")['\"]")),P=new RegExp("import\\(['\"](".concat(T,")['\"]\\)")),R=new RegExp("require\\(['\"](".concat(T,")['\"]\\)")),_={"@mui/utils":j.MATERIAL_UI_UTILS_WARNING},O=Object.keys(_).join("|"),F=new RegExp("from ['\"](".concat(O,")['\"]")),V=new RegExp("import ['\"](".concat(O,")['\"]")),B=new RegExp("import\\(['\"](".concat(O,")['\"]\\)")),z=new RegExp("require\\(['\"](".concat(O,")['\"]\\)"));function H(e){let t=/\.(ts|tsx|js|jsx|mjs|mts|cjs)$/i,n=e.filter(e=>!e.isDeleted);if(!n||0===n.length)return M.NON_SUPPORTED_FILES;let r=!1;if(!n.some(e=>e.meta.file&&(e.meta.file.endsWith(".tsx")||e.meta.file.endsWith(".jsx")||e.meta.file.endsWith("route.ts")&&e.source.includes("GET"))))return M.NON_SUPPORTED_FILES;let i=n.filter(e=>e.meta.file&&t.test(e.meta.file));if(!i.length)return M.NON_SUPPORTED_FILES;for(let{source:e}of i){let t=e.split("\n").filter(e=>e.trim().startsWith("import")).join("\n"),n=t.match(A)||t.match(L)||e.match(P)||e.match(R);if(n)return D[n[1]];let i=t.match(F)||t.match(V)||e.match(B)||e.match(z);if(i)return{warning:_[i[1]]};e.includes("export")&&(r=!0)}return!!r||M.NO_EXPORTED_COMPONENT}function U(e,t){let n;return H(n="code-project"===t.type?(0,b.parseMultiFileSource)({source:e,blockType:"code-project",blockId:"fake-block-id"}):[{source:e,meta:t,isDeleted:!1}])}e.s(["hasVisibleNextLiteContent",()=>U,"hasVisibleReactContent",()=>E],395542)},988094,797173,e=>{"use strict";e.s(["ErrorsBanner",()=>v],988094);var t=e.i(832520),n=e.i(176248),r=e.i(559903),i=e.i(422981),a=e.i(750955),o=e.i(183558),s=e.i(504066),l=e.i(449381),c=e.i(70165),u=e.i(236699),d=e.i(200407),p=e.i(304649),h=e.i(472166);e.i(168204);var f=e.i(225695),m=e.i(487581),g=e.i(780292);function v(e){let{errors:v,onDismiss:x,blockId:y,canWriteToChat:b}=e,{submit:w}=(0,h.useV0Chat)(),j=(0,l.useSetActiveBlockView)(),[C,k]=(0,d.useState)(!1),[S]=(0,g.useAtom)(m.previewBlockDisplayedErrorsVersion),N=(0,d.useMemo)(()=>v.filter(e=>e.blockId===(S||y)),[v,S,y]),{isCopied:E,copyToClipboard:M}=(0,s.useCopyToClipboard)({timeout:2e3}),[I,D]=(0,d.useState)(0),[T,A]=(0,d.useState)(!1),L=(0,d.useMemo)(()=>N.find(e=>e.isFatal),[N]),P=(0,d.useCallback)(()=>{I<=0?D(N.length-1):D(I-1)},[N,I]),R=(0,d.useCallback)(()=>{I>=N.length-1?D(0):D(I+1)},[N,I]);if(!N.length)return null;let _=()=>{var e;M(null!=(e=null==L?void 0:L.text)?e:N[I].text)},O=()=>{var e;k(!0),L||x();let t=L?L.currentURL:N[I].currentURL,n="The code returns the following error:\n```\n".concat(null!=(e=null==L?void 0:L.text)?e:N[I].text,"\n```\nRevise the code to address the error. ").concat(t?"\n\nI was previewing: ".concat(t):"");(0,c.getIsMobile)()&&j(!1),w({type:"fix-with-v0",action:"fix-with-v0",content:(0,f.createMDXMessageContent)(n)})};return L?(0,t.jsx)("div",{className:"absolute flex justify-center w-full h-full z-50",children:(0,t.jsx)("div",{className:"text-foreground absolute z-10 flex min-h-full max-w-4xl flex-col items-center justify-center px-10",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("h1",{className:"text-nowrap text-2xl font-semibold",children:"Runtime Error"}),(0,t.jsxs)("div",{className:"border-l-alpha-600 ml-5 flex flex-col gap-2 border-l pl-5",children:[(0,t.jsx)("h2",{className:"text-sm",children:L.text}),b&&(0,t.jsxs)("div",{className:"mt-2 flex gap-2",children:[(0,t.jsx)(n.Button,{className:"border-background text-foreground bg-transparent px-1.5 py-0.5 hover:no-underline",onClick:_,size:"sm",variant:"link",children:(0,t.jsx)(u.CopyCheck,{isCopied:E})}),(0,t.jsxs)(n.Button,{className:"h-6 rounded-md px-1.5 py-0.5 text-xs",onClick:O,size:"sm",variant:"secondary",disabled:C,children:["Fix with ",(0,t.jsx)(a.LogoV0,{})]})]})]})]})})}):(0,t.jsx)("div",{className:"light absolute bottom-0 left-0 z-10 max-w-[400px] p-4",children:(0,t.jsxs)("div",{className:"text-background flex min-w-[300px] flex-col items-center gap-3 rounded-[8px] bg-red-600 p-2 text-sm",role:"alert",children:[(0,t.jsxs)("div",{className:"flex w-full flex-col gap-1",children:[(0,t.jsxs)("div",{className:"flex w-full items-center justify-between font-semibold",children:[(0,t.jsxs)("span",{children:[(0,t.jsx)("span",{children:N[I].isServer?"Server":null})," Error"]})," ",(0,t.jsxs)(n.Button,{className:"text text-background m-[-4px] hover:text-gray-200",onClick:x,size:"xs",variant:"ghost",children:[(0,t.jsx)(o.CrossSmall,{}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]}),(0,t.jsx)("div",{className:"flex w-full",children:(0,t.jsx)("span",{className:(0,p.cn)("font-small text-background cursor-pointer overflow-hidden whitespace-pre-wrap font-mono text-[11px]",{"line-clamp-2":!T}),onClick:()=>A(!T),children:N[I].text})})]}),(0,t.jsxs)("div",{className:"flex w-full justify-between gap-2 align-middle",children:[(0,t.jsx)("div",{className:"flex items-center gap-2 align-middle",children:N.length>1&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.Button,{className:"border-background text-background bg-transparent px-1.5 py-0.5 hover:no-underline",onClick:P,variant:"link",children:(0,t.jsx)(r.ChevronLeft,{})}),(0,t.jsx)(n.Button,{className:"border-background text-background bg-transparent px-1.5 py-0.5 hover:no-underline",onClick:R,variant:"link",children:(0,t.jsx)(i.ChevronRight,{})}),(0,t.jsxs)("span",{className:"text-xs",children:[I+1," of ",N.length]})]})}),(0,t.jsx)("div",{className:"flex items-center gap-2 align-middle",children:b&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.Button,{className:"border-background text-background bg-transparent px-1.5 py-0.5 hover:no-underline",onClick:_,size:"sm",variant:"link",children:(0,t.jsx)(u.CopyCheck,{isCopied:E})}),(0,t.jsx)("div",{className:"border-alpha-400 border-l"}),(0,t.jsxs)(n.Button,{className:"h-6 rounded-md px-1.5 py-0.5 text-xs",onClick:O,size:"sm",variant:"secondary",children:["Fix with ",(0,t.jsx)(a.LogoV0,{})]})]})})]})]})})}e.s(["useBlockFiles",()=>w],797173);var x=e.i(926224),y=d,b=e.i(301331);function w(e){let{projectBlocks:t,projectBlockIndex:n}=(0,b.useBlockHistory)({blockId:e.blockId,includeNonVersionedBlocks:!e.closed}),r=(0,y.useMemo)(()=>{if("code-project"===e.meta.type)return(0,x.parseMultiFileSource)({source:e.source,blockType:"code-project",blockId:e.blockId})},[e.source,e.blockId,e.meta.type]),i=(0,y.useMemo)(()=>{if(e.closed||!r||!r.length)return;let t=r[r.length-1];if("file"in t.meta&&!t.isDeleted)return t.meta.file},[r,e.closed]);return{files:(0,y.useMemo)(()=>{if(!r)return;let i=[],a=new Map,o=t.slice(0,n),s=new Map;for(let e of o){let t=(0,x.parseMultiFileSource)({source:e.source,blockType:"code-project",blockId:e.id});i.push(...t)}i.push(...r);let l=new Set(e.closed?r.map(e=>e.meta.file):i.map(e=>e.meta.file));for(let e of i){let t=a.get(e.meta.file);t?a.set(e.meta.file,{...e,originalCode:t.source}):a.set(e.meta.file,{...e,originalCode:e.isQuickEdit&&!e.source?"// ".concat(e.isAttachmentQuickEdit?"Reading from":"Generating"," ").concat(e.meta.file):void 0}),s.has(e.meta.file)||s.set(e.meta.file,s.size)}return Array.from(a.values()).filter(e=>!e.isDeleted&&l.has(e.meta.file))},[n,t,r,e.closed]),loadingPath:i}}},262553,e=>{"use strict";e.s(["useReadOnlyMode",()=>o]);var t=e.i(200407),n=e.i(519738),r=e.i(584497),i=e.i(92479),a=e.i(449381);function o(){let e=(0,a.useActiveBlockState)(),{isLatest:o}=(0,n.useBlockVersionInfo)(null==e?void 0:e.id),{chatId:s}=(0,i.useChatId)(),{canWriteToChat:l}=(0,r.useChatMetadata)(s);return{isReadOnlyMode:(0,t.useMemo)(()=>!o&&l,[o,l]),isLatest:o,canWriteToChat:l}}},117803,e=>{"use strict";e.s(["useDesignModeEffects",()=>f,"useDesignModeSelectedItem",()=>m,"useDesignModeToggle",()=>g]);var t=e.i(200407),n=e.i(780292),r=e.i(84079),i=e.i(449381),a=e.i(53223),o=e.i(584497),s=e.i(70165),l=e.i(127169),c=e.i(577247),u=e.i(418929),d=e.i(668887),p=e.i(262553),h=e.i(284546);function f(){let{atoms:e,actions:a}=(0,d.useCurrentBlockDesignMode)(),o=(0,n.useAtomValue)(e.designModeEnabled),u=(0,n.useAtomValue)(e.selectElementEnabled),f=(0,i.useActiveBlockState)(),v=null==f?void 0:f.id,{isReadOnlyMode:x}=(0,p.useReadOnlyMode)(),y=(0,s.useIsMobile)(),{selectedElement:b}=m(),{activeTab:w}=(0,h.useActiveTab)(),{setDesignModeEnabled:j,setSelectElementEnabled:C}=g();(0,t.useEffect)(()=>{y&&j(!1)},[y,j]),(0,t.useEffect)(()=>{x&&o&&j(!1)},[x,o,j]),(0,l.useShortcut)(e=>{"KeyD"===e.code&&(e.altKey||e.metaKey)&&(e.preventDefault(),j(!o))},[j,o]);let k=(0,t.useCallback)(()=>{if(b&&v)return void(0,r.sendToIframeFromBlockId)(v,{type:"devtools_deselect"});u?a.setSelectElementEnabled(!1):a.setDesignModeEnabled(!1)},[b,v,u,a]);return(0,c.useMessage)(e=>{let{data:t}=e;if(t&&"object"==typeof t&&t.__v0_remote__)switch(t.type){case"devtools_state":"boolean"==typeof t.designMode&&j(t.designMode);break;case"escape_key_event":var n,r;(null==(n=t.event)?void 0:n.type)==="keydown"&&(null==(r=t.event)?void 0:r.key)==="Escape"&&k()}},[a,b,j]),(0,t.useEffect)(()=>{v&&(0,r.sendToIframeFromBlockId)(v,{type:"devtools_enable",enabled:o&&u,designMode:o,selectElementEnabled:u})},[v,o,u]),(0,t.useEffect)(()=>(u&&!b&&"preview"===w?document.body.classList.add("select-element-enabled"):document.body.classList.remove("select-element-enabled"),()=>document.body.classList.remove("select-element-enabled")),[u,b,w]),(0,l.useShortcut)(e=>{if("Escape"!==e.key||!o)return;let t=e.target;t&&("INPUT"===t.tagName||"TEXTAREA"===t.tagName||"SELECT"===t.tagName||"BUTTON"===t.tagName&&"tab"!==t.role||"DIV"===t.tagName&&"option"===t.role||t.isContentEditable)||(e.preventDefault(),k())},[k]),{setDesignModeEnabled:j,setSelectElementEnabled:C}}function m(){let{atoms:e}=(0,u.useCurrentChatPrompt)(),[t]=(0,n.useAtom)(e.refinementElementSelected);return{selectedElement:t}}function g(){let{atoms:e,actions:r}=(0,d.useCurrentBlockDesignMode)(),s=(0,n.useAtomValue)(e.designModeEnabled),l=(0,n.useAtomValue)(e.selectElementEnabled),{canWriteToChat:c}=(0,o.useChatMetadata)(),u=(0,i.useActiveBlockState)(),p=null==u?void 0:u.id,h=(0,t.useCallback)(e=>{c&&(r.setDesignModeEnabled(e),p&&e&&(0,a.track)("DesignModeToggled",{enabled:e}))},[c,r,p]),f=(0,t.useCallback)(()=>{h(!s)},[h,s]),m=(0,t.useCallback)(e=>{c&&(r.setSelectElementEnabled(e),p&&e&&(0,a.track)("DesignModeToggled",{enabled:e}))},[c,r,p]),g=(0,t.useCallback)(()=>{m(!l)},[m,l]);return{setDesignModeEnabled:h,setSelectElementEnabled:m,toggleDesignMode:f,toggleSelectElement:g}}},101486,e=>{"use strict";var t=e.i(200407),n=e.i(346970),r=e.i(375465);function i(e){let{enabled:r,bid:i,cid:a}=e,[o,s]=(0,t.useState)(800),{data:l,error:c,mutate:u}=(0,n.default)(r&&i&&a?"/chat/api/vm/status?bid=".concat(i,"&cid=").concat(a):null,async e=>{let t=await fetch(e);if(!t.ok)throw Error("Failed to fetch VM status");return t.json()},{refreshInterval:o});return(0,t.useEffect)(()=>{(null==l?void 0:l.status)==="running"&&s(5e3)},[null==l?void 0:l.status]),{subdomain:null==l?void 0:l.subdomain,status:null==l?void 0:l.status,error:c,refresh:u}}function a(e){let{enabled:t,bid:n,cid:i}=e,{data:a,error:o,mutate:s}=(0,r.default)(t&&n&&i?"/chat/api/vm/preview?bid=".concat(n,"&cid=").concat(i):null,async e=>{let t=await fetch(e);if(!t.ok)throw Error("Failed to fetch VM status");return t.json()});return{subdomain:null==a?void 0:a.subdomain,status:null==a?void 0:a.status,error:o,refresh:s}}e.s(["useVMPreviewSubdomain",()=>a,"useVMStatus",()=>i])},230222,827511,583309,105025,e=>{"use strict";e.s(["VMIframe",()=>p,"VMPending",()=>d],230222);var t=e.i(832520),n=e.i(200407),r=t,i=e.i(167343);function a(e){let{chatId:t,stale:n}=e,{data:a}=(0,i.default)("logs:".concat(t),(e,n)=>{let{next:r}=n,i=null;async function a(){try{let e=await fetch("/chat/api/vm/logs?cid=".concat(t));if(e.ok){let{logs:t}=await e.json();if(null===t)return void r(null,{rows:[]});let n=t.split("\n").map(e=>{try{let t=JSON.parse(e);return{timestamp:t[0],data:t[1]}}catch(t){return{timestamp:0,data:e}}});r(null,{rows:n})}else r(Error("Failed to fetch logs"))}catch(e){r(e)}i=setTimeout(a,500)}return a(),()=>{null!==i&&clearTimeout(i)}});if(!a||n)return(0,r.jsx)("div",{className:"p-2 text-xs text-gray-400",children:"Loading logs..."});let{rows:o}=a;return 0===o.length?(0,r.jsx)("div",{className:"p-2 text-xs text-gray-400",children:"Waiting for logs..."}):(0,r.jsx)("div",{className:"absolute w-full h-full overflow-auto text-gray-700 flex flex-col-reverse",children:(0,r.jsx)("pre",{className:"p-2 w-full whitespace-break-spaces text-sm",style:{fontFamily:'GeistMono, "Apple Color Emoji", ui-monospace, SFMono-Regular, Roboto Mono, Menlo, Monaco, Liberation Mono, DejaVu Sans Mono, Courier New, monospace'},children:o.map((e,t)=>(0,r.jsxs)("span",{className:"mb-1 flex gap-2",children:[(0,r.jsx)("span",{className:"text-gray-400 shrink-0",children:e.timestamp?new Date(e.timestamp).toLocaleTimeString():"    "}),(0,r.jsx)("span",{className:"min-w-0",children:e.data.trim()})]},t))})})}e.s(["VMLogs",()=>a],827511);var o=e.i(101486),s=e.i(304649),l=e.i(210045),c=e.i(917806);function u(e){let{children:n}=e;return(0,t.jsxs)("div",{className:"relative border-orange-500 border h-full w-full overflow-auto",children:[(0,t.jsx)("div",{className:"absolute top-6 left-6 -translate-x-1/2 -translate-y-1/2 -rotate-45 bg-orange-500 text-white text-xs font-medium px-4 select-none shadow z-50",children:"VM Mode"}),n]})}function d(e){let{blockId:r,chatId:i}=e,{status:a}=(0,o.useVMStatus)({enabled:!0,bid:r,cid:i}),[l,c]=(0,n.useState)(!1);return"error"===a?(0,t.jsxs)("div",{className:"text-red-500 flex-1 flex flex-col items-center justify-center gap-1",children:[(0,t.jsx)("span",{children:"The VM encountered an error. Please try to restart it."}),(0,t.jsx)("a",{className:(0,s.cn)("underline",l?"pointer-events-none":"cursor-pointer"),onClick:async()=>{c(!0);try{if(!(await fetch("/chat/api/vm/actions?cid=".concat(i,"&bid=").concat(r,"&type=recreate"),{method:"POST"})).ok)throw Error("Failed to recreate VM")}catch(e){console.error("Error recreating VM:",e)}finally{c(!1)}},children:l?"Restarting...":"Restart VM"})]}):"empty"===a?(0,t.jsx)("div",{className:"text-gray-500 flex-1 flex items-center justify-center",children:"Creating VM..."}):"initializing"===a?(0,t.jsx)("div",{className:"text-gray-500 flex-1 flex items-center justify-center",children:"Initializing..."}):a?(0,t.jsxs)("div",{className:"text-gray-500 flex-1 flex items-center justify-center",children:["VM Status: ",a]}):(0,t.jsx)("div",{className:"text-gray-500 flex-1 flex items-center justify-center",children:"Setting up VM..."})}function p(e){let{noBadge:r=!1,status:i,blockId:s,chatId:p,isPreviewable:h,iframeProps:f}=e,{status:m,subdomain:g}=(0,o.useVMStatus)({enabled:!0,bid:s,cid:p}),v=r?n.Fragment:u;return"running"!==i&&"running"!==m?(0,t.jsx)(v,{children:(0,t.jsxs)("div",{className:"flex flex-col gap-2 h-full w-full items-center justify-center overflow-auto",children:[(0,t.jsx)(d,{blockId:s,chatId:p}),(0,t.jsx)("div",{className:"relative border-t w-full h-1/3",children:(0,t.jsx)(a,{chatId:p,stale:!m&&("empty"===i||"stopped"===i)})})]})}):(0,t.jsx)(v,{children:(0,t.jsxs)("div",{className:"flex flex-col h-full w-full",children:[(0,t.jsx)("div",{className:"flex-1",children:h&&g?(0,t.jsx)(l.Iframe,{...f,origin:(0,c.getVMIframeOrigin)(g,s)}):null}),(0,t.jsx)("div",{className:"relative border-t w-full h-1/3",children:(0,t.jsx)(a,{chatId:p,stale:!1})})]})})}var h=n;function f(e,t){(0,h.useEffect)(()=>{if(!e)return;let n=null,r=r=>{if(!e||r.origin!==t)return;let i="chat:ls:".concat(e);if("localStorage-update"===r.data.type)window.localStorage.setItem(i,JSON.stringify(r.data.map));else if("localStorage-init-request"===r.data.type){var a;let e=window.localStorage.getItem(i),o=e?new Map(JSON.parse(e)):new Map;n=r.source,null==(a=r.source)||a.postMessage({type:"localStorage-store-update",map:Array.from(o.entries())},{targetOrigin:t})}},i=r=>{if(!e||r.key!=="chat:ls:".concat(e))return;let i=window.localStorage.getItem(r.key),a=i?new Map(JSON.parse(i)):new Map;null==n||n.postMessage({type:"localStorage-store-update",map:Array.from(a.entries())},{targetOrigin:t})};return window.addEventListener("message",r),window.addEventListener("storage",i),()=>{window.removeEventListener("message",r),window.removeEventListener("storage",i)}},[e,t])}e.s(["useLocalStorageFrameHost",()=>f],583309);var m=e.i(547259),g=(0,m.createServerReference)("402b871354fc6ce54790fb7269e76ec12c57920dac",m.callServer,void 0,m.findSourceMapURL,"updateAgentRuntimeErrors");e.s(["updateAgentRuntimeErrors",()=>g],105025)},889938,e=>{"use strict";let t=e=>({type:"refinement-element",...e}),n=e=>{if(!e.parts)return null;let t=[];for(let n of e.parts)"refinement-element"===n.type&&n.componentName&&t.push(n.componentName);return t.length>0?t:null},r=e=>{var t;let{event:n,file:r}=e,i=r.source.split("\n"),a=n.data.line,o=n.data.column;for(;i[a-1].length<o;)o-=i[a-1].length,a++;for(;o-1<i[a-1].length&&/\s/.test(i[a-1][o-1]);)o++;let s=i.slice(Math.max(0,a-4),a-1),l=i[a-1],c=i.slice(a,a+3),u=null==(t=l.substring(o).match(/^[\w.]+/))?void 0:t[0];return{sourceContext:u?(a>4?"...\n":"")+s.join("\n")+"\n"+l+"\n"+(" ".repeat(o)+"^".repeat(u.length))+"\n"+c.join("\n")+"\n"+(a+3<i.length?"...\n":""):l,componentName:u}};e.s(["createRefinementPart",0,t,"getRefinementElementLabelsFromContent",0,n,"structureRefinementData",0,r])},597932,513529,e=>{"use strict";e.s(["default",()=>ev],597932);var t=e.i(832520),n=e.i(696871),r=e.i(7809),i=e.i(176248),a=e.i(483962),o=e.i(265281),s=e.i(200407),l=e.i(638200),c=e.i(298450),u=e.i(763480),d=e.i(297239),p=e.i(987630);e.i(563948);var h=e.i(407562),f=e.i(230902),m=e.i(780292);e.s(["NextLiteBlockLogic",()=>eg,"consoleVisibilityAtom",()=>em],513529);var g=e.i(868275),v=t,x=s,y=e.i(204575),b=e.i(476371),w=e.i(284546),j=e.i(845210),C=e.i(917806),k=e.i(930293),S=e.i(84079),N=e.i(472166),E=e.i(295224),M=e.i(92479),I=e.i(805374),D=e.i(556355),T=e.i(160769),A=e.i(632082),L=i,P=e.i(896608),R=e.i(415117),_=e.i(163014),O=e.i(899488),F=e.i(622661),V=c,B=e.i(566274),z=e.i(374022),H=m,U=e.i(868948),q=e.i(53223),W=e.i(470259),Z=e.i(395542),G=e.i(696825),K=e.i(988094),X=e.i(584497),$=e.i(242759),Y=e.i(797173),J=e.i(487581),Q=e.i(577247),ee=e.i(117803),et=e.i(101486),en=e.i(230222),er=e.i(583309),ei=e.i(35590),ea=e.i(105025),eo=e.i(889938),es=e.i(768619),el=e.i(304649),ec=e.i(443265),eu=e.i(534607),ed=e.i(480118),ep=e.i(142219),eh=e.i(668887),ef=e.i(32170);let em=(0,z.atomWithStorage)("console-visible",!1);class eg{static Render(e){let{isPublished:t}=(0,j.usePublishedPage)(),{activeForkKey:n}=(0,M.useChatMessages)(),{isStreaming:r,chatId:i}=(0,M.useChatLoadingState)(),{canWriteToChat:a,project:o,ownerId:s}=(0,X.useChatMetadata)(),{user:l}=(0,ef.useUser)(),[c,u]=(0,H.useAtom)(J.previewBlockErrorsAtom),[d]=(0,H.useAtom)(em),{token:p,error:h}=(0,k.useSessionTokenForFrame)(i),{isBlockPreviewable:f,canShowPreviewTab:m}=(0,w.useActiveTab)(),g=(0,x.useRef)(f),{getBlockForked:I}=(0,G.useForkedBlocks)(),{vr:D,age:T}=(0,$.useFlags)(),A=(0,ed.useSearchParams)(),L=(0,x.useRef)(A.get("path"));(0,x.useEffect)(()=>{u([])},[e.blockId,u]);let{files:P,loadingPath:R}=(0,Y.useBlockFiles)({blockId:e.blockId,closed:e.closed,source:e.source,meta:e.meta}),_=(0,E.useLatest)(P),O=(0,y.getBlockIframeId)(e.blockId),{submit:F}=(0,N.useV0Chat)(),{setDesignModeEnabled:V}=(0,ee.useDesignModeToggle)();(0,Q.useMessage)(t=>{if(t.data&&"object"==typeof t.data&&t.data.__v0_remote__){if("generation_logs"===t.data.type){var i;let n=(t.data.logs||[]).join("\n\n"),a=ep.store.get(J.previewBlockCollectedErrorsVersion),o=ep.store.get(J.previewBlockDisplayedErrorsVersion)||e.blockId,s=(null==(i=ep.store.get(J.previewBlockPreloadingSuccessCallback))?void 0:i.callback)||null;if(a&&a!==o&&s&&!n){null==s||s(),ep.store.set(J.previewBlockPreloadingSuccessCallback,null);return}T&&r&&(0,ea.updateAgentRuntimeErrors)({blockId:t.data.id||e.blockId,fullErrorMessage:n}).catch(n=>{(0,q.track)("FailedToUpdateBlockRuntimeErrors",{blockId:t.data.id||e.blockId,error:n instanceof Error?n.message:String(n)})})}if("error"===t.data.type){let n=(0,U.cleanBlockError)(t.data.error,t.data.stack);u(r=>r.some(e=>e.text===n)||!g.current?r:((0,q.track)(t.data.isFatal?"V0BlockPreviewError":"V0BlockPreviewSoftError",{messageId:e.messageId,blockId:e.blockId,from:void 0!==e.meta.isQuickEdit?"quick-edit":void 0,forkedFromBlockId:I(e.blockId),resultId:e.resultId||""},{errorMsg:n,errorCode:W.V0_BLOCK_PREVIEW_ERROR}),r.concat({isFatal:t.data.isFatal,isServer:t.data.isServer,blockId:ep.store.get(J.previewBlockCollectedErrorsVersion)||e.blockId,text:n,currentURL:t.data.currentURL})))}if("frame_onload"===t.data.type){let e=document.getElementById(O);e&&(0,es.markIframeAsLoaded)(e),u([])}if(("refine"===t.data.type||"add-refinement-element"===t.data.type)&&(V(!1),_.current)){let r=_.current.find(e=>e.meta.file===t.data.file);if(!r)return void alert("File not found");let{componentName:i,sourceContext:a}=(0,eo.structureRefinementData)({event:t,file:r});if("refine"===t.data.type){let o={version:1,parts:[(0,eo.createRefinementPart)({file:r.meta.file,componentName:i||"",sourceContext:a,line:t.data.line,column:t.data.column}),{type:"mdx",content:t.data.prompt}]},s=(null==n?void 0:n.indexOf(e.messageId))||-1;n&&s>0&&s<n.length-1?F({action:"edit",content:o,userMessageId:n[s+1],type:"refinement"}):F({action:"new",content:o,attachments:[],type:"refinement"})}}}},[O,F,n,u,e.messageId,_,i,e.blockId,r,g,e.meta.isQuickEdit,I,e.resultId,V]);let B=null,{status:z}=(0,et.useVMPreviewSubdomain)({enabled:!!(D&&i),bid:e.blockId,cid:i}),Z=(0,C.getLiteIframeOrigin)(e.blockId,e.title);(0,er.useLocalStorageFrameHost)(i,Z);let{theme:el}=(0,ei.useTheme)(),ec=(0,x.useCallback)(()=>{let e=document.getElementById(O);if(!(null==e?void 0:e.contentWindow))return;let t=document.documentElement.classList.contains("dark");e.contentWindow.postMessage({type:"theme_change",isDark:t},"*")},[O]);if((0,x.useEffect)(()=>{ec()},[el,ec]),e.blockId&&f&&(p||h)){var eu,eh,eg,ev;let n=new URLSearchParams;t&&n.set("mql","true"),h||!p?n.set("__v0",""):p&&(l&&(l.teamId&&l.teamId===s||s===l.id)&&n.set("__v0_token",p),o&&n.set("__v0_vercel_project_id",o.vercelProjectId||"")),e.isV3&&n.set("isV3","true"),B=D&&i?(0,v.jsx)(en.VMIframe,{blockId:e.blockId,chatId:i,status:z,isPreviewable:f,iframeProps:{iframeId:O,isPublished:t,src:(null==(eu=L.current)?void 0:eu.startsWith("/"))?L.current:"/".concat(null!=(eh=L.current)?eh:"")}}):(0,v.jsx)(es.CachedNextLiteIframe,{chatId:i,blockId:e.blockId,iframeId:O,isPublished:t,origin:Z,src:"".concat((null==(eg=L.current)?void 0:eg.startsWith("/"))?L.current:"/".concat(null!=(ev=L.current)?ev:""),"?").concat(n.toString()),onLoad:ec}),"code-project"===e.meta.type&&(B=(0,v.jsx)("div",{className:"size-full","data-slot":"browser-content",children:B}))}return(0,v.jsxs)(b.PreviewBlock,{initialFileTreeSize:e.initialFileTreeSize,...e,resultId:void 0,loadingPath:R,files:P,blockType:"code-project"===e.meta.type?"code-project":"v0",language:"typescriptreact",allowRefresh:"code-project"!==e.meta.type,allowFullScreen:"code-project"!==e.meta.type,isV3:e.isV3,initialConsoleSize:e.initialConsoleSize,initialConsoleExpanded:e.initialConsoleExpanded,hideConsole:!d,browserControls:"code-project"===e.meta.type?(0,v.jsx)(S.BrowserFrame,{blockId:e.blockId,iframeId:O}):void 0,children:[c.length?(0,v.jsx)(K.ErrorsBanner,{errors:c,blockId:e.blockId,onDismiss:()=>{u([])},canWriteToChat:a}):null,B]})}}function ev(e){let{children:g,blockId:v,consoleEvents:x=[],clearLogs:y,canWriteToChat:b,activeFilePath:w,setActiveFilePath:j,initialSize:C,initialExpanded:k,onShouldExpand:S,hide:N}=e,[E,M]=(0,s.useState)(""),{blockStatus:I,clearEvents:D}=(0,c.useNewConsoleEvents)(v);I[v];let[,T]=(0,m.useAtom)(em),A=(0,s.useRef)(null),L=(0,s.useMemo)(()=>{if(!E)return x;let e=E.toLowerCase();return x.filter(t=>"console"===t.type?t.message.toLowerCase().includes(e):t.content.toLowerCase().includes(e))},[x,E]),P=(0,s.useCallback)(e=>{e.stopPropagation(),navigator.clipboard.writeText(L.map(e=>"console"===e.type?"".concat((0,f.format)(new Date(e.timestamp),"HH:mm:ss.SSS"),"Z	").concat(e.isServer?"[SERVER]	":"").concat(e.message):null).filter(e=>!!e).join("\n")),h.toast.default("Copied to clipboard")},[L]),R=(0,d.useT)();return(0,t.jsxs)("div",{className:"relative flex size-full min-h-0 flex-1 flex-col",children:[g,N?null:(0,t.jsx)(a.Resizable,{animated:!1,axis:"y",cookieName:n.CONSOLE_RESIZE_COOKIE,dotsHandle:!1,initialSize:null!=C?C:n.INITIAL_CONSOLE_SIZE,minSizePx:n.CONSOLE_MIN_SIZE_PX,minNegativeSpace:144,show:!0,side:"start",className:"z-20",ref:A,children:(0,t.jsxs)("div",{className:"bg-muted group/log-panel-header relative flex size-full flex-col border-t",children:[(0,t.jsxs)("div",{className:"flex h-9 w-full shrink-0 items-center justify-between",children:[(0,t.jsx)("div",{className:"flex items-center gap-1.5 px-3 text-sm text-gray-900",children:(0,t.jsx)("span",{children:R("logPanel.console")})}),(0,t.jsxs)("div",{className:"flex gap-0.5 pr-2",children:[(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)(u.Input,{placeholder:"Filter...",size:"xs",className:"w-44 rounded-md px-2 text-[13px] mr-2",value:E,onChange:e=>M(e.target.value),onClick:e=>e.stopPropagation()}),(0,t.jsx)(i.Button,{variant:"ghost",size:"xs",className:"text-gray-500",tooltip:{side:"bottom",content:"Copy logs"},onClick:P,disabled:0===x.length,children:(0,t.jsx)(p.AnimatedCopy,{})}),(0,t.jsx)(i.Button,{variant:"ghost",size:"xs",className:"text-gray-500",tooltip:{side:"bottom",content:"Clear logs"},onClick:e=>{e.stopPropagation(),null==y||y()},disabled:0===x.length,children:(0,t.jsx)(l.AnimatedTrash,{})})]}),(0,t.jsx)(i.Button,{tooltip:{side:"bottom",content:"Hide console"},variant:"ghost",className:"text-gray-500",size:"xs",onClick:e=>{e.stopPropagation(),T(!1)},children:(0,t.jsx)(r.Cross,{})})]})]}),(0,t.jsx)(o.ConsoleViewer,{hideHeader:!0,consoleEvents:L,clearLogs:y||(()=>{}),canWriteToChat:b,className:"bg-transparent",activeFilePath:w,setActiveFilePath:j})]})})]})}(0,g._)(eg,"getIsPreviewable",e=>{let{closed:t,source:n,meta:r}=e;if(!t)return!1;let i=(0,Z.hasVisibleNextLiteContent)(n,r);return"string"==typeof i?{error:i}:i}),(0,g._)(eg,"Actions",x.default.memo(e=>{let{blockId:t,closed:n}=e;return(0,v.jsx)(I.PreviewBlockTitleActions,{blockId:t,closed:n})})),(0,g._)(eg,"BrowserControls",x.default.memo(e=>{let{blockId:t}=e;return(0,v.jsx)(S.BrowserFrame,{blockId:t,iframeId:(0,y.getBlockIframeId)(t)})})),(0,g._)(eg,"ConsoleToggle",x.default.memo(e=>{let{blockId:t}=e,[n,r]=(0,H.useAtom)(em),{blockStatus:i,clearEvents:a}=(0,V.useNewConsoleEvents)(t),o=i[t],s=()=>{let e=!n;r(e),e&&a()};return(0,v.jsx)(O.CodeBlockButton,{onClick:s,tooltip:{side:"bottom",content:n?"Hide Console":"Show Console"},className:"size-7 rounded-md text-gray-600 hidden sm:flex",children:(0,v.jsx)(F.default,{status:o,isExpanded:n})})})),(0,g._)(eg,"DesignCursorToggle",x.default.memo(()=>{let{atoms:e}=(0,eh.useCurrentBlockDesignMode)(),t=(0,H.useAtomValue)(e.selectElementEnabled),{toggleSelectElement:n}=(0,ee.useDesignModeToggle)(),{canWriteToChat:r}=(0,X.useChatMetadata)(),i=(0,eu.useMac)(),{activeTab:a}=(0,w.useActiveTab)();return r&&"code"!==a?(0,v.jsx)(O.CodeBlockButton,{onClick:n,tooltip:{side:"bottom",content:(0,v.jsxs)("div",{className:"flex items-center gap-1",children:[(0,v.jsx)("span",{children:"Select an Element"}),(0,v.jsx)(ec.Kbd,{children:(0,v.jsx)("span",{children:i?"⌥":"Alt"})}),(0,v.jsx)(ec.Kbd,{children:(0,v.jsx)("span",{children:"D"})})]})},variant:t?"blue-ghost":"ghost",className:(0,el.cn)("size-7 rounded-md hidden sm:flex",!t&&"text-gray-600"),children:(0,v.jsx)(_.Crosshair,{})}):null})),(0,g._)(eg,"MoreMenu",x.default.memo(e=>{let{blockId:t,blockLanguage:n,blockSource:r}=e,{fullScreenResult:i,setFullscreenResult:a}=(0,B.useFullscreenResult)(),[o,s]=(0,H.useAtom)(em),{blockStatus:l,clearEvents:c}=(0,V.useNewConsoleEvents)(t),u=l[t],{activeTab:d}=(0,w.useActiveTab)(),p=()=>{let e=!o;s(e),e&&c()};return(0,v.jsxs)(D.DropdownMenu,{children:[(0,v.jsx)(D.DropdownMenuTrigger,{asChild:!0,children:(0,v.jsx)(L.Button,{variant:"ghost",className:"size-7 rounded-md text-gray-600",size:"sm",tooltipDirection:"bottom",tooltip:"More options",children:(0,v.jsx)(P.MoreHorizontal,{})})}),(0,v.jsxs)(D.DropdownMenuContent,{align:"end",side:"bottom",sideOffset:8,children:["code"!==d&&(0,v.jsxs)(D.DropdownMenuGroup,{children:[(0,v.jsxs)(D.DropdownMenuItem,{onSelect:()=>a(!i,t),children:[(0,v.jsx)(R.Fullscreen,{}),(0,v.jsx)("span",{children:i?"Exit fullscreen":"Fullscreen"})]}),(0,v.jsxs)(D.DropdownMenuItem,{className:"sm:hidden",onSelect:()=>{p()},children:[(0,v.jsx)(F.default,{status:u,isExpanded:o}),(0,v.jsx)("span",{children:o?"Hide Console":"Show Console"})]})]}),(0,v.jsx)(D.DropdownMenuSeparator,{}),(0,v.jsxs)(D.DropdownMenuGroup,{children:[(0,v.jsx)(A.BlockActionCli,{blockId:t||"",lang:n,source:r}),(0,v.jsx)(T.BlockActionDownloadZip,{blockId:t,lang:n,source:r})]})]})]})}))},43116,e=>{"use strict";e.s(["VSCodeEditorWrapper",()=>v,"loadVSCodeEditor",()=>m]);var t=e.i(832520),n=e.i(200407),r=e.i(847801),i=e.i(811140),a=e.i(313595),o=e.i(894906),s=e.i(44756),l=e.i(934994),c=e.i(926224),u=e.i(295224),d=e.i(92479),p=e.i(222199);e.i(563948);var h=e.i(407562),f=e.i(262553);function m(){return e.A(3178).then(async e=>(await e.init(),e.VSCodeEditor))}let g=(0,r.default)(m,{ssr:!1});function v(e){let{blockId:r,source:m,files:v,activeFilePath:x,editValueMap:y,onEdit:b,reloadIframe:w}=e,j=(0,n.useRef)(void 0),{isReadOnlyMode:C}=(0,f.useReadOnlyMode)(),k=(0,u.useLatest)((0,o.useUpdateBlockData)(r)),S=(0,n.useRef)(m),N=(0,n.useRef)(r),{isStreaming:E}=(0,d.useChatLoadingState)(),[M,I]=(0,n.useState)(()=>{let e=Promise.resolve();return t=>{e=e.then(()=>t((0,c.parseMultiFileSource)({source:S.current,blockType:"code-project",blockId:N.current})))}}),D=(0,n.useMemo)(()=>({onRename:(e,t)=>{C||M(async n=>{await (0,i.renameFile)(n,{fileName:e},t,k.current,!0),w()})},onDeleteFolder(e){C||M(async t=>{await (0,l.deleteFolder)(t,{folderName:e},k.current),w()})},onDeleteFile(e){C||M(async t=>{await (0,s.deleteFile)(t,{fileName:e},k.current),w()})},onNewFolder:e=>{},onNewFile:(e,t,n)=>{C||M(async r=>{r.some(n=>n.meta.file==="".concat(e,"/").concat(t))||(await (0,a.createFile)(N.current,r,{folderName:e},t,n,k.current),w())})},onUpload:e=>{C||(S.current=m,N.current=r,(0,p.createFileInput)({multiple:!0,onFilesSelected:async t=>{try{let n=(0,c.parseMultiFileSource)({source:S.current,blockType:"code-project",blockId:N.current}),r=await (0,p.uploadFilesToFileTree)({files:t,targetDirectory:e,blockId:N.current,existingFiles:n});if(r.success&&r.files){let t=[...n,...r.files];await k.current(t),I(()=>{let e=Promise.resolve();return n=>{e=e.then(()=>n(t))}}),w(),h.toast.success("Uploaded ".concat(r.files.length," file(s) to ").concat(e||"root"))}else h.toast.error(r.error||"Failed to upload files")}catch(e){h.toast.error("An unexpected error occurred while uploading files"),console.error("File upload error:",e)}}}).click())}}),[C,M,w,m,r,k]);return(0,t.jsx)(n.Suspense,{fallback:(0,t.jsx)("div",{children:"Loading..."}),children:(0,t.jsx)(g,{onEdit:b,diffOriginalCode:null,disabled:!1,readOnly:E||C,files:v,editValueMap:y,activeFilePath:x,ref:j,blockId:r,eventCallbacks:D})})}},988118,e=>{"use strict";let t={current:null};e.s(["designModeInlineEditRef",0,t])},90177,e=>{"use strict";var t=e.i(832520),n=e.i(309161);function r(){return(0,t.jsx)("div",{className:"bg-muted flex aspect-square w-full items-center justify-center rounded-xl",children:(0,t.jsxs)("div",{className:"relative flex size-12 items-center justify-center",children:[(0,t.jsx)("div",{className:"absolute inset-0 rounded-full border-2 border-gray-200"}),(0,t.jsx)("div",{className:"animate-spin-slow absolute inset-0 rounded-full border-2 border-transparent border-t-gray-500"}),(0,t.jsx)("div",{className:"text-3xl text-gray-400",children:(0,t.jsx)(n.Image,{})})]})})}e.s(["LoadingImage",()=>r])},487230,e=>{e.v({blur:"block-view-loader-module__aUjaiG__blur",content:"block-view-loader-module__aUjaiG__content"})},427619,(e,t,n)=>{t.exports=function(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}},615529,(e,t,n)=>{var r=e.r(427619),i=e.r(394370);t.exports=function(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=i(n))==n?n:0),void 0!==t&&(t=(t=i(t))==t?t:0),r(i(e),t,n)}},480450,e=>{"use strict";e.s(["BlockViewLoader",()=>x]);var t=e.i(832520),n=e.i(707827),r=e.i(770858),i=e.i(745587),a=e.i(200407),o=e.i(797173),s=e.i(487230),l=e.i(403055),c=e.i(365290),u=e.i(615529),d=e.i(360174),p=e.i(675120),h=e.i(762585),f=e.i(529693);let m=200,g=[...Array(200)].map(()=>"".concat(Math.floor(80*Math.random())+20,"%"));function v(){return(0,t.jsxs)("div",{className:"flex w-full",children:[(0,t.jsx)("div",{className:"flex flex-col gap-2 px-[11px]",children:[...Array(m)].map((e,n)=>(0,t.jsx)(h.Skeleton,{className:"size-4"},n))}),(0,t.jsx)("div",{className:"flex flex-1 flex-col gap-2",children:[...Array(m)].map((e,n)=>(0,t.jsx)(h.Skeleton,{className:"h-4",style:{width:g[n]}},n))})]})}function x(e){let{blockId:c,closed:u,source:h,meta:m,switchToCode:g}=e,{files:x,loadingPath:b}=(0,o.useBlockFiles)({blockId:c,closed:u,source:h,meta:m}),{activeFilePath:w}=(0,i.useActiveFile)({blockId:c,files:x,loadingPath:b}),j=(null==x?void 0:x.length)?x.find(e=>e.meta.file===w)||x[0]:void 0,[C,k]=(0,a.useState)((null==j?void 0:j.source)||""),S=(0,a.useRef)((0,d.default)(e=>{k(e)},500)),N=e=>{if(!e)return"";let t=32;return e.length>t?"...".concat(e.slice(-(t-3))):e},E="Generating".concat((null==j?void 0:j.meta.file)?" ".concat(N(j.meta.file)):"");(0,a.useEffect)(()=>{S.current((null==j?void 0:j.source)||"")},[null==j?void 0:j.source]);let M=j&&C.split("\n").length>=9,I=(0,a.useMemo)(()=>C?C.split("\n").map(e=>{var t;let n=Math.floor(((null==(t=e.match(/^\s*/))?void 0:t[0])||"").length/2);return e.slice(n).replaceAll("<CHANGE>","")}).filter(e=>!e.includes("... existing code ...")).join("\n"):"",[C]);return(0,t.jsx)(f.motion.div,{className:"relative m-auto",initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},children:(0,t.jsx)(p.TransitionNode,{renderKey:E,duration:.4,exit:{scale:.98},delay:.1,enter:{scale:1.02},children:(0,t.jsxs)("button",{className:"relative flex flex-1 flex-col items-start justify-center gap-3 overflow-hidden",onClick:g,children:[(0,t.jsxs)("div",{className:"text-heading-16 flex h-5 items-center gap-2 px-[11px]",children:[(0,t.jsx)(n.Spinner,{size:16}),E]}),(0,t.jsx)(p.TransitionNode,{renderKey:M?"showSource":"hideSource",duration:.4,exit:{scale:.98},delay:.1,enter:{scale:1.02},children:(0,t.jsx)("div",{className:(0,l.cn)(s.default.content,"relative h-[200px] w-[400px] overflow-hidden"),children:(0,t.jsx)(y,{height:200,children:M?(0,t.jsx)(r.MemorizedHighlighter,{isTabbed:!1,minLineNumberChars:3,language:j.lang,showLineNumbers:!0,value:I,wrapLongLines:!0,style:{padding:0}}):(0,t.jsx)(v,{})},"".concat(M,"-").concat(null==j?void 0:j.meta.file))})})]})})})}function y(e){let{children:n,baseScrollIncrementPx:r=20,height:i=0}=e,o=(0,a.useRef)(null),[s,l]=(0,a.useState)(0);return(0,a.useEffect)(()=>{let e=setInterval(()=>{var e;let t=null==(e=o.current)?void 0:e.getBoundingClientRect().height;t&&l(e=>{let n=t-i,a=(Math.floor((n-e)/2/r)+1)*r;return(0,u.default)(e+a,0,n)})},700);return()=>clearInterval(e)},[r,i]),(0,t.jsx)("div",{ref:o,className:"pointer-events-none relative flex-1 overflow-auto text-sm",style:{transform:"translateY(-".concat(s,"px)"),...(0,c.transitionStyles)(["transform"],{duration:600})},children:n})}},866568,e=>{"use strict";let t=(0,e.i(605528).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M6 1V1.75V5C6 5.55229 5.55228 6 5 6H1.75H1V4.5H1.75H4.5V1.75V1H6ZM14.25 6H15V4.5H14.25H11.5V1.75V1H10V1.75V5C10 5.55228 10.4477 6 11 6H14.25ZM10 14.25V15H11.5V14.25V11.5H14.29H15.04V10H14.29H11C10.4477 10 10 10.4477 10 11V14.25ZM1.75 10H1V11.5H1.75H4.5V14.25V15H6V14.25V11C6 10.4477 5.55229 10 5 10H1.75Z" fill="currentColor"/>');e.s(["FullscreenClose",0,t])},476371,e=>{"use strict";e.s(["FileContent",()=>el,"PreviewBlock",()=>es,"updatePreviewImmediate",()=>en]);var t=e.i(832520),n=e.i(284546),r=e.i(770858),i=e.i(7284),a=e.i(845210),o=e.i(204575),s=e.i(969116),l=e.i(460265),c=e.i(676648),u=e.i(634066),d=e.i(87467),p=e.i(780752),h=e.i(658252),f=e.i(481556),m=e.i(827728),g=e.i(200407),v=e.i(297239),x=e.i(707827),y=e.i(242828),b=e.i(847801),w=e.i(218139),j=e.i(346970),C=e.i(455552),k=e.i(230905),S=e.i(380105),N=e.i(745587),E=e.i(343258),M=e.i(295224),I=e.i(280738),D=e.i(382559),T=e.i(584497),A=e.i(32170),L=e.i(597932),P=e.i(403055),R=e.i(583965),_=e.i(242759),O=e.i(43116),F=e.i(70165),V=e.i(988118),B=e.i(90177),z=e.i(554912),H=e.i(480450),U=e.i(92479),q=e.i(53223),W=e.i(566274),Z=e.i(899488),G=e.i(750955),K=e.i(491341),X=e.i(866568),$=e.i(577247),Y=e.i(668887),J=e.i(385671);let Q=g.default.memo(e=>{let{pictureInPictureLoaderEnabled:n,blockLoaderEnabled:r,children:i,closed:a,isStreaming:o,blockId:s,source:l,switchToCode:c,designModeEnabled:u,meta:d,messagesLength:p,isBlockPreviewable:h}=e;return n||!r||a||!o||h?i:(0,t.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,t.jsx)(H.BlockViewLoader,{switchToCode:c,blockId:s,closed:a,source:l,meta:d})})});Q.displayName="PreviewBlockChildren";let ee=(0,b.default)(()=>e.A(781679).then(e=>e.MultiFileLocalCodeBlock),{loadableGenerated:{modules:[454437]},ssr:!1}),et=(e,t,n,r)=>{if(e){var i;null==(i=e.contentWindow)||i.postMessage({type:"preview_code_delta",file:t,source:n,version:r},"*")}},en=(e,t,n)=>{if(e){var r;null==(r=e.contentWindow)||r.postMessage({type:"preview_code",code:t,version:n},"*")}},er=en,ei=(0,y.default)(en,300);function ea(e){let[t,n]=(0,g.useState)(null),r=(0,g.useRef)(null);return(0,g.useEffect)(()=>{function t(){let i=document.getElementById(e);i?(n(i),r.current&&(clearTimeout(r.current),r.current=null)):r.current=setTimeout(t,1e3)}return t(),()=>{r.current&&(clearTimeout(r.current),r.current=null)}},[e,n]),t}function eo(e){let{children:n,blockType:r,browserControls:i,blockId:a}=e,{fullScreenResult:o,setFullscreenResult:s}=(0,W.useFullscreenResult)(),{canWriteToChat:l}=(0,T.useChatMetadata)();return"code-project"===r&&o&&i?(0,t.jsx)(f.FullscreenContainer,{allowOnMobile:!0,children:(0,t.jsxs)("div",{className:"flex size-full flex-col",children:[(0,t.jsxs)("div",{className:"flex h-12 w-full shrink-0 items-center gap-2 px-3 border-b border-border bg-background",children:[(0,t.jsx)("div",{className:"flex-1 flex items-center justify-start",children:!l&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-gray-500",children:[(0,t.jsx)(K.default,{href:"/",children:(0,t.jsx)(G.LogoV0,{className:"h-4 w-4"})}),(0,t.jsx)("span",{className:"text-xs",children:"User-generated content"})]})}),(0,t.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,t.jsx)("div",{className:"min-w-0 max-w-full",children:i})}),(0,t.jsx)("div",{className:"flex-1 flex items-center justify-end",children:(0,t.jsx)(Z.CodeBlockButton,{onClick:()=>s(!o,a),tooltip:{side:"bottom",content:"Exit fullscreen"},children:(0,t.jsx)(X.FullscreenClose,{})})})]}),(0,t.jsx)("div",{className:"w-full flex-1 overflow-y-auto overflow-x-hidden",children:n})]})}):(0,t.jsx)(f.FullscreenContainer,{children:n})}function es(e){let{children:r,allowRefresh:f,allowFullScreen:b=!0,initialFileTreeSize:B,resultId:H,language:W,remoteInfo:Z,meta:G,source:K,blockId:X,blockType:ee,closed:en,hasSourceBeenEdited:es,onEdit:ec,files:eu,loadingPath:ed,originalCode:ep,isV3:eh,initialConsoleSize:ef,initialConsoleExpanded:em,hideConsole:eg=!1,browserControls:ev}=e,{activeFilePath:ex,setActiveFilePath:ey,setAutoSwitch:eb}=(0,N.useActiveFile)({blockId:X,files:eu,loadingPath:ed}),{getFullIframeHref:ew}=(0,R.useBrowserFrame)(X),{ve:ej,bl:eC,pipl:ek}=(0,_.useFlags)(),{isStreaming:eS}=(0,U.useChatLoadingState)(),{actions:{setActiveTabIntent:eN}}=(0,J.useChatLayout)(),{editValueMap:eE,setEditValueMap:eM}=(0,E.useEditValueMap)({blockId:X}),{consoleEvents:eI,appendConsoleEvent:eD,appendCodeOutputEvents:eT,clearConsoleEvents:eA,expandConsole:eL,setExpandConsole:eP}=(0,z.useConsole)(X),eR=(0,m.useIsMounted)(),{isPublished:e_}=(0,a.usePublishedPage)(),{canWriteToChat:eO}=(0,T.useChatMetadata)(),eF=(0,v.useT)(),{data:eV,mutate:eB}=(0,j.default)(X?["remote:accepted",X]:null,null,{fallbackData:null==Z?void 0:Z.accepted}),{messagesLength:ez}=(0,U.useChatMessagesLength)(),eH=ea((0,o.getBlockIframeId)(null!=H?H:X)),eU=(0,M.useLatest)(eE),eq=(0,Y.useDesignModeEnabled)(),eW=(0,M.useLatest)(eu),[eZ,eG]=(0,g.useState)(),{isBlockPreviewable:eK,canShowPreviewTab:eX,previewMeta:e$,activeTab:eY}=(0,n.useActiveTab)(),eJ=(0,t.jsx)(Q,{pictureInPictureLoaderEnabled:!!ek,blockLoaderEnabled:!!eC,closed:en,isStreaming:eS,isBlockPreviewable:eK,blockId:X,designModeEnabled:eq,switchToCode:()=>eN("code"),source:K,meta:G,messagesLength:ez,children:r}),eQ=(0,g.useCallback)((e,t,n,r)=>{if(!en)return;let i={...eU.current,[t]:e};if(eM(i),null==ec||ec(e),eH)if("code-project"===ee)r?et(eH,t,e,n):er(eH,(0,C.getMultiFileSourceMap)((0,C.updateFilesInFileList)(i,eW.current||[])),n);else if("v0"===ee)ei(eH,e);else{var a;null==(a=eH.contentWindow)||a.postMessage({type:W.toUpperCase()+"_RENDER",source:e},eH.dataset.origin||"")}},[eH,en,eU,eM,ec,ee,eW,W]),e0=(0,g.useCallback)((e,t,n,r,i,a,o,s)=>{var l;if(!eW.current)return;let c=eW.current.findIndex(t=>t.meta.file===e);if(-1===c)return;let u=null!=(l=null!=o?o:eU.current[e])?l:eW.current[c].source;if(s){let[e,t]=s;u=u.substring(0,e)+i+u.substring(t)}else{let e=u.split("\n"),a=0;for(let n=0;n<t-1;n++)a+=e[n].length+1;u=u.substring(0,a+n-1)+i+u.substring(a+n-1+r)}eQ(u,e,a,!0)},[eW,eU,eQ]);(0,g.useEffect)(()=>{V.designModeInlineEditRef.current={inlineEdit:(0,y.default)(e0,50,{leading:!0,trailing:!0}),getContent(e){var t;if(!eW.current)return;let n=eW.current.findIndex(t=>t.meta.file===e);if(-1!==n)return null!=(t=eU.current[e])?t:eW.current[n].source},jumpToFile(e,t,n){eN("code"),ey(e),eG([t,n])},postMessage:e=>{if(eH){var t;null==(t=eH.contentWindow)||t.postMessage({__v0_remote__:!0,...e},"*")}}}},[e0,eN,eH]),(0,$.useMessage)(e=>{if(eH&&e.data&&"object"==typeof e.data&&e.data.__v0_remote__)switch(e.data.type){case"frame_ready":if("code-project"===ee){var t;if(!(null==(t=eW.current)?void 0:t.length))return;Object.keys(eU.current).length>0&&er(eH,(0,C.getMultiFileSourceMap)((0,C.updateFilesInFileList)(eU.current,eW.current)))}break;case"inline_edit":e0(e.data.file,e.data.line,e.data.column,e.data.len,e.data.replace,e.data.version);break;case"console":eD(e.data);break;case"browser_event":(0,q.track)("BrowserEvent",{type:e.data.event.type})}},[eH,ee,eW,eQ,eU,eD,e0]);let e1=eu||[{source:K,meta:G,originalCode:ep,lang:W,isQuickEdit:!!G.isQuickEdit,blockId:X}],e2=(0,g.useCallback)(()=>{eM({})},[eM]),{user:e5}=(0,A.useUser)(),e4=(0,F.useIsMobile)(),e3=(0,g.useCallback)(()=>{eH&&(eH.contentDocument?eH.contentDocument.location.reload():eH.src=ew(eH))},[eH,ew]),e7=(0,k.useUnsavedChanges)({blockId:X,editValueMap:eE,isAdminSaving:!eO&&!!(null==e5?void 0:e5.isAdminMode),source:K,meta:G,files:e1,clearEditValueMap:e2}),[,e9]=(0,D.useFileEditingStatus)(X),e6=e7.hasUnsavedChanges;(0,g.useEffect)(()=>{e9(e6)},[e6,e9]);let e8=en&&(!!eO||!!(null==e5?void 0:e5.isAdminMode));if(e_)return(0,t.jsx)("div",{className:(0,i.default)("bg-muted h-full min-h-0 overflow-hidden","preview"===eY&&"border-alpha-200",!eR&&"opacity-0"),children:eJ});if("code-project"===ee){if(!B)throw Error("code-project block is missing initialFileTreeSize");let e=e1.length?e1.find(e=>e.meta.file===ex)||e1[0]:void 0,n=e?[{key:"preview",content:eX?(0,t.jsxs)("div",{className:"flex h-full w-full flex-col",children:[(b||f)&&(0,t.jsxs)(I.BlockTabHeader,{className:"bg-muted justify-end gap-1",bottomBorder:!0,children:[b?(0,t.jsx)(h.FullscreenButton,{}):null,f?(0,t.jsx)(p.RefreshPreview,{blockId:H||X}):null]}),(0,t.jsx)("div",{className:"w-full flex-1 overflow-y-auto overflow-x-hidden",children:(0,t.jsx)(eo,{blockType:ee,browserControls:ev,blockId:X,children:eJ})})]}):null},eh?null:{key:"code",content:ej&&!1===e4?(0,t.jsx)(O.VSCodeEditorWrapper,{blockId:X,source:K,reloadIframe:e3,onEdit:(e,t)=>{eQ(t,e)},files:eu||[],activeFilePath:ex,editValueMap:eE}):(0,t.jsx)(S.MultiFileCode,{showDiffInfo:en,loadingPath:ed,activeFilePath:ex,setActiveFile:e=>{eb&&eb(!1),ey(e)},initialFileTreeSize:B,files:eu,source:K,blockId:X,onChange:e3,children:(0,t.jsxs)("div",{className:"flex h-full w-full flex-col",children:[(0,t.jsxs)(I.BlockTabHeader,{className:"justify-between gap-2",onePixelShorter:!0,children:[(0,t.jsx)("div",{className:"flex min-w-0 items-center gap-1 overflow-x-auto",children:ex&&ex.split("/").map((e,n)=>(0,t.jsxs)(g.default.Fragment,{children:[(0,t.jsx)("div",{className:"whitespace-nowrap font-medium nth-last-2:text-gray-900",children:e},"part-".concat(e,"-").concat(n)),(0,t.jsx)("div",{className:"last:hidden",children:(0,t.jsx)(l.ChevronRightSmall,{})},"chevron-".concat(e,"-").concat(n))]},"part-".concat(e,"-").concat(n)))}),(0,t.jsx)("div",{className:"flex items-center gap-1",children:(0,t.jsx)(d.CodeBlockActions,{closed:en,additionalHeaderActions:void 0,allowClose:!1,blockId:X,allowCopyCode:!0,allowDownloadCode:!0,originalCode:e.originalCode,caller:"v0",closeHandler:null,fileName:e.meta.file,isTabbed:!0,value:eE[G.file||""]||e.source,isExecutable:e.meta.file.includes("scripts")&&"code"===eY,transactionMeta:e.meta.transaction,language:e.lang,onExecutionComplete:e=>{eT(e),null==eL||eL()}})})]}),(0,t.jsx)("div",{className:"w-full flex-1 overflow-y-auto overflow-x-hidden",children:(0,t.jsx)(el,{blockType:ee,remoteInfo:Z,isMultiFile:!0,closed:en,blockId:X,setEditValueMap:eM,language:e.lang,editValueMap:eE,hasSourceBeenEdited:es,handleEdit:eQ,file:e,editable:e8,location:eZ,appendCodeOutputEvents:eT})})]})})}].filter(P.isNonNullable):[];return(0,t.jsx)(L.default,{hide:eg||!!eC&&!en&&eS,blockId:X,consoleEvents:eI,clearLogs:eA,canWriteToChat:eO,activeFilePath:ex,setActiveFilePath:ey,initialSize:ef,initialExpanded:em,onShouldExpand:e=>eP(()=>e),children:(0,t.jsxs)("div",{className:"relative min-h-0 w-full flex-1 grow",children:[(0,t.jsx)(s.TabContent,{tabFiles:n,activeTabKey:eY}),e8?(0,t.jsx)(k.UnsavedChanges,{...e7,resetValue:()=>{eH&&(window.dispatchEvent(new CustomEvent("editor-reset-changes")),er(eH,(0,C.getMultiFileSourceMap)((0,C.updateFilesInFileList)({},eW.current||[]))))},mergedFromBlockId:X,isV3:eh}):null]})})}let te=e1.map(e=>({key:void 0!==eu?G.file+"code":"code",display:G.file||"Untitled",content:(0,t.jsx)(el,{blockType:ee,remoteInfo:Z,closed:en,blockId:X,setEditValueMap:eM,language:W,editValueMap:eE,hasSourceBeenEdited:es,handleEdit:eQ,file:e,editable:e8,appendCodeOutputEvents:eT}),actions:(0,t.jsx)(d.CodeBlockActions,{closed:en,additionalHeaderActions:void 0,allowClose:!1,blockId:X,allowCopyCode:!0,allowDownloadCode:!0,originalCode:e.originalCode,caller:"v0",closeHandler:null,fileName:e.meta.file,isTabbed:!0,value:eE[G.file||""]||e.source})})),tt={key:"preview",disabled:!eX,tooltip:"error"===e$.type?e$.error:eC||en||!eS?void 0:eF("previewBlock.previewIsStreaming"),display:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(u.Window,{className:"group-disabled:hidden"}),(0,t.jsx)("div",{className:"hidden group-disabled:block",children:en?(0,t.jsx)(c.EyeOff,{}):(0,t.jsx)(x.Spinner,{size:16})}),eF("previewBlock.preview")]}),content:(0,t.jsx)(eo,{blockType:ee,browserControls:ev,blockId:X,children:eJ}),actions:(0,t.jsxs)(t.Fragment,{children:[b?(0,t.jsx)(h.FullscreenButton,{}):null,f?(0,t.jsx)(p.RefreshPreview,{blockId:H||X}):null]})};return(0,t.jsxs)(t.Fragment,{children:["local"!==ee||"@remote"===X||eu?null:(0,t.jsx)(w.UnappliedChanges,{blockId:X,hasUnappliedChanges:!!(!0!==eV||eE[G.file||""]&&eE[G.file||""]!==K),source:eE[G.file||""]||K,onApply:()=>{eB(!0)},showFadeOut:"code"===eY}),e8?(0,t.jsx)(k.UnsavedChanges,{...e7,resetValue:()=>{if(eH)if(window.dispatchEvent(new CustomEvent("editor-reset-changes")),"v0"===ee)er(eH,e1[0].source);else{var e;null==(e=eH.contentWindow)||e.postMessage({type:W.toUpperCase()+"_RENDER",source:e1[0].source},eH.dataset.origin||"")}},mergedFromBlockId:X,isV3:eh}):null,(0,t.jsx)(s.TabFileViewer,{activeTabKey:eY,isLoading:!en,setActiveTabKey:e=>{"code"===e?eN("code"):"preview"===e&&eN("preview")},tabFiles:[tt,...te]})]})}function el(e){let{blockType:n,remoteInfo:a,closed:o,blockId:s,setEditValueMap:l,isMultiFile:c,language:u,editValueMap:d,hasSourceBeenEdited:p,handleEdit:h,file:f,location:m,editable:v,className:x,appendCodeOutputEvents:y}=e,{source:b,meta:w,originalCode:j,isQuickEdit:C}=f;return"local"===n?(0,t.jsx)(g.Suspense,{fallback:null,children:(0,t.jsx)(ee,{remoteInfo:a,blockId:s,source:b,onEdit:e=>{o&&l(t=>({...t||{},[w.file||""]:e}))},closed:o})}):f.meta.url&&!f.source.trim().length?(0,t.jsx)("div",{className:"p-4",children:(0,t.jsx)(eu,{url:f.meta.url,file:f.meta.file,isTempFile:f.isTempFile})}):(0,t.jsx)(r.CodeBlock,{isMultiFile:c,allowQuoting:!0,closed:o,caller:"v0",originalCode:j,showQuickEditAnimation:!o&&C,className:(0,i.default)("not-prose flex-1 grow",x),editable:v,fixingBadLines:f.fixingBadLines,fileName:w.file,language:u,blockId:s,editValue:d[w.file||""],hasSourceBeenEdited:p,onEdit:e=>h(e,w.file||""),runnable:!0,showLineNumbers:!0,value:b,type:w.type,location:m,onExecutionComplete:y})}let ec=(e,t)=>{var n;if(t)return t;let r=(null==(n=e.split(".").pop())?void 0:n.toLowerCase())||"";return["jpg","jpeg","png","gif","svg","webp","avif","ico"].includes(r)?"image":["glb","gltf"].includes(r)?"3d":["mp3","wav","ogg","flac"].includes(r)?"audio":["mp4","webm","ogv"].includes(r)?"video":"pdf"===r?"pdf":"unknown"};function eu(e){let{url:n,mimeType:r,file:i,isTempFile:a}=e,[o,s]=(0,g.useState)(null),l=ec(n,r);(0,g.useEffect)(()=>{s(null)},[n]);let c=()=>{s("Failed to load ".concat(l," from ").concat(n))};if(o)return(0,t.jsx)("div",{className:"rounded border border-red-300 bg-red-50 p-4 text-red-500",children:o});switch(l){case"image":if(a)return(0,t.jsx)(B.LoadingImage,{});return(0,t.jsx)("img",{src:n||"/placeholder.svg",className:"h-auto max-w-full",onError:c,alt:"Preview of ".concat(i)});case"3d":return(0,t.jsx)("div",{className:"h-[400px] w-full",children:"Previewing 3D models is not currently supported."});case"audio":return(0,t.jsxs)("audio",{controls:!0,className:"w-full",onError:c,children:[(0,t.jsx)("source",{src:n}),"Your browser does not support the audio element."]});case"video":return(0,t.jsxs)("video",{controls:!0,className:"h-auto max-w-full",onError:c,children:[(0,t.jsx)("source",{src:n}),"Your browser does not support the video element."]});case"pdf":return(0,t.jsxs)("div",{className:"rounded border bg-gray-50 p-4",children:[(0,t.jsxs)("p",{className:"mb-2",children:["PDF document:"," ",(0,t.jsx)("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:"Open PDF"})]}),(0,t.jsx)("iframe",{src:"".concat(n,"#view=FitH"),className:"h-[500px] w-full",onError:c})]});default:return(0,t.jsx)("div",{className:"rounded border bg-gray-50 p-4",children:(0,t.jsxs)("p",{children:["Unknown file type."," ",(0,t.jsx)("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:"Download file"})]})})}}},829732,205795,238580,139615,44366,e=>{"use strict";e.s(["CodeExecutionBlockLogic",()=>I],829732);var t=e.i(868275),n=e.i(832520),r=e.i(200407),i=e.i(770858),a=e.i(110909),o=e.i(66045),s=e.i(53223),l=e.i(346970),c=e.i(596359),u=e.i(483962),d=e.i(899488),p=e.i(504066),h=e.i(407211),f=e.i(636139),m=e.i(304649),g=e.i(696871),v=e.i(845210),x=e.i(192670),y=e.i(987630),b=e.i(638200),w=e.i(969116),j=e.i(87467),C=e.i(827728),k=e.i(476371),S=e.i(230905),N=e.i(343258),E=e.i(65151),M=e.i(584497);class I{static Render(e){var t;let{isPublished:I}=(0,v.usePublishedPage)(),D=(0,C.useIsMounted)(),{isCopied:T,copyToClipboard:A}=(0,p.useCopyToClipboard)({timeout:2e3}),{editValueMap:L,setEditValueMap:P}=(0,N.useEditValueMap)({blockId:e.blockId}),{canWriteToChat:R}=(0,M.useChatMetadata)(),{data:_,mutate:O}=(0,l.default)(["block:output",e.blockId]),{data:F}=(0,l.default)("block:output:initial");(0,r.useEffect)(()=>{(null==F?void 0:F.id)===e.blockId&&F.result.then(e=>{e&&O(t=>t||e.value)})},[F,e.blockId,O]);let V=_;if(void 0===V&&(null==F?void 0:F.id)===e.blockId&&F){let e=(0,r.use)(F.result);e&&(V=e.value)}let B=async()=>{if(T)return;let e=(0,E.getOutputString)(V);return await A(e),(0,s.track)("CopyOutputExecutable",{output:e})},z=(0,r.useMemo)(()=>f.runnableLanguages.includes(e.language)&&f.runnableExtensions.some(t=>{var n;return null==(n=e.meta.file)?void 0:n.endsWith(t)}),[e.language,e.meta.file]),H=(0,S.useUnsavedChanges)({blockId:e.blockId,editValueMap:L,source:e.source,meta:e.meta,files:[{source:e.source,meta:e.meta}],clearEditValueMap:()=>P({})}),U=I?g.OUTPUT_RESIZE_PUBLISHED_COOKIE:g.OUTPUT_RESIZE_COOKIE,q=[{key:"code",display:e.meta.file,content:(0,n.jsxs)(n.Fragment,{children:[e.closed&&R?(0,n.jsx)(S.UnsavedChanges,{...H,resetValue:()=>{},mergedFromBlockId:e.blockId}):null,(0,n.jsx)(k.FileContent,{blockType:e.meta.type,remoteInfo:void 0,isMultiFile:!0,closed:e.closed,blockId:e.blockId,className:H.hasUnsavedChanges?"pb-14":"",setEditValueMap:P,language:e.language,editValueMap:L,hasSourceBeenEdited:e.hasSourceBeenEdited,handleEdit:t=>{t&&e.closed&&P(n=>({...n,[e.meta.file||""]:t}))},file:{source:e.source,meta:e.meta,lang:e.language,blockId:e.blockId,isQuickEdit:!!e.meta.isQuickEdit},editable:!!(e.closed&&R)},e.blockId)]}),actions:(0,n.jsx)(j.CodeBlockActions,{additionalHeaderActions:void 0,allowClose:!1,allowCopyCode:!0,allowDownloadCode:!0,caller:"v0",closeHandler:null,fileName:e.meta.file,isTabbed:!0,value:L[e.meta.file||""]||e.source,originalCode:e.originalCode,blockId:e.blockId,closed:e.closed,language:e.language})}],W=I?(0,n.jsx)(i.CodeBlock,{originalCode:e.originalCode,showQuickEditAnimation:!e.closed&&!!e.meta.isQuickEdit,closed:e.closed,blockId:e.blockId,allowQuoting:!0,caller:"executable",className:"min-h-52 flex-1 rounded-md",editable:!1,fileName:e.meta.file,language:e.language,runnable:z,showLineNumbers:!0,value:e.source}):(0,n.jsx)(w.TabFileViewer,{isLoading:!e.closed,activeTabKey:"code",className:"min-h-52 w-full flex-1",setActiveTabKey:()=>{},tabFiles:q});return(0,n.jsxs)("div",{className:(0,m.cn)("not-prose flex h-full w-full flex-col",I&&"bg-muted overflow-hidden rounded-md border",!D&&"opacity-0"),children:[W,z&&(0,n.jsx)(u.Resizable,{animated:!1,axis:"y",cookieName:U,dotsHandle:!1,initialSize:null!=(t=e.initialOutputSize)?t:33,minSizePx:200,show:!0,side:"start",children:(0,n.jsx)("div",{className:"border-alpha-400 flex size-full min-h-0 flex-1 flex-col items-center justify-center border-t",children:V?(0,n.jsxs)("div",{className:"flex size-full flex-col items-stretch",children:[(0,n.jsxs)("div",{className:(0,m.cn)("flex items-center justify-between border-b px-2 py-1"),children:[(0,n.jsx)("h3",{className:"select-none text-sm font-medium text-gray-500",children:"Output"}),(0,n.jsxs)("div",{className:"flex select-none items-center gap-1",children:[(0,n.jsx)(h.CodeExecutionRunButton,{buttonText:"Run",codeExecutionBlockProps:e,editedValue:L[e.meta.file||""]||void 0,execute:o.doExecution,setOutput:O,variant:"ghost"}),(0,n.jsx)("div",{className:"bg-alpha-400 h-4 w-px"}),(0,n.jsx)(d.CodeBlockButton,{"aria-label":"Clear",onClick:()=>O(void 0),tooltip:"Clear",children:(0,n.jsx)("span",{"aria-hidden":!0,children:(0,n.jsx)(b.AnimatedTrash,{})})}),(0,n.jsx)(d.CodeBlockButton,{"aria-label":"Download",disabled:"error"in V,onClick:()=>(0,E.downloadAsFile)(V),tooltip:"Download",children:(0,n.jsx)("span",{"aria-hidden":!0,children:(0,n.jsx)(x.AnimatedDownload,{})})}),(0,n.jsx)(d.CodeBlockButton,{disabled:"error"in V,onClick:B,tooltip:"Copy",children:(0,n.jsx)("span",{"aria-hidden":!0,children:T?(0,n.jsx)(c.Check,{}):(0,n.jsx)(y.AnimatedCopy,{})})})]})]}),(0,n.jsx)(a.CodeOutput,{className:"h-full",value:V})]}):(0,n.jsxs)("div",{className:"flex flex-col items-center",children:[(0,n.jsx)("p",{className:"mb-2 text-base font-medium text-gray-900",children:"No Output"}),(0,n.jsx)("p",{className:"mb-6 text-sm text-gray-500",children:e.closed?"Run the code to generate an output.":"You can execute the code after it has finished streaming."}),(0,n.jsx)(h.CodeExecutionRunButton,{codeExecutionBlockProps:e,disabled:!e.closed,editedValue:L[e.meta.file||""]||void 0,execute:o.doExecution,setOutput:O})]})})})]})}static Actions(e){return null}}(0,t._)(I,"getIsPreviewable",()=>!1),(0,t._)(I,"TitleActions",null),(0,t._)(I,"BrowserControls",null),(0,t._)(I,"MoreMenu",null),(0,t._)(I,"ConsoleToggle",null),(0,t._)(I,"DesignCursorToggle",null),e.s(["V0BlockLogic",()=>G],205795);var D=t,T=n,A=e.i(917806),L=r,P=e.i(204575),R=k,_=e.i(395542),O=s,F=e.i(470259),V=e.i(301331),B=v,z=e.i(92479),H=e.i(210045),U=e.i(868948),q=e.i(696825),W=e.i(805374),Z=e.i(284546);class G{}(0,D._)(G,"getIsPreviewable",e=>{let{source:t,closed:n,meta:r}=e,i=(0,_.hasVisibleReactContent)(t,r.file);return"string"==typeof i?{error:i}:!!i&&n}),(0,D._)(G,"Render",L.default.memo(e=>{let t=(0,z.useSetChatState)(),{isPublished:n}=(0,B.usePublishedPage)(),{chatId:r}=(0,z.useChatId)(),{getBlockForked:i}=(0,q.useForkedBlocks)(),{projectBlocks:a,projectBlockIndex:o,allBlocks:s}=(0,V.useBlockHistory)({blockId:e.blockId}),{isBlockPreviewable:l,canShowPreviewTab:c}=(0,Z.useActiveTab)(),u=(0,L.useMemo)(()=>{var e;let t={},n=(null==(e=a[o])?void 0:e.meta.file)||".";for(let e of s)e.resultId&&e.meta.file&&(t[e.meta.file]=e.resultId);for(let e=0;e<=o;e++){let n=a[e],r=n.meta.file;r&&n.resultId&&(t[r]=n.resultId)}return{mapping:t,rootFileName:n}},[s,a,o]),d=(0,L.useRef)(null),[p,h]=(0,L.useState)(null);return(0,L.useEffect)(()=>{if(d.current)return(0,A.listenToIframe)(d.current,t=>{switch(t.type){case"set_loading":d.current&&((0,A.sendData)(d.current,{type:"parent_ready"}),(0,A.sendData)(d.current,{type:"sync_file_mapping",data:u}));break;case"error":case"runtime-error":{let n=(0,U.cleanBlockError)(t.error);t.resultId===e.resultId&&h(r=>(r!==n&&l&&(0,O.track)("V0BlockPreviewError",{messageId:e.messageId,blockId:e.blockId,resultId:t.resultId,from:e.meta.isQuickEdit?"quick-edit":void 0,forkedFromBlockId:i(e.blockId)},{errorMsg:n,errorCode:F.V0_BLOCK_PREVIEW_ERROR}),n))}}})},[i,e,l,e.blockId,e.meta.from,e.resultId,u,t]),(0,L.useEffect)(()=>{h(null)},[e.blockId]),(0,T.jsxs)(R.PreviewBlock,{allowRefresh:!0,...e,blockType:"v0",language:"typescriptreact",children:[p?(0,T.jsx)(U.ErrorBanner,{error:p,onDismiss:()=>{h(null)}}):null,e.resultId&&l?(0,T.jsx)(H.Iframe,{iframeId:(0,P.getBlockIframeId)(e.resultId),iframeRef:d,isPublished:n,onLoad:()=>{d.current&&(0,A.sendData)(d.current,{type:"sync_file_mapping",data:u})},origin:(0,A.getIframeOrigin)(r||e.blockId),src:"/p/".concat(e.resultId,"?c=1&flags=1&bid=").concat(e.blockId)}):null]})})),(0,D._)(G,"Actions",L.default.memo(e=>{let{blockId:t,closed:n}=e;return(0,T.jsx)(W.PreviewBlockTitleActions,{blockId:t,closed:n})})),(0,D._)(G,"BrowserControls",null),(0,D._)(G,"MoreMenu",null),(0,D._)(G,"ConsoleToggle",null),(0,D._)(G,"DesignCursorToggle",null),e.s(["CodeBlockLogic",()=>J],238580);var K=t,X=n,$=r,Y=k;class J{static Actions(){return null}}(0,K._)(J,"getIsPreviewable",()=>!1),(0,K._)(J,"Render",$.default.memo(e=>(0,X.jsx)(Y.PreviewBlock,{hidePreviewPane:!0,...e,blockType:"code"}))),(0,K._)(J,"BrowserControls",null),(0,K._)(J,"MoreMenu",null),(0,K._)(J,"ConsoleToggle",null),(0,K._)(J,"DesignCursorToggle",null),e.s(["HTMLBlockLogic",()=>eh],44366);var Q=t,ee=n,et=r,en=P,er=k,ei=v,ea=r,eo=e.i(295224);function es(e,t,n){let[r,i]=(0,ea.useState)(!1),a=(0,eo.useLatest)(r),o=(0,eo.useLatest)(t);(0,ea.useEffect)(()=>{let t=document.getElementById(n),r=n=>{if(n.origin===t.dataset.origin&&n.data.type===e+"_READY"&&(i(!0),o.current)){var r;null==(r=t.contentWindow)||r.postMessage({type:e+"_RENDER",source:o.current},t.dataset.origin||"")}};return window.addEventListener("message",r),()=>{window.removeEventListener("message",r)}},[e,n,o]),(0,ea.useEffect)(()=>{let r=document.getElementById(n);if(r){var i,o;a.current?null==(i=r.contentWindow)||i.postMessage({type:e+"_RENDER",source:t},r.dataset.origin||""):null==(o=r.contentWindow)||o.postMessage({type:e+"_PING"},r.dataset.origin||"")}},[t,e,n,a])}e.s(["useIframeAutoRender",()=>es],139615);var el=A,ec=z,eu=H,ed=W;let ep=RegExp("<!DOCTYPE html>.*?<\\/html>","s");class eh{static Render(e){let{isPublished:t}=(0,ei.usePublishedPage)(),{chatId:n}=(0,ec.useChatId)(),r=(0,en.getBlockIframeId)(e.blockId);return es("HTML",e.source,r),(0,ee.jsx)(er.PreviewBlock,{...e,blockType:"html",language:"html",children:(0,ee.jsx)(eu.Iframe,{iframeId:r,isPublished:t,origin:(0,el.getIframeOrigin)(n||e.blockId),src:"/render/html"})})}}(0,Q._)(eh,"getIsPreviewable",e=>{let{source:t,closed:n}=e;return n||ep.test(t)}),(0,Q._)(eh,"Actions",et.default.memo(e=>{let{blockId:t,closed:n}=e;return(0,ee.jsx)(ed.PreviewBlockTitleActions,{blockId:t,closed:n})})),(0,Q._)(eh,"BrowserControls",null),(0,Q._)(eh,"MoreMenu",null),(0,Q._)(eh,"ConsoleToggle",null),(0,Q._)(eh,"DesignCursorToggle",null)},430957,e=>{"use strict";var t=e.i(832520),n=e.i(304649);function r(e){let{className:r,...i}=e;return(0,t.jsx)("div",{className:(0,n.cn)("prose prose-sm prose-gray min-w-0 break-words",r),...i})}e.s(["Prose",()=>r])},622449,e=>{"use strict";e.i(168204),e.i(225695);let t=e=>"user"===e.role?e.id:e.continuingMessageId||e.id;e.s(["getUIMessageKey",0,t])},816220,e=>{"use strict";function t(e,t){let n=t||{};return(""===e[e.length-1]?[...e,""]:e).join((n.padRight?" ":"")+","+(!1===n.padLeft?"":" ")).trim()}e.s(["stringify",()=>t])},158206,e=>{"use strict";let t=/[ \t\n\f\r]/g;function n(e){return"object"==typeof e?"text"===e.type&&r(e.value):r(e)}function r(e){return""===e.replace(t,"")}e.s(["whitespace",()=>n])},722365,e=>{"use strict";function t(e){return e.join(" ").trim()}e.s(["stringify",()=>t])},6809,(e,t,n)=>{var r=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,i=/\n/g,a=/^\s*/,o=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,s=/^:\s*/,l=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,c=/^[;\s]*/,u=/^\s+|\s+$/g,d="\n",p="/",h="*",f="",m="comment",g="declaration";function v(e){return e?e.replace(u,f):f}t.exports=function(e,t){if("string"!=typeof e)throw TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,u=1;function x(e){var t=e.match(i);t&&(n+=t.length);var r=e.lastIndexOf(d);u=~r?e.length-r:u+e.length}function y(){var e={line:n,column:u};return function(t){return t.position=new b(e),k(),t}}function b(e){this.start=e,this.end={line:n,column:u},this.source=t.source}b.prototype.content=e;var w=[];function j(r){var i=Error(t.source+":"+n+":"+u+": "+r);if(i.reason=r,i.filename=t.source,i.line=n,i.column=u,i.source=e,t.silent)w.push(i);else throw i}function C(t){var n=t.exec(e);if(n){var r=n[0];return x(r),e=e.slice(r.length),n}}function k(){C(a)}function S(e){var t;for(e=e||[];t=N();)!1!==t&&e.push(t);return e}function N(){var t=y();if(p==e.charAt(0)&&h==e.charAt(1)){for(var n=2;f!=e.charAt(n)&&(h!=e.charAt(n)||p!=e.charAt(n+1));)++n;if(n+=2,f===e.charAt(n-1))return j("End of comment missing");var r=e.slice(2,n-2);return u+=2,x(r),e=e.slice(n),u+=2,t({type:m,comment:r})}}function E(){var e=y(),t=C(o);if(t){if(N(),!C(s))return j("property missing ':'");var n=C(l),i=e({type:g,property:v(t[0].replace(r,f)),value:n?v(n[0].replace(r,f)):f});return C(c),i}}function M(){var e,t=[];for(S(t);e=E();)!1!==e&&(t.push(e),S(t));return t}return k(),M()}},518043,(e,t,n)=>{"use strict";var r=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});var i=r(e.r(6809));n.default=function(e,t){var n=null;if(!e||"string"!=typeof e)return n;var r=(0,i.default)(e),a="function"==typeof t;return r.forEach(function(e){if("declaration"===e.type){var r=e.property,i=e.value;a?t(r,i,e):i&&((n=n||{})[r]=i)}}),n}},897802,417798,842965,352446,722259,12105,212470,872238,346863,540795,434036,759239,941392,820667,403010,803621,983691,576597,e=>{"use strict";function t(){}function n(){}e.s(["ok",()=>t,"unreachable",()=>n],897802);var r=e.i(816220);RegExp("[$_\\p{ID_Start}]","u"),RegExp("[$_\\u{200C}\\u{200D}\\p{ID_Continue}]","u"),RegExp("[-$_\\u{200C}\\u{200D}\\p{ID_Continue}]","u");let i=RegExp("^[$_\\p{ID_Start}][$_\\u{200C}\\u{200D}\\p{ID_Continue}]*$","u"),a=RegExp("^[$_\\p{ID_Start}][-$_\\u{200C}\\u{200D}\\p{ID_Continue}]*$","u"),o={};function s(e,t){return((t||o).jsx?a:i).test(e)}var l=e.i(158206);function c(e){return e.toLowerCase()}class u{constructor(e,t){this.property=e,this.attribute=t}}u.prototype.space=null,u.prototype.boolean=!1,u.prototype.booleanish=!1,u.prototype.overloadedBoolean=!1,u.prototype.number=!1,u.prototype.commaSeparated=!1,u.prototype.spaceSeparated=!1,u.prototype.commaOrSpaceSeparated=!1,u.prototype.mustUseProperty=!1,u.prototype.defined=!1;let d=0,p=y(),h=y(),f=y(),m=y(),g=y(),v=y(),x=y();function y(){return 2**++d}e.s(["boolean",0,p,"booleanish",0,h,"commaOrSpaceSeparated",0,x,"commaSeparated",0,v,"number",0,m,"overloadedBoolean",0,f,"spaceSeparated",0,g],360827);var b=e.i(360827);let w=Object.keys(b);class j extends u{constructor(e,t,n,r){let i=-1;if(super(e,t),C(this,"space",r),"number"==typeof n)for(;++i<w.length;){let e=w[i];C(this,w[i],(n&b[e])===b[e])}}}function C(e,t,n){n&&(e[t]=n)}j.prototype.defined=!0;let k=/^data[-\w.:]+$/i,S=/-[a-z]/g,N=/[A-Z]/g;function E(e,t){let n=c(t),r=t,i=u;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&"data"===n.slice(0,4)&&k.test(t)){if("-"===t.charAt(4)){let e=t.slice(5).replace(S,I);r="data"+e.charAt(0).toUpperCase()+e.slice(1)}else{let e=t.slice(4);if(!S.test(e)){let n=e.replace(N,M);"-"!==n.charAt(0)&&(n="-"+n),t="data"+n}}i=j}return new i(r,t)}function M(e){return"-"+e.toLowerCase()}function I(e){return e.charAt(1).toUpperCase()}let D={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"};class T{constructor(e,t,n){this.property=e,this.normal=t,n&&(this.space=n)}}function A(e,t){let n={},r={},i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new T(n,r,t)}T.prototype.property={},T.prototype.normal={},T.prototype.space=null;let L={}.hasOwnProperty;function P(e){let t,n={},r={};for(t in e.properties)if(L.call(e.properties,t)){let i=e.properties[t],a=new j(t,e.transform(e.attributes||{},t),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(t)&&(a.mustUseProperty=!0),n[t]=a,r[c(t)]=t,r[c(a.attribute)]=t}return new T(n,r,e.space)}let R=P({space:"xlink",transform:(e,t)=>"xlink:"+t.slice(5).toLowerCase(),properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),_=P({space:"xml",transform:(e,t)=>"xml:"+t.slice(3).toLowerCase(),properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function O(e,t){return t in e?e[t]:t}function F(e,t){return O(e,t.toLowerCase())}let V=P({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:F,properties:{xmlns:null,xmlnsXLink:null}}),B=P({transform:(e,t)=>"role"===t?t:"aria-"+t.slice(4).toLowerCase(),properties:{ariaActiveDescendant:null,ariaAtomic:h,ariaAutoComplete:null,ariaBusy:h,ariaChecked:h,ariaColCount:m,ariaColIndex:m,ariaColSpan:m,ariaControls:g,ariaCurrent:null,ariaDescribedBy:g,ariaDetails:null,ariaDisabled:h,ariaDropEffect:g,ariaErrorMessage:null,ariaExpanded:h,ariaFlowTo:g,ariaGrabbed:h,ariaHasPopup:null,ariaHidden:h,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:g,ariaLevel:m,ariaLive:null,ariaModal:h,ariaMultiLine:h,ariaMultiSelectable:h,ariaOrientation:null,ariaOwns:g,ariaPlaceholder:null,ariaPosInSet:m,ariaPressed:h,ariaReadOnly:h,ariaRelevant:null,ariaRequired:h,ariaRoleDescription:g,ariaRowCount:m,ariaRowIndex:m,ariaRowSpan:m,ariaSelected:h,ariaSetSize:m,ariaSort:null,ariaValueMax:m,ariaValueMin:m,ariaValueNow:m,ariaValueText:null,role:null}}),z=P({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:F,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:v,acceptCharset:g,accessKey:g,action:null,allow:null,allowFullScreen:p,allowPaymentRequest:p,allowUserMedia:p,alt:null,as:null,async:p,autoCapitalize:null,autoComplete:g,autoFocus:p,autoPlay:p,capture:p,charSet:null,checked:p,cite:null,className:g,cols:m,colSpan:null,content:null,contentEditable:h,controls:p,controlsList:g,coords:m|v,crossOrigin:null,data:null,dateTime:null,decoding:null,default:p,defer:p,dir:null,dirName:null,disabled:p,download:f,draggable:h,encType:null,enterKeyHint:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:p,formTarget:null,headers:g,height:m,hidden:p,high:m,href:null,hrefLang:null,htmlFor:g,httpEquiv:g,id:null,imageSizes:null,imageSrcSet:null,inputMode:null,integrity:null,is:null,isMap:p,itemId:null,itemProp:g,itemRef:g,itemScope:p,itemType:g,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:p,low:m,manifest:null,max:null,maxLength:m,media:null,method:null,min:null,minLength:m,multiple:p,muted:p,name:null,nonce:null,noModule:p,noValidate:p,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:p,optimum:m,pattern:null,ping:g,placeholder:null,playsInline:p,poster:null,preload:null,readOnly:p,referrerPolicy:null,rel:g,required:p,reversed:p,rows:m,rowSpan:m,sandbox:g,scope:null,scoped:p,seamless:p,selected:p,shape:null,size:m,sizes:null,slot:null,span:m,spellCheck:h,src:null,srcDoc:null,srcLang:null,srcSet:null,start:m,step:null,style:null,tabIndex:m,target:null,title:null,translate:null,type:null,typeMustMatch:p,useMap:null,value:h,width:m,wrap:null,align:null,aLink:null,archive:g,axis:null,background:null,bgColor:null,border:m,borderColor:null,bottomMargin:m,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:p,declare:p,event:null,face:null,frame:null,frameBorder:null,hSpace:m,leftMargin:m,link:null,longDesc:null,lowSrc:null,marginHeight:m,marginWidth:m,noResize:p,noHref:p,noShade:p,noWrap:p,object:null,profile:null,prompt:null,rev:null,rightMargin:m,rules:null,scheme:null,scrolling:h,standby:null,summary:null,text:null,topMargin:m,valueType:null,version:null,vAlign:null,vLink:null,vSpace:m,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:p,disableRemotePlayback:p,prefix:null,property:null,results:m,security:null,unselectable:null}}),H=P({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:O,properties:{about:x,accentHeight:m,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:m,amplitude:m,arabicForm:null,ascent:m,attributeName:null,attributeType:null,azimuth:m,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:m,by:null,calcMode:null,capHeight:m,className:g,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:m,diffuseConstant:m,direction:null,display:null,dur:null,divisor:m,dominantBaseline:null,download:p,dx:null,dy:null,edgeMode:null,editable:null,elevation:m,enableBackground:null,end:null,event:null,exponent:m,externalResourcesRequired:null,fill:null,fillOpacity:m,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:v,g2:v,glyphName:v,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:m,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:m,horizOriginX:m,horizOriginY:m,id:null,ideographic:m,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:m,k:m,k1:m,k2:m,k3:m,k4:m,kernelMatrix:x,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:m,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:m,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:m,overlineThickness:m,paintOrder:null,panose1:null,path:null,pathLength:m,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:g,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:m,pointsAtY:m,pointsAtZ:m,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:x,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:x,rev:x,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:x,requiredFeatures:x,requiredFonts:x,requiredFormats:x,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:m,specularExponent:m,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:m,strikethroughThickness:m,string:null,stroke:null,strokeDashArray:x,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:m,strokeOpacity:m,strokeWidth:null,style:null,surfaceScale:m,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:x,tabIndex:m,tableValues:null,target:null,targetX:m,targetY:m,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:x,to:null,transform:null,u1:null,u2:null,underlinePosition:m,underlineThickness:m,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:m,values:null,vAlphabetic:m,vMathematical:m,vectorEffect:null,vHanging:m,vIdeographic:m,version:null,vertAdvY:m,vertOriginX:m,vertOriginY:m,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:m,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),U=A([_,R,V,B,z],"html"),q=A([_,R,V,B,H],"svg");var W=e.i(722365),Z=e.i(518043);let G=Z.default.default||Z.default,K=$("end"),X=$("start");function $(e){return t;function t(t){let n=t&&t.position&&t.position[e]||{};if("number"==typeof n.line&&n.line>0&&"number"==typeof n.column&&n.column>0)return{line:n.line,column:n.column,offset:"number"==typeof n.offset&&n.offset>-1?n.offset:void 0}}}function Y(e){let t=X(e),n=K(e);if(t&&n)return{start:t,end:n}}function J(e){return e&&"object"==typeof e?"position"in e||"type"in e?ee(e.position):"start"in e||"end"in e?ee(e):"line"in e||"column"in e?Q(e):"":""}function Q(e){return et(e&&e.line)+":"+et(e&&e.column)}function ee(e){return Q(e&&e.start)+"-"+Q(e&&e.end)}function et(e){return e&&"number"==typeof e?e:1}e.s(["pointEnd",0,K,"pointStart",0,X,"position",()=>Y],417798);class en extends Error{constructor(e,t,n){super(),"string"==typeof t&&(n=t,t=void 0);let r="",i={},a=!1;if(t&&(i="line"in t&&"column"in t||"start"in t&&"end"in t?{place:t}:"type"in t?{ancestors:[t],place:t.position}:{...t}),"string"==typeof e?r=e:!i.cause&&e&&(a=!0,r=e.message,i.cause=e),!i.ruleId&&!i.source&&"string"==typeof n){let e=n.indexOf(":");-1===e?i.ruleId=n:(i.source=n.slice(0,e),i.ruleId=n.slice(e+1))}if(!i.place&&i.ancestors&&i.ancestors){let e=i.ancestors[i.ancestors.length-1];e&&(i.place=e.position)}let o=i.place&&"start"in i.place?i.place.start:i.place;this.ancestors=i.ancestors||void 0,this.cause=i.cause||void 0,this.column=o?o.column:void 0,this.fatal=void 0,this.file,this.message=r,this.line=o?o.line:void 0,this.name=J(i.place)||"1:1",this.place=i.place||void 0,this.reason=this.message,this.ruleId=i.ruleId||void 0,this.source=i.source||void 0,this.stack=a&&i.cause&&"string"==typeof i.cause.stack?i.cause.stack:"",this.actual,this.expected,this.note,this.url}}en.prototype.file="",en.prototype.name="",en.prototype.reason="",en.prototype.message="",en.prototype.stack="",en.prototype.column=void 0,en.prototype.line=void 0,en.prototype.ancestors=void 0,en.prototype.cause=void 0,en.prototype.fatal=void 0,en.prototype.place=void 0,en.prototype.ruleId=void 0,en.prototype.source=void 0,e.s(["VFileMessage",()=>en],842965);let er={}.hasOwnProperty,ei=new Map,ea=/[A-Z]/g,eo=/-([a-z])/g,es=new Set(["table","tbody","thead","tfoot","tr"]),el=new Set(["td","th"]),ec="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function eu(e,t){let n;if(!t||void 0===t.Fragment)throw TypeError("Expected `Fragment` in options");let r=t.filePath||void 0;if(t.development){if("function"!=typeof t.jsxDEV)throw TypeError("Expected `jsxDEV` in options when `development: true`");n=ew(r,t.jsxDEV)}else{if("function"!=typeof t.jsx)throw TypeError("Expected `jsx` in production options");if("function"!=typeof t.jsxs)throw TypeError("Expected `jsxs` in production options");n=eb(r,t.jsx,t.jsxs)}let i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:n,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:r,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:!1!==t.passKeys,passNode:t.passNode||!1,schema:"svg"===t.space?q:U,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:!1!==t.tableCellAlignToStyle},a=ed(i,e,void 0);return a&&"string"!=typeof a?a:i.create(e,i.Fragment,{children:a||void 0},void 0)}function ed(e,t,n){return"element"===t.type?ep(e,t,n):"mdxFlowExpression"===t.type||"mdxTextExpression"===t.type?eh(e,t):"mdxJsxFlowElement"===t.type||"mdxJsxTextElement"===t.type?em(e,t,n):"mdxjsEsm"===t.type?ef(e,t):"root"===t.type?eg(e,t,n):"text"===t.type?ev(e,t):void 0}function ep(e,t,n){let r=e.schema;"svg"===t.tagName.toLowerCase()&&"html"===r.space&&(e.schema=q),e.ancestors.push(t);let i=eE(e,t.tagName,!1),a=ej(e,t),o=ek(e,t);return es.has(t.tagName)&&(o=o.filter(function(e){return"string"!=typeof e||!(0,l.whitespace)(e)})),ex(e,a,i,t),ey(a,o),e.ancestors.pop(),e.schema=r,e.create(t,i,a,n)}function eh(e,n){if(n.data&&n.data.estree&&e.evaluater){let r=n.data.estree.body[0];return t("ExpressionStatement"===r.type),e.evaluater.evaluateExpression(r.expression)}eM(e,n.position)}function ef(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);eM(e,t.position)}function em(e,t,n){let r=e.schema;"svg"===t.name&&"html"===r.space&&(e.schema=q),e.ancestors.push(t);let i=null===t.name?e.Fragment:eE(e,t.name,!0),a=eC(e,t),o=ek(e,t);return ex(e,a,i,t),ey(a,o),e.ancestors.pop(),e.schema=r,e.create(t,i,a,n)}function eg(e,t,n){let r={};return ey(r,ek(e,t)),e.create(t,e.Fragment,r,n)}function ev(e,t){return t.value}function ex(e,t,n,r){"string"!=typeof n&&n!==e.Fragment&&e.passNode&&(t.node=r)}function ey(e,t){if(t.length>0){let n=t.length>1?t:t[0];n&&(e.children=n)}}function eb(e,t,n){return r;function r(e,r,i,a){let o=Array.isArray(i.children)?n:t;return a?o(r,i,a):o(r,i)}}function ew(e,t){return n;function n(n,r,i,a){let o=Array.isArray(i.children),s=X(n);return t(r,i,a,o,{columnNumber:s?s.column-1:void 0,fileName:e,lineNumber:s?s.line:void 0},void 0)}}function ej(e,t){let n,r,i={};for(r in t.properties)if("children"!==r&&er.call(t.properties,r)){let a=eS(e,r,t.properties[r]);if(a){let[r,o]=a;e.tableCellAlignToStyle&&"align"===r&&"string"==typeof o&&el.has(t.tagName)?n=o:i[r]=o}}return n&&((i.style||(i.style={}))["css"===e.stylePropertyNameCase?"text-align":"textAlign"]=n),i}function eC(e,n){let r={};for(let i of n.attributes)if("mdxJsxExpressionAttribute"===i.type)if(i.data&&i.data.estree&&e.evaluater){let n=i.data.estree.body[0];t("ExpressionStatement"===n.type);let a=n.expression;t("ObjectExpression"===a.type);let o=a.properties[0];t("SpreadElement"===o.type),Object.assign(r,e.evaluater.evaluateExpression(o.argument))}else eM(e,n.position);else{let a,o=i.name;if(i.value&&"object"==typeof i.value)if(i.value.data&&i.value.data.estree&&e.evaluater){let n=i.value.data.estree.body[0];t("ExpressionStatement"===n.type),a=e.evaluater.evaluateExpression(n.expression)}else eM(e,n.position);else a=null===i.value||i.value;r[o]=a}return r}function ek(e,t){let n=[],r=-1,i=e.passKeys?new Map:ei;for(;++r<t.children.length;){let a,o=t.children[r];if(e.passKeys){let e="element"===o.type?o.tagName:"mdxJsxFlowElement"===o.type||"mdxJsxTextElement"===o.type?o.name:void 0;if(e){let t=i.get(e)||0;a=e+"-"+t,i.set(e,t+1)}}let s=ed(e,o,a);void 0!==s&&n.push(s)}return n}function eS(e,t,n){let i=E(e.schema,t);if(!(null==n||"number"==typeof n&&Number.isNaN(n))){if(Array.isArray(n)&&(n=i.commaSeparated?(0,r.stringify)(n):(0,W.stringify)(n)),"style"===i.property){let t="object"==typeof n?n:eN(e,String(n));return"css"===e.stylePropertyNameCase&&(t=eI(t)),["style",t]}return["react"===e.elementAttributeNameCase&&i.space?D[i.property]||i.property:i.attribute,n]}}function eN(e,t){let n={};try{G(t,r)}catch(t){if(!e.ignoreInvalidStyle){let n=t,r=new en("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:n,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw r.file=e.filePath||void 0,r.url=ec+"#cannot-parse-style-attribute",r}}return n;function r(e,t){let r=e;"--"!==r.slice(0,2)&&("-ms-"===r.slice(0,4)&&(r="ms-"+r.slice(4)),r=r.replace(eo,eT)),n[r]=t}}function eE(e,n,r){let i;if(r)if(n.includes(".")){let e,r=n.split("."),a=-1;for(;++a<r.length;){let t=s(r[a])?{type:"Identifier",name:r[a]}:{type:"Literal",value:r[a]};e=e?{type:"MemberExpression",object:e,property:t,computed:!!(a&&"Literal"===t.type),optional:!1}:t}t(e,"always a result"),i=e}else i=s(n)&&!/^[a-z]/.test(n)?{type:"Identifier",name:n}:{type:"Literal",value:n};else i={type:"Literal",value:n};if("Literal"===i.type){let t=i.value;return er.call(e.components,t)?e.components[t]:t}if(e.evaluater)return e.evaluater.evaluateExpression(i);eM(e)}function eM(e,t){let n=new en("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=ec+"#cannot-handle-mdx-estrees-without-createevaluater",n}function eI(e){let t,n={};for(t in e)er.call(e,t)&&(n[eD(t)]=e[t]);return n}function eD(e){let t=e.replace(ea,eA);return"ms-"===t.slice(0,3)&&(t="-"+t),t}function eT(e,t){return t.toUpperCase()}function eA(e){return"-"+e.toLowerCase()}e.s(["toJsxRuntime",()=>eu],352446);let eL={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]};e.s(["urlAttributes",0,eL],722259);let eP={};function eR(e,t){let n=t||eP;return e_(e,"boolean"!=typeof n.includeImageAlt||n.includeImageAlt,"boolean"!=typeof n.includeHtml||n.includeHtml)}function e_(e,t,n){if(eF(e)){if("value"in e)return"html"!==e.type||n?e.value:"";if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return eO(e.children,t,n)}return Array.isArray(e)?eO(e,t,n):""}function eO(e,t,n){let r=[],i=-1;for(;++i<e.length;)r[i]=e_(e[i],t,n);return r.join("")}function eF(e){return!!(e&&"object"==typeof e)}function eV(e,t,n,r){let i,a=e.length,o=0;if(t=t<0?-t>a?0:a+t:t>a?a:t,n=n>0?n:0,r.length<1e4)(i=Array.from(r)).unshift(t,n),e.splice(...i);else for(n&&e.splice(t,n);o<r.length;)(i=r.slice(o,o+1e4)).unshift(t,0),e.splice(...i),o+=1e4,t+=1e4}function eB(e,t){return e.length>0?(eV(e,e.length,0,t),e):t}e.s(["toString",()=>eR],12105),e.s(["push",()=>eB,"splice",()=>eV],212470);let ez={}.hasOwnProperty;function eH(e){let t={},n=-1;for(;++n<e.length;)eU(t,e[n]);return t}function eU(e,t){let n;for(n in t){let r,i=(ez.call(e,n)?e[n]:void 0)||(e[n]={}),a=t[n];if(a)for(r in a){ez.call(i,r)||(i[r]=[]);let e=a[r];eq(i[r],Array.isArray(e)?e:e?[e]:[])}}}function eq(e,t){let n=-1,r=[];for(;++n<t.length;)("after"===t[n].add?e:r).push(t[n]);eV(e,0,0,r)}function eW(e){let t={},n=-1;for(;++n<e.length;)eZ(t,e[n]);return t}function eZ(e,t){let n;for(n in t){let r,i=(ez.call(e,n)?e[n]:void 0)||(e[n]={}),a=t[n];if(a)for(r in a)i[r]=a[r]}}e.s(["combineExtensions",()=>eH,"combineHtmlExtensions",()=>eW],872238);let eG=e3(/[A-Za-z]/),eK=e3(/[\dA-Za-z]/),eX=e3(/[#-'*+\--9=?A-Z^-~]/);function e$(e){return null!==e&&(e<32||127===e)}let eY=e3(/\d/),eJ=e3(/[\dA-Fa-f]/),eQ=e3(/[!-/:-@[-`{-~]/);function e0(e){return null!==e&&e<-2}function e1(e){return null!==e&&(e<0||32===e)}function e2(e){return -2===e||-1===e||32===e}let e5=e3(RegExp("\\p{P}|\\p{S}","u")),e4=e3(/\s/);function e3(e){return t;function t(t){return null!==t&&t>-1&&e.test(String.fromCharCode(t))}}function e7(e,t,n,r){let i=r?r-1:1/0,a=0;return o;function o(r){return e2(r)?(e.enter(n),s(r)):t(r)}function s(r){return e2(r)&&a++<i?(e.consume(r),s):(e.exit(n),t(r))}}e.s(["asciiAlpha",0,eG,"asciiAlphanumeric",0,eK,"asciiAtext",0,eX,"asciiControl",()=>e$,"asciiDigit",0,eY,"asciiHexDigit",0,eJ,"asciiPunctuation",0,eQ,"markdownLineEnding",()=>e0,"markdownLineEndingOrSpace",()=>e1,"markdownSpace",()=>e2,"unicodePunctuation",0,e5,"unicodeWhitespace",0,e4],346863),e.s(["factorySpace",()=>e7],540795);let e9={tokenize:e6};function e6(e){let t,n=e.attempt(this.parser.constructs.contentInitial,r,i);return n;function r(t){return null===t?void e.consume(t):(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),e7(e,n,"linePrefix"))}function i(t){return e.enter("paragraph"),a(t)}function a(n){let r=e.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=r),t=r,o(n)}function o(t){if(null===t){e.exit("chunkText"),e.exit("paragraph"),e.consume(t);return}return e0(t)?(e.consume(t),e.exit("chunkText"),a):(e.consume(t),o)}}let e8={tokenize:tt},te={tokenize:tn};function tt(e){let t,n,r,i=this,a=[],o=0;return s;function s(t){if(o<a.length){let n=a[o];return i.containerState=n[1],e.attempt(n[0].continuation,l,c)(t)}return c(t)}function l(e){if(o++,i.containerState._closeFlow){let n;i.containerState._closeFlow=void 0,t&&x();let r=i.events.length,a=r;for(;a--;)if("exit"===i.events[a][0]&&"chunkFlow"===i.events[a][1].type){n=i.events[a][1].end;break}v(o);let s=r;for(;s<i.events.length;)i.events[s][1].end=Object.assign({},n),s++;return eV(i.events,a+1,0,i.events.slice(r)),i.events.length=s,c(e)}return s(e)}function c(n){if(o===a.length){if(!t)return p(n);if(t.currentConstruct&&t.currentConstruct.concrete)return f(n);i.interrupt=!!(t.currentConstruct&&!t._gfmTableDynamicInterruptHack)}return i.containerState={},e.check(te,u,d)(n)}function u(e){return t&&x(),v(o),p(e)}function d(e){return i.parser.lazy[i.now().line]=o!==a.length,r=i.now().offset,f(e)}function p(t){return i.containerState={},e.attempt(te,h,f)(t)}function h(e){return o++,a.push([i.currentConstruct,i.containerState]),p(e)}function f(r){if(null===r){t&&x(),v(0),e.consume(r);return}return t=t||i.parser.flow(i.now()),e.enter("chunkFlow",{contentType:"flow",previous:n,_tokenizer:t}),m(r)}function m(t){if(null===t){g(e.exit("chunkFlow"),!0),v(0),e.consume(t);return}return e0(t)?(e.consume(t),g(e.exit("chunkFlow")),o=0,i.interrupt=void 0,s):(e.consume(t),m)}function g(e,a){let s=i.sliceStream(e);if(a&&s.push(null),e.previous=n,n&&(n.next=e),n=e,t.defineSkip(e.start),t.write(s),i.parser.lazy[e.start.line]){let e,n,a=t.events.length;for(;a--;)if(t.events[a][1].start.offset<r&&(!t.events[a][1].end||t.events[a][1].end.offset>r))return;let s=i.events.length,l=s;for(;l--;)if("exit"===i.events[l][0]&&"chunkFlow"===i.events[l][1].type){if(e){n=i.events[l][1].end;break}e=!0}for(v(o),a=s;a<i.events.length;)i.events[a][1].end=Object.assign({},n),a++;eV(i.events,l+1,0,i.events.slice(s)),i.events.length=a}}function v(t){let n=a.length;for(;n-- >t;){let t=a[n];i.containerState=t[1],t[0].exit.call(i,e)}a.length=t}function x(){t.write([null]),n=void 0,t=void 0,i.containerState._closeFlow=void 0}}function tn(e,t,n){return e7(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}let tr={tokenize:ti,partial:!0};function ti(e,t,n){return r;function r(t){return e2(t)?e7(e,i,"linePrefix")(t):i(t)}function i(e){return null===e||e0(e)?t(e):n(e)}}e.s(["blankLine",0,tr],434036);class ta{get(e){if(e<0||e>=this.left.length+this.right.length)throw RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){let n=null==t?1/0:t;return n<this.left.length?this.left.slice(e,n):e>this.left.length?this.right.slice(this.right.length-n+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-n+this.left.length).reverse())}splice(e,t,n){let r=t||0;this.setCursor(Math.trunc(e));let i=this.right.splice(this.right.length-r,1/0);return n&&to(this.left,n),i.reverse()}pop(){return this.setCursor(1/0),this.left.pop()}push(e){this.setCursor(1/0),this.left.push(e)}pushMany(e){this.setCursor(1/0),to(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),to(this.right,e.reverse())}setCursor(e){if(e!==this.left.length&&(!(e>this.left.length)||0!==this.right.length)&&(!(e<0)||0!==this.left.length))if(e<this.left.length){let t=this.left.splice(e,1/0);to(this.right,t.reverse())}else{let t=this.right.splice(this.left.length+this.right.length-e,1/0);to(this.left,t.reverse())}}constructor(e){this.left=e?[...e]:[],this.right=[]}}function to(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function ts(e){let t,n,r,i,a,o,s,l={},c=-1,u=new ta(e);for(;++c<u.length;){for(;c in l;)c=l[c];if(t=u.get(c),c&&"chunkFlow"===t[1].type&&"listItemPrefix"===u.get(c-1)[1].type&&((r=0)<(o=t[1]._tokenizer.events).length&&"lineEndingBlank"===o[r][1].type&&(r+=2),r<o.length&&"content"===o[r][1].type))for(;++r<o.length&&"content"!==o[r][1].type;)"chunkText"===o[r][1].type&&(o[r][1]._isInFirstContentOfListItem=!0,r++);if("enter"===t[0])t[1].contentType&&(Object.assign(l,tl(u,c)),c=l[c],s=!0);else if(t[1]._container){for(r=c,n=void 0;r--;)if("lineEnding"===(i=u.get(r))[1].type||"lineEndingBlank"===i[1].type)"enter"===i[0]&&(n&&(u.get(n)[1].type="lineEndingBlank"),i[1].type="lineEnding",n=r);else break;n&&(t[1].end=Object.assign({},u.get(n)[1].start),(a=u.slice(n,c)).unshift(t),u.splice(n,c-n+1,a))}}return eV(e,0,1/0,u.slice(0)),!s}function tl(e,t){let n,r,i=e.get(t)[1],a=e.get(t)[2],o=t-1,s=[],l=i._tokenizer||a.parser[i.contentType](i.start),c=l.events,u=[],d={},p=-1,h=i,f=0,m=0,g=[0];for(;h;){for(;e.get(++o)[1]!==h;);s.push(o),!h._tokenizer&&(n=a.sliceStream(h),h.next||n.push(null),r&&l.defineSkip(h.start),h._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(n),h._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),r=h,h=h.next}for(h=i;++p<c.length;)"exit"===c[p][0]&&"enter"===c[p-1][0]&&c[p][1].type===c[p-1][1].type&&c[p][1].start.line!==c[p][1].end.line&&(m=p+1,g.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(l.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),p=g.length;p--;){let t=c.slice(g[p],g[p+1]),n=s.pop();u.push([n,n+t.length-1]),e.splice(n,2,t)}for(u.reverse(),p=-1;++p<u.length;)d[f+u[p][0]]=f+u[p][1],f+=u[p][1]-u[p][0]-1;return d}let tc={tokenize:tp,resolve:td},tu={tokenize:th,partial:!0};function td(e){return ts(e),e}function tp(e,t){let n;return r;function r(t){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(t)}function i(t){return null===t?a(t):e0(t)?e.check(tu,o,a)(t):(e.consume(t),i)}function a(n){return e.exit("chunkContent"),e.exit("content"),t(n)}function o(t){return e.consume(t),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function th(e,t,n){let r=this;return i;function i(t){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),e7(e,a,"linePrefix")}function a(i){if(null===i||e0(i))return n(i);let a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&"linePrefix"===a[1].type&&a[2].sliceSerialize(a[1],!0).length>=4?t(i):e.interrupt(r.parser.constructs.flow,n,t)(i)}}let tf={tokenize:tm};function tm(e){let t=this,n=e.attempt(tr,r,e.attempt(this.parser.constructs.flowInitial,i,e7(e,e.attempt(this.parser.constructs.flow,i,e.attempt(tc,i)),"linePrefix")));return n;function r(r){return null===r?void e.consume(r):(e.enter("lineEndingBlank"),e.consume(r),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n)}function i(r){return null===r?void e.consume(r):(e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),t.currentConstruct=void 0,n)}}let tg={resolveAll:tb()},tv=ty("string"),tx=ty("text");function ty(e){return{tokenize:t,resolveAll:tb("text"===e?tw:void 0)};function t(t){let n=this,r=this.parser.constructs[e],i=t.attempt(r,a,o);return a;function a(e){return l(e)?i(e):o(e)}function o(e){return null===e?void t.consume(e):(t.enter("data"),t.consume(e),s)}function s(e){return l(e)?(t.exit("data"),i(e)):(t.consume(e),s)}function l(e){if(null===e)return!0;let t=r[e],i=-1;if(t)for(;++i<t.length;){let e=t[i];if(!e.previous||e.previous.call(n,n.previous))return!0}return!1}}}function tb(e){return t;function t(t,n){let r,i=-1;for(;++i<=t.length;)void 0===r?t[i]&&"data"===t[i][1].type&&(r=i,i++):t[i]&&"data"===t[i][1].type||(i!==r+2&&(t[r][1].end=t[i-1][1].end,t.splice(r+2,i-r-2),i=r+2),r=void 0);return e?e(t,n):t}}function tw(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||"lineEnding"===e[n][1].type)&&"data"===e[n-1][1].type){let r,i=e[n-1][1],a=t.sliceStream(i),o=a.length,s=-1,l=0;for(;o--;){let e=a[o];if("string"==typeof e){for(s=e.length;32===e.charCodeAt(s-1);)l++,s--;if(s)break;s=-1}else if(-2===e)r=!0,l++;else if(-1===e);else{o++;break}}if(l){let a={type:n===e.length||r||l<2?"lineSuffix":"hardBreakTrailing",start:{line:i.end.line,column:i.end.column-l,offset:i.end.offset-l,_index:i.start._index+o,_bufferIndex:o?s:i.start._bufferIndex+s},end:Object.assign({},i.end)};i.end=Object.assign({},a.start),i.start.offset===i.end.offset?Object.assign(i,a):(e.splice(n,0,["enter",a,t],["exit",a,t]),n+=2)}n++}return e}function tj(e,t,n){let r=[],i=-1;for(;++i<e.length;){let a=e[i].resolveAll;a&&!r.includes(a)&&(t=a(t,n),r.push(a))}return t}function tC(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1}),i={},a=[],o=[],s=[],l={consume:x,enter:y,exit:b,attempt:C(w),check:C(j),interrupt:C(j,{interrupt:!0})},c={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:p,now:f,defineSkip:m,write:d},u=t.tokenize.call(c,l);return t.resolveAll&&a.push(t),c;function d(e){return(o=eB(o,e),g(),null!==o[o.length-1])?[]:(k(t,0),c.events=tj(a,c.events,c),c.events)}function p(e,t){return tS(h(e),t)}function h(e){return tk(o,e)}function f(){let{line:e,column:t,offset:n,_index:i,_bufferIndex:a}=r;return{line:e,column:t,offset:n,_index:i,_bufferIndex:a}}function m(e){i[e.line]=e.column,N()}function g(){let e;for(;r._index<o.length;){let t=o[r._index];if("string"==typeof t)for(e=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===e&&r._bufferIndex<t.length;)v(t.charCodeAt(r._bufferIndex));else v(t)}}function v(e){u=u(e)}function x(e){e0(e)?(r.line++,r.column=1,r.offset+=-3===e?2:1,N()):-1!==e&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),c.previous=e}function y(e,t){let n=t||{};return n.type=e,n.start=f(),c.events.push(["enter",n,c]),s.push(n),n}function b(e){let t=s.pop();return t.end=f(),c.events.push(["exit",t,c]),t}function w(e,t){k(e,t.from)}function j(e,t){t.restore()}function C(e,t){return n;function n(n,r,i){let a,o,s,u;return Array.isArray(n)?p(n):"tokenize"in n?p([n]):d(n);function d(e){return t;function t(t){let n=null!==t&&e[t],r=null!==t&&e.null;return p([...Array.isArray(n)?n:n?[n]:[],...Array.isArray(r)?r:r?[r]:[]])(t)}}function p(e){return(a=e,o=0,0===e.length)?i:h(e[o])}function h(e){return n;function n(n){return(u=S(),s=e,e.partial||(c.currentConstruct=e),e.name&&c.parser.constructs.disable.null.includes(e.name))?m(n):e.tokenize.call(t?Object.assign(Object.create(c),t):c,l,f,m)(n)}}function f(t){return e(s,u),r}function m(e){return(u.restore(),++o<a.length)?h(a[o]):i}}}function k(e,t){e.resolveAll&&!a.includes(e)&&a.push(e),e.resolve&&eV(c.events,t,c.events.length-t,e.resolve(c.events.slice(t),c)),e.resolveTo&&(c.events=e.resolveTo(c.events,c))}function S(){let e=f(),t=c.previous,n=c.currentConstruct,i=c.events.length,a=Array.from(s);return{restore:o,from:i};function o(){r=e,c.previous=t,c.currentConstruct=n,c.events.length=i,s=a,N()}}function N(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function tk(e,t){let n,r=t.start._index,i=t.start._bufferIndex,a=t.end._index,o=t.end._bufferIndex;if(r===a)n=[e[r].slice(i,o)];else{if(n=e.slice(r,a),i>-1){let e=n[0];"string"==typeof e?n[0]=e.slice(i):n.shift()}o>0&&n.push(e[a].slice(0,o))}return n}function tS(e,t){let n,r=-1,i=[];for(;++r<e.length;){let a,o=e[r];if("string"==typeof o)a=o;else switch(o){case -5:a="\r";break;case -4:a="\n";break;case -3:a="\r\n";break;case -2:a=t?" ":"	";break;case -1:if(!t&&n)continue;a=" ";break;default:a=String.fromCharCode(o)}n=-2===o,i.push(a)}return i.join("")}function tN(e){return null===e||e1(e)||e4(e)?1:e5(e)?2:void 0}e.s(["resolveAll",()=>tj],759239),e.s(["classifyCharacter",()=>tN],941392);let tE={name:"attention",tokenize:tI,resolveAll:tM};function tM(e,t){let n,r,i,a,o,s,l,c,u=-1;for(;++u<e.length;)if("enter"===e[u][0]&&"attentionSequence"===e[u][1].type&&e[u][1]._close){for(n=u;n--;)if("exit"===e[n][0]&&"attentionSequence"===e[n][1].type&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[u][1]).charCodeAt(0)){if((e[n][1]._close||e[u][1]._open)&&(e[u][1].end.offset-e[u][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[u][1].end.offset-e[u][1].start.offset)%3))continue;s=e[n][1].end.offset-e[n][1].start.offset>1&&e[u][1].end.offset-e[u][1].start.offset>1?2:1;let d=Object.assign({},e[n][1].end),p=Object.assign({},e[u][1].start);tD(d,-s),tD(p,s),a={type:s>1?"strongSequence":"emphasisSequence",start:d,end:Object.assign({},e[n][1].end)},o={type:s>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[u][1].start),end:p},i={type:s>1?"strongText":"emphasisText",start:Object.assign({},e[n][1].end),end:Object.assign({},e[u][1].start)},r={type:s>1?"strong":"emphasis",start:Object.assign({},a.start),end:Object.assign({},o.end)},e[n][1].end=Object.assign({},a.start),e[u][1].start=Object.assign({},o.end),l=[],e[n][1].end.offset-e[n][1].start.offset&&(l=eB(l,[["enter",e[n][1],t],["exit",e[n][1],t]])),l=eB(l,[["enter",r,t],["enter",a,t],["exit",a,t],["enter",i,t]]),l=eB(l,tj(t.parser.constructs.insideSpan.null,e.slice(n+1,u),t)),l=eB(l,[["exit",i,t],["enter",o,t],["exit",o,t],["exit",r,t]]),e[u][1].end.offset-e[u][1].start.offset?(c=2,l=eB(l,[["enter",e[u][1],t],["exit",e[u][1],t]])):c=0,eV(e,n-1,u-n+3,l),u=n+l.length-c-2;break}}for(u=-1;++u<e.length;)"attentionSequence"===e[u][1].type&&(e[u][1].type="data");return e}function tI(e,t){let n,r=this.parser.constructs.attentionMarkers.null,i=this.previous,a=tN(i);return o;function o(t){return n=t,e.enter("attentionSequence"),s(t)}function s(o){if(o===n)return e.consume(o),s;let l=e.exit("attentionSequence"),c=tN(o),u=!c||2===c&&a||r.includes(o),d=!a||2===a&&c||r.includes(i);return l._open=!!(42===n?u:u&&(a||!d)),l._close=!!(42===n?d:d&&(c||!u)),t(o)}}function tD(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}let tT={name:"autolink",tokenize:tA};function tA(e,t,n){let r=0;return i;function i(t){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(t),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),a}function a(t){return eG(t)?(e.consume(t),o):64===t?n(t):c(t)}function o(e){return 43===e||45===e||46===e||eK(e)?(r=1,s(e)):c(e)}function s(t){return 58===t?(e.consume(t),r=0,l):(43===t||45===t||46===t||eK(t))&&r++<32?(e.consume(t),s):(r=0,c(t))}function l(r){return 62===r?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(r),e.exit("autolinkMarker"),e.exit("autolink"),t):null===r||32===r||60===r||e$(r)?n(r):(e.consume(r),l)}function c(t){return 64===t?(e.consume(t),u):eX(t)?(e.consume(t),c):n(t)}function u(e){return eK(e)?d(e):n(e)}function d(n){return 46===n?(e.consume(n),r=0,u):62===n?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(n),e.exit("autolinkMarker"),e.exit("autolink"),t):p(n)}function p(t){if((45===t||eK(t))&&r++<63){let n=45===t?p:d;return e.consume(t),n}return n(t)}}let tL={name:"blockQuote",tokenize:tP,continuation:{tokenize:tR},exit:t_};function tP(e,t,n){let r=this;return i;function i(t){if(62===t){let n=r.containerState;return n.open||(e.enter("blockQuote",{_container:!0}),n.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(t),e.exit("blockQuoteMarker"),a}return n(t)}function a(n){return e2(n)?(e.enter("blockQuotePrefixWhitespace"),e.consume(n),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(n))}}function tR(e,t,n){let r=this;return i;function i(t){return e2(t)?e7(e,a,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):a(t)}function a(r){return e.attempt(tL,t,n)(r)}}function t_(e){e.exit("blockQuote")}let tO={name:"characterEscape",tokenize:tF};function tF(e,t,n){return r;function r(t){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(t),e.exit("escapeMarker"),i}function i(r){return eQ(r)?(e.enter("characterEscapeValue"),e.consume(r),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(r)}}let tV=document.createElement("i");function tB(e){let t="&"+e+";";tV.innerHTML=t;let n=tV.textContent;return(59!==n.charCodeAt(n.length-1)||"semi"===e)&&n!==t&&n}let tz={name:"characterReference",tokenize:tH};function tH(e,t,n){let r,i,a=this,o=0;return s;function s(t){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(t),e.exit("characterReferenceMarker"),l}function l(t){return 35===t?(e.enter("characterReferenceMarkerNumeric"),e.consume(t),e.exit("characterReferenceMarkerNumeric"),c):(e.enter("characterReferenceValue"),r=31,i=eK,u(t))}function c(t){return 88===t||120===t?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(t),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),r=6,i=eJ,u):(e.enter("characterReferenceValue"),r=7,i=eY,u(t))}function u(s){if(59===s&&o){let r=e.exit("characterReferenceValue");return i!==eK||tB(a.sliceSerialize(r))?(e.enter("characterReferenceMarker"),e.consume(s),e.exit("characterReferenceMarker"),e.exit("characterReference"),t):n(s)}return i(s)&&o++<r?(e.consume(s),u):n(s)}}let tU={tokenize:tZ,partial:!0},tq={name:"codeFenced",tokenize:tW,concrete:!0};function tW(e,t,n){let r,i=this,a={tokenize:w,partial:!0},o=0,s=0;return l;function l(e){return c(e)}function c(t){let n=i.events[i.events.length-1];return o=n&&"linePrefix"===n[1].type?n[2].sliceSerialize(n[1],!0).length:0,r=t,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),u(t)}function u(t){return t===r?(s++,e.consume(t),u):s<3?n(t):(e.exit("codeFencedFenceSequence"),e2(t)?e7(e,d,"whitespace")(t):d(t))}function d(n){return null===n||e0(n)?(e.exit("codeFencedFence"),i.interrupt?t(n):e.check(tU,m,b)(n)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),p(n))}function p(t){return null===t||e0(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),d(t)):e2(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),e7(e,h,"whitespace")(t)):96===t&&t===r?n(t):(e.consume(t),p)}function h(t){return null===t||e0(t)?d(t):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),f(t))}function f(t){return null===t||e0(t)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),d(t)):96===t&&t===r?n(t):(e.consume(t),f)}function m(t){return e.attempt(a,b,g)(t)}function g(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),v}function v(t){return o>0&&e2(t)?e7(e,x,"linePrefix",o+1)(t):x(t)}function x(t){return null===t||e0(t)?e.check(tU,m,b)(t):(e.enter("codeFlowValue"),y(t))}function y(t){return null===t||e0(t)?(e.exit("codeFlowValue"),x(t)):(e.consume(t),y)}function b(n){return e.exit("codeFenced"),t(n)}function w(e,t,n){let a=0;return o;function o(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),l}function l(t){return e.enter("codeFencedFence"),e2(t)?e7(e,c,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):c(t)}function c(t){return t===r?(e.enter("codeFencedFenceSequence"),u(t)):n(t)}function u(t){return t===r?(a++,e.consume(t),u):a>=s?(e.exit("codeFencedFenceSequence"),e2(t)?e7(e,d,"whitespace")(t):d(t)):n(t)}function d(r){return null===r||e0(r)?(e.exit("codeFencedFence"),t(r)):n(r)}}}function tZ(e,t,n){let r=this;return i;function i(t){return null===t?n(t):(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),a)}function a(e){return r.parser.lazy[r.now().line]?n(e):t(e)}}let tG={name:"codeIndented",tokenize:tX},tK={tokenize:t$,partial:!0};function tX(e,t,n){let r=this;return i;function i(t){return e.enter("codeIndented"),e7(e,a,"linePrefix",5)(t)}function a(e){let t=r.events[r.events.length-1];return t&&"linePrefix"===t[1].type&&t[2].sliceSerialize(t[1],!0).length>=4?o(e):n(e)}function o(t){return null===t?l(t):e0(t)?e.attempt(tK,o,l)(t):(e.enter("codeFlowValue"),s(t))}function s(t){return null===t||e0(t)?(e.exit("codeFlowValue"),o(t)):(e.consume(t),s)}function l(n){return e.exit("codeIndented"),t(n)}}function t$(e,t,n){let r=this;return i;function i(t){return r.parser.lazy[r.now().line]?n(t):e0(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i):e7(e,a,"linePrefix",5)(t)}function a(e){let a=r.events[r.events.length-1];return a&&"linePrefix"===a[1].type&&a[2].sliceSerialize(a[1],!0).length>=4?t(e):e0(e)?i(e):n(e)}}let tY={name:"codeText",tokenize:t0,resolve:tJ,previous:tQ};function tJ(e){let t,n,r=e.length-4,i=3;if(("lineEnding"===e[3][1].type||"space"===e[i][1].type)&&("lineEnding"===e[r][1].type||"space"===e[r][1].type)){for(t=i;++t<r;)if("codeTextData"===e[t][1].type){e[i][1].type="codeTextPadding",e[r][1].type="codeTextPadding",i+=2,r-=2;break}}for(t=i-1,r++;++t<=r;)void 0===n?t!==r&&"lineEnding"!==e[t][1].type&&(n=t):(t===r||"lineEnding"===e[t][1].type)&&(e[n][1].type="codeTextData",t!==n+2&&(e[n][1].end=e[t-1][1].end,e.splice(n+2,t-n-2),r-=t-n-2,t=n+2),n=void 0);return e}function tQ(e){return 96!==e||"characterEscape"===this.events[this.events.length-1][1].type}function t0(e,t,n){let r,i,a=0;return o;function o(t){return e.enter("codeText"),e.enter("codeTextSequence"),s(t)}function s(t){return 96===t?(e.consume(t),a++,s):(e.exit("codeTextSequence"),l(t))}function l(t){return null===t?n(t):32===t?(e.enter("space"),e.consume(t),e.exit("space"),l):96===t?(i=e.enter("codeTextSequence"),r=0,u(t)):e0(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),l):(e.enter("codeTextData"),c(t))}function c(t){return null===t||32===t||96===t||e0(t)?(e.exit("codeTextData"),l(t)):(e.consume(t),c)}function u(n){return 96===n?(e.consume(n),r++,u):r===a?(e.exit("codeTextSequence"),e.exit("codeText"),t(n)):(i.type="codeTextData",c(n))}}function t1(e,t,n,r,i,a,o,s,l){let c=l||1/0,u=0;return d;function d(t){return 60===t?(e.enter(r),e.enter(i),e.enter(a),e.consume(t),e.exit(a),p):null===t||32===t||41===t||e$(t)?n(t):(e.enter(r),e.enter(o),e.enter(s),e.enter("chunkString",{contentType:"string"}),m(t))}function p(n){return 62===n?(e.enter(a),e.consume(n),e.exit(a),e.exit(i),e.exit(r),t):(e.enter(s),e.enter("chunkString",{contentType:"string"}),h(n))}function h(t){return 62===t?(e.exit("chunkString"),e.exit(s),p(t)):null===t||60===t||e0(t)?n(t):(e.consume(t),92===t?f:h)}function f(t){return 60===t||62===t||92===t?(e.consume(t),h):h(t)}function m(i){return!u&&(null===i||41===i||e1(i))?(e.exit("chunkString"),e.exit(s),e.exit(o),e.exit(r),t(i)):u<c&&40===i?(e.consume(i),u++,m):41===i?(e.consume(i),u--,m):null===i||32===i||40===i||e$(i)?n(i):(e.consume(i),92===i?g:m)}function g(t){return 40===t||41===t||92===t?(e.consume(t),m):m(t)}}function t2(e,t,n,r,i,a){let o,s=this,l=0;return c;function c(t){return e.enter(r),e.enter(i),e.consume(t),e.exit(i),e.enter(a),u}function u(c){return l>999||null===c||91===c||93===c&&!o||94===c&&!l&&"_hiddenFootnoteSupport"in s.parser.constructs?n(c):93===c?(e.exit(a),e.enter(i),e.consume(c),e.exit(i),e.exit(r),t):e0(c)?(e.enter("lineEnding"),e.consume(c),e.exit("lineEnding"),u):(e.enter("chunkString",{contentType:"string"}),d(c))}function d(t){return null===t||91===t||93===t||e0(t)||l++>999?(e.exit("chunkString"),u(t)):(e.consume(t),o||(o=!e2(t)),92===t?p:d)}function p(t){return 91===t||92===t||93===t?(e.consume(t),l++,d):d(t)}}function t5(e,t,n,r,i,a){let o;return s;function s(t){return 34===t||39===t||40===t?(e.enter(r),e.enter(i),e.consume(t),e.exit(i),o=40===t?41:t,l):n(t)}function l(n){return n===o?(e.enter(i),e.consume(n),e.exit(i),e.exit(r),t):(e.enter(a),c(n))}function c(t){return t===o?(e.exit(a),l(o)):null===t?n(t):e0(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),e7(e,c,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),u(t))}function u(t){return t===o||null===t||e0(t)?(e.exit("chunkString"),c(t)):(e.consume(t),92===t?d:u)}function d(t){return t===o||92===t?(e.consume(t),u):u(t)}}function t4(e,t){let n;return r;function r(i){return e0(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):e2(i)?e7(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}function t3(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}e.s(["normalizeIdentifier",()=>t3],820667);let t7={name:"definition",tokenize:t6},t9={tokenize:t8,partial:!0};function t6(e,t,n){let r,i=this;return a;function a(t){return e.enter("definition"),o(t)}function o(t){return t2.call(i,e,s,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(t)}function s(t){return(r=t3(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),58===t)?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),l):n(t)}function l(t){return e1(t)?t4(e,c)(t):c(t)}function c(t){return t1(e,u,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(t)}function u(t){return e.attempt(t9,d,d)(t)}function d(t){return e2(t)?e7(e,p,"whitespace")(t):p(t)}function p(a){return null===a||e0(a)?(e.exit("definition"),i.parser.defined.push(r),t(a)):n(a)}}function t8(e,t,n){return r;function r(t){return e1(t)?t4(e,i)(t):n(t)}function i(t){return t5(e,a,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(t)}function a(t){return e2(t)?e7(e,o,"whitespace")(t):o(t)}function o(e){return null===e||e0(e)?t(e):n(e)}}let ne={name:"hardBreakEscape",tokenize:nt};function nt(e,t,n){return r;function r(t){return e.enter("hardBreakEscape"),e.consume(t),i}function i(r){return e0(r)?(e.exit("hardBreakEscape"),t(r)):n(r)}}let nn={name:"headingAtx",tokenize:ni,resolve:nr};function nr(e,t){let n,r,i=e.length-2,a=3;return"whitespace"===e[3][1].type&&(a+=2),i-2>a&&"whitespace"===e[i][1].type&&(i-=2),"atxHeadingSequence"===e[i][1].type&&(a===i-1||i-4>a&&"whitespace"===e[i-2][1].type)&&(i-=a+1===i?2:4),i>a&&(n={type:"atxHeadingText",start:e[a][1].start,end:e[i][1].end},r={type:"chunkText",start:e[a][1].start,end:e[i][1].end,contentType:"text"},eV(e,a,i-a+1,[["enter",n,t],["enter",r,t],["exit",r,t],["exit",n,t]])),e}function ni(e,t,n){let r=0;return i;function i(t){return e.enter("atxHeading"),a(t)}function a(t){return e.enter("atxHeadingSequence"),o(t)}function o(t){return 35===t&&r++<6?(e.consume(t),o):null===t||e1(t)?(e.exit("atxHeadingSequence"),s(t)):n(t)}function s(n){return 35===n?(e.enter("atxHeadingSequence"),l(n)):null===n||e0(n)?(e.exit("atxHeading"),t(n)):e2(n)?e7(e,s,"whitespace")(n):(e.enter("atxHeadingText"),c(n))}function l(t){return 35===t?(e.consume(t),l):(e.exit("atxHeadingSequence"),s(t))}function c(t){return null===t||35===t||e1(t)?(e.exit("atxHeadingText"),s(t)):(e.consume(t),c)}}let na=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],no=["pre","script","style","textarea"],ns={name:"htmlFlow",tokenize:nd,resolveTo:nu,concrete:!0},nl={tokenize:nh,partial:!0},nc={tokenize:np,partial:!0};function nu(e){let t=e.length;for(;t--&&("enter"!==e[t][0]||"htmlFlow"!==e[t][1].type););return t>1&&"linePrefix"===e[t-2][1].type&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function nd(e,t,n){let r,i,a,o,s,l=this;return c;function c(e){return u(e)}function u(t){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(t),d}function d(o){return 33===o?(e.consume(o),p):47===o?(e.consume(o),i=!0,m):63===o?(e.consume(o),r=3,l.interrupt?t:_):eG(o)?(e.consume(o),a=String.fromCharCode(o),g):n(o)}function p(i){return 45===i?(e.consume(i),r=2,h):91===i?(e.consume(i),r=5,o=0,f):eG(i)?(e.consume(i),r=4,l.interrupt?t:_):n(i)}function h(r){return 45===r?(e.consume(r),l.interrupt?t:_):n(r)}function f(r){let i="CDATA[";return r===i.charCodeAt(o++)?(e.consume(r),o===i.length)?l.interrupt?t:M:f:n(r)}function m(t){return eG(t)?(e.consume(t),a=String.fromCharCode(t),g):n(t)}function g(o){if(null===o||47===o||62===o||e1(o)){let s=47===o,c=a.toLowerCase();return!s&&!i&&no.includes(c)?(r=1,l.interrupt?t(o):M(o)):na.includes(a.toLowerCase())?(r=6,s)?(e.consume(o),v):l.interrupt?t(o):M(o):(r=7,l.interrupt&&!l.parser.lazy[l.now().line]?n(o):i?x(o):y(o))}return 45===o||eK(o)?(e.consume(o),a+=String.fromCharCode(o),g):n(o)}function v(r){return 62===r?(e.consume(r),l.interrupt?t:M):n(r)}function x(t){return e2(t)?(e.consume(t),x):N(t)}function y(t){return 47===t?(e.consume(t),N):58===t||95===t||eG(t)?(e.consume(t),b):e2(t)?(e.consume(t),y):N(t)}function b(t){return 45===t||46===t||58===t||95===t||eK(t)?(e.consume(t),b):w(t)}function w(t){return 61===t?(e.consume(t),j):e2(t)?(e.consume(t),w):y(t)}function j(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),s=t,C):e2(t)?(e.consume(t),j):k(t)}function C(t){return t===s?(e.consume(t),s=null,S):null===t||e0(t)?n(t):(e.consume(t),C)}function k(t){return null===t||34===t||39===t||47===t||60===t||61===t||62===t||96===t||e1(t)?w(t):(e.consume(t),k)}function S(e){return 47===e||62===e||e2(e)?y(e):n(e)}function N(t){return 62===t?(e.consume(t),E):n(t)}function E(t){return null===t||e0(t)?M(t):e2(t)?(e.consume(t),E):n(t)}function M(t){return 45===t&&2===r?(e.consume(t),A):60===t&&1===r?(e.consume(t),L):62===t&&4===r?(e.consume(t),O):63===t&&3===r?(e.consume(t),_):93===t&&5===r?(e.consume(t),R):e0(t)&&(6===r||7===r)?(e.exit("htmlFlowData"),e.check(nl,F,I)(t)):null===t||e0(t)?(e.exit("htmlFlowData"),I(t)):(e.consume(t),M)}function I(t){return e.check(nc,D,F)(t)}function D(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),T}function T(t){return null===t||e0(t)?I(t):(e.enter("htmlFlowData"),M(t))}function A(t){return 45===t?(e.consume(t),_):M(t)}function L(t){return 47===t?(e.consume(t),a="",P):M(t)}function P(t){if(62===t){let n=a.toLowerCase();return no.includes(n)?(e.consume(t),O):M(t)}return eG(t)&&a.length<8?(e.consume(t),a+=String.fromCharCode(t),P):M(t)}function R(t){return 93===t?(e.consume(t),_):M(t)}function _(t){return 62===t?(e.consume(t),O):45===t&&2===r?(e.consume(t),_):M(t)}function O(t){return null===t||e0(t)?(e.exit("htmlFlowData"),F(t)):(e.consume(t),O)}function F(n){return e.exit("htmlFlow"),t(n)}}function np(e,t,n){let r=this;return i;function i(t){return e0(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),a):n(t)}function a(e){return r.parser.lazy[r.now().line]?n(e):t(e)}}function nh(e,t,n){return r;function r(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),e.attempt(tr,t,n)}}let nf={name:"htmlText",tokenize:nm};function nm(e,t,n){let r,i,a,o=this;return s;function s(t){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(t),l}function l(t){return 33===t?(e.consume(t),c):47===t?(e.consume(t),w):63===t?(e.consume(t),y):eG(t)?(e.consume(t),k):n(t)}function c(t){return 45===t?(e.consume(t),u):91===t?(e.consume(t),i=0,f):eG(t)?(e.consume(t),x):n(t)}function u(t){return 45===t?(e.consume(t),h):n(t)}function d(t){return null===t?n(t):45===t?(e.consume(t),p):e0(t)?(a=d,L(t)):(e.consume(t),d)}function p(t){return 45===t?(e.consume(t),h):d(t)}function h(e){return 62===e?A(e):45===e?p(e):d(e)}function f(t){let r="CDATA[";return t===r.charCodeAt(i++)?(e.consume(t),i===r.length?m:f):n(t)}function m(t){return null===t?n(t):93===t?(e.consume(t),g):e0(t)?(a=m,L(t)):(e.consume(t),m)}function g(t){return 93===t?(e.consume(t),v):m(t)}function v(t){return 62===t?A(t):93===t?(e.consume(t),v):m(t)}function x(t){return null===t||62===t?A(t):e0(t)?(a=x,L(t)):(e.consume(t),x)}function y(t){return null===t?n(t):63===t?(e.consume(t),b):e0(t)?(a=y,L(t)):(e.consume(t),y)}function b(e){return 62===e?A(e):y(e)}function w(t){return eG(t)?(e.consume(t),j):n(t)}function j(t){return 45===t||eK(t)?(e.consume(t),j):C(t)}function C(t){return e0(t)?(a=C,L(t)):e2(t)?(e.consume(t),C):A(t)}function k(t){return 45===t||eK(t)?(e.consume(t),k):47===t||62===t||e1(t)?S(t):n(t)}function S(t){return 47===t?(e.consume(t),A):58===t||95===t||eG(t)?(e.consume(t),N):e0(t)?(a=S,L(t)):e2(t)?(e.consume(t),S):A(t)}function N(t){return 45===t||46===t||58===t||95===t||eK(t)?(e.consume(t),N):E(t)}function E(t){return 61===t?(e.consume(t),M):e0(t)?(a=E,L(t)):e2(t)?(e.consume(t),E):S(t)}function M(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),r=t,I):e0(t)?(a=M,L(t)):e2(t)?(e.consume(t),M):(e.consume(t),D)}function I(t){return t===r?(e.consume(t),r=void 0,T):null===t?n(t):e0(t)?(a=I,L(t)):(e.consume(t),I)}function D(t){return null===t||34===t||39===t||60===t||61===t||96===t?n(t):47===t||62===t||e1(t)?S(t):(e.consume(t),D)}function T(e){return 47===e||62===e||e1(e)?S(e):n(e)}function A(r){return 62===r?(e.consume(r),e.exit("htmlTextData"),e.exit("htmlText"),t):n(r)}function L(t){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),P}function P(t){return e2(t)?e7(e,R,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):R(t)}function R(t){return e.enter("htmlTextData"),a(t)}}let ng={name:"labelEnd",tokenize:nj,resolveTo:nw,resolveAll:nb},nv={tokenize:nC},nx={tokenize:nk},ny={tokenize:nS};function nb(e){let t=-1;for(;++t<e.length;){let n=e[t][1];("labelImage"===n.type||"labelLink"===n.type||"labelEnd"===n.type)&&(e.splice(t+1,"labelImage"===n.type?4:2),n.type="data",t++)}return e}function nw(e,t){let n,r,i,a,o=e.length,s=0;for(;o--;)if(n=e[o][1],r){if("link"===n.type||"labelLink"===n.type&&n._inactive)break;"enter"===e[o][0]&&"labelLink"===n.type&&(n._inactive=!0)}else if(i){if("enter"===e[o][0]&&("labelImage"===n.type||"labelLink"===n.type)&&!n._balanced&&(r=o,"labelLink"!==n.type)){s=2;break}}else"labelEnd"===n.type&&(i=o);let l={type:"labelLink"===e[r][1].type?"link":"image",start:Object.assign({},e[r][1].start),end:Object.assign({},e[e.length-1][1].end)},c={type:"label",start:Object.assign({},e[r][1].start),end:Object.assign({},e[i][1].end)},u={type:"labelText",start:Object.assign({},e[r+s+2][1].end),end:Object.assign({},e[i-2][1].start)};return a=eB(a=[["enter",l,t],["enter",c,t]],e.slice(r+1,r+s+3)),a=eB(a,[["enter",u,t]]),a=eB(a,tj(t.parser.constructs.insideSpan.null,e.slice(r+s+4,i-3),t)),a=eB(a,[["exit",u,t],e[i-2],e[i-1],["exit",c,t]]),a=eB(a,e.slice(i+1)),a=eB(a,[["exit",l,t]]),eV(e,r,e.length,a),e}function nj(e,t,n){let r,i,a=this,o=a.events.length;for(;o--;)if(("labelImage"===a.events[o][1].type||"labelLink"===a.events[o][1].type)&&!a.events[o][1]._balanced){r=a.events[o][1];break}return s;function s(t){return r?r._inactive?d(t):(i=a.parser.defined.includes(t3(a.sliceSerialize({start:r.end,end:a.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelEnd"),l):n(t)}function l(t){return 40===t?e.attempt(nv,u,i?u:d)(t):91===t?e.attempt(nx,u,i?c:d)(t):i?u(t):d(t)}function c(t){return e.attempt(ny,u,d)(t)}function u(e){return t(e)}function d(e){return r._balanced=!0,n(e)}}function nC(e,t,n){return r;function r(t){return e.enter("resource"),e.enter("resourceMarker"),e.consume(t),e.exit("resourceMarker"),i}function i(t){return e1(t)?t4(e,a)(t):a(t)}function a(t){return 41===t?u(t):t1(e,o,s,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(t)}function o(t){return e1(t)?t4(e,l)(t):u(t)}function s(e){return n(e)}function l(t){return 34===t||39===t||40===t?t5(e,c,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(t):u(t)}function c(t){return e1(t)?t4(e,u)(t):u(t)}function u(r){return 41===r?(e.enter("resourceMarker"),e.consume(r),e.exit("resourceMarker"),e.exit("resource"),t):n(r)}}function nk(e,t,n){let r=this;return i;function i(t){return t2.call(r,e,a,o,"reference","referenceMarker","referenceString")(t)}function a(e){return r.parser.defined.includes(t3(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(e):n(e)}function o(e){return n(e)}}function nS(e,t,n){return r;function r(t){return e.enter("reference"),e.enter("referenceMarker"),e.consume(t),e.exit("referenceMarker"),i}function i(r){return 93===r?(e.enter("referenceMarker"),e.consume(r),e.exit("referenceMarker"),e.exit("reference"),t):n(r)}}let nN={name:"labelStartImage",tokenize:nE,resolveAll:ng.resolveAll};function nE(e,t,n){let r=this;return i;function i(t){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(t),e.exit("labelImageMarker"),a}function a(t){return 91===t?(e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelImage"),o):n(t)}function o(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}}let nM={name:"labelStartLink",tokenize:nI,resolveAll:ng.resolveAll};function nI(e,t,n){let r=this;return i;function i(t){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelLink"),a}function a(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}}let nD={name:"lineEnding",tokenize:nT};function nT(e,t){return n;function n(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),e7(e,t,"linePrefix")}}let nA={name:"thematicBreak",tokenize:nL};function nL(e,t,n){let r,i=0;return a;function a(t){return e.enter("thematicBreak"),o(t)}function o(e){return r=e,s(e)}function s(a){return a===r?(e.enter("thematicBreakSequence"),l(a)):i>=3&&(null===a||e0(a))?(e.exit("thematicBreak"),t(a)):n(a)}function l(t){return t===r?(e.consume(t),i++,l):(e.exit("thematicBreakSequence"),e2(t)?e7(e,s,"whitespace")(t):s(t))}}let nP={name:"list",tokenize:nO,continuation:{tokenize:nF},exit:nB},nR={tokenize:nz,partial:!0},n_={tokenize:nV,partial:!0};function nO(e,t,n){let r=this,i=r.events[r.events.length-1],a=i&&"linePrefix"===i[1].type?i[2].sliceSerialize(i[1],!0).length:0,o=0;return s;function s(t){let i=r.containerState.type||(42===t||43===t||45===t?"listUnordered":"listOrdered");if("listUnordered"===i?!r.containerState.marker||t===r.containerState.marker:eY(t)){if(r.containerState.type||(r.containerState.type=i,e.enter(i,{_container:!0})),"listUnordered"===i)return e.enter("listItemPrefix"),42===t||45===t?e.check(nA,n,c)(t):c(t);if(!r.interrupt||49===t)return e.enter("listItemPrefix"),e.enter("listItemValue"),l(t)}return n(t)}function l(t){return eY(t)&&++o<10?(e.consume(t),l):(!r.interrupt||o<2)&&(r.containerState.marker?t===r.containerState.marker:41===t||46===t)?(e.exit("listItemValue"),c(t)):n(t)}function c(t){return e.enter("listItemMarker"),e.consume(t),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||t,e.check(tr,r.interrupt?n:u,e.attempt(nR,p,d))}function u(e){return r.containerState.initialBlankLine=!0,a++,p(e)}function d(t){return e2(t)?(e.enter("listItemPrefixWhitespace"),e.consume(t),e.exit("listItemPrefixWhitespace"),p):n(t)}function p(n){return r.containerState.size=a+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(n)}}function nF(e,t,n){let r=this;return r.containerState._closeFlow=void 0,e.check(tr,i,a);function i(n){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,e7(e,t,"listItemIndent",r.containerState.size+1)(n)}function a(n){return r.containerState.furtherBlankLines||!e2(n)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(n)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(n_,t,o)(n))}function o(i){return r.containerState._closeFlow=!0,r.interrupt=void 0,e7(e,e.attempt(nP,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(i)}}function nV(e,t,n){let r=this;return e7(e,i,"listItemIndent",r.containerState.size+1);function i(e){let i=r.events[r.events.length-1];return i&&"listItemIndent"===i[1].type&&i[2].sliceSerialize(i[1],!0).length===r.containerState.size?t(e):n(e)}}function nB(e){e.exit(this.containerState.type)}function nz(e,t,n){let r=this;return e7(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(e){let i=r.events[r.events.length-1];return!e2(e)&&i&&"listItemPrefixWhitespace"===i[1].type?t(e):n(e)}}let nH={name:"setextUnderline",tokenize:nq,resolveTo:nU};function nU(e,t){let n,r,i,a=e.length;for(;a--;)if("enter"===e[a][0]){if("content"===e[a][1].type){n=a;break}"paragraph"===e[a][1].type&&(r=a)}else"content"===e[a][1].type&&e.splice(a,1),i||"definition"!==e[a][1].type||(i=a);let o={type:"setextHeading",start:Object.assign({},e[r][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[r][1].type="setextHeadingText",i?(e.splice(r,0,["enter",o,t]),e.splice(i+1,0,["exit",e[n][1],t]),e[n][1].end=Object.assign({},e[i][1].end)):e[n][1]=o,e.push(["exit",o,t]),e}function nq(e,t,n){let r,i=this;return a;function a(t){let a,s=i.events.length;for(;s--;)if("lineEnding"!==i.events[s][1].type&&"linePrefix"!==i.events[s][1].type&&"content"!==i.events[s][1].type){a="paragraph"===i.events[s][1].type;break}return!i.parser.lazy[i.now().line]&&(i.interrupt||a)?(e.enter("setextHeadingLine"),r=t,o(t)):n(t)}function o(t){return e.enter("setextHeadingLineSequence"),s(t)}function s(t){return t===r?(e.consume(t),s):(e.exit("setextHeadingLineSequence"),e2(t)?e7(e,l,"lineSuffix")(t):l(t))}function l(r){return null===r||e0(r)?(e.exit("setextHeadingLine"),t(r)):n(r)}}let nW={42:nP,43:nP,45:nP,48:nP,49:nP,50:nP,51:nP,52:nP,53:nP,54:nP,55:nP,56:nP,57:nP,62:tL},nZ={91:t7},nG={[-2]:tG,[-1]:tG,32:tG},nK={35:nn,42:nA,45:[nH,nA],60:ns,61:nH,95:nA,96:tq,126:tq},nX={38:tz,92:tO},n$={[-5]:nD,[-4]:nD,[-3]:nD,33:nN,38:tz,42:tE,60:[tT,nf],91:nM,92:[ne,tO],93:ng,95:tE,96:tY},nY={null:[tE,tg]},nJ={null:[42,95]},nQ={null:[]};e.s(["attentionMarkers",0,nJ,"contentInitial",0,nZ,"disable",0,nQ,"document",0,nW,"flow",0,nK,"flowInitial",0,nG,"insideSpan",0,nY,"string",0,nX,"text",0,n$],945011);var n0=e.i(945011);function n1(e){let t={defined:[],lazy:{},constructs:eH([n0,...(e||{}).extensions||[]]),content:n(e9),document:n(e8),flow:n(tf),string:n(tv),text:n(tx)};return t;function n(e){return n;function n(n){return tC(t,e,n)}}}function n2(e){for(;!ts(e););return e}let n5=/[\0\t\n\r]/g;function n4(){let e,t=1,n="",r=!0;return i;function i(i,a,o){let s,l,c,u,d,p=[];for(i=n+("string"==typeof i?i.toString():new TextDecoder(a||void 0).decode(i)),c=0,n="",r&&(65279===i.charCodeAt(0)&&c++,r=void 0);c<i.length;){if(n5.lastIndex=c,u=(s=n5.exec(i))&&void 0!==s.index?s.index:i.length,d=i.charCodeAt(u),!s){n=i.slice(c);break}if(10===d&&c===u&&e)p.push(-3),e=void 0;else switch(e&&(p.push(-5),e=void 0),c<u&&(p.push(i.slice(c,u)),t+=u-c),d){case 0:p.push(65533),t++;break;case 9:for(l=4*Math.ceil(t/4),p.push(-2);t++<l;)p.push(-1);break;case 10:p.push(-4),t=1;break;default:e=!0,t=1}c=u+1}return o&&(e&&p.push(-5),n&&p.push(n),p.push(null)),p}}function n3(e,t){let n=Number.parseInt(e,t);return n<9||11===n||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(65535&n)==65535||(65535&n)==65534||n>1114111?"�":String.fromCodePoint(n)}let n7=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function n9(e){return e.replace(n7,n6)}function n6(e,t,n){if(t)return t;if(35===n.charCodeAt(0)){let e=n.charCodeAt(1),t=120===e||88===e;return n3(n.slice(t?2:1),t?16:10)}return tB(n)||e}let n8={}.hasOwnProperty;function re(e,t,n){return"string"!=typeof t&&(n=t,t=void 0),rt(n)(n2(n1(n).document().write(n4()(e,t,!0))))}function rt(e){let t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(en),autolinkProtocol:S,autolinkEmail:S,atxHeading:a(Y),blockQuote:a(Z),characterEscape:S,characterReference:S,codeFenced:a(G),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:a(G,o),codeText:a(K,o),codeTextData:S,data:S,codeFlowValue:S,definition:a(X),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:a($),hardBreakEscape:a(Q),hardBreakTrailing:a(Q),htmlFlow:a(ee,o),htmlFlowData:S,htmlText:a(ee,o),htmlTextData:S,image:a(et),label:o,link:a(en),listItem:a(ei),listItemValue:p,listOrdered:a(er,d),listUnordered:a(er),paragraph:a(ea),reference:V,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:a(Y),strong:a(eo),thematicBreak:a(el)},exit:{atxHeading:l(),atxHeadingSequence:w,autolink:l(),autolinkEmail:W,autolinkProtocol:q,blockQuote:l(),characterEscapeValue:N,characterReferenceMarkerHexadecimal:z,characterReferenceMarkerNumeric:z,characterReferenceValue:H,characterReference:U,codeFenced:l(g),codeFencedFence:m,codeFencedFenceInfo:h,codeFencedFenceMeta:f,codeFlowValue:N,codeIndented:l(v),codeText:l(T),codeTextData:N,data:N,definition:l(),definitionDestinationString:b,definitionLabelString:x,definitionTitleString:y,emphasis:l(),hardBreakEscape:l(M),hardBreakTrailing:l(M),htmlFlow:l(I),htmlFlowData:N,htmlText:l(D),htmlTextData:N,image:l(L),label:R,labelText:P,lineEnding:E,link:l(A),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:B,resourceDestinationString:_,resourceTitleString:O,resource:F,setextHeading:l(k),setextHeadingLineSequence:C,setextHeadingText:j,strong:l(),thematicBreak:l()}};rr(t,(e||{}).mdastExtensions||[]);let n={};return r;function r(e){let r={type:"root",children:[]},a={stack:[r],tokenStack:[],config:t,enter:s,exit:c,buffer:o,resume:u,data:n},l=[],d=-1;for(;++d<e.length;)("listOrdered"===e[d][1].type||"listUnordered"===e[d][1].type)&&("enter"===e[d][0]?l.push(d):d=i(e,l.pop(),d));for(d=-1;++d<e.length;){let n=t[e[d][0]];n8.call(n,e[d][1].type)&&n[e[d][1].type].call(Object.assign({sliceSerialize:e[d][2].sliceSerialize},a),e[d][1])}if(a.tokenStack.length>0){let e=a.tokenStack[a.tokenStack.length-1];(e[1]||ra).call(a,void 0,e[0])}for(r.position={start:rn(e.length>0?e[0][1].start:{line:1,column:1,offset:0}),end:rn(e.length>0?e[e.length-2][1].end:{line:1,column:1,offset:0})},d=-1;++d<t.transforms.length;)r=t.transforms[d](r)||r;return r}function i(e,t,n){let r,i,a,o,s=t-1,l=-1,c=!1;for(;++s<=n;){let t=e[s];switch(t[1].type){case"listUnordered":case"listOrdered":case"blockQuote":"enter"===t[0]?l++:l--,o=void 0;break;case"lineEndingBlank":"enter"===t[0]&&(!r||o||l||a||(a=s),o=void 0);break;case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:o=void 0}if(!l&&"enter"===t[0]&&"listItemPrefix"===t[1].type||-1===l&&"exit"===t[0]&&("listUnordered"===t[1].type||"listOrdered"===t[1].type)){if(r){let o=s;for(i=void 0;o--;){let t=e[o];if("lineEnding"===t[1].type||"lineEndingBlank"===t[1].type){if("exit"===t[0])continue;i&&(e[i][1].type="lineEndingBlank",c=!0),t[1].type="lineEnding",i=o}else if("linePrefix"===t[1].type||"blockQuotePrefix"===t[1].type||"blockQuotePrefixWhitespace"===t[1].type||"blockQuoteMarker"===t[1].type||"listItemIndent"===t[1].type);else break}a&&(!i||a<i)&&(r._spread=!0),r.end=Object.assign({},i?e[i][1].start:t[1].end),e.splice(i||s,0,["exit",r,t[2]]),s++,n++}if("listItemPrefix"===t[1].type){let i={type:"listItem",_spread:!1,start:Object.assign({},t[1].start),end:void 0};r=i,e.splice(s,0,["enter",i,t[2]]),s++,n++,a=void 0,o=!0}}}return e[t][1]._spread=c,n}function a(e,t){return n;function n(n){s.call(this,e(n),n),t&&t.call(this,n)}}function o(){this.stack.push({type:"fragment",children:[]})}function s(e,t,n){this.stack[this.stack.length-1].children.push(e),this.stack.push(e),this.tokenStack.push([t,n||void 0]),e.position={start:rn(t.start),end:void 0}}function l(e){return t;function t(t){e&&e.call(this,t),c.call(this,t)}}function c(e,t){let n=this.stack.pop(),r=this.tokenStack.pop();if(r)r[0].type!==e.type&&(t?t.call(this,e,r[0]):(r[1]||ra).call(this,e,r[0]));else throw Error("Cannot close `"+e.type+"` ("+J({start:e.start,end:e.end})+"): it’s not open");n.position.end=rn(e.end)}function u(){return eR(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function p(e){this.data.expectingFirstListItemValue&&(this.stack[this.stack.length-2].start=Number.parseInt(this.sliceSerialize(e),10),this.data.expectingFirstListItemValue=void 0)}function h(){let e=this.resume();this.stack[this.stack.length-1].lang=e}function f(){let e=this.resume();this.stack[this.stack.length-1].meta=e}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){let e=this.resume();this.stack[this.stack.length-1].value=e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function v(){let e=this.resume();this.stack[this.stack.length-1].value=e.replace(/(\r?\n|\r)$/g,"")}function x(e){let t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=t3(this.sliceSerialize(e)).toLowerCase()}function y(){let e=this.resume();this.stack[this.stack.length-1].title=e}function b(){let e=this.resume();this.stack[this.stack.length-1].url=e}function w(e){let t=this.stack[this.stack.length-1];t.depth||(t.depth=this.sliceSerialize(e).length)}function j(){this.data.setextHeadingSlurpLineEnding=!0}function C(e){this.stack[this.stack.length-1].depth=61===this.sliceSerialize(e).codePointAt(0)?1:2}function k(){this.data.setextHeadingSlurpLineEnding=void 0}function S(e){let t=this.stack[this.stack.length-1].children,n=t[t.length-1];n&&"text"===n.type||((n=es()).position={start:rn(e.start),end:void 0},t.push(n)),this.stack.push(n)}function N(e){let t=this.stack.pop();t.value+=this.sliceSerialize(e),t.position.end=rn(e.end)}function E(e){let n=this.stack[this.stack.length-1];if(this.data.atHardBreak){n.children[n.children.length-1].position.end=rn(e.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(n.type)&&(S.call(this,e),N.call(this,e))}function M(){this.data.atHardBreak=!0}function I(){let e=this.resume();this.stack[this.stack.length-1].value=e}function D(){let e=this.resume();this.stack[this.stack.length-1].value=e}function T(){let e=this.resume();this.stack[this.stack.length-1].value=e}function A(){let e=this.stack[this.stack.length-1];if(this.data.inReference){let t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}function L(){let e=this.stack[this.stack.length-1];if(this.data.inReference){let t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}function P(e){let t=this.sliceSerialize(e),n=this.stack[this.stack.length-2];n.label=n9(t),n.identifier=t3(t).toLowerCase()}function R(){let e=this.stack[this.stack.length-1],t=this.resume(),n=this.stack[this.stack.length-1];this.data.inReference=!0,"link"===n.type?n.children=e.children:n.alt=t}function _(){let e=this.resume();this.stack[this.stack.length-1].url=e}function O(){let e=this.resume();this.stack[this.stack.length-1].title=e}function F(){this.data.inReference=void 0}function V(){this.data.referenceType="collapsed"}function B(e){let t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=t3(this.sliceSerialize(e)).toLowerCase(),this.data.referenceType="full"}function z(e){this.data.characterReferenceType=e.type}function H(e){let t,n=this.sliceSerialize(e),r=this.data.characterReferenceType;r?(t=n3(n,"characterReferenceMarkerNumeric"===r?10:16),this.data.characterReferenceType=void 0):t=tB(n);let i=this.stack[this.stack.length-1];i.value+=t}function U(e){this.stack.pop().position.end=rn(e.end)}function q(e){N.call(this,e),this.stack[this.stack.length-1].url=this.sliceSerialize(e)}function W(e){N.call(this,e),this.stack[this.stack.length-1].url="mailto:"+this.sliceSerialize(e)}function Z(){return{type:"blockquote",children:[]}}function G(){return{type:"code",lang:null,meta:null,value:""}}function K(){return{type:"inlineCode",value:""}}function X(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function $(){return{type:"emphasis",children:[]}}function Y(){return{type:"heading",depth:0,children:[]}}function Q(){return{type:"break"}}function ee(){return{type:"html",value:""}}function et(){return{type:"image",title:null,url:"",alt:null}}function en(){return{type:"link",title:null,url:"",children:[]}}function er(e){return{type:"list",ordered:"listOrdered"===e.type,start:null,spread:e._spread,children:[]}}function ei(e){return{type:"listItem",spread:e._spread,checked:null,children:[]}}function ea(){return{type:"paragraph",children:[]}}function eo(){return{type:"strong",children:[]}}function es(){return{type:"text",value:""}}function el(){return{type:"thematicBreak"}}}function rn(e){return{line:e.line,column:e.column,offset:e.offset}}function rr(e,t){let n=-1;for(;++n<t.length;){let r=t[n];Array.isArray(r)?rr(e,r):ri(e,r)}}function ri(e,t){let n;for(n in t)if(n8.call(t,n))switch(n){case"canContainEols":{let r=t[n];r&&e[n].push(...r);break}case"transforms":{let r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{let r=t[n];r&&Object.assign(e[n],r)}}}function ra(e,t){if(e)throw Error("Cannot close `"+e.type+"` ("+J({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+J({start:t.start,end:t.end})+") is open");throw Error("Cannot close document, a token (`"+t.type+"`, "+J({start:t.start,end:t.end})+") is still open")}function ro(e){let t=this;function n(n){return re(n,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}t.parser=n}e.s(["default",()=>ro],403010);let rs=-1,rl=0,rc=1,ru=2,rd=3,rp=4,rh=5,rf=6,rm=7,rg=8,rv="object"==typeof self?self:globalThis,rx=(e,t)=>{let n=(t,n)=>(e.set(n,t),t),r=i=>{if(e.has(i))return e.get(i);let[a,o]=t[i];switch(a){case rl:case rs:return n(o,i);case rc:{let e=n([],i);for(let t of o)e.push(r(t));return e}case ru:{let e=n({},i);for(let[t,n]of o)e[r(t)]=r(n);return e}case rd:return n(new Date(o),i);case rp:{let{source:e,flags:t}=o;return n(new RegExp(e,t),i)}case rh:{let e=n(new Map,i);for(let[t,n]of o)e.set(r(t),r(n));return e}case rf:{let e=n(new Set,i);for(let t of o)e.add(r(t));return e}case rm:{let{name:e,message:t}=o;return n(new rv[e](t),i)}case rg:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new rv[a](o),i)};return r},ry=e=>rx(new Map,e)(0),rb="",{toString:rw}={},{keys:rj}=Object,rC=e=>{let t=typeof e;if("object"!==t||!e)return[rl,t];let n=rw.call(e).slice(8,-1);switch(n){case"Array":return[rc,rb];case"Object":return[ru,rb];case"Date":return[rd,rb];case"RegExp":return[rp,rb];case"Map":return[rh,rb];case"Set":return[rf,rb]}return n.includes("Array")?[rc,n]:n.includes("Error")?[rm,n]:[ru,n]},rk=e=>{let[t,n]=e;return t===rl&&("function"===n||"symbol"===n)},rS=(e,t,n,r)=>{let i=(e,t)=>{let i=r.push(e)-1;return n.set(t,i),i},a=r=>{if(n.has(r))return n.get(r);let[o,s]=rC(r);switch(o){case rl:{let t=r;switch(s){case"bigint":o=rg,t=r.toString();break;case"function":case"symbol":if(e)throw TypeError("unable to serialize "+s);t=null;break;case"undefined":return i([rs],r)}return i([o,t],r)}case rc:{if(s)return i([s,[...r]],r);let e=[],t=i([o,e],r);for(let t of r)e.push(a(t));return t}case ru:{if(s)switch(s){case"BigInt":return i([s,r.toString()],r);case"Boolean":case"Number":case"String":return i([s,r.valueOf()],r)}if(t&&"toJSON"in r)return a(r.toJSON());let n=[],l=i([o,n],r);for(let t of rj(r))(e||!rk(rC(r[t])))&&n.push([a(t),a(r[t])]);return l}case rd:return i([o,r.toISOString()],r);case rp:{let{source:e,flags:t}=r;return i([o,{source:e,flags:t}],r)}case rh:{let t=[],n=i([o,t],r);for(let[n,i]of r)(e||!(rk(rC(n))||rk(rC(i))))&&t.push([a(n),a(i)]);return n}case rf:{let t=[],n=i([o,t],r);for(let n of r)(e||!rk(rC(n)))&&t.push(a(n));return n}}let{message:l}=r;return i([o,{name:s,message:l}],r)};return a},rN=function(e){let{json:t,lossy:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[];return rS(!(t||n),!!t,new Map,r)(e),r},rE="function"==typeof structuredClone?(e,t)=>t&&("json"in t||"lossy"in t)?ry(rN(e,t)):structuredClone(e):(e,t)=>ry(rN(e,t));e.s(["default",0,rE],803621);let rM={'"':"quot","&":"amp","<":"lt",">":"gt"};function rI(e){return e.replace(/["&<>]/g,t);function t(e){return"&"+rM[e]+";"}}function rD(e,t){let n=rI(rT(e||""));if(!t)return n;let r=n.indexOf(":"),i=n.indexOf("?"),a=n.indexOf("#"),o=n.indexOf("/");return r<0||o>-1&&r>o||i>-1&&r>i||a>-1&&r>a||t.test(n.slice(0,r))?n:""}function rT(e){let t=[],n=-1,r=0,i=0;for(;++n<e.length;){let a=e.charCodeAt(n),o="";if(37===a&&eK(e.charCodeAt(n+1))&&eK(e.charCodeAt(n+2)))i=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(o=String.fromCharCode(a));else if(a>55295&&a<57344){let t=e.charCodeAt(n+1);a<56320&&t>56319&&t<57344?(o=String.fromCharCode(a,t),i=1):o="�"}else o=String.fromCharCode(a);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function rA(e,t){let n=[{type:"text",value:"↩"}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function rL(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function rP(e){let t="string"==typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||rA,r=e.options.footnoteBackLabel||rL,i=e.options.footnoteLabel||"Footnotes",a=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},s=[],l=-1;for(;++l<e.footnoteOrder.length;){let i=e.footnoteById.get(e.footnoteOrder[l]);if(!i)continue;let a=e.all(i),o=String(i.identifier).toUpperCase(),c=rT(o.toLowerCase()),u=0,d=[],p=e.footnoteCounts.get(o);for(;void 0!==p&&++u<=p;){d.length>0&&d.push({type:"text",value:" "});let e="string"==typeof n?n:n(l,u);"string"==typeof e&&(e={type:"text",value:e}),d.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+c+(u>1?"-"+u:""),dataFootnoteBackref:"",ariaLabel:"string"==typeof r?r:r(l,u),className:["data-footnote-backref"]},children:Array.isArray(e)?e:[e]})}let h=a[a.length-1];if(h&&"element"===h.type&&"p"===h.tagName){let e=h.children[h.children.length-1];e&&"text"===e.type?e.value+=" ":h.children.push({type:"text",value:" "}),h.children.push(...d)}else a.push(...d);let f={type:"element",tagName:"li",properties:{id:t+"fn-"+c},children:e.wrap(a,!0)};e.patch(i,f),s.push(f)}if(0!==s.length)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...rE(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:"\n"},{type:"element",tagName:"ol",properties:{},children:e.wrap(s,!0)},{type:"text",value:"\n"}]}}e.s(["normalizeUri",()=>rT,"sanitizeUri",()=>rD],983691),e.s(["footer",()=>rP],576597)},939049,249548,e=>{"use strict";let t=function(e){if(null==e)return o;if("function"==typeof e)return a(e);if("object"==typeof e)return Array.isArray(e)?n(e):r(e);if("string"==typeof e)return i(e);throw Error("Expected function, string, or object as test")};function n(e){let n=[],r=-1;for(;++r<e.length;)n[r]=t(e[r]);return a(i);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let i=-1;for(;++i<n.length;)if(n[i].apply(this,t))return!0;return!1}}function r(e){let t=e;return a(n);function n(n){let r,i=n;for(r in e)if(i[r]!==t[r])return!1;return!0}}function i(e){return a(t);function t(t){return t&&t.type===e}}function a(e){return t;function t(t,n,r){return!!(s(t)&&e.call(this,t,"number"==typeof n?n:void 0,r||void 0))}}function o(){return!0}function s(e){return null!==e&&"object"==typeof e&&"type"in e}function l(e){return e}e.s(["convert",0,t],249548);let c=[],u=!0,d=!1,p="skip";function h(e,n,r,i){let a;"function"==typeof n&&"function"!=typeof r?(i=r,r=n):a=n;let o=t(a),s=i?-1:1;function u(e,t,a){let h=e&&"object"==typeof e?e:{};if("string"==typeof h.type){let t="string"==typeof h.tagName?h.tagName:"string"==typeof h.name?h.name:void 0;Object.defineProperty(m,"name",{value:"node ("+l(e.type+(t?"<"+t+">":""))+")"})}return m;function m(){let l,h,m,g=c;if((!n||o(e,t,a[a.length-1]||void 0))&&(g=f(r(e,a)))[0]===d)return g;if("children"in e&&e.children){let t=e;if(t.children&&g[0]!==p)for(h=(i?t.children.length:-1)+s,m=a.concat(t);h>-1&&h<t.children.length;){if((l=u(t.children[h],h,m)())[0]===d)return l;h="number"==typeof l[1]?l[1]:h+s}}return g}}u(e,void 0,[])()}function f(e){return Array.isArray(e)?e:"number"==typeof e?[u,e]:null==e?c:[e]}e.s(["EXIT",0,d,"visitParents",()=>h],939049)},975609,(e,t,n)=>{"use strict";var r=Object.prototype.hasOwnProperty,i=Object.prototype.toString,a=Object.defineProperty,o=Object.getOwnPropertyDescriptor,s=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===i.call(e)},l=function(e){if(!e||"[object Object]"!==i.call(e))return!1;var t,n=r.call(e,"constructor"),a=e.constructor&&e.constructor.prototype&&r.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!a)return!1;for(t in e);return void 0===t||r.call(e,t)},c=function(e,t){a&&"__proto__"===t.name?a(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},u=function(e,t){if("__proto__"===t){if(!r.call(e,t))return;else if(o)return o(e,t).value}return e[t]};t.exports=function e(){var t,n,r,i,a,o,d=arguments[0],p=1,h=arguments.length,f=!1;for("boolean"==typeof d&&(f=d,d=arguments[1]||{},p=2),(null==d||"object"!=typeof d&&"function"!=typeof d)&&(d={});p<h;++p)if(t=arguments[p],null!=t)for(n in t)r=u(d,n),d!==(i=u(t,n))&&(f&&i&&(l(i)||(a=s(i)))?(a?(a=!1,o=r&&s(r)?r:[]):o=r&&l(r)?r:{},c(d,{name:n,newValue:e(f,o,i)})):void 0!==i&&c(d,{name:n,newValue:i}));return d}},900245,(e,t,n)=>{"use strict";var r=e.e&&e.e.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=e.e&&e.e.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};Object.defineProperty(n,"__esModule",{value:!0}),n.default=s;var a=e.r(832520),o=e.r(200407);function s(e){return function(t){var n=t.defaultOrigin,s=void 0===n?"":n,l=t.allowedLinkPrefixes,c=void 0===l?[]:l,u=t.allowedImagePrefixes,d=void 0===u?[]:u,p=t.components,h=i(t,["defaultOrigin","allowedLinkPrefixes","allowedImagePrefixes","components"]),f=c.length&&!c.every(function(e){return"*"===e}),m=d.length&&!d.every(function(e){return"*"===e});if(!s&&(f||m))throw Error("defaultOrigin is required when allowedLinkPrefixes or allowedImagePrefixes are provided");var g=function(e){if("string"!=typeof e)return null;try{var t=new URL(e);return t}catch(n){if(s)try{var t=new URL(e,s);return t}catch(e){}return null}},v=function(e){return"string"==typeof e&&e.startsWith("/")},x=function(e,t){if(!e||!g(e))return null;if(t.includes("*")){var n=v(e),r=g(e);return r?n?r.pathname+r.search+r.hash:r.href:null}var i=v(e),a=g(e);return a&&t.some(function(e){var t=g(e);return!!t&&t.origin===a.origin&&a.href.startsWith(t.href)})?i?a.pathname+a.search+a.hash:a.href:null},y={a:function(e){var t=e.href,n=e.children,s=e.node,l=i(e,["href","children","node"]),u=x(t,c);return null!==u?(null==p?void 0:p.a)?(0,o.createElement)(p.a,r({href:u,children:n,node:s,target:"_blank",rel:"noopener noreferrer"},l)):(0,a.jsx)("a",r({href:u},l,{target:"_blank",rel:"noopener noreferrer",children:n})):(0,a.jsxs)("span",{className:"text-gray-500",title:"Blocked URL: ".concat(t),children:[n," [blocked]"]})},img:function(e){var t=e.src,n=e.alt,s=e.node,l=i(e,["src","alt","node"]),c=x(t,d);return null!==c?(null==p?void 0:p.img)?(0,o.createElement)(p.img,r({src:c,alt:n,node:s},l)):(0,a.jsx)("img",r({src:c,alt:n},l)):(0,a.jsxs)("span",{className:"inline-block bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-400 px-3 py-1 rounded text-sm",children:["[Image blocked: ",n||"No description","]"]})}},b=r(r({},p),y),w=r(r({},h),{components:b});return(0,o.createElement)(e,w)}}},770150,446207,694686,e=>{"use strict";var t=e.i(897802),n=e.i(352446),r=e.i(722259),i=e.i(832520),a=e.i(403010),o=t,s=e.i(576597),l=e.i(803621),c=e.i(939049);function u(e,t,n,r){let i,a,o;function s(e,t){let n=t[t.length-1],r=n?n.children.indexOf(e):void 0;return o(e,r,n)}"function"==typeof t&&"function"!=typeof n?(a=void 0,o=t,i=n):(a=t,o=n,i=r),(0,c.visitParents)(e,a,s,i)}e.s(["visit",()=>u],446207);var d=e.i(417798);function p(e,t){let n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function h(e,t){let n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:"\n"}]}function f(e,t){let n=t.value?t.value+"\n":"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i={type:"element",tagName:"pre",properties:{},children:[i=e.applyData(t,i)]},e.patch(t,i),i}function m(e,t){let n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function g(e,t){let n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}var v=e.i(983691);function x(e,t){let n,r="string"==typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",i=String(t.identifier).toUpperCase(),a=(0,v.normalizeUri)(i.toLowerCase()),o=e.footnoteOrder.indexOf(i),s=e.footnoteCounts.get(i);void 0===s?(s=0,e.footnoteOrder.push(i),n=e.footnoteOrder.length):n=o+1,s+=1,e.footnoteCounts.set(i,s);let l={type:"element",tagName:"a",properties:{href:"#"+r+"fn-"+a,id:r+"fnref-"+a+(s>1?"-"+s:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(n)}]};e.patch(t,l);let c={type:"element",tagName:"sup",properties:{},children:[l]};return e.patch(t,c),e.applyData(t,c)}var y=v;function b(e,t){let n=t.referenceType,r="]";if("collapsed"===n?r+="[]":"full"===n&&(r+="["+(t.label||t.identifier)+"]"),"imageReference"===t.type)return[{type:"text",value:"!["+t.alt+r}];let i=e.all(t),a=i[0];a&&"text"===a.type?a.value="["+a.value:i.unshift({type:"text",value:"["});let o=i[i.length-1];return o&&"text"===o.type?o.value+=r:i.push({type:"text",value:r}),i}var w=v,j=v,C=v;function k(e){let t=!1;if("list"===e.type){t=e.spread||!1;let n=e.children,r=-1;for(;!t&&++r<n.length;)t=S(n[r])}return t}function S(e){let t=e.spread;return null==t?e.children.length>1:t}var N=d;let E=9,M=32;function I(e){let t=String(e),n=/\r?\n|\r/g,r=n.exec(t),i=0,a=[];for(;r;)a.push(D(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return a.push(D(t.slice(i),i>0,!1)),a.join("")}function D(e,t,n){let r=0,i=e.length;if(t){let t=e.codePointAt(r);for(;t===E||t===M;)r++,t=e.codePointAt(r)}if(n){let t=e.codePointAt(i-1);for(;t===E||t===M;)i--,t=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}let T={blockquote:p,break:h,code:f,delete:m,emphasis:g,footnoteReference:x,heading:function(e,t){let n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},html:function(e,t){if(e.options.allowDangerousHtml){let n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}},imageReference:function(e,t){let n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return b(e,t);let i={src:(0,y.normalizeUri)(r.url||""),alt:t.alt};null!==r.title&&void 0!==r.title&&(i.title=r.title);let a={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,a),e.applyData(t,a)},image:function(e,t){let n={src:(0,w.normalizeUri)(t.url)};null!==t.alt&&void 0!==t.alt&&(n.alt=t.alt),null!==t.title&&void 0!==t.title&&(n.title=t.title);let r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)},inlineCode:function(e,t){let n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);let r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)},linkReference:function(e,t){let n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return b(e,t);let i={href:(0,j.normalizeUri)(r.url||"")};null!==r.title&&void 0!==r.title&&(i.title=r.title);let a={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,a),e.applyData(t,a)},link:function(e,t){let n={href:(0,C.normalizeUri)(t.url)};null!==t.title&&void 0!==t.title&&(n.title=t.title);let r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)},listItem:function(e,t,n){let r=e.all(t),i=n?k(n):S(t),a={},o=[];if("boolean"==typeof t.checked){let e,n=r[0];n&&"element"===n.type&&"p"===n.tagName?e=n:(e={type:"element",tagName:"p",properties:{},children:[]},r.unshift(e)),e.children.length>0&&e.children.unshift({type:"text",value:" "}),e.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let s=-1;for(;++s<r.length;){let e=r[s];(i||0!==s||"element"!==e.type||"p"!==e.tagName)&&o.push({type:"text",value:"\n"}),"element"!==e.type||"p"!==e.tagName||i?o.push(e):o.push(...e.children)}let l=r[r.length-1];l&&(i||"element"!==l.type||"p"!==l.tagName)&&o.push({type:"text",value:"\n"});let c={type:"element",tagName:"li",properties:a,children:o};return e.patch(t,c),e.applyData(t,c)},list:function(e,t){let n={},r=e.all(t),i=-1;for("number"==typeof t.start&&1!==t.start&&(n.start=t.start);++i<r.length;){let e=r[i];if("element"===e.type&&"li"===e.tagName&&e.properties&&Array.isArray(e.properties.className)&&e.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}let a={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,a),e.applyData(t,a)},paragraph:function(e,t){let n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},root:function(e,t){let n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)},strong:function(e,t){let n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},table:function(e,t){let n=e.all(t),r=n.shift(),i=[];if(r){let n={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],n),i.push(n)}if(n.length>0){let r={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=(0,N.pointStart)(t.children[1]),o=(0,N.pointEnd)(t.children[t.children.length-1]);a&&o&&(r.position={start:a,end:o}),i.push(r)}let a={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,a),e.applyData(t,a)},tableCell:function(e,t){let n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},tableRow:function(e,t,n){let r=n?n.children:void 0,i=0===(r?r.indexOf(t):1)?"th":"td",a=n&&"table"===n.type?n.align:void 0,o=a?a.length:t.children.length,s=-1,l=[];for(;++s<o;){let n=t.children[s],r={},o=a?a[s]:void 0;o&&(r.align=o);let c={type:"element",tagName:i,properties:r,children:[]};n&&(c.children=e.all(n),e.patch(n,c),c=e.applyData(n,c)),l.push(c)}let c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)},text:function(e,t){let n={type:"text",value:I(String(t.value))};return e.patch(t,n),e.applyData(t,n)},thematicBreak:function(e,t){let n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)},toml:A,yaml:A,definition:A,footnoteDefinition:A};function A(){}let L={}.hasOwnProperty,P={};function R(e,t){let n=t||P,r=new Map,i=new Map,a={all:s,applyData:O,definitionById:r,footnoteById:i,footnoteCounts:new Map,footnoteOrder:[],handlers:{...T,...n.handlers},one:o,options:n,patch:_,wrap:V};return u(e,function(e){if("definition"===e.type||"footnoteDefinition"===e.type){let t="definition"===e.type?r:i,n=String(e.identifier).toUpperCase();t.has(n)||t.set(n,e)}}),a;function o(e,t){let n=e.type,r=a.handlers[n];if(L.call(a.handlers,n)&&r)return r(a,e,t);if(a.options.passThrough&&a.options.passThrough.includes(n)){if("children"in e){let{children:t,...n}=e,r=(0,l.default)(n);return r.children=a.all(e),r}return(0,l.default)(e)}return(a.options.unknownHandler||F)(a,e,t)}function s(e){let t=[];if("children"in e){let n=e.children,r=-1;for(;++r<n.length;){let i=a.one(n[r],e);if(i){if(r&&"break"===n[r-1].type&&(Array.isArray(i)||"text"!==i.type||(i.value=B(i.value)),!Array.isArray(i)&&"element"===i.type)){let e=i.children[0];e&&"text"===e.type&&(e.value=B(e.value))}Array.isArray(i)?t.push(...i):t.push(i)}}}return t}}function _(e,t){e.position&&(t.position=(0,d.position)(e))}function O(e,t){let n=t;if(e&&e.data){let t=e.data.hName,r=e.data.hChildren,i=e.data.hProperties;"string"==typeof t&&("element"===n.type?n.tagName=t:n={type:"element",tagName:t,properties:{},children:"children"in n?n.children:[n]}),"element"===n.type&&i&&Object.assign(n.properties,(0,l.default)(i)),"children"in n&&n.children&&null!=r&&(n.children=r)}return n}function F(e,t){let n=t.data||{},r="value"in t&&!(L.call(n,"hProperties")||L.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function V(e,t){let n=[],r=-1;for(t&&n.push({type:"text",value:"\n"});++r<e.length;)r&&n.push({type:"text",value:"\n"}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:"\n"}),n}function B(e){let t=0,n=e.charCodeAt(t);for(;9===n||32===n;)t++,n=e.charCodeAt(t);return e.slice(t)}function z(e,t){let n=R(e,t),r=n.one(e,void 0),i=(0,s.footer)(n),a=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&((0,o.ok)("children"in a),a.children.push({type:"text",value:"\n"},i)),a}function H(e,t){return e&&"run"in e?async function(n,r){let i=z(n,{file:r,...t});await e.run(i,r)}:function(n,r){return z(n,{file:r,...t||e})}}function U(e){if(e)throw e}var q=e.i(975609),W=t;function Z(e){if("object"!=typeof e||null===e)return!1;let t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function G(){let e=[],t={run:n,use:r};return t;function n(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];let i=-1,a=n.pop();if("function"!=typeof a)throw TypeError("Expected function as last argument, not "+a);function o(t){for(var r=arguments.length,s=Array(r>1?r-1:0),l=1;l<r;l++)s[l-1]=arguments[l];let c=e[++i],u=-1;if(t)return void a(t);for(;++u<n.length;)(null===s[u]||void 0===s[u])&&(s[u]=n[u]);n=s,c?K(c,o)(...s):a(null,...s)}o(null,...n)}function r(n){if("function"!=typeof n)throw TypeError("Expected `middelware` to be a function, not "+n);return e.push(n),t}}function K(e,t){let n;return r;function r(){let t;for(var r=arguments.length,o=Array(r),s=0;s<r;s++)o[s]=arguments[s];let l=e.length>o.length;l&&o.push(i);try{t=e.apply(this,o)}catch(t){let e=t;if(l&&n)throw e;return i(e)}l||(t instanceof Promise?t.then(a,i):t instanceof Error?i(t):a(t))}function i(e){for(var r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];n||(n=!0,t(e,...i))}function a(e){i(null,e)}}var X=e.i(842965);let $={basename:Y,dirname:J,extname:Q,join:ee,sep:"/"};function Y(e,t){let n;if(void 0!==t&&"string"!=typeof t)throw TypeError('"ext" argument must be a string');er(e);let r=0,i=-1,a=e.length;if(void 0===t||0===t.length||t.length>e.length){for(;a--;)if(47===e.codePointAt(a)){if(n){r=a+1;break}}else i<0&&(n=!0,i=a+1);return i<0?"":e.slice(r,i)}if(t===e)return"";let o=-1,s=t.length-1;for(;a--;)if(47===e.codePointAt(a)){if(n){r=a+1;break}}else o<0&&(n=!0,o=a+1),s>-1&&(e.codePointAt(a)===t.codePointAt(s--)?s<0&&(i=a):(s=-1,i=o));return r===i?i=o:i<0&&(i=e.length),e.slice(r,i)}function J(e){let t;if(er(e),0===e.length)return".";let n=-1,r=e.length;for(;--r;)if(47===e.codePointAt(r)){if(t){n=r;break}}else t||(t=!0);return n<0?47===e.codePointAt(0)?"/":".":1===n&&47===e.codePointAt(0)?"//":e.slice(0,n)}function Q(e){let t;er(e);let n=e.length,r=-1,i=0,a=-1,o=0;for(;n--;){let s=e.codePointAt(n);if(47===s){if(t){i=n+1;break}continue}r<0&&(t=!0,r=n+1),46===s?a<0?a=n:1!==o&&(o=1):a>-1&&(o=-1)}return a<0||r<0||0===o||1===o&&a===r-1&&a===i+1?"":e.slice(a,r)}function ee(){let e;for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];let i=-1;for(;++i<n.length;)er(n[i]),n[i]&&(e=void 0===e?n[i]:e+"/"+n[i]);return void 0===e?".":et(e)}function et(e){er(e);let t=47===e.codePointAt(0),n=en(e,!t);return 0!==n.length||t||(n="."),n.length>0&&47===e.codePointAt(e.length-1)&&(n+="/"),t?"/"+n:n}function en(e,t){let n,r,i="",a=0,o=-1,s=0,l=-1;for(;++l<=e.length;){if(l<e.length)n=e.codePointAt(l);else if(47===n)break;else n=47;if(47===n){if(o===l-1||1===s);else if(o!==l-1&&2===s){if(i.length<2||2!==a||46!==i.codePointAt(i.length-1)||46!==i.codePointAt(i.length-2)){if(i.length>2){if((r=i.lastIndexOf("/"))!==i.length-1){r<0?(i="",a=0):a=(i=i.slice(0,r)).length-1-i.lastIndexOf("/"),o=l,s=0;continue}}else if(i.length>0){i="",a=0,o=l,s=0;continue}}t&&(i=i.length>0?i+"/..":"..",a=2)}else i.length>0?i+="/"+e.slice(o+1,l):i=e.slice(o+1,l),a=l-o-1;o=l,s=0}else 46===n&&s>-1?s++:s=-1}return i}function er(e){if("string"!=typeof e)throw TypeError("Path must be a string. Received "+JSON.stringify(e))}let ei={cwd:ea};function ea(){return"/"}function eo(e){return!!(null!==e&&"object"==typeof e&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&void 0===e.auth)}function es(e){if("string"==typeof e)e=new URL(e);else if(!eo(e)){let t=TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if("file:"!==e.protocol){let e=TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return el(e)}function el(e){if(""!==e.hostname){let e=TypeError('File URL host must be "localhost" or empty on darwin');throw e.code="ERR_INVALID_FILE_URL_HOST",e}let t=e.pathname,n=-1;for(;++n<t.length;)if(37===t.codePointAt(n)&&50===t.codePointAt(n+1)){let e=t.codePointAt(n+2);if(70===e||102===e){let e=TypeError("File URL path must not include encoded / characters");throw e.code="ERR_INVALID_FILE_URL_PATH",e}}return decodeURIComponent(t)}let ec=["history","path","basename","stem","extname","dirname"];class eu{get basename(){return"string"==typeof this.path?$.basename(this.path):void 0}set basename(e){ep(e,"basename"),ed(e,"basename"),this.path=$.join(this.dirname||"",e)}get dirname(){return"string"==typeof this.path?$.dirname(this.path):void 0}set dirname(e){eh(this.basename,"dirname"),this.path=$.join(e||"",this.basename)}get extname(){return"string"==typeof this.path?$.extname(this.path):void 0}set extname(e){if(ed(e,"extname"),eh(this.dirname,"extname"),e){if(46!==e.codePointAt(0))throw Error("`extname` must start with `.`");if(e.includes(".",1))throw Error("`extname` cannot contain multiple dots")}this.path=$.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){eo(e)&&(e=es(e)),ep(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return"string"==typeof this.path?$.basename(this.path,this.extname):void 0}set stem(e){ep(e,"stem"),ed(e,"stem"),this.path=$.join(this.dirname||"",e+(this.extname||""))}fail(e,t,n){let r=this.message(e,t,n);throw r.fatal=!0,r}info(e,t,n){let r=this.message(e,t,n);return r.fatal=void 0,r}message(e,t,n){let r=new X.VFileMessage(e,t,n);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){return void 0===this.value?"":"string"==typeof this.value?this.value:new TextDecoder(e||void 0).decode(this.value)}constructor(e){let t,n;t=e?eo(e)?{path:e}:"string"==typeof e||ef(e)?{value:e}:e:{},this.cwd=ei.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<ec.length;){let e=ec[r];e in t&&void 0!==t[e]&&null!==t[e]&&(this[e]="history"===e?[...t[e]]:t[e])}for(n in t)ec.includes(n)||(this[n]=t[n])}}function ed(e,t){if(e&&e.includes($.sep))throw Error("`"+t+"` cannot be a path: did not expect `"+$.sep+"`")}function ep(e,t){if(!e)throw Error("`"+t+"` cannot be empty")}function eh(e,t){if(!e)throw Error("Setting `"+t+"` requires `path` to be set too")}function ef(e){return!!(e&&"object"==typeof e&&"byteLength"in e&&"byteOffset"in e)}let em=function(e){let t=this,n=t.constructor.prototype,r=n[e],i=function(){return r.apply(i,arguments)};return Object.setPrototypeOf(i,n),i},eg={}.hasOwnProperty;class ev extends em{copy(){let e=new ev,t=-1;for(;++t<this.attachers.length;){let n=this.attachers[t];e.use(...n)}return e.data((0,q.default)(!0,{},this.namespace)),e}data(e,t){return"string"==typeof e?2==arguments.length?(ew("data",this.frozen),this.namespace[e]=t,this):eg.call(this.namespace,e)&&this.namespace[e]||void 0:e?(ew("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;let e=this;for(;++this.freezeIndex<this.attachers.length;){let[t,...n]=this.attachers[this.freezeIndex];if(!1===n[0])continue;!0===n[0]&&(n[0]=void 0);let r=t.call(e,...n);"function"==typeof r&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=1/0,this}parse(e){this.freeze();let t=ek(e),n=this.parser||this.Parser;return ey("parse",n),n(String(t),t)}process(e,t){let n=this;return this.freeze(),ey("process",this.parser||this.Parser),eb("process",this.compiler||this.Compiler),t?r(void 0,t):new Promise(r);function r(r,i){let a=ek(e),o=n.parse(a);function s(e,n){e||!n?i(e):r?r(n):((0,W.ok)(t,"`done` is defined if `resolve` is not"),t(void 0,n))}n.run(o,a,function(e,t,r){if(e||!t||!r)return s(e);let i=t,a=n.stringify(i,r);eN(a)?r.value=a:r.result=a,s(e,r)})}}processSync(e){let t,n=!1;return this.freeze(),ey("processSync",this.parser||this.Parser),eb("processSync",this.compiler||this.Compiler),this.process(e,r),eC("processSync","process",n),(0,W.ok)(t,"we either bailed on an error or have a tree"),t;function r(e,r){n=!0,U(e),t=r}}run(e,t,n){ej(e),this.freeze();let r=this.transformers;return n||"function"!=typeof t||(n=t,t=void 0),n?i(void 0,n):new Promise(i);function i(i,a){(0,W.ok)("function"!=typeof t,"`file` can’t be a `done` anymore, we checked");let o=ek(t);function s(t,r,o){let s=r||e;t?a(t):i?i(s):((0,W.ok)(n,"`done` is defined if `resolve` is not"),n(void 0,s,o))}r.run(e,o,s)}}runSync(e,t){let n,r=!1;return this.run(e,t,i),eC("runSync","run",r),(0,W.ok)(n,"we either bailed on an error or have a tree"),n;function i(e,t){U(e),n=t,r=!0}}stringify(e,t){this.freeze();let n=ek(t),r=this.compiler||this.Compiler;return eb("stringify",r),ej(e),r(e,n)}use(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let i=this.attachers,a=this.namespace;if(ew("use",this.frozen),null==e);else if("function"==typeof e)c(e,n);else if("object"==typeof e)Array.isArray(e)?l(e):s(e);else throw TypeError("Expected usable value, not `"+e+"`");return this;function o(e){if("function"==typeof e)c(e,[]);else if("object"==typeof e)if(Array.isArray(e)){let[t,...n]=e;c(t,n)}else s(e);else throw TypeError("Expected usable value, not `"+e+"`")}function s(e){if(!("plugins"in e)&&!("settings"in e))throw Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(e.plugins),e.settings&&(a.settings=(0,q.default)(!0,a.settings,e.settings))}function l(e){let t=-1;if(null==e);else if(Array.isArray(e))for(;++t<e.length;)o(e[t]);else throw TypeError("Expected a list of plugins, not `"+e+"`")}function c(e,t){let n=-1,r=-1;for(;++n<i.length;)if(i[n][0]===e){r=n;break}if(-1===r)i.push([e,...t]);else if(t.length>0){let[n,...a]=t,o=i[r][1];Z(o)&&Z(n)&&(n=(0,q.default)(!0,o,n)),i[r]=[e,n,...a]}}}constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=G()}}let ex=new ev().freeze();function ey(e,t){if("function"!=typeof t)throw TypeError("Cannot `"+e+"` without `parser`")}function eb(e,t){if("function"!=typeof t)throw TypeError("Cannot `"+e+"` without `compiler`")}function ew(e,t){if(t)throw Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function ej(e){if(!Z(e)||"string"!=typeof e.type)throw TypeError("Expected node, got `"+e+"`")}function eC(e,t,n){if(!n)throw Error("`"+e+"` finished async. Use `"+t+"` instead")}function ek(e){return eS(e)?e:new eu(e)}function eS(e){return!!(e&&"object"==typeof e&&"message"in e&&"messages"in e)}function eN(e){return"string"==typeof e||eE(e)}function eE(e){return!!(e&&"object"==typeof e&&"byteLength"in e&&"byteOffset"in e)}let eM="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",eI=[],eD={allowDangerousHtml:!0},eT=/^(https?|ircs?|mailto|xmpp)$/i,eA=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function eL(e){let o=e.allowedElements,s=e.allowElement,l=e.children||"",c=e.className,d=e.components,p=e.disallowedElements,h=e.rehypePlugins||eI,f=e.remarkPlugins||eI,m=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...eD}:eD,g=e.skipHtml,v=e.unwrapDisallowed,x=e.urlTransform||eP,y=ex().use(a.default).use(f).use(H,m).use(h),b=new eu;for(let n of("string"==typeof l?b.value=l:(0,t.unreachable)("Unexpected value `"+l+"` for `children` prop, expected `string`"),o&&p&&(0,t.unreachable)("Unexpected combined `allowedElements` and `disallowedElements`, expected one or the other"),eA))Object.hasOwn(e,n.from)&&(0,t.unreachable)("Unexpected `"+n.from+"` prop, "+(n.to?"use `"+n.to+"` instead":"remove it")+" (see <"+eM+"#"+n.id+"> for more info)");let w=y.parse(b),j=y.runSync(w,b);return c&&(j={type:"element",tagName:"div",properties:{className:c},children:"root"===j.type?j.children:[j]}),u(j,C),(0,n.toJsxRuntime)(j,{Fragment:i.Fragment,components:d,ignoreInvalidStyle:!0,jsx:i.jsx,jsxs:i.jsxs,passKeys:!0,passNode:!0});function C(e,t,n){if("raw"===e.type&&n&&"number"==typeof t)return g?n.children.splice(t,1):n.children[t]={type:"text",value:e.value},t;if("element"===e.type){let t;for(t in r.urlAttributes)if(Object.hasOwn(r.urlAttributes,t)&&Object.hasOwn(e.properties,t)){let n=e.properties[t],i=r.urlAttributes[t];(null===i||i.includes(e.tagName))&&(e.properties[t]=x(String(n||""),t,e))}}if("element"===e.type){let r=o?!o.includes(e.tagName):!!p&&p.includes(e.tagName);if(!r&&s&&"number"==typeof t&&(r=!s(e,t,n)),r&&n&&"number"==typeof t)return v&&e.children?n.children.splice(t,1,...e.children):n.children.splice(t,1),t}}}function eP(e){let t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t<0||i>-1&&t>i||n>-1&&t>n||r>-1&&t>r||eT.test(e.slice(0,t))?e:""}e.s(["default",()=>eL],770150),e.i(133473);let eR=["https://"],e_=["https://hebbkx1anhila5yf.public.blob.vercel-storage.com/"],eO="https://".concat("v0.app","/");e.s(["allowedImagePrefixes",0,e_,"allowedLinkPrefixes",0,eR,"defaultOrigin",0,eO],694686)},85830,e=>{"use strict";e.i(168204);var t=e.i(225695);function n(e){var t,n;if("parts"===e.content.type&&"user"===e.role)return!(null==(t=e.content.parts)?void 0:t.length)&&(!e.attachments||0===e.attachments.length);if("parts"===e.content.type)return(null==(n=e.content.parts)?void 0:n.length)===0;let r=e.content.value;if(!r||0===r.length)return!0;let i=1===r.length&&1===r[0][0],a=r.length>0&&0===r[0][0]&&0===r[0][1].length;return i||a}function r(e){var n;return"user"===e.role&&(null==(n=e.content.parts)?void 0:n.length)&&(0,t.stringifyMessageContent)(e.content).startsWith("<v0_local_project_task>")}function i(e){var n;return"user"===e.role&&(null==(n=e.content.parts)?void 0:n.length)&&(0,t.stringifyMessageContent)(e.content).startsWith("<user_action ")}e.s(["isMessageEmpty",()=>n,"isRemoteLocalChangeMessage",()=>i,"isRemoteSessionHandshakeMessage",()=>r])},106227,e=>{"use strict";function t(e){if("string"!=typeof e)throw TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}e.s(["default",()=>t])},661535,393978,e=>{"use strict";var t=e.i(832520),n=e.i(106227),r=e.i(939049),i=e.i(249548);function a(e,t,n){let a=n||{},s=(0,i.convert)(a.ignore||[]),l=o(t),c=-1;for(;++c<l.length;)(0,r.visitParents)(e,"text",u);function u(e,t){let n,r=-1;for(;++r<t.length;){let e=t[r],i=n?n.children:void 0;if(s(e,i?i.indexOf(e):void 0,n))return;n=e}if(n)return d(e,t)}function d(e,t){let n=t[t.length-1],r=l[c][0],i=l[c][1],a=0,o=n.children.indexOf(e),s=!1,u=[];r.lastIndex=0;let d=r.exec(e.value);for(;d;){let n=d.index,o={index:d.index,input:d.input,stack:[...t,e]},l=i(...d,o);if("string"==typeof l&&(l=l.length>0?{type:"text",value:l}:void 0),!1===l?r.lastIndex=n+1:(a!==n&&u.push({type:"text",value:e.value.slice(a,n)}),Array.isArray(l)?u.push(...l):l&&u.push(l),a=n+d[0].length,s=!0),!r.global)break;d=r.exec(e.value)}return s?(a<e.value.length&&u.push({type:"text",value:e.value.slice(a)}),n.children.splice(o,1,...u)):u=[e],o+u.length}}function o(e){let t=[];if(!Array.isArray(e))throw TypeError("Expected find and replace tuple or list of tuples");let n=!e[0]||Array.isArray(e[0])?e:[e],r=-1;for(;++r<n.length;){let e=n[r];t.push([s(e[0]),l(e[1])])}return t}function s(e){return"string"==typeof e?RegExp((0,n.default)(e),"g"):e}function l(e){return"function"==typeof e?e:function(){return e}}e.s(["findAndReplace",()=>a],393978);let c=/^#([0-9a-f]{6}|[0-9a-f]{8})$/i;function u(e){return c.test(e)}function d(e){let{value:n,...r}=e;return(0,t.jsxs)("code",{...r,className:"font-mono font-normal before:hidden rounded-[0.375rem] border bg-gray-100 px-[0.15rem] h-5 after:hidden inline-flex items-center gap-0.5 align-middle",children:[(0,t.jsx)("span",{className:"inline-block size-3 rounded-[0.2rem] border",style:{backgroundColor:n}}),n]})}function p(){function e(e){if(-1===e.indexOf("#")||!c.test(e))return e;let t=[];for(;;){let n=c.exec(e);if(!n)break;let r=n[0],i=n.index;i>0&&t.push({type:"text",value:e.substring(0,i)}),t.push({type:"inlineCode",value:r}),e=e.substring(i+r.length)}return e.length>0&&t.push({type:"text",value:e}),t}return t=>{a(t,[[/#([0-9a-f]{6}|[0-9a-f]{8})\b/gi,e]],{ignore:["html","link","linkReference","image","imageReference","code","inlineCode"]})}}e.s(["ColorCode",()=>d,"isColorCode",()=>u,"remarkColor",()=>p],661535)},60520,e=>{e.v({shimmer:"shimmer-children-module__Q2XpNG__shimmer",shimmerAnimation:"shimmer-children-module__Q2XpNG__shimmerAnimation"})},919409,e=>{"use strict";var t=e.i(832520),n=e.i(675120),r=e.i(403055),i=e.i(60520);function a(e){let{children:a,duration:o=.65,shimmer:s,justify:l="start",autoTransitionKey:c=!1}=e;return(0,t.jsx)(n.TransitionNode,{childClassName:"truncate",duration:.35,delay:.35*.66,justify:l,renderKey:c?void 0:s?"shimmer":"text",children:s?(0,t.jsx)("div",{className:(0,r.cn)(i.default.shimmer,"[--shimmer-base:theme(colors.gray.900)] [--shimmer-highlight:theme(colors.gray.300)]"),style:{animationDuration:"".concat(o,"s")},children:a},"shimmer"):(0,t.jsx)("div",{className:"transition-colors duration-100 truncate",children:a},"text")})}e.s(["ShimmerChildren",()=>a])},521603,895336,e=>{"use strict";let t;var n,r=e.i(200407),i=e.i(230840);let a=!0;function o(){let e=(0,i._)([":host{display:inline-block;direction:ltr;white-space:nowrap;isolation:isolate;line-height:"," !important}.number,.number__inner{display:inline-block;transform-origin:left top}:host([data-will-change]) :is(.number,.number__inner,.section,.digit,.digit__num,.symbol){will-change:transform}.number{--scale-x:calc(1 + var(",") / var(--width));transform:translateX(var(",")) scaleX(var(--scale-x));margin:0 calc(-1 * ",");position:relative;-webkit-mask-image:linear-gradient(to right,transparent 0,#000 ",",#000 calc(100% - ","),transparent ),linear-gradient(to bottom,transparent 0,#000 ",",#000 calc(100% - ","),transparent 100% ),radial-gradient(at bottom right,","),radial-gradient(at bottom left,","),radial-gradient(at top left,","),radial-gradient(at top right,",");-webkit-mask-size:100% calc(100% - "," * 2),calc(100% - "," * 2) 100%,"," ",","," ",","," ",","," ",";-webkit-mask-position:center,center,top left,top right,bottom right,bottom left;-webkit-mask-repeat:no-repeat}.number__inner{padding:"," ",";transform:scaleX(calc(1 / var(--scale-x))) translateX(calc(-1 * var(",void 0,")}.digit__num,.number .section::after{padding:"," 0}.digit__num{display:inline-block;--offset-raw:mod(var(--length) + var(--n) - mod(var(--c),var(--length)),var(--length));--offset:calc( var(--offset-raw) - var(--length) * round(down,var(--offset-raw) / (var(--length) / 2),1) );--y:clamp(-100%,var(--offset) * 100%,100%);transform:translateY(var(--y))}.digit__num[inert]{position:absolute;top:0;left:50%;transform:translateX(-50%) translateY(var(--y))}.digit:not(.is-spinning) .digit__num[inert]{display:none}.symbol__value{display:inline-block;mix-blend-mode:plus-lighter;white-space:pre}.section--justify-left .symbol > [inert]{left:0}.section--justify-right .symbol > [inert]{right:0}.animate-presence{opacity:calc(1 + var(","))}"],[":host{display:inline-block;direction:ltr;white-space:nowrap;isolation:isolate;line-height:"," !important}.number,.number__inner{display:inline-block;transform-origin:left top}:host([data-will-change]) :is(.number,.number__inner,.section,.digit,.digit__num,.symbol){will-change:transform}.number{--scale-x:calc(1 + var(",") / var(--width));transform:translateX(var(",")) scaleX(var(--scale-x));margin:0 calc(-1 * ",");position:relative;-webkit-mask-image:linear-gradient(to right,transparent 0,#000 ",",#000 calc(100% - ","),transparent ),linear-gradient(to bottom,transparent 0,#000 ",",#000 calc(100% - ","),transparent 100% ),radial-gradient(at bottom right,","),radial-gradient(at bottom left,","),radial-gradient(at top left,","),radial-gradient(at top right,",");-webkit-mask-size:100% calc(100% - "," * 2),calc(100% - "," * 2) 100%,"," ",","," ",","," ",","," ",";-webkit-mask-position:center,center,top left,top right,bottom right,bottom left;-webkit-mask-repeat:no-repeat}.number__inner{padding:"," ",";transform:scaleX(calc(1 / var(--scale-x))) translateX(calc(-1 * var(",")))}:host > :not(.number){z-index:5}.section,.symbol{display:inline-block;position:relative;isolation:isolate}.section::after{content:'\\200b';display:inline-block}.section--justify-left{transform-origin:center left}.section--justify-right{transform-origin:center right}.section > [inert],.symbol > [inert]{margin:0 !important;position:absolute !important;z-index:-1}.digit{display:inline-block;position:relative;--c:var(--current) + var(",")}.digit__num,.number .section::after{padding:"," 0}.digit__num{display:inline-block;--offset-raw:mod(var(--length) + var(--n) - mod(var(--c),var(--length)),var(--length));--offset:calc( var(--offset-raw) - var(--length) * round(down,var(--offset-raw) / (var(--length) / 2),1) );--y:clamp(-100%,var(--offset) * 100%,100%);transform:translateY(var(--y))}.digit__num[inert]{position:absolute;top:0;left:50%;transform:translateX(-50%) translateY(var(--y))}.digit:not(.is-spinning) .digit__num[inert]{display:none}.symbol__value{display:inline-block;mix-blend-mode:plus-lighter;white-space:pre}.section--justify-left .symbol > [inert]{left:0}.section--justify-right .symbol > [inert]{right:0}.animate-presence{opacity:calc(1 + var(","))}"]);return o=function(){return e},e}function s(){let e=(0,i._)([":host{display:inline-block;direction:ltr;white-space:nowrap;line-height:"," !important}span{display:inline-block}:host([data-will-change]) span{will-change:transform}.number,.digit{padding:"," 0}.symbol{white-space:pre}"]);return s=function(){return e},e}function l(){let e=(0,i._)(['<template shadowroot="open" shadowrootmode="open"\n			><style>\n				','</style\n			><span role="img" aria-label="','"\n				>','<span part="number" class="number"\n					>',"","</span\n				>",'</span\n			></template\n		><span\n			style="font-kerning: none; display: inline-block; line-height: '," !important; padding: ",' 0;"\n			>',"</span\n		>"]);return l=function(){return e},e}let c=(e,t,n)=>{let r=document.createElement(e),[i,a]=Array.isArray(t)?[void 0,t]:[t,n];return i&&Object.assign(r,i),null==a||a.forEach(e=>r.appendChild(e)),r},u=(e,t)=>{var n,r;return"left"===t?e.offsetLeft:(null!=(r=null==(n=e.offsetParent instanceof HTMLElement?e.offsetParent:null)?void 0:n.offsetWidth)?r:0)-e.offsetWidth-e.offsetLeft},d=e=>e.offsetWidth>0&&e.offsetHeight>0,p=(e,t)=>{a&&customElements.get(e)!==t&&customElements.define(e,t)};function h(e,t){let{reverse:n=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.length;for(let i=n?r-1:0;n?i>=0:i<r;n?i--:i++)t(e[i],i)}function f(e,t,n,r){let i=t.formatToParts(e);n&&i.unshift({type:"prefix",value:n}),r&&i.push({type:"suffix",value:r});let a=[],o=[],s=[],l=[],c={},u=e=>{var t;return"".concat(e,":").concat(c[e]=(null!=(t=c[e])?t:-1)+1)},d="",p=!1,h=!1;for(let e of i){d+=e.value;let t="minusSign"===e.type||"plusSign"===e.type?"sign":e.type;"integer"===t?(p=!0,o.push(...e.value.split("").map(e=>({type:t,value:parseInt(e)})))):"group"===t?o.push({type:t,value:e.value}):"decimal"===t?(h=!0,s.push({type:t,value:e.value,key:u(t)})):"fraction"===t?s.push(...e.value.split("").map(e=>({type:t,value:parseInt(e),key:u(t),pos:-1-c[t]}))):(p||h?l:a).push({type:t,value:e.value,key:u(t)})}let f=[];for(let e=o.length-1;e>=0;e--){let t=o[e];f.unshift("integer"===t.type?{...t,key:u(t.type),pos:c[t.type]}:{...t,key:u(t.type)})}return{pre:a,integer:f,fraction:s,post:l,valueAsString:d,value:"string"==typeof e?parseFloat(e):e}}let m=String.raw,g=String.raw,v=a&&(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(e){return!1}return!0})(),x=a&&"u">typeof CSS&&CSS.supports&&CSS.supports("line-height","mod(1,1)"),y=a&&"u">typeof matchMedia?matchMedia("(prefers-reduced-motion: reduce)"):null,b="--_number-flow-d-opacity",w="--_number-flow-d-width",j="--_number-flow-dx",C="--_number-flow-d",k=(()=>{try{return CSS.registerProperty({name:b,syntax:"<number>",inherits:!1,initialValue:"0"}),CSS.registerProperty({name:j,syntax:"<length>",inherits:!0,initialValue:"0px"}),CSS.registerProperty({name:w,syntax:"<number>",inherits:!1,initialValue:"0"}),CSS.registerProperty({name:C,syntax:"<number>",inherits:!0,initialValue:"0"}),!0}catch(e){return!1}})(),S="var(--number-flow-char-height, 1em)",N="var(--number-flow-mask-height, 0.25em)",E="calc(".concat(N," / 2)"),M="var(--number-flow-mask-width, 0.5em)",I="calc(".concat(M," / var(--scale-x))"),D="#000 0, transparent 71%",T=g(o(),S,w,j,M,I,I,N,N,D,D,D,D,N,I,I,N,I,N,I,N,I,N,E,M,j,C,E,b),A=a?HTMLElement:class{},L=g(s(),S,E),P=e=>'<span class="'.concat("integer"===e.type||"fraction"===e.type?"digit":"symbol",'" part="').concat("integer"===e.type||"fraction"===e.type?"digit ".concat(e.type,"-digit"):"symbol ".concat(e.type),'">').concat(e.value,"</span>"),R=(e,t)=>'<span part="'.concat(t,'">').concat(e.reduce((e,t)=>e+P(t),""),"</span>"),_=e=>m(l(),L,e.valueAsString,R(e.pre,"left"),R(e.integer,"integer"),R(e.fraction,"fraction"),R(e.post,"right"),S,N,e.valueAsString),O=x&&v&&k;class F extends A{get animated(){return this._animated}set animated(e){var t;this.animated!==e&&(this._animated=e,null==(t=this.shadowRoot)||t.getAnimations().forEach(e=>e.finish()))}set data(e){var n,r;if(null==e)return;let{pre:i,integer:a,fraction:o,post:s,value:l}=e;if(this.created){let t=this._data;this._data=e,this.computedTrend="function"==typeof this.trend?this.trend(t.value,l):this.trend,this.computedAnimated=O&&this._animated&&(!this.respectMotionPreference||!(null!=y&&y.matches))&&d(this),null==(n=this.plugins)||n.forEach(n=>{var r;return null==(r=n.onUpdate)?void 0:r.call(n,e,t,this)}),this.batched||this.willUpdate(),this._pre.update(i),this._num.update({integer:a,fraction:o}),this._post.update(s),this.batched||this.didUpdate()}else{this._data=e,this.attachShadow({mode:"open"});try{null!=(r=this._internals)||(this._internals=this.attachInternals()),this._internals.role="img"}catch(e){}if("u">typeof CSSStyleSheet&&this.shadowRoot.adoptedStyleSheets)t||(t=new CSSStyleSheet).replaceSync(T),this.shadowRoot.adoptedStyleSheets=[t];else{let e=document.createElement("style");e.textContent=T,this.shadowRoot.appendChild(e)}this._pre=new H(this,i,{justify:"right",part:"left"}),this.shadowRoot.appendChild(this._pre.el),this._num=new V(this,a,o),this.shadowRoot.appendChild(this._num.el),this._post=new H(this,s,{justify:"left",part:"right"}),this.shadowRoot.appendChild(this._post.el),this.created=!0}try{this._internals.ariaLabel=e.valueAsString}catch(e){}}willUpdate(){this._pre.willUpdate(),this._num.willUpdate(),this._post.willUpdate()}didUpdate(){if(!this.computedAnimated)return;this._abortAnimationsFinish?this._abortAnimationsFinish.abort():this.dispatchEvent(new Event("animationsstart")),this._pre.didUpdate(),this._num.didUpdate(),this._post.didUpdate();let e=new AbortController;Promise.all(this.shadowRoot.getAnimations().map(e=>e.finished)).then(()=>{e.signal.aborted||(this.dispatchEvent(new Event("animationsfinish")),this._abortAnimationsFinish=void 0)}),this._abortAnimationsFinish=e}constructor(){super(),this.created=!1,this.batched=!1;let{animated:e,...t}=this.constructor.defaultProps;this._animated=this.computedAnimated=e,Object.assign(this,t)}}F.defaultProps={transformTiming:{duration:900,easing:"linear(0,.005,.019,.039,.066,.096,.129,.165,.202,.24,.278,.316,.354,.39,.426,.461,.494,.526,.557,.586,.614,.64,.665,.689,.711,.731,.751,.769,.786,.802,.817,.831,.844,.856,.867,.877,.887,.896,.904,.912,.919,.925,.931,.937,.942,.947,.951,.955,.959,.962,.965,.968,.971,.973,.976,.978,.98,.981,.983,.984,.986,.987,.988,.989,.99,.991,.992,.992,.993,.994,.994,.995,.995,.996,.996,.9963,.9967,.9969,.9972,.9975,.9977,.9979,.9981,.9982,.9984,.9985,.9987,.9988,.9989,1)"},spinTiming:void 0,opacityTiming:{duration:450,easing:"ease-out"},animated:!0,trend:(e,t)=>Math.sign(t-e),respectMotionPreference:!0,plugins:void 0,digits:void 0};class V{willUpdate(){this._prevWidth=this.el.offsetWidth,this._prevLeft=this.el.getBoundingClientRect().left,this._integer.willUpdate(),this._fraction.willUpdate()}update(e){let{integer:t,fraction:n}=e;this._integer.update(t),this._fraction.update(n)}didUpdate(){let e=this.el.getBoundingClientRect();this._integer.didUpdate(),this._fraction.didUpdate();let t=this._prevLeft-e.left,n=this.el.offsetWidth,r=this._prevWidth-n;this.el.style.setProperty("--width",String(n)),this.el.animate({[j]:["".concat(t,"px"),"0px"],[w]:[r,0]},{...this.flow.transformTiming,composite:"accumulate"})}constructor(e,t,n,{className:r,...i}={}){this.flow=e,this._integer=new z(e,t,{justify:"right",part:"integer"}),this._fraction=new z(e,n,{justify:"left",part:"fraction"}),this._inner=c("span",{className:"number__inner"},[this._integer.el,this._fraction.el]),this.el=c("span",{...i,part:"number",className:"number ".concat(null!=r?r:"")},[this._inner])}}class B{addChar(e){let{startDigitsAtZero:t=!1,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="integer"===e.type||"fraction"===e.type?new W(this,e.type,t?0:e.value,e.pos,{...n,onRemove:this.onCharRemove(e.key)}):new Z(this,e.type,e.value,{...n,onRemove:this.onCharRemove(e.key)});return this.children.set(e.key,r),r}unpop(e){e.el.removeAttribute("inert"),e.el.style.top="",e.el.style[this.justify]=""}pop(e){e.forEach(e=>{e.el.style.top="".concat(e.el.offsetTop,"px"),e.el.style[this.justify]="".concat(u(e.el,this.justify),"px")}),e.forEach(e=>{e.el.setAttribute("inert",""),e.present=!1})}addNewAndUpdateExisting(e){let t=new Map,n=new Map,r="left"===this.justify,i=r?"prepend":"append";if(h(e,e=>{let r;this.children.has(e.key)?(r=this.children.get(e.key),n.set(e,r),this.unpop(r),r.present=!0):(r=this.addChar(e,{startDigitsAtZero:!0,animateIn:!0}),t.set(e,r)),this.el[i](r.el)},{reverse:r}),this.flow.computedAnimated){let e=this.el.getBoundingClientRect();t.forEach(t=>{t.willUpdate(e)})}t.forEach((e,t)=>{e.update(t.value)}),n.forEach((e,t)=>{e.update(t.value)})}willUpdate(){let e=this.el.getBoundingClientRect();this._prevOffset=e[this.justify],this.children.forEach(t=>t.willUpdate(e))}didUpdate(){let e=this.el.getBoundingClientRect();this.children.forEach(t=>t.didUpdate(e));let t=e[this.justify],n=this._prevOffset-t;n&&this.children.size&&this.el.animate({transform:["translateX(".concat(n,"px)"),"none"]},{...this.flow.transformTiming,composite:"accumulate"})}constructor(e,t,{justify:n,className:r,...i},a){this.flow=e,this.children=new Map,this.onCharRemove=e=>()=>{this.children.delete(e)},this.justify=n;let o=t.map(e=>this.addChar(e).el);this.el=c("span",{...i,className:"section section--justify-".concat(n," ").concat(null!=r?r:"")},a?a(o):o)}}class z extends B{update(e){let t=new Map;this.children.forEach((n,r)=>{e.find(e=>e.key===r)||t.set(r,n),this.unpop(n)}),this.addNewAndUpdateExisting(e),t.forEach(e=>{e instanceof W&&e.update(0)}),this.pop(t)}}class H extends B{update(e){let t=new Map;this.children.forEach((n,r)=>{e.find(e=>e.key===r)||t.set(r,n)}),this.pop(t),this.addNewAndUpdateExisting(e)}}class U{get present(){return this._present}set present(e){if(this._present!==e){if(this._present=e,e?this.el.removeAttribute("inert"):this.el.setAttribute("inert",""),!this.flow.computedAnimated){e||this._remove();return}this.el.style.setProperty("--_number-flow-d-opacity",e?"0":"-.999"),this.el.animate({[b]:e?[-.9999,0]:[.999,0]},{...this.flow.opacityTiming,composite:"accumulate"}),e?this.flow.removeEventListener("animationsfinish",this._remove):this.flow.addEventListener("animationsfinish",this._remove,{once:!0})}}constructor(e,t,{onRemove:n,animateIn:r=!1}={}){this.flow=e,this.el=t,this._present=!0,this._remove=()=>{var e;this.el.remove(),null==(e=this._onRemove)||e.call(this)},this.el.classList.add("animate-presence"),this.flow.computedAnimated&&r&&this.el.animate({[b]:[-.9999,0]},{...this.flow.opacityTiming,composite:"accumulate"}),this._onRemove=n}}class q extends U{constructor(e,t,n,r){super(e.flow,n,r),this.section=e,this.value=t,this.el=n}}class W extends q{willUpdate(e){let t=this.el.getBoundingClientRect();this._prevValue=this.value;let n=t[this.section.justify]-e[this.section.justify],r=t.width/2;this._prevCenter="left"===this.section.justify?n+r:n-r}update(e){this.el.style.setProperty("--current",String(e)),this._numbers.forEach((t,n)=>n===e?t.removeAttribute("inert"):t.setAttribute("inert","")),this.value=e}didUpdate(e){var t;let n=this.el.getBoundingClientRect(),r=n[this.section.justify]-e[this.section.justify],i=n.width/2,a="left"===this.section.justify?r+i:r-i,o=this._prevCenter-a;o&&this.el.animate({transform:["translateX(".concat(o,"px)"),"none"]},{...this.flow.transformTiming,composite:"accumulate"});let s=this.getDelta();s&&(this.el.classList.add("is-spinning"),this.el.animate({[C]:[-s,0]},{...null!=(t=this.flow.spinTiming)?t:this.flow.transformTiming,composite:"accumulate"}),this.flow.addEventListener("animationsfinish",this._onAnimationsFinish,{once:!0}))}getDelta(){var e;if(this.flow.plugins)for(let t of this.flow.plugins){let n=null==(e=t.getDelta)?void 0:e.call(t,this.value,this._prevValue,this);if(null!=n)return n}let t=this.value-this._prevValue,n=this.flow.computedTrend||Math.sign(t);return n<0&&this.value>this._prevValue?this.value-this.length-this._prevValue:n>0&&this.value<this._prevValue?this.length-this._prevValue+this.value:t}constructor(e,t,n,r,i){var a,o,s;let l=(null!=(s=null==(o=null==(a=e.flow.digits)?void 0:a[r])?void 0:o.max)?s:9)+1,u=Array.from({length:l}).map((e,t)=>{let r=c("span",{className:"digit__num"},[document.createTextNode(String(t))]);return t!==n&&r.setAttribute("inert",""),r.style.setProperty("--n",String(t)),r}),d=c("span",{part:"digit ".concat(t,"-digit"),className:"digit"},u);d.style.setProperty("--current",String(n)),d.style.setProperty("--length",String(l)),super(e,n,d,i),this.pos=r,this._onAnimationsFinish=()=>{this.el.classList.remove("is-spinning")},this._numbers=u,this.length=l}}class Z extends q{willUpdate(e){if("decimal"===this.type)return;let t=this.el.getBoundingClientRect();this._prevOffset=t[this.section.justify]-e[this.section.justify]}update(e){if(this.value!==e){let t=this._children.get(this.value);t&&(t.present=!1);let n=this._children.get(e);if(n)n.present=!0;else{let t=c("span",{className:"symbol__value",textContent:e});this.el.appendChild(t),this._children.set(e,new U(this.flow,t,{animateIn:!0,onRemove:this._onChildRemove(e)}))}}this.value=e}didUpdate(e){if("decimal"===this.type)return;let t=this.el.getBoundingClientRect()[this.section.justify]-e[this.section.justify],n=this._prevOffset-t;n&&this.el.animate({transform:["translateX(".concat(n,"px)"),"none"]},{...this.flow.transformTiming,composite:"accumulate"})}constructor(e,t,n,r){let i=c("span",{className:"symbol__value",textContent:n});super(e,n,c("span",{part:"symbol ".concat(t),className:"symbol"},[i]),r),this.type=t,this._children=new Map,this._onChildRemove=e=>()=>{this._children.delete(e)},this._children.set(n,new U(this.flow,i,{onRemove:this._onChildRemove(n)}))}}var G=r;let K=parseInt(null==(n=G.version.match(/^(\d+)\./))?void 0:n[1])>=19,X=["data","digits"];class $ extends F{attributeChangedCallback(e,t,n){this[e]=JSON.parse(n)}}$.observedAttributes=K?[]:X,p("number-flow-react",$);let Y={},J=K?e=>e:JSON.stringify;function Q(e){let{transformTiming:t,spinTiming:n,opacityTiming:r,animated:i,respectMotionPreference:a,trend:o,plugins:s,...l}=e;return[{transformTiming:t,spinTiming:n,opacityTiming:r,animated:i,respectMotionPreference:a,trend:o,plugins:s},l]}class ee extends G.Component{updateProperties(e){if(!this.el)return;this.el.batched=!this.props.isolate;let[t]=Q(this.props);Object.entries(t).forEach(e=>{let[t,n]=e;this.el[t]=null!=n?n:$.defaultProps[t]}),(null==e?void 0:e.onAnimationsStart)&&this.el.removeEventListener("animationsstart",e.onAnimationsStart),this.props.onAnimationsStart&&this.el.addEventListener("animationsstart",this.props.onAnimationsStart),(null==e?void 0:e.onAnimationsFinish)&&this.el.removeEventListener("animationsfinish",e.onAnimationsFinish),this.props.onAnimationsFinish&&this.el.addEventListener("animationsfinish",this.props.onAnimationsFinish)}componentDidMount(){this.updateProperties(),K&&this.el&&(this.el.digits=this.props.digits,this.el.data=this.props.data)}getSnapshotBeforeUpdate(e){if(this.updateProperties(e),e.data!==this.props.data){if(this.props.group)return this.props.group.willUpdate(),()=>{var e;return null==(e=this.props.group)?void 0:e.didUpdate()};if(!this.props.isolate){var t;return null==(t=this.el)||t.willUpdate(),()=>{var e;return null==(e=this.el)?void 0:e.didUpdate()}}}return null}componentDidUpdate(e,t,n){null==n||n()}handleRef(e){this.props.innerRef&&(this.props.innerRef.current=e),this.el=e}render(){let[e,{innerRef:t,className:n,data:r,willChange:i,isolate:o,group:s,digits:l,onAnimationsStart:c,onAnimationsFinish:u,...d}]=Q(this.props);return G.createElement("number-flow-react",{ref:this.handleRef,"data-will-change":i?"":void 0,class:n,...d,dangerouslySetInnerHTML:{__html:a?"":_(r)},suppressHydrationWarning:!0,digits:J(l),data:J(r)})}constructor(e){super(e),this.handleRef=this.handleRef.bind(this)}}let et=G.forwardRef(function(e,t){let{value:n,locales:r,format:i,prefix:a,suffix:o,...s}=e;G.useImperativeHandle(t,()=>l.current,[]);let l=G.useRef(),c=G.useContext(en);null==c||c.useRegister(l);let u=G.useMemo(()=>r?JSON.stringify(r):"",[r]),d=G.useMemo(()=>i?JSON.stringify(i):"",[i]),p=G.useMemo(()=>{var e,t,s;return f(n,null!=(s=(e=Y)[t="".concat(u,":").concat(d)])?s:e[t]=new Intl.NumberFormat(r,i),a,o)},[n,u,d,a,o]);return G.createElement(ee,{...s,group:c,data:p,innerRef:l})}),en=G.createContext(void 0);e.s([],521603),e.s(["default",()=>et],895336)},104720,e=>{e.v({"bg-close":"primitives-module__gWXxya__bg-close","bg-open":"primitives-module__gWXxya__bg-open",content:"primitives-module__gWXxya__content",renderedParts:"primitives-module__gWXxya__renderedParts",timelineLine:"primitives-module__gWXxya__timelineLine"})},737374,e=>{e.v({overflowMessage:"messages-module__LvwksW__overflowMessage"})},324491,397036,e=>{"use strict";var t=e.i(722978),n="-";function r(e){var t=s(e),r=e.conflictingClassGroups,a=e.conflictingClassGroupModifiers,l=void 0===a?{}:a;return{getClassGroupId:function(e){var r=e.split(n);return""===r[0]&&1!==r.length&&r.shift(),i(r,t)||o(e)},getConflictingClassGroupIds:function(e,t){var n=r[e]||[];return t&&l[e]?[].concat(n,l[e]):n}}}function i(e,t){if(0===e.length)return t.classGroupId;var r,a=e[0],o=t.nextPart.get(a),s=o?i(e.slice(1),o):void 0;if(s)return s;if(0!==t.validators.length){var l=e.join(n);return null==(r=t.validators.find(function(e){return(0,e.validator)(l)}))?void 0:r.classGroupId}}var a=/^\[(.+)\]$/;function o(e){if(a.test(e)){var t=a.exec(e)[1],n=null==t?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}}function s(e){var t=e.theme,n=e.prefix,r={nextPart:new Map,validators:[]};return d(Object.entries(e.classGroups),n).forEach(function(e){var n=e[0];l(e[1],r,n,t)}),r}function l(e,t,n,r){e.forEach(function(e){if("string"==typeof e){(""===e?t:c(t,e)).classGroupId=n;return}if("function"==typeof e)return u(e)?void l(e(r),t,n,r):void t.validators.push({validator:e,classGroupId:n});Object.entries(e).forEach(function(e){var i=e[0];l(e[1],c(t,i),n,r)})})}function c(e,t){var r=e;return t.split(n).forEach(function(e){r.nextPart.has(e)||r.nextPart.set(e,{nextPart:new Map,validators:[]}),r=r.nextPart.get(e)}),r}function u(e){return e.isThemeGetter}function d(e,t){return t?e.map(function(e){return[e[0],e[1].map(function(e){return"string"==typeof e?t+e:"object"==typeof e?Object.fromEntries(Object.entries(e).map(function(e){return[t+e[0],e[1]]})):e})]}):e}function p(e){if(e<1)return{get:function(){},set:function(){}};var t=0,n=new Map,r=new Map;function i(i,a){n.set(i,a),++t>e&&(t=0,r=n,n=new Map)}return{get:function(e){var t=n.get(e);return void 0!==t?t:void 0!==(t=r.get(e))?(i(e,t),t):void 0},set:function(e,t){n.has(e)?n.set(e,t):i(e,t)}}}var h="!";function f(e){var t=e.separator||":",n=1===t.length,r=t[0],i=t.length;return function(e){for(var a,o=[],s=0,l=0,c=0;c<e.length;c++){var u=e[c];if(0===s){if(u===r&&(n||e.slice(c,c+i)===t)){o.push(e.slice(l,c)),l=c+i;continue}if("/"===u){a=c;continue}}"["===u?s++:"]"===u&&s--}var d=0===o.length?e:e.substring(l),p=d.startsWith(h),f=p?d.substring(1):d;return{modifiers:o,hasImportantModifier:p,baseClassName:f,maybePostfixModifierPosition:a&&a>l?a-l:void 0}}}function m(e){if(e.length<=1)return e;var t=[],n=[];return e.forEach(function(e){"["===e[0]?(t.push.apply(t,n.sort().concat([e])),n=[]):n.push(e)}),t.push.apply(t,n.sort()),t}function g(e){return{cache:p(e.cacheSize),splitModifiers:f(e),...r(e)}}var v=/\s+/;function x(e,t){var n=t.splitModifiers,r=t.getClassGroupId,i=t.getConflictingClassGroupIds,a=new Set;return e.trim().split(v).map(function(e){var t=n(e),i=t.modifiers,a=t.hasImportantModifier,o=t.baseClassName,s=t.maybePostfixModifierPosition,l=r(s?o.substring(0,s):o),c=!!s;if(!l){if(!s||!(l=r(o)))return{isTailwindClass:!1,originalClassName:e};c=!1}var u=m(i).join(":");return{isTailwindClass:!0,modifierId:a?u+h:u,classGroupId:l,originalClassName:e,hasPostfixModifier:c}}).reverse().filter(function(e){if(!e.isTailwindClass)return!0;var t=e.modifierId,n=e.classGroupId,r=e.hasPostfixModifier,o=t+n;return!a.has(o)&&(a.add(o),i(n,r).forEach(function(e){return a.add(t+e)}),!0)}).reverse().map(function(e){return e.originalClassName}).join(" ")}function y(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=b(e))&&(r&&(r+=" "),r+=t);return r}function b(e){if("string"==typeof e)return e;for(var t,n="",r=0;r<e.length;r++)e[r]&&(t=b(e[r]))&&(n&&(n+=" "),n+=t);return n}function w(){for(var e,t,n,r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];var o=s;function s(r){var a=i[0];return t=(e=g(i.slice(1).reduce(function(e,t){return t(e)},a()))).cache.get,n=e.cache.set,o=l,l(r)}function l(r){var i=t(r);if(i)return i;var a=x(r,e);return n(r,a),a}return function(){return o(y.apply(null,arguments))}}function j(e){var t=function(t){return t[e]||[]};return t.isThemeGetter=!0,t}var C=/^\[(?:([a-z-]+):)?(.+)\]$/i,k=/^\d+\/\d+$/,S=new Set(["px","full","screen"]),N=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,E=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,M=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function I(e){return R(e)||S.has(e)||k.test(e)||D(e)}function D(e){return H(e,"length",U)}function T(e){return H(e,"size",q)}function A(e){return H(e,"position",q)}function L(e){return H(e,"url",W)}function P(e){return H(e,"number",R)}function R(e){return!Number.isNaN(Number(e))}function _(e){return e.endsWith("%")&&R(e.slice(0,-1))}function O(e){return Z(e)||H(e,"number",Z)}function F(e){return C.test(e)}function V(){return!0}function B(e){return N.test(e)}function z(e){return H(e,"",G)}function H(e,t,n){var r=C.exec(e);return!!r&&(r[1]?r[1]===t:n(r[2]))}function U(e){return E.test(e)}function q(){return!1}function W(e){return e.startsWith("url(")}function Z(e){return Number.isInteger(Number(e))}function G(e){return M.test(e)}var K=w(function(){var e=j("colors"),t=j("spacing"),n=j("blur"),r=j("brightness"),i=j("borderColor"),a=j("borderRadius"),o=j("borderSpacing"),s=j("borderWidth"),l=j("contrast"),c=j("grayscale"),u=j("hueRotate"),d=j("invert"),p=j("gap"),h=j("gradientColorStops"),f=j("gradientColorStopPositions"),m=j("inset"),g=j("margin"),v=j("opacity"),x=j("padding"),y=j("saturate"),b=j("scale"),w=j("sepia"),C=j("skew"),k=j("space"),S=j("translate"),N=function(){return["auto","contain","none"]},E=function(){return["auto","hidden","clip","visible","scroll"]},M=function(){return["auto",F,t]},H=function(){return[F,t]},U=function(){return["",I]},q=function(){return["auto",R,F]},W=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},Z=function(){return["solid","dashed","dotted","double","none"]},G=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},K=function(){return["start","end","center","between","around","evenly","stretch"]},X=function(){return["","0",F]},$=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},Y=function(){return[R,P]},J=function(){return[R,F]};return{cacheSize:500,theme:{colors:[V],spacing:[I],blur:["none","",B,F],brightness:Y(),borderColor:[e],borderRadius:["none","","full",B,F],borderSpacing:H(),borderWidth:U(),contrast:Y(),grayscale:X(),hueRotate:J(),invert:X(),gap:H(),gradientColorStops:[e],gradientColorStopPositions:[_,D],inset:M(),margin:M(),opacity:Y(),padding:H(),saturate:Y(),scale:Y(),sepia:X(),skew:J(),space:H(),translate:H()},classGroups:{aspect:[{aspect:["auto","square","video",F]}],container:["container"],columns:[{columns:[B]}],"break-after":[{"break-after":$()}],"break-before":[{"break-before":$()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(W(),[F])}],overflow:[{overflow:E()}],"overflow-x":[{"overflow-x":E()}],"overflow-y":[{"overflow-y":E()}],overscroll:[{overscroll:N()}],"overscroll-x":[{"overscroll-x":N()}],"overscroll-y":[{"overscroll-y":N()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",O]}],basis:[{basis:M()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",F]}],grow:[{grow:X()}],shrink:[{shrink:X()}],order:[{order:["first","last","none",O]}],"grid-cols":[{"grid-cols":[V]}],"col-start-end":[{col:["auto",{span:["full",O]},F]}],"col-start":[{"col-start":q()}],"col-end":[{"col-end":q()}],"grid-rows":[{"grid-rows":[V]}],"row-start-end":[{row:["auto",{span:[O]},F]}],"row-start":[{"row-start":q()}],"row-end":[{"row-end":q()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",F]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",F]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal"].concat(K())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(K(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(K(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",F,t]}],"min-w":[{"min-w":["min","max","fit",F,I]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[B]},B,F]}],h:[{h:[F,t,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",F,I]}],"max-h":[{"max-h":[F,t,"min","max","fit"]}],"font-size":[{text:["base",B,D]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",P]}],"font-family":[{font:[V]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",F]}],"line-clamp":[{"line-clamp":["none",R,P]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",F,I]}],"list-image":[{"list-image":["none",F]}],"list-style-type":[{list:["none","disc","decimal",F]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(Z(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",I]}],"underline-offset":[{"underline-offset":["auto",F,I]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:H()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",F]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",F]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(W(),[A])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",T]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},L]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[f]}],"gradient-via-pos":[{via:[f]}],"gradient-to-pos":[{to:[f]}],"gradient-from":[{from:[h]}],"gradient-via":[{via:[h]}],"gradient-to":[{to:[h]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[s]}],"border-w-x":[{"border-x":[s]}],"border-w-y":[{"border-y":[s]}],"border-w-s":[{"border-s":[s]}],"border-w-e":[{"border-e":[s]}],"border-w-t":[{"border-t":[s]}],"border-w-r":[{"border-r":[s]}],"border-w-b":[{"border-b":[s]}],"border-w-l":[{"border-l":[s]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[].concat(Z(),["hidden"])}],"divide-x":[{"divide-x":[s]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[s]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:Z()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:[""].concat(Z())}],"outline-offset":[{"outline-offset":[F,I]}],"outline-w":[{outline:[I]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:U()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[I]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",B,z]}],"shadow-color":[{shadow:[V]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":G()}],"bg-blend":[{"bg-blend":G()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",B,F]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[y]}],sepia:[{sepia:[w]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[y]}],"backdrop-sepia":[{"backdrop-sepia":[w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",F]}],duration:[{duration:J()}],ease:[{ease:["linear","in","out","in-out",F]}],delay:[{delay:J()}],animate:[{animate:["none","spin","ping","pulse","bounce",F]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[O,F]}],"translate-x":[{"translate-x":[S]}],"translate-y":[{"translate-y":[S]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",F]}],accent:[{accent:["auto",e]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",F]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":H()}],"scroll-mx":[{"scroll-mx":H()}],"scroll-my":[{"scroll-my":H()}],"scroll-ms":[{"scroll-ms":H()}],"scroll-me":[{"scroll-me":H()}],"scroll-mt":[{"scroll-mt":H()}],"scroll-mr":[{"scroll-mr":H()}],"scroll-mb":[{"scroll-mb":H()}],"scroll-ml":[{"scroll-ml":H()}],"scroll-p":[{"scroll-p":H()}],"scroll-px":[{"scroll-px":H()}],"scroll-py":[{"scroll-py":H()}],"scroll-ps":[{"scroll-ps":H()}],"scroll-pe":[{"scroll-pe":H()}],"scroll-pt":[{"scroll-pt":H()}],"scroll-pr":[{"scroll-pr":H()}],"scroll-pb":[{"scroll-pb":H()}],"scroll-pl":[{"scroll-pl":H()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",F]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[I,P]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}});function X(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return K((0,t.clsx)(n))}e.s(["cn",()=>X],324491),e.s(["BotMessageLayout",()=>ex,"UserMessageLayout",()=>ey,"motionReplyAnimationIf",()=>ek],397036);var $=e.i(832520),Y=e.i(758118),J=e.i(365290),Q=$,ee=e.i(230766),et=e.i(200407),en=e.i(66920),er=e.i(32170),ei=e.i(584497);function ea(e){let{messageAuthorId:t,rounded:n,size:r="sm"}=e,{user:i}=(0,er.useUser)(),{authorId:a}=(0,ei.useChatMetadata)(),o=t||a||(null==i?void 0:i.id);return o?(0,Q.jsx)(ee.AvatarUser,{size:r,userId:o,rounded:n}):(0,Q.jsx)(ee.Avatar,{size:r,rounded:n,children:(0,Q.jsx)(en.AvatarIcon,{})})}let eo=et.default.memo(ea);var es=e.i(3401),el=e.i(304649),ec=et,eu=e.i(827728),ed=e.i(529693),ep=e.i(753533),eh=e.i(780292),ef=e.i(205341),em=e.i(142219),eg=e.i(737374);let ev=(0,ec.memo)(function(e){let{...t}=e,{id:n,children:r,className:i,effect:a,onEffectClick:o,actions:s,hoverActions:l,align:c,hideActions:u=!1}=t,[d,p]=(0,ec.useState)(!1),h=(0,ec.useRef)(null);(0,eu.useOnClickOutside)(h,()=>p(!1),"touchstart");let f={"data-touch-active":d,onTouchStart:()=>p(!0),ref:h},m=(0,ec.useRef)(!1);(0,ec.useEffect)(()=>{m.current=!0},[]);let g=(0,ec.useMemo)(()=>(0,$.jsx)("div",{className:(0,el.cn)("flex items-center gap-1 group-hover:opacity-100 group-focus-within:opacity-100 opacity-0"),style:{...(0,J.transitionStyles)(["opacity"])},children:l}),[l]);return(0,$.jsxs)("div",{id:n,className:(0,el.cn)("@container/message group w-full [&_code]:break-all break-words flex flex-col gap-2",i,{"opacity-50":"dimmed"===a,"origin-right items-end":"end"===c,"origin-left":"start"===c}),style:{...t.style,...(0,J.transitionStyles)(["opacity"])},"data-testid":"message",role:"listitem",onClick:o,...f,children:[r,s||l?(0,$.jsxs)("div",{...(0,Y.a11yHideIf)(u),className:(0,el.cn)("flex items-center gap-1",{"justify-end flex-row-reverse":"end"===c,"justify-start":"start"===c,"ml-[-2px]":"start"===c,"mr-[-2px]":"end"===c}),style:{...(0,Y.visibleStylesIf)(!u),transform:"translateY(".concat(8*!!u,"px)"),...(0,J.transitionStyles)(["opacity","transform"],{duration:400})},children:[s,g]}):null]},n)}),ex=(0,ec.memo)(function(e){let{...t}=e;return(0,$.jsx)(ev,{...t,align:"start",className:(0,el.cn)("w-full group bot-message",t.className),style:t.style,children:t.children})}),ey=(0,ec.memo)(function(e){let{messageAuthorId:t,attachments:n,awaitingResponse:r,messageLength:i,...a}=e,o=(0,eh.useAtomValue)(eS).has(a.id),s=!!i&&i>500&&!o,l=()=>{eN(a.id)};return(0,$.jsxs)(ev,{...a,align:"end",children:[(0,$.jsx)("div",{className:"flex items-center gap-1.5 pr-1",children:t?(0,$.jsx)(es.UserPreviewLink,{userId:t,children:(0,$.jsx)(eo,{rounded:!0,size:"xs",messageAuthorId:t})}):(0,$.jsx)(eo,{rounded:!0,size:"xs",messageAuthorId:t})}),(0,$.jsx)(ed.motion.div,{...ej(r,.3),className:"flex items-end sm:max-w-[min(fit-content,80%)] max-w-[90%] origin-top-right",children:(0,$.jsxs)("div",{className:(0,el.cn)("border border-gray-200 text-left relative rounded-[16px] bg-gray-200 px-3 py-1.5 min-w-0 break-words","group/message-bubble",{"bg-background border-blue-500 border-dashed animate-pulse":"pulse"===a.effect,"cursor-pointer":s}),style:{...(0,J.transitionStyles)(["border-color","background"],{duration:300}),animationDuration:"0.8s"},onClick:l,children:[(0,$.jsx)(eE,{className:(0,el.cn)("absolute -top-[6px] right-0",{"scale-0":"pulse"===a.effect}),style:{...(0,J.transitionStyles)(["scale","fill"],{duration:300})}}),(0,$.jsx)("div",{className:(0,el.cn)("relative",{"max-h-[400px] overflow-hidden":s,[eg.default.overflowMessage]:s}),children:a.children}),s&&(0,$.jsx)("span",{className:"text-gray-600 justify-center text-label-14 flex inset-x-0 items-center h-9 absolute bottom-0 cursor-pointer group-hover/message-bubble:text-gray-900",style:{...(0,J.transitionStyles)(["color"])},children:"Show full message"})]})}),n]})}),eb={duration:.6,type:"spring",bounce:.4};function ew(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{animate:{opacity:1,scale:1,y:0},initial:e?{opacity:0,scale:.93,y:-12}:{},transition:{...eb,delay:t}}}let ej=(0,ep.cacheFunctionResult)(ew),eC=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{animate:{opacity:1,y:0},initial:e?{opacity:0,y:6}:{},transition:{...eb,delay:t}}},ek=(0,ep.cacheFunctionResult)(eC),eS=(0,ef.atom)(new Set),eN=e=>{let t=new Set(em.store.get(eS)).add(e);em.store.set(eS,t)};function eE(e){let{className:t,style:n}=e;return(0,$.jsx)("svg",{width:"16",height:"16",className:t,style:n,fill:"hsl(var(--gray-200))",children:(0,$.jsx)("path",{d:"M-2.70729e-07 6.19355C8 6.19355 12 4.12903 16 6.99382e-07C16 6.70968 16 13.5 10 16L-2.70729e-07 6.19355Z"})})}},424725,e=>{"use strict";var t=e.i(832520),n=e.i(304649),r=e.i(183558),i=e.i(89440),a=t,o=e.i(200407),s=e.i(530461),l=e.i(403055);let c=e=>{let{openDelay:t=100,closeDelay:n=150,...r}=e;return(0,a.jsx)(s.Root,{openDelay:t,closeDelay:n,...r})};c.displayName=s.Root.displayName;let u=s.Trigger,d=s.Portal,p=o.forwardRef((e,t)=>{let{className:n,align:r="center",sideOffset:i=4,...o}=e;return(0,a.jsx)(d,{children:(0,a.jsx)(s.Content,{ref:t,align:r,sideOffset:i,style:{transformOrigin:"var(--radix-hover-card-content-transform-origin)"},className:(0,l.cn)("bg-background z-50 w-84 overflow-hidden rounded-xl shadow-md outline-hidden","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95","data-[side=bottom]:slide-in-from-top-1 data-[side=left]:slide-in-from-right-1 data-[side=right]:slide-in-from-left-1 data-[side=top]:slide-in-from-bottom-1","data-[side=bottom]:slide-out-to-top-1 data-[side=left]:slide-out-to-left-1 data-[side=right]:slide-out-to-right-1 data-[side=top]:slide-out-to-bottom-1",n),...o})})});p.displayName=s.Content.displayName;var h=e.i(491341);let f=(0,i.cva)("text-[13px] border-alpha-200 group relative max-w-[200px] inline-flex h-[24px] overflow-hidden items-center rounded-[6px] border transition-colors",{variants:{variant:{default:"bg-gray-100 [--hover-color:theme(colors.gray.200)]",refinement:"bg-blue-100 text-blue-700 [--hover-color:theme(colors.blue.200)]",warning:"bg-amber-100 text-amber-700 [--hover-color:theme(colors.amber.200)]"},hasHover:{true:"hover:bg-[var(--hover-color)] cursor-pointer",false:"cursor-text"}}});function m(e){let{prefix:i,children:a,variant:o="default",onClick:s,onRemove:l,hoverContent:d,canRemove:m,href:g,className:v,...x}=e,y=m&&l,b=!!(d||s||g),w=g?h.default:"span";return(0,t.jsxs)(c,{closeDelay:50,openDelay:100,children:[(0,t.jsxs)("span",{...x,"data-context-pill":"true",className:(0,n.cn)(f({variant:o,hasHover:b,className:v})),children:[(0,t.jsxs)(w,{href:g,className:(0,n.cn)("flex items-center gap-1.5 overflow-hidden h-full pl-1 !no-underline font-normal",i?"pl-1":"pl-2"),onClick:s,children:[i?(0,t.jsx)("div",{className:"relative flex h-4 min-w-4 items-center justify-center [&_svg]:scale-90",children:i}):null,(0,t.jsx)(u,{asChild:!0,children:(0,t.jsx)("span",{className:(0,n.cn)("truncate inline overflow-hidden pr-1.5 transition-all",y&&"group-hover:[mask-image:linear-gradient(to_right,black_calc(100%-32px),transparent_calc(100%-20px),transparent_100%)]"),children:a})})]}),y?(0,t.jsx)("button",{"aria-label":"Remove context item",type:"button",onClick:l,className:"absolute right-1 z-10 text-gray-700 opacity-0 group-hover:opacity-100 focus-visible:opacity-100 focus-visible:ring-2 focus-visible:ring-blue-600 focus-visible:bg-gray-100 focus-visible:ring-offset-background rounded-sm",children:(0,t.jsx)(r.CrossSmall,{})}):null]}),d?(0,t.jsx)(p,{side:"top",sideOffset:8,className:"border-none material-menu min-w-[var(--radix-hover-card-trigger-width)] w-auto",children:d}):null]})}function g(e){let{children:r,className:i}=e;return(0,t.jsx)("div",{className:(0,n.cn)("text-gray-500",i),children:r})}e.s(["ContextPill",()=>m,"PillIcon",()=>g],424725)},454471,52781,e=>{"use strict";var t=e.i(605528),n=e.i(361658),r=e.i(349774),i=e.i(993605),a=e.i(174753);let o=(0,t.withNewIcon)('<path d="M15.7221 11.1407C15.1916 11.2818 14.8294 11.3877 14.3073 11.5288C14.181 11.5641 14.1726 11.5729 14.0631 11.4406C13.9368 11.2906 13.8441 11.1936 13.6673 11.1054C13.1368 10.832 12.6231 10.9113 12.143 11.2377C11.5704 11.6258 11.2756 12.1992 11.2841 12.9137C11.2925 13.6194 11.7557 14.2015 12.4209 14.2986C12.9936 14.3779 13.4736 14.1662 13.8526 13.7164C13.9284 13.6194 13.9957 13.5135 14.0799 13.39C13.7768 13.39 13.3978 13.39 12.4546 13.39C12.2778 13.39 12.2357 13.2753 12.2946 13.1254C12.4041 12.8519 12.6062 12.3933 12.7241 12.1639C12.7494 12.111 12.8083 12.0228 12.9346 12.0228C13.3641 12.0228 14.9473 12.0228 16 12.0228C15.9832 12.2609 15.9832 12.4991 15.9495 12.7373C15.8568 13.3724 15.6295 13.9545 15.2589 14.4662C14.6526 15.3041 13.861 15.8246 12.8588 15.9657C12.0336 16.0804 11.2672 15.9128 10.5935 15.3835C9.97034 14.8896 9.61664 14.2368 9.52401 13.4253C9.41453 12.4638 9.68401 11.5994 10.2398 10.8408C10.8377 10.0204 11.6293 9.50001 12.5978 9.31477C13.3894 9.16482 14.1473 9.26185 14.8294 9.747C15.2758 10.0557 15.5958 10.4791 15.8063 10.9907C15.8568 11.0701 15.8232 11.1142 15.7221 11.1407Z" fill="#00ACD7"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M0 2.25C0 1.00736 1.00736 0 2.25 0H13.75C14.9926 0 16 1.00735 16 2.25V8H14.5V2.25C14.5 1.83579 14.1642 1.5 13.75 1.5H2.25C1.83578 1.5 1.5 1.83578 1.5 2.25V13.75C1.5 14.1642 1.83579 14.5 2.25 14.5H8V16H2.25C1.00735 16 0 14.9926 0 13.75V2.25ZM6.25 6.49618C6.25 4.84144 7.59144 3.5 9.24618 3.5H9.99618V5H9.24618C8.41987 5 7.75 5.66986 7.75 6.49618V7H8.75H9.5V8.5H8.75H7.75V9.50439C7.75 11.1588 6.40883 12.5 4.75439 12.5H4.00439V11H4.75439C5.5804 11 6.25 10.3304 6.25 9.50439V8.5H5.25H4.5V7H5.25H6.25V6.49618Z" fill="currentColor"/>\n'),s=(0,t.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M0 2.25C0 1.00736 1.00736 0 2.25 0H13.75C14.9926 0 16 1.00735 16 2.25V8H14.5V2.25C14.5 1.83579 14.1642 1.5 13.75 1.5H2.25C1.83578 1.5 1.5 1.83578 1.5 2.25V13.75C1.5 14.1642 1.83579 14.5 2.25 14.5H8V16H2.25C1.00735 16 0 14.9926 0 13.75V2.25ZM6.25 6.49618C6.25 4.84144 7.59144 3.5 9.24618 3.5H9.99618V5H9.24618C8.41987 5 7.75 5.66986 7.75 6.49618V7H8.75H9.5V8.5H8.75H7.75V9.50439C7.75 11.1588 6.40883 12.5 4.75439 12.5H4.00439V11H4.75439C5.5804 11 6.25 10.3304 6.25 9.50439V8.5H5.25H4.5V7H5.25H6.25V6.49618Z" fill="currentColor"/>\n  <path d="M15.7246 11.3857L14.548 10.0483H10.4518L9.27511 11.3857C8.92434 11.7843 8.94634 12.3876 9.3252 12.7597L12.4999 15.8775L15.6745 12.7597C16.0533 12.3876 16.0753 11.7844 15.7246 11.3857Z" fill="#CA2A30"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M12.4661 9.48831C13.6686 9.49258 14.8004 9.91649 14.7973 10.5166C14.7941 11.1166 13.7447 11.5332 12.5424 11.5287C11.3401 11.5242 10.1984 11.1295 10.2017 10.5296C10.2045 9.92962 11.2638 9.48383 12.4661 9.48831Z" fill="#F87274"/>');var l=e.i(309161),c=e.i(292273),u=e.i(866992),d=e.i(530346);let p=(0,t.withNewIcon)('<path d="M6.71709 5.81132H8.67935C9.8869 5.81132 9.8869 7.01887 8.67935 7.01887H6.71709V5.81132ZM2.03784 11.3962H8.07558V9.73585H6.71709V8.5283H8.22652C9.8869 8.5283 8.98124 11.3962 10.3397 11.3962H14.1133V8.5283H13.2077V8.83019C13.2077 10.0377 11.8492 9.88679 11.6982 9.13208C11.5473 8.37736 10.9435 7.77359 10.7926 7.77359C13.0567 6.56604 11.6982 4.15094 9.8869 4.15094H2.79256V5.81132H4.30199V9.73585H2.03784V11.3962Z" fill="currentColor" stroke="currentColor" stroke-width="0.150943" stroke-linejoin="round"/>\n  <path d="M8.00009 14.4906C11.5847 14.4906 14.4907 11.5846 14.4907 8C14.4907 4.41536 11.5847 1.50943 8.00009 1.50943C4.41545 1.50943 1.50952 4.41536 1.50952 8C1.50952 11.5846 4.41545 14.4906 8.00009 14.4906Z" stroke="currentColor" stroke-width="1.35849" fill="transparent" />\n  <path d="M14.9436 8.45283L15.6983 8L14.9436 7.54717V8.45283Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M14.7218 9.79872L15.5503 9.50183L14.8984 8.91046L14.7218 9.79872Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M14.2418 11.0755L15.1124 10.9459L14.5884 10.2388L14.2418 11.0755Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M13.5217 12.2341L14.4008 12.2768L14.0249 11.481L13.5217 12.2341Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M12.5896 13.2299L13.4434 13.4434L13.23 12.5895L12.5896 13.2299Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M11.4811 14.0248L12.2769 14.4007L12.2341 13.5216L11.4811 14.0248Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M10.239 14.5882L10.9461 15.1121L11.0757 14.2416L10.239 14.5882Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M8.91057 14.8983L9.50194 15.5502L9.79883 14.7216L8.91057 14.8983Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M7.54722 14.9434L8.00005 15.6981L8.45288 14.9434H7.54722Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M6.20134 14.7216L6.49823 15.5502L7.0896 14.8983L6.20134 14.7216Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M4.92475 14.2416L5.0543 15.1121L5.76147 14.5882L4.92475 14.2416Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M3.76601 13.5216L3.72323 14.4007L4.51904 14.0248L3.76601 13.5216Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M2.77025 12.5895L2.55678 13.4434L3.41064 13.2299L2.77025 12.5895Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M1.97536 11.481L1.59941 12.2768L2.47852 12.2341L1.97536 11.481Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M1.41196 10.2388L0.887987 10.9459L1.75854 11.0755L1.41196 10.2388Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M1.10188 8.91046L0.450006 9.50183L1.27856 9.79872L1.10188 8.91046Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M1.05664 7.54717L0.301924 8L1.05664 8.45284V7.54717Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M1.27849 6.20128L0.449934 6.49817L1.10181 7.08954L1.27849 6.20128Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M1.75845 4.92452L0.887888 5.05406L1.41187 5.76124L1.75845 4.92452Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M2.4785 3.76594L1.5994 3.72316L1.97534 4.51897L2.4785 3.76594Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M3.41066 2.77008L2.5568 2.55661L2.77026 3.41048L3.41066 2.77008Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M4.51914 1.9752L3.72333 1.59925L3.76611 2.47836L4.51914 1.9752Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M5.76128 1.41185L5.0541 0.887872L4.92456 1.75843L5.76128 1.41185Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M7.08967 1.10168L6.49831 0.449804L6.20142 1.27836L7.08967 1.10168Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M8.45302 1.05661L8.00019 0.301889L7.54736 1.05661L8.45302 1.05661Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M9.7989 1.27836L9.50201 0.449804L8.91064 1.10168L9.7989 1.27836Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M11.0755 1.75843L10.9459 0.887873L10.2388 1.41185L11.0755 1.75843Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M12.2342 2.47835L12.277 1.59925L11.4812 1.9752L12.2342 2.47835Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M13.23 3.41048L13.4435 2.55661L12.5896 2.77008L13.23 3.41048Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M14.0249 4.51897L14.4008 3.72316L13.5217 3.76594L14.0249 4.51897Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M14.5883 5.76124L15.1123 5.05406L14.2417 4.92452L14.5883 5.76124Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M14.8984 7.08954L15.5502 6.49817L14.7217 6.20128L14.8984 7.08954Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M6.94336 1.66038L7.99996 2.71698L9.05657 1.66038H6.94336Z" fill="currentColor" stroke="currentColor" stroke-width="0.90566" stroke-linejoin="round"/>\n  <path d="M13.7026 5.03606L13.0243 6.36746L14.3557 7.04584L13.7026 5.03606Z" fill="currentColor" stroke="currentColor" stroke-width="0.90566" stroke-linejoin="round"/>\n  <path d="M12.5811 12.5078L11.1052 12.2741L10.8714 13.7499L12.5811 12.5078Z" fill="currentColor" stroke="currentColor" stroke-width="0.90566" stroke-linejoin="round"/>\n  <path d="M5.12842 13.7499L4.89466 12.274L3.4188 12.5078L5.12842 13.7499Z" fill="currentColor" stroke="currentColor" stroke-width="0.90566" stroke-linejoin="round"/>\n  <path d="M1.64404 7.04584L2.97544 6.36746L2.29706 5.03606L1.64404 7.04584Z" fill="currentColor" stroke="currentColor" stroke-width="0.90566" stroke-linejoin="round"/>'),h=(0,t.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M6.25 1H5.5V1.75V9.40135C5.05874 9.14609 4.54643 9 4 9C2.34315 9 1 10.3431 1 12C1 13.6569 2.34315 15 4 15C5.65685 15 7 13.6569 7 12C7 11.9158 6.99653 11.8324 6.98973 11.75H7V11V2.5H13.5V6.90135C13.0587 6.64609 12.5464 6.5 12 6.5C10.3431 6.5 9 7.84315 9 9.5C9 11.1569 10.3431 12.5 12 12.5C13.6569 12.5 15 11.1569 15 9.5C15 9.41581 14.9965 9.33243 14.9897 9.25H15V8.5V1.75V1H14.25H6.25ZM10.5 9.5C10.5 10.3284 11.1716 11 12 11C12.8284 11 13.5 10.3284 13.5 9.5C13.5 8.67157 12.8284 8 12 8C11.1716 8 10.5 8.67157 10.5 9.5ZM2.5 12C2.5 12.8284 3.17157 13.5 4 13.5C4.82843 13.5 5.5 12.8284 5.5 12C5.5 11.1716 4.82843 10.5 4 10.5C3.17157 10.5 2.5 11.1716 2.5 12Z" fill="currentColor"/>'),f=(0,t.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M1.5 2.5H14.5V12.5C14.5 13.0523 14.0523 13.5 13.5 13.5H2.5C1.94772 13.5 1.5 13.0523 1.5 12.5V2.5ZM0 1H1.5H14.5H16V2.5V12.5C16 13.8807 14.8807 15 13.5 15H2.5C1.11929 15 0 13.8807 0 12.5V2.5V1ZM4 11.1339L4.44194 10.6919L6.51516 8.61872C6.85687 8.27701 6.85687 7.72299 6.51517 7.38128L4.44194 5.30806L4 4.86612L3.11612 5.75L3.55806 6.19194L5.36612 8L3.55806 9.80806L3.11612 10.25L4 11.1339ZM8 9.75494H8.6225H11.75H12.3725V10.9999H11.75H8.6225H8V9.75494Z" fill="currentColor"/>');e.s(["TerminalWindow",0,f],52781);let m=(0,t.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M1.5 2.5H14.5V12.5C14.5 13.0523 14.0523 13.5 13.5 13.5H2.5C1.94772 13.5 1.5 13.0523 1.5 12.5V2.5ZM0 1H1.5H14.5H16V2.5V12.5C16 13.8807 14.8807 15 13.5 15H2.5C1.11929 15 0 13.8807 0 12.5V2.5V1ZM6.745 6.76445L9.2161 8L6.745 9.23555V6.76445ZM11.1056 7.55279C11.4741 7.73705 11.4741 8.26295 11.1056 8.44721L6.22361 10.8882C5.89116 11.0544 5.5 10.8127 5.5 10.441L5.5 5.55902C5.5 5.18733 5.89116 4.94558 6.22361 5.1118L11.1056 7.55279Z" fill="currentColor"/>'),g=(0,t.withNewIcon)('<path d="M9.18457 0.00488281C9.41351 0.0276021 9.62886 0.128861 9.79297 0.292969L14.207 4.70703C14.3945 4.89453 14.5 5.1489 14.5 5.41406V16H13V6.5H8V1.5H3V7.5H1.5V0H9.08594L9.18457 0.00488281ZM4.5498 9.71387C5.06006 9.19321 6 9.53835 6 10.3174V15H4.5V12.3789L4.11426 12.9297L3.5 13.8076L2.88574 12.9297L2.5 12.3789V15H1V10.3174C1 9.48634 2.06931 9.14928 2.5459 9.83008L3.5 11.1924L4.4541 9.83008L4.5498 9.71387ZM9.75 9.5C10.9926 9.5 12 10.5074 12 11.75V12.75C12 13.9926 10.9926 15 9.75 15H7.5V9.5H9.75ZM9 11V13.5H9.75C10.1642 13.5 10.5 13.1642 10.5 12.75V11.75C10.5 11.3358 10.1642 11 9.75 11H9ZM9.5 5H12.3789L9.5 2.12109V5Z" fill="currentColor" />'),v=(0,t.withNewIcon)('<path d="M9.18457 0.00488281C9.41351 0.0276021 9.62886 0.128861 9.79297 0.292969L14.207 4.70703C14.3945 4.89453 14.5 5.1489 14.5 5.41406V16H13V6.5H8V1.5H3V6.5H1.5V0H9.08594L9.18457 0.00488281ZM5 10.5H3.75V15H2.25V10.5H1V9H5V10.5ZM9.25 10.5H7.875C7.66789 10.5 7.5 10.6679 7.5 10.875C7.5 11.0821 7.66789 11.25 7.875 11.25C8.91053 11.25 9.75 12.0895 9.75 13.125C9.75 14.1605 8.91053 15 7.875 15H6.25V13.5H7.875C8.08211 13.5 8.25 13.3321 8.25 13.125C8.25 12.9179 8.08211 12.75 7.875 12.75C6.83947 12.75 6 11.9105 6 10.875C6 9.83947 6.83947 9 7.875 9H9.25V10.5ZM9.5 5H12.3789L9.5 2.12109V5Z" fill="currentColor" />'),x=(0,t.withNewIcon)('<path d="M9.18457 0.00488281C9.41351 0.0276021 9.62886 0.128861 9.79297 0.292969L14.207 4.70703C14.3945 4.89453 14.5 5.1489 14.5 5.41406V16H13V6.5H8V1.5H3V6.5H1.5V0H9.08594L9.18457 0.00488281ZM5 9V13.125C5 14.1605 4.16053 15 3.125 15C2.08947 15 1.25 14.1605 1.25 13.125V12.75H2.75V13.125C2.75 13.3321 2.91789 13.5 3.125 13.5C3.33211 13.5 3.5 13.3321 3.5 13.125V9H5ZM9.5 10.5H8.125C7.91789 10.5 7.75 10.6679 7.75 10.875C7.75 11.0821 7.91789 11.25 8.125 11.25C9.16053 11.25 10 12.0895 10 13.125C10 14.1605 9.16053 15 8.125 15H6.5V13.5H8.125C8.33211 13.5 8.5 13.3321 8.5 13.125C8.5 12.9179 8.33211 12.75 8.125 12.75C7.08947 12.75 6.25 11.9105 6.25 10.875C6.25 9.83947 7.08947 9 8.125 9H9.5V10.5ZM9.5 5H12.3789L9.5 2.12109V5Z" fill="currentColor" />'),y=(0,t.withNewIcon)('<path d="M5.25 10.5H3.75C3.33579 10.5 3 10.8358 3 11.25V12.75C3 13.1642 3.33579 13.5 3.75 13.5H5.25V15H3.75C2.50736 15 1.5 13.9926 1.5 12.75V11.25C1.5 10.0074 2.50736 9 3.75 9H5.25V10.5ZM9.5 10.5H8.125C7.91789 10.5 7.75 10.6679 7.75 10.875C7.75 11.0821 7.91789 11.25 8.125 11.25C9.16053 11.25 10 12.0895 10 13.125C10 14.1605 9.16053 15 8.125 15H6.5V13.5H8.125C8.33211 13.5 8.5 13.3321 8.5 13.125C8.5 12.9179 8.33211 12.75 8.125 12.75C7.08947 12.75 6.25 11.9105 6.25 10.875C6.25 9.83947 7.08947 9 8.125 9H9.5V10.5ZM14 10.5H12.625C12.4179 10.5 12.25 10.6679 12.25 10.875C12.25 11.0821 12.4179 11.25 12.625 11.25C13.6605 11.25 14.5 12.0895 14.5 13.125C14.5 14.1605 13.6605 15 12.625 15H11V13.5H12.625C12.8321 13.5 13 13.3321 13 13.125C13 12.9179 12.8321 12.75 12.625 12.75C11.5895 12.75 10.75 11.9105 10.75 10.875C10.75 9.83947 11.5895 9 12.625 9H14V10.5ZM9.18457 0.00488281C9.41351 0.0276021 9.62886 0.128861 9.79297 0.292969L14.207 4.70703C14.3945 4.89453 14.5 5.1489 14.5 5.41406V7.5H13V6.5H8V1.5H3V7.5H1.5V0H9.08594L9.18457 0.00488281ZM9.5 5H12.3789L9.5 2.12109V5Z" fill="currentColor" />'),b=(0,t.withNewIcon)('<path d="M7.50293 12.9111L8.48242 9H10.0283L8.77344 14.0127C8.44217 15.3348 6.56364 15.3349 6.23242 14.0127L4.97754 9H6.52344L7.50293 12.9111ZM4.25 10.5H2.875C2.66789 10.5 2.5 10.6679 2.5 10.875C2.5 11.0821 2.66789 11.25 2.875 11.25C3.91053 11.25 4.75 12.0895 4.75 13.125C4.75 14.1605 3.91053 15 2.875 15H1.25V13.5H2.875C3.08211 13.5 3.25 13.3321 3.25 13.125C3.25 12.9179 3.08211 12.75 2.875 12.75C1.83947 12.75 1 11.9105 1 10.875C1 9.83947 1.83947 9 2.875 9H4.25V10.5ZM14.25 10.5H12.75C12.3358 10.5 12 10.8358 12 11.25V12.75C12 13.1642 12.3358 13.5 12.75 13.5C13.1642 13.5 13.5 13.1642 13.5 12.75H13V11.25H15V12.75C15 13.9926 13.9926 15 12.75 15C11.5074 15 10.5 13.9926 10.5 12.75V11.25C10.5 10.0074 11.5074 9 12.75 9H14.25V10.5ZM9.18457 0.00488281C9.41351 0.0276021 9.62886 0.128861 9.79297 0.292969L14.207 4.70703C14.3945 4.89453 14.5 5.1489 14.5 5.41406V7.5H13V6.5H8V1.5H3V7.5H1.5V0H9.08594L9.18457 0.00488281ZM9.5 5H12.3789L9.5 2.12109V5Z" fill="currentColor" />'),w=[[g,["md","markdown"]],[v,["ts"]],[x,["js"]],[y,["css"]],[b,["svg"]],[(0,t.withNewIcon)('<path d="M12.5254 12.9111L13.5049 9H15.0508L13.7959 14.0127C13.4646 15.3348 11.5861 15.3349 11.2549 14.0127L10 9H11.5459L12.5254 12.9111ZM5 10.5H3.5C3.08579 10.5 2.75 10.8358 2.75 11.25V12.75C2.75 13.1642 3.08579 13.5 3.5 13.5H5V15H3.5C2.25736 15 1.25 13.9926 1.25 12.75V11.25C1.25 10.0074 2.25736 9 3.5 9H5V10.5ZM9 10.5H7.625C7.41789 10.5 7.25 10.6679 7.25 10.875C7.25 11.0821 7.41789 11.25 7.625 11.25C8.66053 11.25 9.5 12.0895 9.5 13.125C9.5 14.1605 8.66053 15 7.625 15H6V13.5H7.625C7.83211 13.5 8 13.3321 8 13.125C8 12.9179 7.83211 12.75 7.625 12.75C6.58947 12.75 5.75 11.9105 5.75 10.875C5.75 9.83947 6.58947 9 7.625 9H9V10.5ZM9.18457 0.00488281C9.41351 0.0276021 9.62886 0.128861 9.79297 0.292969L14.207 4.70703C14.3945 4.89453 14.5 5.1489 14.5 5.41406V7.5H13V6.5H8V1.5H3V7.5H1.5V0H9.08594L9.18457 0.00488281ZM9.5 5H12.3789L9.5 2.12109V5Z" fill="currentColor" />'),["csv"]],[(0,t.withNewIcon)('<path d="M6.5 2.5H5.5C4.94772 2.5 4.5 2.94772 4.5 3.5V6.29492C4.49985 7.03976 4.1208 7.61099 3.64941 8C4.1208 8.38901 4.49986 8.96024 4.5 9.70508V12.5C4.5 13.0523 4.94772 13.5 5.5 13.5H6.5V15H5.5C4.11929 15 3 13.8807 3 12.5V9.70508C2.99985 9.49298 2.88477 9.2728 2.58398 9.07227C2.2769 8.86759 1.86075 8.75 1.5 8.75V7.25L1.6377 7.24414C1.96313 7.21875 2.31533 7.10679 2.58398 6.92773C2.88476 6.72721 2.99984 6.50702 3 6.29492V3.5C3 2.11929 4.11929 1 5.5 1H6.5V2.5ZM10.25 1C11.6307 1 12.75 2.11929 12.75 3.5V6.29492C12.7502 6.44568 12.8551 6.67125 13.2529 6.90332C13.5892 7.09949 14.0098 7.21767 14.3564 7.24414L14.5 7.25V8.75C14.1317 8.75 13.6372 8.87249 13.2529 9.09668C12.8551 9.32876 12.7502 9.55432 12.75 9.70508V12.5C12.75 13.8807 11.6307 15 10.25 15H9.25V13.5H10.25C10.8023 13.5 11.25 13.0523 11.25 12.5V9.70508C11.2502 8.93162 11.7016 8.3696 12.2002 8C11.7016 7.6304 11.2502 7.06838 11.25 6.29492V3.5C11.25 2.94772 10.8023 2.5 10.25 2.5H9.25V1H10.25Z" fill="currentColor" />'),["json"]],[d.LogoReact,["jsx","tsx"]],[u.LogoPython,["py"]],[p,["rs"]],[o,["go"]],[s,["rb"]],[l.Image,["jpg","jpeg","png","gif","ico","webp"]],[m,["mp4","mov","avi"]],[h,["mp3","wav","ogg"]],[i.FileText,["txt","pdf","doc","docx","xls","xlsx","ppt","pptx","yml","yaml"]],[a.FileZip,["zip"]],[c.LockClosed,["lock"]],[n.Code,["html","scss","less","c","cpp","h","hpp"]]];function j(e){var t;if("console logs"===e.toLowerCase())return f;let n=null==(t=e.split(".").pop())?void 0:t.toLowerCase();if(!n)return r.File;for(let[e,t]of w)if(t.includes(n))return e;return r.File}e.s(["filePathToIcon",()=>j],454471)},236808,718755,266007,e=>{"use strict";e.s(["AGENT_BLOCK_CLASS",()=>U,"AGENT_BLOCK_MAX_WIDTH_CLASS",()=>H,"AgentCitationPill",()=>X,"AgentNote",()=>ei,"BlockRing",()=>eh,"Command",()=>et,"CommandOutput",()=>en,"ConsecutiveTimelineLine",()=>eo,"File",()=>Q,"FileList",()=>ee,"RichPart",()=>Z,"RichTask",()=>W,"TaskName",()=>G,"Terminal",()=>J,"TimelineCorner20",()=>el,"TimelineLine",()=>es,"WebsiteScreenshot",()=>Y,"indexAndLengthToAlign",()=>ed,"readableUrl",()=>eu,"useReportAgentError",()=>ef],236808);var t=e.i(832520),n=e.i(919409);e.i(521603);var r=e.i(895336),i=e.i(372506),a=e.i(608142),o=e.i(356388),s=e.i(517953),l=e.i(324491),c=e.i(89440),u=e.i(529693),d=e.i(200407),p=e.i(104720),h=e.i(758118),f=e.i(365290),m=e.i(397036),g=e.i(424725),v=e.i(454471),x=d;function y(e){let{active:t,scrollRef:n,scrollInterval:r=600}=e,i=(0,x.useRef)(!1);(0,x.useEffect)(()=>{let e=n.current;if(!e||!t)return;i.current=!1;let a=()=>{e.scrollTo({top:e.scrollTop,behavior:"auto"})},o=e=>{e.deltaY<0&&(i.current=!0,a())},s=()=>{i.current=!0,a()},l=e=>{["ArrowUp","PageUp","Home","Space"].includes(e.code)&&(i.current=!0,a())},c=()=>{e.scrollTop>=e.scrollHeight-e.clientHeight-50&&(i.current=!1)};e.addEventListener("wheel",o,{passive:!0}),e.addEventListener("touchstart",s,{passive:!0}),e.addEventListener("keydown",l),e.addEventListener("scroll",c,{passive:!0});let u=setInterval(()=>{i.current||e.scrollTo({top:e.scrollHeight,behavior:"smooth"})},r);return()=>{e.removeEventListener("wheel",o),e.removeEventListener("touchstart",s),e.removeEventListener("keydown",l),e.removeEventListener("scroll",c),clearInterval(u)}},[n,t,r]);let a=(0,x.useCallback)(()=>{let e=n.current;e&&e.scrollTo({top:e.scrollHeight,behavior:"auto"})},[n]),o=(0,x.useCallback)(()=>{i.current=!1;let e=n.current;e&&e.scrollTo({top:e.scrollHeight,behavior:"auto"})},[n]),s=(0,x.useCallback)(()=>{let e=n.current;e&&(i.current=!0,e.scrollTo({top:e.scrollTop,behavior:"auto"}))},[n]);return{forceUserControlRef:i,scrollToBottom:a,reenableAutoscroll:o,cancelAutoscrollNow:s}}var b=e.i(997974),w=e.i(762585),j=e.i(491341),C=e.i(108179),k=e.i(176248),S=e.i(37737),N=e.i(92479);e.i(563948);var E=e.i(407562);e.s(["useOpenFileInActiveBlock",()=>L],718755);var M=d,I=e.i(926224),D=e.i(745587),T=e.i(449381),A=e.i(385671);function L(){let e=(0,T.useActiveBlockState)(),{actions:{setActiveTabIntent:t}}=(0,A.useChatLayout)(),n=(0,D.useSetActiveFile)({blockId:(null==e?void 0:e.id)||""});return{getOpenFileHandler:(0,M.useCallback)(r=>{if(e&&"code-project"===e.type&&(0,I.parseMultiFileSource)({source:e.source,blockType:"code-project",blockId:e.id}).filter(e=>!e.isDeleted).find(e=>e.meta.file===r))return()=>{t("code"),n(r)}},[e,t,n])}}e.i(168204);var P=e.i(225695);let R="user_read_only_context",_="v0_debug_logs",O=["text_attachments","project_sources","image_attachments","integration_examples","examples"],F=5;function V(e,t,n){var r,i,a,o,s,l,c,u,d,p;let h="string"!=typeof e&&e[0]===P.AssistantMessagePartTagName&&!B(e,"task-start-v1"),f="string"!=typeof e&&"Codeblock"===e[0]&&Array.isArray(e)&&e.length>=2&&(null==(r=e[1])?void 0:r.blockId)&&(null==(a=e[1])||null==(i=a.meta)?void 0:i.type)&&!["inline-sql"].includes((null==(s=e[1])||null==(o=s.meta)?void 0:o.type)||"");if(!h&&!f)return!1;for(let e=t-1;e>=0;e--){let t=n[e];if(!t||"string"==typeof t)break;if(t[0]===P.AssistantMessagePartTagName){if(!B(t,"task-start-v1"))return!0;continue}if("Codeblock"===t[0]&&Array.isArray(t)&&t.length>=2&&(null==(l=t[1])?void 0:l.blockId)&&(null==(u=t[1])||null==(c=u.meta)?void 0:c.type)&&!["inline-sql"].includes((null==(p=t[1])||null==(d=p.meta)?void 0:d.type)||""))return!0;break}return!1}function B(e,t){if("string"!=typeof e&&Array.isArray(e)&&e[0]===P.AssistantMessagePartTagName){var n;let r=null==(n=e[1])?void 0:n.part;return!!r&&(Array.isArray(t)?t:[t]).includes(r.type)}return!1}function z(e){if(e.includes(R)&&e.includes(_))return"Console logs";let t=O.map(e=>"".concat(R,"/").concat(e,"/")),n=e,r=!1;for(let e of t)n.length!==(n=n.replace(e,()=>"")).length&&(r=!0);r:if(r&&n.includes("-")){var i;let e=null==(i=n.split("-").pop())?void 0:i.split(".")[0];if(!e||e.length!==F)break r;n=n.replace("-".concat(e),"")}return n}e.s(["cleanAgentFilePath",()=>z,"getIsConsecutiveAssistantPart",()=>V],266007);let H="max-w-[360px]",U=(0,l.cn)("material-medium border-gray-300 bg-background-subtle p-2 flex items-center rounded-[8px] m-[-1px] relative overflow-visible [&>*]:max-w-full [&>*]:w-full [&>*]:overflow-hidden",H),q=500;function W(e){let{children:r,renderedParts:o,isActive:c,onClick:h,maxHeight:g=200,autoCloseDelay:v=q,isFirst:x,createdAt:y,error:b,finishedAt:w,Icon:j,hideTimeSpent:C,className:k,hideTimelineLine:S,headerChildrenEnd:N,style:E}=e,M=(0,d.useMemo)(()=>!o&&!b||Array.isArray(o)&&0===o.length?null:(0,t.jsx)(i.Content,{className:(0,l.cn)(p.default.content,"data-[state=open]:animate-accordion-down data-[state=closed]:animate-accordion-up"),children:(0,t.jsxs)("div",{className:(0,l.cn)("grid grid-cols-[min-content_minmax(0,1fr)] items-start max-w-full min-w-0",p.default.renderedParts),children:[(0,t.jsx)(es,{fadeEnd:c,hidden:S,animate:c}),(0,t.jsx)(ep,{maxHeight:g,autoScrollActive:c,children:(0,t.jsxs)("div",{className:"flex flex-col gap-2 pt-2 max-w-full min-w-0",children:[o,b?(0,t.jsx)(K,{error:b}):null]})})]})}),[o,b,S,c,g]),I=(0,d.useRef)(!1),[D,T]=(0,d.useState)(c?"active":void 0),A=(0,d.useMemo)(()=>!!(M||h)&&!c,[M,h,c]);(0,d.useEffect)(()=>{I.current||c||T(void 0)},[c,v]);let L=(0,d.useCallback)(e=>{I.current=!0,T(e)},[]),P=(0,d.useCallback)(e=>{null==h||h(e)},[h]),R={duration:150};return(0,t.jsx)(i.Root,{"data-rich-task":"true",type:"single",className:"w-full",collapsible:!0,value:D,onValueChange:L,children:(0,t.jsx)(u.motion.div,{...(0,m.motionReplyAnimationIf)(!x&&c),children:(0,t.jsxs)(i.Item,{value:"active",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(i.Trigger,{className:(0,l.cn)("group/trigger w-full flex items-center gap-2 text-[14px] text-gray-500 rounded-[6px] min-h-6 truncate min-w-0","focus-visible:ring-offset-background outline-hidden has-focus-visible:ring-2 ring-blue-600 transition focus-visible:ring-2 focus-visible:ring-offset-1",A?"cursor-pointer":"cursor-default",k),style:E,tabIndex:A?0:-1,onClick:P,children:[(0,t.jsxs)("span",{className:(0,l.cn)("min-w-4 min-h-4 place-items-center place-content-center grid text-gray-400",{"[&>*]:grid-stack group-hover/trigger:text-gray-900 group-focus-visible/trigger:text-gray-900":A}),style:{...(0,f.transitionStyles)(["color"],R)},children:[(0,t.jsx)("div",{className:(0,l.cn)("grid place-items-center [&>*]:grid-stack",A?(0,l.cn)("group-hover/trigger:opacity-0 group-hover/trigger:scale-80 opacity-100 scale-100","group-data-[state=open]/trigger:opacity-0 group-data-[state=open]/trigger:scale-80","group-focus-visible/trigger:opacity-0 group-focus-visible/trigger:scale-80"):null,{"text-amber-500":b}),style:{...(0,f.transitionStyles)(["opacity","scale"],R)},children:b?(0,t.jsx)(s.Warning,{style:{...(0,f.transitionStyles)(["color"],R)}}):(0,t.jsx)(j,{style:{...(0,f.transitionStyles)(["color"],R)}})}),M?(0,t.jsx)(a.ChevronDownSmall,{className:(0,l.cn)("absolute","rotate-[-90deg] group-data-[state=open]/trigger:rotate-0 duration-100 opacity-0",A?(0,l.cn)("group-hover/trigger:opacity-100 group-hover/trigger:scale-100 scale-80","group-data-[state=open]/trigger:opacity-100 group-data-[state=open]/trigger:scale-100","group-focus-visible/trigger:opacity-100 group-focus-visible/trigger:scale-100"):null),style:{...(0,f.transitionStyles)(["opacity","rotate"],R)}}):null]}),(0,t.jsx)(n.ShimmerChildren,{shimmer:c,children:(0,t.jsxs)("div",{className:(0,l.cn)("flex items-center gap-2 min-w-0",{"group-hover/trigger:text-gray-900 group-focus-visible/trigger:text-gray-900":A}),style:{...(0,f.transitionStyles)(["color"],R)},children:[r,c&&!C?(0,t.jsx)(ec,{start:y,end:w}):null]})})]}),N]}),M]})})})}function Z(e){let{children:n,isActive:r}=e;return(0,t.jsx)(u.motion.div,{"data-rich-part":"true",className:"flex items-center gap-2 text-[13px] text-gray-500 max-w-full min-w-0",...(0,m.motionReplyAnimationIf)(r),children:n})}function G(e){let{isActive:t,textActive:n,textComplete:r,taskNameActive:i,taskNameComplete:a}=e;return t?null!=i?i:n:null!=a?a:r}function K(e){let{error:n}=e,{openReportError:r}=ef(),{title:i,message:a}=(0,d.useMemo)(()=>{switch(n.type){case"INPUT_SCHEMA_ERROR":return{title:"Invalid input schema provided",message:"An error occurred while validating the input schema. Retrying..."};case"HANDLED_EXECUTION_ERROR":return{title:"Agent Error",message:"An error occurred while the agent was working, ".concat(n.message)};default:return{title:"Agent Error",message:"An unhandled problem occurred. Please try again."}}},[n,r]);return(0,t.jsx)(ei,{variant:"warning",title:i,children:a})}function X(e){let{image:n,url:r,favicon:i,title:a,publishedDate:o}=e,s=(0,d.useMemo)(()=>(0,t.jsxs)("div",{className:"flex flex-col w-[300px]",children:[(0,t.jsx)(Y,{screenshotUrl:n,url:r,className:"h-[160px]",variant:"none"}),(0,t.jsxs)("div",{className:"w-full gap-0.5 flex flex-col bg-background min-h-fit max-h-fit p-2 px-2.5 text-gray-900 text-[13px] z-20 border-t border-gray-200",children:[o?(0,t.jsx)("span",{className:"text-gray-500 text-[12px]",children:new Date(o).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}):null,a]})]}),[n,r,o,a]),l=(0,d.useMemo)(()=>i?(0,t.jsxs)("div",{className:"relative size-4 min-w-4 rounded-full overflow-hidden",children:[(0,t.jsx)("img",{className:"rounded-full z-20 w-4 h-4 !m-0",src:i,alt:"Favicon for ".concat(a)}),(0,t.jsx)(w.Skeleton,{className:"absolute inset-0 w-full h-full"})]}):null,[i,a]);return(0,t.jsx)(g.ContextPill,{href:r,prefix:l,hoverContent:s,variant:"default",children:eu({url:r,omitPath:!0})})}let $=(0,c.cva)("flex items-center justify-center shrink relative group/screenshot",{variants:{variant:{none:"bg-muted",contained:"bg-alpha-300 aspect-[16/9] rounded-[6px] overflow-hidden"},size:{unset:"w-auto",small:"min-w-[144px] w-fit",medium:"min-w-[320px] w-fit",large:"min-w-[440px] w-fit"}},defaultVariants:{variant:"contained",size:"medium"}});function Y(e){let{screenshotUrl:n,url:r,className:i,...a}=e;return(0,t.jsxs)("div",{className:$({className:i,...a}),children:[r?(0,t.jsx)(j.default,{href:r,target:"_blank",rel:"noopener noreferrer",className:"absolute w-full h-full bg-alpha-300 z-20 flex items-center justify-center transition-opacity no-underline group-hover/screenshot:opacity-100 opacity-0",children:(0,t.jsxs)("span",{className:"flex group-hover/screenshot:scale-100 scale-90 items-center gap-1 text-[13px] text-gray-900 material-small px-2 h-7 !no-underline transition-all",children:["Visit",(0,t.jsx)(o.ExternalSmall,{})]})}):null,n?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("img",{className:"object-cover absolute z-10 !m-0",src:n,alt:"Screenshot ".concat(r?eu({url:r}):"")})}):(0,t.jsx)("div",{className:"absolute w-full h-full flex items-center justify-center bg-muted text-gray-500 z-10",children:(0,t.jsx)("span",{className:"group-hover/screenshot:opacity-0 transition-opacity",children:"No preview available"})}),(0,t.jsx)(w.Skeleton,{className:"absolute inset-0 w-full h-full rounded-none"})]})}function J(e){let{children:n}=e;return(0,t.jsx)("div",{className:"text-label-13-mono text-gray-500 p-3 bg-muted border-gray-200 border rounded-[6px] overflow-x-scroll",children:(0,t.jsx)("div",{className:"whitespace-pre-wrap min-w-[800px] break-all flex flex-col gap-1 ",children:n})})}function Q(e){let{filePath:n,shorten:r,limit:i,offset:a}=e,o=(0,d.useMemo)(()=>z(n),[n]),s=(0,v.filePathToIcon)(o),{getOpenFileHandler:l}=L(),c=(0,d.useMemo)(()=>l(o),[o,l]);return(0,t.jsx)(g.ContextPill,{prefix:(0,t.jsx)(s,{}),onClick:c,children:(0,t.jsxs)("div",{className:"flex items-center min-w-0 flex-1",children:[(0,t.jsx)("span",{className:"truncate min-w-0",children:(0,t.jsx)("span",{children:r?o.split("/").pop():"~".concat(o)})}),null!=a&&i?(0,t.jsx)("span",{className:"ml-1 text-gray-400 text-[12px] shrink-0",children:"Line".concat(i>1?"s":""," ").concat(a+1,"-").concat(a+i)}):null]})})}function ee(e){let{label:n,files:r}=e;return(0,t.jsxs)("span",{className:"inline-flex flex-wrap items-center gap-1.5",children:[n,r.map((e,n)=>"string"==typeof e?(0,t.jsx)(Q,{filePath:e,shorten:!0},n):(0,t.jsx)(Q,{shorten:!0,...e},n))]})}function et(e){let{directory:n,children:r,command:i}=e;return(0,t.jsxs)("span",{children:[(0,t.jsxs)("span",{className:"text-gray-500",children:["~/",n||(0,t.jsx)("span",{children:"..."}),(0,t.jsx)("span",{children:">"})]})," ",(0,t.jsx)("span",{className:"text-gray-900",children:null!=i?i:r})]})}function en(e){let{output:n}=e;return(0,t.jsx)("span",{className:"text-gray-500 whitespace-pre-wrap break-words",children:n||"No output"})}let er=(0,c.cva)((0,l.cn)("flex flex-col gap-2 px-3 py-1.5 rounded-[6px] text-[13px] border",H),{variants:{variant:{warning:"bg-amber-100 text-amber-700 border-amber-200 ",info:"bg-muted text-gray-900 border-gray-200 [&_p]:text-gray-500",error:"bg-red-100 text-red-700 border-red-200"}}});function ei(e){let{title:n,variant:r,children:i,primaryAction:a,secondaryAction:o}=e,s=(0,d.useMemo)(()=>{if(n)return n;switch(r){case"warning":return"Warning";case"info":return"Information";case"error":return"Error"}},[n,r]);return(0,t.jsxs)(u.motion.div,{className:er({variant:r}),...(0,m.motionReplyAnimationIf)(!0),children:[(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"font-medium",children:s}),(0,t.jsx)("p",{className:"m-0!",children:i})]}),o||a?(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[o?(0,t.jsx)(k.Button,{size:"sm",variant:"ghost",onClick:o.onClick,children:o.text}):null,a?(0,t.jsx)(k.Button,{size:"sm",variant:"secondary",onClick:a.onClick,children:a.text}):null]}):null]})}let ea=[.19,.11,.1,.99];function eo(e){let{animate:n}=e;return(0,t.jsx)(u.motion.div,{className:"h-fit w-fit origin-top",initial:n?{scaleY:0}:void 0,animate:{scaleY:1},transition:{duration:.4,ease:ea},children:(0,t.jsx)(es,{})})}function es(e){let{className:n,animate:r,hidden:i=!1,fadeEnd:a=!1}=e,[o,s]=(0,C.default)(),c=(0,d.useMemo)(()=>r?Math.round(s.height):"100%",[r,s.height]);return(0,t.jsx)("div",{ref:r?o:void 0,className:(0,l.cn)("min-w-0 w-0 mr-0 min-h-3 h-full flex items-start justify-center overflow-hidden relative",n,{"min-w-4 w-4 mr-2":!i}),style:{...(0,h.visibleStylesIf)(!i),...(0,f.transitionStyles)(["width","min-width","opacity","margin"])},children:(0,t.jsx)("div",{className:(0,l.cn)("w-[1px] min-h-3 absolute top-0 [--line-color:theme(colors.gray.200)] ",p.default.timelineLine),style:{height:c,backgroundSize:"100% ".concat(a?"100%":"200%"),...(0,f.transitionStyles)(["height","background-size"],{duration:400,timingFunction:ea})}})})}function el(e){let{className:n,hidden:r=!1}=e;return(0,t.jsx)("div",{className:(0,l.cn)("relative w-5 h-5",n),style:{...(0,h.visibleStylesIf)(!r),...(0,f.transitionStyles)(["opacity"])},"aria-hidden":!0,children:(0,t.jsx)("div",{className:(0,l.cn)("absolute left-0 top-0 w-5 h-5 border-l-2 border-b-2 rounded-bl-[8px] border-alpha-200")})})}let ec=(0,d.memo)(function(e){let{start:n,end:i}=e,[a,o]=(0,d.useState)(Date.now());(0,d.useEffect)(()=>{if(i)return;let e=setInterval(()=>o(Date.now()),100);return()=>{clearInterval(e)}},[i]);let s=(((i||a)-n)/1e3).toFixed(0);return(0,t.jsxs)("div",{className:"text-label-14 text-gray-500 tabular-nums",children:[(0,t.jsx)(r.default,{value:parseInt(s),transformTiming:{duration:200,easing:"cubic-bezier(.35,.08,.09,.98)"}}),"s"]})});function eu(e){let{url:t,omitPath:n}=e;try{let{hostname:e,pathname:r}=new URL(t),i=e.replace(/^www\./,""),a=r&&"/"!==r?r:"";return"".concat(i).concat(n?"":a)}catch(e){return t||"Invalid URL"}}function ed(e,t){return 0===e?"start":e===t-1?"end":"center"}function ep(e){let{children:n,maxHeight:r,autoScrollActive:i}=e,{containerRef:a,topRef:o,bottomRef:s,showTopFade:l,showBottomFade:c}=(0,b.useScrollFade)("vertical");return y({active:i,scrollRef:a}),(0,t.jsxs)("div",{className:"relative w-full",children:[(0,t.jsx)(b.ScrollFade,{direction:"top",color:"muted",orientation:"vertical",visible:l}),(0,t.jsx)(b.ScrollFade,{direction:"bottom",color:"muted",orientation:"vertical",visible:c}),(0,t.jsx)(b.ScrollArea,{ref:a,className:"w-full overflow-y-scroll no-scrollbar",style:{maxHeight:r},tabIndex:-1,children:(0,t.jsxs)("div",{className:"flex flex-col relative w-full",children:[(0,t.jsx)(b.ScrollMarker,{ref:o,side:"top",orientation:"vertical"}),n,(0,t.jsx)(b.ScrollMarker,{ref:s,side:"bottom",orientation:"vertical"})]})})]})}function eh(e){let{isVisible:n,isActive:r}=e;return(0,t.jsx)("div",{"aria-hidden":!0,className:(0,l.cn)("absolute inset-[-3px] border-0 rounded-[10px] pointer-events-none border-gray-100 !max-w-[unset] !w-[unset]",{"border-2":n,"border-blue-100":r}),style:{...(0,f.transitionStyles)(["border-color","border-width"],{duration:450})}})}function ef(){let{chatId:e}=(0,N.useChatId)();return{openReportError:(0,d.useCallback)(t=>{if(!e)return void E.toast.error("Unable to report error, no chat ID found");let n="I'm seeing the following error in my chat: ".concat(e);(0,S.openDialog)({type:"feedback",data:{sentiment:"bad",feedback:"".concat(t||n,", my chat ID is ").concat(e)}})},[e])}}},470284,e=>{"use strict";function t(e,t){let n=String(e);if("string"!=typeof t)throw TypeError("Expected character");let r=0,i=n.indexOf(t);for(;-1!==i;)r++,i=n.indexOf(t,i+t.length);return r}e.s(["ccount",()=>t])},846139,987307,222348,752715,730191,748819,e=>{"use strict";e.s(["BlockContent",()=>o8,"getBlockLogic",()=>o9,"useRenderedBlock",()=>o6],846139);var t,n,r=e.i(832520),i=e.i(200407),a=e.i(829732),o=e.i(205795),s=e.i(513529),l=e.i(238580),c=e.i(44366),u=e.i(868275),d=r,p=i,h=e.i(476371),f=e.i(284546),m=e.i(430957),g=e.i(304649);e.s(["MemodMarkdown",()=>nY,"MessageContent",()=>nQ,"MessageContentPartsMemodMarkdown",()=>nJ],748819);var v=r,x=e.i(622449),y=e.i(770150),b=e.i(900245),w=e.i(694686),j=e.i(818273),C=m,k=i,S=g,N=e.i(85830),E=e.i(661535);e.i(168204);var M=e.i(225695),I=r,D=i,T=M,A=e.i(92479);e.i(904347);var L=e.i(37737),P=e.i(236808);function R(e){let t,n,r,{data:i,components:a}=e,{type:o}=i,{chatId:s}=(0,A.useChatId)(),l=(0,D.useCallback)(()=>{(0,L.openDialog)({type:"feedback",data:{sentiment:"bad",feedback:"I'm seeing a parsing error in my chat: ".concat(s)}})},[s]);if(!(0,T.isUserMessageContentRichPartType)(o))return null;switch(o){case"hidden-context":case"refinement-element":return null;case"confirmed-steps":return _(i);case"parse-error":return(0,I.jsx)(P.AgentNote,{variant:"error",primaryAction:{text:"Report",onClick:l},children:"Unable to parse message, please notify the team."});case"mention-file":t=i.filePath,n=i.filePath,r="file";break;case"mention-url":t=i.url,n=i.url,r="url";break;case"mention-directory":t=i.directoryPath,n=i.directoryPath,r="directory";break;default:return o}return(0,I.jsx)(a.MentionInlineNode,{type:r,data:{id:"mention-".concat(n),title:t,value:n}})}function _(e){let{addedEnvVars:t,appliedScripts:n,connectedIntegrationNames:r}=e,i=[];return(t.length>0&&i.push("added ".concat(O(t)," environment variables")),n.length>0&&i.push("applied ".concat(O(n)," scripts")),r.length>0&&i.push("connected ".concat(O(r))),0===i.length)?"I don't wish to take any action right now.":"Great, I've ".concat(O(i))}function O(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"and";if(0===e.length)return"";if(1===e.length)return e[0];let n=e[e.length-1],r=e.slice(0,-1);return"".concat(r.join(", ")," ").concat(t," ").concat(n)}e.s(["EditorMentionInlineNode",()=>nU,"EditorMentionItemExtension",()=>nW],752715);var F=r,V=e.i(213917);e.i(133473);var B=V;e.i(894688);var z=e.i(187195);function H(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function U(e){var t=H(e).Element;return e instanceof t||e instanceof Element}function q(e){var t=H(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function W(e){if("undefined"==typeof ShadowRoot)return!1;var t=H(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}var Z=Math.max,G=Math.min,K=Math.round;function X(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function $(){return!/^((?!chrome|android).)*safari/i.test(X())}function Y(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=e.getBoundingClientRect(),i=1,a=1;t&&q(e)&&(i=e.offsetWidth>0&&K(r.width)/e.offsetWidth||1,a=e.offsetHeight>0&&K(r.height)/e.offsetHeight||1);var o=(U(e)?H(e):window).visualViewport,s=!$()&&n,l=(r.left+(s&&o?o.offsetLeft:0))/i,c=(r.top+(s&&o?o.offsetTop:0))/a,u=r.width/i,d=r.height/a;return{width:u,height:d,top:c,right:l+u,bottom:c+d,left:l,x:l,y:c}}function J(e){var t=H(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Q(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function ee(e){return e!==H(e)&&q(e)?Q(e):J(e)}function et(e){return e?(e.nodeName||"").toLowerCase():null}function en(e){return((U(e)?e.ownerDocument:e.document)||window.document).documentElement}function er(e){return Y(en(e)).left+J(e).scrollLeft}function ei(e){return H(e).getComputedStyle(e)}function ea(e){var t=ei(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function eo(e){var t=e.getBoundingClientRect(),n=K(t.width)/e.offsetWidth||1,r=K(t.height)/e.offsetHeight||1;return 1!==n||1!==r}function es(e,t,n){void 0===n&&(n=!1);var r=q(t),i=q(t)&&eo(t),a=en(t),o=Y(e,i,n),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&(("body"!==et(t)||ea(a))&&(s=ee(t)),q(t)?(l=Y(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):a&&(l.x=er(a))),{x:o.left+s.scrollLeft-l.x,y:o.top+s.scrollTop-l.y,width:o.width,height:o.height}}function el(e){var t=Y(e),n=e.offsetWidth,r=e.offsetHeight;return 1>=Math.abs(t.width-n)&&(n=t.width),1>=Math.abs(t.height-r)&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function ec(e){return"html"===et(e)?e:e.assignedSlot||e.parentNode||(W(e)?e.host:null)||en(e)}function eu(e){return["html","body","#document"].indexOf(et(e))>=0?e.ownerDocument.body:q(e)&&ea(e)?e:eu(ec(e))}function ed(e,t){void 0===t&&(t=[]);var n,r=eu(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),a=H(r),o=i?[a].concat(a.visualViewport||[],ea(r)?r:[]):r,s=t.concat(o);return i?s:s.concat(ed(ec(o)))}function ep(e){return["table","td","th"].indexOf(et(e))>=0}function eh(e){return q(e)&&"fixed"!==ei(e).position?e.offsetParent:null}function ef(e){var t=/firefox/i.test(X());if(/Trident/i.test(X())&&q(e)&&"fixed"===ei(e).position)return null;var n=ec(e);for(W(n)&&(n=n.host);q(n)&&0>["html","body"].indexOf(et(n));){var r=ei(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}function em(e){for(var t=H(e),n=eh(e);n&&ep(n)&&"static"===ei(n).position;)n=eh(n);return n&&("html"===et(n)||"body"===et(n)&&"static"===ei(n).position)?t:n||ef(e)||t}var eg="top",ev="bottom",ex="right",ey="left",eb="auto",ew=[eg,ev,ex,ey],ej="start",eC="end",ek="clippingParents",eS="viewport",eN="popper",eE="reference",eM=ew.reduce(function(e,t){return e.concat([t+"-"+ej,t+"-"+eC])},[]),eI=[].concat(ew,[eb]).reduce(function(e,t){return e.concat([t,t+"-"+ej,t+"-"+eC])},[]),eD=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function eT(e){var t=new Map,n=new Set,r=[];function i(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach(function(e){if(!n.has(e)){var r=t.get(e);r&&i(r)}}),r.push(e)}return e.forEach(function(e){t.set(e.name,e)}),e.forEach(function(e){n.has(e.name)||i(e)}),r}function eA(e){var t=eT(e);return eD.reduce(function(e,n){return e.concat(t.filter(function(e){return e.phase===n}))},[])}function eL(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function eP(e){var t=e.reduce(function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e},{});return Object.keys(t).map(function(e){return t[e]})}function eR(e,t){var n=H(e),r=en(e),i=n.visualViewport,a=r.clientWidth,o=r.clientHeight,s=0,l=0;if(i){a=i.width,o=i.height;var c=$();(c||!c&&"fixed"===t)&&(s=i.offsetLeft,l=i.offsetTop)}return{width:a,height:o,x:s+er(e),y:l}}function e_(e){var t,n=en(e),r=J(e),i=null==(t=e.ownerDocument)?void 0:t.body,a=Z(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=Z(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),s=-r.scrollLeft+er(e),l=-r.scrollTop;return"rtl"===ei(i||n).direction&&(s+=Z(n.clientWidth,i?i.clientWidth:0)-a),{width:a,height:o,x:s,y:l}}function eO(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&W(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function eF(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function eV(e,t){var n=Y(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function eB(e,t,n){return t===eS?eF(eR(e,n)):U(t)?eV(t,n):eF(e_(en(e)))}function ez(e){var t=ed(ec(e)),n=["absolute","fixed"].indexOf(ei(e).position)>=0&&q(e)?em(e):e;return U(n)?t.filter(function(e){return U(e)&&eO(e,n)&&"body"!==et(e)}):[]}function eH(e,t,n,r){var i=[].concat("clippingParents"===t?ez(e):[].concat(t),[n]),a=i[0],o=i.reduce(function(t,n){var i=eB(e,n,r);return t.top=Z(i.top,t.top),t.right=G(i.right,t.right),t.bottom=G(i.bottom,t.bottom),t.left=Z(i.left,t.left),t},eB(e,a,r));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function eU(e){return e.split("-")[0]}function eq(e){return e.split("-")[1]}function eW(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function eZ(e){var t,n=e.reference,r=e.element,i=e.placement,a=i?eU(i):null,o=i?eq(i):null,s=n.x+n.width/2-r.width/2,l=n.y+n.height/2-r.height/2;switch(a){case eg:t={x:s,y:n.y-r.height};break;case ev:t={x:s,y:n.y+n.height};break;case ex:t={x:n.x+n.width,y:l};break;case ey:t={x:n.x-r.width,y:l};break;default:t={x:n.x,y:n.y}}var c=a?eW(a):null;if(null!=c){var u="y"===c?"height":"width";switch(o){case ej:t[c]=t[c]-(n[u]/2-r[u]/2);break;case eC:t[c]=t[c]+(n[u]/2-r[u]/2)}}return t}function eG(){return{top:0,right:0,bottom:0,left:0}}function eK(e){return Object.assign({},eG(),e)}function eX(e,t){return t.reduce(function(t,n){return t[n]=e,t},{})}function e$(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=void 0===r?e.placement:r,a=n.strategy,o=void 0===a?e.strategy:a,s=n.boundary,l=void 0===s?ek:s,c=n.rootBoundary,u=void 0===c?eS:c,d=n.elementContext,p=void 0===d?eN:d,h=n.altBoundary,f=void 0!==h&&h,m=n.padding,g=void 0===m?0:m,v=eK("number"!=typeof g?g:eX(g,ew)),x=p===eN?eE:eN,y=e.rects.popper,b=e.elements[f?x:p],w=eH(U(b)?b:b.contextElement||en(e.elements.popper),l,u,o),j=Y(e.elements.reference),C=eZ({reference:j,element:y,strategy:"absolute",placement:i}),k=eF(Object.assign({},y,C)),S=p===eN?k:j,N={top:w.top-S.top+v.top,bottom:S.bottom-w.bottom+v.bottom,left:w.left-S.left+v.left,right:S.right-w.right+v.right},E=e.modifiersData.offset;if(p===eN&&E){var M=E[i];Object.keys(N).forEach(function(e){var t=[ex,ev].indexOf(e)>=0?1:-1,n=[eg,ev].indexOf(e)>=0?"y":"x";N[e]+=M[n]*t})}return N}var eY={placement:"bottom",modifiers:[],strategy:"absolute"};function eJ(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(e){return!(e&&"function"==typeof e.getBoundingClientRect)})}var eQ={passive:!0},e0={top:"auto",right:"auto",bottom:"auto",left:"auto"};function e1(e,t){var n=e.x,r=e.y,i=t.devicePixelRatio||1;return{x:K(n*i)/i||0,y:K(r*i)/i||0}}function e2(e){var t,n,r=e.popper,i=e.popperRect,a=e.placement,o=e.variation,s=e.offsets,l=e.position,c=e.gpuAcceleration,u=e.adaptive,d=e.roundOffsets,p=e.isFixed,h=s.x,f=void 0===h?0:h,m=s.y,g=void 0===m?0:m,v="function"==typeof d?d({x:f,y:g}):{x:f,y:g};f=v.x,g=v.y;var x=s.hasOwnProperty("x"),y=s.hasOwnProperty("y"),b=ey,w=eg,j=window;if(u){var C=em(r),k="clientHeight",S="clientWidth";C===H(r)&&"static"!==ei(C=en(r)).position&&"absolute"===l&&(k="scrollHeight",S="scrollWidth"),(a===eg||(a===ey||a===ex)&&o===eC)&&(w=ev,g-=(p&&C===j&&j.visualViewport?j.visualViewport.height:C[k])-i.height,g*=c?1:-1),(a===ey||(a===eg||a===ev)&&o===eC)&&(b=ex,f-=(p&&C===j&&j.visualViewport?j.visualViewport.width:C[S])-i.width,f*=c?1:-1)}var N=Object.assign({position:l},u&&e0),E=!0===d?e1({x:f,y:g},H(r)):{x:f,y:g};return(f=E.x,g=E.y,c)?Object.assign({},N,((n={})[w]=y?"0":"",n[b]=x?"0":"",n.transform=1>=(j.devicePixelRatio||1)?"translate("+f+"px, "+g+"px)":"translate3d("+f+"px, "+g+"px, 0)",n)):Object.assign({},N,((t={})[w]=y?g+"px":"",t[b]=x?f+"px":"",t.transform="",t))}let e5={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach(function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},i=t.elements[e];q(i)&&et(i)&&(Object.assign(i.style,n),Object.keys(r).forEach(function(e){var t=r[e];!1===t?i.removeAttribute(e):i.setAttribute(e,!0===t?"":t)}))})},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(e){var r=t.elements[e],i=t.attributes[e]||{},a=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce(function(e,t){return e[t]="",e},{});q(r)&&et(r)&&(Object.assign(r.style,a),Object.keys(i).forEach(function(e){r.removeAttribute(e)}))})}},requires:["computeStyles"]};function e4(e,t,n){var r=eU(e),i=[ey,eg].indexOf(r)>=0?-1:1,a="function"==typeof n?n(Object.assign({},t,{placement:e})):n,o=a[0],s=a[1];return o=o||0,s=(s||0)*i,[ey,ex].indexOf(r)>=0?{x:s,y:o}:{x:o,y:s}}var e3={left:"right",right:"left",bottom:"top",top:"bottom"};function e7(e){return e.replace(/left|right|bottom|top/g,function(e){return e3[e]})}var e9={start:"end",end:"start"};function e6(e){return e.replace(/start|end/g,function(e){return e9[e]})}function e8(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=n.boundary,a=n.rootBoundary,o=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?eI:l,u=eq(r),d=u?s?eM:eM.filter(function(e){return eq(e)===u}):ew,p=d.filter(function(e){return c.indexOf(e)>=0});0===p.length&&(p=d);var h=p.reduce(function(t,n){return t[n]=e$(e,{placement:n,boundary:i,rootBoundary:a,padding:o})[eU(n)],t},{});return Object.keys(h).sort(function(e,t){return h[e]-h[t]})}function te(e){if(eU(e)===eb)return[];var t=e7(e);return[e6(e),t,e6(t)]}function tt(e){return"x"===e?"y":"x"}function tn(e,t,n){return Z(e,G(t,n))}function tr(e,t,n){var r=tn(e,t,n);return r>n?n:r}var ti=function(e,t){return eK("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:eX(e,ew))};function ta(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function to(e){return[eg,ex,ev,ey].some(function(t){return e[t]>=0})}var ts=function(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,i=t.defaultOptions,a=void 0===i?eY:i;return function(e,t,n){void 0===n&&(n=a);var i={placement:"bottom",orderedModifiers:[],options:Object.assign({},eY,a),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},o=[],s=!1,l={state:i,setOptions:function(n){var o="function"==typeof n?n(i.options):n;u(),i.options=Object.assign({},a,i.options,o),i.scrollParents={reference:U(e)?ed(e):e.contextElement?ed(e.contextElement):[],popper:ed(t)};var s=eA(eP([].concat(r,i.options.modifiers)));return i.orderedModifiers=s.filter(function(e){return e.enabled}),c(),l.update()},forceUpdate:function(){if(!s){var e=i.elements,t=e.reference,n=e.popper;if(eJ(t,n)){i.rects={reference:es(t,em(n),"fixed"===i.options.strategy),popper:el(n)},i.reset=!1,i.placement=i.options.placement,i.orderedModifiers.forEach(function(e){return i.modifiersData[e.name]=Object.assign({},e.data)});for(var r=0;r<i.orderedModifiers.length;r++){if(!0===i.reset){i.reset=!1,r=-1;continue}var a=i.orderedModifiers[r],o=a.fn,c=a.options,u=void 0===c?{}:c,d=a.name;"function"==typeof o&&(i=o({state:i,options:u,name:d,instance:l})||i)}}}},update:eL(function(){return new Promise(function(e){l.forceUpdate(),e(i)})}),destroy:function(){u(),s=!0}};if(!eJ(e,t))return l;function c(){i.orderedModifiers.forEach(function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,a=e.effect;if("function"==typeof a){var s=a({state:i,name:t,instance:l,options:r}),c=function(){};o.push(s||c)}})}function u(){o.forEach(function(e){return e()}),o=[]}return l.setOptions(n).then(function(e){!s&&n.onFirstUpdate&&n.onFirstUpdate(e)}),l}}({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,a=void 0===i||i,o=r.resize,s=void 0===o||o,l=H(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&c.forEach(function(e){e.addEventListener("scroll",n.update,eQ)}),s&&l.addEventListener("resize",n.update,eQ),function(){a&&c.forEach(function(e){e.removeEventListener("scroll",n.update,eQ)}),s&&l.removeEventListener("resize",n.update,eQ)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=eZ({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=void 0===r||r,a=n.adaptive,o=void 0===a||a,s=n.roundOffsets,l=void 0===s||s,c={placement:eU(t.placement),variation:eq(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,e2(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,e2(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},e5,{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.offset,a=void 0===i?[0,0]:i,o=eI.reduce(function(e,n){return e[n]=e4(n,t.rects,a),e},{}),s=o[t.placement],l=s.x,c=s.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[r]=o}},{name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,a=void 0===i||i,o=n.altAxis,s=void 0===o||o,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,p=n.altBoundary,h=n.flipVariations,f=void 0===h||h,m=n.allowedAutoPlacements,g=t.options.placement,v=eU(g),x=v===g,y=l||(x||!f?[e7(g)]:te(g)),b=[g].concat(y).reduce(function(e,n){return e.concat(eU(n)===eb?e8(t,{placement:n,boundary:u,rootBoundary:d,padding:c,flipVariations:f,allowedAutoPlacements:m}):n)},[]),w=t.rects.reference,j=t.rects.popper,C=new Map,k=!0,S=b[0],N=0;N<b.length;N++){var E=b[N],M=eU(E),I=eq(E)===ej,D=[eg,ev].indexOf(M)>=0,T=D?"width":"height",A=e$(t,{placement:E,boundary:u,rootBoundary:d,altBoundary:p,padding:c}),L=D?I?ex:ey:I?ev:eg;w[T]>j[T]&&(L=e7(L));var P=e7(L),R=[];if(a&&R.push(A[M]<=0),s&&R.push(A[L]<=0,A[P]<=0),R.every(function(e){return e})){S=E,k=!1;break}C.set(E,R)}if(k)for(var _=f?3:1,O=function(e){var t=b.find(function(t){var n=C.get(t);if(n)return n.slice(0,e).every(function(e){return e})});if(t)return S=t,"break"},F=_;F>0&&"break"!==O(F);F--);t.placement!==S&&(t.modifiersData[r]._skip=!0,t.placement=S,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},{name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,a=void 0===i||i,o=n.altAxis,s=void 0!==o&&o,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,p=n.tether,h=void 0===p||p,f=n.tetherOffset,m=void 0===f?0:f,g=e$(t,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),v=eU(t.placement),x=eq(t.placement),y=!x,b=eW(v),w=tt(b),j=t.modifiersData.popperOffsets,C=t.rects.reference,k=t.rects.popper,S="function"==typeof m?m(Object.assign({},t.rects,{placement:t.placement})):m,N="number"==typeof S?{mainAxis:S,altAxis:S}:Object.assign({mainAxis:0,altAxis:0},S),E=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,M={x:0,y:0};if(j){if(a){var I,D="y"===b?eg:ey,T="y"===b?ev:ex,A="y"===b?"height":"width",L=j[b],P=L+g[D],R=L-g[T],_=h?-k[A]/2:0,O=x===ej?C[A]:k[A],F=x===ej?-k[A]:-C[A],V=t.elements.arrow,B=h&&V?el(V):{width:0,height:0},z=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:eG(),H=z[D],U=z[T],q=tn(0,C[A],B[A]),W=y?C[A]/2-_-q-H-N.mainAxis:O-q-H-N.mainAxis,K=y?-C[A]/2+_+q+U+N.mainAxis:F+q+U+N.mainAxis,X=t.elements.arrow&&em(t.elements.arrow),$=X?"y"===b?X.clientTop||0:X.clientLeft||0:0,Y=null!=(I=null==E?void 0:E[b])?I:0,J=L+W-Y-$,Q=L+K-Y,ee=tn(h?G(P,J):P,L,h?Z(R,Q):R);j[b]=ee,M[b]=ee-L}if(s){var et,en="x"===b?eg:ey,er="x"===b?ev:ex,ei=j[w],ea="y"===w?"height":"width",eo=ei+g[en],es=ei-g[er],ec=-1!==[eg,ey].indexOf(v),eu=null!=(et=null==E?void 0:E[w])?et:0,ed=ec?eo:ei-C[ea]-k[ea]-eu+N.altAxis,ep=ec?ei+C[ea]+k[ea]-eu-N.altAxis:es,eh=h&&ec?tr(ed,ei,ep):tn(h?ed:eo,ei,h?ep:es);j[w]=eh,M[w]=eh-ei}t.modifiersData[r]=M}},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,i=e.options,a=n.elements.arrow,o=n.modifiersData.popperOffsets,s=eU(n.placement),l=eW(s),c=[ey,ex].indexOf(s)>=0?"height":"width";if(a&&o){var u=ti(i.padding,n),d=el(a),p="y"===l?eg:ey,h="y"===l?ev:ex,f=n.rects.reference[c]+n.rects.reference[l]-o[l]-n.rects.popper[c],m=o[l]-n.rects.reference[l],g=em(a),v=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,x=f/2-m/2,y=u[p],b=v-d[c]-u[h],w=v/2-d[c]/2+x,j=tn(y,w,b),C=l;n.modifiersData[r]=(t={},t[C]=j,t.centerOffset=j-w,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;if(null!=r)("string"!=typeof r||(r=t.elements.popper.querySelector(r)))&&eO(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,a=t.modifiersData.preventOverflow,o=e$(t,{elementContext:"reference"}),s=e$(t,{altBoundary:!0}),l=ta(o,r),c=ta(s,i,a),u=to(l),d=to(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}}]}),tl="tippy-box",tc="tippy-content",tu="tippy-backdrop",td="tippy-arrow",tp="tippy-svg-arrow",th={passive:!0,capture:!0},tf=function(){return document.body};function tm(e,t,n){if(Array.isArray(e)){var r=e[t];return null==r?Array.isArray(n)?n[t]:n:r}return e}function tg(e,t){var n=({}).toString.call(e);return 0===n.indexOf("[object")&&n.indexOf(t+"]")>-1}function tv(e,t){return"function"==typeof e?e.apply(void 0,t):e}function tx(e,t){var n;return 0===t?e:function(r){clearTimeout(n),n=setTimeout(function(){e(r)},t)}}function ty(e){return e.split(/\s+/).filter(Boolean)}function tb(e){return[].concat(e)}function tw(e,t){-1===e.indexOf(t)&&e.push(t)}function tj(e){return e.filter(function(t,n){return e.indexOf(t)===n})}function tC(e){return e.split("-")[0]}function tk(e){return[].slice.call(e)}function tS(e){return Object.keys(e).reduce(function(t,n){return void 0!==e[n]&&(t[n]=e[n]),t},{})}function tN(){return document.createElement("div")}function tE(e){return["Element","Fragment"].some(function(t){return tg(e,t)})}function tM(e){return tg(e,"NodeList")}function tI(e){return tg(e,"MouseEvent")}function tD(e){return!!(e&&e._tippy&&e._tippy.reference===e)}function tT(e){return tE(e)?[e]:tM(e)?tk(e):Array.isArray(e)?e:tk(document.querySelectorAll(e))}function tA(e,t){e.forEach(function(e){e&&(e.style.transitionDuration=t+"ms")})}function tL(e,t){e.forEach(function(e){e&&e.setAttribute("data-state",t)})}function tP(e){var t,n=tb(e)[0];return null!=n&&null!=(t=n.ownerDocument)&&t.body?n.ownerDocument:document}function tR(e,t){var n=t.clientX,r=t.clientY;return e.every(function(e){var t=e.popperRect,i=e.popperState,a=e.props.interactiveBorder,o=tC(i.placement),s=i.modifiersData.offset;if(!s)return!0;var l="bottom"===o?s.top.y:0,c="top"===o?s.bottom.y:0,u="right"===o?s.left.x:0,d="left"===o?s.right.x:0,p=t.top-r+l>a,h=r-t.bottom-c>a,f=t.left-n+u>a,m=n-t.right-d>a;return p||h||f||m})}function t_(e,t,n){var r=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(t){e[r](t,n)})}function tO(e,t){for(var n,r=t;r;){if(e.contains(r))return!0;r=null==r.getRootNode||null==(n=r.getRootNode())?void 0:n.host}return!1}var tF={isTouch:!1},tV=0;function tB(){!tF.isTouch&&(tF.isTouch=!0,window.performance&&document.addEventListener("mousemove",tz))}function tz(){var e=performance.now();e-tV<20&&(tF.isTouch=!1,document.removeEventListener("mousemove",tz)),tV=e}function tH(){var e=document.activeElement;if(tD(e)){var t=e._tippy;e.blur&&!t.state.isVisible&&e.blur()}}function tU(){document.addEventListener("touchstart",tB,th),window.addEventListener("blur",tH)}var tq="undefined"!=typeof window&&"undefined"!=typeof document&&!!window.msCrypto,tW=Object.assign({appendTo:tf,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},{animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},{allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999}),tZ=Object.keys(tW),tG=function(e){Object.keys(e).forEach(function(t){tW[t]=e[t]})};function tK(e){var t=(e.plugins||[]).reduce(function(t,n){var r,i=n.name,a=n.defaultValue;return i&&(t[i]=void 0!==e[i]?e[i]:null!=(r=tW[i])?r:a),t},{});return Object.assign({},e,t)}function tX(e,t){return(t?Object.keys(tK(Object.assign({},tW,{plugins:t}))):tZ).reduce(function(t,n){var r=(e.getAttribute("data-tippy-"+n)||"").trim();if(!r)return t;if("content"===n)t[n]=r;else try{t[n]=JSON.parse(r)}catch(e){t[n]=r}return t},{})}function t$(e,t){var n=Object.assign({},t,{content:tv(t.content,[e])},t.ignoreAttributes?{}:tX(e,t.plugins));return n.aria=Object.assign({},tW.aria,n.aria),n.aria={expanded:"auto"===n.aria.expanded?t.interactive:n.aria.expanded,content:"auto"===n.aria.content?t.interactive?null:"describedby":n.aria.content},n}var tY=function(){return"innerHTML"};function tJ(e,t){e[tY()]=t}function tQ(e){var t=tN();return!0===e?t.className=td:(t.className=tp,tE(e)?t.appendChild(e):tJ(t,e)),t}function t0(e,t){tE(t.content)?(tJ(e,""),e.appendChild(t.content)):"function"!=typeof t.content&&(t.allowHTML?tJ(e,t.content):e.textContent=t.content)}function t1(e){var t=e.firstElementChild,n=tk(t.children);return{box:t,content:n.find(function(e){return e.classList.contains(tc)}),arrow:n.find(function(e){return e.classList.contains(td)||e.classList.contains(tp)}),backdrop:n.find(function(e){return e.classList.contains(tu)})}}function t2(e){var t=tN(),n=tN();n.className=tl,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=tN();function i(n,r){var i=t1(t),a=i.box,o=i.content,s=i.arrow;r.theme?a.setAttribute("data-theme",r.theme):a.removeAttribute("data-theme"),"string"==typeof r.animation?a.setAttribute("data-animation",r.animation):a.removeAttribute("data-animation"),r.inertia?a.setAttribute("data-inertia",""):a.removeAttribute("data-inertia"),a.style.maxWidth="number"==typeof r.maxWidth?r.maxWidth+"px":r.maxWidth,r.role?a.setAttribute("role",r.role):a.removeAttribute("role"),(n.content!==r.content||n.allowHTML!==r.allowHTML)&&t0(o,e.props),r.arrow?s?n.arrow!==r.arrow&&(a.removeChild(s),a.appendChild(tQ(r.arrow))):a.appendChild(tQ(r.arrow)):s&&a.removeChild(s)}return r.className=tc,r.setAttribute("data-state","hidden"),t0(r,e.props),t.appendChild(n),n.appendChild(r),i(e.props,e.props),{popper:t,onUpdate:i}}t2.$$tippy=!0;var t5=1,t4=[],t3=[];function t7(e,t){var n,r,i,a,o,s,l,c=t$(e,Object.assign({},tW,tK(tS(t)))),u=!1,d=!1,p=!1,h=!1,f=[],m=tx($,c.interactiveDebounce),g=t5++,v=null,x=tj(c.plugins),y={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},b={id:g,reference:e,popper:tN(),popperInstance:v,props:c,state:y,plugins:x,clearDelayTimeouts:el,setProps:ec,setContent:eu,show:ed,hide:ep,hideWithInteractivity:eh,enable:eo,disable:es,unmount:ef,destroy:em};if(!c.render)return b;var w=c.render(b),j=w.popper,C=w.onUpdate;j.setAttribute("data-tippy-root",""),j.id="tippy-"+b.id,b.popper=j,e._tippy=b,j._tippy=b;var k=x.map(function(e){return e.fn(b)}),S=e.hasAttribute("aria-expanded");return G(),_(),L(),P("onCreate",[b]),c.showOnCreate&&ei(),j.addEventListener("mouseenter",function(){b.props.interactive&&b.state.isVisible&&b.clearDelayTimeouts()}),j.addEventListener("mouseleave",function(){b.props.interactive&&b.props.trigger.indexOf("mouseenter")>=0&&D().addEventListener("mousemove",m)}),b;function N(){var e=b.props.touch;return Array.isArray(e)?e:[e,0]}function E(){return"hold"===N()[0]}function M(){var e;return!!(null!=(e=b.props.render)&&e.$$tippy)}function I(){return l||e}function D(){var e=I().parentNode;return e?tP(e):document}function T(){return t1(j)}function A(e){return b.state.isMounted&&!b.state.isVisible||tF.isTouch||a&&"focus"===a.type?0:tm(b.props.delay,+!e,tW.delay)}function L(e){void 0===e&&(e=!1),j.style.pointerEvents=b.props.interactive&&!e?"":"none",j.style.zIndex=""+b.props.zIndex}function P(e,t,n){if(void 0===n&&(n=!0),k.forEach(function(n){n[e]&&n[e].apply(n,t)}),n){var r;(r=b.props)[e].apply(r,t)}}function R(){var t=b.props.aria;if(t.content){var n="aria-"+t.content,r=j.id,i=tb(b.props.triggerTarget||e);i.forEach(function(e){var t=e.getAttribute(n);if(b.state.isVisible)e.setAttribute(n,t?t+" "+r:r);else{var i=t&&t.replace(r,"").trim();i?e.setAttribute(n,i):e.removeAttribute(n)}})}}function _(){if(!S&&b.props.aria.expanded){var t=tb(b.props.triggerTarget||e);t.forEach(function(e){b.props.interactive?e.setAttribute("aria-expanded",b.state.isVisible&&e===I()?"true":"false"):e.removeAttribute("aria-expanded")})}}function O(){D().removeEventListener("mousemove",m),t4=t4.filter(function(e){return e!==m})}function F(t){if(!tF.isTouch||!p&&"mousedown"!==t.type){var n=t.composedPath&&t.composedPath()[0]||t.target;if(!(b.props.interactive&&tO(j,n))){if(tb(b.props.triggerTarget||e).some(function(e){return tO(e,n)})){if(tF.isTouch||b.state.isVisible&&b.props.trigger.indexOf("click")>=0)return}else P("onClickOutside",[b,t]);!0===b.props.hideOnClick&&(b.clearDelayTimeouts(),b.hide(),d=!0,setTimeout(function(){d=!1}),b.state.isMounted||H())}}}function V(){p=!0}function B(){p=!1}function z(){var e=D();e.addEventListener("mousedown",F,!0),e.addEventListener("touchend",F,th),e.addEventListener("touchstart",B,th),e.addEventListener("touchmove",V,th)}function H(){var e=D();e.removeEventListener("mousedown",F,!0),e.removeEventListener("touchend",F,th),e.removeEventListener("touchstart",B,th),e.removeEventListener("touchmove",V,th)}function U(e,t){W(e,function(){!b.state.isVisible&&j.parentNode&&j.parentNode.contains(j)&&t()})}function q(e,t){W(e,t)}function W(e,t){var n=T().box;function r(e){e.target===n&&(t_(n,"remove",r),t())}if(0===e)return t();t_(n,"remove",o),t_(n,"add",r),o=r}function Z(t,n,r){void 0===r&&(r=!1),tb(b.props.triggerTarget||e).forEach(function(e){e.addEventListener(t,n,r),f.push({node:e,eventType:t,handler:n,options:r})})}function G(){E()&&(Z("touchstart",X,{passive:!0}),Z("touchend",Y,{passive:!0})),ty(b.props.trigger).forEach(function(e){if("manual"!==e)switch(Z(e,X),e){case"mouseenter":Z("mouseleave",Y);break;case"focus":Z(tq?"focusout":"blur",J);break;case"focusin":Z("focusout",J)}})}function K(){f.forEach(function(e){var t=e.node,n=e.eventType,r=e.handler,i=e.options;t.removeEventListener(n,r,i)}),f=[]}function X(e){var t,n=!1;if(!(!b.state.isEnabled||Q(e))&&!d){var r=(null==(t=a)?void 0:t.type)==="focus";a=e,l=e.currentTarget,_(),!b.state.isVisible&&tI(e)&&t4.forEach(function(t){return t(e)}),"click"===e.type&&(0>b.props.trigger.indexOf("mouseenter")||u)&&!1!==b.props.hideOnClick&&b.state.isVisible?n=!0:ei(e),"click"===e.type&&(u=!n),n&&!r&&ea(e)}}function $(e){var t=e.target,n=I().contains(t)||j.contains(t);if("mousemove"!==e.type||!n){var r=er().concat(j).map(function(e){var t,n=null==(t=e._tippy.popperInstance)?void 0:t.state;return n?{popperRect:e.getBoundingClientRect(),popperState:n,props:c}:null}).filter(Boolean);tR(r,e)&&(O(),ea(e))}}function Y(e){if(!(Q(e)||b.props.trigger.indexOf("click")>=0&&u)){if(b.props.interactive)return void b.hideWithInteractivity(e);ea(e)}}function J(e){(!(0>b.props.trigger.indexOf("focusin"))||e.target===I())&&(b.props.interactive&&e.relatedTarget&&j.contains(e.relatedTarget)||ea(e))}function Q(e){return!!tF.isTouch&&E()!==e.type.indexOf("touch")>=0}function ee(){et();var t=b.props,n=t.popperOptions,r=t.placement,i=t.offset,a=t.getReferenceClientRect,o=t.moveTransition,l=M()?t1(j).arrow:null,c=a?{getBoundingClientRect:a,contextElement:a.contextElement||I()}:e,u=[{name:"offset",options:{offset:i}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!o}},{name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(e){var t=e.state;if(M()){var n=T().box;["placement","reference-hidden","escaped"].forEach(function(e){"placement"===e?n.setAttribute("data-placement",t.placement):t.attributes.popper["data-popper-"+e]?n.setAttribute("data-"+e,""):n.removeAttribute("data-"+e)}),t.attributes.popper={}}}}];M()&&l&&u.push({name:"arrow",options:{element:l,padding:3}}),u.push.apply(u,(null==n?void 0:n.modifiers)||[]),b.popperInstance=ts(c,j,Object.assign({},n,{placement:r,onFirstUpdate:s,modifiers:u}))}function et(){b.popperInstance&&(b.popperInstance.destroy(),b.popperInstance=null)}function en(){var e,t=b.props.appendTo,n=I();(e=b.props.interactive&&t===tf||"parent"===t?n.parentNode:tv(t,[n])).contains(j)||e.appendChild(j),b.state.isMounted=!0,ee()}function er(){return tk(j.querySelectorAll("[data-tippy-root]"))}function ei(e){b.clearDelayTimeouts(),e&&P("onTrigger",[b,e]),z();var t=A(!0),r=N(),i=r[0],a=r[1];tF.isTouch&&"hold"===i&&a&&(t=a),t?n=setTimeout(function(){b.show()},t):b.show()}function ea(e){if(b.clearDelayTimeouts(),P("onUntrigger",[b,e]),!b.state.isVisible)return void H();if(!(b.props.trigger.indexOf("mouseenter")>=0&&b.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(e.type)>=0)||!u){var t=A(!1);t?r=setTimeout(function(){b.state.isVisible&&b.hide()},t):i=requestAnimationFrame(function(){b.hide()})}}function eo(){b.state.isEnabled=!0}function es(){b.hide(),b.state.isEnabled=!1}function el(){clearTimeout(n),clearTimeout(r),cancelAnimationFrame(i)}function ec(t){if(!b.state.isDestroyed){P("onBeforeUpdate",[b,t]),K();var n=b.props,r=t$(e,Object.assign({},n,tS(t),{ignoreAttributes:!0}));b.props=r,G(),n.interactiveDebounce!==r.interactiveDebounce&&(O(),m=tx($,r.interactiveDebounce)),n.triggerTarget&&!r.triggerTarget?tb(n.triggerTarget).forEach(function(e){e.removeAttribute("aria-expanded")}):r.triggerTarget&&e.removeAttribute("aria-expanded"),_(),L(),C&&C(n,r),b.popperInstance&&(ee(),er().forEach(function(e){requestAnimationFrame(e._tippy.popperInstance.forceUpdate)})),P("onAfterUpdate",[b,t])}}function eu(e){b.setProps({content:e})}function ed(){var e=b.state.isVisible,t=b.state.isDestroyed,n=!b.state.isEnabled,r=tF.isTouch&&!b.props.touch,i=tm(b.props.duration,0,tW.duration);if(!(e||t||n||r||I().hasAttribute("disabled"))&&(P("onShow",[b],!1),!1!==b.props.onShow(b))){if(b.state.isVisible=!0,M()&&(j.style.visibility="visible"),L(),z(),b.state.isMounted||(j.style.transition="none"),M()){var a=T();tA([a.box,a.content],0)}s=function(){var e;if(b.state.isVisible&&!h){if(h=!0,j.offsetHeight,j.style.transition=b.props.moveTransition,M()&&b.props.animation){var t=T(),n=t.box,r=t.content;tA([n,r],i),tL([n,r],"visible")}R(),_(),tw(t3,b),null==(e=b.popperInstance)||e.forceUpdate(),P("onMount",[b]),b.props.animation&&M()&&q(i,function(){b.state.isShown=!0,P("onShown",[b])})}},en()}}function ep(){var e=!b.state.isVisible,t=b.state.isDestroyed,n=!b.state.isEnabled,r=tm(b.props.duration,1,tW.duration);if(!e&&!t&&!n&&(P("onHide",[b],!1),!1!==b.props.onHide(b))){if(b.state.isVisible=!1,b.state.isShown=!1,h=!1,u=!1,M()&&(j.style.visibility="hidden"),O(),H(),L(!0),M()){var i=T(),a=i.box,o=i.content;b.props.animation&&(tA([a,o],r),tL([a,o],"hidden"))}R(),_(),b.props.animation?M()&&U(r,b.unmount):b.unmount()}}function eh(e){D().addEventListener("mousemove",m),tw(t4,m),m(e)}function ef(){b.state.isVisible&&b.hide(),b.state.isMounted&&(et(),er().forEach(function(e){e._tippy.unmount()}),j.parentNode&&j.parentNode.removeChild(j),t3=t3.filter(function(e){return e!==b}),b.state.isMounted=!1,P("onHidden",[b]))}function em(){b.state.isDestroyed||(b.clearDelayTimeouts(),b.unmount(),K(),delete e._tippy,b.state.isDestroyed=!0,P("onDestroy",[b]))}}function t9(e,t){void 0===t&&(t={});var n=tW.plugins.concat(t.plugins||[]);tU();var r=Object.assign({},t,{plugins:n}),i=tT(e).reduce(function(e,t){var n=t&&t7(t,r);return n&&e.push(n),e},[]);return tE(e)?i[0]:i}t9.defaultProps=tW,t9.setDefaultProps=tG,t9.currentInput=tF,Object.assign({},e5,{effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow)}}),t9.setDefaultProps({render:t2});let t6=t9;class t8{createTooltip(){let{element:e}=this.editor.options,t=!!e.parentElement;!this.tippy&&t&&(this.tippy=t6(e,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(e,t){let{state:n}=e,r=n.selection.from!==n.selection.to;if(this.updateDelay>0&&r)return void this.handleDebouncedUpdate(e,t);let i=!(null==t?void 0:t.selection.eq(e.state.selection)),a=!(null==t?void 0:t.doc.eq(e.state.doc));this.updateHandler(e,i,a,t)}show(){var e;null==(e=this.tippy)||e.show()}hide(){var e;null==(e=this.tippy)||e.hide()}destroy(){var e,t;(null==(e=this.tippy)?void 0:e.popper.firstChild)&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),null==(t=this.tippy)||t.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}constructor({editor:e,element:t,view:n,tippyOptions:r={},updateDelay:i=250,shouldShow:a}){this.preventHide=!1,this.shouldShow=e=>{let{view:t,state:n,from:r,to:i}=e,{doc:a,selection:o}=n,{empty:s}=o,l=!a.textBetween(r,i).length&&(0,B.isTextSelection)(n.selection),c=this.element.contains(document.activeElement);return!!(t.hasFocus()||c)&&!s&&!l&&!!this.editor.isEditable},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=e=>{var t;let{event:n}=e;if(this.preventHide){this.preventHide=!1;return}(null==n?void 0:n.relatedTarget)&&(null==(t=this.element.parentNode)?void 0:t.contains(n.relatedTarget))||(null==n?void 0:n.relatedTarget)!==this.editor.view.dom&&this.hide()},this.tippyBlurHandler=e=>{this.blurHandler({event:e})},this.handleDebouncedUpdate=(e,t)=>{let n=!(null==t?void 0:t.selection.eq(e.state.selection)),r=!(null==t?void 0:t.doc.eq(e.state.doc));(n||r)&&(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout(()=>{this.updateHandler(e,n,r,t)},this.updateDelay))},this.updateHandler=(e,t,n,r)=>{var i,a,o;let{state:s,composing:l}=e,{selection:c}=s,u=!t&&!n;if(l||u)return;this.createTooltip();let{ranges:d}=c,p=Math.min(...d.map(e=>e.$from.pos)),h=Math.max(...d.map(e=>e.$to.pos));if(!(null==(i=this.shouldShow)?void 0:i.call(this,{editor:this.editor,element:this.element,view:e,state:s,oldState:r,from:p,to:h})))return void this.hide();null==(a=this.tippy)||a.setProps({getReferenceClientRect:(null==(o=this.tippyOptions)?void 0:o.getReferenceClientRect)||(()=>{if((0,B.isNodeSelection)(s.selection)){let t=e.nodeDOM(p);if(t){let e=t.dataset.nodeViewWrapper?t:t.querySelector("[data-node-view-wrapper]");if(e&&(t=e.firstChild),t)return t.getBoundingClientRect()}}return(0,B.posToDOMRect)(e,p,h)})}),this.show()},this.editor=e,this.element=t,this.view=n,this.updateDelay=i,a&&(this.shouldShow=a),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=r,this.element.remove(),this.element.style.visibility="visible"}}let ne=e=>new z.Plugin({key:"string"==typeof e.pluginKey?new z.PluginKey(e.pluginKey):e.pluginKey,view:t=>new t8({view:t,...e})});B.Extension.create({name:"bubbleMenu",addOptions:()=>({element:null,tippyOptions:{},pluginKey:"bubbleMenu",updateDelay:void 0,shouldShow:null}),addProseMirrorPlugins(){return this.options.element?[ne({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,updateDelay:this.options.updateDelay,shouldShow:this.options.shouldShow})]:[]}});var nt=i,nn=e.i(545858),nr=V,ni=V,na=z;class no{getTextContent(e){return(0,ni.getText)(e,{textSerializers:(0,ni.getTextSerializersFromSchema)(this.editor.schema)})}createTooltip(){let{element:e}=this.editor.options,t=!!e.parentElement;!this.tippy&&t&&(this.tippy=t6(e,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"right",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(e,t){var n,r,i;let{state:a}=e,{doc:o,selection:s}=a,{from:l,to:c}=s;if(!(t&&t.doc.eq(o)&&t.selection.eq(s))){if(this.createTooltip(),!(null==(n=this.shouldShow)?void 0:n.call(this,{editor:this.editor,view:e,state:a,oldState:t})))return void this.hide();null==(r=this.tippy)||r.setProps({getReferenceClientRect:(null==(i=this.tippyOptions)?void 0:i.getReferenceClientRect)||(()=>(0,ni.posToDOMRect)(e,l,c))}),this.show()}}show(){var e;null==(e=this.tippy)||e.show()}hide(){var e;null==(e=this.tippy)||e.hide()}destroy(){var e,t;(null==(e=this.tippy)?void 0:e.popper.firstChild)&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),null==(t=this.tippy)||t.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}constructor({editor:e,element:t,view:n,tippyOptions:r={},shouldShow:i}){this.preventHide=!1,this.shouldShow=e=>{let{view:t,state:n}=e,{selection:r}=n,{$anchor:i,empty:a}=r,o=1===i.depth,s=i.parent.isTextblock&&!i.parent.type.spec.code&&!i.parent.textContent&&0===i.parent.childCount&&!this.getTextContent(i.parent);return!!t.hasFocus()&&!!a&&!!o&&!!s&&!!this.editor.isEditable},this.mousedownHandler=()=>{this.preventHide=!0},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=e=>{var t;let{event:n}=e;if(this.preventHide){this.preventHide=!1;return}(null==n?void 0:n.relatedTarget)&&(null==(t=this.element.parentNode)?void 0:t.contains(n.relatedTarget))||(null==n?void 0:n.relatedTarget)!==this.editor.view.dom&&this.hide()},this.tippyBlurHandler=e=>{this.blurHandler({event:e})},this.editor=e,this.element=t,this.view=n,i&&(this.shouldShow=i),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=r,this.element.remove(),this.element.style.visibility="visible"}}let ns=e=>new na.Plugin({key:"string"==typeof e.pluginKey?new na.PluginKey(e.pluginKey):e.pluginKey,view:t=>new no({view:t,...e})});function nl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}ni.Extension.create({name:"floatingMenu",addOptions:()=>({element:null,tippyOptions:{},pluginKey:"floatingMenu",shouldShow:null}),addProseMirrorPlugins(){return this.options.element?[ns({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,shouldShow:this.options.shouldShow})]:[]}});var nc={exports:{}},nu={};nc.exports=function e(){if(t)return nu;t=1;var e=nt.default;function n(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t}var r="function"==typeof Object.is?Object.is:n,i=e.useState,a=e.useEffect,o=e.useLayoutEffect,s=e.useDebugValue;function l(e,t){var n=t(),r=i({inst:{value:n,getSnapshot:t}}),l=r[0].inst,u=r[1];return o(function(){l.value=n,l.getSnapshot=t,c(l)&&u({inst:l})},[e,n,t]),a(function(){return c(l)&&u({inst:l}),e(function(){c(l)&&u({inst:l})})},[e]),s(n),n}function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!r(e,n)}catch(e){return!0}}function u(e,t){return t()}var d="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?u:l;return nu.useSyncExternalStore=void 0!==e.useSyncExternalStore?e.useSyncExternalStore:d,nu}();var nd=nc.exports;let np=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach(t=>{"function"==typeof t?t(e):t&&(t.current=e)})}},nh=e=>{let{contentComponent:t}=e,n=nd.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return nt.default.createElement(nt.default.Fragment,null,Object.values(n))};function nf(){let e=new Set,t={};return{subscribe:t=>(e.add(t),()=>{e.delete(t)}),getSnapshot:()=>t,getServerSnapshot:()=>t,setRenderer(n,r){t={...t,[n]:nn.default.createPortal(r.reactElement,r.element,n)},e.forEach(e=>e())},removeRenderer(n){let r={...t};delete r[n],t=r,e.forEach(e=>e())}}}class nm extends nt.default.Component{componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){let e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;let t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=nf(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(e=>e.hasContentComponentInitialized?e:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){let e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;let t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}render(){let{editor:e,innerRef:t,...n}=this.props;return nt.default.createElement(nt.default.Fragment,null,nt.default.createElement("div",{ref:np(t,this.editorContentRef),...n}),(null==e?void 0:e.contentComponent)&&nt.default.createElement(nh,{contentComponent:e.contentComponent}))}constructor(e){var t;super(e),this.editorContentRef=nt.default.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(null==(t=e.editor)?void 0:t.contentComponent)}}}let ng=(0,nt.forwardRef)((e,t)=>{let n=nt.default.useMemo(()=>Math.floor(0xffffffff*Math.random()).toString(),[e.editor]);return nt.default.createElement(nm,{key:n,innerRef:t,...e})}),nv=nt.default.memo(ng);var nx=nl(function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!=i--;)if(!e(t[i],n[i]))return!1;return!0}if(t instanceof Map&&n instanceof Map){if(t.size!==n.size)return!1;for(i of t.entries())if(!n.has(i[0]))return!1;for(i of t.entries())if(!e(i[1],n.get(i[0])))return!1;return!0}if(t instanceof Set&&n instanceof Set){if(t.size!==n.size)return!1;for(i of t.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(n)){if((r=t.length)!=n.length)return!1;for(i=r;0!=i--;)if(t[i]!==n[i])return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(a=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,a[i]))return!1;for(i=r;0!=i--;){var r,i,a,o=a[i];if(("_owner"!==o||!t.$$typeof)&&!e(t[o],n[o]))return!1}return!0}return t!=t&&n!=n}),ny={exports:{}},nb={};ny.exports=function e(){if(n)return nb;n=1;var e=nt.default;function t(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t}var r="function"==typeof Object.is?Object.is:t,i=nd.useSyncExternalStore,a=e.useRef,o=e.useEffect,s=e.useMemo,l=e.useDebugValue;return nb.useSyncExternalStoreWithSelector=function(e,t,n,c,u){var d=a(null);if(null===d.current){var p={hasValue:!1,value:null};d.current=p}else p=d.current;var h=i(e,(d=s(function(){function e(e){if(!o){if(o=!0,i=e,e=c(e),void 0!==u&&p.hasValue){var t=p.value;if(u(t,e))return a=t}return a=e}if(t=a,r(i,e))return t;var n=c(e);return void 0!==u&&u(t,n)?t:(i=e,a=n)}var i,a,o=!1,s=void 0===n?null:n;return[function(){return e(t())},null===s?void 0:function(){return e(s())}]},[t,n,c,u]))[0],d[1]);return o(function(){p.hasValue=!0,p.value=h},[h]),l(h),h},nb}();var nw=ny.exports;let nj="undefined"!=typeof window?nt.useLayoutEffect:nt.useEffect;class nC{getSnapshot(){return this.transactionNumber===this.lastTransactionNumber||(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber}),this.lastSnapshot}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){let e=()=>{this.transactionNumber+=1,this.subscribers.forEach(e=>e())},t=this.editor;return t.on("transaction",e),()=>{t.off("transaction",e)}}}constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}}function nk(e){var t;let[n]=(0,nt.useState)(()=>new nC(e.editor)),r=nw.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,e.selector,null!=(t=e.equalityFn)?t:nx);return nj(()=>n.watch(e.editor),[e.editor,n]),(0,nt.useDebugValue)(r),r}let nS="undefined"==typeof window,nN=nS||!!("undefined"!=typeof window&&window.next);class nE{setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(e=>e())}getInitialEditor(){return void 0===this.options.current.immediatelyRender?nS||nN?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender)?this.createEditor():null}createEditor(){var e=this;let t={...this.options.current,onBeforeCreate:function(){for(var t,n,r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return null==(n=(t=e.options.current).onBeforeCreate)?void 0:n.call(t,...i)},onBlur:function(){for(var t,n,r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return null==(n=(t=e.options.current).onBlur)?void 0:n.call(t,...i)},onCreate:function(){for(var t,n,r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return null==(n=(t=e.options.current).onCreate)?void 0:n.call(t,...i)},onDestroy:function(){for(var t,n,r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return null==(n=(t=e.options.current).onDestroy)?void 0:n.call(t,...i)},onFocus:function(){for(var t,n,r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return null==(n=(t=e.options.current).onFocus)?void 0:n.call(t,...i)},onSelectionUpdate:function(){for(var t,n,r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return null==(n=(t=e.options.current).onSelectionUpdate)?void 0:n.call(t,...i)},onTransaction:function(){for(var t,n,r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return null==(n=(t=e.options.current).onTransaction)?void 0:n.call(t,...i)},onUpdate:function(){for(var t,n,r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return null==(n=(t=e.options.current).onUpdate)?void 0:n.call(t,...i)},onContentError:function(){for(var t,n,r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return null==(n=(t=e.options.current).onContentError)?void 0:n.call(t,...i)},onDrop:function(){for(var t,n,r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return null==(n=(t=e.options.current).onDrop)?void 0:n.call(t,...i)},onPaste:function(){for(var t,n,r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return null==(n=(t=e.options.current).onPaste)?void 0:n.call(t,...i)}};return new nr.Editor(t)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,t){return Object.keys(e).every(n=>!!["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(n)||("extensions"===n&&e.extensions&&t.extensions?e.extensions.length===t.extensions.length&&e.extensions.every((e,n)=>{var r;return e===(null==(r=t.extensions)?void 0:r[n])}):e[n]===t[n]))}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&0===e.length?nE.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(null===this.previousDeps){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((t,n)=>t===e[n]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){let e=this.instanceId,t=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){t&&t.setOptions(this.options.current);return}t&&!t.isDestroyed&&(t.destroy(),this.instanceId===e&&this.setEditor(null))},1)}constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}}function nM(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=(0,nt.useRef)(e);n.current=e;let[r]=(0,nt.useState)(()=>new nE(n)),i=nd.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return(0,nt.useDebugValue)(i),(0,nt.useEffect)(r.onRender(t)),nk({editor:i,selector:t=>{let{transactionNumber:n}=t;return!1===e.shouldRerenderOnTransaction?null:e.immediatelyRender&&0===n?0:n+1}}),i}(0,nt.createContext)({editor:null}).Consumer;let nI=(0,nt.createContext)({onDragStart:void 0}),nD=()=>(0,nt.useContext)(nI),nT=nt.default.forwardRef((e,t)=>{let{onDragStart:n}=nD(),r=e.as||"div";return nt.default.createElement(r,{...e,ref:t,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...e.style}})});function nA(e){return!!("function"==typeof e&&e.prototype&&e.prototype.isReactComponent)}function nL(e){var t;return"object"==typeof e&&(null==(t=e.$$typeof)?void 0:t.toString())==="Symbol(react.forward_ref)"}class nP{render(){var e;let t=this.component,n=this.props,r=this.editor;(nA(t)||nL(t))&&(n.ref=e=>{this.ref=e}),this.reactElement=nt.default.createElement(t,{...n}),null==(e=null==r?void 0:r.contentComponent)||e.setRenderer(this.id,this)}updateProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.props={...this.props,...e},this.render()}destroy(){var e;let t=this.editor;null==(e=null==t?void 0:t.contentComponent)||e.removeRenderer(this.id)}updateAttributes(e){Object.keys(e).forEach(t=>{this.element.setAttribute(t,e[t])})}constructor(e,{editor:t,props:n={},as:r="div",className:i=""}){this.ref=null,this.id=Math.floor(0xffffffff*Math.random()).toString(),this.component=e,this.editor=t,this.props=n,this.element=document.createElement(r),this.element.classList.add("react-renderer"),i&&this.element.classList.add(...i.split(" ")),this.editor.isInitialized?(0,nn.flushSync)(()=>{this.render()}):this.render()}}class nR extends nr.NodeView{mount(){var e=this;let t={editor:this.editor,node:this.node,decorations:this.decorations,innerDecorations:this.innerDecorations,view:this.view,selected:!1,extension:this.extension,HTMLAttributes:this.HTMLAttributes,getPos:()=>this.getPos(),updateAttributes:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.updateAttributes(t)},deleteNode:()=>this.deleteNode()};if(!this.component.displayName){let e=e=>e.charAt(0).toUpperCase()+e.substring(1);this.component.displayName=e(this.extension.name)}let n={onDragStart:this.onDragStart.bind(this),nodeViewContentRef:e=>{e&&this.contentDOMElement&&e.firstChild!==this.contentDOMElement&&e.appendChild(this.contentDOMElement)}},r=this.component,i=nt.default.memo(e=>nt.default.createElement(nI.Provider,{value:n},nt.default.createElement(r,e)));i.displayName="ReactNodeView",this.node.isLeaf?this.contentDOMElement=null:this.options.contentDOMElementTag?this.contentDOMElement=document.createElement(this.options.contentDOMElementTag):this.contentDOMElement=document.createElement(this.node.isInline?"span":"div"),this.contentDOMElement&&(this.contentDOMElement.dataset.nodeViewContentReact="",this.contentDOMElement.style.whiteSpace="inherit");let a=this.node.isInline?"span":"div";this.options.as&&(a=this.options.as);let{className:o=""}=this.options;this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.renderer=new nP(i,{editor:this.editor,props:t,as:a,className:"node-".concat(this.node.type.name," ").concat(o).trim()}),this.editor.on("selectionUpdate",this.handleSelectionUpdate),this.updateElementAttributes()}get dom(){var e;if(this.renderer.element.firstElementChild&&!(null==(e=this.renderer.element.firstElementChild)?void 0:e.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.contentDOMElement}handleSelectionUpdate(){let{from:e,to:t}=this.editor.state.selection,n=this.getPos();if("number"==typeof n)if(e<=n&&t>=n+this.node.nodeSize){if(this.renderer.props.selected)return;this.selectNode()}else{if(!this.renderer.props.selected)return;this.deselectNode()}}update(e,t,n){let r=e=>{this.renderer.updateProps(e),"function"==typeof this.options.attrs&&this.updateElementAttributes()};if(e.type!==this.node.type)return!1;if("function"==typeof this.options.update){let i=this.node,a=this.decorations,o=this.innerDecorations;return this.node=e,this.decorations=t,this.innerDecorations=n,this.options.update({oldNode:i,oldDecorations:a,newNode:e,newDecorations:t,oldInnerDecorations:o,innerDecorations:n,updateProps:()=>r({node:e,decorations:t,innerDecorations:n})})}return e===this.node&&this.decorations===t&&this.innerDecorations===n||(this.node=e,this.decorations=t,this.innerDecorations=n,r({node:e,decorations:t,innerDecorations:n}),!0)}selectNode(){this.renderer.updateProps({selected:!0}),this.renderer.element.classList.add("ProseMirror-selectednode")}deselectNode(){this.renderer.updateProps({selected:!1}),this.renderer.element.classList.remove("ProseMirror-selectednode")}destroy(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate),this.contentDOMElement=null}updateElementAttributes(){if(this.options.attrs){let e={};if("function"==typeof this.options.attrs){let t=this.editor.extensionManager.attributes,n=(0,nr.getRenderedAttributes)(this.node,t);e=this.options.attrs({node:this.node,HTMLAttributes:n})}else e=this.options.attrs;this.renderer.updateAttributes(e)}}}function n_(e,t){return n=>n.editor.contentComponent?new nR(e,n,t):{}}e.s(["EditorContent",()=>nv,"NodeViewWrapper",()=>nT,"ReactNodeViewRenderer",()=>n_,"useEditor",()=>nM],987307);var nO=e.i(73687),nF=r,nV=g;function nB(e){let{children:t,className:n,onClick:r,mono:i,rounded:a,...o}=e;return(0,nF.jsxs)("span",{"data-context-mention":"true",className:(0,nV.cn)("inline-flex px-1 relative text-[13px] mr-[1px] group",i?"font-mono text-[12px]":"",r?"cursor-pointer":"",n),onClick:r,...o,children:[(0,nF.jsx)("span",{className:(0,nV.cn)("absolute inset-y-[-0.5px] inset-x-0 bg-gray-100 z-0 transition-colors",r?"group-hover:bg-gray-200":"",a?"rounded-full":"rounded-[4px]")}),(0,nF.jsx)("span",{className:"relative z-10",children:t})]})}e.s(["ContextInlinePill",()=>nB],222348);var nz=i,nH=e.i(718755);function nU(e){let{type:t,data:n}=e,{value:r}=n,{getOpenFileHandler:i}=(0,nH.useOpenFileInActiveBlock)(),a=(0,nz.useMemo)(()=>{switch(t){case"file":return i(r);case"url":return()=>{window.open(r,"_blank","noopener,noreferrer")};case"directory":return;default:return t}},[t,r,i]);return(0,F.jsxs)(nB,{onClick:a,children:["@",n.title]})}function nq(e){let t=e.node.attrs;return(0,F.jsx)(nT,{as:"span",children:(0,F.jsx)(nU,{...t})})}let nW=V.Node.create({name:nO.MENTION_MENU_ITEM_TYPE,group:"inline",inline:!0,selectable:!1,atom:!0,addAttributes:()=>({data:{default:null},type:{default:null}}),parseHTML:()=>[{tag:'span[data-type="'.concat(nO.MENTION_MENU_ITEM_TYPE,'"]')}],renderHTML(e){let{HTMLAttributes:t}=e;return["span",{"data-type":nO.MENTION_MENU_ITEM_TYPE,...t}]},addNodeView:()=>n_(nq,{as:"span"})});function nZ(e){try{let t=JSON.stringify(e),n=new TextEncoder().encode(t);return btoa(String.fromCharCode(...n))}catch(e){return console.error("Error encoding object to base64",e),null}}function nG(e){try{let t=atob(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);let r=new TextDecoder().decode(n);return JSON.parse(r)}catch(e){return console.error("Error decoding base64 string",e),null}}e.s(["safeBase64Decode",()=>nG,"safeBase64Encode",()=>nZ],730191);let nK=1e4,nX="v0MessageContentPart:",n$=(0,b.default)(y.default),nY=k.default.memo(function(e){var t;let{children:n,...r}=e;return n.length>nK?(0,v.jsx)("p",{children:n}):(0,v.jsx)(n$,{allowedLinkPrefixes:w.allowedLinkPrefixes,allowedImagePrefixes:w.allowedImagePrefixes,defaultOrigin:w.defaultOrigin,remarkPlugins:[E.remarkColor],...r,components:{pre:e=>(0,v.jsx)("pre",{...e,className:"bg-background border-alpha-400 text-foreground rounded-lg border px-2 py-[0.3rem] font-mono text-xs font-normal [&_code]:border-none [&_code]:bg-transparent"}),code:e=>{let{children:t,...n}=e;if("string"==typeof t&&(0,E.isColorCode)(t))return(0,v.jsx)(E.ColorCode,{value:t});if("string"==typeof t&&t.startsWith(nX)){let e=t.slice(nX.length);try{let t=nG(e),n=M.UserMessageContentRichPart.parse(t);return(0,v.jsx)(R,{data:n,components:{MentionInlineNode:nU}})}catch(e){return(0,v.jsx)("div",{children:"ERROR"})}}return(0,v.jsx)("code",{...n,className:"rounded-[0.375rem] border bg-gray-100 font-mono text-xs font-normal before:hidden after:hidden",children:t})},...null!=(t=r.components)?t:{}},children:n})});function nJ(e){let{content:t}=e,n="";for(let e of t.parts){if("mdx"===e.type){n+=e.content;continue}let t=nZ(e);n+="`".concat(nX).concat(t,"`")}return(0,v.jsx)(nY,{children:n})}function nQ(e){var t;let{message:n,className:r,isLastMessage:i=!1}=e,a=(0,x.getUIMessageKey)(n);return"parts"===n.content.type?(0,v.jsx)(C.Prose,{className:(0,S.cn)("w-full",r),children:(0,v.jsx)(nJ,{content:n.content})},a):(0,N.isMessageEmpty)(n)?null:(0,v.jsx)("div",{className:(0,S.cn)("flex-1 text-sm",r),children:(0,v.jsx)(j.Renderer,{isLastMessage:i,messageId:a,role:n.role,rows:null!=(t=n.content.value)?t:[],streaming:n.streaming})},a)}var n0=e.i(845210),n1=e.i(470284),n2=e.i(897802),n5=e.i(346863),n4=e.i(393978);let n3="phrasing",n7=["autolink","link","image","label"];function n9(){return{transforms:[ra],enter:{literalAutolink:n8,literalAutolinkEmail:re,literalAutolinkHttp:re,literalAutolinkWww:re},exit:{literalAutolink:ri,literalAutolinkEmail:rr,literalAutolinkHttp:rt,literalAutolinkWww:rn}}}function n6(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:n3,notInConstruct:n7},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:n3,notInConstruct:n7},{character:":",before:"[ps]",after:"\\/",inConstruct:n3,notInConstruct:n7}]}}function n8(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function re(e){this.config.enter.autolinkProtocol.call(this,e)}function rt(e){this.config.exit.autolinkProtocol.call(this,e)}function rn(e){this.config.exit.data.call(this,e);let t=this.stack[this.stack.length-1];(0,n2.ok)("link"===t.type),t.url="http://"+this.sliceSerialize(e)}function rr(e){this.config.exit.autolinkEmail.call(this,e)}function ri(e){this.exit(e)}function ra(e){(0,n4.findAndReplace)(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,ro],[/([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/g,rs]],{ignore:["link","linkReference"]})}function ro(e,t,n,r,i){let a="";if(!ru(i)||(/^w/i.test(t)&&(n=t+n,t="",a="http://"),!rl(n)))return!1;let o=rc(n+r);if(!o[0])return!1;let s={type:"link",title:null,url:a+t+o[0],children:[{type:"text",value:t+o[0]}]};return o[1]?[s,{type:"text",value:o[1]}]:s}function rs(e,t,n,r){return!(!ru(r,!0)||/[-\d_]$/.test(n))&&{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function rl(e){let t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function rc(e){let t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")"),i=(0,n1.ccount)(e,"("),a=(0,n1.ccount)(e,")");for(;-1!==r&&i>a;)e+=n.slice(0,r+1),r=(n=n.slice(r+1)).indexOf(")"),a++;return[e,n]}function ru(e,t){let n=e.input.charCodeAt(e.index-1);return(0===e.index||(0,n5.unicodeWhitespace)(n)||(0,n5.unicodePunctuation)(n))&&(!t||47!==n)}var rd=n2,rp=e.i(820667);function rh(){return{enter:{gfmFootnoteDefinition:rm,gfmFootnoteDefinitionLabelString:rg,gfmFootnoteCall:ry,gfmFootnoteCallString:rb},exit:{gfmFootnoteDefinition:rx,gfmFootnoteDefinitionLabelString:rv,gfmFootnoteCall:rj,gfmFootnoteCallString:rw}}}function rf(){return{unsafe:[{character:"[",inConstruct:["phrasing","label","reference"]}],handlers:{footnoteDefinition:rk,footnoteReference:rC}}}function rm(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function rg(){this.buffer()}function rv(e){let t=this.resume(),n=this.stack[this.stack.length-1];(0,rd.ok)("footnoteDefinition"===n.type),n.label=t,n.identifier=(0,rp.normalizeIdentifier)(this.sliceSerialize(e)).toLowerCase()}function rx(e){this.exit(e)}function ry(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function rb(){this.buffer()}function rw(e){let t=this.resume(),n=this.stack[this.stack.length-1];(0,rd.ok)("footnoteReference"===n.type),n.label=t,n.identifier=(0,rp.normalizeIdentifier)(this.sliceSerialize(e)).toLowerCase()}function rj(e){this.exit(e)}function rC(e,t,n,r){let i=n.createTracker(r),a=i.move("[^"),o=n.enter("footnoteReference"),s=n.enter("reference");return a+=i.move(n.safe(n.associationId(e),{...i.current(),before:a,after:"]"})),s(),o(),a+=i.move("]")}function rk(e,t,n,r){let i=n.createTracker(r),a=i.move("[^"),o=n.enter("footnoteDefinition"),s=n.enter("label");return a+=i.move(n.safe(n.associationId(e),{...i.current(),before:a,after:"]"})),s(),a+=i.move("]:"+(e.children&&e.children.length>0?" ":"")),i.shift(4),a+=i.move(n.indentLines(n.containerFlow(e,i.current()),rS)),o(),a}function rS(e,t,n){return 0===t?e:(n?"":"    ")+e}rC.peek=function e(){return"["};let rN=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];function rE(){return{canContainEols:["delete"],enter:{strikethrough:rI},exit:{strikethrough:rD}}}function rM(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:rN}],handlers:{delete:rT}}}function rI(e){this.enter({type:"delete",children:[]},e)}function rD(e){this.exit(e)}function rT(e,t,n,r){let i=n.createTracker(r),a=n.enter("strikethrough"),o=i.move("~~");return o+=n.containerPhrasing(e,{...i.current(),before:o,after:"~"}),o+=i.move("~~"),a(),o}rT.peek=function e(){return"~"};var rA=n2;function rL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(t.align||[]).concat(),r=t.stringLength||rR,i=[],a=[],o=[],s=[],l=0,c=-1;for(;++c<e.length;){let n=[],i=[],u=-1;for(e[c].length>l&&(l=e[c].length);++u<e[c].length;){let a=rP(e[c][u]);if(!1!==t.alignDelimiters){let e=r(a);i[u]=e,(void 0===s[u]||e>s[u])&&(s[u]=e)}n.push(a)}a[c]=n,o[c]=i}let u=-1;if("object"==typeof n&&"length"in n)for(;++u<l;)i[u]=r_(n[u]);else{let e=r_(n);for(;++u<l;)i[u]=e}u=-1;let d=[],p=[];for(;++u<l;){let e=i[u],n="",r="";99===e?(n=":",r=":"):108===e?n=":":114===e&&(r=":");let a=!1===t.alignDelimiters?1:Math.max(1,s[u]-n.length-r.length),o=n+"-".repeat(a)+r;!1!==t.alignDelimiters&&((a=n.length+a+r.length)>s[u]&&(s[u]=a),p[u]=a),d[u]=o}a.splice(1,0,d),o.splice(1,0,p),c=-1;let h=[];for(;++c<a.length;){let e=a[c],n=o[c];u=-1;let r=[];for(;++u<l;){let a=e[u]||"",o="",c="";if(!1!==t.alignDelimiters){let e=s[u]-(n[u]||0),t=i[u];114===t?o=" ".repeat(e):99===t?e%2?(o=" ".repeat(e/2+.5),c=" ".repeat(e/2-.5)):c=o=" ".repeat(e/2):c=" ".repeat(e)}!1===t.delimiterStart||u||r.push("|"),!1!==t.padding&&(!1!==t.alignDelimiters||""!==a)&&(!1!==t.delimiterStart||u)&&r.push(" "),!1!==t.alignDelimiters&&r.push(o),r.push(a),!1!==t.alignDelimiters&&r.push(c),!1!==t.padding&&r.push(" "),(!1!==t.delimiterEnd||u!==l-1)&&r.push("|")}h.push(!1===t.delimiterEnd?r.join("").replace(/ +$/,""):r.join(""))}return h.join("\n")}function rP(e){return null==e?"":String(e)}function rR(e){return e.length}function r_(e){let t="string"==typeof e?e.codePointAt(0):0;return 67===t||99===t?99:76===t||108===t?108:114*(82===t||114===t)}function rO(e,t){let n=String(e),r=n.indexOf(t),i=r,a=0,o=0;if("string"!=typeof t)throw TypeError("Expected substring");for(;-1!==r;)r===i?++a>o&&(o=a):a=1,i=r+t.length,r=n.indexOf(t,i);return o}function rF(e){let t=e.options.quote||'"';if('"'!==t&&"'"!==t)throw Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function rV(e){let t=e.options.emphasis||"*";if("*"!==t&&"_"!==t)throw Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function rB(e,t,n){return n.options.emphasis||"*"}(function e(e,t,n,r){let i=rV(n),a=n.enter("emphasis"),o=n.createTracker(r),s=o.move(i);return s+=o.move(n.containerPhrasing(e,{before:s,after:i,...o.current()})),s+=o.move(i),a(),s}).peek=rB;var rz=e.i(939049),rH=e.i(446207),rU=e.i(12105);function rq(){return"<"}function rW(e,t,n,r){let i=rF(n),a='"'===i?"Quote":"Apostrophe",o=n.enter("image"),s=n.enter("label"),l=n.createTracker(r),c=l.move("![");return c+=l.move(n.safe(e.alt,{before:c,after:"]",...l.current()})),c+=l.move("]("),s(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(s=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(e.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(s=n.enter("destinationRaw"),c+=l.move(n.safe(e.url,{before:c,after:e.title?" ":")",...l.current()}))),s(),e.title&&(s=n.enter("title".concat(a)),c+=l.move(" "+i),c+=l.move(n.safe(e.title,{before:c,after:i,...l.current()})),c+=l.move(i),s()),c+=l.move(")"),o(),c}function rZ(){return"!"}function rG(e,t,n,r){let i=e.referenceType,a=n.enter("imageReference"),o=n.enter("label"),s=n.createTracker(r),l=s.move("!["),c=n.safe(e.alt,{before:l,after:"]",...s.current()});l+=s.move(c+"]["),o();let u=n.stack;n.stack=[],o=n.enter("reference");let d=n.safe(n.associationId(e),{before:l,after:"]",...s.current()});return o(),n.stack=u,a(),"full"!==i&&c&&c===d?"shortcut"===i?l=l.slice(0,-1):l+=s.move("]"):l+=s.move(d+"]"),l}function rK(){return"!"}function rX(e,t,n){let r=e.value||"",i="`",a=-1;for(;RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++a<n.unsafe.length;){let e,t=n.unsafe[a],i=n.compilePattern(t);if(t.atBreak)for(;e=i.exec(r);){let t=e.index;10===r.charCodeAt(t)&&13===r.charCodeAt(t-1)&&t--,r=r.slice(0,t)+" "+r.slice(e.index+1)}}return i+r+i}function r$(){return"`"}(function e(e){return e.value||""}).peek=rq,rW.peek=rZ,rG.peek=rK,rX.peek=r$;var rY=rU;function rJ(e,t){let n=(0,rY.toString)(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&1===e.children.length&&"text"===e.children[0].type&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}function rQ(e,t,n,r){let i,a,o=rF(n),s='"'===o?"Quote":"Apostrophe",l=n.createTracker(r);if(rJ(e,n)){let t=n.stack;n.stack=[],i=n.enter("autolink");let r=l.move("<");return r+=l.move(n.containerPhrasing(e,{before:r,after:">",...l.current()})),r+=l.move(">"),i(),n.stack=t,r}i=n.enter("link"),a=n.enter("label");let c=l.move("[");return c+=l.move(n.containerPhrasing(e,{before:c,after:"](",...l.current()})),c+=l.move("]("),a(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(a=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(e.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=n.enter("destinationRaw"),c+=l.move(n.safe(e.url,{before:c,after:e.title?" ":")",...l.current()}))),a(),e.title&&(a=n.enter("title".concat(s)),c+=l.move(" "+o),c+=l.move(n.safe(e.title,{before:c,after:o,...l.current()})),c+=l.move(o),a()),c+=l.move(")"),i(),c}function r0(e,t,n){return rJ(e,n)?"<":"["}function r1(e,t,n,r){let i=e.referenceType,a=n.enter("linkReference"),o=n.enter("label"),s=n.createTracker(r),l=s.move("["),c=n.containerPhrasing(e,{before:l,after:"]",...s.current()});l+=s.move(c+"]["),o();let u=n.stack;n.stack=[],o=n.enter("reference");let d=n.safe(n.associationId(e),{before:l,after:"]",...s.current()});return o(),n.stack=u,a(),"full"!==i&&c&&c===d?"shortcut"===i?l=l.slice(0,-1):l+=s.move("]"):l+=s.move(d+"]"),l}function r2(){return"["}function r5(e){let t=e.options.bullet||"*";if("*"!==t&&"+"!==t&&"-"!==t)throw Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function r4(e){let t=e.options.listItemIndent||"one";if("tab"!==t&&"one"!==t&&"mixed"!==t)throw Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function r3(e,t,n,r){let i=r4(n),a=n.bulletCurrent||r5(n);t&&"list"===t.type&&t.ordered&&(a=("number"==typeof t.start&&t.start>-1?t.start:1)+(!1===n.options.incrementListMarker?0:t.children.indexOf(e))+a);let o=a.length+1;("tab"===i||"mixed"===i&&(t&&"list"===t.type&&t.spread||e.spread))&&(o=4*Math.ceil(o/4));let s=n.createTracker(r);s.move(a+" ".repeat(o-a.length)),s.shift(o);let l=n.enter("listItem"),c=n.indentLines(n.containerFlow(e,s.current()),u);return l(),c;function u(e,t,n){return t?(n?"":" ".repeat(o))+e:(n?a:a+" ".repeat(o-a.length))+e}}rQ.peek=r0,r1.peek=r2;(0,e.i(249548).convert)(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function r7(e){let t=e.options.strong||"*";if("*"!==t&&"_"!==t)throw Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}function r9(e,t,n,r){let i=r7(n),a=n.enter("strong"),o=n.createTracker(r),s=o.move(i+i);return s+=o.move(n.containerPhrasing(e,{before:s,after:i,...o.current()})),s+=o.move(i+i),a(),s}function r6(e,t,n){return n.options.strong||"*"}r9.peek=r6;let r8={inlineCode:rX,listItem:r3};function ie(){return{enter:{table:it,tableData:io,tableHeader:io,tableRow:ii},exit:{codeText:is,table:ir,tableData:ia,tableHeader:ia,tableRow:ia}}}function it(e){let t=e._align;(0,rA.ok)(t,"expected `_align` on table"),this.enter({type:"table",align:t.map(function(e){return"none"===e?null:e}),children:[]},e),this.data.inTable=!0}function ir(e){this.exit(e),this.data.inTable=void 0}function ii(e){this.enter({type:"tableRow",children:[]},e)}function ia(e){this.exit(e)}function io(e){this.enter({type:"tableCell",children:[]},e)}function is(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,il));let n=this.stack[this.stack.length-1];(0,rA.ok)("inlineCode"===n.type),n.value=t,this.exit(e)}function il(e,t){return"|"===t?t:e}function ic(e){let t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,i=t.stringLength,a=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:"\n",inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:p,table:o,tableCell:l,tableRow:s}};function o(e,t,n,r){return c(u(e,n,r),e.align)}function s(e,t,n,r){let i=c([d(e,n,r)]);return i.slice(0,i.indexOf("\n"))}function l(e,t,n,r){let i=n.enter("tableCell"),o=n.enter("phrasing"),s=n.containerPhrasing(e,{...r,before:a,after:a});return o(),i(),s}function c(e,t){return rL(e,{align:t,alignDelimiters:r,padding:n,stringLength:i})}function u(e,t,n){let r=e.children,i=-1,a=[],o=t.enter("table");for(;++i<r.length;)a[i]=d(r[i],t,n);return o(),a}function d(e,t,n){let r=e.children,i=-1,a=[],o=t.enter("tableRow");for(;++i<r.length;)a[i]=l(r[i],e,t,n);return o(),a}function p(e,t,n){let r=r8.inlineCode(e,t,n);return n.stack.includes("tableCell")&&(r=r.replace(/\|/g,"\\$&")),r}}var iu=n2;function id(){return{exit:{taskListCheckValueChecked:ih,taskListCheckValueUnchecked:ih,paragraph:im}}}function ip(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:ig}}}function ih(e){let t=this.stack[this.stack.length-2];(0,iu.ok)("listItem"===t.type),t.checked="taskListCheckValueChecked"===e.type}function im(e){let t=this.stack[this.stack.length-2];if(t&&"listItem"===t.type&&"boolean"==typeof t.checked){let e=this.stack[this.stack.length-1];(0,iu.ok)("paragraph"===e.type);let n=e.children[0];if(n&&"text"===n.type){let r,i=t.children,a=-1;for(;++a<i.length;){let e=i[a];if("paragraph"===e.type){r=e;break}}r===e&&(n.value=n.value.slice(1),0===n.value.length?e.children.shift():e.position&&n.position&&"number"==typeof n.position.start.offset&&(n.position.start.column++,n.position.start.offset++,e.position.start=Object.assign({},n.position.start)))}}this.exit(e)}function ig(e,t,n,r){let i=e.children[0],a="boolean"==typeof e.checked&&i&&"paragraph"===i.type,o="["+(e.checked?"x":" ")+"] ",s=n.createTracker(r);a&&s.move(o);let l=r8.listItem(e,t,n,{...r,...s.current()});return a&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,c)),l;function c(e){return e+o}}function iv(){return[n9(),rh(),rE(),ie(),id()]}function ix(e){return{extensions:[n6(),rf(),rM(),ic(e),ip()]}}var iy=e.i(872238),ib=n5;let iw={tokenize:iR,partial:!0},ij={tokenize:i_,partial:!0},iC={tokenize:iO,partial:!0},ik={tokenize:iF,partial:!0},iS={tokenize:iV,partial:!0},iN={name:"wwwAutolink",tokenize:iL,previous:iB},iE={name:"protocolAutolink",tokenize:iP,previous:iz},iM={name:"emailAutolink",tokenize:iA,previous:iH},iI={};function iD(){return{text:iI}}let iT=48;for(;iT<123;)iI[iT]=iM,58==++iT?iT=65:91===iT&&(iT=97);function iA(e,t,n){let r,i,a=this;return o;function o(t){return!iU(t)||!iH.call(a,a.previous)||iq(a.events)?n(t):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),s(t))}function s(t){return iU(t)?(e.consume(t),s):64===t?(e.consume(t),l):n(t)}function l(t){return 46===t?e.check(iS,u,c)(t):45===t||95===t||(0,ib.asciiAlphanumeric)(t)?(i=!0,e.consume(t),l):u(t)}function c(t){return e.consume(t),r=!0,l}function u(o){return i&&r&&(0,ib.asciiAlpha)(a.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(o)):n(o)}}function iL(e,t,n){let r=this;return i;function i(t){return 87!==t&&119!==t||!iB.call(r,r.previous)||iq(r.events)?n(t):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(iw,e.attempt(ij,e.attempt(iC,a),n),n)(t))}function a(n){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(n)}}function iP(e,t,n){let r=this,i="",a=!1;return o;function o(t){return(72===t||104===t)&&iz.call(r,r.previous)&&!iq(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),i+=String.fromCodePoint(t),e.consume(t),s):n(t)}function s(t){if((0,ib.asciiAlpha)(t)&&i.length<5)return i+=String.fromCodePoint(t),e.consume(t),s;if(58===t){let n=i.toLowerCase();if("http"===n||"https"===n)return e.consume(t),l}return n(t)}function l(t){return 47===t?(e.consume(t),a)?c:(a=!0,l):n(t)}function c(t){return null===t||(0,ib.asciiControl)(t)||(0,ib.markdownLineEndingOrSpace)(t)||(0,ib.unicodeWhitespace)(t)||(0,ib.unicodePunctuation)(t)?n(t):e.attempt(ij,e.attempt(iC,u),n)(t)}function u(n){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(n)}}function iR(e,t,n){let r=0;return i;function i(t){return(87===t||119===t)&&r<3?(r++,e.consume(t),i):46===t&&3===r?(e.consume(t),a):n(t)}function a(e){return null===e?n(e):t(e)}}function i_(e,t,n){let r,i,a;return o;function o(t){return 46===t||95===t?e.check(ik,l,s)(t):null===t||(0,ib.markdownLineEndingOrSpace)(t)||(0,ib.unicodeWhitespace)(t)||45!==t&&(0,ib.unicodePunctuation)(t)?l(t):(a=!0,e.consume(t),o)}function s(t){return 95===t?r=!0:(i=r,r=void 0),e.consume(t),o}function l(e){return i||r||!a?n(e):t(e)}}function iO(e,t){let n=0,r=0;return i;function i(o){return 40===o?(n++,e.consume(o),i):41===o&&r<n?a(o):33===o||34===o||38===o||39===o||41===o||42===o||44===o||46===o||58===o||59===o||60===o||63===o||93===o||95===o||126===o?e.check(ik,t,a)(o):null===o||(0,ib.markdownLineEndingOrSpace)(o)||(0,ib.unicodeWhitespace)(o)?t(o):(e.consume(o),i)}function a(t){return 41===t&&r++,e.consume(t),i}}function iF(e,t,n){return r;function r(o){return 33===o||34===o||39===o||41===o||42===o||44===o||46===o||58===o||59===o||63===o||95===o||126===o?(e.consume(o),r):38===o?(e.consume(o),a):93===o?(e.consume(o),i):60===o||null===o||(0,ib.markdownLineEndingOrSpace)(o)||(0,ib.unicodeWhitespace)(o)?t(o):n(o)}function i(e){return null===e||40===e||91===e||(0,ib.markdownLineEndingOrSpace)(e)||(0,ib.unicodeWhitespace)(e)?t(e):r(e)}function a(e){return(0,ib.asciiAlpha)(e)?o(e):n(e)}function o(t){return 59===t?(e.consume(t),r):(0,ib.asciiAlpha)(t)?(e.consume(t),o):n(t)}}function iV(e,t,n){return r;function r(t){return e.consume(t),i}function i(e){return(0,ib.asciiAlphanumeric)(e)?n(e):t(e)}}function iB(e){return null===e||40===e||42===e||95===e||91===e||93===e||126===e||(0,ib.markdownLineEndingOrSpace)(e)}function iz(e){return!(0,ib.asciiAlpha)(e)}function iH(e){return!(47===e||iU(e))}function iU(e){return 43===e||45===e||46===e||95===e||(0,ib.asciiAlphanumeric)(e)}function iq(e){let t=e.length,n=!1;for(;t--;){let r=e[t][1];if(("labelLink"===r.type||"labelImage"===r.type)&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}iI[43]=iM,iI[45]=iM,iI[46]=iM,iI[95]=iM,iI[72]=[iM,iE],iI[104]=[iM,iE],iI[87]=[iM,iN],iI[119]=[iM,iN];e.i(983691);var iW=e.i(434036),iZ=e.i(540795),iG=n5,iK=rp;let iX={tokenize:i5,partial:!0};function i$(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:i0,continuation:{tokenize:i1},exit:i2}},text:{91:{name:"gfmFootnoteCall",tokenize:iQ},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:iY,resolveTo:iJ}}}}function iY(e,t,n){let r,i=this,a=i.events.length,o=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);for(;a--;){let e=i.events[a][1];if("labelImage"===e.type){r=e;break}if("gfmFootnoteCall"===e.type||"labelLink"===e.type||"label"===e.type||"image"===e.type||"link"===e.type)break}return s;function s(a){if(!r||!r._balanced)return n(a);let s=(0,iK.normalizeIdentifier)(i.sliceSerialize({start:r.end,end:i.now()}));return 94===s.codePointAt(0)&&o.includes(s.slice(1))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(a),e.exit("gfmFootnoteCallLabelMarker"),t(a)):n(a)}}function iJ(e,t){let n,r=e.length;for(;r--;)if("labelImage"===e[r][1].type&&"enter"===e[r][0]){n=e[r][1];break}e[r+1][1].type="data",e[r+3][1].type="gfmFootnoteCallLabelMarker";let i={type:"gfmFootnoteCall",start:Object.assign({},e[r+3][1].start),end:Object.assign({},e[e.length-1][1].end)},a={type:"gfmFootnoteCallMarker",start:Object.assign({},e[r+3][1].end),end:Object.assign({},e[r+3][1].end)};a.end.column++,a.end.offset++,a.end._bufferIndex++;let o={type:"gfmFootnoteCallString",start:Object.assign({},a.end),end:Object.assign({},e[e.length-1][1].start)},s={type:"chunkString",contentType:"string",start:Object.assign({},o.start),end:Object.assign({},o.end)},l=[e[r+1],e[r+2],["enter",i,t],e[r+3],e[r+4],["enter",a,t],["exit",a,t],["enter",o,t],["enter",s,t],["exit",s,t],["exit",o,t],e[e.length-2],e[e.length-1],["exit",i,t]];return e.splice(r,e.length-r+1,...l),e}function iQ(e,t,n){let r,i=this,a=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]),o=0;return s;function s(t){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(t),e.exit("gfmFootnoteCallLabelMarker"),l}function l(t){return 94!==t?n(t):(e.enter("gfmFootnoteCallMarker"),e.consume(t),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",c)}function c(s){if(o>999||93===s&&!r||null===s||91===s||(0,iG.markdownLineEndingOrSpace)(s))return n(s);if(93===s){e.exit("chunkString");let r=e.exit("gfmFootnoteCallString");return a.includes((0,iK.normalizeIdentifier)(i.sliceSerialize(r)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(s),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(s)}return(0,iG.markdownLineEndingOrSpace)(s)||(r=!0),o++,e.consume(s),92===s?u:c}function u(t){return 91===t||92===t||93===t?(e.consume(t),o++,c):c(t)}}function i0(e,t,n){let r,i,a=this,o=a.parser.gfmFootnotes||(a.parser.gfmFootnotes=[]),s=0;return l;function l(t){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionLabelMarker"),c}function c(t){return 94===t?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",u):n(t)}function u(t){if(s>999||93===t&&!i||null===t||91===t||(0,iG.markdownLineEndingOrSpace)(t))return n(t);if(93===t){e.exit("chunkString");let n=e.exit("gfmFootnoteDefinitionLabelString");return r=(0,iK.normalizeIdentifier)(a.sliceSerialize(n)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),p}return(0,iG.markdownLineEndingOrSpace)(t)||(i=!0),s++,e.consume(t),92===t?d:u}function d(t){return 91===t||92===t||93===t?(e.consume(t),s++,u):u(t)}function p(t){return 58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),o.includes(r)||o.push(r),(0,iZ.factorySpace)(e,h,"gfmFootnoteDefinitionWhitespace")):n(t)}function h(e){return t(e)}}function i1(e,t,n){return e.check(iW.blankLine,t,e.attempt(iX,t,n))}function i2(e){e.exit("gfmFootnoteDefinition")}function i5(e,t,n){let r=this;return(0,iZ.factorySpace)(e,i,"gfmFootnoteDefinitionIndent",5);function i(e){let i=r.events[r.events.length-1];return i&&"gfmFootnoteDefinitionIndent"===i[1].type&&4===i[2].sliceSerialize(i[1],!0).length?t(e):n(e)}}var i4=e.i(212470),i3=e.i(941392),i7=e.i(759239);function i9(e){let t=(e||{}).singleTilde,n={name:"strikethrough",tokenize:i,resolveAll:r};return null==t&&(t=!0),{text:{126:n},insideSpan:{null:[n]},attentionMarkers:{null:[126]}};function r(e,t){let n=-1;for(;++n<e.length;)if("enter"===e[n][0]&&"strikethroughSequenceTemporary"===e[n][1].type&&e[n][1]._close){let r=n;for(;r--;)if("exit"===e[r][0]&&"strikethroughSequenceTemporary"===e[r][1].type&&e[r][1]._open&&e[n][1].end.offset-e[n][1].start.offset==e[r][1].end.offset-e[r][1].start.offset){e[n][1].type="strikethroughSequence",e[r][1].type="strikethroughSequence";let i={type:"strikethrough",start:Object.assign({},e[r][1].start),end:Object.assign({},e[n][1].end)},a={type:"strikethroughText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},o=[["enter",i,t],["enter",e[r][1],t],["exit",e[r][1],t],["enter",a,t]],s=t.parser.constructs.insideSpan.null;s&&(0,i4.splice)(o,o.length,0,(0,i7.resolveAll)(s,e.slice(r+1,n),t)),(0,i4.splice)(o,o.length,0,[["exit",a,t],["enter",e[n][1],t],["exit",e[n][1],t],["exit",i,t]]),(0,i4.splice)(e,r-1,n-r+3,o),n=r+o.length-2;break}}for(n=-1;++n<e.length;)"strikethroughSequenceTemporary"===e[n][1].type&&(e[n][1].type="data");return e}function i(e,n,r){let i=this.previous,a=this.events,o=0;return s;function s(t){return 126===i&&"characterEscape"!==a[a.length-1][1].type?r(t):(e.enter("strikethroughSequenceTemporary"),l(t))}function l(a){let s=(0,i3.classifyCharacter)(i);if(126===a)return o>1?r(a):(e.consume(a),o++,l);if(o<2&&!t)return r(a);let c=e.exit("strikethroughSequenceTemporary"),u=(0,i3.classifyCharacter)(a);return c._open=!u||2===u&&!!s,c._close=!s||2===s&&!!u,n(a)}}}var i6=iZ,i8=n5;class ae{add(e,t,n){at(this,e,t,n)}consume(e){if(this.map.sort(function(e,t){return e[0]-t[0]}),0===this.map.length)return;let t=this.map.length,n=[];for(;t>0;)t-=1,n.push(e.slice(this.map[t][0]+this.map[t][1]),this.map[t][2]),e.length=this.map[t][0];n.push([...e]),e.length=0;let r=n.pop();for(;r;)e.push(...r),r=n.pop();this.map.length=0}constructor(){this.map=[]}}function at(e,t,n,r){let i=0;if(0!==n||0!==r.length){for(;i<e.map.length;){if(e.map[i][0]===t){e.map[i][1]+=n,e.map[i][2].push(...r);return}i+=1}e.map.push([t,n,r])}}function an(e,t){let n=!1,r=[];for(;t<e.length;){let i=e[t];if(n){if("enter"===i[0])"tableContent"===i[1].type&&r.push("tableDelimiterMarker"===e[t+1][1].type?"left":"none");else if("tableContent"===i[1].type){if("tableDelimiterMarker"===e[t-1][1].type){let e=r.length-1;r[e]="left"===r[e]?"center":"right"}}else if("tableDelimiterRow"===i[1].type)break}else"enter"===i[0]&&"tableDelimiterRow"===i[1].type&&(n=!0);t+=1}return r}function ar(){return{flow:{null:{name:"table",tokenize:ai,resolveAll:aa}}}}function ai(e,t,n){let r,i=this,a=0,o=0;return s;function s(e){let t=i.events.length-1;for(;t>-1;){let e=i.events[t][1].type;if("lineEnding"===e||"linePrefix"===e)t--;else break}let r=t>-1?i.events[t][1].type:null,a="tableHead"===r||"tableRow"===r?j:l;return a===j&&i.parser.lazy[i.now().line]?n(e):a(e)}function l(t){return e.enter("tableHead"),e.enter("tableRow"),c(t)}function c(e){return 124===e||(r=!0,o+=1),u(e)}function u(t){return null===t?n(t):(0,i8.markdownLineEnding)(t)?o>1?(o=0,i.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),h):n(t):(0,i8.markdownSpace)(t)?(0,i6.factorySpace)(e,u,"whitespace")(t):(o+=1,r&&(r=!1,a+=1),124===t)?(e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),r=!0,u):(e.enter("data"),d(t))}function d(t){return null===t||124===t||(0,i8.markdownLineEndingOrSpace)(t)?(e.exit("data"),u(t)):(e.consume(t),92===t?p:d)}function p(t){return 92===t||124===t?(e.consume(t),d):d(t)}function h(t){return(i.interrupt=!1,i.parser.lazy[i.now().line])?n(t):(e.enter("tableDelimiterRow"),r=!1,(0,i8.markdownSpace)(t))?(0,i6.factorySpace)(e,f,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):f(t)}function f(t){return 45===t||58===t?g(t):124===t?(r=!0,e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),m):w(t)}function m(t){return(0,i8.markdownSpace)(t)?(0,i6.factorySpace)(e,g,"whitespace")(t):g(t)}function g(t){return 58===t?(o+=1,r=!0,e.enter("tableDelimiterMarker"),e.consume(t),e.exit("tableDelimiterMarker"),v):45===t?(o+=1,v(t)):null===t||(0,i8.markdownLineEnding)(t)?b(t):w(t)}function v(t){return 45===t?(e.enter("tableDelimiterFiller"),x(t)):w(t)}function x(t){return 45===t?(e.consume(t),x):58===t?(r=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(t),e.exit("tableDelimiterMarker"),y):(e.exit("tableDelimiterFiller"),y(t))}function y(t){return(0,i8.markdownSpace)(t)?(0,i6.factorySpace)(e,b,"whitespace")(t):b(t)}function b(n){return 124===n?f(n):null===n||(0,i8.markdownLineEnding)(n)?r&&a===o?(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(n)):w(n):w(n)}function w(e){return n(e)}function j(t){return e.enter("tableRow"),C(t)}function C(n){return 124===n?(e.enter("tableCellDivider"),e.consume(n),e.exit("tableCellDivider"),C):null===n||(0,i8.markdownLineEnding)(n)?(e.exit("tableRow"),t(n)):(0,i8.markdownSpace)(n)?(0,i6.factorySpace)(e,C,"whitespace")(n):(e.enter("data"),k(n))}function k(t){return null===t||124===t||(0,i8.markdownLineEndingOrSpace)(t)?(e.exit("data"),C(t)):(e.consume(t),92===t?S:k)}function S(t){return 92===t||124===t?(e.consume(t),k):k(t)}}function aa(e,t){let n,r,i,a=-1,o=!0,s=0,l=[0,0,0,0],c=[0,0,0,0],u=!1,d=0,p=new ae;for(;++a<e.length;){let h=e[a],f=h[1];"enter"===h[0]?"tableHead"===f.type?(u=!1,0!==d&&(as(p,t,d,n,r),r=void 0,d=0),n={type:"table",start:Object.assign({},f.start),end:Object.assign({},f.end)},p.add(a,0,[["enter",n,t]])):"tableRow"===f.type||"tableDelimiterRow"===f.type?(o=!0,i=void 0,l=[0,0,0,0],c=[0,a+1,0,0],u&&(u=!1,r={type:"tableBody",start:Object.assign({},f.start),end:Object.assign({},f.end)},p.add(a,0,[["enter",r,t]])),s="tableDelimiterRow"===f.type?2:r?3:1):s&&("data"===f.type||"tableDelimiterMarker"===f.type||"tableDelimiterFiller"===f.type)?(o=!1,0===c[2]&&(0!==l[1]&&(c[0]=c[1],i=ao(p,t,l,s,void 0,i),l=[0,0,0,0]),c[2]=a)):"tableCellDivider"===f.type&&(o?o=!1:(0!==l[1]&&(c[0]=c[1],i=ao(p,t,l,s,void 0,i)),c=[(l=c)[1],a,0,0])):"tableHead"===f.type?(u=!0,d=a):"tableRow"===f.type||"tableDelimiterRow"===f.type?(d=a,0!==l[1]?(c[0]=c[1],i=ao(p,t,l,s,a,i)):0!==c[1]&&(i=ao(p,t,c,s,a,i)),s=0):s&&("data"===f.type||"tableDelimiterMarker"===f.type||"tableDelimiterFiller"===f.type)&&(c[3]=a)}for(0!==d&&as(p,t,d,n,r),p.consume(t.events),a=-1;++a<t.events.length;){let e=t.events[a];"enter"===e[0]&&"table"===e[1].type&&(e[1]._align=an(t.events,a))}return e}function ao(e,t,n,r,i,a){let o=1===r?"tableHeader":2===r?"tableDelimiter":"tableData",s="tableContent";0!==n[0]&&(a.end=Object.assign({},al(t.events,n[0])),e.add(n[0],0,[["exit",a,t]]));let l=al(t.events,n[1]);if(a={type:o,start:Object.assign({},l),end:Object.assign({},l)},e.add(n[1],0,[["enter",a,t]]),0!==n[2]){let i=al(t.events,n[2]),a=al(t.events,n[3]),o={type:s,start:Object.assign({},i),end:Object.assign({},a)};if(e.add(n[2],0,[["enter",o,t]]),2!==r){let r=t.events[n[2]],i=t.events[n[3]];if(r[1].end=Object.assign({},i[1].end),r[1].type="chunkText",r[1].contentType="text",n[3]>n[2]+1){let t=n[2]+1,r=n[3]-n[2]-1;e.add(t,r,[])}}e.add(n[3]+1,0,[["exit",o,t]])}return void 0!==i&&(a.end=Object.assign({},al(t.events,i)),e.add(i,0,[["exit",a,t]]),a=void 0),a}function as(e,t,n,r,i){let a=[],o=al(t.events,n);i&&(i.end=Object.assign({},o),a.push(["exit",i,t])),r.end=Object.assign({},o),a.push(["exit",r,t]),e.add(n+1,0,a)}function al(e,t){let n=e[t],r="enter"===n[0]?"start":"end";return n[1][r]}RegExp("^"+/<(\/?)(iframe|noembed|noframes|plaintext|script|style|title|textarea|xmp)(?=[\t\n\f\r />])/gi.source,"i");var ac=iZ,au=n5;let ad={name:"tasklistCheck",tokenize:ah};function ap(){return{text:{91:ad}}}function ah(e,t,n){let r=this;return i;function i(t){return null===r.previous&&r._gfmTasklistFirstContentOfListItem?(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(t),e.exit("taskListCheckMarker"),a):n(t)}function a(t){return(0,au.markdownLineEndingOrSpace)(t)?(e.enter("taskListCheckValueUnchecked"),e.consume(t),e.exit("taskListCheckValueUnchecked"),o):88===t||120===t?(e.enter("taskListCheckValueChecked"),e.consume(t),e.exit("taskListCheckValueChecked"),o):n(t)}function o(t){return 93===t?(e.enter("taskListCheckMarker"),e.consume(t),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),s):n(t)}function s(r){return(0,au.markdownLineEnding)(r)?t(r):(0,au.markdownSpace)(r)?e.check({tokenize:af},t,n)(r):n(r)}}function af(e,t,n){return(0,ac.factorySpace)(e,r,"whitespace");function r(e){return null===e?n(e):t(e)}}function am(e){return(0,iy.combineExtensions)([iD(),i$(),i9(e),ar(),ap()])}let ag={};function av(e){let t=this,n=e||ag,r=t.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),a=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),o=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(am(n)),a.push(iv()),o.push(ix(n))}var ax=n2;function ay(){return{enter:{mathFlow:e,mathFlowFenceMeta:t,mathText:a},exit:{mathFlow:i,mathFlowFence:r,mathFlowFenceMeta:n,mathFlowValue:s,mathText:o,mathTextData:s}};function e(e){let t={type:"element",tagName:"code",properties:{className:["language-math","math-display"]},children:[]};this.enter({type:"math",meta:null,value:"",data:{hName:"pre",hChildren:[t]}},e)}function t(){this.buffer()}function n(){let e=this.resume(),t=this.stack[this.stack.length-1];(0,ax.ok)("math"===t.type),t.meta=e}function r(){this.data.mathFlowInside||(this.buffer(),this.data.mathFlowInside=!0)}function i(e){let t=this.resume().replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),n=this.stack[this.stack.length-1];(0,ax.ok)("math"===n.type),this.exit(e),n.value=t;let r=n.data.hChildren[0];(0,ax.ok)("element"===r.type),(0,ax.ok)("code"===r.tagName),r.children.push({type:"text",value:t}),this.data.mathFlowInside=void 0}function a(e){this.enter({type:"inlineMath",value:"",data:{hName:"code",hProperties:{className:["language-math","math-inline"]},hChildren:[]}},e),this.buffer()}function o(e){let t=this.resume(),n=this.stack[this.stack.length-1];(0,ax.ok)("inlineMath"===n.type),this.exit(e),n.value=t,n.data.hChildren.push({type:"text",value:t})}function s(e){this.config.enter.data.call(this,e),this.config.exit.data.call(this,e)}}function ab(e){let t=(e||{}).singleDollarTextMath;return null==t&&(t=!0),r.peek=i,{unsafe:[{character:"\r",inConstruct:"mathFlowMeta"},{character:"\n",inConstruct:"mathFlowMeta"},{character:"$",after:t?void 0:"\\$",inConstruct:"phrasing"},{character:"$",inConstruct:"mathFlowMeta"},{atBreak:!0,character:"$",after:"\\$"}],handlers:{math:n,inlineMath:r}};function n(e,t,n,r){let i=e.value||"",a=n.createTracker(r),o="$".repeat(Math.max(rO(i,"$")+1,2)),s=n.enter("mathFlow"),l=a.move(o);if(e.meta){let t=n.enter("mathFlowMeta");l+=a.move(n.safe(e.meta,{after:"\n",before:l,encode:["$"],...a.current()})),t()}return l+=a.move("\n"),i&&(l+=a.move(i+"\n")),l+=a.move(o),s(),l}function r(e,n,r){let i=e.value||"",a=1;for(!t&&a++;RegExp("(^|[^$])"+"\\$".repeat(a)+"([^$]|$)").test(i);)a++;let o="$".repeat(a);/[^ \r\n]/.test(i)&&(/^[ \r\n]/.test(i)&&/[ \r\n]$/.test(i)||/^\$|\$$/.test(i))&&(i=" "+i+" ");let s=-1;for(;++s<r.unsafe.length;){let e,t=r.unsafe[s];if(!t.atBreak)continue;let n=r.compilePattern(t);for(;e=n.exec(i);){let t=e.index;10===i.codePointAt(t)&&13===i.codePointAt(t-1)&&t--,i=i.slice(0,t)+" "+i.slice(e.index+1)}}return o+i+o}function i(){return"$"}}var aw=iZ,aj=n5;let aC={tokenize:aS,concrete:!0},ak={tokenize:aN,partial:!0};function aS(e,t,n){let r=this,i=r.events[r.events.length-1],a=i&&"linePrefix"===i[1].type?i[2].sliceSerialize(i[1],!0).length:0,o=0;return s;function s(t){return e.enter("mathFlow"),e.enter("mathFlowFence"),e.enter("mathFlowFenceSequence"),l(t)}function l(t){return 36===t?(e.consume(t),o++,l):o<2?n(t):(e.exit("mathFlowFenceSequence"),(0,aw.factorySpace)(e,c,"whitespace")(t))}function c(t){return null===t||(0,aj.markdownLineEnding)(t)?d(t):(e.enter("mathFlowFenceMeta"),e.enter("chunkString",{contentType:"string"}),u(t))}function u(t){return null===t||(0,aj.markdownLineEnding)(t)?(e.exit("chunkString"),e.exit("mathFlowFenceMeta"),d(t)):36===t?n(t):(e.consume(t),u)}function d(n){return(e.exit("mathFlowFence"),r.interrupt)?t(n):e.attempt(ak,p,g)(n)}function p(t){return e.attempt({tokenize:v,partial:!0},g,h)(t)}function h(t){return(a?(0,aw.factorySpace)(e,f,"linePrefix",a+1):f)(t)}function f(t){return null===t?g(t):(0,aj.markdownLineEnding)(t)?e.attempt(ak,p,g)(t):(e.enter("mathFlowValue"),m(t))}function m(t){return null===t||(0,aj.markdownLineEnding)(t)?(e.exit("mathFlowValue"),f(t)):(e.consume(t),m)}function g(n){return e.exit("mathFlow"),t(n)}function v(e,t,n){let i=0;return(0,aw.factorySpace)(e,a,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function a(t){return e.enter("mathFlowFence"),e.enter("mathFlowFenceSequence"),s(t)}function s(t){return 36===t?(i++,e.consume(t),s):i<o?n(t):(e.exit("mathFlowFenceSequence"),(0,aw.factorySpace)(e,l,"whitespace")(t))}function l(r){return null===r||(0,aj.markdownLineEnding)(r)?(e.exit("mathFlowFence"),t(r)):n(r)}}}function aN(e,t,n){let r=this;return i;function i(n){return null===n?t(n):(e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),a)}function a(e){return r.parser.lazy[r.now().line]?n(e):t(e)}}var aE=n5;function aM(e){let t=(e||{}).singleDollarTextMath;return null==t&&(t=!0),{tokenize:n,resolve:aI,previous:aD};function n(e,n,r){let i,a,o=0;return s;function s(t){return e.enter("mathText"),e.enter("mathTextSequence"),l(t)}function l(n){return 36===n?(e.consume(n),o++,l):o<2&&!t?r(n):(e.exit("mathTextSequence"),c(n))}function c(t){return null===t?r(t):36===t?(a=e.enter("mathTextSequence"),i=0,d(t)):32===t?(e.enter("space"),e.consume(t),e.exit("space"),c):(0,aE.markdownLineEnding)(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),c):(e.enter("mathTextData"),u(t))}function u(t){return null===t||32===t||36===t||(0,aE.markdownLineEnding)(t)?(e.exit("mathTextData"),c(t)):(e.consume(t),u)}function d(t){return 36===t?(e.consume(t),i++,d):i===o?(e.exit("mathTextSequence"),e.exit("mathText"),n(t)):(a.type="mathTextData",u(t))}}}function aI(e){let t,n,r=e.length-4,i=3;if(("lineEnding"===e[3][1].type||"space"===e[i][1].type)&&("lineEnding"===e[r][1].type||"space"===e[r][1].type)){for(t=i;++t<r;)if("mathTextData"===e[t][1].type){e[r][1].type="mathTextPadding",e[i][1].type="mathTextPadding",i+=2,r-=2;break}}for(t=i-1,r++;++t<=r;)void 0===n?t!==r&&"lineEnding"!==e[t][1].type&&(n=t):(t===r||"lineEnding"===e[t][1].type)&&(e[n][1].type="mathTextData",t!==n+2&&(e[n][1].end=e[t-1][1].end,e.splice(n+2,t-n-2),r-=t-n-2,t=n+2),n=void 0);return e}function aD(e){return 36!==e||"characterEscape"===this.events[this.events.length-1][1].type}function aT(e){return{flow:{36:aC},text:{36:aM(e)}}}let aA={};function aL(e){let t=this,n=e||aA,r=t.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),a=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),o=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(aT(n)),a.push(ay()),o.push(ab(n))}let aP=/[\0-\x1F!-,\.\/:-@\[-\^`\{-\xA9\xAB-\xB4\xB6-\xB9\xBB-\xBF\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0378\u0379\u037E\u0380-\u0385\u0387\u038B\u038D\u03A2\u03F6\u0482\u0530\u0557\u0558\u055A-\u055F\u0589-\u0590\u05BE\u05C0\u05C3\u05C6\u05C8-\u05CF\u05EB-\u05EE\u05F3-\u060F\u061B-\u061F\u066A-\u066D\u06D4\u06DD\u06DE\u06E9\u06FD\u06FE\u0700-\u070F\u074B\u074C\u07B2-\u07BF\u07F6-\u07F9\u07FB\u07FC\u07FE\u07FF\u082E-\u083F\u085C-\u085F\u086B-\u089F\u08B5\u08C8-\u08D2\u08E2\u0964\u0965\u0970\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA\u09BB\u09C5\u09C6\u09C9\u09CA\u09CF-\u09D6\u09D8-\u09DB\u09DE\u09E4\u09E5\u09F2-\u09FB\u09FD\u09FF\u0A00\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A\u0A3B\u0A3D\u0A43-\u0A46\u0A49\u0A4A\u0A4E-\u0A50\u0A52-\u0A58\u0A5D\u0A5F-\u0A65\u0A76-\u0A80\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA\u0ABB\u0AC6\u0ACA\u0ACE\u0ACF\u0AD1-\u0ADF\u0AE4\u0AE5\u0AF0-\u0AF8\u0B00\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A\u0B3B\u0B45\u0B46\u0B49\u0B4A\u0B4E-\u0B54\u0B58-\u0B5B\u0B5E\u0B64\u0B65\u0B70\u0B72-\u0B81\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BBD\u0BC3-\u0BC5\u0BC9\u0BCE\u0BCF\u0BD1-\u0BD6\u0BD8-\u0BE5\u0BF0-\u0BFF\u0C0D\u0C11\u0C29\u0C3A-\u0C3C\u0C45\u0C49\u0C4E-\u0C54\u0C57\u0C5B-\u0C5F\u0C64\u0C65\u0C70-\u0C7F\u0C84\u0C8D\u0C91\u0CA9\u0CB4\u0CBA\u0CBB\u0CC5\u0CC9\u0CCE-\u0CD4\u0CD7-\u0CDD\u0CDF\u0CE4\u0CE5\u0CF0\u0CF3-\u0CFF\u0D0D\u0D11\u0D45\u0D49\u0D4F-\u0D53\u0D58-\u0D5E\u0D64\u0D65\u0D70-\u0D79\u0D80\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0DC9\u0DCB-\u0DCE\u0DD5\u0DD7\u0DE0-\u0DE5\u0DF0\u0DF1\u0DF4-\u0E00\u0E3B-\u0E3F\u0E4F\u0E5A-\u0E80\u0E83\u0E85\u0E8B\u0EA4\u0EA6\u0EBE\u0EBF\u0EC5\u0EC7\u0ECE\u0ECF\u0EDA\u0EDB\u0EE0-\u0EFF\u0F01-\u0F17\u0F1A-\u0F1F\u0F2A-\u0F34\u0F36\u0F38\u0F3A-\u0F3D\u0F48\u0F6D-\u0F70\u0F85\u0F98\u0FBD-\u0FC5\u0FC7-\u0FFF\u104A-\u104F\u109E\u109F\u10C6\u10C8-\u10CC\u10CE\u10CF\u10FB\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B\u135C\u1360-\u137F\u1390-\u139F\u13F6\u13F7\u13FE-\u1400\u166D\u166E\u1680\u169B-\u169F\u16EB-\u16ED\u16F9-\u16FF\u170D\u1715-\u171F\u1735-\u173F\u1754-\u175F\u176D\u1771\u1774-\u177F\u17D4-\u17D6\u17D8-\u17DB\u17DE\u17DF\u17EA-\u180A\u180E\u180F\u181A-\u181F\u1879-\u187F\u18AB-\u18AF\u18F6-\u18FF\u191F\u192C-\u192F\u193C-\u1945\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19CF\u19DA-\u19FF\u1A1C-\u1A1F\u1A5F\u1A7D\u1A7E\u1A8A-\u1A8F\u1A9A-\u1AA6\u1AA8-\u1AAF\u1AC1-\u1AFF\u1B4C-\u1B4F\u1B5A-\u1B6A\u1B74-\u1B7F\u1BF4-\u1BFF\u1C38-\u1C3F\u1C4A-\u1C4C\u1C7E\u1C7F\u1C89-\u1C8F\u1CBB\u1CBC\u1CC0-\u1CCF\u1CD3\u1CFB-\u1CFF\u1DFA\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FBD\u1FBF-\u1FC1\u1FC5\u1FCD-\u1FCF\u1FD4\u1FD5\u1FDC-\u1FDF\u1FED-\u1FF1\u1FF5\u1FFD-\u203E\u2041-\u2053\u2055-\u2070\u2072-\u207E\u2080-\u208F\u209D-\u20CF\u20F1-\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F-\u215F\u2189-\u24B5\u24EA-\u2BFF\u2C2F\u2C5F\u2CE5-\u2CEA\u2CF4-\u2CFF\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D70-\u2D7E\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF\u2E00-\u2E2E\u2E30-\u3004\u3008-\u3020\u3030\u3036\u3037\u303D-\u3040\u3097\u3098\u309B\u309C\u30A0\u30FB\u3100-\u3104\u3130\u318F-\u319F\u31C0-\u31EF\u3200-\u33FF\u4DC0-\u4DFF\u9FFD-\u9FFF\uA48D-\uA4CF\uA4FE\uA4FF\uA60D-\uA60F\uA62C-\uA63F\uA673\uA67E\uA6F2-\uA716\uA720\uA721\uA789\uA78A\uA7C0\uA7C1\uA7CB-\uA7F4\uA828-\uA82B\uA82D-\uA83F\uA874-\uA87F\uA8C6-\uA8CF\uA8DA-\uA8DF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA954-\uA95F\uA97D-\uA97F\uA9C1-\uA9CE\uA9DA-\uA9DF\uA9FF\uAA37-\uAA3F\uAA4E\uAA4F\uAA5A-\uAA5F\uAA77-\uAA79\uAAC3-\uAADA\uAADE\uAADF\uAAF0\uAAF1\uAAF7-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F\uAB5B\uAB6A-\uAB6F\uABEB\uABEE\uABEF\uABFA-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uD7FC-\uD7FF\uE000-\uF8FF\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB29\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBB2-\uFBD2\uFD3E-\uFD4F\uFD90\uFD91\uFDC8-\uFDEF\uFDFC-\uFDFF\uFE10-\uFE1F\uFE30-\uFE32\uFE35-\uFE4C\uFE50-\uFE6F\uFE75\uFEFD-\uFF0F\uFF1A-\uFF20\uFF3B-\uFF3E\uFF40\uFF5B-\uFF65\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFFF]|\uD800[\uDC0C\uDC27\uDC3B\uDC3E\uDC4E\uDC4F\uDC5E-\uDC7F\uDCFB-\uDD3F\uDD75-\uDDFC\uDDFE-\uDE7F\uDE9D-\uDE9F\uDED1-\uDEDF\uDEE1-\uDEFF\uDF20-\uDF2C\uDF4B-\uDF4F\uDF7B-\uDF7F\uDF9E\uDF9F\uDFC4-\uDFC7\uDFD0\uDFD6-\uDFFF]|\uD801[\uDC9E\uDC9F\uDCAA-\uDCAF\uDCD4-\uDCD7\uDCFC-\uDCFF\uDD28-\uDD2F\uDD64-\uDDFF\uDF37-\uDF3F\uDF56-\uDF5F\uDF68-\uDFFF]|\uD802[\uDC06\uDC07\uDC09\uDC36\uDC39-\uDC3B\uDC3D\uDC3E\uDC56-\uDC5F\uDC77-\uDC7F\uDC9F-\uDCDF\uDCF3\uDCF6-\uDCFF\uDD16-\uDD1F\uDD3A-\uDD7F\uDDB8-\uDDBD\uDDC0-\uDDFF\uDE04\uDE07-\uDE0B\uDE14\uDE18\uDE36\uDE37\uDE3B-\uDE3E\uDE40-\uDE5F\uDE7D-\uDE7F\uDE9D-\uDEBF\uDEC8\uDEE7-\uDEFF\uDF36-\uDF3F\uDF56-\uDF5F\uDF73-\uDF7F\uDF92-\uDFFF]|\uD803[\uDC49-\uDC7F\uDCB3-\uDCBF\uDCF3-\uDCFF\uDD28-\uDD2F\uDD3A-\uDE7F\uDEAA\uDEAD-\uDEAF\uDEB2-\uDEFF\uDF1D-\uDF26\uDF28-\uDF2F\uDF51-\uDFAF\uDFC5-\uDFDF\uDFF7-\uDFFF]|\uD804[\uDC47-\uDC65\uDC70-\uDC7E\uDCBB-\uDCCF\uDCE9-\uDCEF\uDCFA-\uDCFF\uDD35\uDD40-\uDD43\uDD48-\uDD4F\uDD74\uDD75\uDD77-\uDD7F\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDFF\uDE12\uDE38-\uDE3D\uDE3F-\uDE7F\uDE87\uDE89\uDE8E\uDE9E\uDEA9-\uDEAF\uDEEB-\uDEEF\uDEFA-\uDEFF\uDF04\uDF0D\uDF0E\uDF11\uDF12\uDF29\uDF31\uDF34\uDF3A\uDF45\uDF46\uDF49\uDF4A\uDF4E\uDF4F\uDF51-\uDF56\uDF58-\uDF5C\uDF64\uDF65\uDF6D-\uDF6F\uDF75-\uDFFF]|\uD805[\uDC4B-\uDC4F\uDC5A-\uDC5D\uDC62-\uDC7F\uDCC6\uDCC8-\uDCCF\uDCDA-\uDD7F\uDDB6\uDDB7\uDDC1-\uDDD7\uDDDE-\uDDFF\uDE41-\uDE43\uDE45-\uDE4F\uDE5A-\uDE7F\uDEB9-\uDEBF\uDECA-\uDEFF\uDF1B\uDF1C\uDF2C-\uDF2F\uDF3A-\uDFFF]|\uD806[\uDC3B-\uDC9F\uDCEA-\uDCFE\uDD07\uDD08\uDD0A\uDD0B\uDD14\uDD17\uDD36\uDD39\uDD3A\uDD44-\uDD4F\uDD5A-\uDD9F\uDDA8\uDDA9\uDDD8\uDDD9\uDDE2\uDDE5-\uDDFF\uDE3F-\uDE46\uDE48-\uDE4F\uDE9A-\uDE9C\uDE9E-\uDEBF\uDEF9-\uDFFF]|\uD807[\uDC09\uDC37\uDC41-\uDC4F\uDC5A-\uDC71\uDC90\uDC91\uDCA8\uDCB7-\uDCFF\uDD07\uDD0A\uDD37-\uDD39\uDD3B\uDD3E\uDD48-\uDD4F\uDD5A-\uDD5F\uDD66\uDD69\uDD8F\uDD92\uDD99-\uDD9F\uDDAA-\uDEDF\uDEF7-\uDFAF\uDFB1-\uDFFF]|\uD808[\uDF9A-\uDFFF]|\uD809[\uDC6F-\uDC7F\uDD44-\uDFFF]|[\uD80A\uD80B\uD80E-\uD810\uD812-\uD819\uD824-\uD82B\uD82D\uD82E\uD830-\uD833\uD837\uD839\uD83D\uD83F\uD87B-\uD87D\uD87F\uD885-\uDB3F\uDB41-\uDBFF][\uDC00-\uDFFF]|\uD80D[\uDC2F-\uDFFF]|\uD811[\uDE47-\uDFFF]|\uD81A[\uDE39-\uDE3F\uDE5F\uDE6A-\uDECF\uDEEE\uDEEF\uDEF5-\uDEFF\uDF37-\uDF3F\uDF44-\uDF4F\uDF5A-\uDF62\uDF78-\uDF7C\uDF90-\uDFFF]|\uD81B[\uDC00-\uDE3F\uDE80-\uDEFF\uDF4B-\uDF4E\uDF88-\uDF8E\uDFA0-\uDFDF\uDFE2\uDFE5-\uDFEF\uDFF2-\uDFFF]|\uD821[\uDFF8-\uDFFF]|\uD823[\uDCD6-\uDCFF\uDD09-\uDFFF]|\uD82C[\uDD1F-\uDD4F\uDD53-\uDD63\uDD68-\uDD6F\uDEFC-\uDFFF]|\uD82F[\uDC6B-\uDC6F\uDC7D-\uDC7F\uDC89-\uDC8F\uDC9A-\uDC9C\uDC9F-\uDFFF]|\uD834[\uDC00-\uDD64\uDD6A-\uDD6C\uDD73-\uDD7A\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDE41\uDE45-\uDFFF]|\uD835[\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3\uDFCC\uDFCD]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85-\uDE9A\uDEA0\uDEB0-\uDFFF]|\uD838[\uDC07\uDC19\uDC1A\uDC22\uDC25\uDC2B-\uDCFF\uDD2D-\uDD2F\uDD3E\uDD3F\uDD4A-\uDD4D\uDD4F-\uDEBF\uDEFA-\uDFFF]|\uD83A[\uDCC5-\uDCCF\uDCD7-\uDCFF\uDD4C-\uDD4F\uDD5A-\uDFFF]|\uD83B[\uDC00-\uDDFF\uDE04\uDE20\uDE23\uDE25\uDE26\uDE28\uDE33\uDE38\uDE3A\uDE3C-\uDE41\uDE43-\uDE46\uDE48\uDE4A\uDE4C\uDE50\uDE53\uDE55\uDE56\uDE58\uDE5A\uDE5C\uDE5E\uDE60\uDE63\uDE65\uDE66\uDE6B\uDE73\uDE78\uDE7D\uDE7F\uDE8A\uDE9C-\uDEA0\uDEA4\uDEAA\uDEBC-\uDFFF]|\uD83C[\uDC00-\uDD2F\uDD4A-\uDD4F\uDD6A-\uDD6F\uDD8A-\uDFFF]|\uD83E[\uDC00-\uDFEF\uDFFA-\uDFFF]|\uD869[\uDEDE-\uDEFF]|\uD86D[\uDF35-\uDF3F]|\uD86E[\uDC1E\uDC1F]|\uD873[\uDEA2-\uDEAF]|\uD87A[\uDFE1-\uDFFF]|\uD87E[\uDE1E-\uDFFF]|\uD884[\uDF4B-\uDFFF]|\uDB40[\uDC00-\uDCFF\uDDF0-\uDFFF]/g,aR=Object.hasOwnProperty;class a_{slug(e,t){let n=this,r=aO(e,!0===t),i=r;for(;aR.call(n.occurrences,r);)n.occurrences[i]++,r=i+"-"+n.occurrences[i];return n.occurrences[r]=0,r}reset(){this.occurrences=Object.create(null)}constructor(){this.occurrences,this.reset()}}function aO(e,t){return"string"!=typeof e?"":(t||(e=e.toLowerCase()),e.replace(aP,"").replace(/ /g,"-"))}function aF(e){let t="element"===e.type?e.tagName.toLowerCase():"",n=2===t.length&&104===t.charCodeAt(0)?t.charCodeAt(1):0;return n>48&&n<55?n-48:void 0}function aV(e){return"children"in e?az(e):"value"in e?e.value:""}function aB(e){return"text"===e.type?e.value:"children"in e?az(e):""}function az(e){let t=-1,n=[];for(;++t<e.children.length;)n[t]=aB(e.children[t]);return n.join("")}var aH=rH;let aU={},aq=new a_;function aW(e){let t=(e||aU).prefix||"";return function(e){aq.reset(),(0,aH.visit)(e,"element",function(e){aF(e)&&!e.properties.id&&(e.properties.id=t+aq.slug(aV(e)))})}}var aZ=e.i(805374);class aG{static Render(e){let{isPublished:t}=(0,n0.usePublishedPage)(),[n,r]=(0,p.useState)(void 0),{activeTab:i}=(0,f.useActiveTab)(),a=e.source.replaceAll(/\\+`/g,"`");return(0,d.jsx)(h.PreviewBlock,{...e,blockType:"markdown",language:"markdown",source:a,onEdit:r,children:(0,d.jsx)("div",{className:(0,g.cn)("flex h-full w-full justify-center overflow-y-auto p-4 md:py-6","preview"!==i&&(t?"hidden":"sr-only invisible")),children:(0,d.jsx)(m.Prose,{children:(0,d.jsx)(nY,{remarkPlugins:[av,aL],rehypePlugins:[aW],children:void 0===n?a:n})})})})}}(0,u._)(aG,"getIsPreviewable",()=>!0),(0,u._)(aG,"Actions",p.default.memo(e=>{let{blockId:t,closed:n}=e;return(0,d.jsx)(aZ.PreviewBlockTitleActions,{blockId:t,closed:n})})),(0,u._)(aG,"TitleActions",null),(0,u._)(aG,"BrowserControls",null),(0,u._)(aG,"MoreMenu",null),(0,u._)(aG,"ConsoleToggle",null),(0,u._)(aG,"DesignCursorToggle",null);var aK=u,aX=r,a$=i,aY=e.i(204575),aJ=h,aQ=e.i(139615),a0=e.i(210045),a1=n0,a2=e.i(917806),a5=A,a4=aZ;class a3{static Render(e){let{chatId:t}=(0,a5.useChatId)(),{isPublished:n}=(0,a1.usePublishedPage)(),r=(0,aY.getBlockIframeId)(e.blockId);return(0,aQ.useIframeAutoRender)("VUE",e.source,r),(0,aX.jsx)(aJ.PreviewBlock,{allowRefresh:!0,...e,blockType:"vue",language:"vue",resultId:e.blockId,children:(0,aX.jsx)(a0.Iframe,{iframeId:r,isPublished:n,origin:(0,a2.getIframeOrigin)(t||e.blockId),src:"/render/vue"},r)})}}(0,aK._)(a3,"getIsPreviewable",e=>{let{closed:t}=e;return t}),(0,aK._)(a3,"Actions",a$.default.memo(e=>{let{blockId:t,closed:n}=e;return(0,aX.jsx)(a4.PreviewBlockTitleActions,{blockId:t,closed:n})})),(0,aK._)(a3,"BrowserControls",null),(0,aK._)(a3,"MoreMenu",null),(0,aK._)(a3,"ConsoleToggle",null),(0,aK._)(a3,"DesignCursorToggle",null);var a7=u,a9=r,a6=h,a8=aY,oe=aZ,ot=e.i(926224);let on={SVELTEKIT_UNSUPPORTED:"v0 does not currently support previewing advanced SvelteKit projects",NON_SUPPORTED_FILES:"v0 can not detect a page to preview"},or=RegExp("from ['\"](\\$app\\/(server))|(node:.+?)|path|fs|url['\"]");function oi(e,t){return oa("code-project"===t.type?(0,ot.parseMultiFileSource)({source:e,blockType:"code-project",blockId:"fake-block-id"}):[{source:e,meta:t,isDeleted:!1}])}function oa(e){if(0===(e=e.filter(e=>!e.isDeleted)).length||!e.some(e=>e.meta.file&&e.meta.file.endsWith(".svelte")))return on.NON_SUPPORTED_FILES;for(let{source:i,meta:a}of e){var t,n,r;if(null==(t=a.file)?void 0:t.endsWith("+error.svelte"))return on.NON_SUPPORTED_FILES;if(((null==(n=a.file)?void 0:n.endsWith("/+page."))||(null==(r=a.file)?void 0:r.endsWith("/+layout.")))&&(a.file.includes("[...")||a.file.includes("("))||i.split("\n").filter(e=>e.trim().startsWith("import")).join("\n").match(or))return on.SVELTEKIT_UNSUPPORTED}return!0}var oo=e.i(696825),ol=n0,oc=e.i(930293),ou=a2,od=i,op=e.i(868948),oh=e.i(988094),of=f,om=A,og=e.i(295224),ov=e.i(472166),ox=a0,oy=e.i(53223),ob=e.i(470259),ow=e.i(780292),oj=e.i(487581),oC=e.i(584497),ok=e.i(577247),oS=e.i(889938),oN=s,oE=e.i(797173),oM=e.i(84079),oI=e.i(163014),oD=e.i(896608),oT=e.i(415117),oA=e.i(899488),oL=g,oP=e.i(443265),oR=e.i(534607),o_=e.i(556355),oO=e.i(176248),oF=e.i(432008),oV=e.i(566274),oB=e.i(160769),oz=e.i(298450),oH=e.i(622661),oU=e.i(142219),oq=e.i(668887),oW=e.i(105025),oZ=e.i(32170);class oG{static Render(e){let{isPublished:t}=(0,ol.usePublishedPage)(),{activeForkKey:n}=(0,om.useChatMessages)(),{isStreaming:r,chatId:i}=(0,om.useChatLoadingState)(),{canWriteToChat:a,title:o,ownerId:s}=(0,oC.useChatMetadata)(),[l,c]=(0,ow.useAtom)(oj.previewBlockErrorsAtom),[u]=(0,ow.useAtom)(oN.consoleVisibilityAtom),{isBlockPreviewable:d}=(0,of.useActiveTab)(),p=(0,og.useLatest)(d),{getBlockForked:h}=(0,oo.useForkedBlocks)(),{user:f}=(0,oZ.useUser)(),{token:m,error:g}=(0,oc.useSessionTokenForFrame)(i);(0,od.useEffect)(()=>{c([])},[e.blockId,c]);let{files:v,loadingPath:x}=(0,oE.useBlockFiles)({blockId:e.blockId,closed:e.closed,source:e.source,meta:e.meta}),y=(0,og.useLatest)(v),b=(0,a8.getBlockIframeId)(e.blockId),{submit:w}=(0,ov.useV0Chat)(),{actions:j}=(0,oq.useCurrentBlockDesignMode)(),{setDesignModeEnabled:C}=j;(0,ok.useMessage)(t=>{if(t.data&&"object"==typeof t.data&&t.data.__v0_remote__){if("generation_logs"===t.data.type){var i;let n=(t.data.logs||[]).join("\n\n"),a=oU.store.get(oj.previewBlockCollectedErrorsVersion),o=oU.store.get(oj.previewBlockDisplayedErrorsVersion)||e.blockId,s=(null==(i=oU.store.get(oj.previewBlockPreloadingSuccessCallback))?void 0:i.callback)||null;if(a&&a!==o&&s&&!n){null==s||s(),oU.store.set(oj.previewBlockPreloadingSuccessCallback,null);return}r&&(0,oW.updateAgentRuntimeErrors)({blockId:t.data.id||e.blockId,fullErrorMessage:n}).catch(n=>{(0,oy.track)("FailedToUpdateBlockRuntimeErrors",{blockId:t.data.id||e.blockId,error:n instanceof Error?n.message:String(n)})})}if("error"===t.data.type){let n=(0,op.cleanBlockError)(t.data.error,t.data.stack);c(r=>r.some(e=>e.text===n)||!p.current?r:((0,oy.track)(t.data.isFatal?"V0BlockPreviewError":"V0BlockPreviewSoftError",{language:"svelte",messageId:e.messageId,blockId:e.blockId,from:void 0!==e.meta.isQuickEdit?"quick-edit":void 0,forkedFromBlockId:h(e.blockId),resultId:e.resultId||""},{errorMsg:n,errorCode:ob.V0_BLOCK_PREVIEW_ERROR}),r.concat({isFatal:t.data.isFatal,blockId:oU.store.get(oj.previewBlockCollectedErrorsVersion)||e.blockId,isServer:t.data.isServer,text:n,currentURL:t.data.currentURL})))}if("frame_onload"===t.data.type&&c([]),("refine"===t.data.type||"add-refinement-element"===t.data.type)&&(C(!1),y.current)){let r=y.current.find(e=>e.meta.file===t.data.file);if(!r)return void alert("File not found");let{componentName:i,sourceContext:a}=(0,oS.structureRefinementData)({event:t,file:r});if("refine"===t.data.type){let o={version:1,parts:[(0,oS.createRefinementPart)({file:r.meta.file,componentName:i||"",sourceContext:a,line:t.data.line,column:t.data.column}),{type:"mdx",content:t.data.prompt}]},s=(null==n?void 0:n.indexOf(e.messageId))||-1;n&&s>0&&s<n.length-1?w({action:"edit",content:o,userMessageId:n[s+1],type:"refinement"}):w({action:"new",content:o,attachments:[],type:"refinement"})}}}},[b,w,n,c,e.messageId,y,i,e.blockId,p,e.meta.isQuickEdit,h,e.resultId,C]);let k="code-project"===e.meta.type&&(null==v?void 0:v.some(e=>{var t,n;return null==(n=e.meta)||null==(t=n.file)?void 0:t.endsWith("+page.svelte")})),S=null;if(e.blockId&&d&&(m||g)){let n=new URLSearchParams;n.set("__v0_renderer","svelte"),t&&n.set("mql","true"),g||!m?n.set("__v0",""):m&&f&&(f.teamId&&f.teamId===s||s===f.id)&&n.set("__v0_token",m),e.isV3&&n.set("isV3","true"),S=(0,a9.jsx)(ox.Iframe,{iframeId:b,isPublished:t,origin:(0,ou.getLiteIframeOrigin)(e.blockId,o),src:"/?".concat(n.toString())}),k&&(S=(0,a9.jsx)("div",{className:"size-full","data-slot":"browser-content",children:S}))}return(0,a9.jsxs)(a6.PreviewBlock,{initialFileTreeSize:e.initialFileTreeSize,...e,loadingPath:x,files:v,blockType:"code-project"!==e.meta.type?"svelte":"code-project",language:"svelte",allowRefresh:!k,allowFullScreen:!k,isV3:e.isV3,initialConsoleSize:e.initialConsoleSize,initialConsoleExpanded:e.initialConsoleExpanded,hideConsole:!u,browserControls:"code-project"===e.meta.type?(0,a9.jsx)(oM.BrowserFrame,{blockId:e.blockId,iframeId:b}):void 0,children:[l.length?(0,a9.jsx)(oh.ErrorsBanner,{blockId:e.blockId,errors:l,onDismiss:()=>{c([])},canWriteToChat:a}):null,S]})}}(0,a7._)(oG,"getIsPreviewable",e=>{let{closed:t,source:n,meta:r}=e;if(!t)return!1;let i=oi(n,r);return"string"==typeof i?{error:i}:i}),(0,a7._)(oG,"Actions",od.default.memo(e=>{let{blockId:t,closed:n}=e;return(0,a9.jsx)(oe.PreviewBlockTitleActions,{blockId:t,closed:n})})),(0,a7._)(oG,"BrowserControls",od.default.memo(e=>{let{blockId:t}=e;return(0,a9.jsx)(oM.BrowserFrame,{blockId:t,iframeId:(0,a8.getBlockIframeId)(t)})})),(0,a7._)(oG,"MoreMenu",od.default.memo(e=>{let{blockId:t,blockLanguage:n,blockSource:r}=e,{fullScreenResult:i,setFullscreenResult:a}=(0,oV.useFullscreenResult)(),{activeTab:o}=(0,of.useActiveTab)(),s=(0,oF.useShouldShowBlocksInDrawer)();return(0,a9.jsxs)(o_.DropdownMenu,{children:[(0,a9.jsx)(o_.DropdownMenuTrigger,{asChild:!0,children:(0,a9.jsx)(oO.Button,{variant:"ghost",className:"size-7 rounded-md text-gray-600",size:"sm",tooltipDirection:"bottom",tooltip:"More options",children:(0,a9.jsx)(oD.MoreHorizontal,{})})}),(0,a9.jsxs)(o_.DropdownMenuContent,{align:"end",side:"bottom",sideOffset:8,children:["code"!==o&&!s&&(0,a9.jsx)(o_.DropdownMenuGroup,{children:(0,a9.jsxs)(o_.DropdownMenuItem,{onSelect:()=>a(!i,t),children:[(0,a9.jsx)(oT.Fullscreen,{}),(0,a9.jsx)("span",{children:i?"Exit fullscreen":"Fullscreen"})]})}),(0,a9.jsx)(o_.DropdownMenuSeparator,{}),(0,a9.jsx)(o_.DropdownMenuGroup,{children:(0,a9.jsx)(oB.BlockActionDownloadZip,{blockId:t,lang:n,source:r})})]})]})})),(0,a7._)(oG,"ConsoleToggle",od.default.memo(e=>{let{blockId:t}=e,[n,r]=(0,ow.useAtom)(oN.consoleVisibilityAtom),{blockStatus:i,clearEvents:a}=(0,oz.useNewConsoleEvents)(t),o=i[t],s=()=>{let e=!n;r(e),e&&a()};return(0,a9.jsx)(oA.CodeBlockButton,{onClick:s,tooltip:{side:"bottom",content:n?"Hide Console":"Show Console"},className:"size-7 rounded-md text-gray-600",children:(0,a9.jsx)(oH.default,{status:o,isExpanded:n})})})),(0,a7._)(oG,"DesignCursorToggle",od.default.memo(()=>{let{atoms:e,actions:t}=(0,oq.useCurrentBlockDesignMode)(),n=(0,ow.useAtomValue)(e.designModeEnabled),r=(0,ow.useAtomValue)(e.selectElementEnabled),i=t.setSelectElementEnabled,{canWriteToChat:a}=(0,oC.useChatMetadata)(),o=(0,oR.useMac)(),{activeTab:s}=(0,of.useActiveTab)();return a&&"code"!==s?(0,a9.jsx)(oA.CodeBlockButton,{onClick:()=>{i(!r)},tooltip:{side:"bottom",content:(0,a9.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a9.jsx)("span",{children:"Select an Element"}),!n&&(0,a9.jsxs)(a9.Fragment,{children:[(0,a9.jsx)(oP.Kbd,{children:(0,a9.jsx)("span",{children:o?"⌥":"Alt"})}),(0,a9.jsx)(oP.Kbd,{children:(0,a9.jsx)("span",{children:"D"})})]})]})},variant:r?"blue-ghost":"ghost",className:(0,oL.cn)("size-7 rounded-md",!r&&"text-gray-600"),children:(0,a9.jsx)(oI.Crosshair,{})}):null}));var oK=u,oX=r,o$=i,oY=aY,oJ=h,oQ=a0,o0=A,o1=oM,o2=aZ;class o5{static Render(e){let{source:t,blockId:n,remoteInfo:r,closed:i}=e,{chatId:a}=(0,o0.useChatId)(),o=(0,oY.getBlockIframeId)("remote-preview"),s=i;return(0,o$.useEffect)(()=>{if(!s||!(n||a))return;let e=new AbortController,t=async()=>{try{await fetch("/chat/api/chat/remote/preview?".concat("@remote"===n?"cid=".concat(a):"bid=".concat(n)),{signal:e.signal})}catch(e){}};return setTimeout(()=>{t()},0),()=>{e.abort()}},[s,a,n]),(0,oX.jsx)(oJ.PreviewBlock,{...e,meta:"@remote"===n?{...e.meta}:{...e.meta,file:"Files"},allowFullScreen:!1,language:"plaintext",blockType:"local",remoteInfo:r,source:t,children:s||"@remote"===n?(0,oX.jsx)(oQ.Iframe,{iframeId:o,isPublished:!1,origin:"",src:"/chat/api/chat/remote/proxy?cid=".concat(a)},o):null})}}(0,oK._)(o5,"getIsPreviewable",e=>{let{closed:t}=e;return t}),(0,oK._)(o5,"Actions",o$.default.memo(e=>{let{blockId:t,closed:n}=e;return"@remote"===t?null:(0,oX.jsx)(o2.PreviewBlockTitleActions,{blockId:t,closed:n})})),(0,oK._)(o5,"BrowserControls",o$.default.memo(e=>{let{blockId:t}=e;return(0,oX.jsx)(o1.BrowserFrame,{blockId:t,iframeId:(0,oY.getBlockIframeId)(t)})})),(0,oK._)(o5,"MoreMenu",null),(0,oK._)(o5,"ConsoleToggle",null),(0,oK._)(o5,"DesignCursorToggle",null);var o4=e.i(301331),o3=e.i(519738),o7=f;function o9(e,t){switch(e){case"node.js":case"nodejs":case"python":return a.CodeExecutionBlockLogic;case"markdown":return aG;case"html":return c.HTMLBlockLogic;case"v0":case"react":case"tsx":return o.V0BlockLogic;case"vue":return a3;case"svelte":return oG;case"code":if("vue"===t)return a3;if("html"===t)return c.HTMLBlockLogic;if("markdown"===t)return aG;if("svelte"===t)return oG;return l.CodeBlockLogic;case"local":return o5;case"code-project":if("svelte"===t)return oG;return s.NextLiteBlockLogic;case"inline-sql":return null}}function o6(e){var t;let{block:n,initialSize:a,initialConsoleSize:o,initialConsoleExpanded:s,initialFileTreeSize:l,allowMobileFullscreen:c,isAuthor:u,title:d}=e,{history:p,currentBlockIndex:h}=(0,o4.useBlockHistory)({blockId:(null==n?void 0:n.id)||""}),{isLatest:f}=(0,o3.useBlockVersionInfo)(null==n?void 0:n.id),m=n?o9(n.type,n.language):null,{activeTab:g}=(0,o7.useActiveTab)(),v=(0,i.useMemo)(()=>!f,[f]);return n&&m?{actions:(0,r.jsx)(m.Actions,{blockId:n.id,closed:n.closed}),browserControls:"code-project"===n.meta.type&&m.BrowserControls&&"code"!==g?(0,r.jsx)(m.BrowserControls,{blockId:n.id}):null,moreMenu:"code-project"===n.meta.type&&m.MoreMenu&&!v?(0,r.jsx)(m.MoreMenu,{blockId:n.id,blockLanguage:n.language,blockSource:n.source}):null,designCursorToggle:"code-project"===n.meta.type&&m.DesignCursorToggle&&!v?(0,r.jsx)(m.DesignCursorToggle,{}):null,consoleToggle:"code-project"===n.meta.type&&m.ConsoleToggle?(0,r.jsx)(m.ConsoleToggle,{blockId:n.id}):null,content:(0,r.jsx)(m.Render,{allowMobileFullscreen:c,initialFileTreeSize:l,blockId:n.id,resultId:n.resultId,closed:n.closed,initialOutputSize:a,messageId:n.messageId,language:n.language,meta:n.meta,source:n.source,remoteInfo:n.remoteInfo,isAuthor:u,hasSourceBeenEdited:n.hasSourceBeenEdited,originalCode:h>0?null==(t=p[h-1])?void 0:t.source:void 0,latestDeploymentInfo:n.latestDeploymentInfo,initialConsoleSize:null!=o?o:void 0,initialConsoleExpanded:null!=s?s:void 0,title:d,skipBrowserFrame:"code-project"===n.meta.type&&!!m.BrowserControls})}:{action:null,content:null}}function o8(e){let{block:t,allowMobileFullscreen:n,initialSize:r,title:i}=e,{content:a}=o6({block:t,initialSize:r,allowMobileFullscreen:n,location:void 0,title:i});return a}},284546,e=>{"use strict";e.s(["useActiveTab",()=>l]);var t=e.i(385671),n=e.i(449381),r=e.i(780292),i=e.i(846139),a=e.i(74356),o=e.i(242759),s=e.i(92479);function l(){let{atoms:e}=(0,t.useChatLayout)(),l=(0,r.useAtomValue)(e.activeTabIntent),{bl:c}=(0,o.useFlags)(),{isStreaming:u}=(0,s.useChatLoadingState)(),d=(0,n.useActiveBlockState)(),p={type:"none"};if(!d)return{activeTab:"code",previewMeta:p,canShowPreviewTab:!1,isBlockPreviewable:!1};let{type:h,language:f}=d,m=(0,i.getBlockLogic)(h,f),g=null==m?void 0:m.getIsPreviewable(d),v=(0,a.canShowPreview)(g||!1),x=function(){return c&&!(null==d?void 0:d.closed)&&u||v}();return(g&&"boolean"!=typeof g?"error"in g?p={type:"error",error:g.error}:"warning"in g&&(p={type:"warning",warning:g.warning}):p={type:"none"},x&&"preview"===l)?{activeTab:"preview",previewMeta:p,canShowPreviewTab:x,isBlockPreviewable:v}:{activeTab:"code",previewMeta:p,canShowPreviewTab:x,isBlockPreviewable:v}}},768619,210045,e=>{"use strict";e.s(["CachedNextLiteIframe",()=>g,"getIframeSrc",()=>m,"markIframeAsLoaded",()=>f],768619);var t=e.i(832520),n=e.i(200407);e.s(["Iframe",()=>u],210045);var r=t,i=e.i(7284),a=n,o=e.i(914483),s=e.i(284546);let l="allow-scripts allow-same-origin allow-forms allow-downloads allow-popups-to-escape-sandbox allow-pointer-lock allow-popups allow-modals allow-orientation-lock allow-presentation",c="fullscreen; camera; microphone; gyroscope; accelerometer; geolocation; clipboard-write; autoplay";function u(e){let{iframeId:t,iframeRef:n,isPublished:u,src:d,origin:p,onLoad:h,dataAppSrc:f}=e,m=p+d,g=(0,o.useSet)(t);(0,a.useEffect)(()=>{g(m)},[g,m]);let{activeTab:v}=(0,s.useActiveTab)();return(0,r.jsx)("iframe",{allow:c,title:"v0 block",className:(0,i.default)("h-full w-full select-none","preview"!==v&&(u?"hidden":"sr-only invisible")),"data-origin":p,"data-v0":!0,"data-app-src":f,id:t,loading:"eager",onLoad:h,ref:n,sandbox:l,src:m,fetchPriority:"high"})}var d=e.i(142219),p=e.i(487581);let h=new WeakSet;function f(e){h.add(e)}function m(e){return e.getAttribute("data-app-src")||e.src}function g(e){let{chatId:r,blockId:i,iframeId:a,origin:o,src:s,...l}=e,[c,f]=(0,n.useState)(o),[m,g]=(0,n.useState)(s),v=(0,n.useRef)(r);(0,n.useEffect)(()=>{if(r!==v.current)f(o),g(s),v.current=r;else{let e=document.getElementById(a);e&&e.contentWindow&&h.has(e)?(d.store.set(p.previewBlockCollectedErrorsVersion,i),d.store.set(p.previewBlockPreloadingSuccessCallback,null),d.store.set(p.previewBlockDisplayedErrorsVersion,i),e.contentWindow.postMessage({type:"switch_client",id:i,fallbackUrl:o+s,__v0_remote__:!0},"*")):(f(o),g(s))}},[r,i,o,s]);let x=o+s;return(0,t.jsx)(u,{iframeId:a,origin:c,src:m,dataAppSrc:x,...l})}},583965,e=>{"use strict";e.s(["useBrowserFrame",()=>l]);var t=e.i(204575),n=e.i(449381),r=e.i(200407),i=e.i(295224),a=e.i(577247),o=e.i(768619),s=e.i(914483);function l(e){let l=(0,n.useActiveBlockState)(),c=e||(null==l?void 0:l.id),[u,d]=(0,s.useGetSet)("browser-frame:canGoBack:".concat(c),!1),[p,h]=(0,s.useGetSet)("browser-frame:canGoForward:".concat(c),!1),[f,m]=(0,s.useGetSet)("browser-frame:href",""),[g,v]=(0,s.useGetSet)("browser-frame:iframe:".concat(c),null),[x,y]=(0,s.useGetSet)("browser-frame:loading:".concat(c),!0),[b,w]=(0,s.useGetSet)("browser-frame:temporalHref:".concat(c),null),j=(0,i.useLatest)(f),C=(0,r.useCallback)(e=>{let t=new URL((0,o.getIframeSrc)(e));if(j.current){let e=new URL(j.current);t.pathname=e.pathname,t.search=e.search,t.hash=e.hash}return t.toString()},[g]),k=(0,r.useCallback)(()=>{g&&(g.contentDocument?g.contentDocument.location.reload():j.current?g.src=C(g):g.src=(0,o.getIframeSrc)(g),w(null),y(!0))},[g,j,C,y,w]);return(0,a.useMessage)(e=>{let{data:t}=e;if(t&&"object"==typeof t&&t.__v0_remote__)switch(t.type){case"location_change":m(e.data.href),d("boolean"==typeof e.data.canGoBack&&e.data.canGoBack),h("boolean"==typeof e.data.canGoForward&&e.data.canGoForward);break;case"app_navigation_state":y(e.data.loading)}},[m,d,h,y]),(0,r.useEffect)(()=>{let e;if(!c)return;let n=(0,t.getBlockIframeId)(c),r=document.getElementById(n);return r||(e=new MutationObserver(()=>{let t=document.getElementById(n);t&&(null==e||e.disconnect(),v(t))})).observe(document.body,{childList:!0,subtree:!0}),v(r),y(!0),()=>{try{null==e||e.disconnect()}catch(e){}}},[c,m,y]),{canGoBack:u,setCanGoBack:d,canGoForward:p,setCanGoForward:h,href:f,setHref:m,iframe:g,latestHref:j,loading:x,setLoading:y,refresh:k,temporalHref:b,setTemporalHref:w,getFullIframeHref:C}}},847252,e=>{"use strict";e.s(["useRecoverFile",()=>a]);var t=e.i(200407),n=e.i(926224),r=e.i(583965),i=e.i(407562);function a(e){let{blockId:a,history:o,activeForkKey:s,updateBlockData:l,sourceFiles:c,currentBlockIndex:u}=e,[d,p]=(0,t.useTransition)(),[h,f]=(0,t.useState)(null),{refresh:m}=(0,r.useBrowserFrame)();return{handleRecoverFile:(0,t.useCallback)(e=>{let t=null,r=u,d=new Set(s);for(;!t&&r>=0;){let i=o[r];if(r-=1,"code-project"!==i.type||!d.has(i.messageId))continue;let s=(0,n.parseMultiFileSource)({source:i.source,blockType:"code-project",blockId:a}).find(t=>t.meta.file===e&&"...deleted..."!==t.source.replaceAll(" ","").trim());s&&(t=s.source)}if(!t)return void i.toast.error("Could not find the file to recover");let h=[...c];for(let n of h)if(n.meta.file===e){n.isDeleted=!1,n.isRecovered=!0,n.isMerged=!1,n.source=t;break}f(e),p(async()=>{try{if(!(await l(h)).success)throw Error("Failed");i.toast.success("File recovered successfully")}catch(e){i.toast.error("Failed to recover the file")}}),m()},[c,m,l,s,a,u,o]),isRecoveringFile:d,recoveringFile:h}}},751660,e=>{"use strict";var t=e.i(832520);let n=16,r="__ADD_ID__",i="0 0 ".concat(n," ").concat(n),a="round",o={top:"text-top",bottom:"text-bottom",middle:"middle",initial:null},s=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{color:l="currentColor",size:c,width:u,height:d,viewBox:p=i}=s;return function(i){let s=Math.random().toString(36).slice(2,11),{size:h,color:f=l||"currentColor",align:m="initial",className:g,width:v,height:x,style:y,...b}=i,w=o[m],j=c||n,C=u||v,k=d||x,S=e.replace(RegExp(r,"g"),s);return(0,t.jsx)("svg",{className:g,dangerouslySetInnerHTML:{__html:S},"data-testid":"geist-icon",height:j,strokeLinejoin:a,style:{...y,verticalAlign:w||void 0,width:C||h,height:k||h,color:f},viewBox:p,width:j,...b},s)}};e.s(["withNewIcon",0,s])},742998,530135,e=>{"use strict";e.s(["Badge",()=>V,"RenderBlockPreview",()=>z],742998);var t=e.i(832520),n=e.i(449381),r=e.i(200407),i=e.i(304649),a=e.i(53223),o=e.i(283751),s=e.i(301331);e.i(563948);var l=e.i(407562),c=e.i(28361),u=e.i(362530),d=e.i(948780),p=e.i(86395),h=e.i(497880),f=e.i(146464),m=e.i(517953),g=e.i(697856),v=e.i(297239),x=e.i(926224),y=e.i(707827),b=e.i(862664),w=e.i(745587),j=e.i(92479),C=e.i(996174),k=e.i(316799),S=e.i(696825),N=e.i(863785),E=e.i(818273),M=e.i(176248),I=e.i(584497),D=e.i(978855),T=e.i(894906),A=e.i(847252),L=e.i(242759),P=e.i(751660);(0,P.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M6.93934 2.06066L8 1L9.06066 2.06066L13.9393 6.93934L15 8L13.9393 9.06066L9.06066 13.9393L8 15L6.93934 13.9393L2.06066 9.06066L1 8L2.06066 6.93934L6.93934 2.06066ZM3.12132 8L8 12.8787L12.8787 8L8 3.12132L3.12132 8Z" fill="#1D4ED8"/>');let R=(0,P.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M6.47141 3.13809L6.94281 2.66669L6 1.72388L5.5286 2.19528L2.19526 5.52861C1.93491 5.78896 1.93491 6.21107 2.19526 6.47142L5.5286 9.80476L6 10.2762L6.94281 9.33335L6.47141 8.86195L4.35948 6.75002H9.66667C10.0497 6.75002 10.429 6.82546 10.7828 6.97204C11.1367 7.11861 11.4582 7.33345 11.7291 7.60429C11.9999 7.87513 12.2147 8.19666 12.3613 8.55053C12.5079 8.90439 12.5833 9.28366 12.5833 9.66669C12.5833 10.0497 12.5079 10.429 12.3613 10.7828C12.2147 11.1367 11.9999 11.4582 11.7291 11.7291C11.4582 11.9999 11.1367 12.2148 10.7828 12.3613C10.429 12.5079 10.0497 12.5834 9.66667 12.5834H7.33333H6.58333V14.0834H7.33333H9.66667C10.2467 14.0834 10.821 13.9691 11.3569 13.7472C11.8927 13.5252 12.3796 13.1999 12.7897 12.7897C13.1998 12.3796 13.5252 11.8927 13.7471 11.3569C13.9691 10.821 14.0833 10.2467 14.0833 9.66669C14.0833 9.08668 13.9691 8.51235 13.7471 7.9765C13.5252 7.44065 13.1998 6.95376 12.7897 6.54363C12.3796 6.13351 11.8927 5.80818 11.3569 5.58622C10.821 5.36426 10.2467 5.25002 9.66667 5.25002H4.35948L6.47141 3.13809Z" fill="currentColor"/>');(0,P.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M10.5304 2.13629L10.0001 1.60596L8.93942 2.66662L9.46975 3.19695L11.5228 5.24995H6.33341C5.16204 5.24995 4.03865 5.71528 3.21036 6.54356C2.38207 7.37185 1.91675 8.49524 1.91675 9.66662C1.91675 10.2466 2.03099 10.8209 2.25295 11.3568C2.47491 11.8927 2.80023 12.3795 3.21036 12.7897C4.03865 13.618 5.16204 14.0833 6.33341 14.0833H8.66675H9.41675V12.5833H8.66675H6.33341C5.55987 12.5833 4.818 12.276 4.27102 11.729C4.00018 11.4582 3.78534 11.1366 3.63877 10.7828C3.49219 10.4289 3.41675 10.0496 3.41675 9.66662C3.41675 8.89307 3.72404 8.1512 4.27102 7.60422C4.818 7.05724 5.55987 6.74995 6.33341 6.74995H11.5228L9.46975 8.80295L8.93942 9.33328L10.0001 10.3939L10.5304 9.86361L13.8637 6.53028C14.1566 6.23739 14.1566 5.76251 13.8637 5.46962L10.5304 2.13629Z" fill="currentColor"/>'),(0,P.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M1.78027 1.78009L2.29198 3.24697L6.04198 13.997L6.59312 15.5769L7.40575 14.1142L9.76699 9.86393C9.78966 9.82312 9.82331 9.78948 9.86412 9.76681L14.1144 7.40556L15.5771 6.59293L13.9972 6.04179L3.24716 2.29179L1.78027 1.78009ZM11.9232 6.90695L9.13565 8.45557C8.84998 8.61428 8.61446 8.8498 8.45575 9.13547L6.90714 11.923L4.21998 4.2198L11.9232 6.90695Z" fill="currentColor"/>');let _=(0,P.withNewIcon)('\n    <path d="M7.19559 1.58153L8.51442 1.58153C9.57531 1.58153 10.5927 2.00297 11.3429 2.75315L13.3372 4.74754C13.4466 4.8569 13.5798 4.93941 13.7264 4.98857L14.8455 5.3638C15.1976 5.48184 15.3027 5.92886 15.0402 6.19141L12.6878 8.54377C12.4205 8.81103 11.9648 8.69655 11.8556 8.33472L11.5725 7.39713C11.5179 7.21622 11.2901 7.15898 11.1564 7.29261L3.91332 14.5358C3.23129 15.2178 2.1255 15.2178 1.44347 14.5358C0.761448 13.8538 0.761448 12.748 1.44347 12.066L8.80323 4.7062C8.90164 4.60779 8.90074 4.44796 8.80123 4.35067L6.84604 2.43904C6.52559 2.12572 6.74742 1.58153 7.19559 1.58153Z" stroke="currentColor" stroke-width="1.5" fill="none"/>\n    <path d="M9.77576 8.56898L7.30088 6.09411" stroke="currentColor" stroke-width="1.5"/>\n    <path d="M2.70825 1.5V1H3.70825V1.5C3.70825 2.60457 4.60368 3.5 5.70825 3.5H6.20825V4V4.5H5.70825C4.60368 4.5 3.70825 5.39543 3.70825 6.5V7H3.20825H2.70825V6.5C2.70825 5.39543 1.81282 4.5 0.708252 4.5H0.208252V4V3.5H0.708252C1.81282 3.5 2.70825 2.60457 2.70825 1.5Z" fill="currentColor"/>\n');e.s(["Build",0,_,"UndoIcon",0,R],530135);var O=e.i(385671),F=e.i(76866);function V(e){let{children:n,className:r}=e;return(0,t.jsx)("div",{className:(0,i.cn)("bg-gray-150 flex h-5 items-center gap-1 rounded-md px-1 text-[12px] text-gray-600",r),children:n})}function B(e){let{closed:n,isStreaming:r,finishReason:i,language:a,isBlob:s}=e;return s?(0,t.jsx)(d.CloudUpload,{className:"size-4 text-gray-500"}):n&&!r&&"stop"===i?(0,t.jsx)(o.FileIcon,{lang:a||"plaintext",fill:"fill-gray-500"}):n&&!r&&"length"===i?(0,t.jsx)(C.Tooltip,{content:"v0 cannot output enough tokens to complete the block",children:(0,t.jsx)("span",{"aria-hidden":!0,children:(0,t.jsx)(m.Warning,{})})}):n||!r||i?(0,t.jsx)(o.FileIcon,{lang:a||"plaintext",fill:"fill-gray-500"}):(0,t.jsx)(y.Spinner,{size:16})}function z(e){let{type:o,blockId:d,messageId:m,...P}=e,_=(0,E.useIsStreaming)(),z=(0,n.useActiveBlockView)(),U=(0,n.useActiveBlockState)();(0,E.useIsV3)();let q=(0,n.useSetActiveBlockView)(),{currentBlockIndex:W,history:Z,projectBlocks:G,latestSource:K,ensureBlockSource:X,isLoadingBlockSource:$}=(0,s.useBlockHistory)({blockId:d,searchAll:!0}),{getBlockShared:Y}=(0,g.useSharedBlocks)(),{getBlockDeployed:J}=(0,b.useDeployedBlocks)(),Q=(0,v.useT)(),ee=(0,w.useSetActiveFile)({blockId:d}),{bl:et}=(0,L.useFlags)(),{getBlockForked:en}=(0,S.useForkedBlocks)(),{getBlockTemplateId:er}=(0,N.useBlockTemplateId)(),{isRestoring:ei,restoreCurrentBlock:ea}=(0,F.useRestoreBlockVersion)(d),{pulsePreview:eo}=(0,s.usePulsePreview)({blockId:d}),{messages:es,activeForkKey:el}=(0,j.useChatMessages)(),ec=(0,r.useMemo)(()=>es.find(e=>e.id===m&&"assistant"===e.role),[es,m]),eu=null==ec?void 0:ec.finishReason,{chatId:ed}=(0,j.useChatId)(),ep=z&&(null==U?void 0:U.id)===d,[eh,ef]=(0,r.useState)(!1),[em,eg]=(0,r.useState)(!1),{actions:{setActiveTabIntent:ev}}=(0,O.useChatLayout)(),ex=K||P.source,ey=(0,r.useCallback)(async()=>{$||await X()},[X,$]);(0,r.useEffect)(()=>ef(!0),[]);let eb="Untitled",ew=o;P.meta.project&&(eb=P.meta.project),P.meta.file&&(ew=P.meta.file||o),"local"===o&&(eb=P.meta.title),"Untitled"===eb&&ex.trimStart().startsWith("// ")&&(eb=ex.trimStart().slice(3).split("\n")[0]),/[_-]/.test(eb)&&(eb=eb.split(/[_-]/).map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" "));let ej=G.find(e=>e.id===d),eC=null==ej?void 0:ej.latestDeploymentInfo,ek=(0,r.useRef)(null),{saveLastOpenedBlock:eS}=(0,k.useLastOpenedBlock)(),{canWriteToChat:eN}=(0,I.useChatMetadata)(),eE=(0,r.useCallback)(async()=>{var e;(0,a.track)("ClickBlockPreview",{blockId:d});let{templateVersionId:t,templateCanonId:n}=null!=(e=er(d))?e:{},r=await X().catch(()=>{l.toast.error("Failed to load block source.")})||ex;if(!r)return;let i={id:d,meta:P.meta,remoteInfo:P.remoteInfo,messageId:m,type:o,language:P.language,source:r,resultId:P.resultId,closed:!!P.closed,hasSourceBeenEdited:!!(null==U?void 0:U.hasSourceBeenEdited),latestDeploymentInfo:eC,templateVersionId:t,templateCanonId:n,forkedFromBlockId:en(d)};q(!0,i),eS(d),ek.current&&(ev("code"),ee(ek.current),ek.current=null,setTimeout(()=>{let e=document.querySelector('[data-active-tab="true"]');e&&e.scrollIntoView({block:"start"})},0))},[d,er,X,P.meta,P.remoteInfo,P.language,P.resultId,P.closed,m,o,null==U?void 0:U.hasSourceBeenEdited,eC,en,q,eS,ev,ee,ex]),eM=(0,r.useMemo)(()=>Y(d)||J(d),[d,Y,J]),eI=!P.closed&&!_&&("other"===eu||!eu),eD="local"===o?(0,t.jsx)(f.PrismColor,{className:"size-4 text-gray-500 [&_path]:fill-current"}):(0,t.jsx)(B,{closed:P.closed,isStreaming:_,finishReason:eu,language:P.language,isBlob:!!P.meta.url}),eT=(0,r.useCallback)(()=>{if(ep&&!ek.current)return;eE();let e=new URL(window.location.href),t=new URLSearchParams(e.search);t.delete("b"),e.search=t.toString(),window.history.replaceState({},"",e.toString())},[ep,eE]),eA=(0,T.useUpdateBlockData)(d),eL=(0,r.useMemo)(()=>"local"===o||"code-project"===o?(0,x.parseMultiFileSource)({source:ex,blockType:o,blockId:d}):[],[ex,o,d]),eP=(0,r.useMemo)(()=>"local"===o||"code-project"===o?eL.filter(e=>!e.isMerged&&!(e.isDeleted&&e.isMoved)):[],[o,eL]),{handleRecoverFile:eR,isRecoveringFile:e_,recoveringFile:eO}=(0,A.useRecoverFile)({blockId:d,history:Z,activeForkKey:el,updateBlockData:eA,sourceFiles:eL,currentBlockIndex:W}),eF=m===(null==el?void 0:el[el.length-1]);(0,r.useEffect)(()=>{(ep||em)&&X().catch(e=>{l.toast.error("Failed to load block source")})},[ep,em,X]);let eV=(0,r.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),eg(e=>!e)},[]);if("code-project"===o){let e=(0,t.jsxs)("div",{className:(0,i.cn)("@container/block-preview-header flex w-full items-center justify-between gap-3 p-2.5",em&&"border-alpha-200 border-b"),onMouseEnter:ey,children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-900",children:[(0,t.jsx)("div",{className:(0,i.cn)("flex items-center gap-1 whitespace-nowrap text-[13px] font-medium pl-1",ep?"text-blue-800":"text-gray-800"),children:P.closed||eI?"Version ".concat(W+1):(0,t.jsxs)(D.LoadingText,{className:"text-[13px] font-medium",children:["Version ",W+1]})}),eM?(0,t.jsxs)(V,{className:"@[19rem]/block-preview-header:flex hidden",children:[(0,t.jsx)(p.Globe,{size:12})," ",Q("blockPreview.deployed")]}):null,eI?(0,t.jsx)(V,{className:"@[19rem]/block-preview-header:flex hidden",children:"STOPPED"}):null]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[eF||!eN?null:(0,t.jsx)(C.Tooltip,{content:ei?"Restoring":"Restore this version",children:(0,t.jsx)(M.Button,{variant:"ghost",className:"size-6 rounded-sm",size:"sm",onClick:e=>{e.preventDefault(),e.stopPropagation(),ea()},disabled:ei,children:ei?(0,t.jsx)(y.Spinner,{size:14}):(0,t.jsx)(R,{})})}),P.closed||eI?(0,t.jsx)(M.Button,{onClick:eV,variant:"ghost",className:"size-6 rounded-sm",size:"sm",children:(0,t.jsx)(u.ChevronUpDown,{})}):(0,t.jsx)("div",{className:"size-6 flex items-center justify-center",children:(0,t.jsx)(y.Spinner,{size:16})})]})]}),n=eP.map((e,n)=>{let a,o=!1;if(et&&n<eP.length-1&&eP[n+1].meta.file===eP[n].meta.file)return null;let s=!!(!P.closed&&(n===eP.length-1||e.isTempFile));return e.isTerminated?(a=(0,t.jsx)(h.Pause,{className:"size-3 text-gray-400"}),o=!0):s?(a=eI?(0,t.jsx)(h.Pause,{className:"size-3 text-gray-400"}):(0,t.jsx)(y.Spinner,{size:14}),o=eI):a=e.isLoading?(0,t.jsx)(y.Spinner,{size:14}):(0,t.jsx)(c.CheckCircleFill,{className:"size-3 text-gray-400"}),(0,t.jsxs)(r.default.Fragment,{children:[(0,t.jsxs)("div",{className:"flex h-5 w-full min-w-0 items-center gap-2 text-[13px]",children:[(0,t.jsx)("div",{className:"flex size-5 shrink-0 items-center justify-center",children:a}),(0,t.jsxs)("div",{className:(0,i.cn)("group/file flex w-full min-w-0 items-center justify-between gap-2"),role:"button",tabIndex:0,onClick:t=>{if(e.isDeleted){t.stopPropagation(),eR(e.meta.file);return}ek.current=e.meta.file},children:[(0,t.jsx)("div",{className:(0,i.cn)("flex-1 cursor-pointer truncate text-left group-hover/file:underline"),children:s&&!eI||e.isLoading?(0,t.jsx)(D.LoadingText,{className:"text-[13px]",children:e.meta.file}):e.meta.file}),(0,t.jsx)(H,{file:e,isRecovering:eO===e.meta.file&&e_,active:s,stopped:o})]})]},n),n!==eP.length-1&&(0,t.jsx)("div",{className:"flex h-3 w-5 items-center justify-center",children:(0,t.jsx)("div",{className:"h-full w-px bg-gray-300"})})]},"block-edit-"+n)}),a=em&&eP.length>0?(0,t.jsx)("div",{className:"bg-muted overflow-hidden",children:(0,t.jsx)("div",{className:(0,i.cn)("flex w-full flex-col overflow-hidden rounded-md py-1.5 pl-2 pr-2.5 text-left text-gray-500"),children:n})}):null;return(0,t.jsxs)("div",{"data-testid":"block-preview",className:(0,i.cn)("not-prose group/block-preview bg-background flex w-full max-w-full cursor-pointer select-none flex-col justify-between overflow-hidden rounded-lg border shadow-[0px_2px_3px_-1px_hsla(0,0%,0%,0.04)] transition-all ease-in-out md:w-[400px]",ep?"ring-blue-100 border-blue-800 ring-2":"hover:ring-alpha-400 border-alpha-400 hover:border-alpha-600",ep&&eo?"animate-pulse-border":""),onClick:eT,children:[e,a]})}return(0,t.jsxs)("div",{"data-testid":"block-preview",className:(0,i.cn)("not-prose bg-background hover:brightness-97 flex w-full max-w-full cursor-pointer select-none items-start justify-between gap-2 rounded-[10px] border p-1.5 transition-all duration-200 ease-in-out md:w-[400px]",ep?"ring-alpha-400 border-gray-500 ring-2":"border-gray-200"),onClick:eT,children:[(0,t.jsx)("div",{className:"flex size-10 shrink-0 items-center justify-center overflow-hidden rounded-sm bg-gray-100 px-3 text-gray-500 transition-all duration-200 ease-in-out",children:eD}),(0,t.jsx)("div",{className:"flex w-full min-w-0 flex-row items-center justify-between",children:(0,t.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col items-start leading-5",children:[(0,t.jsxs)("div",{className:"@container/block-preview-header my-0 flex w-full min-w-0 max-w-full items-center justify-between gap-2 text-sm font-medium text-gray-900",children:[(0,t.jsx)("div",{className:"min-w-0 shrink truncate",children:eb}),(0,t.jsxs)("div",{className:"flex shrink-0 gap-1",children:[eF||!eN?null:(0,t.jsx)(C.Tooltip,{content:ei?"Restoring":"Restore this version",children:(0,t.jsx)(M.Button,{variant:"ghost",className:"size-6 rounded-sm",size:"sm",onClick:e=>{e.preventDefault(),e.stopPropagation(),ea()},disabled:ei,children:ei?(0,t.jsx)(y.Spinner,{size:14}):(0,t.jsx)(R,{})})}),eM?(0,t.jsxs)(V,{className:"@[17rem]/block-preview-header:flex hidden",children:[(0,t.jsx)(p.Globe,{size:12})," ",Q("blockPreview.deployed")]}):null,eI?(0,t.jsx)(V,{className:"@[17rem]/block-preview-header:flex hidden",children:"STOPPED"}):null,(0,t.jsxs)(V,{className:"font-mono",children:["v",W+1]}),"local"===o?(0,t.jsx)(V,{className:"bg-lime-100 dark:bg-lime-900",children:"LOCAL"}):null]})]}),"local"!==o?(0,t.jsxs)("p",{className:"my-0 max-w-full truncate text-sm text-gray-500 ",children:[ew,(null==U?void 0:U.hasSourceBeenEdited)?(0,t.jsx)("span",{children:" (edited)"}):null]}):(0,t.jsx)("ul",{className:"my-0 w-full max-w-full truncate text-left text-gray-500",children:eP.map((e,n)=>(0,t.jsxs)("li",{className:"flex items-center gap-1.5 truncate",children:[e.meta.file,n!==eP.length-1||P.closed?null:(0,t.jsx)("span",{children:(0,t.jsx)(y.Spinner,{size:14})})]},n))})]})})]})}function H(e){let{file:n,active:r,stopped:a,isRecovering:o}=e,s=(()=>!n.isDeleted&&n.isRecovered?"Recovered":a?"Stopped":n.isDeleted?"Deleted":n.blobUrl?r?"Creating":"Added":n.isLocked?"Locked":n.isMoved&&n.isMovedFrom?"Moved":n.isEdit||n.isAttachmentQuickEdit?n.isFixed?r?"Fixing":"Fixed":r?"Editing":"Edited":n.isLoading?"":n.meta.isUserEdit?"Created":r?n.isFixed?"Fixing":"Generating":"Generated")(),l=n.isDeleted?"Recover":null;return o?(0,t.jsx)("div",{className:"flex size-5 shrink-0 items-center justify-center",children:(0,t.jsx)(y.Spinner,{size:14})}):(0,t.jsxs)(t.Fragment,{children:[l?(0,t.jsx)("div",{className:"animate-in fade-in fade-out hidden font-mono text-xs text-gray-500 group-hover/file:block",children:l}):null,(0,t.jsx)("div",{className:(0,i.cn)("font-mono text-xs text-gray-500",l&&"block group-hover/file:hidden"),children:s})]})}},314581,e=>{"use strict";function t(e){return e.slice().reverse()}e.s(["toReversed",()=>t])},86448,e=>{"use strict";let t=(0,e.i(605528).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16ZM9 11C9 11.5523 8.55229 12 8 12C7.44772 12 7 11.5523 7 11C7 10.4477 7.44772 10 8 10C8.55229 10 9 10.4477 9 11ZM7.09584 5.82182C7.25716 5.48223 7.6022 5.25 7.99999 5.25C8.55227 5.25 8.99999 5.69772 8.99999 6.25C8.99999 6.75329 8.62748 7.17086 8.14337 7.23989C7.70367 7.3026 7.24999 7.67511 7.24999 8.25V8.5V9.25H8.74999V8.63535C9.76443 8.31661 10.5 7.36971 10.5 6.25C10.5 4.86929 9.3807 3.75 7.99999 3.75C7.00158 3.75 6.14136 4.3353 5.74095 5.17818L5.41913 5.85563L6.77402 6.49926L7.09584 5.82182Z" fill="currentColor"/>');e.s(["Question",0,t])},330136,e=>{"use strict";e.s(["ContextPillLocalFile",()=>m,"ContextPillMention",()=>x,"ContextPillQuote",()=>g,"ContextPillRefinementElement",()=>v,"Diamond",()=>y],330136);var t=e.i(832520),n=e.i(485952),r=e.i(349774),i=e.i(418929),a=e.i(200407),o=e.i(707827),s=e.i(299313),l=e.i(424725),c=e.i(605528);e.i(904347);var u=e.i(37737);e.i(563948);var d=e.i(407562),p=e.i(375465);function h(e){let{data:t,isLoading:n,error:r}=(0,p.default)(e||null,e=>fetch("/chat/api/chat/download?url=".concat(e)).then(e=>e.text()));return r&&d.toast.error("Failed to load file content"),{content:t,isLoading:n}}var f=e.i(73687);let m=(0,a.memo)(function(e){let{data:n,onRemove:c,onRename:d}=e,{content:p}=h(n.url),f=(0,a.useMemo)(()=>(0,i.isUploading)(n.status),[n.status]),m=(0,a.useMemo)(()=>n.isImage&&n.url&&!(0,i.isUploading)(n.status)?n.url:null,[n.isImage,n.url,n.status]),g=(0,a.useMemo)(()=>m?(0,t.jsx)(s.default,{width:16,height:16,className:"border-alpha-200 absolute overflow-hidden inset-0 h-4 rounded-[4px] border",src:m,alt:n.name,onLoad:()=>{}}):f?(0,t.jsx)(o.Spinner,{size:14}):(0,t.jsx)(l.PillIcon,{children:(0,t.jsx)(r.File,{})}),[m,n.name,f]);function v(){(0,u.openDialog)({type:"attachmentPreview",data:{attachment:{url:n.url,name:n.name,contentType:n.contentType,v0Type:n.v0Type,size:0},content:p,onRename:d}})}return(0,t.jsx)(l.ContextPill,{prefix:g,canRemove:!f&&!!c,onRemove:c,onClick:v,children:n.name})}),g=(0,a.memo)(function(e){let{data:r,onRemove:i}=e;return(0,t.jsx)(l.ContextPill,{prefix:(0,t.jsx)(l.PillIcon,{children:(0,t.jsx)(n.AlignmentLeft,{})}),canRemove:!0,onRemove:i,children:r.quote})}),v=(0,a.memo)(function(e){let{data:n,onRemove:r}=e;return(0,t.jsx)(l.ContextPill,{variant:"refinement",prefix:(0,t.jsx)(l.PillIcon,{className:"text-current",children:(0,t.jsx)(y,{})}),canRemove:!!r,onRemove:r,children:n.componentName||null})}),x=(0,a.memo)(function(e){let{data:n,type:r,onRemove:i}=e,{icon:a,className:o}=(0,f.getMentionIcon)({type:r,data:n});return(0,t.jsx)(l.ContextPill,{canRemove:!0,prefix:(0,t.jsx)(l.PillIcon,{className:o,children:a}),onRemove:i,children:n.title})}),y=(0,c.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M6.93934 2.06066L8 1L9.06066 2.06066L13.9393 6.93934L15 8L13.9393 9.06066L9.06066 13.9393L8 15L6.93934 13.9393L2.06066 9.06066L1 8L2.06066 6.93934L6.93934 2.06066ZM3.12132 8L8 12.8787L12.8787 8L8 3.12132L3.12132 8Z" fill="currentColor"/>')},567407,e=>{"use strict";let t=["background","foreground","card","card-foreground","popover","popover-foreground","primary","primary-foreground","secondary","secondary-foreground","muted","muted-foreground","accent","accent-foreground","destructive","destructive-foreground","border","input","ring","chart-1","chart-2","chart-3","chart-4","chart-5","sidebar","sidebar-foreground","sidebar-primary","sidebar-primary-foreground","sidebar-accent","sidebar-accent-foreground","sidebar-border","sidebar-ring"],n=["radius"];[...t,...n],e.s(["SHADCN_COMMON_TOKENS",0,n,"SHADCN_LIGHT_DARK_TOKENS",0,t])},471964,e=>{"use strict";let t={common:{radius:"0.5rem"},light:{background:"oklch(1 0 0)",foreground:"oklch(0.1450 0 0)",card:"oklch(1 0 0)","card-foreground":"oklch(0.1450 0 0)",popover:"oklch(1 0 0)","popover-foreground":"oklch(0.1450 0 0)",primary:"oklch(0.2050 0 0)","primary-foreground":"oklch(0.9850 0 0)",secondary:"oklch(0.9700 0 0)","secondary-foreground":"oklch(0.2050 0 0)",muted:"oklch(0.9700 0 0)","muted-foreground":"oklch(0.5560 0 0)",accent:"oklch(0.9700 0 0)","accent-foreground":"oklch(0.2050 0 0)",destructive:"oklch(0.5770 0.2450 27.3250)","destructive-foreground":"oklch(1 0 0)",border:"oklch(0.9220 0 0)",input:"oklch(0.9220 0 0)",ring:"oklch(0.7080 0 0)","chart-1":"oklch(0.8100 0.1000 252)","chart-2":"oklch(0.6200 0.1900 260)","chart-3":"oklch(0.5500 0.2200 263)","chart-4":"oklch(0.4900 0.2200 264)","chart-5":"oklch(0.4200 0.1800 266)",sidebar:"oklch(0.9850 0 0)","sidebar-foreground":"oklch(0.1450 0 0)","sidebar-primary":"oklch(0.2050 0 0)","sidebar-primary-foreground":"oklch(0.9850 0 0)","sidebar-accent":"oklch(0.9700 0 0)","sidebar-accent-foreground":"oklch(0.2050 0 0)","sidebar-border":"oklch(0.9220 0 0)","sidebar-ring":"oklch(0.7080 0 0)"},dark:{background:"oklch(0.1450 0 0)",foreground:"oklch(0.9850 0 0)",card:"oklch(0.2050 0 0)","card-foreground":"oklch(0.9850 0 0)",popover:"oklch(0.2690 0 0)","popover-foreground":"oklch(0.9850 0 0)",primary:"oklch(0.9220 0 0)","primary-foreground":"oklch(0.2050 0 0)",secondary:"oklch(0.2690 0 0)","secondary-foreground":"oklch(0.9850 0 0)",muted:"oklch(0.2690 0 0)","muted-foreground":"oklch(0.7080 0 0)",accent:"oklch(0.3710 0 0)","accent-foreground":"oklch(0.9850 0 0)",destructive:"oklch(0.7040 0.1910 22.2160)","destructive-foreground":"oklch(0.9850 0 0)",border:"oklch(0.2750 0 0)",input:"oklch(0.3250 0 0)",ring:"oklch(0.5560 0 0)","chart-1":"oklch(0.8100 0.1000 252)","chart-2":"oklch(0.6200 0.1900 260)","chart-3":"oklch(0.5500 0.2200 263)","chart-4":"oklch(0.4900 0.2200 264)","chart-5":"oklch(0.4200 0.1800 266)",sidebar:"oklch(0.2050 0 0)","sidebar-foreground":"oklch(0.9850 0 0)","sidebar-primary":"oklch(0.4880 0.2430 264.3760)","sidebar-primary-foreground":"oklch(0.9850 0 0)","sidebar-accent":"oklch(0.2690 0 0)","sidebar-accent-foreground":"oklch(0.9850 0 0)","sidebar-border":"oklch(0.2750 0 0)","sidebar-ring":"oklch(0.4390 0 0)"}};e.s(["initialStyles",0,t])},209248,756636,e=>{"use strict";e.i(541536);var t=e.i(23474);let n=t.z.enum(["registry:lib","registry:block","registry:component","registry:ui","registry:hook","registry:page","registry:file","registry:theme","registry:style","registry:item","registry:example","registry:internal"]),r=t.z.discriminatedUnion("type",[t.z.object({path:t.z.string(),content:t.z.string().optional(),type:t.z.enum(["registry:file","registry:page"]),target:t.z.string()}),t.z.object({path:t.z.string(),content:t.z.string().optional(),type:n.exclude(["registry:file","registry:page"]),target:t.z.string().optional()})]),i=t.z.object({config:t.z.object({content:t.z.array(t.z.string()).optional(),theme:t.z.record(t.z.string(),t.z.any()).optional(),plugins:t.z.array(t.z.string()).optional()}).optional()}),a=t.z.object({theme:t.z.record(t.z.string(),t.z.string()).optional(),light:t.z.record(t.z.string(),t.z.string()).optional(),dark:t.z.record(t.z.string(),t.z.string()).optional()}),o=t.z.record(t.z.string(),t.z.lazy(()=>t.z.union([t.z.string(),t.z.record(t.z.string(),t.z.union([t.z.string(),t.z.record(t.z.string(),t.z.string())]))]))),s=t.z.record(t.z.string(),t.z.string()),l=t.z.object({$schema:t.z.string().optional(),extends:t.z.string().optional(),name:t.z.string(),type:n,title:t.z.string().optional(),author:t.z.string().min(2).optional(),description:t.z.string().optional(),dependencies:t.z.array(t.z.string()).optional(),devDependencies:t.z.array(t.z.string()).optional(),registryDependencies:t.z.array(t.z.string()).optional(),files:t.z.array(r).optional(),tailwind:i.optional(),cssVars:a.optional(),css:o.optional(),envVars:s.optional(),meta:t.z.record(t.z.string(),t.z.any()).optional(),docs:t.z.string().optional(),categories:t.z.array(t.z.string()).optional()}),c=t.z.object({name:t.z.string(),homepage:t.z.string(),items:t.z.array(l)});t.z.array(l),t.z.array(t.z.object({name:t.z.string(),label:t.z.string()})),t.z.record(t.z.string(),t.z.record(t.z.string(),t.z.string())),t.z.object({inlineColors:t.z.object({light:t.z.record(t.z.string(),t.z.string()),dark:t.z.record(t.z.string(),t.z.string())}),cssVars:a,cssVarsV4:a.optional(),inlineColorsTemplate:t.z.string(),cssVarsTemplate:t.z.string()}),l.pick({dependencies:!0,devDependencies:!0,files:!0,tailwind:!0,cssVars:!0,css:!0,envVars:!0,docs:!0});let u=t.z.union([t.z.string().refine(e=>e.includes("{name}"),{message:"Registry URL must include {name} placeholder"}),t.z.object({url:t.z.string().refine(e=>e.includes("{name}"),{message:"Registry URL must include {name} placeholder"}),params:t.z.record(t.z.string(),t.z.string()).optional(),headers:t.z.record(t.z.string(),t.z.string()).optional()})]),d=t.z.record(t.z.string().refine(e=>e.startsWith("@"),{message:"Registry names must start with @ (e.g., @v0, @acme)"}),u),p=t.z.object({$schema:t.z.string().optional(),style:t.z.string(),rsc:t.z.coerce.boolean().default(!1),tsx:t.z.coerce.boolean().default(!0),tailwind:t.z.object({config:t.z.string().optional(),css:t.z.string(),baseColor:t.z.string(),cssVariables:t.z.boolean().default(!0),prefix:t.z.string().default("").optional()}),iconLibrary:t.z.string().optional(),aliases:t.z.object({components:t.z.string(),utils:t.z.string(),ui:t.z.string().optional(),lib:t.z.string().optional(),hooks:t.z.string().optional()}),registries:d.optional()}).strict().extend({resolvedPaths:t.z.object({cwd:t.z.string(),tailwindConfig:t.z.string(),tailwindCss:t.z.string(),utils:t.z.string(),components:t.z.string(),lib:t.z.string(),hooks:t.z.string(),ui:t.z.string()})});t.z.record(p),e.s(["registryItemSchema",0,l,"registrySchema",0,c],756636),e.s([],209248)},150015,e=>{"use strict";e.i(209248);var t=e.i(756636),n=e.i(567407);function r(e){let n;if("string"==typeof e)try{n=JSON.parse(e)}catch(e){throw Error("Invalid JSON parsing registry")}else n=e;return t.registrySchema.parse(n)}function i(e){let n;if("string"==typeof e)try{n=JSON.parse(e)}catch(e){throw Error("Invalid JSON parsing registry item")}else n=e;return t.registryItemSchema.parse(n)}function a(e,t){return e?Object.fromEntries(Object.entries(e).map(e=>{let[t,n]=e;return[t.replace(/^--/,""),n]}).filter(e=>{let[n]=e;return t.includes(n)})):{}}function o(e){var t,r,o;let s=i(e),l=a(null==(t=s.cssVars)?void 0:t.light,n.SHADCN_COMMON_TOKENS);return{common:l,light:a(null==(r=s.cssVars)?void 0:r.light,n.SHADCN_LIGHT_DARK_TOKENS),dark:a(null==(o=s.cssVars)?void 0:o.dark,n.SHADCN_LIGHT_DARK_TOKENS)}}function s(e){return r(e).items.filter(e=>e.cssVars).map(o).reduce((e,t)=>{let n=(e,t)=>Object.entries(t).reduce((e,t)=>{let[n,r]=t;return n in e?e:{...e,[n]:r}},e);return{common:n(e.common,t.common),light:n(e.light,t.light),dark:n(e.dark,t.dark)}},{common:{},light:{},dark:{}})}e.s(["parseRegistryItem",()=>i,"registryToPartialShadcnStyle",()=>s])},542245,514989,e=>{"use strict";var t=e.i(205341),n=e.i(753533),r=e.i(142219),i=e.i(567407),a=e.i(471964),o=e.i(972287),s=a,l=e.i(150015);function c(e,t){return{...e,...t}}function u(e,t){return{...t,...e,common:c(t.common,e.common),light:c(t.light,e.light),dark:c(t.dark,e.dark)}}function d(e){let t=s.initialStyles;return u((0,l.registryToPartialShadcnStyle)(e),t)}e.s(["getShadcnStyleFromRegistry",()=>d],514989);let p=null,h=(0,n.cacheResult)(p,()=>({shadcnStyle:(0,t.atom)(a.initialStyles),previewMode:(0,t.atom)("light")})),f=(0,n.cacheResult)(null,()=>{let e=h(),n=(0,o.getScopedAtoms)();return{shadcnStyle:e.shadcnStyle,previewMode:e.previewMode,designSystems:(0,t.atom)(e=>e(n.designSystems).data)}});function m(){let e=h();return{setPreviewMode:t=>r.store.set(e.previewMode,t),updateStyleToken:(t,n)=>{let a=r.store.get(e.previewMode),o=r.store.get(e.shadcnStyle);i.SHADCN_COMMON_TOKENS.includes(t)?r.store.set(e.shadcnStyle,{...o,common:{...o.common,[t]:n}}):i.SHADCN_LIGHT_DARK_TOKENS.includes(t)&&r.store.set(e.shadcnStyle,{...o,[a]:{...o[a],[t]:n}})},updateStyleFromDesignSystem:t=>{r.store.set(e.shadcnStyle,d(t.registry))},resetToDefaults:()=>{r.store.set(e.shadcnStyle,a.initialStyles),r.store.set(e.previewMode,"light")}}}e.s(["getDesignSystemActions",()=>m,"getDesignSystemAtoms",0,f,"getWritableDesignSystemAtoms",0,h],542245)},20529,e=>{"use strict";var t=e.i(547259),n=(0,t.createServerReference)("7fb0866453b35424747bd237d4c3c2c39cb51ae93d",t.callServer,void 0,t.findSourceMapURL,"applyDesignSystemRegistry");e.s(["applyDesignSystemRegistry",()=>n])},631972,671908,790288,e=>{"use strict";e.s(["DesignSystemButton",()=>ea],631972);var t=e.i(832520),n=e.i(200407),r=e.i(176248),i=e.i(596359),a=e.i(608142),o=e.i(940393),s=e.i(574768),l=e.i(242759),c=e.i(304649);e.i(472428);var u=e.i(152641),d=e.i(542245),p=e.i(780292),h=e.i(729602),f=e.i(297239),m=e.i(343258),g=n,v=e.i(20529),x=e.i(455552),y=e.i(926224),b=e.i(204575),w=e.i(476371),j=e.i(407562),C=e.i(894906);function k(e){let t=(null==e?void 0:e.compiledTailwindPlugin)?e.compiledTailwindPlugin:'@import "tw-animate-css";',n=(null==e?void 0:e.includeFontHints)?"\n  /* optional: --font-sans, --font-serif, --font-mono if they are applied in the layout.tsx */":"";return"".concat((null==e?void 0:e.skipTailwindRuntimeImport)?"":'@import "tailwindcss"',"\n").concat(t,"\n\n@custom-variant dark (&:is(.dark *));\n \n:root {\n  --background: oklch(1 0 0);\n  --foreground: oklch(0.145 0 0);\n  --card: oklch(1 0 0);\n  --card-foreground: oklch(0.145 0 0);\n  --popover: oklch(1 0 0);\n  --popover-foreground: oklch(0.145 0 0);\n  --primary: oklch(0.205 0 0);\n  --primary-foreground: oklch(0.985 0 0);\n  --secondary: oklch(0.97 0 0);\n  --secondary-foreground: oklch(0.205 0 0);\n  --muted: oklch(0.97 0 0);\n  --muted-foreground: oklch(0.556 0 0);\n  --accent: oklch(0.97 0 0);\n  --accent-foreground: oklch(0.205 0 0);\n  --destructive: oklch(0.577 0.245 27.325);\n  --destructive-foreground: oklch(0.577 0.245 27.325);\n  --border: oklch(0.922 0 0);\n  --input: oklch(0.922 0 0);\n  --ring: oklch(0.708 0 0);\n  --chart-1: oklch(0.646 0.222 41.116);\n  --chart-2: oklch(0.6 0.118 184.704);\n  --chart-3: oklch(0.398 0.07 227.392);\n  --chart-4: oklch(0.828 0.189 84.429);\n  --chart-5: oklch(0.769 0.188 70.08);\n  --radius: 0.625rem;\n  --sidebar: oklch(0.985 0 0);\n  --sidebar-foreground: oklch(0.145 0 0);\n  --sidebar-primary: oklch(0.205 0 0);\n  --sidebar-primary-foreground: oklch(0.985 0 0);\n  --sidebar-accent: oklch(0.97 0 0);\n  --sidebar-accent-foreground: oklch(0.205 0 0);\n  --sidebar-border: oklch(0.922 0 0);\n  --sidebar-ring: oklch(0.708 0 0);\n}\n \n.dark {\n  --background: oklch(0.145 0 0);\n  --foreground: oklch(0.985 0 0);\n  --card: oklch(0.145 0 0);\n  --card-foreground: oklch(0.985 0 0);\n  --popover: oklch(0.145 0 0);\n  --popover-foreground: oklch(0.985 0 0);\n  --primary: oklch(0.985 0 0);\n  --primary-foreground: oklch(0.205 0 0);\n  --secondary: oklch(0.269 0 0);\n  --secondary-foreground: oklch(0.985 0 0);\n  --muted: oklch(0.269 0 0);\n  --muted-foreground: oklch(0.708 0 0);\n  --accent: oklch(0.269 0 0);\n  --accent-foreground: oklch(0.985 0 0);\n  --destructive: oklch(0.396 0.141 25.723);\n  --destructive-foreground: oklch(0.637 0.237 25.331);\n  --border: oklch(0.269 0 0);\n  --input: oklch(0.269 0 0);\n  --ring: oklch(0.439 0 0);\n  --chart-1: oklch(0.488 0.243 264.376);\n  --chart-2: oklch(0.696 0.17 162.48);\n  --chart-3: oklch(0.769 0.188 70.08);\n  --chart-4: oklch(0.627 0.265 303.9);\n  --chart-5: oklch(0.645 0.246 16.439);\n  --sidebar: oklch(0.205 0 0);\n  --sidebar-foreground: oklch(0.985 0 0);\n  --sidebar-primary: oklch(0.488 0.243 264.376);\n  --sidebar-primary-foreground: oklch(0.985 0 0);\n  --sidebar-accent: oklch(0.269 0 0);\n  --sidebar-accent-foreground: oklch(0.985 0 0);\n  --sidebar-border: oklch(0.269 0 0);\n  --sidebar-ring: oklch(0.439 0 0);\n}\n\n@theme inline {").concat(n||"\n  --font-sans: var(--font-geist-sans);\n  --font-mono: var(--font-geist-mono);\n","\n  --color-background: var(--background);\n  --color-foreground: var(--foreground);\n  --color-card: var(--card);\n  --color-card-foreground: var(--card-foreground);\n  --color-popover: var(--popover);\n  --color-popover-foreground: var(--popover-foreground);\n  --color-primary: var(--primary);\n  --color-primary-foreground: var(--primary-foreground);\n  --color-secondary: var(--secondary);\n  --color-secondary-foreground: var(--secondary-foreground);\n  --color-muted: var(--muted);\n  --color-muted-foreground: var(--muted-foreground);\n  --color-accent: var(--accent);\n  --color-accent-foreground: var(--accent-foreground);\n  --color-destructive: var(--destructive);\n  --color-destructive-foreground: var(--destructive-foreground);\n  --color-border: var(--border);\n  --color-input: var(--input);\n  --color-ring: var(--ring);\n  --color-chart-1: var(--chart-1);\n  --color-chart-2: var(--chart-2);\n  --color-chart-3: var(--chart-3);\n  --color-chart-4: var(--chart-4);\n  --color-chart-5: var(--chart-5);\n  --radius-sm: calc(var(--radius) - 4px);\n  --radius-md: calc(var(--radius) - 2px);\n  --radius-lg: var(--radius);\n  --radius-xl: calc(var(--radius) + 4px);\n  --color-sidebar: var(--sidebar);\n  --color-sidebar-foreground: var(--sidebar-foreground);\n  --color-sidebar-primary: var(--sidebar-primary);\n  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);\n  --color-sidebar-accent: var(--sidebar-accent);\n  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);\n  --color-sidebar-border: var(--sidebar-border);\n  --color-sidebar-ring: var(--sidebar-ring);\n}\n \n@layer base {\n  * {\n    @apply border-border outline-ring/50;\n  }\n  body {\n    @apply bg-background text-foreground;\n  }\n}")}var S=e.i(449381),N=e.i(301331),E=e.i(53223),M=e.i(547259),I=(0,M.createServerReference)("7fff72ab9f378195ce4774b87114c6cc067af2f6bc",M.callServer,void 0,M.findSourceMapURL,"setDesignSystemOnChat"),D=u;function T(e){return e.replace(/\s+/g," ").trim()}let A=["app/globals.css","src/app/globals.css","styles/globals.css","src/styles/globals.css"];function L(e){return R(e.map(e=>e.meta.file))}function P(e){var t;if(!e)return null;let n=L(e);return null!=(t=e.find(e=>e.meta.file===n))?t:null}function R(e){for(let t of A)if(e.some(e=>e===t))return t;return A[0]}function _(e){for(let n of A){var t;let r=null==(t=e.current)?void 0:t.getContent(n);if(r)return{path:n,content:r}}return{path:null,content:null}}function O(e){let{chatId:t,designSystems:n,editValueMap:r,setEditValueMap:i}=e,{data:a,mutate:o}=(0,D.useServerQuerySWR)(["chat","attributes"],{}),[s,l]=(0,g.useState)(null),[c,u]=(0,g.useState)(null),[d,p]=(0,g.useState)(!1),[h,f]=(0,g.useTransition)(),m=(0,S.useActiveBlockState)(),{latestBlock:M}=(0,N.useBlockHistory)({blockId:null==m?void 0:m.id,searchAll:!0}),A=(0,g.useCallback)(()=>{if(!m)return null;let e="code-project"===m.type?(0,y.parseMultiFileSource)({source:m.source,blockType:"code-project",blockId:m.id}):[],t=P(e);return{files:e,globalsCssFile:t}},[m]),R=(0,g.useCallback)(async()=>{if(t&&m&&!d&&!c){p(!0);try{let e=A();if(!e)return;let{files:r,globalsCssFile:i}=e,a=L(r),o=i||(0,y.createNewFile)(k(),a,"css",m.id),s=[...n.map(e=>e.designSystemId),null].map(async e=>{try{let t={designSystemId:e,globalsCss:o.source},n=await fetch("/api/chats/design-systems/apply-registry",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){let e=await n.text();throw Error("Failed to apply design system: ".concat(e))}let r=await n.json();return{id:e||"default",result:r}}catch(n){return(0,E.track)("ApplyDesignSystemError",{designSystemId:e,chatId:t,globalsCssContent:T(o.source),error:"Failed to fetch design system registry: ".concat(n instanceof Error?n.message:"Request failed")}),{id:e||"default",result:{success:!1,error:"Request failed"}}}}),l=await Promise.allSettled(s),c={};l.forEach(e=>{if("fulfilled"===e.status){let{id:t,result:n}=e.value;n.success&&"data"in n&&(c[t]=n.data)}}),u(c)}catch(n){var e,r;j.toast.error("There was an error applying the design system. The team has been notified."),(0,E.track)("ApplyDesignSystemError",{designSystemId:null,chatId:t,globalsCssContent:T((null==(r=A())||null==(e=r.globalsCssFile)?void 0:e.source)||""),error:"Failed to precompute globals with design systems: ".concat(n instanceof Error?n.message:"Unknown error")})}finally{p(!1)}}},[t,m,d,c,A,n]);(0,g.useEffect)(()=>{u(null)},[null==m?void 0:m.id]);let _=(0,g.useCallback)(e=>{if(!c)return;let t=A();if(!t)return;let{files:n,globalsCssFile:i}=t,a=(0,b.getBlockIframeId)(m.resultId||m.id),o=document.getElementById(a);if(!o)return;let s=L(n),l=i||(0,y.createNewFile)(k(),s,"css",m.id),u=e||"default",d=c[u]?c[u]:null;if(!d)return;let p={...r,[l.meta.file]:d},h=i?n:[...n,{...l,source:l.source}],f=(0,x.updateFilesInFileList)(p,h),g=(0,x.getMultiFileSourceMap)(f);(0,w.updatePreviewImmediate)(o,g)},[A,m,r,c]),O=(0,g.useCallback)(()=>{if(s){let e=A();if(!e)return;let{files:t,globalsCssFile:n}=e,i=(0,b.getBlockIframeId)(m.resultId||m.id),a=document.getElementById(i);if(!a)return;let o=L(t),s=n||(0,y.createNewFile)(k(),o,"css",m.id),c={...r,...n?{}:{[s.meta.file]:s.source}},u=n?t:[...t,s],d=(0,x.updateFilesInFileList)(c,u),p=(0,x.getMultiFileSourceMap)(d);(0,w.updatePreviewImmediate)(a,p),l(null)}},[s,A,m,r]),F=(0,C.useUpdateBlockData)((null==m?void 0:m.id)||""),V=(0,g.useCallback)(e=>{t&&f(async()=>{var s,c,d,p;try{let d;if(!a)return;let p=A();if(!p){(0,E.track)("ApplyDesignSystemError",{designSystemId:e,chatId:t,globalsCssContent:"",error:"Failed to get files and globals CSS: No files found"}),j.toast.error("Failed to apply design system. The team has been notified.");return}let{files:h}=p,f=(0,x.updateFilesInFileList)(r||{},h),g=P(f),C=L(f),S=g||(0,y.createNewFile)(k(),C,"css",m.id),N=n.find(t=>t.designSystemId===e);if(!N&&null!==e)return;try{d=await (0,v.applyDesignSystemRegistry)({designSystemId:null!=(s=null==N?void 0:N.designSystemId)?s:null,globalsCss:S.source})}catch(e){j.toast.error("There was an error applying the design system. The team has been notified."),(0,E.track)("ApplyDesignSystemError",{designSystemId:null!=(c=null==N?void 0:N.designSystemId)?c:null,chatId:t,globalsCssContent:T(S.source),error:"Failed to apply design system registry: ".concat(e instanceof Error?e.message:"Unknown registry error")});return}let D=(0,b.getBlockIframeId)(m.resultId||m.id),R=document.getElementById(D);if(R){let e=(0,x.updateFilesInFileList)({...r,[S.meta.file]:d.data},g?f:[...f,{...S,source:S.source}]),t=(0,x.getMultiFileSourceMap)(e);(0,w.updatePreviewImmediate)(R,t)}let _=g?f.map(e=>e.meta.file===S.meta.file?{...e,source:d.data}:e):[...f,{...S,source:d.data}];if((await F(_)).success)u(null),l(null),i({}),j.toast.success("Design system applied and saved successfully");else{j.toast.error("Failed to save design system changes. The team has been notified."),(0,E.track)("ApplyDesignSystemError",{designSystemId:e,chatId:t,globalsCssContent:T(S.source),error:"Failed to save block data: updateBlockData returned unsuccessful response"});return}e&&(0,E.track)("SetDesignSystem",{designSystemId:e,latestBlockId:(null==M?void 0:M.id)||null}),await o({serverMutate:I({chatId:t,designSystemId:e}),optimisticData:{...a,designSystemId:e}})}catch(n){j.toast.error("Failed to apply design system. The team has been notified."),(0,E.track)("ApplyDesignSystemError",{designSystemId:e,chatId:t,globalsCssContent:T((null==(p=A())||null==(d=p.globalsCssFile)?void 0:d.source)||""),error:"Unexpected error applying design system: ".concat(n instanceof Error?n.message:"Unknown error")})}})},[t,A,r,m,n,F,o,a,i,null==M?void 0:M.id]);return{globalsCssWithDesignSystem:c,isPrecomputingGlobals:d,loadGlobalsWithDesignSystem:R,previewDesignSystem:_,revertPreview:s,setRevertPreview:l,handleRevertPreview:O,applyDesignSystem:V,isApplyingDesignSystem:h}}e.s(["getGlobalsCssFromFiles",()=>P,"getGlobalsCssPathFromFiles",()=>L,"getGlobalsCssWithInlineEdit",()=>_],671908);var F=n;let V=['@import "tailwindcss"',"@import 'tailwindcss'"];function B(e){let t;if(!e)return;let n=e["package.json"];if(!n)return;try{t=JSON.parse(n)}catch(e){return}let r={...t.devDependencies,...t.dependencies}.tailwindcss;if("string"==typeof r){let e=r.match(/^[\^~>=<]*?(\d+)/);if(e){let t=parseInt(e[1]);if(4===t)return 4;if(3===t)return 3}}}function z(e){if(!e)return;let t=!1,n=!1;for(let[r,i]of Object.entries(e))if(r.endsWith(".css")){if(V.some(e=>i.includes(e))){t=!0;break}i.includes("@tailwind")&&(n=!0)}return t?4:n?3:void 0}function H(e){if(e&&(e["tailwind.config.js"]||e["tailwind.config.ts"]))return 3}function U(e){return e.tailwindV4Default?4:3}function q(e,t){var n,r,i;return null!=(i=null!=(r=null!=(n=B(e))?n:z(e))?r:H(e))?i:U(t)}var W=e.i(584497),Z=S,G=N,K=y;function X(e){var t;let n=(0,Z.useActiveBlockState)(),{latestSource:r}=(0,G.useBlockHistory)({blockId:(null==n?void 0:n.id)||"",searchAll:!1,includeNonVersionedBlocks:!1}),i=null!=(t=(0,W.useChatMetadata)(e).tailwindV4Default)&&t;return{isTWv4:(0,F.useMemo)(()=>{if(!r||(null==n?void 0:n.type)!=="code-project")return!1;let e=(0,K.parseMultiFileSource)({source:r,blockType:"code-project",blockId:n.id||""}),t={};for(let n of e)t[n.meta.file]=n.source;return 4===q(t,{tailwindV4Default:i})},[i,r,null==n?void 0:n.type,null==n?void 0:n.id])}}var $=S,Y=N,J=t,Q=e.i(35590);function ee(e){return!!(e.primary&&e.accent&&e.secondary&&e.border)}function et(e){let{colors:t}=e,n=[t.primary,t.accent,t.secondary,t.border];return(0,J.jsxs)("div",{className:"relative grid grid-cols-2 size-4 rounded-sm overflow-hidden",children:[n.map((e,t)=>(0,J.jsx)("div",{style:{backgroundColor:e},className:"w-2 h-2"},t)),(0,J.jsx)("div",{className:"absolute inset-0 border border-alpha-400 rounded-sm pointer-events-none"})]})}function en(e){var t,n,r,i,a,o,s,l;let{designSystem:c}=e,{resolvedTheme:u}=(0,Q.useTheme)();if(0===c.registry.items.length)return null;let d=c.registry.items[0],p={primary:null==(n=d.cssVars)||null==(t=n[u])?void 0:t.primary,accent:null==(i=d.cssVars)||null==(r=i[u])?void 0:r.accent,secondary:null==(o=d.cssVars)||null==(a=o[u])?void 0:a.secondary,border:null==(l=d.cssVars)||null==(s=l[u])?void 0:s.border};return ee(p)?(0,J.jsx)(et,{colors:p}):(0,J.jsx)(er,{})}function er(){let e={primary:"transparent",secondary:"transparent",accent:"transparent",border:"transparent"};return(0,J.jsx)(et,{colors:e})}function ei(e){let{designSystem:n,isSelected:r,onSelect:a,disabled:s=!1}=e,l=(null==n?void 0:n.designSystemId)||null,u=(0,f.useT)(),d=(null==n?void 0:n.name)||u("designSystemButton.default");return(0,t.jsxs)(o.CommandItem,{value:d,onSelect:()=>{a(l)},disabled:s,className:(0,c.cn)("flex items-center gap-2 py-[10px] px-2",r&&"bg-gray-100",s&&"opacity-50 cursor-not-allowed"),children:[n?(0,t.jsx)(en,{designSystem:n}):(0,t.jsx)(er,{}),(0,t.jsx)("div",{className:(0,c.cn)("min-w-0 flex-1",!n&&"text-muted-foreground"),children:(0,t.jsx)("div",{className:"font-medium text-sm truncate",children:(null==n?void 0:n.name)||u("designSystemButton.default")})}),r&&(0,t.jsx)(i.Check,{className:"h-4 w-4 text-gray-500"})]},l||"unset")}function ea(){let e=(0,f.useT)();return(0,t.jsx)(n.Suspense,{fallback:(0,t.jsx)(eo,{disabled:!0,designSystem:null,children:e("designSystemButton.default")}),children:(0,t.jsx)(es,{})})}function eo(e){let{className:n,tooltip:i,children:o,designSystem:s,...l}=e;return(0,t.jsxs)(r.Button,{variant:"ghost",size:"sm",className:(0,c.cn)("h-7 gap-1.5 rounded-md has-[>svg]:px-1.5 text-gray-600",n),tooltip:i,...l,children:[s?(0,t.jsx)(en,{designSystem:s}):(0,t.jsx)(er,{}),o&&(0,t.jsx)("span",{className:"truncate ml-0.5",children:o}),(0,t.jsx)(a.ChevronDownSmall,{className:"h-3 w-3 text-gray-500"})]})}function es(){let e=(0,h.useChatId)(),i=(0,f.useT)();(0,u.useServerQuerySWR)(["scoped","designSystems"],{});let{data:a,isLoading:c}=(0,u.useServerQuerySWR)(["chat","attributes"],{}),g=(null==a?void 0:a.designSystemId)||null,v=(0,$.useActiveBlockState)(),{latestBlock:x}=(0,Y.useBlockHistory)({blockId:null==v?void 0:v.id,searchAll:!0}),y=(0,d.getDesignSystemAtoms)(),b=(0,p.useAtomValue)(y.designSystems),{dse:w}=(0,l.useFlags)(),{isTWv4:j}=X(e),{editValueMap:C,setEditValueMap:k}=(0,m.useEditValueMap)({blockId:(null==v?void 0:v.id)||""}),S=(0,n.useMemo)(()=>!x||!!v&&v.id===x.id,[v,x]),[N,E]=(0,n.useState)(!1),[M,I]=(0,n.useState)(g),[D,T]=(0,n.useState)(g),A=(0,n.useMemo)(()=>D?[...b].sort((e,t)=>e.designSystemId===D?-1:+(t.designSystemId===D)):b,[b,D]),{globalsCssWithDesignSystem:L,isPrecomputingGlobals:P,loadGlobalsWithDesignSystem:R,previewDesignSystem:_,revertPreview:F,setRevertPreview:V,handleRevertPreview:B,applyDesignSystem:z,isApplyingDesignSystem:H}=O({chatId:e||null,designSystems:A,editValueMap:C,setEditValueMap:k});(0,n.useEffect)(()=>{I(g)},[g]),(0,n.useEffect)(()=>{if(!N){let e=setTimeout(()=>{T(g)},150);return()=>clearTimeout(e)}},[N,g]);let U=M!==g,q=(0,n.useMemo)(()=>g&&b.find(e=>e.designSystemId===g)||null,[g,b]),W=(0,n.useMemo)(()=>g&&(null==q?void 0:q.name)||i("designSystemButton.default"),[g,q,i]),Z=(0,n.useMemo)(()=>{if(!M)return i("designSystemButton.default");let e=b.find(e=>e.designSystemId===M);return(null==e?void 0:e.name)||i("designSystemButton.default")},[M,b,i]),G=(0,n.useCallback)(()=>{e&&(E(!1),z(M))},[e,z,M]),K=(0,n.useCallback)(e=>{I(e),F?V([F[0],e]):V([g,e]),_(e)},[_,F,g,V]),J=(0,n.useCallback)(()=>{L||R()},[L,R]),Q=(0,n.useMemo)(()=>c||H||!S||P||!j,[c,H,S,P,j]);return w?(0,t.jsxs)(s.Popover,{open:N&&S&&j,onOpenChange:e=>{S&&j&&(E(e),e?L||P||R():(I(g),B()))},children:[(0,t.jsx)(s.PopoverTrigger,{asChild:!0,children:(0,t.jsx)(eo,{disabled:!S||H||!j,designSystem:q,tooltip:N?void 0:j?S?"".concat(i("designSystemButton.designSystem"),": ").concat(W):i("designSystemButton.openLatestBlockToApply"):i("designSystemButton.twv4"),onMouseEnter:()=>{J()},onTouchStart:()=>{J()},children:W})}),(0,t.jsx)(s.PopoverContent,{className:"w-[280px] p-0",align:"start",children:(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsxs)(o.Command,{defaultValue:Z,children:[(0,t.jsx)(o.CommandInput,{placeholder:i("designSystemButton.searchPlaceholder")}),(0,t.jsxs)(o.CommandList,{children:[(0,t.jsx)(o.CommandEmpty,{children:(0,t.jsx)("div",{className:"text-gray-500 text-sm",children:i("designSystemButton.noDesignSystemsFound")})}),(0,t.jsxs)(o.CommandGroup,{className:"p-[6px]",children:[null===D&&(0,t.jsx)(ei,{designSystem:null,isSelected:null===M,onSelect:K,disabled:Q}),A.map(e=>(0,t.jsx)(ei,{designSystem:e,isSelected:M===e.designSystemId,onSelect:K,disabled:Q},e.designSystemId)),null!==D&&(0,t.jsx)(ei,{designSystem:null,isSelected:null===M,onSelect:K,disabled:Q})]})]})]}),(0,t.jsx)("div",{className:"border-t p-2 bg-muted",children:(0,t.jsx)(r.Button,{onClick:G,size:"sm",className:"w-full",disabled:!e||!U||H,children:H?i("designSystemButton.saving"):i("designSystemButton.saveChanges")})})]})})]}):null}e.s(["DesignSystemMiniPreview",()=>en,"EmptyDesignSystemPreview",()=>er],790288)},973817,e=>{"use strict";var t=e.i(832520),n=e.i(304649);function r(e){let{className:r,style:i}=e;return(0,t.jsx)("span",{"aria-hidden":!0,className:(0,n.cn)("text-alpha-400 w-4 min-w-4 select-none text-center text-lg",r),style:i,children:"/"})}e.s(["HeaderSlash",()=>r])},787360,947034,667811,113365,312739,992078,177295,525558,631909,387176,e=>{"use strict";let t=["gap","space","flex","flexColumn","grid","showGap","size"].reduce((e,t)=>(e[t]=!1,e),{}),n=["2xl","xl","lg","md","sm"];e.s(["DEFAULT_CLASS_NAMES_INFO",0,t,"breakpoints",0,n],787360);var r=e.i(605528);let i=(0,r.withNewIcon)('<circle cx="8" cy="8" r="7.25" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" fill="transparent" />\n  <path opacity="0.33" fill-rule="evenodd" clip-rule="evenodd" d="M5 1H7V3H5V1ZM5 5V3H3V5H1V7H3V9H1V11H3V13H5V15H7V13H9V15H11V13H13V11H15V9H13V7H15V5H13V3H11V1H9V3H7V5H5ZM5 7H3V5H5V7ZM7 7V5H9V7H7ZM7 9V7H5V9H3V11H5V13H7V11H9V13H11V11H13V9H11V7H13V5H11V3H9V5H11V7H9V9H7ZM9 9H11V11H9V9ZM7 9V11H5V9H7Z" fill="currentColor"/>');e.s(["Alpha",0,i],947034);let a=(0,r.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M4.25 1H5H13.75H14.5V2.5H13.75H10.5475L7.02746 13.5H11H11.75V15H11H2.25H1.5V13.5H2.25H5.45254L8.97254 2.5H5H4.25V1Z" fill="currentColor"/>');e.s(["TextItalic",0,a],667811);let o=(0,r.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M8.00001 0.583374C6.15186 0.583374 4.89601 1.20742 4.10921 2.08165C3.34402 2.93186 3.08334 3.95168 3.08334 4.66671C3.08334 5.30246 3.25446 5.98764 3.73035 6.62516C3.82673 6.75427 3.934 6.8793 4.05254 7H1.75H1V8.5H1.75H14.25H15V7H14.25H7.01815L6.51769 6.8024C5.6688 6.46724 5.19511 6.07985 4.93239 5.72789C4.67477 5.38278 4.58334 5.0232 4.58334 4.66671C4.58334 4.27063 4.73934 3.62378 5.22415 3.0851C5.68734 2.57044 6.51483 2.08337 8.00001 2.08337C9.99003 2.08337 10.8295 2.95573 11.1785 3.6895L11.5006 4.36679L12.8552 3.72252L12.5331 3.04522C11.9243 1.76535 10.5425 0.583374 8.00001 0.583374ZM12.9167 11.25V10.5H11.4167V11.25C11.4167 11.6491 11.2587 12.3206 10.7686 12.8815C10.302 13.4155 9.47586 13.9167 8.00001 13.9167C6.13953 13.9167 5.27285 13.0402 4.87848 12.3L4.52584 11.638L3.20199 12.3433L3.55464 13.0053C4.18889 14.1958 5.54264 15.4167 8.00001 15.4167C9.85749 15.4167 11.1147 14.7652 11.8981 13.8685C12.658 12.9988 12.9167 11.9621 12.9167 11.25Z" fill="currentColor"/>');e.s(["TextStrikethrough",0,o],113365);let s=(0,r.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M3.46975 11.7803L4.00008 12.3106L5.06074 11.25L4.53041 10.7196L2.56076 8.75H13.4393L11.4697 10.7197L10.9393 11.25L12 12.3107L12.5303 11.7803L15.6036 8.70711C15.9941 8.31658 15.9941 7.68342 15.6036 7.29289L12.5303 4.21967L12 3.68934L10.9393 4.75L11.4697 5.28033L13.4393 7.25H2.56072L4.53042 5.28031L5.06075 4.74998L4.00009 3.68932L3.46975 4.21965L0.396531 7.29287C0.00600663 7.68339 0.00600657 8.31656 0.396531 8.70708L3.46975 11.7803Z" fill="currentColor"/>');e.s(["ArrowLeftRight",0,s],312739);let l=(0,r.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M4.21968 3.46975L3.68935 4.00008L4.75001 5.06074L5.28034 4.53041L7.24999 2.56076L7.24999 13.4393L5.28031 11.4697L4.74998 10.9393L3.68932 12L4.21965 12.5303L7.29288 15.6036C7.6834 15.9941 8.31657 15.9941 8.70709 15.6036L11.7803 12.5303L12.3106 12L11.25 10.9393L10.7197 11.4697L8.74999 13.4393L8.74999 2.56072L10.7197 4.53041L11.25 5.06075L12.3107 4.00009L11.7803 3.46975L8.70712 0.396531C8.31659 0.00600645 7.68343 0.00600637 7.2929 0.396531L4.21968 3.46975Z" fill="currentColor"/>');e.s(["ArrowUpDown",0,l],992078);let c=(0,r.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M1.75 2H1V3.5H1.75H14.25H15V2H14.25H1.75ZM3.5 7.25H4.25H11.75H12.5V8.75H11.75H4.25H3.5V7.25ZM2.5 12.5H3.25H12.75H13.5V14H12.75H3.25H2.5V12.5Z" fill="currentColor"/>');e.s(["AlignmentCenter",0,c],177295);let u=(0,r.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M1.75 2H1V3.5H1.75H14.25H15V2H14.25H1.75ZM6 7.25H6.75H14.25H15V8.75H14.25H6.75H6V7.25ZM4 12.5H4.75H14.25H15V14H14.25H4.75H4V12.5Z" fill="currentColor"/>');e.s(["AlignmentRight",0,u],525558);let d=(0,r.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M1 2H1.75H14.25H15V3.5H14.25H1.75H1V2ZM1 12.5H1.75H14.25H15V14H14.25H1.75H1V12.5ZM1.75 7.25H1V8.75H1.75H14.25H15V7.25H14.25H1.75Z" fill="currentColor"/>');e.s(["MenuAlt",0,d],631909);var p=e.i(832520),h=e.i(200407),f=e.i(846571),m=e.i(143722),g=e.i(940393),v=e.i(763480),x=e.i(574768),y=e.i(295224),b=h;function w(e){let[t,n]=b.useState(e);return b.useEffect(()=>{n(e)},[e]),[t,n]}var j=e.i(545858);function C(e){let{children:t}=e;return"undefined"==typeof document?null:(0,j.createPortal)(t,document.body)}function k(e){var t;let{title:n,value:r,presets:i,onChange:a,step:o=1,min:s,max:l,prefix:c,suffix:u,disabled:d,allowNegative:b=!1,allowIconSliding:j=!1,placeholder:C}=e,k=h.useRef(null),[N,E]=h.useState(!1),M=h.useMemo(()=>{let e={};return i.forEach((t,n)=>{let[,r]=t;e[r]=n}),e},[i]),I=e=>{if(k.current){var t;let n=!1,r=a(null!=(t=M[e])?t:e,k.current,()=>{n=!0});n||!1===r||(k.current.value=e)}},D=h.useRef(null),T=null!=(t=D.current)?t:r,A="number"==typeof T&&i[T]?i[T][1]:String(T),[L,P]=w(A),R=()=>{null!==D.current&&(I("number"==typeof D.current&&i[D.current]?i[D.current][1]:String(D.current)),D.current=null)},_=(0,y.useLatest)(A),O=(0,y.useLatest)(a),F=h.useCallback((e,t)=>{var n;if(!k.current)return;let r=!1,i=k.current.value;P(e);let a=O.current(null!=(n=M[e])?n:e,k.current,()=>{r=!0},t);r||!1===a?P(i):k.current.value=e},[P]);return(0,p.jsxs)("div",{className:"w-full relative",children:[!c&&j?(0,p.jsx)(S,{valueRef:_,setValueTo:F,step:o,min:s,max:l,children:null}):null,(0,p.jsx)(x.Popover,{open:N,onOpenChange:E,children:(0,p.jsxs)(g.Command,{className:"rounded-none",children:[(0,p.jsx)(f.Anchor,{children:(0,p.jsx)(m.Command.Input,{asChild:!0,value:"",onKeyDown:()=>E(!1),onMouseDown:()=>E(e=>!e),onFocus:()=>E(!0),"data-cmdk-input-name":n,children:(0,p.jsx)(v.Input,{ref:k,placeholder:C,size:"sm","aria-label":n,type:"text",className:"[&>input]:tabular-nums [&>input]:tracking-normal",value:L,onChange:e=>{var t;P(e.currentTarget.value),a(null!=(t=M[e.currentTarget.value])?t:e.currentTarget.value,e.currentTarget,e.preventDefault.bind(e))},prefix:c&&j?(0,p.jsx)(S,{valueRef:_,setValueTo:F,step:o,min:s,max:l,children:c}):null,suffix:u,disabled:d,onKeyDown:e=>{if("ArrowUp"===e.key||"ArrowDown"===e.key){E(!1);let t=parseFloat(e.currentTarget.value);if(isNaN(t))return;let n=e.currentTarget.value.replace(/^[0-9.-]+/,""),r=Math.round((t+("ArrowUp"===e.key?o:-o))*1e3)/1e3;if(!1===b&&r<0)return void e.preventDefault();let i="".concat(r).concat(n);P(i),I(i),e.preventDefault()}},spellCheck:"false",autoComplete:"off",autoCorrect:"off"})})}),!N&&(0,p.jsx)(g.CommandList,{"aria-hidden":"true",className:"hidden"}),(0,p.jsx)(x.PopoverContent,{side:"bottom",align:"start",sideOffset:4,alignOffset:0,onOpenAutoFocus:e=>e.preventDefault(),onInteractOutside:e=>{R(),e.target instanceof Element&&e.target.getAttribute("data-cmdk-input-name")===n&&e.preventDefault()},className:"p-0 w-(--radix-popover-trigger-width) min-w-32 max-w-80 rounded",onPointerLeave:R,children:(0,p.jsxs)(g.CommandList,{children:[(0,p.jsx)(g.CommandEmpty,{className:"p-1",children:"No value found."}),(0,p.jsx)(g.CommandGroup,{className:"p-1",children:N?i.map(e=>{let[t,n]=e;return(0,p.jsx)(g.CommandItem,{value:t,onMouseDown:e=>e.preventDefault(),onSelect:()=>{D.current=null,I(n),E(!1)},className:"px-2 py-1 rounded-sm tabular-nums",onPointerEnter:()=>{if(null===D.current&&(D.current=r),k.current){var e;a(null!=(e=M[n])?e:n,k.current,()=>{},!0)}},children:n.endsWith("%")&&t.includes("/")?t:n},t)}):null})]})})]})})]})}function S(e){let{children:t,valueRef:n,setValueTo:r,step:i,min:a,max:o,factor:s=.05}=e,[l,c]=h.useState(!1),u=h.useRef(null),d=(0,y.useLatest)(l),f=h.useRef(null),m=h.useRef(null),g=h.useRef(null),v=h.useRef(null),x=h.useRef(null),b=h.useRef(null),w=h.useCallback(e=>{x.current=null;let t=n.current.match(/^-?[.\d]+/);if(t&&(m.current=e.pageX,g.current=e.pageY,v.current=[parseFloat(t[0]),n.current.slice(t[0].length)],e.currentTarget.setPointerCapture(e.pointerId),e.preventDefault(),!document.pointerLockElement)){var r;null==(r=f.current)||r.requestPointerLock({unadjustedMovement:!0}).then(()=>{c(!0)}).catch(e=>{if("NotSupportedError"===e.name){var t;null==(t=f.current)||t.requestPointerLock().then(()=>{c(!0)})}})}},[]),j=h.useMemo(()=>{let e=String(i),t=e.indexOf(".");return -1===t?0:e.length-t-1},[i]),k=h.useCallback(e=>{if(null===m.current||null===v.current)return;if(m.current+=e,u.current&&d.current){if("number"!=typeof m.current||"number"!=typeof g.current)return;let e=m.current,t=window.innerWidth;e<0?e+=t:e>=t&&(e-=t),u.current.style.transform="translate("+e+"px,"+g.current+"px)"}let t=Math.round(m.current*s)*i,n=v.current[0]+t;"number"==typeof a&&n<a&&(n=a),"number"==typeof o&&n>o&&(n=o);let l=n.toFixed(j);if(l.includes(".")){for(;l.endsWith("0");)l=l.slice(0,-1);l.endsWith(".")&&(l=l.slice(0,-1))}if(l===x.current)return;x.current=l;let c=l+v.current[1];b.current=c,r(c,!0)},[r,s,i,j,a,o]),S=(0,y.useLatest)(k),N=h.useCallback(e=>{S.current(e.movementX)},[]),E=h.useCallback(e=>{m.current=null,v.current=null,e.currentTarget.releasePointerCapture(e.pointerId),b.current&&(r(b.current,!1),b.current=null),document.exitPointerLock(),c(!1)},[r]);return h.useEffect(()=>{let e=!1,t=!1,n=e=>{S.current(e.movementX)},r=()=>{if(document.pointerLockElement===f.current)e||(e=!0,document.addEventListener("mousemove",n,!1));else{if(t)return;t=!0,c(!1),document.removeEventListener("mousemove",n,!1)}};return document.addEventListener("pointerlockchange",r,!1),()=>{document.removeEventListener("pointerlockchange",r,!1),t||document.removeEventListener("mousemove",n,!1)}},[]),(0,p.jsxs)("span",{ref:f,className:"cursor-ew-resize",onPointerDown:w,onPointerMove:N,onPointerUp:E,style:null===t?{position:"absolute",display:"block",width:".75em",height:"100%",left:"-.25em"}:{},children:[t,l?(0,p.jsx)(C,{children:(0,p.jsx)("svg",{height:"32",viewBox:"0 0 32 32",width:"32",xmlns:"http://www.w3.org/2000/svg",className:"fixed pointer-events-none",style:{zIndex:0x7fffffff,top:-16,left:-16},ref:u,children:(0,p.jsxs)("g",{fill:"none",transform:"translate(8 10)",children:[(0,p.jsx)("path",{d:"m0 6.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z",fill:"#fff"}),(0,p.jsx)("path",{d:"m8.497 7.993h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z",fill:"#000"})]})})}):null]})}e.s(["default",()=>k],387176)},206964,e=>{"use strict";let t=(0,e.i(121793).default)("Pipette",[["path",{d:"m2 22 1-1h3l9-9",key:"1sre89"}],["path",{d:"M3 21v-3l9-9",key:"hpe2y6"}],["path",{d:"m15 6 3.4-3.4a2.1 2.1 0 1 1 3 3L18 9l.4.4a2.1 2.1 0 1 1-3 3l-3.8-3.8a2.1 2.1 0 1 1 3-3l.4.4Z",key:"196du1"}]]);e.s(["default",()=>t])},233411,e=>{"use strict";var t=e.i(206964);e.s(["Pipette",()=>t.default])},553053,e=>{"use strict";function t(){return(t=Object.assign.bind()).apply(null,arguments)}function n(e,t){if(null==e)return{};var n={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}var r=e.i(200407),i=r,a=255,o=100,s=e=>{var{r:t,g:n,b:r,a:i}=e,s=Math.max(t,n,r),l=s-Math.min(t,n,r),c=l?s===t?(n-r)/l:s===n?2+(r-t)/l:4+(t-n)/l:0;return{h:60*(c<0?c+6:c),s:s?l/s*o:0,v:s/a*o,a:i}},l=e=>{var{h:t,s:n,l:r,a:i}=c(e);return"hsla("+t+", "+n+"%, "+r+"%, "+i+")"},c=e=>{var{h:t,s:n,v:r,a:i}=e,a=(200-n)*r/o;return{h:t,s:a>0&&a<200?n*r/o/(a<=o?a:200-a)*o:0,l:a/2,a:i}},u=e=>{var{r:t,g:n,b:r}=e;return"#"+(e=>Array(7-e.length).join("0")+e)((t<<16|n<<8|r).toString(16))},d=e=>{var{r:t,g:n,b:r,a:i}=e,a="number"==typeof i&&(255*i|256).toString(16).slice(1);return""+u({r:t,g:n,b:r})+(a||"")},p=e=>s(h(e)),h=e=>{var t=e.replace("#","");/^#?/.test(e)&&3===t.length&&(e="#"+t.charAt(0)+t.charAt(0)+t.charAt(1)+t.charAt(1)+t.charAt(2)+t.charAt(2));var n=/[A-Za-z0-9]{2}/g,[r,i,o=0,s]=e.match(n).map(e=>parseInt(e,16));return{r,g:i,b:o,a:(null!=s?s:255)/a}},f=e=>{var{h:n,s:r,v:i,a:s}=e,l=n/60,c=r/o,u=i/o,d=Math.floor(l)%6,p=l-Math.floor(l),h=a*u*(1-c),f=a*u*(1-c*p),m=a*u*(1-c*(1-p));u*=a;var g={};switch(d){case 0:g.r=u,g.g=m,g.b=h;break;case 1:g.r=f,g.g=u,g.b=h;break;case 2:g.r=h,g.g=u,g.b=m;break;case 3:g.r=h,g.g=f,g.b=u;break;case 4:g.r=m,g.g=h,g.b=u;break;case 5:g.r=u,g.g=h,g.b=f}return g.r=Math.round(g.r),g.g=Math.round(g.g),g.b=Math.round(g.b),t({},g,{a:s})},m=e=>{var{r:t,g:n,b:r,a:i}=f(e);return"rgba("+t+", "+n+", "+r+", "+i+")"},g=e=>{var{r:t,g:n,b:r}=e;return{r:t,g:n,b:r}},v=e=>{var{h:t,s:n,l:r}=e;return{h:t,s:n,l:r}},x=e=>u(f(e)),y=e=>{var{h:t,s:n,v:r}=e;return{h:t,s:n,v:r}},b=e=>{var{r:t,g:n,b:r}=e,i=function(e){return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},a=i(t/255),o=i(n/255),s=i(r/255),l={};return l.x=.4124*a+.3576*o+.1805*s,l.y=.2126*a+.7152*o+.0722*s,l.bri=.0193*a+.1192*o+.9505*s,l},w=e=>{var t,n,r,i,a,o,s,l,u;return"string"==typeof e&&j(e)?(o=p(e),l=e):"string"!=typeof e&&(o=e),o&&(r=y(o),a=c(o),u=d(i=f(o)),l=x(o),n=v(a),s=b(t=g(i))),{rgb:t,hsl:n,hsv:r,rgba:i,hsla:a,hsva:o,hex:l,hexa:u,xy:s}},j=e=>/^#?([A-Fa-f0-9]{3,4}){1,2}$/.test(e),C=r,k=r;function S(e){var t=(0,k.useRef)(e);return(0,k.useEffect)(()=>{t.current=e}),(0,k.useCallback)((e,n)=>t.current&&t.current(e,n),[])}var N=e=>"touches"in e,E=e=>{!N(e)&&e.preventDefault&&e.preventDefault()},M=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),e>n?n:e<t?t:e},I=(e,t)=>{var n=e.getBoundingClientRect(),r=N(t)?t.touches[0]:t;return{left:M((r.pageX-(n.left+window.pageXOffset))/n.width),top:M((r.pageY-(n.top+window.pageYOffset))/n.height),width:n.width,height:n.height,x:r.pageX-(n.left+window.pageXOffset),y:r.pageY-(n.top+window.pageYOffset)}},D=e.i(832520),T=["prefixCls","className","onMove","onDown"],A=C.default.forwardRef((e,r)=>{var{prefixCls:i="w-color-interactive",className:a,onMove:o,onDown:s}=e,l=n(e,T),c=(0,C.useRef)(null),u=(0,C.useRef)(!1),[d,p]=(0,C.useState)(!1),h=S(o),f=S(s),m=e=>(!u.current||!!N(e))&&(u.current=N(e),!0),g=(0,C.useCallback)(e=>{if(E(e),c.current){var t=N(e)?e.touches.length>0:e.buttons>0;if(!t)return void p(!1);null==h||h(I(c.current,e),e)}},[h]),v=(0,C.useCallback)(()=>p(!1),[]),x=(0,C.useCallback)(e=>{e?(window.addEventListener(u.current?"touchmove":"mousemove",g),window.addEventListener(u.current?"touchend":"mouseup",v)):(window.removeEventListener("mousemove",g),window.removeEventListener("mouseup",v),window.removeEventListener("touchmove",g),window.removeEventListener("touchend",v))},[g,v]);(0,C.useEffect)(()=>(x(d),()=>{x(!1)}),[d,g,v,x]);var y=(0,C.useCallback)(e=>{E(e.nativeEvent),m(e.nativeEvent)&&c.current&&(null==f||f(I(c.current,e.nativeEvent),e.nativeEvent),p(!0))},[f]);return(0,D.jsx)("div",t({},l,{className:[i,a||""].filter(Boolean).join(" "),style:t({},l.style,{touchAction:"none"}),ref:c,tabIndex:0,onMouseDown:y,onTouchStart:y}))});A.displayName="Interactive";let L=A;var P=r,R=D,_=e=>{var{className:t,color:n,left:r,top:i,prefixCls:a}=e,o={position:"absolute",top:i,left:r},s={"--saturation-pointer-box-shadow":"rgb(255 255 255) 0px 0px 0px 1.5px, rgb(0 0 0 / 30%) 0px 0px 1px 1px inset, rgb(0 0 0 / 40%) 0px 0px 1px 2px",width:6,height:6,transform:"translate(-3px, -3px)",boxShadow:"var(--saturation-pointer-box-shadow)",borderRadius:"50%",backgroundColor:n};return(0,P.useMemo)(()=>(0,R.jsx)("div",{className:a+"-pointer "+(t||""),style:o,children:(0,R.jsx)("div",{className:a+"-fill",style:s})}),[i,r,n,t,a])},O=D,F=["prefixCls","radius","pointer","className","hue","style","hsva","onChange"],V=i.default.forwardRef((e,r)=>{var a,{prefixCls:o="w-color-saturation",radius:s=0,pointer:c,className:u,hue:d=0,style:p,hsva:h,onChange:f}=e,m=n(e,F),g=t({width:200,height:200,borderRadius:s},p,{position:"relative"}),v=(e,t)=>{f&&h&&f({h:h.h,s:100*e.left,v:(1-e.top)*100,a:h.a})},x=(0,i.useMemo)(()=>{if(!h)return null;var e={top:100-h.v+"%",left:h.s+"%",color:l(h)};return c&&"function"==typeof c?c(t({prefixCls:o},e)):(0,O.jsx)(_,t({prefixCls:o},e))},[h,c,o]);return(0,O.jsx)(L,t({className:[o,u||""].filter(Boolean).join(" ")},m,{style:t({position:"absolute",inset:0,cursor:"crosshair",backgroundImage:"linear-gradient(0deg, #000, transparent), linear-gradient(90deg, #fff, hsl("+(null!=(a=null==h?void 0:h.h)?a:d)+", 100%, 50%))"},g),ref:r,onMove:v,onDown:v,children:x}))});V.displayName="Saturation";let B=V;var z=D,H=["className","prefixCls","left","top","style","fillProps"],U=e=>{var{className:r,prefixCls:i,left:a,top:o,style:s,fillProps:l}=e,c=n(e,H),u=t({},s,{position:"absolute",left:a,top:o}),d=t({width:18,height:18,boxShadow:"var(--alpha-pointer-box-shadow)",borderRadius:"50%",backgroundColor:"var(--alpha-pointer-background-color)"},null==l?void 0:l.style,{transform:a?"translate(-9px, -1px)":"translate(-1px, -9px)"});return(0,z.jsx)("div",t({className:i+"-pointer "+(r||""),style:u},c,{children:(0,z.jsx)("div",t({className:i+"-fill"},l,{style:d}))}))},q=D,W=["prefixCls","className","hsva","background","bgProps","innerProps","pointerProps","radius","width","height","direction","style","onChange","pointer"],Z="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMUlEQVQ4T2NkYGAQYcAP3uCTZhw1gGGYhAGBZIA/nYDCgBDAm9BGDWAAJyRCgLaBCAAgXwixzAS0pgAAAABJRU5ErkJggg==",G=r.default.forwardRef((e,r)=>{var{prefixCls:i="w-color-alpha",className:a,hsva:o,background:s,bgProps:c={},innerProps:u={},pointerProps:d={},radius:p=0,width:h,height:f=16,direction:m="horizontal",style:g,onChange:v,pointer:x}=e,y=n(e,W),b=e=>{v&&v(t({},o,{a:"horizontal"===m?e.left:e.top}),e)},w="linear-gradient(to "+("horizontal"===m?"right":"bottom")+", rgba(244, 67, 54, 0) 0%, "+l(Object.assign({},o,{a:1}))+" 100%)",j={};"horizontal"===m?j.left=100*o.a+"%":j.top=100*o.a+"%";var C=t({"--alpha-background-color":"#fff","--alpha-pointer-background-color":"rgb(248, 248, 248)","--alpha-pointer-box-shadow":"rgb(0 0 0 / 37%) 0px 1px 4px 0px",borderRadius:p,background:"url("+Z+") left center",backgroundColor:"var(--alpha-background-color)"},{width:h,height:f},g,{position:"relative"}),k=x&&"function"==typeof x?x(t({prefixCls:i},d,j)):(0,q.jsx)(U,t({},d,{prefixCls:i},j));return(0,q.jsxs)("div",t({},y,{className:[i,i+"-"+m,a||""].filter(Boolean).join(" "),style:C,ref:r,children:[(0,q.jsx)("div",t({},c,{style:t({inset:0,position:"absolute",background:s||w,borderRadius:p},c.style)})),(0,q.jsx)(L,t({},u,{style:t({},u.style,{inset:0,zIndex:1,position:"absolute"}),onMove:b,onDown:b,children:k}))]}))});G.displayName="Alpha";let K=G;var X=r,$=D,Y=["prefixCls","placement","label","value","className","style","labelStyle","inputStyle","onChange","onBlur","renderInput"],J=e=>/^#?([A-Fa-f0-9]{3,4}){1,2}$/.test(e),Q=e=>Number(String(e).replace(/%/g,"")),ee=X.default.forwardRef((e,r)=>{var{prefixCls:i="w-color-editable-input",placement:a="bottom",label:o,value:s,className:l,style:c,labelStyle:u,inputStyle:d,onChange:p,onBlur:h,renderInput:f}=e,m=n(e,Y),[g,v]=(0,X.useState)(s),x=(0,X.useRef)(!1);function y(e,t){var n=(t||e.target.value).trim().replace(/^#/,"");J(n)&&p&&p(e,n);var r=Q(n);!isNaN(r)&&p&&p(e,r),v(n)}function b(t){x.current=!1,v(e.value),h&&h(t)}(0,X.useEffect)(()=>{e.value===g||x.current||v(e.value)},[e.value]);var w={};"bottom"===a&&(w.flexDirection="column"),"top"===a&&(w.flexDirection="column-reverse"),"left"===a&&(w.flexDirection="row-reverse");var j=t({"--editable-input-label-color":"rgb(153, 153, 153)","--editable-input-box-shadow":"rgb(204 204 204) 0px 0px 0px 1px inset","--editable-input-color":"#666",position:"relative",alignItems:"center",display:"flex",fontSize:11},w,c),C=t({width:"100%",paddingTop:2,paddingBottom:2,paddingLeft:3,paddingRight:3,fontSize:11,background:"transparent",boxSizing:"border-box",border:"none",color:"var(--editable-input-color)",boxShadow:"var(--editable-input-box-shadow)"},d),k=t({value:g,onChange:y,onBlur:b,autoComplete:"off",onFocus:()=>x.current=!0},m,{style:C});return(0,$.jsxs)("div",{className:[i,l||""].filter(Boolean).join(" "),style:j,children:[f?f(k,r):(0,$.jsx)("input",t({ref:r},k)),o&&(0,$.jsx)("span",{style:t({color:"var(--editable-input-label-color)",textTransform:"capitalize"},u),children:o})]})});ee.displayName="EditableInput";let et=ee;var en=D,er=["prefixCls","hsva","placement","rProps","gProps","bProps","aProps","className","style","onChange"],ei=r.default.forwardRef((e,r)=>{var{prefixCls:i="w-color-editable-input-rgba",hsva:a,placement:o="bottom",rProps:l={},gProps:c={},bProps:u={},aProps:d={},className:p,style:h,onChange:m}=e,g=n(e,er),v=a?f(a):{};function x(e){var t=Number(e.target.value);t&&t>255&&(e.target.value="255"),t&&t<0&&(e.target.value="0")}var y=(e,n,r)=>{"number"==typeof e&&("a"===n&&(e<0&&(e=0),e>100&&(e=100),m&&m(w(s(t({},v,{a:e/100}))))),e>255&&(e=255,r.target.value="255"),e<0&&(e=0,r.target.value="0"),"r"===n&&m&&m(w(s(t({},v,{r:e})))),"g"===n&&m&&m(w(s(t({},v,{g:e})))),"b"===n&&m&&m(w(s(t({},v,{b:e})))))};return(0,en.jsxs)("div",t({ref:r,className:[i,p||""].filter(Boolean).join(" ")},g,{style:t({fontSize:11,display:"flex"},h),children:[(0,en.jsx)(et,t({label:"R",value:v.r||0,onBlur:x,placement:o,onChange:(e,t)=>y(t,"r",e)},l,{style:t({},l.style)})),(0,en.jsx)(et,t({label:"G",value:v.g||0,onBlur:x,placement:o,onChange:(e,t)=>y(t,"g",e)},c,{style:t({marginLeft:5},l.style)})),(0,en.jsx)(et,t({label:"B",value:v.b||0,onBlur:x,placement:o,onChange:(e,t)=>y(t,"b",e)},u,{style:t({marginLeft:5},u.style)})),d&&(0,en.jsx)(et,t({label:"A",value:v.a?parseInt(String(100*v.a),10):0,onBlur:x,placement:o,onChange:(e,t)=>y(t,"a",e)},d,{style:t({marginLeft:5},d.style)}))]}))});ei.displayName="EditableInputRGBA";let ea=ei;var eo=D,es=["prefixCls","className","hue","onChange","direction"],el=r.default.forwardRef((e,r)=>{var{prefixCls:i="w-color-hue",className:a,hue:o=0,onChange:s,direction:l="horizontal"}=e,c=n(e,es);return(0,eo.jsx)(K,t({ref:r,className:i+" "+(a||"")},c,{direction:l,background:"linear-gradient(to "+("horizontal"===l?"right":"bottom")+", rgb(255, 0, 0) 0%, rgb(255, 255, 0) 17%, rgb(0, 255, 0) 33%, rgb(0, 255, 255) 50%, rgb(0, 0, 255) 67%, rgb(255, 0, 255) 83%, rgb(255, 0, 0) 100%)",hsva:{h:o,s:100,v:100,a:o/360},onChange:(e,t)=>{s&&s({h:"horizontal"===l?360*t.left:360*t.top})}}))});el.displayName="Hue";let ec=el;var eu=r,ed=D,ep=["prefixCls","className","color","colors","style","rectProps","onChange","addonAfter","addonBefore","rectRender"],eh=eu.default.forwardRef((e,r)=>{var{prefixCls:i="w-color-swatch",className:a,color:o,colors:s=[],style:l,rectProps:c={},onChange:u,addonAfter:d,addonBefore:h,rectRender:f}=e,m=n(e,ep),g=t({"--swatch-background-color":"rgb(144, 19, 254)",background:"var(--swatch-background-color)",height:15,width:15,marginRight:5,marginBottom:5,cursor:"pointer",position:"relative",outline:"none",borderRadius:2},c.style),v=(e,t)=>{u&&u(p(e),w(p(e)),t)};return(0,ed.jsxs)("div",t({ref:r},m,{className:[i,a||""].filter(Boolean).join(" "),style:t({display:"flex",flexWrap:"wrap",position:"relative"},l),children:[h&&eu.default.isValidElement(h)&&h,s&&Array.isArray(s)&&s.map((e,n)=>{var r="",i="";"string"==typeof e&&(r=e,i=e),"object"==typeof e&&e.color&&(r=e.title||e.color,i=e.color);var a=o&&o.toLocaleLowerCase()===i.toLocaleLowerCase(),s=f&&f({title:r,color:i,checked:!!a,style:t({},g,{background:i}),onClick:e=>v(i,e)});if(s)return(0,ed.jsx)(eu.Fragment,{children:s},n);var l=c.children&&eu.default.isValidElement(c.children)?eu.default.cloneElement(c.children,{color:i,checked:a}):null;return(0,ed.jsx)("div",t({tabIndex:0,title:r,onClick:e=>v(i,e)},c,{children:l,style:t({},g,{background:i})}),n)}),d&&eu.default.isValidElement(d)&&d]}))});eh.displayName="Swatch";let ef=eh;var em=D,eg=["prefixCls","className","onChange","width","presetColors","color","editableDisable","disableAlpha","style"],ev=["#D0021B","#F5A623","#f8e61b","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"],ex=e=>(0,em.jsx)("div",{style:{boxShadow:"rgb(0 0 0 / 60%) 0px 0px 2px",width:4,top:1,bottom:1,left:e.left,borderRadius:1,position:"absolute",backgroundColor:"#fff"}}),ey=r.default.forwardRef((e,i)=>{var{prefixCls:a="w-color-sketch",className:o,onChange:s,width:l=218,presetColors:c=ev,color:u,editableDisable:d=!0,disableAlpha:h=!1,style:f}=e,g=n(e,eg),[v,y]=(0,r.useState)({h:209,s:36,v:90,a:1});(0,r.useEffect)(()=>{"string"==typeof u&&j(u)&&y(p(u)),"object"==typeof u&&y(u)},[u]);var b=e=>{y(e),s&&s(w(e))},C=(e,t)=>{"string"==typeof e&&j(e)&&/(3|6)/.test(String(e.length))&&b(p(e))},k=e=>b(t({},v,{a:e.a})),S=e=>b(t({},v,e,{a:v.a})),N=t({"--sketch-background":"rgb(255, 255, 255)","--sketch-box-shadow":"rgb(0 0 0 / 15%) 0px 0px 0px 1px, rgb(0 0 0 / 15%) 0px 8px 16px","--sketch-swatch-box-shadow":"rgb(0 0 0 / 15%) 0px 0px 0px 1px inset","--sketch-alpha-box-shadow":"rgb(0 0 0 / 15%) 0px 0px 0px 1px inset, rgb(0 0 0 / 25%) 0px 0px 4px inset","--sketch-swatch-border-top":"1px solid rgb(238, 238, 238)",background:"var(--sketch-background)",borderRadius:4,boxShadow:"var(--sketch-box-shadow)",width:l},f),E={borderRadius:2,background:m(v),boxShadow:"var(--sketch-alpha-box-shadow)"},M={borderTop:"var(--sketch-swatch-border-top)",paddingTop:10,paddingLeft:10},I={marginRight:10,marginBottom:10,borderRadius:3,boxShadow:"var(--sketch-swatch-box-shadow)"};return(0,em.jsxs)("div",t({},g,{className:a+" "+(o||""),ref:i,style:N,children:[(0,em.jsxs)("div",{style:{padding:"10px 10px 8px"},children:[(0,em.jsx)(B,{hsva:v,style:{width:"auto",height:150},onChange:S}),(0,em.jsxs)("div",{style:{display:"flex",marginTop:4},children:[(0,em.jsxs)("div",{style:{flex:1},children:[(0,em.jsx)(ec,{width:"auto",height:10,hue:v.h,pointer:ex,innerProps:{style:{marginLeft:1,marginRight:5}},onChange:e=>b(t({},v,e))}),!h&&(0,em.jsx)(K,{width:"auto",height:10,hsva:v,pointer:ex,style:{marginTop:4},innerProps:{style:{marginLeft:1,marginRight:5}},onChange:k})]}),!h&&(0,em.jsx)(K,{width:24,height:24,hsva:v,radius:2,style:{marginLeft:4},bgProps:{style:{background:"transparent"}},innerProps:{style:E},pointer:()=>(0,em.jsx)(r.Fragment,{})})]})]}),d&&(0,em.jsxs)("div",{style:{display:"flex",margin:"0 10px 3px 10px"},children:[(0,em.jsx)(et,{label:"Hex",value:x(v).replace(/^#/,"").toLocaleUpperCase(),onChange:(e,t)=>C(t,e),style:{minWidth:58}}),(0,em.jsx)(ea,{hsva:v,style:{marginLeft:6},aProps:!h&&{},onChange:e=>b(e.hsva)})]}),c&&c.length>0&&(0,em.jsx)(ef,{style:M,colors:c,color:x(v),onChange:e=>b(e),rectProps:{style:I}})]}))});ey.displayName="Sketch";let eb=ey;e.s(["default",0,eb],553053)},651280,403928,406766,938,575110,e=>{"use strict";let t;var n=e.i(832520),r=e.i(947034),i=e.i(667811),a=e.i(113365),o=e.i(312739),s=e.i(992078),l=e.i(485952),c=e.i(177295),u=e.i(525558),d=e.i(631909),p=e.i(200407),h=n,f=e.i(304649),m=e.i(592258),g=p,v=e.i(996174),x=e.i(176248),y=e.i(608142),b=e.i(415117),w=e.i(866568),j=e.i(292273),C=e.i(387176),k=n,S=e.i(827728),N=e.i(574768),E=e.i(233411),M=e.i(553053),I=p,D=e.i(644471),T=e.i(940393),A=x,L=y,P=e.i(216445),R=e.i(605528);let _=(0,R.withNewIcon)('<path d="M4.11621 14C4.11621 14.5522 3.6684 14.9999 3.11621 15H0.0078125V13.5H2.61621V2.5H0.0078125V1H3.11621C3.66831 1.00021 4.11621 1.44785 4.11621 2V14ZM7.08203 12.5V3.5H8.58203V12.5H7.08203ZM13.3887 2.5V13.5H15.9971V15H12.8887C12.3365 14.9999 11.8887 14.5522 11.8887 14V2C11.8887 1.44785 12.3366 1.00021 12.8887 1H15.9971V2.5H13.3887Z" fill="currentColor"/>'),O=(0,R.withNewIcon)('<path d="M2.5 4.75C1.80964 4.75 1.25 4.19036 1.25 3.5V1H2.75V3.25H13.25V1H14.75V3.5C14.75 4.19036 14.1904 4.75 13.5 4.75H2.5ZM3 7.25H13V8.75H3V7.25ZM13.25 15V12.75H2.75V15H1.25V12.5C1.25 11.8096 1.80964 11.25 2.5 11.25H13.5C14.1904 11.25 14.75 11.8096 14.75 12.5V15H13.25Z" fill="currentColor"/>'),F=(0,R.withNewIcon)('<path d="M14 1V15H12.5V1H14ZM5.00488 5.89746C5.05621 5.39333 5.48232 5 6 5H10L10.1025 5.00488C10.573 5.05278 10.9472 5.42703 10.9951 5.89746L11 6V10L10.9951 10.1025C10.9472 10.573 10.573 10.9472 10.1025 10.9951L10 11H6C5.48232 11 5.05621 10.6067 5.00488 10.1025L5 10V6L5.00488 5.89746ZM9.5 9.5V6.5H6.5L6.5 9.5H9.5ZM3.5 1L3.5 15H2L2 1H3.5Z" fill="currentColor"/>'),V=(0,R.withNewIcon)('<path d="M15 14H1V12.5H15V14ZM10.1025 5.00488C10.6067 5.05621 11 5.48232 11 6V10L10.9951 10.1025C10.9472 10.573 10.573 10.9472 10.1025 10.9951L10 11H6L5.89746 10.9951C5.42703 10.9472 5.05278 10.573 5.00488 10.1025L5 10V6C5 5.48232 5.39333 5.05621 5.89746 5.00488L6 5H10L10.1025 5.00488ZM6.5 9.5H9.5V6.5H6.5V9.5ZM15 3.5H1V2H15V3.5Z" fill="currentColor"/>'),B=(0,R.withNewIcon)('<path d="M10.1025 5.00488C10.6067 5.05621 11 5.48232 11 6V10L10.9951 10.1025C10.9472 10.573 10.573 10.9472 10.1025 10.9951L10 11H6L5.89746 10.9951C5.42703 10.9472 5.05278 10.573 5.00488 10.1025L5 10V6C5 5.48232 5.39333 5.05621 5.89746 5.00488L6 5H10L10.1025 5.00488ZM6.5 9.5H9.5V6.5H6.5V9.5ZM15 3.5H1V2H15V3.5Z" fill="currentColor"/>'),z=(0,R.withNewIcon)('<path d="M15 14H1V12.5H15V14ZM10.1025 5.00488C10.6067 5.05621 11 5.48232 11 6V10L10.9951 10.1025C10.9472 10.573 10.573 10.9472 10.1025 10.9951L10 11H6L5.89746 10.9951C5.42703 10.9472 5.05278 10.573 5.00488 10.1025L5 10V6C5 5.48232 5.39333 5.05621 5.89746 5.00488L6 5H10L10.1025 5.00488ZM6.5 9.5H9.5V6.5H6.5V9.5Z" fill="currentColor"/>'),H=(0,R.withNewIcon)('<path d="M5.00488 5.89746C5.05621 5.39333 5.48232 5 6 5H10L10.1025 5.00488C10.573 5.05278 10.9472 5.42703 10.9951 5.89746L11 6V10L10.9951 10.1025C10.9472 10.573 10.573 10.9472 10.1025 10.9951L10 11H6C5.48232 11 5.05621 10.6067 5.00488 10.1025L5 10V6L5.00488 5.89746ZM9.5 9.5V6.5H6.5L6.5 9.5H9.5ZM3.5 1L3.5 15H2L2 1H3.5Z" fill="currentColor"/>'),U=(0,R.withNewIcon)('<path d="M14 1V15H12.5V1H14ZM5.00488 5.89746C5.05621 5.39333 5.48232 5 6 5H10L10.1025 5.00488C10.573 5.05278 10.9472 5.42703 10.9951 5.89746L11 6V10L10.9951 10.1025C10.9472 10.573 10.573 10.9472 10.1025 10.9951L10 11H6C5.48232 11 5.05621 10.6067 5.00488 10.1025L5 10L5 6L5.00488 5.89746ZM9.5 9.5V6.5H6.5V9.5H9.5Z" fill="currentColor"/>');(0,R.withNewIcon)('\n<path d="M2.5 11C2.50001 11.8418 2.75984 12.4493 3.15527 12.8447C3.55072 13.2402 4.15817 13.5 5 13.5H6V15H5C3.84183 15 2.82428 14.6348 2.09473 13.9053C1.36518 13.1757 1.00001 12.1582 1 11V10H2.5V11ZM15 11C15 12.1582 14.6348 13.1757 13.9053 13.9053C13.1757 14.6348 12.1582 15 11 15H10V13.5H11C11.8418 13.5 12.4493 13.2402 12.8447 12.8447C13.2402 12.4493 13.5 11.8418 13.5 11V10H15V11ZM6 2.5H5C4.15817 2.50001 3.55071 2.75984 3.15527 3.15527C2.75983 3.55072 2.5 4.15817 2.5 5V6H1V5C1 3.84183 1.36516 2.82428 2.09473 2.09473C2.82428 1.36518 3.84183 1.00001 5 1H6V2.5ZM11 1C12.1582 1 13.1757 1.36516 13.9053 2.09473C14.6348 2.82428 15 3.84183 15 5V6H13.5V5C13.5 4.15817 13.2402 3.55071 12.8447 3.15527C12.4493 2.75983 11.8418 2.5 11 2.5H10V1H11Z" fill="currentColor"/>\n');let q=(0,R.withNewIcon)('\n<path fill-rule="evenodd" clip-rule="evenodd" d="M4.46967 9.09099L5 9.62132L6.06066 8.56066L5.53033 8.03033L3.56063 6.06063H10.125C11.989 6.06063 13.5 7.57167 13.5 9.43563C13.5 11.2996 11.989 12.8106 10.125 12.8106H4.5H3.75V14.3106H4.5H10.125C12.8174 14.3106 15 12.128 15 9.43563C15 6.74324 12.8174 4.56063 10.125 4.56063H3.56069L5.53033 2.59099L6.06066 2.06066L5 1L4.46967 1.53033L1.21967 4.78033C0.926777 5.07322 0.926777 5.5481 1.21967 5.84099L4.46967 9.09099Z" fill="currentColor"/>\n');(0,R.withNewIcon)('<path d="M4.16699 5.50427C5.24537 5.50434 6.04425 5.84632 6.56836 6.41052C7.07747 6.95865 7.25 7.63413 7.25 8.17126V13.5043H5.75V13.1088C5.29323 13.3428 4.71698 13.5043 4 13.5043C3.28068 13.5043 2.59863 13.286 2.08398 12.8461C1.55952 12.3977 1.25 11.7514 1.25 11.0043C1.25 9.55377 2.42232 8.25427 4 8.25427H5.75V8.17126C5.75 7.93063 5.67017 7.64683 5.46973 7.43103C5.28434 7.23147 4.91652 7.00434 4.16699 7.00427C3.60765 7.00427 3.30937 7.13211 3.13184 7.25916C2.94314 7.39423 2.80923 7.58505 2.66016 7.86072L1.33984 7.14783C1.52172 6.81144 1.78914 6.37622 2.25977 6.03943C2.74164 5.69474 3.36216 5.50427 4.16699 5.50427ZM11.667 5.50427C12.7454 5.50434 13.5443 5.84632 14.0684 6.41052C14.5775 6.95865 14.75 7.63413 14.75 8.17126V13.5043H13.25V13.1088C12.7932 13.3428 12.217 13.5043 11.5 13.5043C10.7807 13.5043 10.0986 13.286 9.58398 12.8461C9.05952 12.3977 8.75 11.7514 8.75 11.0043C8.75 9.55377 9.92232 8.25427 11.5 8.25427H13.25V8.17126C13.25 7.93063 13.1702 7.64683 12.9697 7.43103C12.7843 7.23147 12.4165 7.00434 11.667 7.00427C11.1077 7.00427 10.8094 7.13211 10.6318 7.25916C10.4431 7.39423 10.3092 7.58505 10.1602 7.86072L8.83984 7.14783C9.02172 6.81144 9.28914 6.37622 9.75977 6.03943C10.2416 5.69474 10.8622 5.50427 11.667 5.50427ZM4 9.75427C3.29212 9.75427 2.75 10.3402 2.75 11.0043C2.75 11.3143 2.8689 11.5432 3.05859 11.7054C3.25824 11.8761 3.57657 12.0043 4 12.0043C4.7926 12.0043 5.23188 11.721 5.47461 11.4828C5.60299 11.3568 5.68776 11.2322 5.73828 11.1429C5.74278 11.135 5.74608 11.1268 5.75 11.1195V9.75427H4ZM11.5 9.75427C10.7921 9.75427 10.25 10.3402 10.25 11.0043C10.25 11.3143 10.3689 11.5432 10.5586 11.7054C10.7582 11.8761 11.0766 12.0043 11.5 12.0043C12.2926 12.0043 12.7319 11.721 12.9746 11.4828C13.103 11.3568 13.1878 11.2322 13.2383 11.1429C13.2428 11.135 13.2461 11.1268 13.25 11.1195V9.75427H11.5Z" fill="currentColor"/>');let W=(0,R.withNewIcon)('<path d="M13.75 14.7504H2.25V13.2504H13.75V14.7504ZM5.25 8.00037C5.25009 8.8024 5.54638 9.4272 6.00977 9.85583C6.47885 10.2896 7.16404 10.5629 8 10.5629C8.83596 10.5629 9.52115 10.2896 9.99023 9.85583C10.4536 9.4272 10.7499 8.8024 10.75 8.00037V1.00037H12.25V8.00037C12.2499 9.19792 11.7961 10.2299 11.0098 10.9574C10.2289 11.6796 9.16375 12.0629 8 12.0629C6.83625 12.0629 5.77113 11.6796 4.99023 10.9574C4.20387 10.2299 3.75009 9.19792 3.75 8.00037V1.00037H5.25V8.00037Z" fill="currentColor"/>'),Z=(0,R.withNewIcon)('<path d="M8.00371 14.804C5.07771 14.804 3.23471 12.068 3.23471 7.774C3.23471 3.442 5.07771 0.706 8.00371 0.706C10.9297 0.706 12.7727 3.442 12.7727 7.774C12.7727 12.068 10.9297 14.804 8.00371 14.804ZM4.88771 7.774C4.88771 9.047 5.05871 10.149 5.40071 11.023L9.80871 3.1C9.31471 2.568 8.70671 2.264 8.00371 2.264C6.10371 2.264 4.88771 4.392 4.88771 7.774ZM6.17971 12.41C6.67371 12.942 7.30071 13.246 8.00371 13.246C9.90371 13.246 11.1197 11.118 11.1197 7.774C11.1197 6.463 10.9297 5.323 10.5877 4.43L6.17971 12.41Z" fill="currentColor"/>'),G=(0,R.withNewIcon)('<path d="M11.2002 9.25C11.2002 7.48269 9.76731 6.0498 8 6.0498C6.23269 6.0498 4.7998 7.48269 4.7998 9.25C4.7998 11.0173 6.23269 12.4502 8 12.4502V14.25C5.23858 14.25 3 12.0114 3 9.25C3 6.48858 5.23858 4.25 8 4.25C10.7614 4.25 13 6.48858 13 9.25C13 12.0114 10.7614 14.25 8 14.25V12.4502C9.76731 12.4502 11.2002 11.0173 11.2002 9.25Z" fill="currentColor"/><path d="M3 1.25H13V2.75H3V1.25Z" fill="currentColor"/>'),K=(0,R.withNewIcon)('<path d="M13.9658 3.25024H7.72168C5.82405 3.25024 4.28522 4.78817 4.28516 6.68579V14.5002H2.78516V6.68579C2.78522 3.95975 4.99562 1.75024 7.72168 1.75024H13.9658V3.25024Z" fill="#666666"/>'),X=(0,R.withNewIcon)('<path d="M15 14.5H1V9.5H15V14.5ZM2.5 13H13.5V11H2.5V13ZM15 8.5H1V4.5H15V8.5ZM2.5 7H13.5V6H2.5V7ZM15 3.5H1V2H15V3.5Z" fill="currentColor"/>'),$=(0,R.withNewIcon)('<path d="M3.60938 13.25H4.00977V14.75H2.10938V13H3.60938V13.25ZM7.46094 14.75H5.16016V13.25H7.46094V14.75ZM10.9121 14.75H8.61133V13.25H10.9121V14.75ZM13.9619 14.75H12.0615V13.25H12.4619V13H13.9619V14.75ZM3.60938 12H2.10938V10H3.60938V12ZM13.9629 12H12.4629V10H13.9629V12ZM3.60938 9H2.10938V7H3.60938V9ZM13.9629 9H12.4629V7H13.9629V9ZM15 6H1V2H15V6ZM2.5 4.5H13.5V3.5H2.5V4.5Z" fill="currentColor"/>'),Y=(0,R.withNewIcon)('<path d="M3.60938 3.5H4.00977V2H2.10938V3.75H3.60938V3.5ZM7.46094 2H5.16016V3.5H7.46094V2ZM10.9121 2H8.61133V3.5H10.9121V2ZM13.9619 2H12.0615V3.5H12.4619V3.75H13.9619V2ZM3.60938 4.75H2.10938V6.75H3.60938V4.75ZM13.9629 4.75H12.4629V6.75H13.9629V4.75ZM3.60938 7.75H2.10938V9.75H3.60938V7.75ZM13.9629 7.75H12.4629V9.75H13.9629V7.75ZM15 10.75H1V14.75H15V10.75ZM2.5 12.25H13.5V13.25H2.5V12.25Z" fill="currentColor"/>'),J=(0,R.withNewIcon)('<path d="M13.25 3.60937V4.00977H14.75V2.10937H13V3.60937H13.25ZM14.75 7.46094V5.16016H13.25V7.46094H14.75ZM14.75 10.9121V8.61133H13.25V10.9121L14.75 10.9121ZM14.75 13.9619L14.75 12.0615L13.25 12.0615V12.4619H13L13 13.9619L14.75 13.9619ZM12 3.60937V2.10937L10 2.10937V3.60937L12 3.60937ZM12 13.9629L12 12.4629H10L10 13.9629H12ZM9 3.60937V2.10937L7 2.10937L7 3.60937L9 3.60937ZM9 13.9629V12.4629H7V13.9629H9ZM6 15L6 1L2 1L2 15H6ZM4.5 2.5L4.5 13.5H3.5L3.5 2.5H4.5Z" fill="currentColor"/>'),Q=(0,R.withNewIcon)('<path d="M3.5 3.60937V4.00977H2V2.10937H3.75V3.60937H3.5ZM2 7.46094V5.16016H3.5V7.46094H2ZM2 10.9121V8.61133H3.5V10.9121L2 10.9121ZM2 13.9619L2 12.0615L3.5 12.0615V12.4619H3.75L3.75 13.9619L2 13.9619ZM4.75 3.60937V2.10937L6.75 2.10937V3.60937L4.75 3.60937ZM4.75 13.9629L4.75 12.4629H6.75L6.75 13.9629H4.75ZM7.75 3.60937L7.75 2.10937L9.75 2.10937V3.60937L7.75 3.60937ZM7.75 13.9629V12.4629H9.75V13.9629H7.75ZM10.75 15L10.75 1L14.75 1L14.75 15H10.75ZM12.25 2.5L12.25 13.5H13.25L13.25 2.5H12.25Z" fill="currentColor"/>'),ee=(0,R.withNewIcon)('<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g clip-path="url(#clip0_11223_26136)">\n<rect x="0.75" y="0.75" width="14.5" height="14.5" rx="3.25" stroke="currentColor" stroke-width="1.5"/>\n<path opacity="0.33" d="M3 15L1.5 14.5L1 13H3V15ZM7 15H5V13H7V15ZM11 15H9V13H11V15ZM14.5 14.5L13 15V13H15L14.5 14.5ZM5 13H3V11H5V13ZM9 13H7V11H9V13ZM13 13H11V11H13V13ZM3 11H1V9H3V11ZM7 11H5V9H7V11ZM11 11H9V9H11V11ZM15 11H13V9H15V11ZM5 9H3V7H5V9ZM9 9H7V7H9V9ZM13 9H11V7H13V9ZM3 7H1V5H3V7ZM7 7H5V5H7V7ZM11 7H9V5H11V7ZM15 7H13V5H15V7ZM5 5H3V3H5V5ZM9 5H7V3H9V5ZM13 5H11V3H13V5ZM3 3H1L1.5 1.5L3 1V3ZM7 3H5V1H7V3ZM11 3H9V1H11V3ZM14.5 1.5L15 3H13V1L14.5 1.5Z" fill="currentColor"/>\n</g>\n<defs>\n<clipPath id="clip0_11223_26136">\n<rect width="16" height="16" fill="white"/>\n</clipPath>\n</defs>\n</svg>'),et=(0,R.withNewIcon)('<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g clip-path="url(#clip0_11223_26193)">\n<path opacity="0.33" d="M15.25 12C15.25 13.7949 13.7949 15.25 12 15.25H4C2.20508 15.25 0.750002 13.7949 0.75 12V11.9492C1.63982 13.0724 3.00385 13.7499 4.47168 13.75H11.2832C12.8846 13.7499 14.3732 12.9417 15.25 11.6074V12Z" fill="currentColor" stroke="currentColor" stroke-width="1.5"/>\n<rect x="0.75" y="0.75" width="14.5" height="11.5" rx="3.25" stroke="currentColor" stroke-width="1.5"/>\n</g>\n<defs>\n<clipPath id="clip0_11223_26193">\n<rect width="16" height="16" fill="white"/>\n</clipPath>\n</defs>\n</svg>\n'),en=(0,R.withNewIcon)('<path d="M14.9951 14.1025C14.9438 14.6067 14.5177 15 14 15H2L1.89746 14.9951C1.42703 14.9472 1.05278 14.573 1.00488 14.1025L1 14V2L1.00488 1.89746C1.05278 1.42703 1.42703 1.05278 1.89746 1.00488L2 1H14C14.5177 1 14.9438 1.39333 14.9951 1.89746L15 2V14L14.9951 14.1025ZM2.5 2.5V13.5H13.5V2.5H2.5ZM4.2666 12.375V3.625H5.66699V12.375H4.2666ZM10.333 12.375V3.625H11.7334V12.375H10.333Z" fill="currentColor"/>'),er=(0,R.withNewIcon)('<path d="M14.1025 1.00488C14.6067 1.05621 15 1.48232 15 2V14L14.9951 14.1025C14.9472 14.573 14.573 14.9472 14.1025 14.9951L14 15H2L1.89746 14.9951C1.42703 14.9472 1.05278 14.573 1.00488 14.1025L1 14V2C1 1.48232 1.39333 1.05621 1.89746 1.00488L2 1H14L14.1025 1.00488ZM2.5 13.5H13.5V2.5H2.5V13.5ZM12.375 11.7334H3.625V10.333H12.375V11.7334ZM12.375 5.66699H3.625V4.2666H12.375V5.66699Z" fill="currentColor"/>'),ei=(0,R.withNewIcon)('<path d="M14.1025 1.00488C14.6067 1.05621 15 1.48232 15 2V14L14.9951 14.1025C14.9472 14.573 14.573 14.9472 14.1025 14.9951L14 15H2L1.89746 14.9951C1.42703 14.9472 1.05278 14.573 1.00488 14.1025L1 14V2C1 1.48232 1.39333 1.05621 1.89746 1.00488L2 1H14L14.1025 1.00488ZM2.5 13.5H13.5V2.5H2.5V13.5ZM12.375 5.66699H3.625V4.2666H12.375V5.66699Z" fill="currentColor"/>'),ea=(0,R.withNewIcon)('<path d="M14.1025 1.00488C14.6067 1.05621 15 1.48232 15 2V14L14.9951 14.1025C14.9472 14.573 14.573 14.9472 14.1025 14.9951L14 15H2L1.89746 14.9951C1.42703 14.9472 1.05278 14.573 1.00488 14.1025L1 14V2C1 1.48232 1.39333 1.05621 1.89746 1.00488L2 1H14L14.1025 1.00488ZM2.5 13.5H13.5V2.5H2.5V13.5ZM12.375 11.7334H3.625V10.333H12.375V11.7334Z" fill="currentColor"/>'),eo=(0,R.withNewIcon)('<path d="M14.9951 14.1025C14.9438 14.6067 14.5177 15 14 15H2L1.89746 14.9951C1.42703 14.9472 1.05278 14.573 1.00488 14.1025L1 14V2L1.00488 1.89746C1.05278 1.42703 1.42703 1.05278 1.89746 1.00488L2 1H14C14.5177 1 14.9438 1.39333 14.9951 1.89746L15 2V14L14.9951 14.1025ZM2.5 2.5V13.5H13.5V2.5H2.5ZM4.2666 12.375V3.625H5.66699V12.375H4.2666Z" fill="currentColor"/>'),es=(0,R.withNewIcon)('<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M14.9951 14.1025C14.9438 14.6067 14.5177 15 14 15H2L1.89746 14.9951C1.42703 14.9472 1.05278 14.573 1.00488 14.1025L1 14V2L1.00488 1.89746C1.05278 1.42703 1.42703 1.05278 1.89746 1.00488L2 1H14C14.5177 1 14.9438 1.39333 14.9951 1.89746L15 2V14L14.9951 14.1025ZM2.5 2.5V13.5H13.5V2.5H2.5ZM10.333 12.375V3.625H11.7334V12.375H10.333Z" fill="currentColor"/>'),el=(0,R.withNewIcon)('<path d="M1 1V15H2.5V1H1ZM11.9951 9.89746C11.9438 9.39333 11.5177 9 11 9H5C4.48232 9 4.05621 9.39333 4.00488 9.89746L4 10V13L4.00488 13.1025C4.05621 13.6067 4.48232 14 5 14H11C11.5177 14 11.9438 13.6067 11.9951 13.1025L12 13V10L11.9951 9.89746ZM11.9951 2.89746C11.9438 2.39333 11.5177 2 11 2H5C4.48232 2 4.05621 2.39333 4.00488 2.89746L4 3V6L4.00488 6.10254C4.05621 6.60667 4.48232 7 5 7L11 7C11.5177 7 11.9438 6.60667 11.9951 6.10254L12 6V3L11.9951 2.89746ZM5.5 12.5V10.5H10.5V12.5H5.5ZM5.5 5.5V3.5H10.5V5.5H5.5ZM13.5 1V15H15V1H13.5Z" fill="currentColor"/>'),ec=(0,R.withNewIcon)('<path d="M5.25488 2.89746C5.30621 2.39333 5.73232 2 6.25 2H13.25L13.3525 2.00488C13.823 2.05278 14.1972 2.42703 14.2451 2.89746L14.25 3V6L14.2451 6.10254C14.1972 6.57297 13.823 6.94722 13.3525 6.99512L13.25 7L6.25 7C5.73232 7 5.30621 6.60667 5.25488 6.10254L5.25 6L5.25 3L5.25488 2.89746ZM12.75 5.5V3.5H6.75V5.5H12.75ZM5.25488 9.89746C5.30621 9.39333 5.73232 9 6.25 9H9.25L9.35254 9.00488C9.82297 9.05278 10.1972 9.42703 10.2451 9.89746L10.25 10V13L10.2451 13.1025C10.1972 13.573 9.82297 13.9472 9.35254 13.9951L9.25 14H6.25C5.73232 14 5.30621 13.6067 5.25488 13.1025L5.25 13V10L5.25488 9.89746ZM8.75 12.5V10.5H6.75V12.5H8.75ZM3.75 1L3.75 15H2.25L2.25 1H3.75Z" fill="currentColor"/>'),eu=(0,R.withNewIcon)('<path d="M2.50488 2.89746C2.55621 2.39333 2.98232 2 3.5 2H7.75V0H9.25V2H13.5L13.6025 2.00488C14.073 2.05278 14.4472 2.42703 14.4951 2.89746L14.5 3V6L14.4951 6.10254C14.4472 6.57297 14.073 6.94722 13.6025 6.99512L13.5 7H9.25V9H11.5C12.0177 9 12.4438 9.39333 12.4951 9.89746L12.5 10V13L12.4951 13.1025C12.4438 13.6067 12.0177 14 11.5 14H9.25V16H7.75V14H5.5C4.98232 14 4.55621 13.6067 4.50488 13.1025L4.5 13V10L4.50488 9.89746C4.55621 9.39333 4.98232 9 5.5 9H7.75L7.75 7H3.5C2.98232 7 2.55621 6.60667 2.50488 6.10254L2.5 6L2.5 3L2.50488 2.89746ZM13 5.5V3.5H4V5.5H13ZM11 12.5V10.5H6V12.5H11Z" fill="currentColor"/>'),ed=(0,R.withNewIcon)('<path d="M11.7451 2.89746C11.6938 2.39333 11.2677 2 10.75 2H3.75L3.64746 2.00488C3.17703 2.05278 2.80278 2.42703 2.75488 2.89746L2.75 3V6L2.75488 6.10254C2.80278 6.57297 3.17703 6.94722 3.64746 6.99512L3.75 7L10.75 7C11.2677 7 11.6938 6.60667 11.7451 6.10254L11.75 6V3L11.7451 2.89746ZM4.25 5.5V3.5H10.25V5.5H4.25ZM11.7451 9.89746C11.6938 9.39333 11.2677 9 10.75 9H7.75L7.64746 9.00488C7.17703 9.05278 6.80278 9.42703 6.75488 9.89746L6.75 10V13L6.75488 13.1025C6.80278 13.573 7.17703 13.9472 7.64746 13.9951L7.75 14H10.75C11.2677 14 11.6938 13.6067 11.7451 13.1025L11.75 13V10L11.7451 9.89746ZM8.25 12.5V10.5H10.25V12.5H8.25ZM13.25 1V15H14.75V1H13.25Z" fill="currentColor"/>'),ep=(0,R.withNewIcon)('<path d="M15.75 1H1.75L1.75 2.5H15.75V1ZM6.85254 11.9951C7.35667 11.9438 7.75 11.5177 7.75 11L7.75 5C7.75 4.48232 7.35667 4.05621 6.85254 4.00488L6.75 4H3.75L3.64746 4.00488C3.14333 4.05621 2.75 4.48232 2.75 5L2.75 11C2.75 11.5177 3.14333 11.9438 3.64746 11.9951L3.75 12H6.75L6.85254 11.9951ZM13.8525 11.9951C14.3567 11.9438 14.75 11.5177 14.75 11V5C14.75 4.48232 14.3567 4.05621 13.8525 4.00488L13.75 4H10.75L10.6475 4.00488C10.1433 4.05621 9.75 4.48232 9.75 5V11C9.75 11.5177 10.1433 11.9438 10.6475 11.9951L10.75 12H13.75L13.8525 11.9951ZM4.25 5.5H6.25L6.25 10.5H4.25V5.5ZM11.25 5.5H13.25V10.5H11.25V5.5ZM15.75 13.5H1.75V15H15.75V13.5Z" fill="currentColor"/>'),eh=(0,R.withNewIcon)('<path d="M13.1025 5.00488C13.6067 5.05621 14 5.48232 14 6V13L13.9951 13.1025C13.9472 13.573 13.573 13.9472 13.1025 13.9951L13 14H10L9.89746 13.9951C9.42703 13.9472 9.05278 13.573 9.00488 13.1025L9 13V6C9 5.48232 9.39333 5.05621 9.89746 5.00488L10 5L13 5L13.1025 5.00488ZM10.5 12.5H12.5V6.5H10.5V12.5ZM6.10254 5.00488C6.60667 5.05621 7 5.48232 7 6V9L6.99512 9.10254C6.94722 9.57297 6.57297 9.94722 6.10254 9.99512L6 10H3L2.89746 9.99512C2.42703 9.94722 2.05278 9.57297 2.00488 9.10254L2 9L2 6C2 5.48232 2.39333 5.05621 2.89746 5.00488L3 5H6L6.10254 5.00488ZM3.5 8.5H5.5V6.5H3.5V8.5ZM15 3.5L1 3.5L1 2L15 2V3.5Z" fill="currentColor"/>'),ef=(0,R.withNewIcon)('<svg width="17" height="16" viewBox="0 0 17 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g clip-path="url(#clip0_11245_7503)">\n<path d="M13.3525 2.00488C13.8567 2.05621 14.25 2.48232 14.25 3V7.25H16.25V8.75H14.25V13L14.2451 13.1025C14.1972 13.573 13.823 13.9472 13.3525 13.9951L13.25 14H10.25L10.1475 13.9951C9.67703 13.9472 9.30278 13.573 9.25488 13.1025L9.25 13V8.75H7.25L7.25 11C7.25 11.5177 6.85667 11.9438 6.35254 11.9951L6.25 12H3.25L3.14746 11.9951C2.64333 11.9438 2.25 11.5177 2.25 11V8.75H0.25L0.25 7.25H2.25V5C2.25 4.48232 2.64333 4.05621 3.14746 4.00488L3.25 4H6.25L6.35254 4.00488C6.85667 4.05621 7.25 4.48232 7.25 5V7.25L9.25 7.25V3C9.25 2.48232 9.64333 2.05621 10.1475 2.00488L10.25 2L13.25 2L13.3525 2.00488ZM10.75 12.5H12.75V3.5H10.75V12.5ZM3.75 10.5H5.75L5.75 5.5H3.75L3.75 10.5Z" fill="currentColor"/>\n</g>\n<defs>\n<clipPath id="clip0_11245_7503">\n<rect width="16" height="16" fill="white" transform="matrix(0 1 -1 0 16.25 0)"/>\n</clipPath>\n</defs>\n</svg>'),em=(0,R.withNewIcon)('<path d="M13.6025 10.9951C14.1067 10.9438 14.5 10.5177 14.5 10V3L14.4951 2.89746C14.4472 2.42703 14.073 2.05278 13.6025 2.00488L13.5 2H10.5L10.3975 2.00488C9.92703 2.05278 9.55278 2.42703 9.50488 2.89746L9.5 3V10C9.5 10.5177 9.89333 10.9438 10.3975 10.9951L10.5 11H13.5L13.6025 10.9951ZM11 3.5H13V9.5H11V3.5ZM6.60254 10.9951C7.10667 10.9438 7.5 10.5177 7.5 10V7L7.49512 6.89746C7.44722 6.42703 7.07297 6.05278 6.60254 6.00488L6.5 6H3.5L3.39746 6.00488C2.92703 6.05278 2.55278 6.42703 2.50488 6.89746L2.5 7L2.5 10C2.5 10.5177 2.89333 10.9438 3.39746 10.9951L3.5 11H6.5L6.60254 10.9951ZM4 7.5H6V9.5H4V7.5ZM15.5 12.5H1.5V14H15.5V12.5Z" fill="currentColor"/>');(0,R.withNewIcon)('<path fill="currentColor" d="M12 22q-.425 0-.712-.288T11 21V3q0-.425.288-.712T12 2t.713.288T13 3v18q0 .425-.288.713T12 22m4-5q-.425 0-.712-.288T15 16V8q0-.425.288-.712T16 7h1q.425 0 .713.288T18 8v8q0 .425-.288.713T17 17zm-9 0q-.425 0-.712-.288T6 16V8q0-.425.288-.712T7 7h1q.425 0 .713.288T9 8v8q0 .425-.288.713T8 17z"/>',{viewBox:"0 0 24 24"}),(0,R.withNewIcon)('<path fill="currentColor" d="M21 22q-.425 0-.712-.288T20 21V3q0-.425.288-.712T21 2t.713.288T22 3v18q0 .425-.288.713T21 22m-6-5q-.425 0-.712-.288T14 16V8q0-.425.288-.712T15 7h1q.425 0 .713.288T17 8v8q0 .425-.288.713T16 17zm-6 0q-.425 0-.712-.288T8 16V8q0-.425.288-.712T9 7h1q.425 0 .713.288T11 8v8q0 .425-.288.713T10 17z"/>',{viewBox:"0 0 24 24"}),(0,R.withNewIcon)('<path fill="currentColor" d="M16 17q-.425 0-.712-.288T15 16V8q0-.425.288-.712T16 7h1q.425 0 .713.288T18 8v8q0 .425-.288.713T17 17zm-9 0q-.425 0-.712-.288T6 16V8q0-.425.288-.712T7 7h1q.425 0 .713.288T9 8v8q0 .425-.288.713T8 17zm14 5q-.425 0-.712-.288T20 21V3q0-.425.288-.712T21 2t.713.288T22 3v18q0 .425-.288.713T21 22M3 22q-.425 0-.712-.288T2 21V3q0-.425.288-.712T3 2t.713.288T4 3v18q0 .425-.288.713T3 22"/>',{viewBox:"0 0 24 24"}),(0,R.withNewIcon)('<path fill="currentColor" d="M21 22q-.425 0-.712-.288T20 21v-4h-2q-.425 0-.712-.288T17 16V8q0-.425.288-.712T18 7h2V3q0-.425.288-.712T21 2t.713.288T22 3v18q0 .425-.288.713T21 22M3 22q-.425 0-.712-.288T2 21V3q0-.425.288-.712T3 2t.713.288T4 3v4h2q.425 0 .713.288T7 8v8q0 .425-.288.713T6 17H4v4q0 .425-.288.713T3 22"/>',{viewBox:"0 0 24 24"}),(0,R.withNewIcon)('<path fill="currentColor" d="M15 17q-.425 0-.712-.288T14 16V8q0-.425.288-.712T15 7h1q.425 0 .713.288T17 8v8q0 .425-.288.713T16 17zm-7 0q-.425 0-.712-.288T7 16V8q0-.425.288-.712T8 7h1q.425 0 .713.288T10 8v8q0 .425-.288.713T9 17zm13 5q-.425 0-.712-.288T20 21V3q0-.425.288-.712T21 2t.713.288T22 3v18q0 .425-.288.713T21 22M3 22q-.425 0-.712-.288T2 21V3q0-.425.288-.712T3 2t.713.288T4 3v18q0 .425-.288.713T3 22"/>',{viewBox:"0 0 24 24"}),(0,R.withNewIcon)('<path fill="currentColor" d="M21 22q-.425 0-.712-.288T20 21V3q0-.425.288-.712T21 2t.713.288T22 3v18q0 .425-.288.713T21 22M3 22q-.425 0-.712-.288T2 21V3q0-.425.288-.712T3 2t.713.288T4 3v18q0 .425-.288.713T3 22m11-12q-.425 0-.712-.288T13 9V8q0-.425.288-.712T14 7h3q.425 0 .713.288T18 8v1q0 .425-.288.713T17 10zm-7 0q-.425 0-.712-.288T6 9V8q0-.425.288-.712T7 7h3q.425 0 .713.288T11 8v1q0 .425-.288.713T10 10zm7 7q-.425 0-.712-.288T13 16v-1q0-.425.288-.712T14 14h3q.425 0 .713.288T18 15v1q0 .425-.288.713T17 17zm-7 0q-.425 0-.712-.288T6 16v-1q0-.425.288-.712T7 14h3q.425 0 .713.288T11 15v1q0 .425-.288.713T10 17z"/>',{viewBox:"0 0 24 24"}),(0,R.withNewIcon)('<path fill="currentColor" d="M3 4q-.425 0-.712-.288T2 3t.288-.712T3 2h18q.425 0 .713.288T22 3t-.288.713T21 4zm5 6q-.425 0-.712-.288T7 9V8q0-.425.288-.712T8 7h8q.425 0 .713.288T17 8v1q0 .425-.288.713T16 10zm0 6q-.425 0-.712-.288T7 15v-1q0-.425.288-.712T8 13h8q.425 0 .713.288T17 14v1q0 .425-.288.713T16 16z"/>',{viewBox:"0 0 24 24"}),(0,R.withNewIcon)('<path fill="currentColor" d="M3 22q-.425 0-.712-.288T2 21V3q0-.425.288-.712T3 2t.713.288T4 3v18q0 .425-.288.713T3 22m4.5-5q-.625 0-1.062-.437T6 15.5t.438-1.062T7.5 14h7q.625 0 1.063.438T16 15.5t-.437 1.063T14.5 17zm0-7q-.625 0-1.062-.437T6 8.5t.438-1.062T7.5 7h13q.625 0 1.063.438T22 8.5t-.437 1.063T20.5 10z"/>',{viewBox:"0 0 24 24"}),(0,R.withNewIcon)('<path fill="currentColor" d="M8.5 21q-.625 0-1.062-.437T7 19.5V13H3q-.425 0-.712-.288T2 12t.288-.712T3 11h4V4.5q0-.625.438-1.062T8.5 3t1.063.438T10 4.5V11h4V7.5q0-.625.438-1.062T15.5 6t1.063.438T17 7.5V11h4q.425 0 .713.288T22 12t-.288.713T21 13h-4v3.5q0 .625-.437 1.063T15.5 18t-1.062-.437T14 16.5V13h-4v6.5q0 .625-.437 1.063T8.5 21"/>',{viewBox:"0 0 24 24"}),(0,R.withNewIcon)('<path fill="currentColor" d="M11 21v-4H7.5q-.625 0-1.062-.437T6 15.5t.438-1.062T7.5 14H11v-4H4.5q-.625 0-1.062-.437T3 8.5t.438-1.062T4.5 7H11V3q0-.425.288-.712T12 2t.713.288T13 3v4h6.5q.625 0 1.063.438T21 8.5t-.437 1.063T19.5 10H13v4h3.5q.625 0 1.063.438T18 15.5t-.437 1.063T16.5 17H13v4q0 .425-.288.713T12 22t-.712-.288T11 21"/>',{viewBox:"0 0 24 24"}),(0,R.withNewIcon)('<path fill="currentColor" d="M21 22q-.425 0-.712-.288T20 21V3q0-.425.288-.712T21 2t.713.288T22 3v18q0 .425-.288.713T21 22M9.5 17q-.625 0-1.062-.437T8 15.5t.438-1.062T9.5 14h7q.625 0 1.063.438T18 15.5t-.437 1.063T16.5 17zm-6-7q-.625 0-1.062-.437T2 8.5t.438-1.062T3.5 7h13q.625 0 1.063.438T18 8.5t-.437 1.063T16.5 10z"/>',{viewBox:"0 0 24 24"}),(0,R.withNewIcon)('<path fill="currentColor" d="M8 18q-.425 0-.712-.288T7 17V7q0-.425.288-.712T8 6h1q.425 0 .713.288T10 7v10q0 .425-.288.713T9 18zm7 0q-.425 0-.712-.288T14 17V7q0-.425.288-.712T15 6h1q.425 0 .713.288T17 7v10q0 .425-.288.713T16 18zM3 22q-.425 0-.712-.288T2 21t.288-.712T3 20h18q.425 0 .713.288T22 21t-.288.713T21 22zM3 4q-.425 0-.712-.288T2 3t.288-.712T3 2h18q.425 0 .713.288T22 3t-.288.713T21 4z"/>',{viewBox:"0 0 24 24"});let eg=(e,t)=>{if("number"==typeof e){if(3===t)return{mode:"rgb",r:(e>>8&15|e>>4&240)/255,g:(e>>4&15|240&e)/255,b:(15&e|e<<4&240)/255};if(4===t)return{mode:"rgb",r:(e>>12&15|e>>8&240)/255,g:(e>>8&15|e>>4&240)/255,b:(e>>4&15|240&e)/255,alpha:(15&e|e<<4&240)/255};if(6===t)return{mode:"rgb",r:(e>>16&255)/255,g:(e>>8&255)/255,b:(255&e)/255};if(8===t)return{mode:"rgb",r:(e>>24&255)/255,g:(e>>16&255)/255,b:(e>>8&255)/255,alpha:(255&e)/255}}},ev={aliceblue:0xf0f8ff,antiquewhite:0xfaebd7,aqua:65535,aquamarine:8388564,azure:0xf0ffff,beige:0xf5f5dc,bisque:0xffe4c4,black:0,blanchedalmond:0xffebcd,blue:255,blueviolet:9055202,brown:0xa52a2a,burlywood:0xdeb887,cadetblue:6266528,chartreuse:8388352,chocolate:0xd2691e,coral:0xff7f50,cornflowerblue:6591981,cornsilk:0xfff8dc,crimson:0xdc143c,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:0xb8860b,darkgray:0xa9a9a9,darkgreen:25600,darkgrey:0xa9a9a9,darkkhaki:0xbdb76b,darkmagenta:9109643,darkolivegreen:5597999,darkorange:0xff8c00,darkorchid:0x9932cc,darkred:9109504,darksalmon:0xe9967a,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:0xff1493,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:0xb22222,floralwhite:0xfffaf0,forestgreen:2263842,fuchsia:0xff00ff,gainsboro:0xdcdcdc,ghostwhite:0xf8f8ff,gold:0xffd700,goldenrod:0xdaa520,gray:8421504,green:32768,greenyellow:0xadff2f,grey:8421504,honeydew:0xf0fff0,hotpink:0xff69b4,indianred:0xcd5c5c,indigo:4915330,ivory:0xfffff0,khaki:0xf0e68c,lavender:0xe6e6fa,lavenderblush:0xfff0f5,lawngreen:8190976,lemonchiffon:0xfffacd,lightblue:0xadd8e6,lightcoral:0xf08080,lightcyan:0xe0ffff,lightgoldenrodyellow:0xfafad2,lightgray:0xd3d3d3,lightgreen:9498256,lightgrey:0xd3d3d3,lightpink:0xffb6c1,lightsalmon:0xffa07a,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:0xb0c4de,lightyellow:0xffffe0,lime:65280,limegreen:3329330,linen:0xfaf0e6,magenta:0xff00ff,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:0xba55d3,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:0xc71585,midnightblue:1644912,mintcream:0xf5fffa,mistyrose:0xffe4e1,moccasin:0xffe4b5,navajowhite:0xffdead,navy:128,oldlace:0xfdf5e6,olive:8421376,olivedrab:7048739,orange:0xffa500,orangered:0xff4500,orchid:0xda70d6,palegoldenrod:0xeee8aa,palegreen:0x98fb98,paleturquoise:0xafeeee,palevioletred:0xdb7093,papayawhip:0xffefd5,peachpuff:0xffdab9,peru:0xcd853f,pink:0xffc0cb,plum:0xdda0dd,powderblue:0xb0e0e6,purple:8388736,rebeccapurple:6697881,red:0xff0000,rosybrown:0xbc8f8f,royalblue:4286945,saddlebrown:9127187,salmon:0xfa8072,sandybrown:0xf4a460,seagreen:3050327,seashell:0xfff5ee,sienna:0xa0522d,silver:0xc0c0c0,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:0xfffafa,springgreen:65407,steelblue:4620980,tan:0xd2b48c,teal:32896,thistle:0xd8bfd8,tomato:0xff6347,turquoise:4251856,violet:0xee82ee,wheat:0xf5deb3,white:0xffffff,whitesmoke:0xf5f5f5,yellow:0xffff00,yellowgreen:0x9acd32},ex=e=>eg(ev[e.toLowerCase()],6),ey=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,eb=e=>{let t;return(t=e.match(ey))?eg(parseInt(t[1],16),t[1].length):void 0},ew="([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)",ej="".concat(ew,"%"),eC="(?:".concat(ew,"%|").concat(ew,")"),ek="(?:".concat(ew,"%|").concat(ew,"|none)"),eS="(?:".concat(ew,"(deg|grad|rad|turn)|").concat(ew,")");"(?:".concat(ew,"(deg|grad|rad|turn)|").concat(ew,"|none)");let eN="\\s*,\\s*";RegExp("^"+ek+"$");let eE=new RegExp("^rgba?\\(\\s*".concat(ew).concat(eN).concat(ew).concat(eN).concat(ew,"\\s*(?:,\\s*").concat(eC,"\\s*)?\\)$")),eM=new RegExp("^rgba?\\(\\s*".concat(ej).concat(eN).concat(ej).concat(eN).concat(ej,"\\s*(?:,\\s*").concat(eC,"\\s*)?\\)$")),eI=e=>{let t,n={mode:"rgb"};if(t=e.match(eE))void 0!==t[1]&&(n.r=t[1]/255),void 0!==t[2]&&(n.g=t[2]/255),void 0!==t[3]&&(n.b=t[3]/255);else{if(!(t=e.match(eM)))return;void 0!==t[1]&&(n.r=t[1]/100),void 0!==t[2]&&(n.g=t[2]/100),void 0!==t[3]&&(n.b=t[3]/100)}return void 0!==t[4]?n.alpha=Math.max(0,Math.min(1,t[4]/100)):void 0!==t[5]&&(n.alpha=Math.max(0,Math.min(1,+t[5]))),n},eD=(e,t)=>void 0===e?void 0:"object"!=typeof e?e1(e):void 0!==e.mode?e:t?{...e,mode:t}:void 0,eT=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"rgb";return t=>void 0!==(t=eD(t,e))?t.mode===e?t:eA[t.mode][e]?eA[t.mode][e](t):"rgb"===e?eA[t.mode].rgb(t):eA.rgb[e](eA[t.mode].rgb(t)):void 0},eA={},eL={},eP=[],eR={},e_=e=>e,eO=e=>(eA[e.mode]={...eA[e.mode],...e.toMode},Object.keys(e.fromMode||{}).forEach(t=>{eA[t]||(eA[t]={}),eA[t][e.mode]=e.fromMode[t]}),e.ranges||(e.ranges={}),e.difference||(e.difference={}),e.channels.forEach(t=>{if(void 0===e.ranges[t]&&(e.ranges[t]=[0,1]),!e.interpolate[t])throw Error("Missing interpolator for: ".concat(t));"function"==typeof e.interpolate[t]&&(e.interpolate[t]={use:e.interpolate[t]}),e.interpolate[t].fixup||(e.interpolate[t].fixup=e_)}),eL[e.mode]=e,(e.parse||[]).forEach(t=>{eV(t,e.mode)}),eT(e.mode)),eF=e=>eL[e],eV=(e,t)=>{if("string"==typeof e){if(!t)throw Error("'mode' required when 'parser' is a string");eR[e]=t}else"function"==typeof e&&0>eP.indexOf(e)&&eP.push(e)},eB=/[^\x00-\x7F]|[a-zA-Z_]/,ez=/[^\x00-\x7F]|[-\w]/,eH={Function:"function",Ident:"ident",Number:"number",Percentage:"percentage",ParenClose:")",None:"none",Hue:"hue",Alpha:"alpha"},eU=0;function eq(e){let t=e[eU],n=e[eU+1];return"-"===t||"+"===t?/\d/.test(n)||"."===n&&/\d/.test(e[eU+2]):"."===t?/\d/.test(n):/\d/.test(t)}function eW(e){if(eU>=e.length)return!1;let t=e[eU];if(eB.test(t))return!0;if("-"===t){if(e.length-eU<2)return!1;let t=e[eU+1];if("-"===t||eB.test(t))return!0}return!1}let eZ={deg:1,rad:180/Math.PI,grad:.9,turn:360};function eG(e){let t="";if(("-"===e[eU]||"+"===e[eU])&&(t+=e[eU++]),t+=eK(e),"."===e[eU]&&/\d/.test(e[eU+1])&&(t+=e[eU++]+eK(e)),("e"===e[eU]||"E"===e[eU])&&(("-"===e[eU+1]||"+"===e[eU+1])&&/\d/.test(e[eU+2])?t+=e[eU++]+e[eU++]+eK(e):/\d/.test(e[eU+1])&&(t+=e[eU++]+eK(e))),eW(e)){let n=eX(e);return"deg"===n||"rad"===n||"turn"===n||"grad"===n?{type:eH.Hue,value:t*eZ[n]}:void 0}return"%"===e[eU]?(eU++,{type:eH.Percentage,value:+t}):{type:eH.Number,value:+t}}function eK(e){let t="";for(;/\d/.test(e[eU]);)t+=e[eU++];return t}function eX(e){let t="";for(;eU<e.length&&ez.test(e[eU]);)t+=e[eU++];return t}function e$(e){let t=eX(e);return"("===e[eU]?(eU++,{type:eH.Function,value:t}):"none"===t?{type:eH.None,value:void 0}:{type:eH.Ident,value:t}}function eY(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=t.trim(),r=[];for(eU=0;eU<n.length;){if("\n"===(e=n[eU++])||"	"===e||" "===e){for(;eU<n.length&&("\n"===n[eU]||"	"===n[eU]||" "===n[eU]);)eU++;continue}if(","===e)return;if(")"===e){r.push({type:eH.ParenClose});continue}if("+"===e){if(eU--,eq(n)){r.push(eG(n));continue}return}if("-"===e){if(eU--,eq(n)){r.push(eG(n));continue}if(eW(n)){r.push({type:eH.Ident,value:eX(n)});continue}return}if("."===e){if(eU--,eq(n)){r.push(eG(n));continue}return}if("/"===e){let e;for(;eU<n.length&&("\n"===n[eU]||"	"===n[eU]||" "===n[eU]);)eU++;if(eq(n)&&(e=eG(n)).type!==eH.Hue){r.push({type:eH.Alpha,value:e});continue}if(eW(n)&&"none"===eX(n)){r.push({type:eH.Alpha,value:{type:eH.None,value:void 0}});continue}return}if(/\d/.test(e)){eU--,r.push(eG(n));continue}if(eB.test(e)){eU--,r.push(e$(n));continue}return}return r}function eJ(e){e._i=0;let t=e[e._i++];if(!t||t.type!==eH.Function||"color"!==t.value||(t=e[e._i++]).type!==eH.Ident)return;let n=eR[t.value];if(!n)return;let r={mode:n},i=eQ(e,!1);if(!i)return;let a=eF(n).channels;for(let e=0,t,n;e<a.length;e++)t=i[e],n=a[e],t.type!==eH.None&&(r[n]=t.type===eH.Number?t.value:t.value/100,"alpha"===n&&(r[n]=Math.max(0,Math.min(1,r[n]))));return r}function eQ(e,t){let n,r=[];for(;e._i<e.length;){if((n=e[e._i++]).type===eH.None||n.type===eH.Number||n.type===eH.Alpha||n.type===eH.Percentage||t&&n.type===eH.Hue){r.push(n);continue}if(n.type===eH.ParenClose){if(e._i<e.length)return;continue}return}if(!(r.length<3)&&!(r.length>4)){if(4===r.length){if(r[3].type!==eH.Alpha)return;r[3]=r[3].value}return 3===r.length&&r.push({type:eH.None,value:void 0}),r.every(e=>e.type!==eH.Alpha)?r:void 0}}function e0(e,t){e._i=0;let n=e[e._i++];if(!n||n.type!==eH.Function)return;let r=eQ(e,t);if(r)return r.unshift(n.value),r}let e1=e=>{let t;if("string"!=typeof e)return;let n=eY(e),r=n?e0(n,!0):void 0,i=0,a=eP.length;for(;i<a;)if(void 0!==(t=eP[i++](e,r)))return t;return n?eJ(n):void 0},e2=function(e,t){if(!t||"rgb"!==t[0]&&"rgba"!==t[0])return;let n={mode:"rgb"},[,r,i,a,o]=t;if(r.type!==eH.Hue&&i.type!==eH.Hue&&a.type!==eH.Hue)return r.type!==eH.None&&(n.r=r.type===eH.Number?r.value/255:r.value/100),i.type!==eH.None&&(n.g=i.type===eH.Number?i.value/255:i.value/100),a.type!==eH.None&&(n.b=a.type===eH.Number?a.value/255:a.value/100),o.type!==eH.None&&(n.alpha=Math.min(1,Math.max(0,o.type===eH.Number?o.value:o.value/100))),n},e5=e=>"transparent"===e?{mode:"rgb",r:0,g:0,b:0,alpha:0}:void 0,e4=e=>{let t=[];for(let n=0;n<e.length-1;n++){let r=e[n],i=e[n+1];void 0===r&&void 0===i?t.push(void 0):void 0!==r&&void 0!==i?t.push([r,i]):t.push(void 0!==r?[r,r]:[i,i])}return t},e3=(t=(e,t,n)=>e+n*(t-e),e=>{let n=e4(e);return e=>{let r=e*n.length,i=e>=1?n.length-1:Math.max(Math.floor(r),0),a=n[i];return void 0===a?void 0:t(a[0],a[1],r-i)}}),e7=e=>{let t=!1,n=e.map(e=>void 0!==e?(t=!0,e):1);return t?n:e},e9={mode:"rgb",channels:["r","g","b","alpha"],parse:[e2,eb,eI,ex,e5,"srgb"],serialize:"srgb",interpolate:{r:e3,g:e3,b:e3,alpha:{use:e3,fixup:e7}},gamut:!0,white:{r:1,g:1,b:1},black:{r:0,g:0,b:0}},e6=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Math.pow(Math.abs(e),563/256)*Math.sign(e)},e8=e=>{let t=e6(e.r),n=e6(e.g),r=e6(e.b),i={mode:"xyz65",x:.5766690429101305*t+.1855582379065463*n+.1882286462349947*r,y:.297344975250536*t+.6273635662554661*n+.0752914584939979*r,z:.0270313613864123*t+.0706888525358272*n+.9913375368376386*r};return void 0!==e.alpha&&(i.alpha=e.alpha),i},te=e=>Math.pow(Math.abs(e),256/563)*Math.sign(e),tt=e=>{let{x:t,y:n,z:r,alpha:i}=e;void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0);let a={mode:"a98",r:te(2.0415879038107465*t-.5650069742788597*n-.3447313507783297*r),g:te(-.9692436362808798*t+1.8759675015077206*n+.0415550574071756*r),b:te(.0134442806320312*t-.1183623922310184*n+1.0151749943912058*r)};return void 0!==i&&(a.alpha=i),a},tn=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=Math.abs(e);return t<=.04045?e/12.92:(Math.sign(e)||1)*Math.pow((t+.055)/1.055,2.4)},tr=e=>{let{r:t,g:n,b:r,alpha:i}=e,a={mode:"lrgb",r:tn(t),g:tn(n),b:tn(r)};return void 0!==i&&(a.alpha=i),a},ti=e=>{let{r:t,g:n,b:r,alpha:i}=tr(e),a={mode:"xyz65",x:.4123907992659593*t+.357584339383878*n+.1804807884018343*r,y:.2126390058715102*t+.715168678767756*n+.0721923153607337*r,z:.0193308187155918*t+.119194779794626*n+.9505321522496607*r};return void 0!==i&&(a.alpha=i),a},ta=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=Math.abs(e);return t>.0031308?(Math.sign(e)||1)*(1.055*Math.pow(t,1/2.4)-.055):12.92*e},to=function(e){let{r:t,g:n,b:r,alpha:i}=e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"rgb",o={mode:a,r:ta(t),g:ta(n),b:ta(r)};return void 0!==i&&(o.alpha=i),o},ts=e=>{let{x:t,y:n,z:r,alpha:i}=e;void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0);let a=to({r:3.2409699419045226*t-1.537383177570094*n-.4986107602930034*r,g:-.9692436362808796*t+1.8759675015077204*n+.0415550574071756*r,b:.0556300796969936*t-.2039769588889765*n+1.0569715142428784*r});return void 0!==i&&(a.alpha=i),a},tl={...e9,mode:"a98",parse:["a98-rgb"],serialize:"a98-rgb",fromMode:{rgb:e=>tt(ti(e)),xyz65:tt},toMode:{rgb:e=>ts(e8(e)),xyz65:e8}},tc=e=>(e%=360)<0?e+360:e,tu=(e,t)=>e.map((n,r,i)=>{if(void 0===n)return n;let a=tc(n);return 0===r||void 0===e[r-1]?a:t(a-tc(i[r-1]))}).reduce((e,t)=>(e.length&&void 0!==t&&void 0!==e[e.length-1]?e.push(t+e[e.length-1]):e.push(t),e),[]),td=e=>tu(e,e=>180>=Math.abs(e)?e:e-360*Math.sign(e)),tp=[-.14861,1.78277,-.29227,-.90649,1.97294,0],th=Math.PI/180,tf=180/Math.PI,tm=tp[3]*tp[4],tg=tp[1]*tp[4],tv=tp[1]*tp[2]-tp[0]*tp[3],tx=(e,t)=>{if(void 0===e.h||void 0===t.h||!e.s||!t.s)return 0;let n=tc(e.h),r=Math.sin((tc(t.h)-n+360)/2*Math.PI/180);return 2*Math.sqrt(e.s*t.s)*r},ty=(e,t)=>{if(void 0===e.h||void 0===t.h)return 0;let n=tc(e.h),r=tc(t.h);return Math.abs(r-n)>180?n-(r-360*Math.sign(r-n)):r-n},tb=(e,t)=>{if(void 0===e.h||void 0===t.h||!e.c||!t.c)return 0;let n=tc(e.h),r=Math.sin((tc(t.h)-n+360)/2*Math.PI/180);return 2*Math.sqrt(e.c*t.c)*r},tw=e=>{let t=e.reduce((e,t)=>{if(void 0!==t){let n=t*Math.PI/180;e.sin+=Math.sin(n),e.cos+=Math.cos(n)}return e},{sin:0,cos:0}),n=180*Math.atan2(t.sin,t.cos)/Math.PI;return n<0?360+n:n},tj={mode:"cubehelix",channels:["h","s","l","alpha"],parse:["--cubehelix"],serialize:"--cubehelix",ranges:{h:[0,360],s:[0,4.614],l:[0,1]},fromMode:{rgb:e=>{let{r:t,g:n,b:r,alpha:i}=e;void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0);let a=(tv*r+t*tm-n*tg)/(tv+tm-tg),o=r-a,s=(tp[4]*(n-a)-tp[2]*o)/tp[3],l={mode:"cubehelix",l:a,s:0===a||1===a?void 0:Math.sqrt(o*o+s*s)/(tp[4]*a*(1-a))};return l.s&&(l.h=Math.atan2(s,o)*tf-120),void 0!==i&&(l.alpha=i),l}},toMode:{rgb:e=>{let{h:t,s:n,l:r,alpha:i}=e,a={mode:"rgb"};void 0===r&&(r=0);let o=void 0===n?0:n*r*(1-r),s=Math.cos(t=(void 0===t?0:t+120)*th),l=Math.sin(t);return a.r=r+o*(tp[0]*s+tp[1]*l),a.g=r+o*(tp[2]*s+tp[3]*l),a.b=r+o*(tp[4]*s+tp[5]*l),void 0!==i&&(a.alpha=i),a}},interpolate:{h:{use:e3,fixup:td},s:e3,l:e3,alpha:{use:e3,fixup:e7}},difference:{h:tx},average:{h:tw}},tC=function(e){let{l:t,a:n,b:r,alpha:i}=e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"lch";void 0===n&&(n=0),void 0===r&&(r=0);let o=Math.sqrt(n*n+r*r),s={mode:a,l:t,c:o};return o&&(s.h=tc(180*Math.atan2(r,n)/Math.PI)),void 0!==i&&(s.alpha=i),s},tk=function(e){let{l:t,c:n,h:r,alpha:i}=e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"lab";void 0===r&&(r=0);let o={mode:a,l:t,a:n?n*Math.cos(r/180*Math.PI):0,b:n?n*Math.sin(r/180*Math.PI):0};return void 0!==i&&(o.alpha=i),o},tS=903.2962962962963,tN=.008856451679035631,tE={X:.3457/.3585,Y:1,Z:.8251046025104602},tM={X:.3127/.329,Y:1,Z:1.0890577507598784},tI=e=>Math.pow(e,3)>tN?Math.pow(e,3):(116*e-16)/tS,tD=e=>{let{l:t,a:n,b:r,alpha:i}=e;void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0);let a=(t+16)/116,o=n/500+a,s=a-r/200,l={mode:"xyz65",x:tI(o)*tM.X,y:tI(a)*tM.Y,z:tI(s)*tM.Z};return void 0!==i&&(l.alpha=i),l},tT=e=>ts(tD(e)),tA=e=>e>tN?Math.cbrt(e):(tS*e+16)/116,tL=e=>{let{x:t,y:n,z:r,alpha:i}=e;void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0);let a=tA(t/tM.X),o=tA(n/tM.Y),s={mode:"lab65",l:116*o-16,a:500*(a-o),b:200*(o-tA(r/tM.Z))};return void 0!==i&&(s.alpha=i),s},tP=e=>{let t=tL(ti(e));return e.r===e.b&&e.b===e.g&&(t.a=t.b=0),t},tR=1,t_=1,tO=26/180*Math.PI,tF=Math.cos(tO),tV=Math.sin(tO),tB=100/Math.log(1.39),tz=e=>{let{l:t,c:n,h:r,alpha:i}=e;void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0);let a={mode:"lab65",l:(Math.exp(t*tR/tB)-1)/.0039},o=(Math.exp(.0435*n*t_*tR)-1)/.075,s=o*Math.cos(r/180*Math.PI-tO),l=o*Math.sin(r/180*Math.PI-tO);return a.a=s*tF-l/.83*tV,a.b=s*tV+l/.83*tF,void 0!==i&&(a.alpha=i),a},tH=e=>{let{l:t,a:n,b:r,alpha:i}=e;void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0);let a=n*tF+r*tV,o=.83*(r*tF-n*tV),s={mode:"dlch",l:tB/tR*Math.log(1+.0039*t),c:Math.log(1+.075*Math.sqrt(a*a+o*o))/(.0435*t_*tR)};return s.c&&(s.h=tc((Math.atan2(o,a)+tO)/Math.PI*180)),void 0!==i&&(s.alpha=i),s},tU=e=>tz(tC(e,"dlch")),tq=e=>tk(tH(e),"dlab"),tW={mode:"dlab",parse:["--din99o-lab"],serialize:"--din99o-lab",toMode:{lab65:tU,rgb:e=>tT(tU(e))},fromMode:{lab65:tq,rgb:e=>tq(tP(e))},channels:["l","a","b","alpha"],ranges:{l:[0,100],a:[-40.09,45.501],b:[-40.469,44.344]},interpolate:{l:e3,a:e3,b:e3,alpha:{use:e3,fixup:e7}}},tZ={mode:"dlch",parse:["--din99o-lch"],serialize:"--din99o-lch",toMode:{lab65:tz,dlab:e=>tk(e,"dlab"),rgb:e=>tT(tz(e))},fromMode:{lab65:tH,dlab:e=>tC(e,"dlch"),rgb:e=>tH(tP(e))},channels:["l","c","h","alpha"],ranges:{l:[0,100],c:[0,51.484],h:[0,360]},interpolate:{l:e3,c:e3,h:{use:e3,fixup:td},alpha:{use:e3,fixup:e7}},difference:{h:tb},average:{h:tw}},tG={mode:"hsi",toMode:{rgb:function(e){let t,{h:n,s:r,i,alpha:a}=e;n=tc(void 0!==n?n:0),void 0===r&&(r=0),void 0===i&&(i=0);let o=Math.abs(n/60%2-1);switch(Math.floor(n/60)){case 0:t={r:i*(1+r*(3/(2-o)-1)),g:i*(1+r*(3*(1-o)/(2-o)-1)),b:i*(1-r)};break;case 1:t={r:i*(1+r*(3*(1-o)/(2-o)-1)),g:i*(1+r*(3/(2-o)-1)),b:i*(1-r)};break;case 2:t={r:i*(1-r),g:i*(1+r*(3/(2-o)-1)),b:i*(1+r*(3*(1-o)/(2-o)-1))};break;case 3:t={r:i*(1-r),g:i*(1+r*(3*(1-o)/(2-o)-1)),b:i*(1+r*(3/(2-o)-1))};break;case 4:t={r:i*(1+r*(3*(1-o)/(2-o)-1)),g:i*(1-r),b:i*(1+r*(3/(2-o)-1))};break;case 5:t={r:i*(1+r*(3/(2-o)-1)),g:i*(1-r),b:i*(1+r*(3*(1-o)/(2-o)-1))};break;default:t={r:i*(1-r),g:i*(1-r),b:i*(1-r)}}return t.mode="rgb",void 0!==a&&(t.alpha=a),t}},parse:["--hsi"],serialize:"--hsi",fromMode:{rgb:function(e){let{r:t,g:n,b:r,alpha:i}=e;void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0);let a=Math.max(t,n,r),o=Math.min(t,n,r),s={mode:"hsi",s:t+n+r===0?0:1-3*o/(t+n+r),i:(t+n+r)/3};return a-o!=0&&(s.h=(a===t?(n-r)/(a-o)+(n<r)*6:a===n?(r-t)/(a-o)+2:(t-n)/(a-o)+4)*60),void 0!==i&&(s.alpha=i),s}},channels:["h","s","i","alpha"],ranges:{h:[0,360]},gamut:"rgb",interpolate:{h:{use:e3,fixup:td},s:e3,i:e3,alpha:{use:e3,fixup:e7}},difference:{h:tx},average:{h:tw}};function tK(e){let t,{h:n,s:r,l:i,alpha:a}=e;n=tc(void 0!==n?n:0),void 0===r&&(r=0),void 0===i&&(i=0);let o=i+r*(i<.5?i:1-i),s=o-(o-i)*2*Math.abs(n/60%2-1);switch(Math.floor(n/60)){case 0:t={r:o,g:s,b:2*i-o};break;case 1:t={r:s,g:o,b:2*i-o};break;case 2:t={r:2*i-o,g:o,b:s};break;case 3:t={r:2*i-o,g:s,b:o};break;case 4:t={r:s,g:2*i-o,b:o};break;case 5:t={r:o,g:2*i-o,b:s};break;default:t={r:2*i-o,g:2*i-o,b:2*i-o}}return t.mode="rgb",void 0!==a&&(t.alpha=a),t}function tX(e){let{r:t,g:n,b:r,alpha:i}=e;void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0);let a=Math.max(t,n,r),o=Math.min(t,n,r),s={mode:"hsl",s:a===o?0:(a-o)/(1-Math.abs(a+o-1)),l:.5*(a+o)};return a-o!=0&&(s.h=(a===t?(n-r)/(a-o)+(n<r)*6:a===n?(r-t)/(a-o)+2:(t-n)/(a-o)+4)*60),void 0!==i&&(s.alpha=i),s}let t$=(e,t)=>{switch(t){case"deg":return+e;case"rad":return e/Math.PI*180;case"grad":return e/10*9;case"turn":return 360*e}},tY=new RegExp("^hsla?\\(\\s*".concat(eS).concat(eN).concat(ej).concat(eN).concat(ej,"\\s*(?:,\\s*").concat(eC,"\\s*)?\\)$")),tJ={mode:"hsl",toMode:{rgb:tK},fromMode:{rgb:tX},channels:["h","s","l","alpha"],ranges:{h:[0,360]},gamut:"rgb",parse:[function(e,t){if(!t||"hsl"!==t[0]&&"hsla"!==t[0])return;let n={mode:"hsl"},[,r,i,a,o]=t;if(r.type!==eH.None){if(r.type===eH.Percentage)return;n.h=r.value}if(i.type!==eH.None){if(i.type===eH.Hue)return;n.s=i.value/100}if(a.type!==eH.None){if(a.type===eH.Hue)return;n.l=a.value/100}return o.type!==eH.None&&(n.alpha=Math.min(1,Math.max(0,o.type===eH.Number?o.value:o.value/100))),n},e=>{let t=e.match(tY);if(!t)return;let n={mode:"hsl"};return void 0!==t[3]?n.h=+t[3]:void 0!==t[1]&&void 0!==t[2]&&(n.h=t$(t[1],t[2])),void 0!==t[4]&&(n.s=Math.min(Math.max(0,t[4]/100),1)),void 0!==t[5]&&(n.l=Math.min(Math.max(0,t[5]/100),1)),void 0!==t[6]?n.alpha=Math.max(0,Math.min(1,t[6]/100)):void 0!==t[7]&&(n.alpha=Math.max(0,Math.min(1,+t[7]))),n}],serialize:e=>"hsl(".concat(void 0!==e.h?e.h:"none"," ").concat(void 0!==e.s?100*e.s+"%":"none"," ").concat(void 0!==e.l?100*e.l+"%":"none").concat(e.alpha<1?" / ".concat(e.alpha):"",")"),interpolate:{h:{use:e3,fixup:td},s:e3,l:e3,alpha:{use:e3,fixup:e7}},difference:{h:tx},average:{h:tw}};function tQ(e){let t,{h:n,s:r,v:i,alpha:a}=e;n=tc(void 0!==n?n:0),void 0===r&&(r=0),void 0===i&&(i=0);let o=Math.abs(n/60%2-1);switch(Math.floor(n/60)){case 0:t={r:i,g:i*(1-r*o),b:i*(1-r)};break;case 1:t={r:i*(1-r*o),g:i,b:i*(1-r)};break;case 2:t={r:i*(1-r),g:i,b:i*(1-r*o)};break;case 3:t={r:i*(1-r),g:i*(1-r*o),b:i};break;case 4:t={r:i*(1-r*o),g:i*(1-r),b:i};break;case 5:t={r:i,g:i*(1-r),b:i*(1-r*o)};break;default:t={r:i*(1-r),g:i*(1-r),b:i*(1-r)}}return t.mode="rgb",void 0!==a&&(t.alpha=a),t}function t0(e){let{r:t,g:n,b:r,alpha:i}=e;void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0);let a=Math.max(t,n,r),o=Math.min(t,n,r),s={mode:"hsv",s:0===a?0:1-o/a,v:a};return a-o!=0&&(s.h=(a===t?(n-r)/(a-o)+(n<r)*6:a===n?(r-t)/(a-o)+2:(t-n)/(a-o)+4)*60),void 0!==i&&(s.alpha=i),s}let t1={mode:"hsv",toMode:{rgb:tQ},parse:["--hsv"],serialize:"--hsv",fromMode:{rgb:t0},channels:["h","s","v","alpha"],ranges:{h:[0,360]},gamut:"rgb",interpolate:{h:{use:e3,fixup:td},s:e3,v:e3,alpha:{use:e3,fixup:e7}},difference:{h:tx},average:{h:tw}},t2={mode:"hwb",toMode:{rgb:function(e){let{h:t,w:n,b:r,alpha:i}=e;if(void 0===n&&(n=0),void 0===r&&(r=0),n+r>1){let e=n+r;n/=e,r/=e}return tQ({h:t,s:1===r?1:1-n/(1-r),v:1-r,alpha:i})}},fromMode:{rgb:function(e){let t=t0(e);if(void 0===t)return;let n=void 0!==t.s?t.s:0,r=void 0!==t.v?t.v:0,i={mode:"hwb",w:(1-n)*r,b:1-r};return void 0!==t.h&&(i.h=t.h),void 0!==t.alpha&&(i.alpha=t.alpha),i}},channels:["h","w","b","alpha"],ranges:{h:[0,360]},gamut:"rgb",parse:[function(e,t){if(!t||"hwb"!==t[0])return;let n={mode:"hwb"},[,r,i,a,o]=t;if(r.type!==eH.None){if(r.type===eH.Percentage)return;n.h=r.value}if(i.type!==eH.None){if(i.type===eH.Hue)return;n.w=i.value/100}if(a.type!==eH.None){if(a.type===eH.Hue)return;n.b=a.value/100}return o.type!==eH.None&&(n.alpha=Math.min(1,Math.max(0,o.type===eH.Number?o.value:o.value/100))),n}],serialize:e=>"hwb(".concat(void 0!==e.h?e.h:"none"," ").concat(void 0!==e.w?100*e.w+"%":"none"," ").concat(void 0!==e.b?100*e.b+"%":"none").concat(e.alpha<1?" / ".concat(e.alpha):"",")"),interpolate:{h:{use:e3,fixup:td},w:e3,b:e3,alpha:{use:e3,fixup:e7}},difference:{h:ty},average:{h:tw}},t5=203,t4=.1593017578125,t3=78.84375,t7=.8359375,t9=18.8515625,t6=18.6875;function t8(e){if(e<0)return 0;let t=Math.pow(e,1/t3);return 1e4*Math.pow(Math.max(0,t-t7)/(t9-t6*t),1/t4)}function ne(e){if(e<0)return 0;let t=Math.pow(e/1e4,t4);return Math.pow((t7+t9*t)/(1+t6*t),t3)}let nt=e=>Math.max(e/t5,0),nn=e=>{let{i:t,t:n,p:r,alpha:i}=e;void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0);let a=t8(t+.008609037037932761*n+.11102962500302593*r),o=t8(t-.00860903703793275*n-.11102962500302599*r),s=t8(t+.5600313357106791*n-.32062717498731885*r),l={mode:"xyz65",x:nt(2.070152218389422*a-1.3263473389671556*o+.2066510476294051*s),y:nt(.3647385209748074*a+.680566024947227*o-.0453045459220346*s),z:nt(-.049747207535812*a-.0492609666966138*o+1.1880659249923042*s)};return void 0!==i&&(l.alpha=i),l},nr=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Math.max(e*t5,0)},ni=e=>{let{x:t,y:n,z:r,alpha:i}=e,a=nr(t),o=nr(n),s=nr(r),l=ne(.3592832590121217*a+.6976051147779502*o-.0358915932320289*s),c=ne(-.1920808463704995*a+1.1004767970374323*o+.0753748658519118*s),u=ne(.0070797844607477*a+.0748396662186366*o+.8433265453898765*s),d=.5*l+.5*c,p={mode:"itp",i:d,t:1.61376953125*l-3.323486328125*c+1.709716796875*u,p:4.378173828125*l-4.24560546875*c-.132568359375*u};return void 0!==i&&(p.alpha=i),p},na={mode:"itp",channels:["i","t","p","alpha"],parse:["--ictcp"],serialize:"--ictcp",toMode:{xyz65:nn,rgb:e=>ts(nn(e))},fromMode:{xyz65:ni,rgb:e=>ni(ti(e))},ranges:{i:[0,.581],t:[-.369,.272],p:[-.164,.331]},interpolate:{i:e3,t:e3,p:e3,alpha:{use:e3,fixup:e7}}},no=134.03437499999998,ns=16295499532821565e-27,nl=e=>{if(e<0)return 0;let t=Math.pow(e/1e4,t4);return Math.pow((t7+t9*t)/(1+t6*t),no)},nc=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Math.max(203*e,0)},nu=e=>{let{x:t,y:n,z:r,alpha:i}=e;t=nc(t),n=nc(n);let a=1.15*t-.15*(r=nc(r)),o=.66*n+.34*t,s=nl(.41478972*a+.579999*o+.014648*r),l=nl(-.20151*a+1.120649*o+.0531008*r),c=nl(-.0166008*a+.2648*o+.6684799*r),u=(s+l)/2,d={mode:"jab",j:.44*u/(1-.56*u)-ns,a:3.524*s-4.066708*l+.542708*c,b:.199076*s+1.096799*l-1.295875*c};return void 0!==i&&(d.alpha=i),d},nd=134.03437499999998,np=16295499532821565e-27,nh=e=>{if(e<0)return 0;let t=Math.pow(e,1/nd);return 1e4*Math.pow((t7-t)/(t6*t-t9),1/t4)},nf=e=>e/203,nm=e=>{let{j:t,a:n,b:r,alpha:i}=e;void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0);let a=(t+np)/(.44+.56*(t+np)),o=nh(a+.13860504*n+.058047316*r),s=nh(a-.13860504*n-.058047316*r),l=nh(a-.096019242*n-.8118919*r),c={mode:"xyz65",x:nf(1.661373024652174*o-.914523081304348*s+.23136208173913045*l),y:nf(-.3250758611844533*o+1.571847026732543*s-.21825383453227928*l),z:nf(-.090982811*o-.31272829*s+1.5227666*l)};return void 0!==i&&(c.alpha=i),c},ng=e=>{let t=nu(ti(e));return e.r===e.b&&e.b===e.g&&(t.a=t.b=0),t},nv=e=>ts(nm(e)),nx={mode:"jab",channels:["j","a","b","alpha"],parse:["--jzazbz"],serialize:"--jzazbz",fromMode:{rgb:ng,xyz65:nu},toMode:{rgb:nv,xyz65:nm},ranges:{j:[0,.222],a:[-.109,.129],b:[-.185,.134]},interpolate:{j:e3,a:e3,b:e3,alpha:{use:e3,fixup:e7}}},ny=e=>{let{j:t,a:n,b:r,alpha:i}=e;void 0===n&&(n=0),void 0===r&&(r=0);let a=Math.sqrt(n*n+r*r),o={mode:"jch",j:t,c:a};return a&&(o.h=tc(180*Math.atan2(r,n)/Math.PI)),void 0!==i&&(o.alpha=i),o},nb=e=>{let{j:t,c:n,h:r,alpha:i}=e;void 0===r&&(r=0);let a={mode:"jab",j:t,a:n?n*Math.cos(r/180*Math.PI):0,b:n?n*Math.sin(r/180*Math.PI):0};return void 0!==i&&(a.alpha=i),a},nw={mode:"jch",parse:["--jzczhz"],serialize:"--jzczhz",toMode:{jab:nb,rgb:e=>nv(nb(e))},fromMode:{rgb:e=>ny(ng(e)),jab:ny},channels:["j","c","h","alpha"],ranges:{j:[0,.221],c:[0,.19],h:[0,360]},interpolate:{h:{use:e3,fixup:td},c:e3,j:e3,alpha:{use:e3,fixup:e7}},difference:{h:tb},average:{h:tw}},nj=903.2962962962963,nC=.008856451679035631,nk=e=>Math.pow(e,3)>nC?Math.pow(e,3):(116*e-16)/nj,nS=e=>{let{l:t,a:n,b:r,alpha:i}=e;void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0);let a=(t+16)/116,o=n/500+a,s=a-r/200,l={mode:"xyz50",x:nk(o)*tE.X,y:nk(a)*tE.Y,z:nk(s)*tE.Z};return void 0!==i&&(l.alpha=i),l},nN=e=>{let{x:t,y:n,z:r,alpha:i}=e;void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0);let a=to({r:3.1341359569958707*t-1.6173863321612538*n-.4906619460083532*r,g:-.978795502912089*t+1.916254567259524*n+.03344273116131949*r,b:.07195537988411677*t-.2289768264158322*n+1.405386058324125*r});return void 0!==i&&(a.alpha=i),a},nE=e=>nN(nS(e)),nM=e=>{let{r:t,g:n,b:r,alpha:i}=tr(e),a={mode:"xyz50",x:.436065742824811*t+.3851514688337912*n+.14307845442264197*r,y:.22249319175623702*t+.7168870538238823*n+.06061979053616537*r,z:.013923904500943465*t+.09708128566574634*n+.7140993584005155*r};return void 0!==i&&(a.alpha=i),a},nI=e=>e>nC?Math.cbrt(e):(nj*e+16)/116,nD=e=>{let{x:t,y:n,z:r,alpha:i}=e;void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0);let a=nI(t/tE.X),o=nI(n/tE.Y),s={mode:"lab",l:116*o-16,a:500*(a-o),b:200*(o-nI(r/tE.Z))};return void 0!==i&&(s.alpha=i),s},nT=e=>{let t=nD(nM(e));return e.r===e.b&&e.b===e.g&&(t.a=t.b=0),t},nA={mode:"lab",toMode:{xyz50:nS,rgb:nE},fromMode:{xyz50:nD,rgb:nT},channels:["l","a","b","alpha"],ranges:{l:[0,100],a:[-125,125],b:[-125,125]},parse:[function(e,t){if(!t||"lab"!==t[0])return;let n={mode:"lab"},[,r,i,a,o]=t;if(r.type!==eH.Hue&&i.type!==eH.Hue&&a.type!==eH.Hue)return r.type!==eH.None&&(n.l=Math.min(Math.max(0,r.value),100)),i.type!==eH.None&&(n.a=i.type===eH.Number?i.value:125*i.value/100),a.type!==eH.None&&(n.b=a.type===eH.Number?a.value:125*a.value/100),o.type!==eH.None&&(n.alpha=Math.min(1,Math.max(0,o.type===eH.Number?o.value:o.value/100))),n}],serialize:e=>"lab(".concat(void 0!==e.l?e.l:"none"," ").concat(void 0!==e.a?e.a:"none"," ").concat(void 0!==e.b?e.b:"none").concat(e.alpha<1?" / ".concat(e.alpha):"",")"),interpolate:{l:e3,a:e3,b:e3,alpha:{use:e3,fixup:e7}}},nL={...nA,mode:"lab65",parse:["--lab-d65"],serialize:"--lab-d65",toMode:{xyz65:tD,rgb:tT},fromMode:{xyz65:tL,rgb:tP},ranges:{l:[0,100],a:[-125,125],b:[-125,125]}},nP={mode:"lch",toMode:{lab:tk,rgb:e=>nE(tk(e))},fromMode:{rgb:e=>tC(nT(e)),lab:tC},channels:["l","c","h","alpha"],ranges:{l:[0,100],c:[0,150],h:[0,360]},parse:[function(e,t){if(!t||"lch"!==t[0])return;let n={mode:"lch"},[,r,i,a,o]=t;if(r.type!==eH.None){if(r.type===eH.Hue)return;n.l=Math.min(Math.max(0,r.value),100)}if(i.type!==eH.None&&(n.c=Math.max(0,i.type===eH.Number?i.value:150*i.value/100)),a.type!==eH.None){if(a.type===eH.Percentage)return;n.h=a.value}return o.type!==eH.None&&(n.alpha=Math.min(1,Math.max(0,o.type===eH.Number?o.value:o.value/100))),n}],serialize:e=>"lch(".concat(void 0!==e.l?e.l:"none"," ").concat(void 0!==e.c?e.c:"none"," ").concat(void 0!==e.h?e.h:"none").concat(e.alpha<1?" / ".concat(e.alpha):"",")"),interpolate:{h:{use:e3,fixup:td},c:e3,l:e3,alpha:{use:e3,fixup:e7}},difference:{h:tb},average:{h:tw}},nR={...nP,mode:"lch65",parse:["--lch-d65"],serialize:"--lch-d65",toMode:{lab65:e=>tk(e,"lab65"),rgb:e=>tT(tk(e,"lab65"))},fromMode:{rgb:e=>tC(tP(e),"lch65"),lab65:e=>tC(e,"lch65")},ranges:{l:[0,100],c:[0,150],h:[0,360]}},n_=e=>{let{l:t,u:n,v:r,alpha:i}=e;void 0===n&&(n=0),void 0===r&&(r=0);let a=Math.sqrt(n*n+r*r),o={mode:"lchuv",l:t,c:a};return a&&(o.h=tc(180*Math.atan2(r,n)/Math.PI)),void 0!==i&&(o.alpha=i),o},nO=e=>{let{l:t,c:n,h:r,alpha:i}=e;void 0===r&&(r=0);let a={mode:"luv",l:t,u:n?n*Math.cos(r/180*Math.PI):0,v:n?n*Math.sin(r/180*Math.PI):0};return void 0!==i&&(a.alpha=i),a},nF=(e,t,n)=>4*e/(e+15*t+3*n),nV=(e,t,n)=>9*t/(e+15*t+3*n),nB=nF(tE.X,tE.Y,tE.Z),nz=nV(tE.X,tE.Y,tE.Z),nH=e=>e<=nC?nj*e:116*Math.cbrt(e)-16,nU=e=>{let{x:t,y:n,z:r,alpha:i}=e;void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0);let a=nH(n/tE.Y),o=nF(t,n,r),s=nV(t,n,r);isFinite(o)&&isFinite(s)?(o=13*a*(o-nB),s=13*a*(s-nz)):a=o=s=0;let l={mode:"luv",l:a,u:o,v:s};return void 0!==i&&(l.alpha=i),l},nq=(e,t,n)=>9*t/(e+15*t+3*n),nW=((e,t,n)=>4*e/(e+15*t+3*n))(tE.X,tE.Y,tE.Z),nZ=nq(tE.X,tE.Y,tE.Z),nG=e=>{let{l:t,u:n,v:r,alpha:i}=e;if(void 0===t&&(t=0),0===t)return{mode:"xyz50",x:0,y:0,z:0};void 0===n&&(n=0),void 0===r&&(r=0);let a=n/(13*t)+nW,o=r/(13*t)+nZ,s=tE.Y*(t<=8?t/nj:Math.pow((t+16)/116,3)),l=9*a*s/(4*o),c=s*(12-3*a-20*o)/(4*o),u={mode:"xyz50",x:l,y:s,z:c};return void 0!==i&&(u.alpha=i),u},nK=e=>nN(nG(nO(e))),nX={mode:"lchuv",toMode:{luv:nO,rgb:nK},fromMode:{rgb:e=>n_(nU(nM(e))),luv:n_},channels:["l","c","h","alpha"],parse:["--lchuv"],serialize:"--lchuv",ranges:{l:[0,100],c:[0,176.956],h:[0,360]},interpolate:{h:{use:e3,fixup:td},c:e3,l:e3,alpha:{use:e3,fixup:e7}},difference:{h:tb},average:{h:tw}},n$={...e9,mode:"lrgb",toMode:{rgb:to},fromMode:{rgb:tr},parse:["srgb-linear"],serialize:"srgb-linear"},nY={mode:"luv",toMode:{xyz50:nG,rgb:e=>nN(nG(e))},fromMode:{xyz50:nU,rgb:e=>nU(nM(e))},channels:["l","u","v","alpha"],parse:["--luv"],serialize:"--luv",ranges:{l:[0,100],u:[-84.936,175.042],v:[-125.882,87.243]},interpolate:{l:e3,u:e3,v:e3,alpha:{use:e3,fixup:e7}}},nJ=e=>{let{r:t,g:n,b:r,alpha:i}=e;void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0);let a=Math.cbrt(.412221469470763*t+.5363325372617348*n+.0514459932675022*r),o=Math.cbrt(.2119034958178252*t+.6806995506452344*n+.1073969535369406*r),s=Math.cbrt(.0883024591900564*t+.2817188391361215*n+.6299787016738222*r),l={mode:"oklab",l:.210454268309314*a+.7936177747023054*o-.0040720430116193*s,a:1.9779985324311684*a-2.42859224204858*o+.450593709617411*s,b:.0259040424655478*a+.7827717124575296*o-.8086757549230774*s};return void 0!==i&&(l.alpha=i),l},nQ=e=>{let t=nJ(tr(e));return e.r===e.b&&e.b===e.g&&(t.a=t.b=0),t},n0=e=>{let{l:t,a:n,b:r,alpha:i}=e;void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0);let a=Math.pow(t+.3963377773761749*n+.2158037573099136*r,3),o=Math.pow(t-.1055613458156586*n-.0638541728258133*r,3),s=Math.pow(t-.0894841775298119*n-1.2914855480194092*r,3),l={mode:"lrgb",r:4.076741636075957*a-3.3077115392580616*o+.2309699031821044*s,g:-1.2684379732850317*a+2.6097573492876887*o-.3413193760026573*s,b:-.0041960761386756*a-.7034186179359362*o+1.7076146940746117*s};return void 0!==i&&(l.alpha=i),l},n1=e=>to(n0(e));function n2(e){return .5*(1.206/1.03*e-.206+Math.sqrt((1.206/1.03*e-.206)*(1.206/1.03*e-.206)+1.206/1.03*.12*e))}function n5(e){return(e*e+.206*e)/(1.206/1.03*(e+.03))}function n4(e,t){let n,r,i,a,o,s,l,c;-1.88170328*e-.80936493*t>1?(n=1.19086277,r=1.76576728,i=.59662641,a=.75515197,o=.56771245,s=4.0767416621,l=-3.3077115913,c=.2309699292):1.81444104*e-1.19445276*t>1?(n=.73956515,r=-.45954404,i=.08285427,a=.1254107,o=.14503204,s=-1.2684380046,l=2.6097574011,c=-.3413193965):(n=1.35733652,r=-.00915799,i=-1.1513021,a=-.50559606,o=.00692167,s=-.0041960863,l=-.7034186147,c=1.707614701);let u=n+r*e+i*t+a*e*e+o*e*t,d=.3963377774*e+.2158037573*t,p=-.1055613458*e-.0638541728*t,h=-.0894841775*e-1.291485548*t;{let e=1+u*d,t=1+u*p,n=1+u*h,r=e*e*e*s+t*t*t*l+n*n*n*c,i=3*d*e*e*s+3*p*t*t*l+3*h*n*n*c;u-=r*i/(i*i-.5*r*(6*d*d*e*s+6*p*p*t*l+6*h*h*n*c))}return u}function n3(e,t){let n=n4(e,t),r=n0({l:1,a:n*e,b:n*t}),i=Math.cbrt(1/Math.max(r.r,r.g,r.b)),a=i*n;return[i,a]}function n7(e,t,n,r,i){let a,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;if(o||(o=n3(e,t)),(n-i)*o[1]-(o[0]-i)*r<=0)a=o[1]*i/(r*o[0]+o[1]*(i-n));else{a=o[1]*(i-1)/(r*(o[0]-1)+o[1]*(i-n));{let o=n-i,s=r,l=.3963377774*e+.2158037573*t,c=-.1055613458*e-.0638541728*t,u=-.0894841775*e-1.291485548*t,d=o+s*l,p=o+s*c,h=o+s*u;{let e=i*(1-a)+a*n,t=a*r,o=e+t*l,s=e+t*c,f=e+t*u,m=o*o*o,g=s*s*s,v=f*f*f,x=3*d*o*o,y=3*p*s*s,b=3*h*f*f,w=6*d*d*o,j=6*p*p*s,C=6*h*h*f,k=4.0767416621*m-3.3077115913*g+.2309699292*v-1,S=4.0767416621*x-3.3077115913*y+.2309699292*b,N=S/(S*S-.5*k*(4.0767416621*w-3.3077115913*j+.2309699292*C)),E=-k*N,M=-1.2684380046*m+2.6097574011*g-.3413193965*v-1,I=-1.2684380046*x+2.6097574011*y-.3413193965*b,D=I/(I*I-.5*M*(-1.2684380046*w+2.6097574011*j-.3413193965*C)),T=-M*D,A=-.0041960863*m-.7034186147*g+1.707614701*v-1,L=-.0041960863*x-.7034186147*y+1.707614701*b,P=L/(L*L-.5*A*(-.0041960863*w-.7034186147*j+1.707614701*C)),R=-A*P;a+=Math.min(E=N>=0?E:1e6,Math.min(T=D>=0?T:1e6,R=P>=0?R:1e6))}}}return a}function n9(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;n||(n=n3(e,t));let r=n[0],i=n[1];return[i/r,i/(1-r)]}function n6(e,t,n){let r=n3(t,n),i=n7(t,n,e,1,e,r),a=n9(t,n,r),o=.11516993+1/(7.4477897+4.1590124*n+t*(-2.19557347+1.75198401*n+t*(-2.13704948-10.02301043*n+t*(-4.24894561+5.38770819*n+4.69891013*t)))),s=.11239642+1/(1.6132032-.68124379*n+t*(.40370612+.90148123*n+t*(-.27087943+.6122399*n+t*(.00299215-.45399568*n-.14661872*t)))),l=i/Math.min(e*a[0],(1-e)*a[1]),c=e*o,u=(1-e)*s,d=.9*l*Math.sqrt(Math.sqrt(1/(1/(c*c*c*c)+1/(u*u*u*u))));return[Math.sqrt(1/(1/((c=.4*e)*c)+1/((u=(1-e)*.8)*u))),d,i]}function n8(e){let t,n=void 0!==e.l?e.l:0,r=void 0!==e.a?e.a:0,i=void 0!==e.b?e.b:0,a={mode:"okhsl",l:n2(n)};void 0!==e.alpha&&(a.alpha=e.alpha);let o=Math.sqrt(r*r+i*i);if(!o)return a.s=0,a;let[s,l,c]=n6(n,r/o,i/o);if(o<l){let e=.8*s,n=1-e/l;t=(o-0)/(e+n*(o-0))*.8}else{let e=l,n=.2*l*l*1.5625/s,r=1-n/(c-l);t=.8+(o-e)/(n+r*(o-e))*.2}return t&&(a.s=t,a.h=tc(180*Math.atan2(i,r)/Math.PI)),a}function re(e){let t,n,r,i,a=void 0!==e.h?e.h:0,o=void 0!==e.s?e.s:0,s=void 0!==e.l?e.l:0,l={mode:"oklab",l:n5(s)};if(void 0!==e.alpha&&(l.alpha=e.alpha),!o||1===s)return l.a=l.b=0,l;let c=Math.cos(a/180*Math.PI),u=Math.sin(a/180*Math.PI),[d,p,h]=n6(l.l,c,u);o<.8?(t=1.25*o,n=0,i=1-(r=.8*d)/p):(t=5*(o-.8),n=p,i=1-(r=.2*p*p*1.5625/d)/(h-p));let f=n+t*r/(1-i*t);return l.a=f*c,l.b=f*u,l}let rt={...tJ,mode:"okhsl",channels:["h","s","l","alpha"],parse:["--okhsl"],serialize:"--okhsl",fromMode:{oklab:n8,rgb:e=>n8(nQ(e))},toMode:{oklab:re,rgb:e=>n1(re(e))}};function rn(e){let t=void 0!==e.l?e.l:0,n=void 0!==e.a?e.a:0,r=void 0!==e.b?e.b:0,i=Math.sqrt(n*n+r*r),a=i?n/i:1,o=i?r/i:1,[s,l]=n9(a,o),c=.5,u=1-.5/s,d=l/(i+t*l),p=d*t,h=d*i,f=n5(p),m=h*f/p,g=n0({l:f,a:a*m,b:o*m}),v=Math.cbrt(1/Math.max(g.r,g.g,g.b,0));t/=v;let x={mode:"okhsv",s:(i=i/v*n2(t)/t)?(c+l)*h/(l*c+l*u*h):0,v:(t=n2(t))?t/p:0};return x.s&&(x.h=tc(180*Math.atan2(r,n)/Math.PI)),void 0!==e.alpha&&(x.alpha=e.alpha),x}function rr(e){let t={mode:"oklab"};void 0!==e.alpha&&(t.alpha=e.alpha);let n=void 0!==e.h?e.h:0,r=void 0!==e.s?e.s:0,i=void 0!==e.v?e.v:0,a=Math.cos(n/180*Math.PI),o=Math.sin(n/180*Math.PI),[s,l]=n9(a,o),c=1-.5/s,u=1-.5*r/(.5+l-l*c*r),d=r*l*.5/(.5+l-l*c*r),p=n5(u),h=d*p/u,f=n0({l:p,a:a*h,b:o*h}),m=Math.cbrt(1/Math.max(f.r,f.g,f.b,0)),g=n5(i*u),v=d*g/u;return t.l=g*m,t.a=v*a*m,t.b=v*o*m,t}let ri={...t1,mode:"okhsv",channels:["h","s","v","alpha"],parse:["--okhsv"],serialize:"--okhsv",fromMode:{oklab:rn,rgb:e=>rn(nQ(e))},toMode:{oklab:rr,rgb:e=>n1(rr(e))}},ra=function(e,t){if(!t||"oklab"!==t[0])return;let n={mode:"oklab"},[,r,i,a,o]=t;if(r.type!==eH.Hue&&i.type!==eH.Hue&&a.type!==eH.Hue)return r.type!==eH.None&&(n.l=Math.min(Math.max(0,r.type===eH.Number?r.value:r.value/100),1)),i.type!==eH.None&&(n.a=i.type===eH.Number?i.value:.4*i.value/100),a.type!==eH.None&&(n.b=a.type===eH.Number?a.value:.4*a.value/100),o.type!==eH.None&&(n.alpha=Math.min(1,Math.max(0,o.type===eH.Number?o.value:o.value/100))),n},ro={...nA,mode:"oklab",toMode:{lrgb:n0,rgb:n1},fromMode:{lrgb:nJ,rgb:nQ},ranges:{l:[0,1],a:[-.4,.4],b:[-.4,.4]},parse:[ra],serialize:e=>"oklab(".concat(void 0!==e.l?e.l:"none"," ").concat(void 0!==e.a?e.a:"none"," ").concat(void 0!==e.b?e.b:"none").concat(e.alpha<1?" / ".concat(e.alpha):"",")")},rs=function(e,t){if(!t||"oklch"!==t[0])return;let n={mode:"oklch"},[,r,i,a,o]=t;if(r.type!==eH.None){if(r.type===eH.Hue)return;n.l=Math.min(Math.max(0,r.type===eH.Number?r.value:r.value/100),1)}if(i.type!==eH.None&&(n.c=Math.max(0,i.type===eH.Number?i.value:.4*i.value/100)),a.type!==eH.None){if(a.type===eH.Percentage)return;n.h=a.value}return o.type!==eH.None&&(n.alpha=Math.min(1,Math.max(0,o.type===eH.Number?o.value:o.value/100))),n},rl={...nP,mode:"oklch",toMode:{oklab:e=>tk(e,"oklab"),rgb:e=>n1(tk(e,"oklab"))},fromMode:{rgb:e=>tC(nQ(e),"oklch"),oklab:e=>tC(e,"oklch")},parse:[rs],serialize:e=>"oklch(".concat(void 0!==e.l?e.l:"none"," ").concat(void 0!==e.c?e.c:"none"," ").concat(void 0!==e.h?e.h:"none").concat(e.alpha<1?" / ".concat(e.alpha):"",")"),ranges:{l:[0,1],c:[0,.4],h:[0,360]}},rc=e=>{let{r:t,g:n,b:r,alpha:i}=tr(e),a={mode:"xyz65",x:.486570948648216*t+.265667693169093*n+.1982172852343625*r,y:.2289745640697487*t+.6917385218365062*n+.079286914093745*r,z:0*t+.0451133818589026*n+1.043944368900976*r};return void 0!==i&&(a.alpha=i),a},ru=e=>{let{x:t,y:n,z:r,alpha:i}=e;void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0);let a=to({r:2.4934969119414263*t-.9313836179191242*n-.402710784450717*r,g:-.8294889695615749*t+1.7626640603183465*n+.0236246858419436*r,b:.0358458302437845*t-.0761723892680418*n+.9568845240076871*r},"p3");return void 0!==i&&(a.alpha=i),a},rd={...e9,mode:"p3",parse:["display-p3"],serialize:"display-p3",fromMode:{rgb:e=>ru(ti(e)),xyz65:ru},toMode:{rgb:e=>ts(rc(e)),xyz65:rc}},rp=e=>{let t=Math.abs(e);return t>=1/512?Math.sign(e)*Math.pow(t,1/1.8):16*e},rh=e=>{let{x:t,y:n,z:r,alpha:i}=e;void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0);let a={mode:"prophoto",r:rp(1.3457868816471585*t-.2555720873797946*n-.0511018649755453*r),g:rp(-.5446307051249019*t+1.5082477428451466*n+.0205274474364214*r),b:rp(0*t+0*n+1.2119675456389452*r)};return void 0!==i&&(a.alpha=i),a},rf=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=Math.abs(e);return t>=16/512?Math.sign(e)*Math.pow(t,1.8):e/16},rm=e=>{let t=rf(e.r),n=rf(e.g),r=rf(e.b),i={mode:"xyz50",x:.7977666449006423*t+.1351812974005331*n+.0313477341283922*r,y:.2880748288194013*t+.7118352342418731*n+899369387256e-16*r,z:0*t+0*n+.8251046025104602*r};return void 0!==e.alpha&&(i.alpha=e.alpha),i},rg={...e9,mode:"prophoto",parse:["prophoto-rgb"],serialize:"prophoto-rgb",fromMode:{xyz50:rh,rgb:e=>rh(nM(e))},toMode:{xyz50:rm,rgb:e=>nN(rm(e))}},rv=1.09929682680944,rx=.018053968510807,ry=e=>{let t=Math.abs(e);return t>rx?(Math.sign(e)||1)*(rv*Math.pow(t,.45)-(rv-1)):4.5*e},rb=e=>{let{x:t,y:n,z:r,alpha:i}=e;void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0);let a={mode:"rec2020",r:ry(1.7166511879712683*t-.3556707837763925*n-.2533662813736599*r),g:ry(-.6666843518324893*t+1.6164812366349395*n+.0157685458139111*r),b:ry(.0176398574453108*t-.0427706132578085*n+.9421031212354739*r)};return void 0!==i&&(a.alpha=i),a},rw=1.09929682680944,rj=.018053968510807,rC=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=Math.abs(e);return t<4.5*rj?e/4.5:(Math.sign(e)||1)*Math.pow((t+rw-1)/rw,1/.45)},rk=e=>{let t=rC(e.r),n=rC(e.g),r=rC(e.b),i={mode:"xyz65",x:.6369580483012911*t+.1446169035862083*n+.1688809751641721*r,y:.262700212011267*t+.6779980715188708*n+.059301716469862*r,z:0*t+.0280726930490874*n+1.0609850577107909*r};return void 0!==e.alpha&&(i.alpha=e.alpha),i},rS={...e9,mode:"rec2020",fromMode:{xyz65:rb,rgb:e=>rb(ti(e))},toMode:{xyz65:rk,rgb:e=>ts(rk(e))},parse:["rec2020"],serialize:"rec2020"},rN=.0037930732552754493,rE=Math.cbrt(.0037930732552754493),rM=e=>Math.cbrt(e)-rE,rI=e=>Math.pow(e+rE,3),rD={mode:"xyb",channels:["x","y","b","alpha"],parse:["--xyb"],serialize:"--xyb",toMode:{rgb:e=>{let{x:t,y:n,b:r,alpha:i}=e;void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0);let a=rI(t+n)-rN,o=rI(n-t)-rN,s=rI(r+n)-rN,l=to({r:11.031566904639861*a-9.866943908131562*o-.16462299650829934*s,g:-3.2541473810744237*a+4.418770377582723*o-.16462299650829934*s,b:-3.6588512867136815*a+2.7129230459360922*o+1.9459282407775895*s});return void 0!==i&&(l.alpha=i),l}},fromMode:{rgb:e=>{let{r:t,g:n,b:r,alpha:i}=tr(e),a=rM(.3*t+.622*n+.078*r+rN),o=rM(.23*t+.692*n+.078*r+rN),s={mode:"xyb",x:(a-o)/2,y:(a+o)/2,b:rM(.2434226892454782*t+.2047674442449682*n+.5518098665095535*r+rN)-(a+o)/2};return void 0!==i&&(s.alpha=i),s}},ranges:{x:[-.0154,.0281],y:[0,.8453],b:[-.2778,.388]},interpolate:{x:e3,y:e3,b:e3,alpha:{use:e3,fixup:e7}}},rT={mode:"xyz50",parse:["xyz-d50"],serialize:"xyz-d50",toMode:{rgb:nN,lab:nD},fromMode:{rgb:nM,lab:nS},channels:["x","y","z","alpha"],ranges:{x:[0,.964],y:[0,.999],z:[0,.825]},interpolate:{x:e3,y:e3,z:e3,alpha:{use:e3,fixup:e7}}},rA={mode:"xyz65",toMode:{rgb:ts,xyz50:e=>{let{x:t,y:n,z:r,alpha:i}=e;void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0);let a={mode:"xyz50",x:1.0479298208405488*t+.0229467933410191*n-.0501922295431356*r,y:.0296278156881593*t+.990434484573249*n-.0170738250293851*r,z:-.0092430581525912*t+.0150551448965779*n+.7518742899580008*r};return void 0!==i&&(a.alpha=i),a}},fromMode:{rgb:ti,xyz50:e=>{let{x:t,y:n,z:r,alpha:i}=e;void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0);let a={mode:"xyz65",x:.9554734527042182*t-.0230985368742614*n+.0632593086610217*r,y:-.0283697069632081*t+1.0099954580058226*n+.021041398966943*r,z:.0123140016883199*t-.0205076964334779*n+1.3303659366080753*r};return void 0!==i&&(a.alpha=i),a}},ranges:{x:[0,.95],y:[0,1],z:[0,1.088]},channels:["x","y","z","alpha"],parse:["xyz","xyz-d65"],serialize:"xyz-d65",interpolate:{x:e3,y:e3,z:e3,alpha:{use:e3,fixup:e7}}},rL={mode:"yiq",toMode:{rgb:e=>{let{y:t,i:n,q:r,alpha:i}=e;void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0);let a={mode:"rgb",r:t+.95608445*n+.6208885*r,g:t-.27137664*n-.6486059*r,b:t-1.10561724*n+1.70250126*r};return void 0!==i&&(a.alpha=i),a}},fromMode:{rgb:e=>{let{r:t,g:n,b:r,alpha:i}=e;void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0);let a={mode:"yiq",y:.29889531*t+.58662247*n+.11448223*r,i:.59597799*t-.2741761*n-.32180189*r,q:.21147017*t-.52261711*n+.31114694*r};return void 0!==i&&(a.alpha=i),a}},channels:["y","i","q","alpha"],parse:["--yiq"],serialize:"--yiq",ranges:{i:[-.595,.595],q:[-.522,.522]},interpolate:{y:e3,i:e3,q:e3,alpha:{use:e3,fixup:e7}}};eO(tl),eO(tj),eO(tW),eO(tZ),eO(tG),eO(tJ);let rP=eO(t1);eO(t2),eO(na),eO(nx),eO(nw),eO(nA),eO(nL),eO(nP),eO(nR),eO(nX),eO(n$),eO(nY),eO(rt),eO(ri),eO(ro),eO(rl),eO(rd),eO(rg),eO(rS),eO(e9),eO(rD),eO(rT),eO(rA),eO(rL);(function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]})(2),eT("rgb"),eT("hsl");let rR=e=>{let t=eD(e);if(!t)return;let n=eF(t.mode);if(!n.serialize||"string"==typeof n.serialize){let e="color(".concat(n.serialize||"--".concat(t.mode)," ");return n.channels.forEach((n,r)=>{"alpha"!==n&&(e+=(r?" ":"")+(void 0!==t[n]?t[n]:"none"))}),void 0!==t.alpha&&t.alpha<1&&(e+=" / ".concat(t.alpha)),e+")"}if("function"==typeof n.serialize)return n.serialize(t)};var r_=e.i(787360);function rO(e){if(!e)return[];let t=r_.breakpoints.indexOf(e);return -1===t?r_.breakpoints:r_.breakpoints.slice(t)}function rF(e){return 1===e.a?"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")"):"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(e.a.toFixed(2),")")}function rV(e){var t,n;let r=e1(e);if(!r)return{h:0,s:0,v:100,a:1};let i=rP(r);return{h:Math.round(null!=(t=i.h)?t:0),s:Math.round(100*i.s),v:Math.round(100*i.v),a:null!=(n=r.alpha)?n:1}}function rB(e){let{title:t,displayedColorName:n,colorTokens:r,onColorChange:i,onTokensChange:a,onPointerEnter:o,onPointerLeave:s,updateColorNameTextContent:l,clearRevertPreview:c,parsedColor:u,alphaEnabled:d}=e,p=(0,I.useRef)(null),h=(0,I.useRef)(null),[f,m]=(0,I.useState)(!1),g=(0,I.useRef)(null),v=(0,S.useDebounceCallback)(i,100,{maxWait:150}),x=(0,S.useDebounceCallback)(a,50),y=()=>{var e;g.current=null,null==(e=p.current)||e.style.removeProperty("background"),v(null)},b=(0,I.useMemo)(()=>u?rR(u):"rgb(255, 255, 255)",[u]),w=(0,I.useMemo)(()=>r.length>0,[r]);return(0,k.jsx)("div",{title:t,className:"flex w-full min-w-0",children:(0,k.jsxs)(N.Popover,{open:f,onOpenChange:m,children:[(0,k.jsx)(N.PopoverTrigger,{asChild:!0,children:(0,k.jsxs)(A.Button,{variant:"secondary",size:"sm",className:"w-full justify-between rounded-md px-2 font-normal",children:[(0,k.jsxs)("div",{className:"flex items-center gap-2",children:[u?(0,k.jsx)("span",{ref:p,className:"block size-4 shrink-0 rounded-sm border border-gray-200",style:{background:b}}):(0,k.jsx)(ee,{className:"size-4 shrink-0"}),n?(0,k.jsx)("span",{className:"text-gray-900",ref:h,children:n}):(0,k.jsx)("span",{className:"text-gray-500",children:"Default"})]}),(0,k.jsx)(L.ChevronDownSmall,{className:"size-4"})]})}),(0,k.jsx)(N.PopoverContent,{className:"w-auto min-w-[226px] rounded shadow-lg",align:"start",withOverlay:!0,onPointerLeave:s,children:(0,k.jsx)("div",{className:"flex flex-col gap-1 p-1",children:(0,k.jsxs)(D.Tabs,{defaultValue:w?"tokens":"picker",variant:"secondary",className:"flex flex-col gap-1",children:[w?(0,k.jsxs)(D.TabsList,{className:"justify-center border-b bg-transparent px-0 pb-1",children:[(0,k.jsx)(D.TabsTrigger,{value:"tokens",className:"flex h-6 w-full items-center text-xs",children:"Tailwind"}),(0,k.jsx)(D.TabsTrigger,{value:"picker",className:"flex h-6 w-full items-center text-xs",children:"Custom"})]}):null,(0,k.jsxs)(D.TabsContent,{value:"picker",children:[(0,k.jsx)(M.default,{color:rV(g.current||b),onChange:e=>{var t;g.current=rF(e.rgba),null==(t=p.current)||t.style.setProperty("background",rF(e.rgba)),h.current&&(h.current.textContent=rF(e.rgba)),v(e.rgba)},disableAlpha:!d,presetColors:!1}),(0,k.jsxs)("div",{className:"flex items-center justify-end gap-0.5",children:[(0,k.jsx)("button",{className:"flex h-6 items-center justify-center rounded-full px-2 text-xs text-gray-500 transition-colors hover:bg-gray-100 hover:text-gray-700",onClick:y,children:"Inherit"}),(0,k.jsx)("button",{className:"flex h-6 w-6 items-center justify-center rounded-full text-gray-700 transition-colors hover:bg-gray-100",onClick:async()=>{if("EyeDropper"in window){let e=new EyeDropper,t=await e.open();if(t){let e=t.sRGBHex.match(/[a-f0-9]{2}/g).map(e=>parseInt(e,16));v({r:e[0],g:e[1],b:e[2],a:1})}}},children:(0,k.jsx)(E.Pipette,{className:"size-3"})})]})]}),w?(0,k.jsx)(D.TabsContent,{value:"tokens",children:(0,k.jsxs)(T.Command,{className:"rounded-none",children:[(0,k.jsx)(T.CommandInput,{placeholder:"Search for a color...",divClassName:"px-2 pb-1 gap-2 border-none [&>span]:size-3",className:"h-7 py-0 text-sm",iconSize:12}),(0,k.jsxs)(T.CommandList,{className:"rounded-none",children:[(0,k.jsx)(T.CommandEmpty,{children:(0,k.jsx)("span",{className:"text-gray-500",children:"No color found."})}),(0,k.jsx)(T.CommandGroup,{className:"p-0",children:f?r.map(e=>(0,k.jsxs)(T.CommandItem,{value:e.label,onPointerEnter:()=>o(e),onSelect:t=>{if(c(),"Default"===t)y();else{var n;null==(n=p.current)||n.style.setProperty("background",e.value),l(h,t),x(t)}m(!1)},className:"gap-2 py-1",children:[e.value?(0,k.jsx)("span",{className:"block size-3 rounded-sm border border-gray-300",style:{background:e.value}}):(0,k.jsx)("div",{children:(0,k.jsx)(ee,{className:"size-3"})}),e.label]},e.label)):null})]})]})}):null]})})})]})})}function rz(e){let{title:t,children:n}=e;return(0,k.jsxs)("div",{className:"border-alpha-200 flex flex-col gap-3 border-b p-3 [&_svg]:text-gray-500! [&:is(:last-child)]:border-b-0 [&:is(:last-child)]:pb-6",children:[(0,k.jsx)("div",{className:"text-label-12 select-none font-medium",children:t}),n]})}function rH(e){let{value:t,type:n,onUpdate:r}=e,i=(0,S.useDebounceCallback)(e=>{if(!e&&"jsxText"===n)return void r('{""}');r(e)},100,{maxWait:50});return(0,k.jsx)(P.Textarea,{defaultValue:t.trim(),onChange:e=>{if("jsxText"===n){let t=e.currentTarget.value;t.includes("\n")?i("{"+JSON.stringify(t)+"}"):(e.currentTarget.innerText=t,i(e.currentTarget.innerHTML))}else i(e.currentTarget.value)},rows:3,spellCheck:!1})}var rU=r_;let rq=["0","","2","4","8"],rW=[["0","0px"],["","1px"],["2","2px"],["4","4px"],["8","8px"]],rZ=["3","4","5","6","7","8","9","10"],rG=[["3","0.75rem"],["4","1rem"],["5","1.25rem"],["6","1.5rem"],["7","1.75rem"],["8","2rem"],["9","2.25rem"],["10","2.5rem"]],rK=["tighter","tight","normal","wide","wider","widest"],rX=[["tighter","-0.05em"],["tight","-0.025em"],["normal","0em"],["wide","0.025em"],["wider","0.05em"],["widest","0.1em"]],r$=["0","px","0.5","1","1.5","2","2.5","3","3.5","4","5","6","7","8","9","10","11","12","14","16","20","24","28","32","36","40","44","48","52","56","60","64","72","80","96"],rY=[["0","0px"],["px","1px"],["0.5","2px"],["1","4px"],["1.5","6px"],["2","8px"],["2.5","10px"],["3","12px"],["3.5","14px"],["4","16px"],["5","20px"],["6","24px"],["7","28px"],["8","32px"],["9","36px"],["10","40px"],["11","44px"],["12","48px"],["14","56px"],["16","64px"],["20","80px"],["24","96px"],["28","112px"],["32","128px"],["36","144px"],["40","160px"],["44","176px"],["48","192px"],["52","208px"],["56","224px"],["60","240px"],["64","256px"],["72","288px"],["80","320px"],["96","384px"]],rJ=[...rY,["auto","auto"]],rQ=[...rY,["auto","auto"],["1/2","50%"],["1/3","33.333333%"],["2/3","66.666667%"],["1/4","25%"],["2/4","50%"],["3/4","75%"],["1/5","20%"],["2/5","40%"],["3/5","60%"],["4/5","80%"],["1/6","16.666667%"],["2/6","33.333333%"],["3/6","50%"],["4/6","66.666667%"],["5/6","83.333333%"],["1/12","8.333333%"],["2/12","16.666667%"],["3/12","25%"],["4/12","33.333333%"],["5/12","41.666667%"],["6/12","50%"],["7/12","58.333333%"],["8/12","66.666667%"],["9/12","75%"],["10/12","83.333333%"],["11/12","91.666667%"],["full","100%"],["min","min-content"],["max","max-content"],["fit","fit-content"]],r0=["white","black","transparent","border","input","ring-3","background","foreground","primary","secondary","destructive","warning","muted","accent","popover","card","sidebar"],r1={100:"font-thin",200:"font-extralight",300:"font-light",400:"font-normal",500:"font-medium",600:"font-semibold",700:"font-bold",800:"font-extrabold",900:"font-black"},r2=Array.from({length:21},(e,t)=>[String(5*t),String(5*t)]);function r5(e){var t;let n,{title:r,options:i,type:a,classNames:o,match:s,fallbackValue:l,breakpoint:c,icon:u,showTitle:d,onUpdate:p}=e,b=[],w=rO(c),[j,C]=(0,g.useState)(null),k="",S=0,N=!1;for(let{display:e,value:t,fallback:r,title:l}of i){let i=!1;i:for(let e=0;e<o.length;e++){for(let r of w)if(o[e].includes(r+":"+t)){if(n&&rU.breakpoints.indexOf(n)<rU.breakpoints.indexOf(r))continue;S=e,i=!0,k=t,n=r;break i}if(!n&&o[e].includes(t)){S=e,i=!0,k=t;break}}if(r&&(N=!0),"dropdown"===a){b.push((0,h.jsx)(m.SelectItem,{value:t||" ",className:"h-8 w-full",onPointerEnter:()=>{j||C([o[S].join(" "),k||" "]);let e=o[S].filter(e=>e!==(n?n+":"+k:k)&&(!s||!s(e)));t&&e.push(n?n+":"+t:t),p(S,e.join(" "),!0)},children:e},t));continue}b.push((0,h.jsx)(v.Tooltip,{content:l||t,delayDuration:200,sideOffset:0,children:(0,h.jsx)("button",{className:(0,f.cn)("flex flex-1 items-center justify-center rounded-sm py-1 transition-colors",i?"bg-gray-200 [&_svg]:text-gray-900! hover:bg-gray-300":"text-gray-700 hover:bg-gray-100"),onClick:()=>{let e=o[S].filter(e=>e!==(n?n+":"+k:k)&&(!s||!s(e)));t&&e.push(n?n+":"+t:t),p(S,e.join(" "))},children:e})},t))}if(!k&&!N)if(!l)return null;else k=l,N=!0;let E=(0,h.jsxs)(m.Select,{value:(null!=(t=null==j?void 0:j[1])?t:k)||" ",onValueChange:e=>{C(null),e=e.trim();let t=o[S].filter(e=>e!==(n?n+":"+k:k)&&(!s||!s(e)));e&&t.push(n?n+":"+e:e),p(S,t.join(" "),!1)},children:[(0,h.jsx)(x.Button,{size:"sm",variant:"secondary",asChild:!0,className:"justify-between rounded-md font-normal",children:(0,h.jsxs)(m.SelectTrigger,{hideChevron:!0,children:[(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[u,k?(0,h.jsx)(m.SelectValue,{}):(0,h.jsx)("span",{className:"text-gray-500",children:"Default"})]}),(0,h.jsx)(y.ChevronDownSmall,{className:"size-4"})]})}),(0,h.jsx)(m.SelectContent,{onPointerLeave:()=>{if(j){let[e]=j;p(S,e,!0)}},children:b})]}),M=(0,h.jsx)("div",{className:"bg-background-subtle inline-flex h-8 w-full gap-0.5 rounded-md border border-gray-200 p-[2px] text-sm",children:b});return"dropdown"!==a?(0,h.jsx)("div",{title:r,className:"flex flex-1",children:(0,h.jsxs)("div",{className:"flex w-full flex-col gap-1.5",children:[(0,h.jsx)("label",{className:"text-label-12 select-none capitalize leading-4 text-gray-500",children:r}),M]})}):d?(0,h.jsxs)("div",{className:"flex w-full flex-col gap-1.5",children:[(0,h.jsx)("label",{className:"text-label-12 select-none capitalize leading-4 text-gray-500",children:r}),E]}):(0,h.jsx)("div",{title:r,className:"flex flex-1",children:E})}function r4(e){let{title:t,options:n,classNames:r,breakpoint:i,onUpdate:a}=e,o=[],s=rO(i);for(let{display:e,value:t,title:i,conflict:l}of n){let n,c="",u=0,d=!1;i:for(let e=0;e<r.length;e++){for(let i of s)if(r[e].includes(i+":"+t)){if(n&&rU.breakpoints.indexOf(n)<rU.breakpoints.indexOf(i))continue;u=e,d=!0,c=t,n=i;break i}if(!n&&r[e].includes(t)){u=e,d=!0,c=t;break}}o.push((0,h.jsx)(v.Tooltip,{content:i||t,delayDuration:200,sideOffset:0,children:(0,h.jsx)("button",{className:(0,f.cn)("flex flex-1 items-center justify-center rounded-sm py-1 transition-colors",d?"bg-gray-200 [&_svg]:text-gray-900! hover:bg-gray-300":"text-gray-700 hover:bg-gray-100"),onClick:()=>{let e=!1,i=r[u].filter(t=>t!==(n?n+":"+c:c)?!(l&&l.includes(t)):(e=!0,!1));t&&!e&&i.push(n?n+":"+t:t),a(u,i.join(" "))},children:e})},t))}return(0,h.jsx)("div",{title:t,className:"flex flex-1",children:(0,h.jsxs)("div",{className:"flex w-full flex-col gap-1.5",children:[(0,h.jsx)("label",{className:"text-label-12 select-none capitalize leading-4 text-gray-500",children:t}),(0,h.jsx)("div",{className:"bg-background-subtle inline-flex h-8 w-full gap-0.5 rounded-md border border-gray-200 p-[2px] text-sm",children:o})]})})}function r3(e){let{title:t,icon:n,value:r,step:i,allowNegative:a,allowIconSliding:o,min:s,max:l,disabled:c,onChange:u,suffix:d,presets:p=rY}=e;return(0,h.jsx)(C.default,{title:t,prefix:n,suffix:d,disabled:c,value:r,onChange:u,step:i,min:s,max:l,allowNegative:a,allowIconSliding:o,presets:p})}function r7(e){return e[2]?e[2]+":"+e[0]:e[0]}function r9(e){var t,n,r,i,a,o,s,l,c,u,d,p,m,y,C,k,S,N,E;let{title:M,showTitle:I,classNames:D,prefix:T,prefixX:A,prefixY:L,prefixT:P,prefixR:R,prefixB:_,prefixL:O,icon:F,iconX:V,iconY:B,iconT:z,iconR:H,iconB:U,iconL:q,breakpoint:W,generate:Z,match:G,min:K,max:X,allowNegative:$,allowIconSliding:Y,defaultValue:J=0,onUpdate:Q,presets:ee}=e,et=rO(W),en={},er={};for(let e=0;e<D.length;e++)for(let t of D[e]){for(let n of et)if(t.startsWith(n+":")){let r=t.slice(n.length+1),i=G(r);if(null!==i){let t=en[i[0]];if((null==t?void 0:t[2])&&rU.breakpoints.indexOf(t[2])<rU.breakpoints.indexOf(n))continue;en[i[0]]=[r,i[1],n],er[i[0]]=e}}let n=G(t);if(null!==n){let r=en[n[0]];(null==r?void 0:r[2])||(en[n[0]]=[t,n[1],void 0],er[n[0]]=e)}}let ei=(e,t,n)=>{var r,i,a,o,s,l,c,u,d,p,h,f;let m,g=Z(e,t);if(null===g)return;let v=er[e]||0,x=new Set;(null==(r=en[e])?void 0:r[0])?(x.add(r7(en[e])),m=en[e][2]):e===T||(e===A||e===L?m=null==(i=en[T])?void 0:i[2]:e===P||e===_?m=(null==(a=en[L||""])?void 0:a[2])||(null==(o=en[T])?void 0:o[2]):(e===R||e===O)&&(m=(null==(s=en[A||""])?void 0:s[2])||(null==(l=en[T])?void 0:l[2])));let y=e.startsWith("gap"),b=e.startsWith("space");if(y||b){let e=y?[/^gap-/,/^gap-x-/,/^gap-y-/]:[/^space-x-/,/^space-y-/];for(let t=0;t<D.length;t++)for(let n of D[t]){let t=n.includes(":")?n.split(":")[1]:n;e.some(e=>e.test(t))&&x.add(n)}}(e===A||e===L||e===T)&&(P&&(null==(c=en[P])?void 0:c[0])&&x.add(r7(en[P])),R&&(null==(u=en[R])?void 0:u[0])&&x.add(r7(en[R])),_&&(null==(d=en[_])?void 0:d[0])&&x.add(r7(en[_])),O&&(null==(p=en[O])?void 0:p[0])&&x.add(r7(en[O])),e===T&&(A&&(null==(h=en[A])?void 0:h[0])&&x.add(r7(en[A])),L&&(null==(f=en[L])?void 0:f[0])&&x.add(r7(en[L]))));let w=D[v].filter(e=>!x.has(e));w.push(m?m+":"+g:g),Q(v,w.join(" "),n)},ea=A?null!=(n=en[A])?n:en[T]:void 0,eo=L?null!=(r=en[L])?r:en[T]:void 0,es=P?null!=(a=null!=(i=en[P])?i:L?en[L]:void 0)?a:en[T]:void 0,el=R?null!=(s=null!=(o=en[R])?o:A?en[A]:void 0)?s:en[T]:void 0,ec=_?null!=(c=null!=(l=en[_])?l:L?en[L]:void 0)?c:en[T]:void 0,eu=O?null!=(d=null!=(u=en[O])?u:A?en[A]:void 0)?d:en[T]:void 0,ed=ec!==es||eu!==el,[ep,eh]=(0,g.useState)(ed),[ef,em]=(0,g.useState)(!1),eg=(0,h.jsx)(r3,{presets:ee,title:M,allowNegative:$,value:null!=(p=null==(t=en[T])?void 0:t[1])?p:J,icon:ef?null:F,min:$?void 0:0,allowIconSliding:Y,onChange:(e,t,n,r)=>{if("number"==typeof e){if(e<K||e>X||isNaN(e)){n(),e<K&&(t.value=K.toString()),e>X&&(t.value=X.toString());return}ei(T,e,r)}else ei(T,e,r)}}),ev=A?(0,h.jsx)(r3,{presets:ee,title:"".concat(M," X"),icon:V,allowNegative:$,value:null!=(m=null==ea?void 0:ea[1])?m:J,min:$?void 0:0,allowIconSliding:Y,onChange:(e,t,n,r)=>{if("number"==typeof e){if(e<K||e>X||isNaN(e)){n(),e<K&&(t.value=K.toString()),e>X&&(t.value=X.toString());return}ef?ei(T,e,r):ei(A,e,r)}else ef?ei(T,e,r):ei(A,e,r)}}):null,ex=L?(0,h.jsx)(r3,{presets:ee,title:"".concat(M," Y"),icon:B,allowNegative:$,disabled:ef,value:ef?null!=(y=null==ea?void 0:ea[1])?y:J:null!=(C=null==eo?void 0:eo[1])?C:J,min:$?void 0:0,allowIconSliding:Y,onChange:(e,t,n,r)=>{if("number"==typeof e){if(e<K||e>X||isNaN(e)){n(),e<K&&(t.value=K.toString()),e>X&&(t.value=X.toString());return}ei(L,e,r)}else ei(L,e,r)}}):null,ey=P?(0,h.jsx)(r3,{presets:ee,title:"".concat(M," Top"),icon:z,allowNegative:$,value:null!=(k=null==es?void 0:es[1])?k:J,min:$?void 0:0,allowIconSliding:Y,onChange:(e,t,n,r)=>{if("number"==typeof e){if(e<K||e>X||isNaN(e)){n(),e<K&&(t.value=K.toString()),e>X&&(t.value=X.toString());return}ei(P,e,r)}else ei(P,e,r)}}):null,eb=R?(0,h.jsx)(r3,{presets:ee,title:"".concat(M," Right"),icon:H,allowNegative:$,value:null!=(S=null==el?void 0:el[1])?S:J,min:$?void 0:0,allowIconSliding:Y,onChange:(e,t,n,r)=>{if("number"==typeof e){if(e<K||e>X||isNaN(e)){n(),e<K&&(t.value=K.toString()),e>X&&(t.value=X.toString());return}ei(R,e,r)}else ei(R,e,r)}}):null,ew=_?(0,h.jsx)(r3,{presets:ee,title:"".concat(M," Bottom"),icon:U,allowNegative:$,value:null!=(N=null==ec?void 0:ec[1])?N:J,min:$?void 0:0,allowIconSliding:Y,onChange:(e,t,n,r)=>{if("number"==typeof e){if(e<K||e>X||isNaN(e)){n(),e<K&&(t.value=K.toString()),e>X&&(t.value=X.toString());return}ei(_,e,r)}else ei(_,e,r)}}):null,ej=O?(0,h.jsx)(r3,{presets:ee,title:"".concat(M," Left"),icon:q,allowNegative:$,value:null!=(E=null==eu?void 0:eu[1])?E:J,min:$?void 0:0,allowIconSliding:Y,onChange:(e,t,n,r)=>{if("number"==typeof e){if(e<K||e>X||isNaN(e)){n(),e<K&&(t.value=K.toString()),e>X&&(t.value=X.toString());return}ei(O,e,r)}else ei(O,e,r)}}):null,eC=P&&R&&_&&O&&!ef,ek=ev&&ex,eS=(0,h.jsxs)("div",{className:"items-top flex w-full justify-between gap-2",children:[ep?(0,h.jsxs)("div",{className:"flex w-full flex-1 flex-col gap-3",children:[(0,h.jsxs)("div",{className:"flex items-center gap-3",children:[(0,h.jsx)("span",{className:"flex-1",children:ey}),(0,h.jsx)("span",{className:"flex-1",children:ew})]}),(0,h.jsxs)("div",{className:"flex items-center gap-3",children:[(0,h.jsx)("span",{className:"flex-1",children:ej}),(0,h.jsx)("span",{className:"flex-1",children:eb})]})]}):ef?(0,h.jsx)("div",{className:"flex flex-1 items-center gap-3",children:eg}):ev&&ex?(0,h.jsxs)("div",{className:"flex flex-1 items-center gap-3",children:[ev,ex]}):(0,h.jsx)("div",{className:"flex flex-1 items-center gap-3",children:eg}),eC||ek?(0,h.jsxs)("div",{className:"flex gap-1",children:[eC?(0,h.jsx)(v.Tooltip,{content:"Toggle all sides",children:(0,h.jsx)(x.Button,{variant:"ghost",size:"sm",className:"w-8",onClick:()=>{eh(!ep)},children:ep?(0,h.jsx)(w.FullscreenClose,{}):(0,h.jsx)(b.Fullscreen,{})})}):null,ek?(0,h.jsx)(v.Tooltip,{content:ef?"Unlock":"Lock",children:(0,h.jsx)(x.Button,{variant:ef?"blue-ghost":"ghost",size:"sm","data-locked":ef,className:(0,f.cn)("w-8",ef&&"[&[data-locked=true]_svg]:text-blue-800!"),onClick:()=>{ef?em(!1):(em(!0),ep&&eh(!1))},children:(0,h.jsx)(j.LockClosed,{})})}):null]}):null]});return I?(0,h.jsxs)("div",{className:"flex w-full flex-col gap-1.5",children:[(0,h.jsx)("label",{className:"text-label-12 select-none capitalize leading-4 text-gray-500",children:M}),eS]}):eS}function r6(e){var t,n;let{title:r,classNames:i,defaultValue:a,step:o,allowNegative:s,breakpoint:l,prefix:c,icon:u,suffix:d,generate:p,match:f,min:m,max:g,onUpdate:v,presets:x}=e,y=rO(l),b={},w={};for(let e=0;e<i.length;e++)for(let t of i[e]){for(let n of y)if(t.startsWith(n+":")){let r=f(t.slice(n.length+1));if(null!==r){let i=b[r[0]];if((null==i?void 0:i[2])&&rU.breakpoints.indexOf(i[2])<rU.breakpoints.indexOf(n))continue;b[r[0]]=[t,r[1],n],w[r[0]]=e}}let n=f(t);if(null!==n){let r=b[n[0]];(null==r?void 0:r[2])||(b[n[0]]=[t,n[1],void 0],w[n[0]]=e)}}let j=(e,t,n)=>{var r;let a,o,s=p(e,t);if(null===s)return!1;let l=w[e]||0;(null==(r=b[e])?void 0:r[0])&&(a=r7(b[e]),o=b[e][2]);let c=a?i[l].filter(e=>e!==a):[...i[l]];c.push(o?o+":"+s:s),v(l,c.join(" "),n)};return(0,h.jsx)("div",{className:"items-top flex w-full justify-between gap-2",children:(0,h.jsx)("div",{className:"flex flex-1 items-center gap-3",children:(0,h.jsx)(r3,{presets:x,title:r,value:null!=(n=null==(t=b[c])?void 0:t[1])?n:a,icon:u,suffix:d,step:o,min:m,max:g,allowIconSliding:!0,allowNegative:s,onChange:(e,t,n,r)=>{if("number"!=typeof e)return j(c,e,r);if(e<m||e>g||isNaN(e)){n(),e<m&&(t.value=m.toString()),e>g&&(t.value=g.toString());return}return j(c,e,r)}})})})}function r8(e){let{title:t,classNames:n,computedColor:r,tokens:i,prefix:a,match:o,fallback:s,onUpdate:l}=e,{colorClassName:c,activeIndex:u}=(0,g.useMemo)(()=>{let e="",t=0;for(let r=0;r<n.length;r++)for(let i=0;i<n[r].length;i++){let a=o(n[r][i]);if(null!==a){e=a,t=r;break}}return{colorClassName:e,activeIndex:t}},[n,o]),[d,p]=(0,g.useState)(null),f=(0,g.useCallback)(e=>{let t=n[u].filter(e=>e!==c);if(e){let n="".concat(a,"[rgba(").concat(e.r,",").concat(e.g,",").concat(e.b,",").concat(e.a,")]");t.push(n)}l(u,t.join(" "),!0)},[u,n,c,l,a]),m=(0,g.useCallback)(e=>{let t=n[u].filter(e=>e!==c);if(e){let n="".concat(a).concat(e);t.push(n)}l(u,t.join(" "),!1)},[u,n,c,l,a]),v=(0,g.useCallback)(()=>{if(d){let[e]=d;l(u,e,!0),p(null)}},[u,l,d]),x=(0,g.useCallback)(e=>{d||p([n[u].join(" "),c||" "]);let t=n[u].filter(e=>e!==c);"Default"!==e.label&&t.push("".concat(a).concat(e.label)),l(u,t.join(" "),!0)},[u,n,c,l,a,d]),y=(0,g.useCallback)((e,t)=>{e.current&&(e.current.textContent=t)},[]),b=(0,g.useMemo)(()=>i?[{label:"Default",value:""},...Object.entries(i).map(e=>{let[t,n]=e;return{label:t,value:n}})]:[],[i]),{displayedColorName:w,parsedColor:j}=(0,g.useMemo)(()=>{if(!c)return{displayedColorName:null,parsedColor:null};let e=c.startsWith(a)?c.slice(a.length):null;if(i&&e&&i[e]){var t;return{displayedColorName:e,parsedColor:null!=(t=e1(i[e]))?t:null}}if(r){let e=e1(r);return{displayedColorName:e?r:null,parsedColor:null!=e?e:null}}return{displayedColorName:null,parsedColor:null}},[c,a,i,r]);return c||s?(0,h.jsx)(rB,{title:t,displayedColorName:w,colorTokens:b,onColorChange:f,onTokensChange:m,onPointerEnter:x,onPointerLeave:v,updateColorNameTextContent:y,clearRevertPreview:()=>p(null),parsedColor:j,alphaEnabled:!0}):null}var ie=e.i(847801),it=n,ir=x,ii=m;let ia="__v0_dynamic";function io(e){var t,n,r,i,a,o,s,l,c,u;let{source:d,name:p,props:h,onUpdate:f}=e,m=[];function g(e,t,n){t!==ia&&m.push({name:e,active:t?JSON.parse(t):n[0],options:n})}return("@/components/ui/button"===d&&"Button"===p?g("variant",null==(t=h.variant)?void 0:t[0],["primary","secondary","destructive","outline","ghost","link"]):"@/components/ui/badge"===d&&"Badge"===p?g("variant",null==(n=h.variant)?void 0:n[0],["default","secondary","destructive","outline"]):"@/components/ui/alert"===d&&"Alert"===p?g("variant",null==(r=h.variant)?void 0:r[0],["default","destructive"]):"@/components/ui/toggle"===d&&"Toggle"===p?(g("variant",null==(i=h.variant)?void 0:i[0],["default","outline"]),g("size",null==(a=h.size)?void 0:a[0],["default","sm","lg"])):"@/components/ui/sidebar"===d?("SidebarMenuButton"===p&&g("variant",null==(o=h.variant)?void 0:o[0],["default","outline"]),("SidebarMenuButton"===p||"SidebarMenuSubButton"===p)&&g("size",null==(s=h.size)?void 0:s[0],["default","sm","lg"])):"@/components/ui/input"===d&&"Input"===p?g("type",null==(l=h.type)?void 0:l[0],["text","email","password","number","search","tel","url"]):"@/components/ui/select"===d&&"SelectContent"===p&&(g("side",null==(c=h.side)?void 0:c[0],["top","bottom","left","right"]),g("align",null==(u=h.align)?void 0:u[0],["start","center","end"])),0===m.length)?null:(0,it.jsx)(rz,{title:"Component",children:(0,it.jsx)("div",{className:"flex flex-col gap-2",children:m.map(e=>{let{name:t,active:n,options:r}=e;return(0,it.jsxs)("div",{className:"flex flex-col items-start gap-1",children:[(0,it.jsx)("label",{className:"text-label-12 capitalize opacity-60",children:t}),(0,it.jsxs)(ii.Select,{onValueChange:e=>{f(t,e)},value:n,children:[(0,it.jsx)(ir.Button,{size:"sm",variant:"secondary",asChild:!0,className:"justify-between font-normal min-w-0 flex-1",children:(0,it.jsx)(ii.SelectTrigger,{children:(0,it.jsx)("div",{className:"flex items-center gap-2 capitalize",children:n})})}),(0,it.jsx)(ii.SelectContent,{children:r.map(e=>(0,it.jsx)(ii.SelectItem,{value:e,className:"h-8 w-full capitalize",children:e},e))})]})]},t)})})})}let is=(0,ie.default)(()=>e.A(556530).then(e=>e.DevToolsIcon),{loadableGenerated:{modules:[747854]}});function il(e){var t,h,f,m,g,v,x,y,b,w,j,C,k,S,N,E,M,I,D,T,A,L,P,R,ee,eg,ev,ex;let{classNames:ey,classNamesInfo:eb,handleClassUpdate:ew,handleContentUpdate:ej,handleIconUpdate:eC,handlePropUpdate:ek,selected:eS}=e,eN=null==(t=eS.info)?void 0:t.twTokens.colors,eE=(null==(h=eS.info)?void 0:h.twVersion)||3,eM=(null==(f=eS.lib)?void 0:f.source)==="lucide-react",eI=((null==(m=eS.lib)?void 0:m.source)||"").startsWith("@/components/ui/"),eD=eb.size||eM;return(0,n.jsxs)(n.Fragment,{children:[eM?(0,n.jsx)(rz,{title:"Icon",children:(0,n.jsx)(p.Suspense,{fallback:(0,n.jsx)("div",{className:"h-8 w-full animate-pulse rounded-md bg-gray-200"}),children:(0,n.jsx)(is,{name:eS.lib.name,lib:eS.lib.source,onUpdate:eC})})}):null,eI?(0,n.jsx)(io,{source:eS.lib.source,name:eS.lib.name,props:eS.lib.props,onUpdate:ek}):null,eS.content?(0,n.jsx)(rz,{title:"Content",children:(0,n.jsx)(rH,{value:eS.content.value,onUpdate:ej,type:eS.content.type})}):null,eM?null:(0,n.jsxs)(rz,{title:"Typography",children:[(0,n.jsx)(r5,{title:"Font Family",onUpdate:ew,classNames:ey,breakpoint:null==(g=eS.info)?void 0:g.activeBreakpoint,type:"dropdown",options:[{display:(0,n.jsx)("span",{className:"text-gray-500",children:"Default"}),value:"",fallback:!0},{display:"Sans Serif",value:"font-sans"},{display:"Serif",value:"font-serif"},{display:"Monospace",value:"font-mono"}]}),(0,n.jsxs)("div",{className:"flex w-full gap-3",children:[(0,n.jsx)(r5,{title:"Weight",onUpdate:ew,classNames:ey,fallbackValue:r1[(null==(v=eS.info)?void 0:v.fontWeight)||"400"],breakpoint:null==(x=eS.info)?void 0:x.activeBreakpoint,type:"dropdown",options:[{display:"Thin",value:"font-thin"},{display:"Extra Light",value:"font-extralight"},{display:"Light",value:"font-light"},{display:"Regular",value:"font-normal"},{display:"Medium",value:"font-medium"},{display:"Semi Bold",value:"font-semibold"},{display:"Bold",value:"font-bold"},{display:"Extra Bold",value:"font-extrabold"},{display:"Black",value:"font-black"}]}),(0,n.jsx)(r5,{title:"Size",onUpdate:ew,classNames:ey,breakpoint:null==(y=eS.info)?void 0:y.activeBreakpoint,type:"dropdown",match:e=>/^text-\[[\d.]+(px|em|rem|pt|%)\]$/.test(e),options:[{display:(0,n.jsx)("span",{className:"text-gray-500",children:"Default"}),value:"",fallback:!0},{display:"xs",value:"text-xs"},{display:"sm",value:"text-sm"},{display:"base",value:"text-base"},{display:"lg",value:"text-lg"},{display:"xl",value:"text-xl"},{display:"2xl",value:"text-2xl"},{display:"3xl",value:"text-3xl"},{display:"4xl",value:"text-4xl"},{display:"5xl",value:"text-5xl"},{display:"6xl",value:"text-6xl"},{display:"7xl",value:"text-7xl"},{display:"8xl",value:"text-8xl"},{display:"9xl",value:"text-9xl"}]})]}),(0,n.jsxs)("div",{className:"flex w-full flex-wrap gap-3",children:[(0,n.jsxs)("div",{className:"flex flex-1 flex-col gap-1.5",children:[(0,n.jsx)("label",{className:"text-label-12 select-none capitalize leading-4 opacity-60",children:"Line Height"}),(0,n.jsx)(r6,{title:"Line Height",classNames:ey,breakpoint:null==(b=eS.info)?void 0:b.activeBreakpoint,presets:rG,icon:null,prefix:"leading",defaultValue:4,step:.05,generate:(e,t)=>"".concat(e,"-").concat("number"==typeof t?rZ[t]:"[".concat(t,"]")),match:e=>{let t=e.match(/^leading-(.+)$/);if(t){let e=rZ.indexOf(t[1]);if(-1!==e)return["leading",e];if(t[1].startsWith("[")&&t[1].endsWith("]"))return["leading",t[1].slice(1,-1)]}return null},min:0,max:rZ.length-1,onUpdate:ew})]}),(0,n.jsxs)("div",{className:"flex flex-1 flex-col gap-1.5",children:[(0,n.jsx)("label",{className:"text-label-12 select-none capitalize leading-4 opacity-60",children:"Letter Spacing"}),(0,n.jsx)(r6,{title:"Letter Spacing",classNames:ey,breakpoint:null==(w=eS.info)?void 0:w.activeBreakpoint,presets:rX,icon:null,prefix:"tracking",defaultValue:2,step:.01,allowNegative:!0,generate:(e,t)=>"".concat(e,"-").concat("number"==typeof t?rK[t]:"[".concat(t,"]")),match:e=>{let t=e.match(/^tracking-(.+)$/);if(t){let e=rK.indexOf(t[1]);if(-1!==e)return["tracking",e];if(t[1].startsWith("[")&&t[1].endsWith("]"))return["tracking",t[1].slice(1,-1)]}return null},min:0,max:rK.length-1,onUpdate:ew})]})]}),(0,n.jsxs)("div",{className:"flex w-full flex-wrap gap-3",children:[(0,n.jsx)(r5,{title:"Alignment",onUpdate:ew,classNames:ey,breakpoint:null==(j=eS.info)?void 0:j.activeBreakpoint,options:[{display:(0,n.jsx)(q,{className:"opacity-50"}),value:"",fallback:!0,title:"Reset"},{display:(0,n.jsx)(l.AlignmentLeft,{}),value:"text-left",title:"Align Left"},{display:(0,n.jsx)(c.AlignmentCenter,{}),value:"text-center",title:"Align Center"},{display:(0,n.jsx)(u.AlignmentRight,{}),value:"text-right",title:"Align Right"},{display:(0,n.jsx)(d.MenuAlt,{}),value:"text-justify",title:"Justify"}]}),(0,n.jsx)(r4,{title:"Decoration",onUpdate:ew,classNames:ey,breakpoint:null==(C=eS.info)?void 0:C.activeBreakpoint,options:[{display:(0,n.jsx)(i.TextItalic,{}),value:"italic",title:"Italic"},{display:(0,n.jsx)(a.TextStrikethrough,{}),value:"line-through",title:"Strikethrough",conflict:["underline","overline"]},{display:(0,n.jsx)(W,{}),value:"underline",title:"Underline",conflict:["line-through","overline"]},{display:(0,n.jsx)(G,{}),value:"overline",title:"Overline",conflict:["line-through","underline"]},{display:(0,n.jsx)(Z,{}),value:"tabular-nums",title:"Tabular Numbers"}]})]})]}),(0,n.jsx)(rz,{title:"Color",children:(0,n.jsx)(r8,{title:"Color",fallback:!0,onUpdate:ew,classNames:ey,computedColor:null==(k=eS.info)?void 0:k.color,tokens:eN,prefix:"text-",match:e=>{if(!e.startsWith("text-"))return null;let t=e.slice(5);return(/\/\d+$/.test(t)&&(t=t.slice(0,t.lastIndexOf("/"))),r0.includes(t)||(null==eN?void 0:eN[t])||t&&/^[a-z]+-(|1|2|3|4|5|6|7|8|9)(00|50)$/.test(t)||t&&t.startsWith("[rgb"))?e:null}})}),(0,n.jsx)(rz,{title:"Background",children:(0,n.jsx)("div",{className:"flex w-full gap-3",children:(0,n.jsx)(r8,{title:"Background Color",fallback:!0,onUpdate:ew,classNames:ey,computedColor:null==(S=eS.info)?void 0:S.backgroundColor,tokens:eN,prefix:"bg-",match:e=>{if(!e.startsWith("bg-"))return null;let t=e.slice(3);return(/\/\d+$/.test(t)&&(t=t.slice(0,t.lastIndexOf("/"))),r0.includes(t)||(null==eN?void 0:eN[t])||t&&/^[a-z]+-(|1|2|3|4|5|6|7|8|9)(00|50)$/.test(t)||t&&t.startsWith("[rgb"))?e:null}})})}),(0,n.jsxs)(rz,{title:"Layout",children:[eb.flex?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"flex w-full gap-3",children:(0,n.jsx)(r5,{title:"Direction",onUpdate:ew,classNames:ey,breakpoint:null==(N=eS.info)?void 0:N.activeBreakpoint,options:[{display:(0,n.jsx)(o.ArrowLeftRight,{}),value:"flex-row",title:"Row",fallback:!0},{display:(0,n.jsx)(s.ArrowUpDown,{}),title:"Column",value:"flex-col"}]})}),(0,n.jsxs)("div",{className:"flex w-full flex-wrap gap-3",children:[(0,n.jsx)("div",{className:"flex-1",children:(0,n.jsx)(r5,{title:"Alignment",showTitle:!0,onUpdate:ew,classNames:ey,breakpoint:null==(E=eS.info)?void 0:E.activeBreakpoint,options:[{display:eb.flexColumn?(0,n.jsx)(el,{}):(0,n.jsx)(ep,{}),value:"items-stretch",title:"Align Stretch",fallback:!0},{display:eb.flexColumn?(0,n.jsx)(ec,{}):(0,n.jsx)(eh,{}),value:"items-start",title:"Align Start"},{display:eb.flexColumn?(0,n.jsx)(eu,{}):(0,n.jsx)(ef,{}),value:"items-center",title:"Align Center"},{display:eb.flexColumn?(0,n.jsx)(ed,{}):(0,n.jsx)(em,{}),value:"items-end",title:"Align End"}]})}),(0,n.jsx)("div",{className:"flex-1",children:(0,n.jsx)(r5,{title:"Justification",showTitle:!0,type:"dropdown",onUpdate:ew,classNames:ey,breakpoint:null==(M=eS.info)?void 0:M.activeBreakpoint,options:[{display:"Start",value:"justify-start",title:"Justify Start",fallback:!0},{display:"Center",value:"justify-center",title:"Justify Center"},{display:"End",value:"justify-end",title:"Justify End"},{display:"Space Between",value:"justify-between",title:"Justify Space Between"},{display:"Space Around",value:"justify-around",title:"Justify Space Around"},{display:"Space Evenly",value:"justify-evenly",title:"Justify Space Evenly"},{display:"Stretch",value:"justify-stretch",title:"Justify Stretch"}]})})]}),eb.showGap?(0,n.jsx)(r9,{title:"Gap",showTitle:!0,allowIconSliding:!0,classNames:ey,breakpoint:null==(I=eS.info)?void 0:I.activeBreakpoint,prefix:"gap",...eb.flexColumn?{prefixY:"gap-y"}:{prefixX:"gap-x"},icon:eb.flexColumn?(0,n.jsx)(O,{}):(0,n.jsx)(_,{}),generate:(e,t)=>"".concat(e,"-").concat("number"==typeof t?r$[t]:"[".concat(t,"]")),match:e=>{let t=e.match(/^(gap|gap-x|gap-y|gap-t|gap-r|gap-b|gap-l)-([^-]+)$/);if(t){let e=t[1],n=r$.indexOf(t[2]);if(-1!==n)return[e,n];if(t[2].startsWith("[")&&t[2].endsWith("]"))return[e,t[2].slice(1,-1)]}return null},min:0,max:r$.length-1,onUpdate:ew}):(0,n.jsx)(r9,{title:"Gap",showTitle:!0,classNames:ey,breakpoint:null==(D=eS.info)?void 0:D.activeBreakpoint,prefix:eb.flexColumn?"space-y":"space-x",icon:eb.flexColumn?(0,n.jsx)(O,{}):(0,n.jsx)(_,{}),generate:(e,t)=>"".concat(e,"-").concat("number"==typeof t?r$[t]:"[".concat(t,"]")),match:e=>{let t=e.match(/^(space-x|space-y)-([^-]+)$/);if(t){let e=t[1],n=r$.indexOf(t[2]);if(-1!==n)return[e,n];if(t[2].startsWith("[")&&t[2].endsWith("]"))return[e,t[2].slice(1,-1)]}return null},min:0,max:r$.length-1,onUpdate:ew})]}):null,(0,n.jsx)(r9,{title:"Margin",showTitle:!0,classNames:ey,breakpoint:null==(T=eS.info)?void 0:T.activeBreakpoint,allowNegative:!0,prefix:"m",prefixX:"mx",prefixY:"my",prefixT:"mt",prefixR:"mr",prefixB:"mb",prefixL:"ml",iconX:(0,n.jsx)(F,{}),iconY:(0,n.jsx)(V,{}),iconT:(0,n.jsx)(B,{}),iconR:(0,n.jsx)(U,{}),iconB:(0,n.jsx)(z,{}),iconL:(0,n.jsx)(H,{}),presets:rJ,generate:(e,t)=>"".concat(e,"-").concat("number"==typeof t?rJ[t][0]:"[".concat(t,"]")),match:e=>{let t=e.match(/^(m|mx|my|mt|mr|mb|ml)-(.+)$/);if(t){let e=t[1],n=rJ.findIndex(e=>{let[n]=e;return n===t[2]});if(-1!==n)return[e,n];if(t[2].startsWith("[")&&t[2].endsWith("]"))return[e,t[2].slice(1,-1)]}return null},min:0,allowIconSliding:!0,max:rJ.length-1,onUpdate:ew}),(0,n.jsx)(r9,{title:"Padding",showTitle:!0,classNames:ey,breakpoint:null==(A=eS.info)?void 0:A.activeBreakpoint,prefix:"p",prefixX:"px",prefixY:"py",prefixT:"pt",prefixR:"pr",prefixB:"pb",prefixL:"pl",iconX:(0,n.jsx)(en,{}),iconY:(0,n.jsx)(er,{}),iconT:(0,n.jsx)(ei,{}),iconR:(0,n.jsx)(es,{}),iconB:(0,n.jsx)(ea,{}),iconL:(0,n.jsx)(eo,{}),allowIconSliding:!0,generate:(e,t)=>"".concat(e,"-").concat("number"==typeof t?r$[t]:"[".concat(t,"]")),match:e=>{let t=e.match(/^(p|px|py|pt|pr|pb|pl)-([^-]+)$/);if(t){let e=t[1],n=r$.indexOf(t[2]);if(-1!==n)return[e,n];if(t[2].startsWith("[")&&t[2].endsWith("]"))return[e,t[2].slice(1,-1)]}return null},min:0,max:r$.length-1,onUpdate:ew})]}),eD?(0,n.jsx)(rz,{title:"Size",children:(0,n.jsx)("div",{className:"flex w-full gap-3",children:(0,n.jsx)(r9,{title:"Size",classNames:ey,breakpoint:null==(L=eS.info)?void 0:L.activeBreakpoint,presets:rQ,prefix:"size",prefixX:"w",prefixY:"h",defaultValue:"auto",iconX:(0,n.jsx)(o.ArrowLeftRight,{}),iconY:(0,n.jsx)(o.ArrowLeftRight,{className:"rotate-90"}),generate:(e,t)=>"".concat(e,"-").concat("number"==typeof t?rQ[t][0]:"[".concat(t,"]")),allowIconSliding:!0,match:e=>{let t=e.match(/^(size|w|h)-([^-]+)$/);if(t){let e=t[1],n=rQ.findIndex(e=>{let[n]=e;return n===t[2]});if(-1!==n)return[e,n];if(t[2].startsWith("[")&&t[2].endsWith("]"))return[e,t[2].slice(1,-1)]}return null},min:0,max:rQ.length-1,onUpdate:ew})})}):null,(0,n.jsxs)(rz,{title:"Border",children:[(0,n.jsxs)("div",{className:"flex w-full gap-3",children:[(0,n.jsx)(r8,{title:"Border Color",fallback:!0,onUpdate:ew,classNames:ey,computedColor:null==(P=eS.info)?void 0:P.borderColor,tokens:eN,prefix:"border-",match:e=>{if(!e.startsWith("border-"))return null;let t=e.slice(7);return(/\/\d+$/.test(t)&&(t=t.slice(0,t.lastIndexOf("/"))),r0.includes(t)||(null==eN?void 0:eN[t])||t&&/^[a-z]+-(|1|2|3|4|5|6|7|8|9)(00|50)$/.test(t)||t&&t.startsWith("[rgba"))?e:null}}),(0,n.jsx)(r5,{title:"Border Style",onUpdate:ew,classNames:ey,breakpoint:null==(R=eS.info)?void 0:R.activeBreakpoint,type:"dropdown",options:[{display:(0,n.jsx)("span",{className:"text-gray-500",children:"Default"}),value:"",fallback:!0},{display:"None",value:"border-none"},{display:"Solid",value:"border-solid"},{display:"Dashed",value:"border-dashed"},{display:"Dotted",value:"border-dotted"},{display:"Double",value:"border-double"}]})]}),(0,n.jsx)(r9,{title:"Border Width",classNames:ey,breakpoint:null==(ee=eS.info)?void 0:ee.activeBreakpoint,presets:rW,prefix:"border",prefixT:"border-t",prefixR:"border-r",prefixB:"border-b",prefixL:"border-l",icon:(0,n.jsx)(X,{}),iconT:(0,n.jsx)($,{}),iconR:(0,n.jsx)(Q,{}),iconB:(0,n.jsx)(Y,{}),iconL:(0,n.jsx)(J,{}),allowIconSliding:!0,generate:(e,t)=>"number"==typeof t?rq[t]?"".concat(e,"-").concat(rq[t]):e:"".concat(e,"-[").concat(t,"]"),match:e=>{let t=e.match(/^(border|border-t|border-r|border-b|border-l)-([^-]+)$/);if(t){let e=t[1],n=rq.indexOf(t[2]);if(-1!==n)return[e,n];if(t[2].startsWith("[")&&t[2].endsWith("]"))return[e,t[2].slice(1,-1)]}let n=e.match(/^(border|border-t|border-r|border-b|border-l)$/);if(n){let e=n[1],t=rq.indexOf("");if(-1!==t)return[e,t]}return null},min:0,max:rq.length-1,onUpdate:ew})]}),(0,n.jsx)(rz,{title:"Appearance",children:(0,n.jsxs)("div",{className:"flex w-full flex-wrap gap-3",children:[(0,n.jsxs)("div",{className:"flex flex-1 flex-col gap-1.5",children:[(0,n.jsx)("label",{className:"text-label-12 select-none capitalize leading-4 opacity-60",children:"Opacity"}),(0,n.jsx)(r6,{title:"Opacity",classNames:ey,breakpoint:null==(eg=eS.info)?void 0:eg.activeBreakpoint,prefix:"opacity",defaultValue:100,step:1,presets:r2,icon:(0,n.jsx)(r.Alpha,{}),suffix:(0,n.jsx)("span",{className:"text-sm text-gray-500",children:"%"}),generate:(e,t)=>{if(0===t)return"opacity-0";if("number"==typeof t)return"opacity-".concat(5*t);let n=parseFloat(t);return isNaN(n)||n<0||n>100?null:"opacity-[".concat(n<1?n:n/100,"]")},match:e=>{let t=e.match(/^opacity-\[?([.0-9]+)\]?$/);if(t){let e=Number(t[1]);return["opacity",String(e<1?Math.floor(100*e):e)]}return null},min:0,max:100,onUpdate:ew})]}),(0,n.jsxs)("div",{className:"flex flex-1 flex-col gap-1.5",children:[(0,n.jsx)("label",{className:"text-label-12 select-none capitalize leading-4 opacity-60",children:"Radius"}),(0,n.jsx)(r5,{title:"Border Radius",onUpdate:ew,classNames:ey,breakpoint:null==(ev=eS.info)?void 0:ev.activeBreakpoint,icon:(0,n.jsx)(K,{}),type:"dropdown",match:e=>/^rounded-\[[\d.]+(px|em|rem|pt|%)\]$/.test(e),options:3===eE?[{display:(0,n.jsx)("span",{className:"text-gray-500",children:"Default"}),value:"",fallback:!0},{display:"None",value:"rounded-none"},{display:"Small",value:"rounded-sm"},{display:"Normal",value:"rounded"},{display:"Medium",value:"rounded-md"},{display:"Large",value:"rounded-lg"},{display:"Extra Large",value:"rounded-xl"},{display:"Double Extra Large",value:"rounded-2xl"},{display:"Triple Extra Large",value:"rounded-3xl"},{display:"Full",value:"rounded-full"}]:[{display:(0,n.jsx)("span",{className:"text-gray-500",children:"Default"}),value:"",fallback:!0},{display:"None",value:"rounded-none"},{display:"Extra Small",value:"rounded-xs"},{display:"Small",value:"rounded-sm"},{display:"Medium",value:"rounded-md"},{display:"Large",value:"rounded-lg"},{display:"Extra Large",value:"rounded-xl"},{display:"Double Extra Large",value:"rounded-2xl"},{display:"Triple Extra Large",value:"rounded-3xl"},{display:"Quadruple Extra Large",value:"rounded-4xl"},{display:"Full",value:"rounded-full"}]})]})]})}),(0,n.jsx)(rz,{title:"Shadow",children:(0,n.jsx)(r5,{title:"Shadow",onUpdate:ew,classNames:ey,breakpoint:null==(ex=eS.info)?void 0:ex.activeBreakpoint,icon:(0,n.jsx)(et,{}),type:"dropdown",options:3===eE?[{display:(0,n.jsx)("span",{className:"text-gray-500",children:"Default"}),value:"",fallback:!0},{display:"None",value:"shadow-none"},{display:"Small",value:"shadow-sm"},{display:"Normal",value:"shadow"},{display:"Medium",value:"shadow-md"},{display:"Large",value:"shadow-lg"},{display:"Extra Large",value:"shadow-xl"},{display:"Double Extra Large",value:"shadow-2xl"},{display:"Inner",value:"shadow-inner"}]:[{display:(0,n.jsx)("span",{className:"text-gray-500",children:"Default"}),value:"",fallback:!0},{display:"None",value:"shadow-none"},{display:"Extra Small",value:"shadow-xs"},{display:"Small",value:"shadow-sm"},{display:"Normal",value:"shadow"},{display:"Medium",value:"shadow-md"},{display:"Large",value:"shadow-lg"},{display:"Extra Large",value:"shadow-xl"}]})})]})}e.s(["ComponentEditor",()=>il],651280),e.s(["useDesignModeHistory",()=>ih],403928);var ic=p,iu=S,id=e.i(988118),ip=e.i(668887);function ih(){let{actions:e}=(0,ip.useCurrentBlockDesignMode)(),{pushUndoHistory:t,popUndoHistory:n,popRedoHistory:r,clearHistory:i}=e,a=(0,ic.useCallback)((e,n)=>{id.designModeInlineEditRef.current&&(n||"string"==typeof(n=id.designModeInlineEditRef.current.getContent(e)))&&t(e,n)},[t]);return(0,iu.useEventListener)("dm-undo",()=>n(id.designModeInlineEditRef)),(0,iu.useEventListener)("dm-redo",()=>r(id.designModeInlineEditRef)),(0,ic.useEffect)(()=>{let e=e=>{(e.metaKey||e.ctrlKey)&&("z"!==e.key||e.shiftKey?("y"===e.key||"z"===e.key&&e.shiftKey)&&(e.preventDefault(),r(id.designModeInlineEditRef)):(e.preventDefault(),n(id.designModeInlineEditRef)))};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[n,r]),{pushHistory:a,performUndo:()=>n(id.designModeInlineEditRef),performRedo:()=>r(id.designModeInlineEditRef),clearHistory:i}}e.s(["useDesignModeQueue",()=>ix],406766);var im=p,ig=ip,iv=e.i(780292);function ix(){let{atoms:e,actions:t}=(0,ig.useCurrentBlockDesignMode)(),{setLastFileContent:n,setSaveNextState:r,setLastIsPreview:i}=t,a=(0,iv.useAtomValue)(e.currentQueue),o=(0,iv.useAtomValue)(e.lastFileContent),s=(0,iv.useAtomValue)(e.saveNextState),l=(0,iv.useAtomValue)(e.lastIsPreview);return{queueVersion:(0,im.useCallback)((e,t,n)=>{var r;(0!==a.current.length||n())&&((null==(r=a.current[a.current.length-1])?void 0:r[0])===e?a.current=[...a.current.slice(0,-1),[e,t,n]]:a.current=[...a.current,[e,t,n]])},[a]),lastFileContent:o,saveNextState:s,lastIsPreview:l,currentQueue:a,setLastFileContent:n,setSaveNextState:r,setLastIsPreview:i}}e.s(["RootEditor",()=>iX],575110);var iy=n,ib=p,iw=n,ij=p;let iC=RegExp("([\\p{Ll}\\d])(\\p{Lu})","gu"),ik=RegExp("(\\p{Lu})([\\p{Lu}][\\p{Ll}])","gu"),iS=RegExp("(\\d)\\p{Ll}|(\\p{L})\\d","u"),iN=RegExp("[^\\p{L}\\d]+","giu"),iE="$1\0$2",iM="";function iI(e){let t=e.trim();t=(t=t.replace(iC,iE).replace(ik,iE)).replace(iN,"\0");let n=0,r=t.length;for(;"\0"===t.charAt(n);)n++;if(n===r)return[];for(;"\0"===t.charAt(r-1);)r--;return t.slice(n,r).split(/\0/g)}function iD(e){let t=iI(e);for(let e=0;e<t.length;e++){let r=t[e],i=iS.exec(r);if(i){var n;let a=i.index+(null!=(n=i[1])?n:i[2]).length;t.splice(e,1,r.slice(0,a),r.slice(a))}}return t}function iT(e,t){var n;let[r,i,a]=iR(e,t),o=iA(null==t?void 0:t.locale),s=iL(null==t?void 0:t.locale);return r+i.map(iP(o,s)).join(null!=(n=null==t?void 0:t.delimiter)?n:" ")+a}function iA(e){return!1===e?e=>e.toLowerCase():t=>t.toLocaleLowerCase(e)}function iL(e){return!1===e?e=>e.toUpperCase():t=>t.toLocaleUpperCase(e)}function iP(e,t){return n=>"".concat(t(n[0])).concat(e(n.slice(1)))}function iR(e){var t,n,r;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=null!=(t=i.split)?t:i.separateNumbers?iD:iI,o=null!=(n=i.prefixCharacters)?n:iM,s=null!=(r=i.suffixCharacters)?r:iM,l=0,c=e.length;for(;l<e.length;){let t=e.charAt(l);if(!o.includes(t))break;l++}for(;c>l;){let t=c-1,n=e.charAt(t);if(!s.includes(n))break;c=t}return[e.slice(0,l),a(e.slice(l,c)),e.slice(c)]}e.s(["useDesignModeTokens",()=>iF],938);var i_=iv,iO=ip;function iF(e){let{atoms:t}=(0,iO.useCurrentBlockDesignMode)();return e[(0,i_.useAtomValue)(t.previewTheme)]||e.light||{}}function iV(e){let{tokenName:t,designTokens:n,onColorChange:r}=e,i=iF(n),a=(0,ij.useMemo)(()=>iT(t),[t]),{displayedColorName:o,parsedColor:s}=(0,ij.useMemo)(()=>{var e;let n=i[t]||"";return{displayedColorName:n,parsedColor:null!=(e=e1(n))?e:null}},[i,t]);return(0,iw.jsx)(rB,{title:a,displayedColorName:o,parsedColor:s,colorTokens:[],onColorChange:e=>{r&&(null===e?r(t,i[t]||"",!1):r(t,rF(e),!0))},onTokensChange:()=>{},onPointerEnter:()=>{},onPointerLeave:()=>{},updateColorNameTextContent:()=>{},clearRevertPreview:()=>{},alphaEnabled:!1})}var iB=e.i(449381),iz=id,iH=e.i(671908),iU=iH;function iq(e,t,n,r){var i;let a,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"light",s=null,{path:l,content:c}=(0,iU.getGlobalsCssWithInlineEdit)(r);if(null===l&&(l="app/globals.css",c=":root {\n  ".concat(e,": ").concat(t,";\n}\n\n.dark {\n  ").concat(e,": ").concat(t,";\n}\n")),(null==c?void 0:c.includes(e))&&(s=l,a=c),!s||!a)return;let u=a.split("\n"),d=-1,p="",h=!1;for(let t=0;t<u.length;t++){let n=u[t].trim();if(("dark"===o?/^\s*\.dark\s*\{/:/^\s*:root\s*\{/).test(n)){h=!0;continue}if(h&&n.includes("}")){h=!1;continue}if(h&&u[t].includes(e)){d=t,p=u[t];break}}if(-1===d)return;let f=new RegExp("(\\s*)(".concat(e,"\\s*:\\s*)([^;]+)(;.*)?$")).exec(p);if(!f)return;let[m,g,v,x,y]=f,b=f.index||0,w="".concat(g).concat(v).concat(t).concat(y||"");null==(i=r.current)||i.inlineEdit(s,d+1,b+1,m.length,w,n)}var iW=ip,iZ=iv,iG=e.i(84079),iK=e.i(343632);function iX(e){let{designTokens:t,hasGlobalsCss:n}=e,r=(0,iB.useActiveBlockState)(),i=null==r?void 0:r.id,a=iF(t),{atoms:o}=(0,iW.useCurrentBlockDesignMode)(),s=(0,iZ.useAtomValue)(o.previewTheme),{queueVersion:l,lastIsPreview:c,setLastFileContent:u,setLastIsPreview:d,setSaveNextState:p}=ix(),{pushHistory:h}=ih(),f=(0,ib.useCallback)(function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=Date.now();l("CSS:"+e,o,()=>{if(!iz.designModeInlineEditRef.current||!i)return;let l="--".concat(e),f=a[e]||"";if(!r){if(n&&!c||!c&&!n){let{path:e,content:t}=(0,iH.getGlobalsCssWithInlineEdit)(iz.designModeInlineEditRef);(null==t?void 0:t.includes(l))&&u({file:e,content:t})}let{path:e}=(0,iH.getGlobalsCssWithInlineEdit)(iz.designModeInlineEditRef);e&&h(e)}n?d(!0):(d(!1),p(!0)),(0,iG.sendToIframeFromBlockId)(i,{type:"devtools_sync_design",payload:{type:"css-var",variable:l,value:t,prev:f}}),iq(l,t,o,iz.designModeInlineEditRef,s)})},[l,i,a,c,u,d,p,h,s]);return n?(0,iy.jsx)("div",{className:"flex-1 overflow-auto",children:(0,iy.jsxs)("div",{className:"flex flex-col",children:[(0,iy.jsx)(rz,{title:"Primary",children:(0,iy.jsxs)("div",{className:"flex w-full flex-wrap gap-3",children:[(0,iy.jsxs)("div",{className:"flex flex-1 flex-col gap-1.5",children:[(0,iy.jsx)("label",{className:"text-label-12 select-none capitalize leading-4 opacity-60",children:"Primary"}),(0,iy.jsx)(iV,{tokenName:"primary",designTokens:t,onColorChange:f})]}),(0,iy.jsxs)("div",{className:"flex flex-1 flex-col gap-1.5",children:[(0,iy.jsx)("label",{className:"text-label-12 select-none capitalize leading-4 opacity-60",children:"Primary Foreground"}),(0,iy.jsx)(iV,{tokenName:"primary-foreground",designTokens:t,onColorChange:f})]})]})}),(0,iy.jsx)(rz,{title:"Secondary",children:(0,iy.jsxs)("div",{className:"flex w-full flex-wrap gap-3",children:[(0,iy.jsxs)("div",{className:"flex flex-1 flex-col gap-1.5",children:[(0,iy.jsx)("label",{className:"text-label-12 select-none capitalize leading-4 opacity-60",children:"Secondary"}),(0,iy.jsx)(iV,{tokenName:"secondary",designTokens:t,onColorChange:f})]}),(0,iy.jsxs)("div",{className:"flex flex-1 flex-col gap-1.5",children:[(0,iy.jsx)("label",{className:"text-label-12 select-none capitalize leading-4 opacity-60",children:"Secondary Foreground"}),(0,iy.jsx)(iV,{tokenName:"secondary-foreground",designTokens:t,onColorChange:f})]})]})}),(0,iy.jsx)(rz,{title:"Accent",children:(0,iy.jsxs)("div",{className:"flex w-full flex-wrap gap-3",children:[(0,iy.jsxs)("div",{className:"flex flex-1 flex-col gap-1.5",children:[(0,iy.jsx)("label",{className:"text-label-12 select-none capitalize leading-4 opacity-60",children:"Accent"}),(0,iy.jsx)(iV,{tokenName:"accent",designTokens:t,onColorChange:f})]}),(0,iy.jsxs)("div",{className:"flex flex-1 flex-col gap-1.5",children:[(0,iy.jsx)("label",{className:"text-label-12 select-none capitalize leading-4 opacity-60",children:"Accent Foreground"}),(0,iy.jsx)(iV,{tokenName:"accent-foreground",designTokens:t,onColorChange:f})]})]})}),(0,iy.jsx)(rz,{title:"Base",children:(0,iy.jsxs)("div",{className:"flex w-full flex-wrap gap-3",children:[(0,iy.jsxs)("div",{className:"flex flex-1 flex-col gap-1.5",children:[(0,iy.jsx)("label",{className:"text-label-12 select-none capitalize leading-4 opacity-60",children:"Background"}),(0,iy.jsx)(iV,{tokenName:"background",designTokens:t,onColorChange:f})]}),(0,iy.jsxs)("div",{className:"flex flex-1 flex-col gap-1.5",children:[(0,iy.jsx)("label",{className:"text-label-12 select-none capitalize leading-4 opacity-60",children:"Foreground"}),(0,iy.jsx)(iV,{tokenName:"foreground",designTokens:t,onColorChange:f})]})]})}),(0,iy.jsx)(rz,{title:"Card",children:(0,iy.jsxs)("div",{className:"flex w-full flex-wrap gap-3",children:[(0,iy.jsxs)("div",{className:"flex flex-1 flex-col gap-1.5",children:[(0,iy.jsx)("label",{className:"text-label-12 select-none capitalize leading-4 opacity-60",children:"Card"}),(0,iy.jsx)(iV,{tokenName:"card",designTokens:t,onColorChange:f})]}),(0,iy.jsxs)("div",{className:"flex flex-1 flex-col gap-1.5",children:[(0,iy.jsx)("label",{className:"text-label-12 select-none capitalize leading-4 opacity-60",children:"Card Foreground"}),(0,iy.jsx)(iV,{tokenName:"card-foreground",designTokens:t,onColorChange:f})]})]})}),(0,iy.jsx)(rz,{title:"Popover",children:(0,iy.jsxs)("div",{className:"flex w-full flex-wrap gap-3",children:[(0,iy.jsxs)("div",{className:"flex flex-1 flex-col gap-1.5",children:[(0,iy.jsx)("label",{className:"text-label-12 select-none capitalize leading-4 opacity-60",children:"Popover"}),(0,iy.jsx)(iV,{tokenName:"popover",designTokens:t,onColorChange:f})]}),(0,iy.jsxs)("div",{className:"flex flex-1 flex-col gap-1.5",children:[(0,iy.jsx)("label",{className:"text-label-12 select-none capitalize leading-4 opacity-60",children:"Popover Foreground"}),(0,iy.jsx)(iV,{tokenName:"popover-foreground",designTokens:t,onColorChange:f})]})]})}),(0,iy.jsx)(rz,{title:"Muted",children:(0,iy.jsxs)("div",{className:"flex w-full flex-wrap gap-3",children:[(0,iy.jsxs)("div",{className:"flex flex-1 flex-col gap-1.5",children:[(0,iy.jsx)("label",{className:"text-label-12 select-none capitalize leading-4 opacity-60",children:"Muted"}),(0,iy.jsx)(iV,{tokenName:"muted",designTokens:t,onColorChange:f})]}),(0,iy.jsxs)("div",{className:"flex flex-1 flex-col gap-1.5",children:[(0,iy.jsx)("label",{className:"text-label-12 select-none capitalize leading-4 opacity-60",children:"Muted Foreground"}),(0,iy.jsx)(iV,{tokenName:"muted-foreground",designTokens:t,onColorChange:f})]})]})}),(0,iy.jsx)(rz,{title:"Destructive",children:(0,iy.jsxs)("div",{className:"flex w-full flex-wrap gap-3",children:[(0,iy.jsxs)("div",{className:"flex flex-1 flex-col gap-1.5",children:[(0,iy.jsx)("label",{className:"text-label-12 select-none capitalize leading-4 opacity-60",children:"Destructive"}),(0,iy.jsx)(iV,{tokenName:"destructive",designTokens:t,onColorChange:f})]}),(0,iy.jsxs)("div",{className:"flex flex-1 flex-col gap-1.5",children:[(0,iy.jsx)("label",{className:"text-label-12 select-none capitalize leading-4 opacity-60",children:"Destructive Foreground"}),(0,iy.jsx)(iV,{tokenName:"destructive-foreground",designTokens:t,onColorChange:f})]})]})}),(0,iy.jsxs)(rz,{title:"Border & Input",children:[(0,iy.jsxs)("div",{className:"flex w-full flex-wrap gap-3",children:[(0,iy.jsxs)("div",{className:"flex flex-1 flex-col gap-1.5",children:[(0,iy.jsx)("label",{className:"text-label-12 select-none capitalize leading-4 opacity-60",children:"Border"}),(0,iy.jsx)(iV,{tokenName:"border",designTokens:t,onColorChange:f})]}),(0,iy.jsxs)("div",{className:"flex flex-1 flex-col gap-1.5",children:[(0,iy.jsx)("label",{className:"text-label-12 select-none capitalize leading-4 opacity-60",children:"Input"}),(0,iy.jsx)(iV,{tokenName:"input",designTokens:t,onColorChange:f})]})]}),(0,iy.jsxs)("div",{className:"flex w-full flex-wrap gap-3",children:[(0,iy.jsxs)("div",{className:"flex flex-1 flex-col gap-1.5",children:[(0,iy.jsx)("label",{className:"text-label-12 select-none capitalize leading-4 opacity-60",children:"Ring"}),(0,iy.jsx)(iV,{tokenName:"ring",designTokens:t,onColorChange:f})]}),(0,iy.jsx)("div",{className:"flex flex-1 flex-col gap-1.5"})]})]}),(0,iy.jsxs)(rz,{title:"Chart",children:[(0,iy.jsxs)("div",{className:"flex w-full flex-wrap gap-3",children:[(0,iy.jsxs)("div",{className:"flex flex-1 flex-col gap-1.5",children:[(0,iy.jsx)("label",{className:"text-label-12 select-none capitalize leading-4 opacity-60",children:"Chart 1"}),(0,iy.jsx)(iV,{tokenName:"chart-1",designTokens:t,onColorChange:f})]}),(0,iy.jsxs)("div",{className:"flex flex-1 flex-col gap-1.5",children:[(0,iy.jsx)("label",{className:"text-label-12 select-none capitalize leading-4 opacity-60",children:"Chart 2"}),(0,iy.jsx)(iV,{tokenName:"chart-2",designTokens:t,onColorChange:f})]})]}),(0,iy.jsxs)("div",{className:"flex w-full flex-wrap gap-3",children:[(0,iy.jsxs)("div",{className:"flex flex-1 flex-col gap-1.5",children:[(0,iy.jsx)("label",{className:"text-label-12 select-none capitalize leading-4 opacity-60",children:"Chart 3"}),(0,iy.jsx)(iV,{tokenName:"chart-3",designTokens:t,onColorChange:f})]}),(0,iy.jsxs)("div",{className:"flex flex-1 flex-col gap-1.5",children:[(0,iy.jsx)("label",{className:"text-label-12 select-none capitalize leading-4 opacity-60",children:"Chart 4"}),(0,iy.jsx)(iV,{tokenName:"chart-4",designTokens:t,onColorChange:f})]})]}),(0,iy.jsxs)("div",{className:"flex w-full flex-wrap gap-3",children:[(0,iy.jsxs)("div",{className:"flex flex-1 flex-col gap-1.5",children:[(0,iy.jsx)("label",{className:"text-label-12 select-none capitalize leading-4 opacity-60",children:"Chart 5"}),(0,iy.jsx)(iV,{tokenName:"chart-5",designTokens:t,onColorChange:f})]}),(0,iy.jsx)("div",{className:"flex flex-1 flex-col gap-1.5"})]})]}),(0,iy.jsxs)(rz,{title:"Sidebar",children:[(0,iy.jsxs)("div",{className:"flex w-full flex-wrap gap-3",children:[(0,iy.jsxs)("div",{className:"flex flex-1 flex-col gap-1.5",children:[(0,iy.jsx)("label",{className:"text-label-12 select-none capitalize leading-4 opacity-60",children:"Sidebar"}),(0,iy.jsx)(iV,{tokenName:"sidebar",designTokens:t,onColorChange:f})]}),(0,iy.jsxs)("div",{className:"flex flex-1 flex-col gap-1.5",children:[(0,iy.jsx)("label",{className:"text-label-12 select-none capitalize leading-4 opacity-60",children:"Sidebar Foreground"}),(0,iy.jsx)(iV,{tokenName:"sidebar-foreground",designTokens:t,onColorChange:f})]})]}),(0,iy.jsxs)("div",{className:"flex w-full flex-wrap gap-3",children:[(0,iy.jsxs)("div",{className:"flex flex-1 flex-col gap-1.5",children:[(0,iy.jsx)("label",{className:"text-label-12 select-none capitalize leading-4 opacity-60",children:"Sidebar Primary"}),(0,iy.jsx)(iV,{tokenName:"sidebar-primary",designTokens:t,onColorChange:f})]}),(0,iy.jsxs)("div",{className:"flex flex-1 flex-col gap-1.5",children:[(0,iy.jsx)("label",{className:"text-label-12 select-none capitalize leading-4 opacity-60",children:"Sidebar Primary Foreground"}),(0,iy.jsx)(iV,{tokenName:"sidebar-primary-foreground",designTokens:t,onColorChange:f})]})]}),(0,iy.jsxs)("div",{className:"flex w-full flex-wrap gap-3",children:[(0,iy.jsxs)("div",{className:"flex flex-1 flex-col gap-1.5",children:[(0,iy.jsx)("label",{className:"text-label-12 select-none capitalize leading-4 opacity-60",children:"Sidebar Accent"}),(0,iy.jsx)(iV,{tokenName:"sidebar-accent",designTokens:t,onColorChange:f})]}),(0,iy.jsxs)("div",{className:"flex flex-1 flex-col gap-1.5",children:[(0,iy.jsx)("label",{className:"text-label-12 select-none capitalize leading-4 opacity-60",children:"Sidebar Accent Foreground"}),(0,iy.jsx)(iV,{tokenName:"sidebar-accent-foreground",designTokens:t,onColorChange:f})]})]}),(0,iy.jsxs)("div",{className:"flex w-full flex-wrap gap-3",children:[(0,iy.jsxs)("div",{className:"flex flex-1 flex-col gap-1.5",children:[(0,iy.jsx)("label",{className:"text-label-12 select-none capitalize leading-4 opacity-60",children:"Sidebar Border"}),(0,iy.jsx)(iV,{tokenName:"sidebar-border",designTokens:t,onColorChange:f})]}),(0,iy.jsxs)("div",{className:"flex flex-1 flex-col gap-1.5",children:[(0,iy.jsx)("label",{className:"text-label-12 select-none capitalize leading-4 opacity-60",children:"Sidebar Ring"}),(0,iy.jsx)(iV,{tokenName:"sidebar-ring",designTokens:t,onColorChange:f})]})]})]})]})}):(0,iy.jsxs)("div",{className:"flex size-full flex-col items-center justify-center gap-4 px-4 text-center",children:[(0,iy.jsx)("div",{className:"border-alpha-200 material-small flex size-8 flex-col items-center justify-center rounded-md border text-gray-500",children:(0,iy.jsx)(iK.CodeWrap,{})}),(0,iy.jsx)("p",{className:"text-label-14 max-w-48 text-pretty text-gray-900",children:"Apply a theme or ask v0 to make one for you to edit design tokens."})]})}},588385,e=>{"use strict";var t=e.i(150015);function n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.fromEntries(Object.entries(e).map(e=>{let[t,n]=e;return[t.startsWith("--")?t.slice(2):t,n]}))}function r(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{type:i="registry:theme",description:a,title:o,author:s}=r,l={...n.common,...n.light},c=n.dark,u={name:e,type:i,...a&&{description:a},...o&&{title:o},...s&&{author:s},cssVars:{...Object.keys(l).length>0&&{light:l},...Object.keys(c).length>0&&{dark:c}}};try{(0,t.parseRegistryItem)(u)}catch(e){throw console.error(e),Error("Invalid registry item")}return u}function i(e,t,n){return{name:e,homepage:t,items:n.map(e=>{let{name:t,style:n,options:i={}}=e;return r(t,n,i)})}}e.s(["generateRegistryFromStyles",()=>i,"stripDash",()=>n])},41806,e=>{"use strict";let t=(0,e.i(605528).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M8.75 0.75V0H7.25V0.75V2V2.75H8.75V2V0.75ZM11.182 3.75732L11.7123 3.22699L12.0659 2.87344L12.5962 2.34311L13.6569 3.40377L13.1265 3.9341L12.773 4.28765L12.2426 4.81798L11.182 3.75732ZM8 10.5C9.38071 10.5 10.5 9.38071 10.5 8C10.5 6.61929 9.38071 5.5 8 5.5C6.61929 5.5 5.5 6.61929 5.5 8C5.5 9.38071 6.61929 10.5 8 10.5ZM8 12C10.2091 12 12 10.2091 12 8C12 5.79086 10.2091 4 8 4C5.79086 4 4 5.79086 4 8C4 10.2091 5.79086 12 8 12ZM13.25 7.25H14H15.25H16V8.75H15.25H14H13.25V7.25ZM0.75 7.25H0V8.75H0.75H2H2.75V7.25H2H0.75ZM2.87348 12.0659L2.34315 12.5962L3.40381 13.6569L3.93414 13.1265L4.28769 12.773L4.81802 12.2426L3.75736 11.182L3.22703 11.7123L2.87348 12.0659ZM3.75735 4.81798L3.22702 4.28765L2.87347 3.9341L2.34314 3.40377L3.4038 2.34311L3.93413 2.87344L4.28768 3.22699L4.81802 3.75732L3.75735 4.81798ZM12.0659 13.1265L12.5962 13.6569L13.6569 12.5962L13.1265 12.0659L12.773 11.7123L12.2426 11.182L11.182 12.2426L11.7123 12.773L12.0659 13.1265ZM8.75 13.25V14V15.25V16H7.25V15.25V14V13.25H8.75Z" fill="currentColor"/>');e.s(["Sun",0,t])},119317,444346,79271,e=>{"use strict";e.s(["FullChatModeHeader",()=>eY,"useHistoryPanel",()=>e$],119317);var t=e.i(832520),n=e.i(668887),r=e.i(117803),i=e.i(449381),a=e.i(534607),o=e.i(297239),s=e.i(92479),l=e.i(584497),c=e.i(323194),u=e.i(32170);e.i(904347);var d=e.i(37737),p=e.i(418929),h=e.i(200407),f=e.i(205341),m=e.i(780292),g=e.i(176248),v=e.i(301331),x=e.i(235009),y=e.i(996174),b=e.i(443265),w=e.i(262553),j=e.i(519738);e.s(["DesignModeEditor",()=>eC,"DesignModeTargetButton",()=>eI],444346);var C=t,k=e.i(615067),S=e.i(86448),N=e.i(896608),E=e.i(978036),M=e.i(850722),I=e.i(634066),D=e.i(163014),T=h,A=e.i(295224),L=e.i(988118),P=e.i(504066),R=e.i(304649),_=g;e.i(563948);var O=e.i(407562),F=e.i(556355),V=e.i(53223),B=e.i(351853),z=e.i(889938),H=e.i(330136),U=e.i(577247),q=e.i(242759),W=e.i(631972),Z=n,G=r,K=p,X=i,$=e.i(973817),Y=e.i(84079),J=e.i(66990),Q=e.i(787360),ee=e.i(651280),et=e.i(403928),en=e.i(406766),er=m,ei=e.i(284546),ea=e.i(575110),eo=h,es=e.i(588385);function el(e){return"object"==typeof e&&e&&"default"in e&&"dark"in e}function ec(e){return{designTokens:(0,eo.useMemo)(()=>{let t=null==e?void 0:e.dsTokens;return el(t)?{common:{},light:(0,es.stripDash)(t.default),dark:(0,es.stripDash)(t.dark)}:{common:{},light:{},dark:{}}},[e])}}var eu=t,ed=e.i(41806),ep=e.i(856908),eh=e.i(644471),ef=y,em=R,eg=n,ev=m,ex=L;function ey(){let{atoms:e,actions:t}=(0,eg.useCurrentBlockDesignMode)(),n=(0,ev.useAtomValue)(e.previewTheme);return(0,eu.jsx)(eh.Tabs,{variant:"secondary",onValueChange:()=>{t.setPreviewTheme("light"===n?"dark":"light",ex.designModeInlineEditRef)},value:n,children:(0,eu.jsxs)(eh.TabsList,{className:(0,em.cn)("h-6 overflow-hidden rounded-full border p-0 focus-within:overflow-visible [&>[role=tab]]:h-6 [&>[role=tab]]:w-6","[&>[role=tab]>.absolute]:-inset-px [&>[role=tab]>.absolute]:rounded-full [&>[role=tab]>.absolute]:border [&>[role=tab]>.absolute]:bg-transparent"),children:[(0,eu.jsx)(ef.Tooltip,{content:"Light",children:(0,eu.jsxs)(eh.TabsTrigger,{className:"[&>div]:shrink-0",value:"light",children:[(0,eu.jsx)(ed.Sun,{size:12}),(0,eu.jsx)("span",{className:"sr-only",children:"Light"})]})}),(0,eu.jsx)(ef.Tooltip,{content:"Dark",children:(0,eu.jsxs)(eh.TabsTrigger,{className:"[&>div]:shrink-0",value:"dark",children:[(0,eu.jsx)(ep.Moon,{size:12}),(0,eu.jsx)("span",{className:"sr-only",children:"Dark"})]})})]})})}var eb=e.i(938),ew=e.i(671908),ej=e.i(926224);function eC(){return(0,Z.useDesignModeEnabled)()?(0,C.jsx)(e_,{}):null}function ek(e){let{children:t,className:n}=e;return(0,C.jsx)("div",{className:(0,R.cn)("material-medium bg-background border border-alpha-200 rounded-[8px] absolute inset-0 z-10 overflow-auto mb-2 flex flex-col",n),children:t})}function eS(e){let{icon:t,description:n}=e;return(0,C.jsxs)("div",{className:"flex size-full flex-col items-center justify-center gap-4 px-4 text-center",children:[(0,C.jsx)("div",{className:"border-alpha-200 material-small flex size-8 flex-col items-center justify-center rounded-md border text-gray-500",children:t}),(0,C.jsx)("p",{className:"text-label-14 max-w-48 text-pretty text-gray-900",children:n})]})}function eN(e){let{children:t}=e;return(0,C.jsx)("div",{className:"border-alpha-200 h-13 flex w-full items-center justify-between gap-3 border-b px-3 py-3",children:t})}function eE(e){let{children:t}=e;return(0,C.jsx)("div",{className:"select-none flex items-center gap-1",children:t})}function eM(e){let{type:t,name:n,active:r,onClick:i}=e,a=i?"button":"div",o="root"===t,s="element"===t,l=r||"element"===t,c="placeholder"===t;return(0,C.jsxs)(a,{onClick:i,className:(0,R.cn)("flex w-min items-center justify-center gap-1.5 h-6.5 whitespace-nowrap rounded-md px-2 py-0.5 font-mono text-[13px]",l?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700",c?"border border-dashed border-gray-300 w-24 bg-transparent":"border-alpha-200 border"),children:[o?(0,C.jsx)(I.Window,{}):null,s?(0,C.jsx)(H.Diamond,{}):null,o?(0,C.jsx)("span",{children:"Page"}):s?(0,C.jsx)("span",{children:n}):null]})}function eI(){let{atoms:e}=(0,Z.useCurrentBlockDesignMode)(),t=(0,er.useAtomValue)(e.selectElementEnabled),{toggleSelectElement:n}=(0,G.useDesignModeToggle)(),r=(0,X.useActiveBlockState)(),{activeTab:i}=(0,ei.useActiveTab)();return"preview"===i&&r?(0,C.jsx)(_.Button,{variant:t?"blue-ghost":"ghost",size:"sm",tooltip:"Select an Element",className:"size-7 rounded-md",onClick:n,children:(0,C.jsx)(D.Crosshair,{})}):null}function eD(e,t,n,r){return e.slice(0,t)+r+e.slice(t+n)}let eT=(0,B.default)(()=>{(0,V.track)("DesignModeEdit",{type:"className"})},500),eA=(0,B.default)(()=>{(0,V.track)("DesignModeEdit",{type:"icon"})},500),eL=(0,B.default)(()=>{(0,V.track)("DesignModeEdit",{type:"content"})},500),eP=(0,B.default)(()=>{(0,V.track)("DesignModeEdit",{type:"prop"})},500),eR=(0,B.default)(()=>{(0,V.track)("DesignModeAction",{type:"select"})},500);function e_(){let[e,t]=(0,T.useState)({parts:null,selected:!1,info:void 0}),n=(0,A.useLatest)(e),r=(0,T.useRef)(null),{designTokens:i}=ec(e.info),a=(0,eb.useDesignModeTokens)(i),o=(0,T.useMemo)(()=>Object.keys(a).length>0,[a]),{dse:s}=(0,q.useFlags)(),{atoms:l,actions:c}=(0,Z.useCurrentBlockDesignMode)(),u=(0,er.useAtomValue)(l.selectElementEnabled),{setSelectElementEnabled:d}=(0,G.useDesignModeToggle)(),p=(0,X.useActiveBlockState)(),h=null==p?void 0:p.id,f=(0,T.useMemo)(()=>{if(!p)return!1;let e="code-project"===p.type?(0,ej.parseMultiFileSource)({source:p.source,blockType:"code-project",blockId:p.id}):[];return!!(0,ew.getGlobalsCssFromFiles)(e)},[p]),{pushHistory:m}=(0,et.useDesignModeHistory)(),{queueVersion:g,lastFileContent:v,saveNextState:x,lastIsPreview:y,currentQueue:b,setLastFileContent:w,setLastIsPreview:j,setSaveNextState:I}=(0,en.useDesignModeQueue)();(0,T.useEffect)(()=>(window.dispatchEvent(new CustomEvent("hide-saved-changes")),()=>{window.dispatchEvent(new CustomEvent("show-saved-changes"))}),[]);let D=(0,T.useCallback)(function(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Date.now();g("C:"+e,a,()=>{var o,s;if(!L.designModeInlineEditRef.current||!n.current.parts)return;if(!i&&(r&&!y||!y&&!r)){let e=n.current.file,t=null!=(s=L.designModeInlineEditRef.current.getContent(e))?s:"";w({file:e,content:t})}r?j(!0):(j(!1),I(!0));let l=n.current.parts[e].value;return l.startsWith(" ")&&(t=" "+t),l.endsWith(" ")&&(t+=" "),L.designModeInlineEditRef.current.postMessage({type:"devtools_sync_design",payload:{type:"class",prev:l,value:t}}),L.designModeInlineEditRef.current.inlineEdit(n.current.file,n.current.parts[e].lineNumber,n.current.parts[e].columnNumber+ +!!n.current.defined,n.current.defined?l.length:0,n.current.defined?t:" ".concat((null==(o=n.current.info)?void 0:o.classAttributeName)||"className","=").concat(JSON.stringify(t)),a),eT(),!0})},[g,n,y,w,j,I]),B=(0,T.useCallback)((e,t)=>{let r=Date.now();g("I",r,()=>{if(!L.designModeInlineEditRef.current||!n.current.parts||!n.current.content)return;t||m(n.current.content.file);let i="string"===n.current.content.type?JSON.stringify(e).slice(1,-1).replace(RegExp("(?<!\\\\)['\"`$]","g"),"\\$&"):"template"===n.current.content.type?e.replace(RegExp("(?<!\\\\)['\"`$]","g"),"\\$&"):e;return L.designModeInlineEditRef.current.postMessage({type:"devtools_sync_design",payload:{type:"content",value:e}}),L.designModeInlineEditRef.current.inlineEdit(n.current.content.file,n.current.content.line,n.current.content.column,n.current.content.len,i,r),eL(),!0})},[g,n,m]),H=(0,T.useCallback)((e,t)=>{g("L",Date.now(),()=>{if(!n.current.parts||!n.current.lib||!L.designModeInlineEditRef.current)return;let r=n.current.lib,i=L.designModeInlineEditRef.current.getContent(n.current.file);if(!i)return;t||m(n.current.file,i);let a=i,o=n.current.name.length;r.closeAt&&(a=eD(i,r.closeAt,o,e));let s=(a=eD(a,r.openAt,o,e)).slice(r.declStart,r.declEnd),l=new RegExp("".concat(r.name,"\\s+as\\s+").concat(n.current.name));if(r.singleRef){let t=l.test(s)?s.replace(l,e):s.replace(r.name,e);a=eD(a,r.declStart,s.length,t)}else{var c,u;let t=null!=(u=null==(c=s.match(l))?void 0:c.index)?u:s.indexOf(r.name);a=eD(a,r.declStart,s.length,s.slice(0,t)+e+","+s.slice(t))}return L.designModeInlineEditRef.current.inlineEdit(n.current.file,0,0,0,a,Date.now(),void 0,[0,i.length]),eA(),!0})},[g,n,m]),ei=(0,T.useCallback)((e,t,r)=>{g("P:"+e,Date.now(),()=>{if(!n.current.parts||!n.current.lib||!L.designModeInlineEditRef.current)return;let i=n.current.lib;if(!i.props)return;let a=e in i.props?i.props[e]:null,o="";a||(a=["",i.openAt+i.name.length],o=" ".concat(e,"="));let s=L.designModeInlineEditRef.current.getContent(n.current.file);if(!s)return;r||m(n.current.file,s);let l=s.slice(0,a[1])+o+JSON.stringify(t)+s.slice(a[1]+a[0].length);return L.designModeInlineEditRef.current.inlineEdit(n.current.file,0,0,0,l,Date.now(),void 0,[0,s.length]),eP(),!0})},[g,n,m]),{actions:eo}=(0,K.useCurrentChatPrompt)(),{setRefinementElementSelected:es,clearRefinementElementSelected:el}=eo,eu=(0,T.useCallback)(e=>{if((0,V.track)("DesignModeAction",{type:"delete"}),L.designModeInlineEditRef.current&&e.file){let t=L.designModeInlineEditRef.current.getContent(e.file);m(e.file,t),L.designModeInlineEditRef.current.inlineEdit(e.file,0,0,0,e.jsxRoot?"null":"",Date.now(),void 0,[e.start,e.end])}},[m]);(0,U.useMessage)(e=>{let{data:i}=e;if(i&&"object"==typeof i&&i.__v0_remote__)switch(i.type){case"devtools_selected_state":var a,o;if(JSON.stringify(i)===JSON.stringify(n.current))return;r.current=e.source,t(i),c.initializePreviewTheme((null==(a=i.info)?void 0:a.currentTheme)||"light"),n.current=i,x&&v&&(m(v.file,v.content),I(!1),j(!1),w(null));let s=null==(o=L.designModeInlineEditRef.current)?void 0:o.getContent(i.file||"never_match");if(i.name&&s){eR();let{sourceContext:e,componentName:t}=(0,z.structureRefinementData)({event:{data:{line:i.line,column:i.column}},file:{source:s}});es({sourceContext:e,line:i.line,column:i.column,componentName:t,file:i.file})}else el();let l=i.version;for(;b.current.length&&b.current[0][1]<=l;)b.current.shift();if(b.current.length){let[e,t,n]=b.current[0];n()}break;case"devtools_copy":if((0,V.track)("DesignModeAction",{type:"copy"}),L.designModeInlineEditRef.current&&i.file){let e=L.designModeInlineEditRef.current.getContent(i.file);if("string"==typeof e){(0,P.copy)(e.slice(i.start,i.end)),O.toast.success("Component code copied to clipboard");break}}O.toast.error("Failed to copy component code");break;case"devtools_delete":eu(i);break;case"devtools_goto":(0,V.track)("DesignModeAction",{type:"goto"}),L.designModeInlineEditRef.current&&i.file&&L.designModeInlineEditRef.current.jumpToFile(i.file,i.line,i.column)}},[es,el,n,m]),(0,T.useEffect)(()=>{s&&h&&!u&&null===e.parts&&!e.selected&&(0,Y.sendToIframeFromBlockId)(h,{type:"devtools_query_root"})},[s,h,e,u]);let ed=(0,T.useMemo)(()=>e.parts?e.parts.map(e=>{let{value:t}=e;return t.split(" ").map(e=>e.trim()).filter(Boolean)}):[],[e.parts]),ep=(0,T.useMemo)(()=>{let e=Q.DEFAULT_CLASS_NAMES_INFO;return ed.forEach(t=>{for(let n of t)n.startsWith("gap-")?e.gap=!0:n.startsWith("space-")?e.space=!0:"flex"===n?e.flex=!0:"grid"===n?e.grid=!0:n.startsWith("w-")||n.startsWith("h-")||n.startsWith("size-")?e.size=!0:("flex-col"===n||"flex-col-reverse"===n)&&(e.flexColumn=!0)}),!e.space&&(e.gap||e.flex||e.grid)&&(e.showGap=!0),e},[ed]);if(null===e.parts)return e.selected?(0,C.jsx)(ek,{children:(0,C.jsx)(eS,{icon:(0,C.jsx)(S.Question,{}),description:"The selected element cannot be edited"})}):s?u||!o&&f?(0,C.jsxs)(ek,{children:[(0,C.jsx)(eN,{children:(0,C.jsxs)(eE,{children:[(0,C.jsx)(eM,{type:"root",active:!0,onClick:()=>d(!1)}),(0,C.jsx)($.HeaderSlash,{}),(0,C.jsx)(eM,{type:"placeholder",active:!1})]})}),(0,C.jsxs)("div",{className:"flex size-full flex-col items-center justify-center gap-4 px-4 text-center",children:[(0,C.jsx)("div",{className:"border-alpha-200 material-small flex size-8 flex-col items-center justify-center rounded-md border text-gray-500",children:(0,C.jsx)(k.CursorClick,{})}),(0,C.jsx)("p",{className:"text-label-14 max-w-48 text-pretty text-gray-900",children:"Select an element on the preview to make changes"})]})]}):(0,C.jsxs)(ek,{children:[(0,C.jsxs)(eN,{children:[(0,C.jsx)(eE,{children:(0,C.jsx)(eM,{type:"root",active:!0})}),(0,C.jsx)(ey,{})]}),(0,C.jsx)("div",{className:"flex p-2",children:(0,C.jsx)(W.DesignSystemButton,{})}),(0,C.jsx)(J.Separator,{className:"bg-alpha-200"}),(0,C.jsx)(ea.RootEditor,{designTokens:i,hasGlobalsCss:f})]}):u?(0,C.jsx)(ek,{children:(0,C.jsxs)("div",{className:"flex size-full flex-col items-center justify-center gap-4 px-4 text-center",children:[(0,C.jsx)("div",{className:"border-alpha-200 material-small flex size-8 flex-col items-center justify-center rounded-md border text-gray-500",children:(0,C.jsx)(k.CursorClick,{})}),(0,C.jsx)("p",{className:"text-label-14 max-w-48 text-pretty text-gray-900",children:"Select an element on the preview to make changes"})]})}):(0,C.jsx)(ek,{children:(0,C.jsx)(eS,{icon:(0,C.jsx)(k.CursorClick,{}),description:"Enable element selection to make changes"})});return(0,C.jsx)(ek,{children:(0,C.jsxs)("div",{className:"w-full",children:[(0,C.jsxs)(eN,{children:[(0,C.jsxs)(eE,{children:[s&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(eM,{type:"root",active:!1,onClick:()=>{d(!1),h&&(0,Y.sendToIframeFromBlockId)(h,{type:"devtools_deselect"})}}),(0,C.jsx)($.HeaderSlash,{})]}),(0,C.jsx)(eM,{type:"element",name:e.name})]}),(0,C.jsxs)(F.DropdownMenu,{children:[(0,C.jsx)(F.DropdownMenuTrigger,{asChild:!0,className:(0,R.cn)({}),children:(0,C.jsx)(_.Button,{size:"sm",variant:"ghost",className:"size-7 rounded-md",children:(0,C.jsx)(N.MoreHorizontal,{})})}),(0,C.jsx)(F.DropdownMenuContent,{align:"end",side:"bottom",sideOffset:4,children:(0,C.jsxs)(F.DropdownMenuGroup,{children:[(0,C.jsx)(F.DropdownMenuItem,{asChild:!0,children:(0,C.jsxs)(_.Button,{size:"sm",variant:"ghost",className:"justify-start",onClick:()=>{(0,V.track)("DesignModeAction",{type:"goto"}),L.designModeInlineEditRef.current&&n.current.parts&&L.designModeInlineEditRef.current.jumpToFile(n.current.file,n.current.line,n.current.column)},children:[(0,C.jsx)(k.CursorClick,{}),"Go to code"]})}),(0,C.jsx)(F.DropdownMenuItem,{asChild:!0,children:(0,C.jsxs)(_.Button,{size:"sm",variant:"ghost",className:"justify-start",onClick:()=>{if(L.designModeInlineEditRef.current&&n.current.parts){let e=L.designModeInlineEditRef.current.getContent(n.current.file);if("string"==typeof e){(0,P.copy)(e.slice(n.current.start,n.current.end)),O.toast.success("Component code copied to clipboard");return}}O.toast.error("Failed to copy component code")},children:[(0,C.jsx)(E.Copy,{}),"Copy Component Code"]})}),(0,C.jsx)(F.DropdownMenuItem,{asChild:!0,variant:"destructive",children:(0,C.jsxs)(_.Button,{size:"sm",variant:"ghost",className:"justify-start",onClick:()=>{n.current.parts&&eu({file:n.current.file,start:n.current.start,end:n.current.end,jsxRoot:n.current.jsxRoot})},children:[(0,C.jsx)(M.Trash,{}),"Delete Component"]})})]})})]})]}),(0,C.jsx)(ee.ComponentEditor,{classNames:ed,classNamesInfo:ep,handleClassUpdate:D,handleContentUpdate:B,handleIconUpdate:H,handlePropUpdate:ei,selected:e})]},e.key)})}var eO=t,eF=h,eV=e.i(923510);let eB=(0,eF.createContext)(null);function ez(e){let{children:t,id:n,noBackground:r,allowAutoCollapse:i}=e,a=(0,eF.useMemo)(()=>({id:n,noBackground:r,allowAutoCollapse:i}),[n,r,i]);return(0,eO.jsx)(eB.Provider,{value:a,children:t})}let eH=(0,eF.createContext)(null);function eU(e){let{children:t,layoutId:n,atoms:{panelsLayoutAtom:r,mobilePanelAtom:i}}=e,a=(0,eF.useMemo)(()=>({atoms:(0,eV.getPanelLayoutAtoms)(n,{panelsLayoutAtom:r,mobilePanelAtom:i}),actions:(0,eV.getPanelLayoutActions)(n,{panelsLayoutAtom:r,mobilePanelAtom:i}),layoutId:n}),[n,r,i]);return(0,eO.jsx)(eH.Provider,{value:a,children:t})}function eq(){let e=(0,eF.useContext)(eH);if(!e)throw Error("usePanelLayout must be used within a PanelLayoutProvider");let{atoms:t,actions:n,layoutId:r}=e;return(0,eF.useMemo)(()=>({atoms:t,actions:n,layoutId:r}),[t,n,r])}e.s(["PanelContextProvider",()=>ez,"PanelLayoutProvider",()=>eU,"usePanelLayout",()=>eq],79271);var eW=e.i(605528),eZ=e.i(569543),eG=R,eK=e.i(385671);let eX=(0,f.atom)(!1);function e$(){let[e,t]=(0,m.useAtom)(eX);return[e,t]}function eY(){let{chatId:e}=(0,s.useChatId)(),{user:f}=(0,u.useUser)(),{setShowSignInDialog:C}=(0,c.useSignInDialog)(),{canWriteToChat:k}=(0,l.useChatMetadata)(e),S=(0,n.useDesignModeEnabled)(),{setDesignModeEnabled:N,setSelectElementEnabled:E}=(0,r.useDesignModeToggle)(),M=(0,i.useActiveBlockState)(),I=null==M?void 0:M.id,D=(0,o.useT)(),T=(0,a.useMac)(),{actions:A}=eq(),{actions:L}=(0,p.useCurrentChatPrompt)(),P=(0,eK.getChatLayoutAtoms)(),R=(0,m.useAtomValue)(P.isChatOnRight),{isReadOnlyMode:_}=(0,w.useReadOnlyMode)(),{currentVersion:O}=(0,j.useBlockVersionInfo)(I),F=e&&(null==M?void 0:M.type)==="code-project",V=S&&I?"design":"chat",{actions:B}=(0,eK.useChatLayout)(),z=e=>{"design"===e?(E(!0),B.setActiveTabIntent("preview")):(N(!1),L.focusPrompt())},H=(0,h.useMemo)(()=>f?!k&&I?()=>{(0,d.openDialog)({type:"forkBlock",data:{blockId:I,page:"chat",canWriteToChat:!!k}})}:void 0:()=>C({content:!1}),[f,C,k,I]);if(!F)return null;let U=_?(0,t.jsxs)("span",{className:"max-w-64",children:["Design mode is only available on the latest version. Currently viewing v",O,"."]}):(0,t.jsxs)("span",{className:"inline-flex items-center gap-2",children:[(0,t.jsx)("span",{children:D("designMode.tooltip")}),(0,t.jsxs)(b.KbdGroup,{children:[(0,t.jsx)(b.Kbd,{children:T?"⌥":"Alt"}),(0,t.jsx)(b.Kbd,{children:"D"})]})]});return(0,t.jsxs)("div",{className:(0,eG.cn)("flex h-12 items-center gap-2 pr-2",R?"sm:pl-2 sm:pr-0":"sm:pr-2"),children:[(0,t.jsxs)(x.TabsToggle,{className:"hidden sm:flex",defaultValue:"chat",onValueChange:z,value:V,children:[(0,t.jsx)(x.TabsToggleTrigger,{value:"chat",className:"w-[72px] min-w-0",children:"Chat"}),(0,t.jsx)(y.Tooltip,{content:U,children:(0,t.jsx)(x.TabsToggleTrigger,{disabled:_,value:"design",onClick:H,className:(0,eG.cn)("w-[72px] min-w-0",_?"cursor-not-allowed":""),children:D("designMode.button")})})]}),(0,t.jsx)(g.Button,{variant:"ghost",size:"sm",className:"flex sm:hidden size-7",onClick:()=>A.togglePanel(eZ.CHAT_INPUT_PANEL_ID),children:(0,t.jsx)(eJ,{})}),I&&(0,t.jsxs)("div",{className:"ml-auto items-center gap-0.5 hidden sm:flex",children:[S&&(0,t.jsx)(eI,{}),S?null:(0,t.jsx)(v.BlockHistorySelect,{separator:!1,blockId:I})]})]})}let eJ=(0,eW.withNewIcon)('<path d="M16 12.5C16 13.8807 14.8807 15 13.5 15H2.5C1.20566 15 0.140824 14.0164 0.0126953 12.7559L0 12.5V1H16V12.5ZM6.24512 13.5H13.5C14.0523 13.5 14.5 13.0523 14.5 12.5V2.5H6.24512V13.5Z" fill="currentColor"/>)');(0,eW.withNewIcon)('<path d="M9.07812 0.517578C10.3378 0.517578 11.5458 1.01855 12.4365 1.90918L14.4316 3.90332C14.4589 3.93048 14.4919 3.95159 14.5283 3.96387L15.6475 4.33887C16.5275 4.63393 16.7899 5.75179 16.1338 6.4082L13.7822 8.75977C13.1141 9.42791 11.9743 9.14188 11.7012 8.2373L11.6602 8.09863L5.00781 14.752C4.03289 15.7269 2.45149 15.7269 1.47656 14.752C0.502221 13.777 0.501971 12.1964 1.47656 11.2217L8.47949 4.21973L6.88574 2.66113C6.08501 1.87781 6.6395 0.517628 7.75977 0.517578H9.07812ZM2.53711 12.2822C2.1483 12.6712 2.14855 13.3023 2.53711 13.6914C2.92619 14.0805 3.55714 14.0804 3.94629 13.6914L9.33008 8.30664L7.9209 6.89746L2.53711 12.2822ZM9.88965 3.5C10.2876 3.88911 10.2909 4.5292 9.89746 4.92285L8.98242 5.83691L10.3906 7.24609L11.1895 6.44824L11.2939 6.35742C11.8351 5.94473 12.6494 6.18815 12.8545 6.86621L13.0176 7.40234L14.7881 5.63184L14.0518 5.38574C13.7952 5.2997 13.5614 5.1552 13.3701 4.96387L11.376 2.96973C10.7665 2.36041 9.93995 2.01758 9.07812 2.01758H8.37305L9.88965 3.5ZM4.27246 1.18652C4.27246 2.29109 5.16789 3.18652 6.27246 3.18652H6.77246V4.18652H6.27246C5.16789 4.18652 4.27246 5.08195 4.27246 6.18652V6.68652H3.27246V6.18652C3.27246 5.08208 2.37686 4.18672 1.27246 4.18652H0.772461V3.18652H1.27246C2.37686 3.18632 3.27246 2.29097 3.27246 1.18652V0.686523H4.27246V1.18652Z" fill="currentColor"/>')},249897,e=>{"use strict";let t=/^v_(\d+)_/;function n(e){try{let n=e.match(t);if(!n)return console.error("Invalid source version format: ".concat(e)),null;return parseInt(n[1])}catch(t){return console.error("Error parsing source version: ".concat(e),t),null}}e.s(["parseSourceVersionToNumber",()=>n])},301331,e=>{"use strict";e.s(["BlockHistorySelect",()=>T,"useBlockHistory",()=>M,"useBlockSource",()=>I,"usePulsePreview",()=>A,"useSetPulsePreview",()=>L]);var t=e.i(832520),n=e.i(200407),r=e.i(92479),i=e.i(818273),a=e.i(449381),o=e.i(346970),s=e.i(912106),l=e.i(391795),c=e.i(608142),u=e.i(350097),d=e.i(370912),p=e.i(592258),h=e.i(176248),f=e.i(66990),m=e.i(848258),g=e.i(175787),v=e.i(304649),x=e.i(862664),y=e.i(86395),b=e.i(742998),w=e.i(696871),j=e.i(72047),C=e.i(314581),k=e.i(119317),S=e.i(249897);function N(e){let{messages:t,overrides:n,includeNonVersionedBlocks:r}=e,a=[];for(let e of t)if("assistant"===e.role){var o;let t=(0,i.getBlocksFromState)(e.content,e.id,{includeNonVersionedBlocks:r});for(let r of(e.isContentLoading&&(null==(o=e.loadingBlocks)?void 0:o.length)&&a.push(...e.loadingBlocks),t)){let e=null==n?void 0:n[r.id],t={...r,...e};w.INLINE_BLOCK_TYPES.includes(t.type)||a.push(t)}}return{blocks:a}}function E(){let{chatId:e}=(0,r.useChatMessages)(),{data:t,mutate:i}=(0,o.default)(["blocks:overrides",e]);return{blockOverrides:t,updateBlockData:(0,n.useCallback)(e=>{let{blockId:t,data:n}=e;i(e=>({...e,[t]:{...null==e?void 0:e[t],...n}}))},[i])}}let M=e=>{var t;let{blockId:i,searchAll:a=!1,includeNonVersionedBlocks:o=!1}=e,{messages:s,activeForkKey:l}=(0,r.useChatMessages)(),{blockOverrides:c,updateBlockData:u}=E(),{blocks:d}=(0,n.useMemo)(()=>N({messages:s,overrides:c,includeNonVersionedBlocks:o}),[c,s,o]),{allBlocks:p,thisBlock:h}=(0,n.useMemo)(()=>{let e=d.find(e=>e.id===i);if(a)return{allBlocks:d,thisBlock:e};let t=new Set(l);return{allBlocks:d.filter(e=>!!e.messageId&&t.has(e.messageId)),thisBlock:e}},[d,a,l,i]),{projectBlocks:f,activeProject:m,activeVersionIndex:g,activeBlockIndex:v,blockVersions:x}=(0,n.useMemo)(()=>{let e,t,n={},r=-1;for(let a of p){if(w.INLINE_BLOCK_TYPES.includes(a.type))continue;let o="code-project"===a.type?"code-project":a.meta.project||"";n[o]||(n[o]=[]),a.id===i&&(e=o,t=a.meta.file,r=n[o].length),n[o].push(a)}let a=[],o=-1,s=n[e||""];for(let r=0;r<(s?s.length:0);r++){let s=n[e||""][r];s.id===i&&(o=a.length),("code-project"===s.type||s.meta.file===t)&&a.push(s)}return{blockVersions:a,projectBlocks:n,activeProject:e,activeBlockIndex:r,activeVersionIndex:o}},[p,i]),y=(0,n.useCallback)(async e=>{let[t,n]=e,r=p.find(e=>e.id===n)||(null==c?void 0:c[n]),i=g>0?x[g-1]:void 0;async function a(){if(r&&!r.needsBlockSource)return r.source;let e=await D(n);return u({blockId:n,data:{source:e,needsBlockSource:!1}}),e}async function o(){if(!(null==i?void 0:i.needsBlockSource))return null==i?void 0:i.source;let e=await D(i.id);u({blockId:i.id,data:{source:e,needsBlockSource:!1}})}let[s]=await Promise.all([a(),o()]);return s},[g,p,x,u,c]),{trigger:b,isMutating:C}=(0,j.default)(i?["block:source",i]:null,y,{optimisticData:null==h?void 0:h.source}),k=(null==c||null==(t=c[i||"never_match"])?void 0:t.source)||(null==h?void 0:h.source),S=(0,n.useMemo)(()=>p.length>0?p[p.length-1]:null,[p]);return{history:x,allBlocks:p,latestSource:k,projectBlocks:m&&m in f?f[m]:[],projectBlockIndex:v,project:m,currentBlockIndex:g,updateBlockData:u,ensureBlockSource:b,isLoadingBlockSource:C,latestBlock:S,thisBlock:h}};function I(){let{mutate:e}=(0,l.useSWRConfig)();return{ensureBlockSource:(0,n.useCallback)(t=>{e(["block:source",t])},[e])}}async function D(e){let t=await fetch("/chat/api/blocks/source?blockId=".concat(e),{headers:{"Content-Type":"application/json"}});if(!t.ok)throw Error("Failed to fetch block source");let{source:n}=await t.json();return n}function T(e){let{blockId:i,separator:o=!0}=e,{history:s,currentBlockIndex:l,thisBlock:w}=M({blockId:i,searchAll:!0}),{messages:j,activeForkKey:N}=(0,r.useChatMessages)(),E=(0,r.useSetChatState)(),I=(0,a.useSetActiveBlockState)(),{getBlockCreatedAt:D}=(0,d.useBlockCreatedAt)(),T=(0,a.useActiveBlockState)(),{setPulsePreview:A}=L(),{getBlockDeployed:P}=(0,x.useDeployedBlocks)(),[,R]=(0,k.useHistoryPanel)(),[_,O]=(0,n.useState)(!1),[F,V]=(0,n.useState)(Date.now()),B=(0,n.useCallback)(e=>{O(e),V(Date.now())},[]),{scrollToHash:z}=(0,m.useScrollToMessage)(),H=e=>{let t=s.find(t=>t.id===e);if((null==t?void 0:t.isLoading)||(I(t),!(null==t?void 0:t.messageId)))return;let n=j.map((e,t)=>({...e,parentId:e.parentId||null,createdAt:new Date(t),messageId:e.id})),r=(0,g.computeInitialForkKey)(n,t.messageId);N&&!N.includes(t.messageId)&&E({activeForkKey:r}),A({blockId:t.id}),z(t.messageId,150,!0,r),s.findIndex(t=>t.id===e)<s.length-1&&R(!0)},U=(null==w?void 0:w.sourceVersionKey)&&(0,S.parseSourceVersionToNumber)(w.sourceVersionKey),q=U&&U>1;return s.length<=1?(0,t.jsx)("div",{className:"no-block-history hidden"}):(0,t.jsxs)(t.Fragment,{children:[o?(0,t.jsx)(f.Separator,{className:"mx-1.5 h-[22px]",orientation:"vertical"}):null,(0,t.jsx)("div",{className:"block-history flex gap-1",onMouseDown:e=>e.stopPropagation(),onTouchStart:e=>e.stopPropagation(),onPointerDown:e=>e.stopPropagation(),children:(0,t.jsxs)(p.Select,{open:_,onOpenChange:B,value:null==T?void 0:T.id,onValueChange:H,children:[(0,t.jsx)(h.Button,{variant:"ghost",size:"sm",className:"h-7 rounded-md pl-2 pr-1 text-gray-600",asChild:!0,children:(0,t.jsx)(p.SelectTrigger,{hideChevron:!0,children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsxs)("span",{children:["v",l+1]}),q&&(0,t.jsx)("span",{children:"(edited)"})]}),(0,t.jsx)(c.ChevronDownSmall,{})]})})}),(0,t.jsx)(p.SelectContent,{align:"end",className:"max-h-64! min-w-60!",children:(0,C.toReversed)(s).map((e,n)=>{let r=null==N?void 0:N.includes(e.messageId);return(0,t.jsx)(p.SelectItem,{iconOnRight:!0,value:e.id,disabled:e.isLoading,className:(0,v.cn)("px-2 py-1.5",!r&&!e.isLoading&&"text-gray-500 hover:text-gray-500 focus:text-gray-500"),children:(0,t.jsxs)("div",{className:"flex flex-col items-start",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 font-medium",children:[(0,t.jsxs)("div",{children:["Version ",s.length-n]}),P(e.id)?(0,t.jsxs)(b.Badge,{children:[(0,t.jsx)(y.Globe,{size:12})," Deployed"]}):null]}),(0,t.jsx)("div",{className:(0,v.cn)("text-[13px] text-gray-500",!r&&!e.isLoading&&"text-gray-400"),children:D(e.id)?(0,u.timeAgo)(new Date(D(e.id)),!0,F):"Just now"})]})},e.id)})})]})})]})}function A(e){let{blockId:t}=e,{data:n}=(0,o.default)(["pulse-preview",t],null,{fallbackData:!1});return{pulsePreview:null!=n&&n}}function L(){return{setPulsePreview:(0,n.useCallback)(e=>{let{blockId:t}=e;(0,s.mutate)(["pulse-preview",t],!0),setTimeout(()=>(0,s.mutate)(["pulse-preview",t],!1),2e3)},[])}}},325457,e=>{"use strict";var t=e.i(547259),n=(0,t.createServerReference)("403e8ef40b8f2deadb8774f1b5ccf99786efe0b4e7",t.callServer,void 0,t.findSourceMapURL,"undoBlockEdits");e.s(["undoBlockEdits",()=>n])},76866,e=>{"use strict";e.s(["useRestoreBlockVersion",()=>f]);var t=e.i(200407),n=e.i(480118);e.i(563948);var r=e.i(407562),i=e.i(92479),a=e.i(418111),o=e.i(301331),s=e.i(449381),l=e.i(848258),c=e.i(175787),u=e.i(120485),d=e.i(325457),p=e.i(583965),h=e.i(343258);function f(e){let{activeForkKey:f,messages:m}=(0,i.useChatMessages)(),g=(0,i.useSetChatState)(),{chatId:v}=(0,i.useChatId)(),{history:x,currentBlockIndex:y,updateBlockData:b}=(0,o.useBlockHistory)({blockId:e,searchAll:!0}),w=(0,n.useRouter)(),j=(0,s.useActiveBlockState)(),{refresh:C}=(0,p.useBrowserFrame)(),k=(0,s.useSetActiveBlockState)(),{scrollToHash:S}=(0,l.useScrollToMessage)(),[N,E]=(0,t.useState)(!1),[,M]=(0,t.useTransition)(),{setEditValueMap:I}=(0,h.useEditValueMap)({blockId:e||""}),D=(0,t.useCallback)(function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!f||!v)return void r.toast.error("Could not find the message in the chat");let i=x[t].meta.project;if(!i)return void r.toast.error("Something went wrong.");E(!0),M(async()=>{var o,s,l,c;try{let{error:l,newAssistantMessageId:c}=await (0,a.restoreBlock)({projectId:i,blockId:e,chatId:v,initialVersion:t,versionToCreate:x.length,forkKey:f});l||!c?((0,u.handleChatError)(l)||r.toast.error("Something went wrong. Please try again."),null==(o=n.onError)||o.call(n,l||"Something went wrong. Please try again.")):(r.toast.success("Version restored successfully"),g(()=>({isLoading:!0,isRestoring:!0})),w.push("#".concat(c)),null==(s=n.onSuccess)||s.call(n,c))}catch(e){r.toast.error("Failed to restore version"),null==(l=n.onError)||l.call(n,e)}finally{E(!1),null==(c=n.onFinally)||c.call(n)}})},[f,v,x,g,w]),T=(0,t.useCallback)(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e)return void r.toast.error("Block not found");if(N)return;let n=null==f?void 0:f.findIndex(e=>e===x[y].messageId);if(void 0===n||n<0||!f||!v)return void r.toast.error("Could not find the message in the chat");D(e,y,t)},[N,f,v,x,y,D,e]),A=(0,t.useCallback)(e=>{if(!e||0===x.length)return;let t=x[x.length-1];if(k(t),!t.messageId)return;let n=m.map((e,t)=>({...e,parentId:e.parentId||null,createdAt:new Date(t),messageId:e.id})),r=(0,c.computeInitialForkKey)(n,t.messageId);f&&!f.includes(t.messageId)&&g({activeForkKey:r}),S(t.messageId,150,!0,r)},[x,k,m,f,g,S]),[L,P]=(0,t.useState)(!1);return{restoreVersion:D,restoreCurrentBlock:T,exitToLatest:A,isRestoring:N,undoBlockEdits:(0,t.useCallback)(async(e,t)=>{let{onSuccess:n,onError:i,onFinally:a}=t;if(!v)return void r.toast.error("Could not find the message in the chat");P(!0);try{let t=await (0,d.undoBlockEdits)({blockId:e,chatId:v});if("success"in t){let{newSource:i,newSourceVersionKey:a}=t;I({}),j&&j.id===e&&k({...j,hasSourceBeenEdited:!0,source:i,lastEditedAt:new Date().toISOString()}),b({blockId:e,data:{hasSourceBeenEdited:!0,source:i,lastEditedAt:new Date().toISOString(),sourceVersionKey:a}}),C(),r.toast.success("Block edits undone"),null==n||n()}else r.toast.error("Failed to undo block edits")}catch(e){r.toast.error("Failed to undo block edits"),null==i||i(e)}finally{P(!1),null==a||a()}},[j,v,C,k,I,b]),isUndoing:L}}},368387,e=>{"use strict";e.s(["ChatUndoChangesDialog",()=>c]);var t=e.i(832520),n=e.i(176248),r=e.i(686832),i=e.i(120945);e.i(904347);var a=e.i(37737),o=e.i(76866),s=e.i(53223),l=e.i(211976);function c(e){let{blockId:c}=e,{undoBlockEdits:u,isUndoing:d}=(0,o.useRestoreBlockVersion)(c),p=()=>{u(c,{onSuccess:()=>{(0,a.closeDialog)(),(0,s.track)("UndoChanges",{blockId:c})}})};return(0,t.jsxs)(i.AtomicDialog,{type:"undoChanges",children:[(0,t.jsxs)(r.ModalHeader,{children:[(0,t.jsx)(r.ModalTitle,{children:"Undo changes"}),(0,t.jsx)(r.ModalDescription,{children:"Are you sure you want to undo changes? This action is not reversible and will restore the block to its original state."})]}),(0,t.jsxs)(r.ModalFooter,{children:[(0,t.jsx)(n.Button,{size:"sm",variant:"secondary",onClick:a.closeDialog,children:"Cancel"}),(0,t.jsx)(l.SpinnerButton,{pending:d,onClick:p,size:"sm",disabled:d,children:"Undo"})]})]})}},889661,e=>{"use strict";var t=e.i(200407),n=e.i(560270);function r(e){return{formRef:(0,t.useRef)(null),onKeyDown:(0,t.useCallback)(t=>{if(n.isMobile)return;let r=t.currentTarget.value.trim(),i=""===r&&(null==e?void 0:e.localFileInfos)&&e.localFileInfos.length>0;if("Enter"===t.key&&!t.shiftKey&&!t.nativeEvent.isComposing){if(n.isSafari&&n.isDesktop&&229===t.keyCode)return;t.preventDefault(),i?e.submitMessage():r.length>0&&(null==e||e.submitMessage())}},[e])}}e.s(["useEnterSubmit",()=>r])},391139,e=>{"use strict";let t=(0,e.i(605528).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M6.89531 13.7603C6.72984 13.8785 6.5 13.7602 6.5 13.5569V10.75C6.5 9.7835 5.7165 9 4.75 9H2.5V2.5H12.1884C12.762 2.5 13.262 2.89037 13.4011 3.44683L14.4011 7.44683C14.5984 8.23576 14.0017 9 13.1884 9H9.25H8.5V9.75V12.4854C8.5 12.5662 8.46101 12.6419 8.39531 12.6889L6.89531 13.7603ZM5 13.5569C5 14.9803 6.6089 15.8082 7.76717 14.9809L9.26717 13.9095C9.72706 13.581 10 13.0506 10 12.4854V10.5H13.1884C14.9775 10.5 16.2903 8.81868 15.8563 7.08303L14.8563 3.08303C14.5503 1.85882 13.4503 1 12.1884 1H1.75H1V1.75V9.75V10.5H1.75H4.75C4.88807 10.5 5 10.6119 5 10.75V13.5569Z" fill="currentColor"/>');e.s(["ThumbDown",0,t])},329046,431734,19922,324042,e=>{"use strict";e.s(["ChatMessageDownvoteDialog",()=>A,"DownvoteButton",()=>L],329046);var t=e.i(832520),n=e.i(200407),r=e.i(176248),i=e.i(216445);e.i(563948);var a=e.i(407562),o=e.i(889661),s=e.i(707974),l=e.i(341003),c=e.i(580643),u=e.i(547259),d=(0,u.createServerReference)("40176b03ef9c9db17d7cb8b90069d5ff5f7274b60b",u.callServer,void 0,u.findSourceMapURL,"sendMessageFeedback");e.s(["sendMessageFeedback",()=>d],431734);var p=e.i(53223),h=e.i(92479),f=e.i(304649),m=e.i(686832),g=t,v=e.i(127558),x=e.i(391139);function y(){return(0,g.jsx)(v.AnimatedIcon,{variants:{hover:{y:2,x:-1,rotate:12}},children:(0,g.jsx)(x.ThumbDown,{"aria-hidden":!0})})}var b=e.i(297239),w=e.i(32170);function j(){let{user:e,expectUser:t}=(0,w.useUser)();if(t&&!e)return{isLoading:!0};let n=!1;return(t||e)&&((null==e?void 0:e.v0plan)!=="v0-enterprise"||e.isVercelian)?{canVote:!0,isLoading:n}:{canVote:!1,isLoading:n}}e.s(["useCanVoteOnMessage",()=>j],19922);var C=e.i(51940),k=e.i(120945);e.i(904347);var S=e.i(37737),N=w,E=n,M=h,I=e.i(175787);function D(e){let{messageId:t}=e,{chatId:n,messages:r,activeForkKey:i}=(0,M.useChatMessages)(),{user:a}=(0,N.useUser)(),{botText:o,userMessageId:s}=(0,E.useMemo)(()=>{let e={botText:void 0,userMessageId:void 0};if(!t||!i)return e;let n=r.findIndex(e=>"id"in e&&e.id===t);return n<0?e:{botText:r[n].content,userMessageId:(0,I.getPreviousMessageIdInForkKey)(i,t)}},[r,t,i]),l=(0,E.useMemo)(()=>(0,I.getLeafMessageIdFromForkKey)(i),[i]);return{chatId:n,messageText:o,promptMessageId:s,messageId:t,userId:null==a?void 0:a.id,leafMessageId:l}}function T(e){let{children:n,value:r,reasons:i}=e;return(0,t.jsx)(l.RadioButton,{className:"max-sm:text-xs",onClick:()=>i.toggle(r),selected:i.has(r),children:n})}function A(e){let{messageId:l,quote:u,voteOptions:g}=e,{activeForkKey:v}=(0,h.useChatMessages)(),{formRef:x,onKeyDown:y}=(0,o.useEnterSubmit)(),{chatId:w,messageText:j,promptMessageId:N,userId:E,leafMessageId:M}=g,[I,D]=(0,n.useState)(""),A=(0,c.useMultiSelect)(),L=(0,b.useT)(),P=(0,n.useCallback)(()=>{D(""),A.clear(),(0,S.closeDialog)()},[A]),R=(0,n.useCallback)(async e=>{if(e.preventDefault(),N&&j&&l&&M)try{a.toast.success(L("downvoteDialog.successToast")),await Promise.all([P(),(0,p.track)("SubmitDownvote",{messageId:l,leafMessageId:M,quote:u,reasons:A.values,freeformFeedback:I}),d({feedback:I,quote:u,reasons:A.values,chatId:w,leafMessageId:M,promptMessageId:N,messageId:l,userId:E,type:"downvote"})])}catch(e){console.error(e),a.toast.error("Failed to send feedback. Please try again later.")}},[N,j,l,M,L,P,u,A.values,I,w,E]),_=(0,n.useMemo)(()=>(0,t.jsxs)("form",{className:(0,f.cn)("flex flex-col","gap-3 sm:gap-6"),onSubmit:R,ref:x,children:[u&&(0,t.jsxs)("div",{className:(0,f.cn)("bg-muted flex items-center gap-2 text-ellipsis py-3 text-sm text-gray-900","-mx-3 px-3 sm:-mx-6 sm:px-6"),children:[(0,t.jsx)("div",{className:"w-1 shrink-0 self-stretch rounded-full bg-gray-300"}),(0,t.jsx)("span",{className:"line-clamp-2",children:u})]}),(0,t.jsx)("div",{className:"flex flex-col gap-2",children:(0,t.jsxs)("div",{className:"grid w-full grid-cols-2 items-center justify-start gap-2",children:[(0,t.jsx)(T,{reasons:A,value:"inaccurate",children:L("downvoteDialog.options.incorrectInformation")}),(0,t.jsx)(T,{reasons:A,value:"off-topic",children:L("downvoteDialog.options.instructionsIgnored")}),(0,t.jsx)(T,{reasons:A,value:"lazy",children:L("downvoteDialog.options.beingLazy")}),(0,t.jsx)(T,{reasons:A,value:"style",children:L("downvoteDialog.options.dontLikeStyle")}),(0,t.jsx)(T,{reasons:A,value:"bad-recommendation",children:L("downvoteDialog.options.badRecommendation")}),(0,t.jsx)(T,{reasons:A,value:"other",children:L("downvoteDialog.options.other")})]})}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsxs)(s.Label,{className:"text-sm font-normal text-gray-500",htmlFor:"downvote-feedback",children:[L("downvoteDialog.howCanWeImprove")," ",(0,t.jsx)("span",{className:"text-gray-400",children:L("downvoteDialog.optional")})]}),(0,t.jsx)(i.Textarea,{asChild:!0,children:(0,t.jsx)(C.ResizableTextArea,{id:"downvote-feedback",name:"feedback",onChange:e=>D(e.target.value),onKeyDown:y,placeholder:"Your feedback...",minHeight:80,maxHeight:192,value:I})})]}),(0,t.jsxs)("div",{className:"flex-col-reverse sm:flex-row flex w-full items-center justify-end gap-2",children:[(0,t.jsx)(r.Button,{className:"w-full",onClick:e=>{e.preventDefault(),P()},size:"sm",variant:"secondary",children:L("downvoteDialog.cancel")}),(0,t.jsx)(r.Button,{className:"w-full",size:"sm",type:"submit",children:L("downvoteDialog.submit")})]})]}),[R,x,u,A,L,y,I,P]);return(0,t.jsx)(k.AtomicDialog,{type:"messageDownvote",children:(0,t.jsxs)("div",{className:"overflow-auto",children:[(0,t.jsxs)(m.ModalHeader,{children:[(0,t.jsx)(m.ModalTitle,{children:L("downvoteDialog.title")}),(0,t.jsx)(m.ModalDescription,{children:L("downvoteDialog.description")(u)})]}),(0,t.jsx)(m.ModalContent,{children:_})]})})}function L(e){let{variant:n,messageId:i,quoteRef:a,tooltip:o,...s}=e,{isLoading:l,canVote:c}=j(),u=D({messageId:i});return l||!c?null:"quote"===n?(0,t.jsx)(r.Button,{"aria-label":"Downvote",className:"text-muted-foreground hover:text-foreground rounded-md p-0 text-sm",onClick:()=>{var e,t;(0,p.track)("OpenDownvote",{quote:null==a||null==(e=a.current)?void 0:e.call(a),messageId:i}),(0,S.openDialog)({type:"messageDownvote",data:{messageId:i,quote:null==a||null==(t=a.current)?void 0:t.call(a),voteOptions:u}})},size:"xs",variant:"ghost",children:(0,t.jsx)(y,{"aria-hidden":!0})}):(0,t.jsx)(r.Button,{"aria-label":"Downvote Response",onClick:()=>{(0,p.track)("OpenDownvote",{messageId:i}),(0,S.openDialog)({type:"messageDownvote",data:{messageId:i,voteOptions:u}})},size:"xs",tooltip:o,tooltipDirection:"bottom",variant:"ghost",...s,children:(0,t.jsx)(y,{})})}e.s(["useVoteOptions",()=>D],324042)},341003,580643,931487,e=>{"use strict";var t=e.i(832520),n=e.i(304649),r=e.i(176248),i=e.i(596359);function a(e){let{children:a,Icon:o,selected:s,className:l,onClick:c}=e;return(0,t.jsxs)(r.Button,{className:(0,n.cn)("focus:bg-background flex h-12 items-center justify-between gap-1 px-4 font-medium text-gray-900 shadow-none transition-colors hover:focus:bg-gray-100",s&&"border border-blue-700 bg-blue-100 text-blue-600 hover:border-blue-700 hover:bg-blue-100 hover:brightness-97 focus:border-blue-700 focus:bg-blue-100 hover:focus:bg-blue-100 focus-visible:border-blue-700",l),onClick:c,size:"sm",type:"button",variant:"secondary",children:[(0,t.jsxs)("div",{className:"shrink-1 flex items-center gap-2 overflow-hidden",children:[o&&(0,t.jsx)(o,{className:"h-4 w-4 shrink-0"}),(0,t.jsx)("span",{className:"overflow-hidden text-ellipsis",children:a})]}),(0,t.jsx)("div",{className:(0,n.cn)("flex size-4 shrink-0 items-center justify-center rounded-sm border text-white",s&&"border-0 bg-blue-600"),children:s?(0,t.jsx)(i.Check,{className:"stroke-background h-2 w-2"}):null})]})}e.s(["RadioButton",()=>a],341003);var o=e.i(200407);function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],[t,n]=(0,o.useState)(new Set(e)),r=e=>t.has(e);return{values:[...t],has:r,toggle:e=>n(t=>new Set(t.delete(e)?t:t.add(e))),clear:()=>n(new Set)}}e.s(["useMultiSelect",()=>s],580643);let l=(0,e.i(605528).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M2.5 2.38401C2.64568 2.28957 2.84672 2.17097 3.09632 2.0516C3.67556 1.77457 4.50202 1.5 5.5 1.5C6.36835 1.5 7.01666 1.91731 7.76416 2.47582C7.81395 2.51302 7.86487 2.55137 7.91678 2.59046C8.2325 2.82825 8.58515 3.09385 8.94862 3.30046C9.38732 3.54983 9.90016 3.75 10.5 3.75C11.4771 3.75 12.5081 3.46807 13.2589 3.20897C13.3421 3.18026 13.4226 3.15157 13.5 3.12321V8.81917C13.366 8.88807 13.1923 8.96944 12.9825 9.05151C12.4127 9.27435 11.5825 9.49998 10.5568 9.49998C9.65149 9.49998 9.11435 9.17173 8.42753 8.74001L8.40495 8.72582C7.70405 8.28516 6.85285 7.75 5.5 7.75C4.25466 7.75 3.22521 8.08445 2.5 8.42432V2.38401ZM2.5 10.134V15.25V16H1V15.25V2V1.65215L1.26554 1.42746L1.75 2C1.26554 1.42746 1.26576 1.42728 1.26599 1.42709L1.26646 1.42668L1.26752 1.42579L1.27005 1.42367L1.27679 1.41807L1.29689 1.4017C1.31321 1.38857 1.33537 1.37107 1.36321 1.34985C1.41885 1.30743 1.49735 1.24998 1.59739 1.18261C1.79715 1.04807 2.08466 0.872716 2.44914 0.698399C3.17671 0.350428 4.22526 0 5.5 0C6.90437 0 7.9038 0.707694 8.66198 1.27418C8.72015 1.31765 8.77638 1.3599 8.831 1.40094C9.15213 1.64223 9.41729 1.84147 9.68987 1.99641C9.99337 2.16892 10.2476 2.25 10.5 2.25C11.2275 2.25 12.0715 2.03193 12.7695 1.79103C13.1109 1.67321 13.4025 1.55523 13.6079 1.46707C13.7104 1.42308 13.7908 1.38677 13.8446 1.36197C13.8714 1.34957 13.8916 1.34007 13.9044 1.33395L13.9182 1.32736L13.9206 1.32621L13.9208 1.32612L13.9209 1.32608L13.9209 1.32605L13.9211 1.32597L15 0.798502V2V9.24998V9.6392L14.6817 9.86326L14.25 9.24998C14.6817 9.86326 14.6815 9.86342 14.6813 9.86359L14.6808 9.86394L14.6797 9.86471L14.6771 9.86653L14.6702 9.87124L14.6502 9.88477C14.6341 9.89556 14.6123 9.90981 14.5851 9.92701C14.5307 9.96141 14.4542 10.0077 14.3569 10.0618C14.1624 10.1699 13.8834 10.3098 13.5289 10.4485C12.8202 10.7256 11.8039 11 10.5568 11C9.20395 11 8.35275 10.4648 7.65185 10.0242L7.62928 10.01C6.94245 9.57826 6.40532 9.25 5.5 9.25C4.50202 9.25 3.67557 9.52457 3.09633 9.8016C2.84672 9.92098 2.64568 10.0396 2.5 10.134ZM2.23212 10.3245C2.23169 10.3249 2.23159 10.325 2.23184 10.3248L2.23212 10.3245Z" fill="currentColor"/>');e.s(["Flag",0,l],931487)},5894,e=>{"use strict";e.s(["ChatFlagBlockDialog",()=>j,"FlagBlockButton",()=>C],5894);var t=e.i(832520),n=e.i(200407),r=e.i(176248),i=e.i(216445);e.i(563948);var a=e.i(407562),o=e.i(707974),s=e.i(341003),l=e.i(580643),c=e.i(92479),u=e.i(304649),d=e.i(686832),p=e.i(297239),h=e.i(32170),f=e.i(931487),m=e.i(556355),g=e.i(547259),v=(0,g.createServerReference)("40ecbdbb1c19a8a663d7586b088a2c07a18946379b",g.callServer,void 0,g.findSourceMapURL,"sendFlag"),x=e.i(51940),y=e.i(120945);e.i(904347);var b=e.i(37737);function w(e){let{children:n,value:r,reasons:i}=e;return(0,t.jsx)(s.RadioButton,{className:"max-sm:text-xs",onClick:()=>i.toggle(r),selected:i.has(r),children:n})}function j(e){let{blockId:s}=e,{chatId:f}=(0,c.useChatId)(),{user:m}=(0,h.useUser)(),[g,j]=(0,n.useState)(""),C=(0,l.useMultiSelect)(),k=(0,p.useT)(),S=(0,n.useCallback)(()=>{j(""),C.clear(),(0,b.closeDialog)()},[C]),N=(0,n.useCallback)(async e=>{if(e.preventDefault(),!f)return void a.toast.error("Failed to submit flag. Please try again later.");try{await Promise.all([S(),v({feedback:g,reasons:C.values,chatId:f,blockId:s,userId:null==m?void 0:m.id}),a.toast.success("Successfully flagged Block")])}catch(e){console.error(e),a.toast.error("Failed to submit flag. Please try again later.")}},[S,g,C.values,f,s,null==m?void 0:m.id]),E=(0,n.useMemo)(()=>(0,t.jsxs)("form",{className:(0,u.cn)("flex flex-col","gap-3 sm:gap-6"),onSubmit:N,children:[(0,t.jsx)("div",{className:"flex flex-col gap-2",children:(0,t.jsxs)("div",{className:"grid w-full grid-cols-2 items-center justify-start gap-2",children:[(0,t.jsx)(w,{reasons:C,value:"inappropriate",children:"Inappropriate Content"}),(0,t.jsx)(w,{reasons:C,value:"copyright",children:"Copyright Violation"}),(0,t.jsx)(w,{reasons:C,value:"illegal",children:"Illegal Content"}),(0,t.jsx)(w,{reasons:C,value:"other",children:"Other"})]})}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)(o.Label,{className:"text-sm font-normal text-gray-500",htmlFor:"downvote-feedback",children:"Please provide your reasoning for flagging this generation."}),(0,t.jsx)(i.Textarea,{asChild:!0,children:(0,t.jsx)(x.ResizableTextArea,{id:"downvote-feedback",name:"feedback",onChange:e=>j(e.target.value),placeholder:"Additional information...",minHeight:80,maxHeight:192,value:g})})]}),(0,t.jsxs)("div",{className:"flex-col-reverse sm:flex-row flex w-full items-center justify-end gap-2",children:[(0,t.jsx)(r.Button,{className:"max-sm:w-full",onClick:e=>{e.preventDefault(),S()},size:"sm",variant:"secondary",children:k("downvoteDialog.cancel")}),(0,t.jsx)(r.Button,{className:"max-sm:w-full",size:"sm",type:"submit",children:k("downvoteDialog.submit")})]})]}),[N,C,k,g,S]);return(0,t.jsx)(y.AtomicDialog,{type:"flagBlock",children:(0,t.jsxs)("div",{className:"overflow-auto",children:[(0,t.jsxs)(d.ModalHeader,{children:[(0,t.jsx)(d.ModalTitle,{children:"Flag a generation"}),(0,t.jsx)(d.ModalDescription,{children:"Flag a generation for inappropriate, abusive, or illegal content."})]}),(0,t.jsx)(d.ModalContent,{children:E})]})})}function C(e){let{blockId:i,isMenuItem:a=!1,closeMenu:o,...s}=e,l=(0,n.useCallback)(()=>{o&&o(),(0,b.openDialog)({type:"flagBlock",data:{blockId:i}})},[o,i]);return a?(0,t.jsxs)(m.DropdownMenuItem,{onClick:l,children:[(0,t.jsx)(f.Flag,{}),(0,t.jsx)("span",{children:"Flag"})]}):(0,t.jsx)(r.Button,{"aria-label":"Flag Generation",onClick:l,size:"sm",className:"size-7 rounded-md",tooltip:"Flag",variant:"ghost",...s,children:(0,t.jsx)(f.Flag,{})})}},727826,e=>{"use strict";let t=(0,e.i(605528).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M7.70059 1.73618L7.74488 1.5H8.2551L8.29938 1.73618C8.4406 2.48936 8.98357 3.04807 9.63284 3.27226C9.82296 3.33791 10.008 3.41476 10.1871 3.50207C10.805 3.80328 11.5845 3.7922 12.2172 3.35933L12.4158 3.22342L12.7766 3.5842L12.6407 3.78284C12.2078 4.41549 12.1967 5.19496 12.4979 5.81292C12.5852 5.99203 12.6621 6.17703 12.7277 6.36714C12.9519 7.01642 13.5106 7.55938 14.2638 7.7006L14.5 7.74489V8.25511L14.2638 8.2994C13.5106 8.44062 12.9519 8.98359 12.7277 9.63286C12.6621 9.82298 12.5852 10.008 12.4979 10.1871C12.1967 10.805 12.2078 11.5845 12.6407 12.2172L12.7766 12.4158L12.4158 12.7766L12.2172 12.6407C11.5845 12.2078 10.805 12.1967 10.1871 12.4979C10.008 12.5852 9.82296 12.6621 9.63284 12.7277C8.98357 12.9519 8.4406 13.5106 8.29938 14.2638L8.2551 14.5H7.74488L7.70059 14.2638C7.55937 13.5106 7.0164 12.9519 6.36713 12.7277C6.17702 12.6621 5.99202 12.5852 5.8129 12.4979C5.19495 12.1967 4.41548 12.2078 3.78283 12.6407L3.5842 12.7766L3.22342 12.4158L3.35932 12.2172C3.79219 11.5845 3.80326 10.8051 3.50206 10.1871C3.41475 10.008 3.3379 9.82298 3.27225 9.63285C3.04806 8.98358 2.48935 8.44061 1.73616 8.29939L1.5 8.25511V7.74489L1.73616 7.70061C2.48935 7.55939 3.04806 7.01642 3.27225 6.36715C3.3379 6.17703 3.41475 5.99203 3.50205 5.81291C3.80326 5.19496 3.79218 4.41549 3.35931 3.78283L3.2234 3.5842L3.58418 3.22342L3.78282 3.35932C4.41547 3.79219 5.19494 3.80327 5.8129 3.50207C5.99201 3.41476 6.17701 3.33791 6.36713 3.27226C7.0164 3.04807 7.55937 2.48936 7.70059 1.73618ZM6.49999 0H9.49999L9.77369 1.45974C9.80837 1.64472 9.94454 1.79299 10.1224 1.85441C10.3702 1.93996 10.6111 2.04007 10.8443 2.15371C11.0135 2.2362 11.2148 2.22768 11.3701 2.12137L12.5962 1.28249L14.7175 3.40381L13.8786 4.62987C13.7723 4.78525 13.7638 4.98647 13.8463 5.1557C13.9599 5.38885 14.06 5.62981 14.1456 5.87756C14.207 6.05545 14.3553 6.19161 14.5402 6.2263L16 6.5V9.5L14.5402 9.7737C14.3553 9.80839 14.207 9.94455 14.1456 10.1224C14.06 10.3702 13.9599 10.6112 13.8463 10.8443C13.7638 11.0135 13.7723 11.2148 13.8786 11.3701L14.7175 12.5962L12.5962 14.7175L11.3701 13.8786C11.2147 13.7723 11.0135 13.7638 10.8443 13.8463C10.6111 13.9599 10.3702 14.06 10.1224 14.1456C9.94454 14.207 9.80837 14.3553 9.77369 14.5403L9.49999 16H6.49999L6.22628 14.5403C6.1916 14.3553 6.05544 14.207 5.87755 14.1456C5.6298 14.06 5.38884 13.9599 5.15569 13.8463C4.98645 13.7638 4.78523 13.7723 4.62985 13.8786L3.40381 14.7175L1.28249 12.5962L2.12136 11.3702C2.22767 11.2148 2.23619 11.0136 2.1537 10.8443C2.04006 10.6112 1.93995 10.3702 1.8544 10.1224C1.79297 9.94455 1.6447 9.80838 1.45973 9.7737L0 9.5V6.5L1.45973 6.2263C1.6447 6.19162 1.79297 6.05545 1.8544 5.87756C1.93995 5.62981 2.04005 5.38885 2.1537 5.15569C2.23619 4.98646 2.22766 4.78524 2.12135 4.62986L1.28247 3.40381L3.40379 1.28249L4.62984 2.12136C4.78522 2.22767 4.98644 2.2362 5.15568 2.15371C5.38883 2.04007 5.6298 1.93996 5.87755 1.85441C6.05544 1.79299 6.1916 1.64472 6.22628 1.45975L6.49999 0ZM9.49998 8C9.49998 8.82843 8.82841 9.5 7.99998 9.5C7.17156 9.5 6.49998 8.82843 6.49998 8C6.49998 7.17157 7.17156 6.5 7.99998 6.5C8.82841 6.5 9.49998 7.17157 9.49998 8ZM11 8C11 9.65685 9.65684 11 7.99998 11C6.34313 11 4.99998 9.65685 4.99998 8C4.99998 6.34315 6.34313 5 7.99998 5C9.65684 5 11 6.34315 11 8Z" fill="currentColor"/>');e.s(["SettingsGear",0,t])},9651,e=>{"use strict";let t=(0,e.i(605528).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M2.5 3.25C2.5 1.45507 3.95507 0 5.75 0H6.25C8.04493 0 9.5 1.45507 9.5 3.25V3.75C9.5 5.54493 8.04493 7 6.25 7H5.75C3.95507 7 2.5 5.54493 2.5 3.75V3.25ZM5.75 1.5C4.7835 1.5 4 2.2835 4 3.25V3.75C4 4.7165 4.7835 5.5 5.75 5.5H6.25C7.2165 5.5 8 4.7165 8 3.75V3.25C8 2.2835 7.2165 1.5 6.25 1.5H5.75ZM1.5 14.5V13.1709C2.31958 11.5377 3.99308 10.5 5.82945 10.5H6.17055C8.00692 10.5 9.68042 11.5377 10.5 13.1709V14.5H1.5ZM5.82945 9C3.35483 9 1.10604 10.4388 0.0690305 12.6857L0 12.8353V13V15.25V16H0.75H11.25H12V15.25V13V12.8353L11.931 12.6857C10.894 10.4388 8.64517 9 6.17055 9H5.82945ZM15.931 12.6857C15.3706 11.4715 14.4561 10.4931 13.3439 9.85058L12.5935 11.1494C13.399 11.6148 14.0681 12.3101 14.5 13.1709V14.5H13.5V16H15.25H16V15.25V13V12.8352L15.931 12.6857ZM11.25 0H10.5V1.5H11.25C12.2165 1.5 13 2.2835 13 3.25V3.75C13 4.7165 12.2165 5.5 11.25 5.5H10.5V7H11.25C13.0449 7 14.5 5.54493 14.5 3.75V3.25C14.5 1.45507 13.0449 0 11.25 0Z" fill="currentColor"/>');e.s(["Users",0,t])},607391,e=>{"use strict";var t=e.i(832520),n=e.i(200407);function r(e,t){let[r,i]=(0,n.useState)(e),a=(0,n.useRef)(null);return(0,n.useEffect)(()=>(a.current&&clearTimeout(a.current),a.current=setTimeout(()=>{i(e)},t),()=>{a.current&&clearTimeout(a.current)}),[e,t]),r}var i=e.i(675120),a=e.i(707827);function o(e){let{loading:n,isLoading:o,children:s,debounceChildren:l=!1,...c}=e,u=r(s,200);return(0,t.jsx)(i.TransitionNode,{...i.PRESETS.buttonContent,...c,style:{width:"100%",...c.style},children:(0,t.jsx)("span",{className:"flex items-center gap-2",children:o?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.Spinner,{size:16}),n]}):l?u:s})})}e.s(["ActionStatus",()=>o],607391)},484569,e=>{"use strict";var t=e.i(547259),n=(0,t.createServerReference)("40fe5f5574433f8c31ca18e456dae9cbd97d1e2fed",t.callServer,void 0,t.findSourceMapURL,"uploadAssetAction"),r=e.i(200407);e.i(563948);var i=e.i(407562);let a="1 MB",o=1,s=["png","jpg","jpeg","webp"],l=1048576,c=e=>{let{initialImages:t,disableDrag:c=!1,containerRef:d}=e,p=r.useRef(null),[h,f]=r.useState(!1),[m,g]=r.useState(!1),[v,x]=r.useState(()=>{var e;return null!=(e=null==t?void 0:t.map(e=>({id:crypto.randomUUID(),file:new File([],e.name),size:e.size,status:"success",url:e.url})))?e:[]}),y=r.useCallback(e=>{x(e.map(e=>({id:crypto.randomUUID(),file:new File([],e.name),size:e.size,status:"success",url:e.url})))},[]),b=r.useCallback(async e=>{var t;let r=1===o&&1===v.length&&e.length>=1,c=r?0:v.length;if(r&&(null==(t=v[0])?void 0:t.url))try{URL.revokeObjectURL(v[0].url)}catch(e){}if(c+e.length>o)return e.forEach(e=>{URL.revokeObjectURL(URL.createObjectURL(e))}),i.toast.error("File limit exceeded",{description:"You can only upload up to ".concat(o," images.")});if(e.find(e=>{var t;let n=null==(t=e.name.split(".").pop())?void 0:t.toLowerCase();return!n||!s.includes(n)}))return e.forEach(e=>{URL.revokeObjectURL(URL.createObjectURL(e))}),i.toast.error("Invalid file type",{description:"Allowed file types: ".concat(s.join(", "))});let u=e.find(e=>e.size>l);if(u)return e.forEach(e=>{URL.revokeObjectURL(URL.createObjectURL(e))}),i.toast.error("File too large",{description:"The file ".concat(u.name," is larger than ").concat(a,".")});f(!0);let d=e.map(e=>({id:crypto.randomUUID(),file:e,status:"pending",url:URL.createObjectURL(e),size:e.size}));for(let e of(x(e=>r?[...d]:[...e,...d]),d)){x(t=>t.map(t=>t.id===e.id?{...t,status:"uploading"}:t));try{let t=new FormData;t.append("file",e.file,e.file.name);let r=await n(t);if(r.error){x(t=>t.map(t=>t.id===e.id?{...t,status:"error",error:r.error}:t)),i.toast.error("Failed to upload file",{description:r.error});continue}let a=r.url;x(t=>t.map(t=>t.id===e.id?{...t,status:"success",url:a}:t))}catch(t){x(t=>t.map(t=>t.id===e.id?{...t,status:"error",error:"Upload failed"}:t))}}f(!1)},[v.length]),w=r.useCallback(async e=>{if(g(!1),h||(e.preventDefault(),e.stopPropagation(),!e.dataTransfer))return;let{files:t}=e.dataTransfer;u(t)&&await b(Array.from(t))},[b,h]);r.useEffect(()=>{if(c)return;let e=()=>g(!0),t=()=>g(!1),n=e=>{e.preventDefault(),e.stopPropagation()},r=e=>{w(e).catch(console.error)},i=(null==d?void 0:d.current)||window;return i.addEventListener("dragenter",e),document.documentElement.addEventListener("mouseleave",t),i.addEventListener("dragover",n),i.addEventListener("drop",r),()=>{i.removeEventListener("dragenter",e),document.documentElement.removeEventListener("mouseleave",t),i.removeEventListener("dragover",n),i.removeEventListener("drop",r)}},[c,w,b,d]);let j=async e=>{u(e.target.files)&&e.target.files&&await b(Array.from(e.target.files))},C=r.useCallback(e=>{x(t=>{let n=t.find(t=>t.id===e);return(null==n?void 0:n.url)&&URL.revokeObjectURL(n.url),t.filter(t=>t.id!==e)})},[]);return{files:v,setFiles:x,setInitialFiles:y,uploading:h,isDraggingFile:m,inputFileRef:p,onInputChange:j,removeFile:C}};function u(e){if(!(null==e?void 0:e.length))return!1;if(e.length>o)return i.toast.error("File limit exceeded",{description:"You can only upload up to ".concat(o," images at a time.")}),!1;for(let t of e)if(!t.type.startsWith("image/"))return i.toast.error("Invalid file type",{description:"Please upload image files only"}),!1;return!0}e.s(["useTemplateFileUpload",()=>c],484569)},959807,390215,e=>{"use strict";var t=e.i(547259),n=(0,t.createServerReference)("7fca04185357f814bb4f0ff8afdd26409e327cdc68",t.callServer,void 0,t.findSourceMapURL,"saveTemplate");e.s(["saveTemplate",()=>n],959807);var r=e.i(832520),i=e.i(794593),a=e.i(7809),o=e.i(200407);function s(e){let{tags:t,setTags:n}=e,[s,l]=(0,o.useState)(""),c=e=>e.toLowerCase().trim().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-").replace(/^-|-$/g,""),u=e=>{let r=c(e);r&&!t.includes(r)&&n([...t,r])},d=e=>{n(t.filter(t=>t!==e))},p=e=>{("Enter"===e.key||","===e.key||"Tab"===e.key)&&(e.preventDefault(),s&&t.length<10&&(u(s),l("")))};return(0,r.jsxs)("div",{className:"bg-background focus-within:border-alpha-600 disabled:border-alpha-300 flex flex-wrap gap-0.5 w-full shrink-0 items-center rounded-md border p-0.5 outline-hidden transition-all disabled:pointer-events-none disabled:bg-gray-100 disabled:text-gray-400 h-auto min-h-8",children:[t.map(e=>(0,r.jsxs)(i.Badge,{variant:"secondary",className:"rounded-sm p-0.5 pl-1 gap-0.5 cursor-default pointer-events-auto",onClick:()=>{d(e)},children:[e,(0,r.jsx)("button",{className:"z-10 p-1 cursor-pointer relative",children:(0,r.jsx)(a.Cross,{className:"w-2 aspect-square"})})]},e)),(0,r.jsx)("input",{className:"text-label-14 bg-transparent outline-hidden file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-400 disabled:cursor-not-allowed disabled:text-gray-400 flex-1 min-w-20 h-6 px-1.5",placeholder:0===t.length?"Add up to 10 tags":"",value:s,onChange:e=>l(e.target.value),onKeyDown:p})]})}e.s(["TagInput",()=>s],390215)},388769,e=>{"use strict";e.s(["TemplateEditButton",()=>k,"TemplateEditDialog",()=>N]);var t=e.i(832520),n=e.i(200407),r=e.i(727826),i=e.i(132440),a=e.i(299313),o=e.i(686832),s=e.i(120945),l=e.i(707974),c=e.i(763480),u=e.i(216445),d=e.i(592258),p=e.i(86395),h=e.i(9651),f=e.i(607391),m=e.i(176248),g=e.i(762585),v=e.i(707827);e.i(563948);var x=e.i(407562),y=e.i(484569),b=e.i(667660),w=e.i(959807),j=e.i(37737),C=e.i(390215);function k(e){let n=()=>{(0,j.openDialog)({type:"templateEdit",data:e})};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m.Button,{onClick:n,size:"sm",className:"size-7 rounded-md px-0 sm:hidden",tooltip:"Settings",variant:"secondary",children:(0,t.jsx)(r.SettingsGear,{})}),(0,t.jsx)(m.Button,{onClick:n,size:"sm",className:"hidden sm:block",tooltip:"Settings",variant:"secondary",children:(0,t.jsx)(r.SettingsGear,{})})]})}e.i(904347);let S=e=>{let{children:n}=e;return(0,t.jsx)("div",{className:"flex flex-col gap-2",children:n})};function N(e){var r,k,N,E,M,I,D,T;let{templateData:A}=e,{activeScope:L}=(0,b.useActiveScope)(),P=(0,b.scopeIsTeam)(L)?L.name:null,{files:R,uploading:_,inputFileRef:O,onInputChange:F}=(0,y.useTemplateFileUpload)({initialImages:A.imageUrl?[{url:A.imageUrl,name:"Template Thumbnail"}]:[],disableDrag:!0}),[V,B]=(0,n.useState)(null!=(k=A.title)?k:""),[z,H]=(0,n.useState)(null!=(N=A.category)?N:null),[U,q]=(0,n.useState)(null!=(E=A.visibility)?E:"public"),[W,Z]=(0,n.useState)(null!=(M=A.description)?M:""),[G,K]=(0,n.useState)(null!=(I=A.tags)?I:[]),[X,$]=(0,n.useTransition)(),Y=null!=(T=null!=(D=null==(r=R.at(0))?void 0:r.url)?D:A.imageUrl)?T:null,J=()=>{$(async()=>{if(!V.trim())return void x.toast.error("Name is required");if(!z)return void x.toast.error("Category is required");if(!Y)return void x.toast.error("Thumbnail required");if(!A.chatId)return void x.toast.error("Template is not associated with a chat");let e={chatId:A.chatId,title:V.trim(),category:z,tags:G,description:W||"",imageUrl:Y,visibility:U,existingCanonId:A.templateCanonId};try{await (0,w.saveTemplate)(e),x.toast.success("Template saved"),(0,j.closeDialog)()}catch(e){x.toast.error((null==e?void 0:e.message)||"Failed to save template")}})},Q=()=>{(0,j.openDialog)({type:"templateDelete",data:{blockId:A.templateVersion.blockId}})};return(0,t.jsxs)(s.AtomicDialog,{type:"templateEdit",className:"flex flex-col md:max-h-[90vh]",children:[(0,t.jsx)(o.ModalHeader,{children:(0,t.jsx)(o.ModalTitle,{children:(0,t.jsx)("span",{children:"Edit Details"})})}),(0,t.jsxs)(o.ModalContent,{className:"flex flex-col gap-4 overflow-y-auto",children:[(0,t.jsxs)(S,{children:[(0,t.jsx)(l.Label,{children:"Custom Thumbnail (1920x1080)"}),(0,t.jsxs)("div",{className:"relative w-full",children:[(0,t.jsxs)("label",{htmlFor:"thumbnail-upload-".concat(A.templateCanonId),className:"group border-alpha-400 bg-muted relative flex aspect-video w-1/2 cursor-pointer items-center justify-center overflow-hidden rounded-md border",children:[Y?(0,t.jsx)(a.default,{src:Y,alt:"Template Thumbnail",fill:!0,className:"object-cover"}):(0,t.jsx)(g.Skeleton,{className:"h-full w-full"}),(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 bg-linear-to-t from-[#00000066] to-transparent opacity-0 transition-opacity group-hover:opacity-100"}),(0,t.jsx)("span",{className:"absolute inset-0 items-center justify-center pointer-events-none z-10 flex gap-2",children:(0,t.jsx)("div",{className:"rounded-md bg-background px-2 py-1 text-label-14 font-medium opacity-0 transition-opacity group-hover:opacity-100 pointer-events-auto",children:_?(0,t.jsx)(v.Spinner,{size:16}):"Change image"})})]}),(0,t.jsx)("input",{id:"thumbnail-upload-".concat(A.templateCanonId),className:"sr-only",accept:"image/*",type:"file",ref:O,onChange:F,disabled:_})]})]}),(0,t.jsxs)(S,{children:[(0,t.jsx)(l.Label,{children:"Name"}),(0,t.jsx)(c.Input,{placeholder:"Modern Landing Page",value:V,onChange:e=>B(e.target.value)})]}),(0,t.jsxs)(S,{children:[(0,t.jsx)(l.Label,{children:"Description"}),(0,t.jsx)(u.Textarea,{placeholder:"A modern landing page for a SaaS product",className:"min-h-[100px]",value:W,onChange:e=>Z(e.target.value)})]}),(0,t.jsxs)(S,{children:[(0,t.jsx)(l.Label,{children:"Category"}),(0,t.jsxs)(d.Select,{value:null!=z?z:void 0,onValueChange:H,children:[(0,t.jsx)(d.SelectTrigger,{children:(0,t.jsx)(d.SelectValue,{placeholder:"Select a category"})}),(0,t.jsx)(d.SelectContent,{children:[...i.templateCategories].map(e=>(0,t.jsx)(d.SelectItem,{value:e.value,children:e.text},e.value))})]})]}),(0,t.jsxs)(S,{children:[(0,t.jsx)(l.Label,{children:"Tags"}),(0,t.jsx)(C.TagInput,{tags:G,setTags:K})]}),(0,t.jsxs)(S,{children:[(0,t.jsx)(l.Label,{children:"Visibility"}),(0,t.jsxs)(d.Select,{value:U,onValueChange:e=>q(e),children:[(0,t.jsx)(d.SelectTrigger,{children:(0,t.jsx)(d.SelectValue,{placeholder:"Select visibility"})}),(0,t.jsxs)(d.SelectContent,{children:[(0,t.jsx)(d.SelectItem,{value:"public",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(p.Globe,{className:"w-4 aspect-square"})," ",(0,t.jsx)("span",{children:"Everyone in the Community"})]})}),P&&(0,t.jsx)(d.SelectItem,{value:"team",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(h.Users,{className:"w-4 aspect-square"})," ",(0,t.jsxs)("span",{children:["Everyone in ",P]})]})})]})]})]})]}),(0,t.jsxs)(o.ModalFooter,{className:"border-t bg-alpha-400/10",children:[(0,t.jsx)(m.Button,{className:"sm:mr-auto",size:"sm",variant:"destructive",onClick:Q,children:"Delete Template"}),(0,t.jsx)(m.Button,{size:"sm",variant:"secondary",onClick:j.closeDialog,children:"Cancel"}),(0,t.jsx)(m.Button,{size:"sm",disabled:_||X,onClick:J,children:(0,t.jsx)(f.ActionStatus,{isLoading:_||X,loading:_||X,children:"Update Template"})})]})]})}},886058,e=>{"use strict";e.s(["TemplateDeleteDialog",()=>p],886058);var t=e.i(832520),n=e.i(547259),r=(0,n.createServerReference)("40799787b583351b8a2761c5c4a2f3670c60dba42c",n.callServer,void 0,n.findSourceMapURL,"deleteTemplateAction");e.i(563948);var i=e.i(407562),a=e.i(200407),o=e.i(307778),s=e.i(120945);e.i(904347);var l=e.i(37737),c=e.i(176248),u=e.i(297239),d=e.i(686832);function p(e){let{blockId:n}=e,p=(0,u.useT)(),[h,f]=(0,a.useTransition)(),m=()=>{f(async()=>{try{let e=await r(n);if(e.error)return void i.toast.error(e.error);i.toast.success("Deleted successfully"),(0,l.closeDialog)()}catch(e){i.toast.error((null==e?void 0:e.message)||"Failed to delete template")}})};return(0,t.jsxs)(s.AtomicDialog,{type:"templateDelete",children:[(0,t.jsxs)(d.ModalHeader,{children:[(0,t.jsx)(d.ModalTitle,{children:p("deleteTemplateDialog.title")}),(0,t.jsx)(d.ModalDescription,{children:p("deleteTemplateDialog.description")})]}),(0,t.jsxs)(d.ModalFooter,{children:[(0,t.jsx)(c.Button,{size:"sm",variant:"secondary",onClick:l.closeDialog,children:p("deleteTemplateDialog.cancel")}),(0,t.jsx)(c.Button,{disabled:h,onClick:m,size:"sm",variant:"destructive",children:h?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.IconSpinner,{className:"size-4"}),p("deleteTemplateDialog.deleting")]}):p("deleteTemplateDialog.delete")})]})]})}},373998,e=>{"use strict";var t=e.i(205341),n=e.i(753533),r=e.i(142219),i=e.i(819969),a=e.i(470259);let o=new Map,s=(0,n.cacheResultById)(o,()=>({isOpen:(0,t.atom)(!1),openLocation:(0,t.atom)(null),selectedEnvironment:(0,t.atom)(null),protection:(0,t.atom)("public"),newBranchName:(0,t.atom)(null),newBranchNameError:(0,t.atom)(null),protectionPassword:(0,t.atom)(null),stageIntent:(0,t.atom)(null),newDomain:(0,t.atom)(null),passingState:(0,t.atom)(null),deployWarning:(0,t.atom)(null),hasDeployableChanges:(0,t.atom)(!1),domainError:(0,t.atom)(null),domainErrorRedirect:(0,t.atom)(null),asyncActionLoading:(0,t.atom)(null),activeBlockVersionNumber:(0,t.atom)(null),deployButtonClickedAtTimestamp:(0,t.atom)(null),deployCreationStartTimestamp:(0,t.atom)(null),deployCreationEndTimestamp:(0,t.atom)(null),selectedTemplate:(0,t.atom)(null),templateAction:(0,t.atom)(null),templateEntryChoice:(0,t.atom)(null)})),l=new Map,c=(0,n.cacheResultById)(l,e=>{let n=s(e),r=(0,i.getChatAtoms)(e),o=(0,t.atom)(e=>["not-deployed","deployed","git-pushed-no-deploy","failed"].includes(e(r.deploymentState))&&!e(r.isStreaming)),l=(0,t.atom)(e=>e(o)&&"deploy"!==e(n.asyncActionLoading)),c=(0,t.atom)(e=>"preview"===e(n.selectedEnvironment)?e(o)&&!!e(n.newBranchName):e(o)&&"pushing"!==e(n.asyncActionLoading));return{...n,externalMeta:r.externalMeta,deploymentState:r.deploymentState,isAbleToDeploy:l,isAbleToPushChanges:c,stage:(0,t.atom)(e=>{var t;let i=e(r.externalMeta);if(i.error){if(i.error===a.MISSING_MFA_SCOPE)return"two-factor-error";if(i.error!==a.NOT_FOUND)return"error"}if(e(n.deployWarning))return"deploy-warning";let o=e(n.stageIntent);return o||((null==(t=i.deployment)?void 0:t.id)?"deployment":"create")}),statusDotVariant:(0,t.atom)(e=>{if(e(n.passingState))return null;if(e(n.hasDeployableChanges))switch(e(r.deploymentState)){case"not-deployed":case"deployed":return"success";case"failed":return"error"}return null}),buttonVariant:(0,t.atom)(e=>{let t=e(n.passingState);if(t)switch(t){case"passing-deployed":return"secondary";case"passing-error":return"red"}let i=e(r.deploymentState);if(e(n.hasDeployableChanges)&&"failed"===i)return"primary";if(!e(n.hasDeployableChanges)&&"failed"===i)return"red";if("error"===i)return"secondary";switch(i){case"deployed":case"not-deployed":return"primary";default:return"secondary"}}),isNewDomainValid:(0,t.atom)(e=>{let t=e(n.newDomain);return!!t&&/^[a-zA-Z0-9]([a-zA-Z0-9-]*[a-zA-Z0-9])?$/.test(t)}),asyncActionLoadingLabel:(0,t.atom)(e=>{let t=e(n.asyncActionLoading),r={deploy:"Deploying","assigning-domain":"Assigning Domain",pushing:"Pushing","auto-fixing-errors":"Auto-fixing Errors","auto-fixing-warning":"Auto-fixing Warning"};return t?r[t]:null})}});function u(e){let t=s(e);return{setIsOpenForLocation:(e,n)=>{e?(r.store.set(t.openLocation,n),r.store.set(t.isOpen,!0)):(r.store.set(t.isOpen,!1),r.store.set(t.openLocation,null))},setStageIntent:e=>r.store.set(t.stageIntent,e),setAsyncActionLoading:e=>r.store.set(t.asyncActionLoading,e),updateNewBranchName:e=>{let n=null==e?void 0:e.replace(/\s+/g,"-");r.store.set(t.newBranchName,null!=n?n:null),r.store.set(t.newBranchNameError,null)},setActiveBlockVersionNumber:e=>{r.store.set(t.activeBlockVersionNumber,e)},setDeployButtonClickedAtTimestamp:e=>{r.store.set(t.deployButtonClickedAtTimestamp,e)},setDeployCreationStartTimestamp:e=>{r.store.set(t.deployCreationStartTimestamp,e)},setDeployCreationEndTimestamp:e=>{r.store.set(t.deployCreationEndTimestamp,e)},setSelectedEnvironment:e=>r.store.set(t.selectedEnvironment,e),setProtection:e=>r.store.set(t.protection,e),setProtectionPassword:e=>r.store.set(t.protectionPassword,e),setNewBranchNameError:e=>r.store.set(t.newBranchNameError,e),clearBranchNameError:()=>r.store.set(t.newBranchNameError,null),triggerPassingState:function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;return r.store.set(t.passingState,e),setTimeout(()=>{r.store.set(t.passingState,null)},n)},setDeployWarning:e=>r.store.set(t.deployWarning,e),setHasDeployableChanges:e=>r.store.set(t.hasDeployableChanges,e),setNewDomain:e=>r.store.set(t.newDomain,e),setDomainError:e=>r.store.set(t.domainError,e),setDomainErrorRedirect:e=>r.store.set(t.domainErrorRedirect,e),setSelectedTemplate:e=>r.store.set(t.selectedTemplate,e),setTemplateAction:e=>r.store.set(t.templateAction,e),setTemplateEntryChoice:e=>r.store.set(t.templateEntryChoice,e)}}e.s(["getChatDeploymentActions",()=>u,"getChatDeploymentAtoms",0,c])},246185,e=>{e.v({choiceBoxItem:"choice-box-module__9Hhm3a__choiceBoxItem"})},386688,e=>{"use strict";var t=e.i(832520),n=e.i(338157),r=e.i(304649),i=e.i(246185);let a=e=>{let{label:i,direction:a="column",value:o,onChange:s,className:l,children:c,...u}=e;return(0,t.jsxs)("div",{className:(0,r.cn)("space-y-2",l),children:[i&&(0,t.jsx)("div",{className:"text-sm font-medium",children:i}),(0,t.jsx)(n.RadioGroup,{value:null!=o?o:void 0,onValueChange:s,className:(0,r.cn)("gap-2","row"===a?"flex":"flex flex-col"),...u,children:c})]})};a.Item=function(e){let{title:a,description:o,value:s,Icon:l,disabled:c}=e;return(0,t.jsxs)("label",{htmlFor:s,className:(0,r.cn)("flex w-full cursor-pointer items-center justify-between rounded-md border border-gray-200 p-3 text-gray-900 transition-colors",!c&&"hover:bg-gray-50",i.default.choiceBoxItem),children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[l&&(0,t.jsx)("div",{"data-icon":!0,className:"text-gray-500",children:l}),(0,t.jsxs)("div",{className:"text-label-14 flex flex-col gap-1 font-medium",children:[(0,t.jsx)("span",{"data-title":!0,children:a}),(0,t.jsx)("span",{className:"font-normal text-gray-500","data-description":!0,children:o})]})]}),(0,t.jsx)(n.RadioGroupItem,{value:s,id:s,disabled:c})]})},e.s(["ChoiceBoxGroup",()=>a])},15962,625482,e=>{"use strict";var t=e.i(832520),n=e.i(176248),r=e.i(373998),i=e.i(386688),a=e.i(780292),o=e.i(686832);e.i(472428);var s=e.i(152641);function l(e){var l;let{chatId:c,goTo:u,close:d}=e,{setTemplateAction:p,setTemplateEntryChoice:h}=(0,r.getChatDeploymentActions)(c),f=(0,r.getChatDeploymentAtoms)(c),m=(0,a.useAtomValue)(f.templateEntryChoice),{data:g,isLoading:v}=(0,s.useServerQuerySWR)(["scoped","editableTemplates"],{});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(o.ModalHeader,{children:[(0,t.jsx)(o.ModalTitle,{children:"Publish as Template"}),(0,t.jsx)(o.ModalDescription,{children:"Create a new template, or update an existing template"})]}),(0,t.jsx)(o.ModalContent,{children:(0,t.jsxs)(i.ChoiceBoxGroup,{value:m,className:"flex flex-col gap-2",onChange:e=>h(e),children:[(0,t.jsx)(i.ChoiceBoxGroup.Item,{value:"create",title:"New Template",description:"Create a brand new template."}),(0,t.jsx)(i.ChoiceBoxGroup.Item,{value:"update",title:"Update an Existing Template",description:"Push updates to an existing template.",disabled:v||(null==(l=g.templates)?void 0:l.length)===0})]})}),(0,t.jsxs)(o.ModalFooter,{className:"border-t bg-alpha-400/10",children:[(0,t.jsx)(n.Button,{size:"sm",variant:"secondary",onClick:d,children:"Cancel"}),(0,t.jsx)(n.Button,{size:"sm",disabled:null===m,onClick:()=>{"create"===m?(p("created"),u("submit-as-template")):"update"===m&&(p("updated"),u("template-picker"))},children:"Continue"})]})]})}e.s(["TemplateEntryStage",()=>l],15962);var c=e.i(467105);e.s(["GitBranchIcon",()=>c.default],625482)},66438,e=>{"use strict";let t=(0,e.i(121793).default)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);e.s(["default",()=>t])},699410,e=>{"use strict";var t=e.i(66438);e.s(["Sparkles",()=>t.default])},548866,e=>{"use strict";var t=e.i(832520);function n(e){let{title:n,children:i,icon:a,variant:o="default"}=e;return(0,t.jsxs)("div",{className:"border-alpha-200 bg-muted flex min-h-[200px] flex-col items-center justify-center gap-4 text-balance rounded-md border px-6 py-8 text-center",children:[a?(0,t.jsx)("div",{className:r({variant:o}),children:a}):null,(0,t.jsxs)("div",{className:"flex flex-col gap-1.5",children:[(0,t.jsx)("span",{className:"text-label-16 font-medium",children:n}),(0,t.jsx)("span",{className:"text-label-14 text-gray-500",children:i})]})]})}let r=(0,e.i(89440).cva)("bg-background border-alpha-400 flex size-8 items-center justify-center rounded-[6px] border",{variants:{variant:{default:"text-gray-900",warning:"text-amber-600",error:"text-red-600",success:"text-green-600"}},defaultVariants:{variant:"default"}});e.s(["EmptyState",()=>n])},313758,557391,e=>{"use strict";var t=e.i(832520),n=e.i(373998),r=e.i(176248),i=e.i(762585);e.i(472428);var a=e.i(152641),o=e.i(200407),s=e.i(299313),l=e.i(625482),c=e.i(699410),u=e.i(548866),d=e.i(686832);function p(e){var i;let{chatId:s,goTo:l,close:p}=e,{setSelectedTemplate:m}=(0,n.getChatDeploymentActions)(s),{data:g,isLoading:v}=(0,a.useServerQuerySWR)(["scoped","editableTemplates"],{}),x=g.templates,[y,b]=(0,o.useState)(null);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(d.ModalHeader,{children:[(0,t.jsx)(d.ModalTitle,{children:"Select a Template"}),(0,t.jsx)(d.ModalDescription,{children:"Select which template you want to update"})]}),(0,t.jsxs)(d.ModalContent,{className:"gap-4",children:[(0,t.jsx)("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 max-h-[300px] overflow-y-auto p-1",children:v&&(null==(i=g.templates)?void 0:i.length)===0?Array.from({length:4}).map((e,n)=>(0,t.jsx)(f,{},n)):null==x?void 0:x.map(e=>{var n;return(0,t.jsx)(h,{imageUrl:null!=(n=e.imageUrl)?n:void 0,title:e.title||e.templateVersion.title||"Untitled",forks:e.uses||0,likes:0,selected:y===e.templateCanonId,onClick:()=>b(e.templateCanonId)},e.templateCanonId)})}),!v&&(!x||0===x.length)&&(0,t.jsx)(u.EmptyState,{title:"No editable templates",icon:(0,t.jsx)(c.Sparkles,{})})]}),(0,t.jsxs)(d.ModalFooter,{className:"border-t bg-alpha-400/10",children:[(0,t.jsx)(r.Button,{size:"sm",variant:"secondary",onClick:()=>l("template-entry"),children:"Back"}),(0,t.jsx)(r.Button,{size:"sm",variant:"secondary",disabled:!y,onClick:()=>{y&&x&&(m(x.find(e=>e.templateCanonId===y)||null),l("submit-as-template"))},children:"Continue"})]})]})}let h=e=>{let{imageUrl:n,title:r,forks:i,likes:a,selected:o=!1,onClick:c}=e;return(0,t.jsxs)("button",{type:"button",onClick:c,className:"flex flex-col w-full",style:{outline:"none"},children:[(0,t.jsx)("div",{className:"relative w-full h-[110px] rounded-md mb-1 overflow-hidden ".concat(o?"ring-2 ring-blue-500":"ring-2 ring-gray-200"),children:n?(0,t.jsx)(s.default,{src:n,alt:r,fill:!0,className:"object-cover",style:{borderRadius:6}}):null}),(0,t.jsx)("span",{className:"text-label-14 font-medium text-left mt-0.5",children:r}),(0,t.jsx)("div",{className:"flex items-center gap-2 text-label-12 text-gray-500 -mt-0.5",children:(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(l.GitBranchIcon,{className:"w-3 aspect-square"}),i," Forks"]})})]})},f=()=>(0,t.jsxs)("div",{className:"flex flex-col w-full gap-1",children:[(0,t.jsx)(i.Skeleton,{className:"h-[110px] w-full rounded-md"}),(0,t.jsx)(i.Skeleton,{className:"h-4 w-3/4"}),(0,t.jsx)(i.Skeleton,{className:"h-3 w-1/2"})]});e.s(["TemplatePickerStage",()=>p],313758);var m=t,g=r,v=e.i(607391),x=n,y=e.i(707974),b=e.i(763480),w=e.i(592258),j=e.i(216445),C=e.i(780292),k=i,S=s,N=e.i(707827),E=e.i(484569),M=o,I=a,D=e.i(132440),T=e.i(959807),A=e.i(547259),L=(0,A.createServerReference)("7fef52f4b078a1da30e82e63f12975b4951bc12d0a",A.callServer,void 0,A.findSourceMapURL,"createTemplateForChat"),P=A,R=(0,P.createServerReference)("7fd40a266631619f43fd01948a67fb1b91158d78c9",P.callServer,void 0,P.findSourceMapURL,"reassignTemplateChat");e.i(563948);var _=e.i(407562),O=d,F=e.i(824897),V=e.i(150727),B=e.i(667660),z=e.i(342681),H=e.i(390215);function U(e){var t,n,r,i,a,o,s,l,c,u;let{chatId:d,goTo:p,close:h}=e,f=(0,x.getChatDeploymentAtoms)(d),{deployment:A}=(0,C.useAtomValue)(f.externalMeta),{activeScope:P}=(0,B.useActiveScope)(),z=(0,B.scopeIsTeam)(P)?P.name:null,U=(0,C.useAtomValue)(f.selectedTemplate),{data:Z,mutate:G}=(0,I.useServerQuerySWR)(["chat","template"],{chatId:d}),K=(0,C.useAtomValue)(f.templateEntryChoice),X=null!=(n=null!=U?U:Z)?n:null,{files:$,uploading:Y,inputFileRef:J,onInputChange:Q}=(0,E.useTemplateFileUpload)({initialImages:(null==X?void 0:X.imageUrl)?[{url:X.imageUrl,name:"Template Thumbnail"}]:(null==A?void 0:A.screenshotUrl)?[{url:A.screenshotUrl,name:"Deployment Screenshot"}]:[],disableDrag:!0}),[ee,et]=(0,M.useState)(null!=(r=null==X?void 0:X.title)?r:""),[en,er]=(0,M.useState)(null!=(i=null==X?void 0:X.category)?i:null),[ei,ea]=(0,M.useState)(null!=(a=null==X?void 0:X.visibility)?a:"public"),[eo,es]=(0,M.useState)(null!=(o=null==X?void 0:X.description)?o:""),[el,ec]=(0,M.useState)(null!=(s=null==X?void 0:X.tags)?s:[]),[eu,ed]=(0,M.useState)(!1),ep=null!=(u=null!=(c=null!=(l=null==(t=$.at(0))?void 0:t.url)?l:null==X?void 0:X.imageUrl)?c:null==A?void 0:A.screenshotUrl)?u:null,eh=async()=>{if(ed(!0),!ee.trim()){_.toast.error("Name is required"),ed(!1);return}if(!en){_.toast.error("Category is required"),ed(!1);return}if(!ep){_.toast.error("Thumbnail required"),ed(!1);return}let e={chatId:d,title:ee.trim(),category:en,tags:el,description:eo||"",imageUrl:ep,visibility:ei,existingCanonId:null==X?void 0:X.templateCanonId},t=W(e);try{if("create"===K){let{existingCanonId:n,...r}=e;await G({serverMutate:L(r),optimisticData:t})}else if(X&&X.chatId===d)await G({serverMutate:(0,T.saveTemplate)(e),optimisticData:t});else{if(!X)return void _.toast.error("An error occurred while saving the template.");await R({templateCanonId:X.templateCanonId,newChatId:d}),await G({serverMutate:(0,T.saveTemplate)(e),optimisticData:t})}_.toast.success("Template saved"),p("template-submission-success")}catch(e){_.toast.error((null==e?void 0:e.message)||"Failed to save template")}finally{ed(!1)}};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(O.ModalHeader,{children:[(0,m.jsxs)(O.ModalTitle,{children:[X?(0,m.jsx)("span",{children:"Update"}):(0,m.jsx)("span",{children:"Submit"})," ",(0,m.jsx)("span",{children:"a Template"})]}),(0,m.jsx)(O.ModalDescription,{children:X?"Update the details of this template":"Submit this chat as a new template"})]}),(0,m.jsxs)(O.ModalContent,{className:"flex flex-col gap-4",children:[(0,m.jsxs)(q,{children:[(0,m.jsx)(y.Label,{children:"Custom Thumbnail (1920x1080)"}),(0,m.jsxs)("div",{className:"relative w-full",children:[(0,m.jsxs)("label",{htmlFor:"thumbnail-upload-".concat(d),className:"group border-alpha-400 bg-muted relative flex aspect-video w-1/2 cursor-pointer items-center justify-center overflow-hidden rounded-md border",children:[ep?(0,m.jsx)(S.default,{src:ep,alt:"Template Thumbnail",fill:!0,className:"object-cover"}):(0,m.jsx)(k.Skeleton,{className:"h-full w-full"}),(0,m.jsx)("div",{className:"pointer-events-none absolute inset-0 bg-linear-to-t from-[#00000066] to-transparent opacity-0 transition-opacity group-hover:opacity-100"}),(0,m.jsx)("span",{className:"absolute inset-0 items-center justify-center pointer-events-none z-10 flex gap-2",children:(0,m.jsx)("div",{className:"rounded-md bg-background px-2 py-1 text-label-14 font-medium opacity-0 transition-opacity group-hover:opacity-100 pointer-events-auto",children:Y?(0,m.jsx)(N.Spinner,{size:16}):"Change image"})})]}),(0,m.jsx)("input",{id:"thumbnail-upload-".concat(d),className:"sr-only",accept:"image/*",type:"file",ref:J,onChange:Q,disabled:Y})]})]}),(0,m.jsxs)(q,{children:[(0,m.jsx)(y.Label,{children:"Name"}),(0,m.jsx)(b.Input,{placeholder:"Modern Landing Page",value:ee,onChange:e=>et(e.target.value)})]}),(0,m.jsxs)(q,{children:[(0,m.jsx)(y.Label,{children:"Description"}),(0,m.jsx)(j.Textarea,{placeholder:"A modern landing page for a SaaS product",className:"min-h-[100px]",value:eo,onChange:e=>es(e.target.value)})]}),(0,m.jsxs)(q,{children:[(0,m.jsx)(y.Label,{children:"Category"}),(0,m.jsxs)(w.Select,{value:null!=en?en:void 0,onValueChange:er,children:[(0,m.jsx)(w.SelectTrigger,{children:(0,m.jsx)(w.SelectValue,{placeholder:"Select a category"})}),(0,m.jsx)(w.SelectContent,{children:[...D.templateCategories].map(e=>(0,m.jsx)(w.SelectItem,{value:e.value,children:e.text},e.value))})]})]}),(0,m.jsxs)(q,{children:[(0,m.jsx)(y.Label,{children:"Tags"}),(0,m.jsx)(H.TagInput,{tags:el,setTags:ec})]}),(0,m.jsxs)(q,{children:[(0,m.jsx)(y.Label,{children:"Visibility"}),(0,m.jsxs)(w.Select,{value:ei,onValueChange:e=>ea(e),children:[(0,m.jsx)(w.SelectTrigger,{children:(0,m.jsx)(w.SelectValue,{placeholder:"Select visibility"})}),(0,m.jsxs)(w.SelectContent,{children:[(0,m.jsx)(w.SelectItem,{value:"public",children:(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[(0,m.jsx)(F.Globe,{className:"w-4 aspect-square"})," ",(0,m.jsx)("span",{children:"Everyone in the Community"})]})}),z&&(0,m.jsx)(w.SelectItem,{value:"team",children:(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[(0,m.jsx)(V.Users,{className:"w-4 aspect-square"})," ",(0,m.jsxs)("span",{children:["Everyone in ",z]})]})})]})]})]})]}),(0,m.jsxs)(O.ModalFooter,{className:"border-t bg-alpha-400/10",children:[(0,m.jsx)(g.Button,{size:"sm",variant:"secondary",onClick:h,children:"Cancel"}),(0,m.jsx)(g.Button,{size:"sm",disabled:Y||eu,onClick:eh,children:(0,m.jsx)(v.ActionStatus,{isLoading:Y||eu,loading:Y||eu,children:X?"Update Template":"Submit Template"})})]})]})}let q=e=>{let{children:t}=e;return(0,m.jsx)("div",{className:"flex flex-col gap-2",children:t})},W=e=>{var t;return{...e,createdAt:new Date,updatedAt:new Date,deletedAt:null,templateCanonId:(0,z.generateTemplateId)(),templateVersionId:(0,z.generateTemplateId)(),authorId:"optimisticData",uses:0,trendingScore:0,trendingScoreOffset:0,order:0,projectId:"optimisticData",teamId:"optimisticData",visibility:null!=(t=e.visibility)?t:"public",keywords:null,templateVersion:{block:{latestDeploymentInfo:{deploymentId:"optimisticData"}}}}};e.s(["SubmitAsTemplateStage",()=>U],557391)},455690,e=>{"use strict";function t(e){return"v0[bot]"===e.meta.githubCommitAuthorLogin}e.s(["isGithubCommitByV0Bot",()=>t])},741888,e=>{"use strict";var t=e.i(832520),n=e.i(200407),r=e.i(120945),i=e.i(37737),a=e.i(15962),o=e.i(313758),s=e.i(557391),l=t,c=e.i(176248),u=e.i(373998),d=e.i(780292),p=e.i(686832),h=e.i(299313);e.i(472428);var f=e.i(152641),m=e.i(230766),g=e.i(69302),v=e.i(455690);function x(e){let{imageSrc:t,onClick:n,label:r="View Template Details"}=e;return(0,l.jsxs)("button",{type:"button",onClick:n,className:"group border-alpha-400 bg-muted relative flex aspect-video w-full cursor-pointer items-center justify-center overflow-hidden rounded-md border",children:[(0,l.jsx)(h.default,{src:t,alt:"Template Thumbnail",fill:!0,className:"object-cover"}),(0,l.jsx)("div",{className:"pointer-events-none absolute inset-0 bg-linear-to-t from-[#00000066] to-transparent opacity-0 transition-opacity group-hover:opacity-100"}),(0,l.jsx)("span",{className:"absolute inset-0 items-center justify-center pointer-events-none z-10 flex gap-2",children:(0,l.jsx)("div",{className:"rounded-md bg-background px-2 py-1 text-label-14 font-medium opacity-0 transition-opacity group-hover:opacity-100",children:r})})]})}function y(e){let{title:t,forks:n=0,avatarUserId:r,deployment:i}=e;return(0,l.jsxs)("div",{className:"w-full flex flex-row justify-start items-center gap-x-3",children:[(0,l.jsx)("div",{className:"w-8 h-8 rounded-full bg-muted",children:r&&i&&!(0,v.isGithubCommitByV0Bot)(i)?(0,l.jsx)(m.AvatarUser,{userId:r,rounded:!0,size:"md"}):null}),(0,l.jsxs)("div",{className:"flex flex-col justify-center items-start text-label-14",children:[(0,l.jsx)("span",{className:"font-medium",children:null!=t?t:"Untitled"}),(0,l.jsxs)("div",{className:"flex flex-row justify-start items-center gap-x-1.5",children:[(0,l.jsx)(g.GitBranch,{className:"w-4 aspect-square text-gray-500"}),(0,l.jsxs)("div",{children:[n," forks"]})]})]})]})}function b(e){var t,n,r,i;let{chatId:a,goTo:o,close:s}=e,h=(0,u.getChatDeploymentAtoms)(a),m=(0,d.useAtomValue)(h.templateAction),{deployment:g}=(0,d.useAtomValue)(h.externalMeta),{data:v}=(0,f.useServerQuerySWR)(["chat","template"],{chatId:a}),b="updated"===m?"Template updated!":"Template submitted!",w="updated"===m?"Your template changes have been saved.":(null==v?void 0:v.visibility)==="public"?"Your template has been queued for review and will appear in the community shortly.":"Your template is now available for use by your team.";return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(p.ModalHeader,{children:[(0,l.jsx)(p.ModalTitle,{children:b}),(0,l.jsx)(p.ModalDescription,{children:w})]}),(0,l.jsx)(p.ModalContent,{children:(0,l.jsxs)("div",{className:"flex flex-col justify-start items-start gap-y-4",children:[(0,l.jsx)(x,{imageSrc:null!=(r=null!=(n=null==v?void 0:v.imageUrl)?n:null==g?void 0:g.screenshotUrl)?r:"",onClick:()=>o("submit-as-template")}),(0,l.jsx)(y,{title:null==v?void 0:v.title,forks:null==v?void 0:v.uses,avatarUserId:null!=(i=null==g||null==(t=g.creator)?void 0:t.uid)?i:null,deployment:g})]})}),(0,l.jsxs)(p.ModalFooter,{className:"border-t bg-alpha-400/10",children:[(0,l.jsx)(c.Button,{size:"sm",variant:"secondary",onClick:s,children:"Dismiss"}),(0,l.jsx)(c.Button,{size:"sm",onClick:()=>{window.open("/community/".concat(null==v?void 0:v.templateCanonId),"_blank")},children:"View Template"})]})]})}var w=u,j=t,C=c,k=u,S=d,N=p,E=f,M=e.i(547259),I=(0,M.createServerReference)("7f423483efa13eab54e50347e2104586876775cd71",M.callServer,void 0,M.findSourceMapURL,"publishTemplate");e.i(563948);var D=e.i(407562),T=n,A=e.i(607391);function L(e){var t,n,r,i,a;let{chatId:o,goTo:s,close:l}=e,c=(0,k.getChatDeploymentAtoms)(o),{deployment:u}=(0,S.useAtomValue)(c.externalMeta),{data:d,mutate:p}=(0,E.useServerQuerySWR)(["chat","template"],{chatId:o}),h=null==d||null==(t=d.templateVersion.block.latestDeploymentInfo)?void 0:t.deploymentId,f=!!(null==u?void 0:u.id)&&(null==u?void 0:u.id)!==h,[m,g]=(0,T.useState)(!1);if(!d)return null;let v=async()=>{g(!0);try{await I({templateCanonId:d.templateCanonId,chatId:o}),await p({serverMutate:Promise.resolve(!0),optimisticData:null}),D.toast.success("Changes published"),s("template-submission-success")}catch(e){D.toast.error((null==e?void 0:e.message)||"Failed to publish changes")}finally{g(!1)}};return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(N.ModalHeader,{children:[(0,j.jsx)(N.ModalTitle,{children:"Publish Changes to This Template"}),(0,j.jsxs)(N.ModalDescription,{children:["Publish your changes to ",d.title,". Once published, your template will be updated with the new changes from this chat."]})]}),(0,j.jsx)(N.ModalContent,{children:(0,j.jsxs)("div",{className:"flex flex-col justify-start items-start gap-y-4",children:[(0,j.jsx)(x,{imageSrc:null!=(i=null!=(r=d.imageUrl)?r:null==u?void 0:u.screenshotUrl)?i:"",onClick:()=>s("submit-as-template")}),(0,j.jsx)(y,{title:d.title,forks:d.uses,avatarUserId:null!=(a=null==u||null==(n=u.creator)?void 0:n.uid)?a:null,deployment:u})]})}),(0,j.jsxs)(N.ModalFooter,{className:"border-t bg-alpha-400/10",children:[(0,j.jsx)(C.Button,{size:"sm",variant:"secondary",onClick:l,children:"Cancel"}),(0,j.jsx)(C.Button,{size:"sm",disabled:m||!f,onClick:v,children:(0,j.jsx)(A.ActionStatus,{isLoading:m,loading:m,children:f?"Publish Changes":"No Changes to Publish"})})]})]})}function P(e){let{chatId:l,initialStage:c="template-entry"}=e,[u,d]=(0,n.useState)(c),{setSelectedTemplate:p}=(0,w.getChatDeploymentActions)(l),h=(0,n.useCallback)(e=>{d(e)},[]),f=(0,n.useCallback)(()=>{p(null),(0,i.closeDialog)()},[p]),m=()=>{let e={chatId:l,goTo:h,close:f};switch(u){case"template-entry":return(0,t.jsx)(a.TemplateEntryStage,{...e});case"template-picker":return(0,t.jsx)(o.TemplatePickerStage,{...e});case"submit-as-template":return(0,t.jsx)(s.SubmitAsTemplateStage,{...e});case"publish-template-changes":return(0,t.jsx)(L,{...e});case"template-submission-success":return(0,t.jsx)(b,{...e});default:return null}};return(0,t.jsx)(r.AtomicDialog,{type:"templateWizard",children:m()})}e.s(["TemplateWizardDialog",()=>P],741888)},808211,e=>{"use strict";let t=(0,e.i(121793).default)("Frown",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 16s-1.5-2-4-2-4 2-4 2",key:"epbg0q"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);e.s(["default",()=>t])},854920,e=>{"use strict";var t=e.i(808211);e.s(["Frown",()=>t.default])},440942,e=>{"use strict";let t=(0,e.i(121793).default)("Meh",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"8",x2:"16",y1:"15",y2:"15",key:"1xb1d9"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);e.s(["default",()=>t])},790560,e=>{"use strict";var t=e.i(440942);e.s(["Meh",()=>t.default])},887595,e=>{"use strict";let t=(0,e.i(121793).default)("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);e.s(["default",()=>t])},419846,761547,e=>{"use strict";var t=e.i(887595);e.s(["Smile",()=>t.default],419846);var n=e.i(547259),r=(0,n.createServerReference)("40bfab8e21b036d2138408d139804286e943231451",n.callServer,void 0,n.findSourceMapURL,"sendGeneralFeedback");e.s(["sendGeneralFeedback",()=>r],761547)},688371,320502,e=>{"use strict";e.s(["FeedbackDialog",()=>C],688371);var t=e.i(832520),n=e.i(304649),r=e.i(854920),i=e.i(790560),a=e.i(419846),o=e.i(216445),s=e.i(7684),l=e.i(200407);e.i(563948);var c=e.i(407562),u=e.i(761547),d=e.i(32170),p=e.i(176248),h=e.i(686832),f=e.i(297239);e.i(86448);var m=e.i(51940),g=e.i(120945),v=e.i(205341),x=e.i(780292);e.i(904347);var y=e.i(37737);let b=(0,v.atom)(""),w=(0,v.atom)(void 0),j=(0,v.atom)(void 0);function C(e){let{feedback:n,sentiment:r}=e,i=(0,f.useT)(),[a,o]=(0,x.useAtom)(b),[s,c]=(0,x.useAtom)(w),[u,d]=(0,x.useAtom)(j);return(0,l.useEffect)(()=>{n&&o(n),r&&c(r)},[]),(0,t.jsxs)(g.AtomicDialog,{type:"feedback",children:[(0,t.jsxs)(h.ModalHeader,{children:[(0,t.jsx)(h.ModalTitle,{children:i("feedbackDialog.title")}),(0,t.jsx)(h.ModalDescription,{children:i("feedbackDialog.description")})]}),(0,t.jsx)(h.ModalContent,{children:(0,t.jsx)(S,{feedback:a,selectedOption:s,setFeedback:o,closeDialog:y.closeDialog,setSelectedOption:c,setValidationError:d,validationError:u})})]})}function k(e){let{children:r,selectedOption:i,option:a,handleOptionClick:o}=e;return(0,t.jsx)(p.Button,{className:(0,n.cn)("transition-all duration-300",i===a&&"border-gray-900 hover:border-gray-900 focus:border-gray-900 focus-visible:border-gray-900"),onClick:()=>o(a),size:"sm",type:"button",variant:"secondary",children:r})}function S(e){let{feedback:g,setFeedback:v,selectedOption:x,setSelectedOption:y,validationError:b,setValidationError:w,closeDialog:j}=e,C=(0,f.useT)(),{user:S}=(0,d.useUser)(),N=e=>{e&&y(e),w(void 0)},E=e=>(e.preventDefault(),""===g.trim())?void w(C("feedbackDialog.error.enterFeedback")):x?void((0,u.sendGeneralFeedback)({feedback:g,url:location.href,sentiment:x,user:S}),j(),v(""),y("neutral"),w(void 0),c.toast.success(C("feedbackDialog.successToast"))):void w(C("feedbackDialog.error.selectEmoji")),{formRef:M,onKeyDown:I}=(0,s.useCmdEnterSubmit)(),D=(0,l.useRef)(null);return(0,l.useEffect)(()=>{if(D.current){console.log("focusing"),D.current.focus();let e=D.current.value.length;D.current.setSelectionRange(e,e)}},[]),(0,t.jsxs)("form",{className:"flex flex-col gap-4",onSubmit:E,ref:M,children:[(0,t.jsx)(o.Textarea,{asChild:!0,children:(0,t.jsx)(m.ResizableTextArea,{ref:D,maxHeight:224,minHeight:80,name:"feedback",onKeyDown:I,placeholder:C("feedbackDialog.yourFeedback"),spellCheck:!1,onChange:e=>v(e.target.value),value:g})}),(0,t.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,t.jsxs)("div",{className:"flex w-full items-center justify-start gap-2",children:[(0,t.jsx)(k,{handleOptionClick:N,option:"bad",selectedOption:x,children:(0,t.jsx)(r.Frown,{className:(0,n.cn)("size-4",{"dark:fill-red-400/80 fill-red-200":"bad"===x})})}),(0,t.jsx)(k,{handleOptionClick:N,option:"neutral",selectedOption:x,children:(0,t.jsx)(i.Meh,{className:(0,n.cn)("size-4",{"dark:fill-amber-500/70 fill-yellow-200":"neutral"===x})})}),(0,t.jsx)(k,{handleOptionClick:N,option:"good",selectedOption:x,children:(0,t.jsx)(a.Smile,{className:(0,n.cn)("size-4",{"dark:fill-green-500/60 fill-green-200":"good"===x})})}),(0,t.jsx)("div",{children:b&&(0,t.jsx)("div",{className:"text-sm text-red-700",role:"alert",children:b})})]}),(0,t.jsxs)(h.ModalFooter,{className:"p-0 md:p-0",children:[(0,t.jsx)(h.ModalClose,{asChild:!0,children:(0,t.jsx)(p.Button,{size:"sm",type:"button",variant:"secondary",onClick:j,children:C("feedbackDialog.cancel")})}),(0,t.jsx)(p.Button,{size:"sm",type:"submit",children:C("feedbackDialog.submit")})]})]})]})}var N=l,E=e.i(346970);function M(){var e;let{data:t,error:n,isLoading:r,mutate:i}=(0,E.default)("github:active-namespaces",async()=>{try{let e=new URLSearchParams({provider:"github"}),t=await fetch("/chat/api/git/search-namespaces?".concat(e.toString()));if(!t.ok)throw Error("Failed to search orgs");return await t.json()}catch(e){return[]}},{revalidateOnFocus:!0,revalidateOnMount:!0}),a=(0,N.useCallback)(()=>i(),[i]);return{userNamespace:null==t?void 0:t.userNamespace,orgNamespaces:(null==t?void 0:t.orgNamespaces)||[],revalidate:a,verifiedGitHubUser:(null==t||null==(e=t.user)?void 0:e.verified)?t.user:void 0,isLoading:r,error:n}}e.s(["useActiveGitNamespaces",()=>M],320502)},758057,e=>{"use strict";var t=e.i(200407);let n=(e,t)=>({left:window.screenX+(window.outerWidth-e)/2,top:window.screenY+(window.outerHeight-t)/2});function r(e){let{url:r,width:i=600,height:a=700,title:o="Authentication",onClose:s,onMessage:l,onPoll:c}=e,[u,d]=(0,t.useState)(null),[p,h]=(0,t.useState)(!1),f=(0,t.useCallback)(()=>{if(u&&!u.closed)return void u.focus();let{left:e,top:t}=n(i,a),s=window.open(r,o,"width=".concat(i,",height=").concat(a,",left=").concat(e,",top=").concat(t,",resizable=yes,scrollbars=yes,status=yes"));s?(d(s),h(!0)):console.error("Failed to open popup. It might have been blocked by the browser.")},[r,o,i,a,u,n]),m=(0,t.useCallback)(()=>{u&&!u.closed&&u.close(),d(null),h(!1)},[u]);return(0,t.useEffect)(()=>{let e=e=>{var t;l&&l(e),(null==(t=e.data)?void 0:t.type)==="auth-complete"&&m()};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[m,l]),(0,t.useEffect)(()=>{if(!u)return;let e=setInterval(()=>{u.closed&&(clearInterval(e),h(!1),d(null),s&&s())},500);return()=>{clearInterval(e)}},[u,s]),(0,t.useEffect)(()=>{if(!u||!c)return;let e=setInterval(()=>{try{c(u)}catch(t){console.warn("Error accessing popup window location, may be cross-origin:",t),clearInterval(e)}},500);return()=>{clearInterval(e)}},[u,c]),{isOpen:p,open:f,close:m,popupWindow:u}}e.s(["usePopupWindow",()=>r])},674725,e=>{"use strict";function t(e){return window.btoa(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}e.s(["encodeBase64URL",()=>t])},144019,922307,173899,770685,921,e=>{"use strict";e.s(["useAutoCreateProject",()=>u],144019),e.i(563948);var t=e.i(407562),n=e.i(547259),r=(0,n.createServerReference)("6028ca4602f84873e3d7bc31ecca21eaf662c31f4a",n.callServer,void 0,n.findSourceMapURL,"createNewVercelProject");e.s(["createNewVercelProject",()=>r],922307);var i=n,a=(0,i.createServerReference)("40735adef4865a66ab3332677c8af38f57a673b762",i.callServer,void 0,i.findSourceMapURL,"newProjectAction");e.s(["newProjectAction",()=>a],173899);var o=n,s=(0,o.createServerReference)("401031d704e398ca9e7fd059a832affc358913b666",o.callServer,void 0,o.findSourceMapURL,"assignProjectToChat");async function l(e){let{projectName:n,chatId:i,onSuccess:o,includeSuccessToast:l=!0}=e;try{if(e.existingProjectId){let t=await r(e.existingProjectId,n);if("errors"in t)return{errors:t.errors};let{id:i}=t;return{id:e.existingProjectId,vercelProjectId:i}}{let{id:e,vercelProjectId:r,name:c,errors:u,success:d}=await a({name:n,icon:"icon-wand-sparkles"});if(u)return{errors:u};if(d&&e){if(l&&t.toast.success("Project created successfully"),i){let t=await s({payload:{chatId:i,projectId:e}});if(null==t?void 0:t.error)return{errors:{name:["Failed to add chat to newly created project."]}}}return null==o||o(e),{id:e,vercelProjectId:r,name:c}}}return{errors:{name:["Failed to create project."]}}}catch(e){return console.error("Failed to create project:",e),l&&t.toast.error("An unexpected error occurred. Please try again."),{errors:{name:["An unexpected error occurred. Please try again."]}}}}e.s(["assignProjectToChat",()=>s],770685),e.s(["createProject",()=>l],921);var c=e.i(584497);function u(e){let{chatId:t,activeBlock:n}=e,{project:r,title:i,setMetadata:a}=(0,c.useChatMetadata)();return async()=>{if(!n||!t)return;let e=d(n,i);if(!(null==r?void 0:r.vercelProjectId)){let n=await l({existingProjectId:null==r?void 0:r.projectId,projectName:e,onSuccess:()=>{},chatId:t,includeSuccessToast:!1});if(n.id){var o,s;return await a({project:{projectId:n.id,vercelProjectId:null!=(o=n.vercelProjectId)?o:null,name:null!=(s=n.name)?s:e,settings:{color:null,icon:"icon-wand-sparkles"},isCreator:!0,...r}}),n}}}}function d(e,t){var n;let r="Duplicate of ",i=null!=(n=null==e?void 0:e.meta.title)?n:t;return i.startsWith(r)&&(i=i.slice(r.length)),i}},926923,e=>{"use strict";e.s(["ConnectRepoDialog",()=>S]);var t=e.i(832520),n=e.i(200407);e.i(563948);var r=e.i(407562),i=e.i(320502),a=e.i(66920),o=e.i(584497),s=e.i(858269),l=e.i(183673),c=e.i(176248),u=e.i(758057),d=e.i(120945);e.i(904347);var p=e.i(37737),h=e.i(686832),f=e.i(675120),m=e.i(762585),g=e.i(763480),v=e.i(707974),x=e.i(607391),y=e.i(674725);e.i(144019),e.i(707827),e.i(472428);var b=e.i(152641),w=e.i(449381),j=e.i(297239),C=e.i(667660),k=e.i(538553);function S(e){let{chatId:r,latestBlockId:i}=e,{hasVercelWritePermission:o}=(0,C.useActiveScope)(),{stage:s,isSigningIn:l,isInstallingApp:u,openSignIn:y,openInstallApp:b,error:w,isCreatingRepo:j,handleCreateRepo:S,repoName:M,setRepoName:I}=E(r,i),D=(0,n.useMemo)(()=>{switch(s){case"loading":return{title:(0,t.jsx)(m.Skeleton,{className:"h-[26px] w-[180px]"}),description:(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)(m.Skeleton,{className:"h-[14px] w-full"}),(0,t.jsx)(m.Skeleton,{className:"h-[14px] w-[75%]"})]}),actions:(0,t.jsx)(N,{children:(0,t.jsx)(m.Skeleton,{className:"h-7 w-24"})})};case"login":return{title:"Sign in with GitHub",description:"To connect this project to a GitHub repository, you need to sign in with your GitHub account",actions:(0,t.jsxs)(N,{children:[(0,t.jsx)(c.Button,{size:"sm",onClick:p.closeDialog,disabled:l,variant:"outline",children:"Cancel"}),(0,t.jsx)(c.Button,{size:"sm",onClick:y,disabled:l,children:(0,t.jsx)(x.ActionStatus,{isLoading:l,loading:"Signing in",children:"Sign in"})})]})};case"install-app":return{title:"Install GitHub App",description:"Install Vercel GitHub App on your personal GitHub account to create a repository.",actions:(0,t.jsxs)(N,{children:[(0,t.jsx)(c.Button,{size:"sm",onClick:p.closeDialog,disabled:u,variant:"outline",children:"Cancel"}),(0,t.jsx)(c.Button,{size:"sm",onClick:b,disabled:u,children:(0,t.jsx)(x.ActionStatus,{isLoading:u,loading:"Installing App",children:"Install Vercel App"})})]})};case"create-repo":return{title:"Connect to GitHub Repository",description:(0,t.jsxs)("span",{children:["Create a new repository on GitHub to push changes to. When you deploy, v0 will commit changes to the"," ",(0,t.jsx)("code",{className:"text-label-13-mono border-alpha-400 rounded-sm border bg-gray-100 px-1.5 py-0.5",children:"main"})," ","branch."]}),content:(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)(v.Label,{htmlFor:"repo-name",children:"Repository Name"}),(0,t.jsx)(k.RbacTooltip,{show:!o,requiredRole:"V0Builder",children:(0,t.jsx)(g.Input,{id:"repo-name",placeholder:"Repository Name",value:M,onChange:e=>I(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),S())},disabled:!o})})]}),actions:(0,t.jsxs)(N,{children:[(0,t.jsx)(c.Button,{size:"sm",onClick:p.closeDialog,variant:"outline",disabled:j,children:"Cancel"}),(0,t.jsx)(k.RbacTooltip,{show:!o,requiredRole:"V0Builder",children:(0,t.jsx)(c.Button,{size:"sm",onClick:S,disabled:j||!o,className:"overflow-hidden",children:(0,t.jsx)(x.ActionStatus,{isLoading:j,loading:"Creating Repository",children:"Create Repository"})})})]})}}},[s,y,l,b,u,M,j,S,I,o]);return(0,t.jsxs)(d.AtomicDialog,{type:"connectRepo",forceOpen:l||u||j,children:[(0,t.jsxs)(h.ModalHeader,{children:[(0,t.jsx)("div",{className:"border-border material-medium mb-2 flex w-min items-center justify-center justify-self-center rounded-lg border p-2 md:justify-self-start",children:(0,t.jsx)(a.GitHubLogoIcon,{className:"h-6 w-6"})}),(0,t.jsx)(f.TransitionNode,{...f.PRESETS.modalSection,renderKey:s,children:(0,t.jsx)(h.ModalTitle,{children:D.title})}),(0,t.jsx)(f.TransitionNode,{...f.PRESETS.modalSection,renderKey:s,children:(0,t.jsx)(h.ModalDescription,{children:D.description})})]}),(0,t.jsx)(h.ModalContent,{children:(0,t.jsx)(f.TransitionNode,{...f.PRESETS.modalSection,renderKey:"".concat(s,"-").concat(w),children:(0,t.jsxs)("div",{className:"flex w-full flex-col gap-2",children:[D.content,w?(0,t.jsx)("div",{className:"rounded-md border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:w}):null]})})}),(0,t.jsx)(h.ModalFooter,{children:(0,t.jsx)(f.TransitionNode,{...f.PRESETS.modalSection,renderKey:s,children:D.actions})})]})}function N(e){let{children:n}=e;return(0,t.jsx)("div",{className:"flex w-full justify-end gap-2",children:n})}function E(e,c){var d;let{project:h,title:f}=(0,o.useChatMetadata)(e),{revalidate:m}=(0,b.useServerQuerySWR)(["chat","externalMeta"],{chatId:e},{stopFetch:!e}),g=(0,w.useActiveBlockState)(e),{projectId:v=null==h?void 0:h.projectId}=(0,l.useProjectId)(),{projectName:x=null==h?void 0:h.name}=(0,l.useProjectName)(),{refetchVercelProject:C,vercelProjectWithDashboard:k}=(0,l.useVercelProject)({v0ProjectId:v}),S=null==k||null==(d=k.dashboardProject)?void 0:d.link,{userNamespace:N,verifiedGitHubUser:E,isLoading:M,revalidate:I}=(0,i.useActiveGitNamespaces)(),D=(0,j.useT)(),[T,A]=(0,n.useState)("loading"),[L,P]=(0,n.useState)(!1),[R,_]=(0,n.useState)(!1),[O,F]=(0,n.useState)(!1),V=(0,n.useRef)(!1),[B,z]=(0,n.useState)(null),[H,U]=(0,n.useState)("v0-".concat((0,s.default)(x||f))),q=(0,n.useMemo)(()=>(null==S?void 0:S.org)&&S.repo?"https://github.com/".concat(S.org,"/").concat(S.repo):void 0,[null==S?void 0:S.org,null==S?void 0:S.repo]);(0,n.useEffect)(()=>{if(S){(0,p.closeDialog)(),V.current||(r.toast.default("GitHub Connected",{description:"Click to view your repository",icon:(0,t.jsx)(a.GitHubLogoIcon,{className:"h-6 w-6"}),action:q?{children:"View",onClick:()=>{window.open(q,"_blank")}}:void 0}),V.current=!0);return}if(!M){if(!E)return void A("login");if(!N)return void A("install-app");A("create-repo"),U("v0-".concat((0,s.default)(x||f)))}},[S,M,q,x,f,N,E]);let W=(0,n.useCallback)(async()=>{try{if(P(!0),!v)return void r.toast.error("Chat needs to be in a project");if(!((null==N?void 0:N.name)&&N.ownerType))return void r.toast.error(D("gitSync.createRepo.repoOwnerNotSpecified"));let t=null==g?void 0:g.id,n=await fetch("/chat/api/git/connect",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({owner:N.name,repoName:H,projectId:v,blockId:t||c,chatId:e,from:"dialog"})});if(!n.ok){let e=await n.json(),t="Failed to create repository.";throw"repo_alr_exists"===e.error&&(t="Repository already exists. Try a new name."),Error(t)}await Promise.all([C(),m()])}catch(t){let e=t instanceof Error?t.message:"Failed to create repository";z(e),r.toast.error(e)}finally{P(!1)}},[v,null==N?void 0:N.name,null==N?void 0:N.ownerType,null==g?void 0:g.id,H,c,e,C,m,D]),Z="/chat/git/connected",G=window.location.origin+"/chat/git/callback",K="https://vercel.com/api/registration/login-with-github?next=".concat(encodeURIComponent(G)),X={next:"".concat(window.location.origin,"/github/installed")},$=(0,y.encodeBase64URL)(JSON.stringify(X)),Y=E?"https://github.com/apps/vercel/installations/select_target?state=".concat(encodeURIComponent($)):"",J=(0,n.useCallback)(async e=>{await I(),e()},[I]),{open:Q}=(0,u.usePopupWindow)({url:K,onPoll:e=>{e.location.pathname===Z&&J(()=>{e.close(),_(!1)})},onClose:()=>{J(()=>{_(!1)})}}),{open:ee}=(0,u.usePopupWindow)({url:Y,onPoll:e=>{console.log("popupWindow",e.location.pathname,Z),e.location.pathname===Z&&J(()=>{e.close(),F(!1)})},onClose:()=>{J(()=>{F(!1)})}});return{stage:T,setStage:A,error:B,repoName:H,setRepoName:U,isCreatingRepo:L,isSigningIn:R,isInstallingApp:O,handleCreateRepo:W,openSignIn:function(){_(!0),Q()},openInstallApp:function(){F(!0),ee()}}}},897850,e=>{"use strict";var t=e.i(667660);function n(e){let{role:n,plan:r}=e,{user:i,isTeam:a,isActiveScopeReady:o}=(0,t.useActiveScope)(),s=n||(null==i?void 0:i.teamRole),l=r||(null==i?void 0:i.v0plan),c=!o&&(!n||!r);return o&&!a?{isLoading:c,needsToRequestCredits:!1,shouldInvoice:!1,canBuyCredits:"v0-level0"!==l}:{canBuyCredits:"v0-level0"!==l,needsToRequestCredits:"OWNER"!==s&&"BILLING"!==s,shouldInvoice:"v0-enterprise"===l,isLoading:c}}e.s(["useCanBuyCredits",()=>n])},334627,938810,e=>{"use strict";let t=(0,e.i(121793).default)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);e.s(["default",()=>t],938810),e.s(["InfoIcon",()=>t],334627)},722198,337034,593640,e=>{"use strict";e.s(["CreditBalance",()=>Y,"CurrencyInput",()=>Q],722198);var t=e.i(832520),n=e.i(200407),r=e.i(46601),i=e.i(996174),a=e.i(480118),o=n,s=function(){return(s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function l(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function c(e,t,n){if(n||2==arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError;var u=function(e){return e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")},d={k:1e3,m:1e6,b:1e9},p=function(e,t){void 0===t&&(t=".");var n=RegExp("(\\d+(".concat(u(t),"\\d*)?)([kmb])$"),"i"),r=e.match(n);if(r){var i=r[1],a=d[r[3].toLowerCase()];return Number(i.replace(t,"."))*a}},h=function(e,t){void 0===t&&(t=",");var n=RegExp(u(t),"g");return e.replace(n,"")},f=function(e,t){var n=u(t.join("")),r=RegExp("[^\\d".concat(n,"]"),"gi");return e.replace(r,"")},m=function(e){var t=e.value,n=e.groupSeparator,r=void 0===n?",":n,i=e.decimalSeparator,a=void 0===i?".":i,o=e.allowDecimals,s=void 0===o||o,l=e.decimalsLimit,d=void 0===l?2:l,m=e.allowNegativeValue,g=void 0===m||m,v=e.disableAbbreviations,x=void 0!==v&&v,y=e.prefix,b=void 0===y?"":y,w=e.transformRawValue,j=(void 0===w?function(e){return e}:w)(t);if("-"===j)return j;var C=x?[]:["k","m","b"],k=new RegExp("((^|\\D)-\\d)|(-".concat(u(b),")")).test(j),S=RegExp("(\\d+)-?".concat(u(b))).exec(t)||[],N=S[0],E=S[1],M=f(h(b?N?j.replace(N,"").concat(E):j.replace(b,""):j,r),c([r,a],C,!0)),I=M;if(!x){if(C.some(function(e){return e===M.toLowerCase().replace(a,"")}))return"";var D=p(M,a);D&&(I=String(D))}var T=k&&g?"-":"";if(a&&I.includes(a)){var A=M.split(a),L=A[0],P=A[1],R=d&&P?P.slice(0,d):P,_=s?"".concat(a).concat(R):"";return"".concat(T).concat(L).concat(_)}return"".concat(T).concat(I)},g=function(e,t,n){if(void 0!==n&&e.length>1){if(0===n)return e.replace(t,"");if(e.includes(t)){var r=e.split(t),i=r[0],a=r[1];if(a.length===n)return e;if(a.length>n)return"".concat(i).concat(t).concat(a.slice(0,n))}var o=e.length>n?new RegExp("(\\d+)(\\d{".concat(n,"})")):RegExp("(\\d)(\\d+)"),s=e.match(o);if(s){var i=s[1],a=s[2];return"".concat(i).concat(t).concat(a)}}return e},v=function(e,t){var n=t.groupSeparator,r=void 0===n?",":n,i=t.decimalSeparator,a=void 0===i?".":i,o=new RegExp("\\d([^".concat(u(r)).concat(u(a),"0-9]+)")),s=e.match(o);return s?s[1]:void 0},x=function(e){var t=e.value,n=e.decimalSeparator,r=e.intlConfig,i=e.decimalScale,a=e.prefix,o=void 0===a?"":a,c=e.suffix,d=void 0===c?"":c;if(""===t||void 0===t)return"";if("-"===t)return"-";var p=new RegExp("^\\d?-".concat(o?"".concat(u(o),"?"):"","\\d")).test(t),h="."!==n?y(t,n,p):t;n&&"-"!==n&&h.startsWith(n)&&(h="0"+h);var f=r||{},m=f.locale,g=f.currency,x=l(f,["locale","currency"]),w=s(s({},x),{minimumFractionDigits:i||0,maximumFractionDigits:20}),j=b((r?new Intl.NumberFormat(m,s(s({},w),g&&{style:"currency",currency:g})):new Intl.NumberFormat(void 0,w)).formatToParts(Number(h)),e),C=v(j,s({},e)),k=t.slice(-1)===n?n:"",S=(h.match(RegExp("\\d+\\.(\\d+)"))||[])[1];return(void 0===i&&S&&n&&(j=j.includes(n)?j.replace(RegExp("(\\d+)(".concat(u(n),")(\\d+)"),"g"),"$1$2".concat(S)):C&&!d?j.replace(C,"".concat(n).concat(S).concat(C)):"".concat(j).concat(n).concat(S)),d&&k)?"".concat(j).concat(k).concat(d):C&&k?j.replace(C,"".concat(k).concat(C)):C&&d?j.replace(C,"".concat(k).concat(d)):[j,k,d].join("")},y=function(e,t,n){var r=e;return t&&"."!==t&&(r=r.replace(RegExp(u(t),"g"),"."),n&&"-"===t&&(r="-".concat(r.slice(1)))),r},b=function(e,t){var n=t.prefix,r=t.groupSeparator,i=t.decimalSeparator,a=t.decimalScale,o=t.disableGroupSeparators,s=void 0!==o&&o;return e.reduce(function(e,t,o){var l=t.type,u=t.value;return 0===o&&n?"minusSign"===l?[u,n]:"currency"===l?c(c([],e,!0),[n],!1):[n,u]:"currency"===l?n?e:c(c([],e,!0),[u],!1):"group"===l?s?e:c(c([],e,!0),[void 0!==r?r:u],!1):"decimal"===l?void 0!==a&&0===a?e:c(c([],e,!0),[void 0!==i?i:u],!1):"fraction"===l?c(c([],e,!0),[void 0!==a?u.slice(0,a):u],!1):c(c([],e,!0),[u],!1)},[""]).join("")},w={currencySymbol:"",groupSeparator:"",decimalSeparator:"",prefix:"",suffix:""},j=function(e){var t=e||{},n=t.locale,r=t.currency,i=l(t,["locale","currency"]);return(n?new Intl.NumberFormat(n,s(s({},i),r&&{currency:r,style:"currency"})):new Intl.NumberFormat).formatToParts(1000.1).reduce(function(e,t,n){if("currency"===t.type)if(0===n)return s(s({},e),{currencySymbol:t.value,prefix:t.value});else return s(s({},e),{currencySymbol:t.value,suffix:t.value});return"group"===t.type?s(s({},e),{groupSeparator:t.value}):"decimal"===t.type?s(s({},e),{decimalSeparator:t.value}):e},w)},C=function(e){return RegExp(/\d/,"gi").test(e)},k=function(e,t,n){if(void 0===n||""===t||void 0===t||""===e||void 0===e)return e;if(!e.match(/\d/g))return"";var r=e.split(t),i=r[0],a=r[1];if(0===n)return i;var o=a||"";if(o.length<n)for(;o.length<n;)o+="0";else o=o.slice(0,n);return"".concat(i).concat(t).concat(o)},S=function(e){var t=e.selectionStart,n=e.value,r=e.lastKeyStroke,i=e.stateValue,a=e.groupSeparator,o=t,s=n;if(i&&o){var l=n.split("");return"Backspace"===r&&i[o]===a&&(l.splice(o-1,1),o-=1),"Delete"===r&&i[o]===a&&(l.splice(o,1),o+=1),{modifiedValue:s=l.join(""),cursorPosition:o}}return{modifiedValue:s,cursorPosition:t}},N=(0,o.forwardRef)(function(e,t){var n=e.allowDecimals,r=void 0===n||n,i=e.allowNegativeValue,a=void 0===i||i,c=e.id,u=e.name,d=e.className,p=e.customInput,h=e.decimalsLimit,f=e.defaultValue,y=e.disabled,b=void 0!==y&&y,w=e.maxLength,N=e.value,E=e.onValueChange,M=e.fixedDecimalLength,I=e.placeholder,D=e.decimalScale,T=e.prefix,A=e.suffix,L=e.intlConfig,P=e.step,R=e.min,_=e.max,O=e.disableGroupSeparators,F=void 0!==O&&O,V=e.disableAbbreviations,B=void 0!==V&&V,z=e.decimalSeparator,H=e.groupSeparator,U=e.onChange,q=e.onFocus,W=e.onBlur,Z=e.onKeyDown,G=e.onKeyUp,K=e.transformRawValue,X=e.formatValueOnBlur,$=void 0===X||X,Y=l(e,["allowDecimals","allowNegativeValue","id","name","className","customInput","decimalsLimit","defaultValue","disabled","maxLength","value","onValueChange","fixedDecimalLength","placeholder","decimalScale","prefix","suffix","intlConfig","step","min","max","disableGroupSeparators","disableAbbreviations","decimalSeparator","groupSeparator","onChange","onFocus","onBlur","onKeyDown","onKeyUp","transformRawValue","formatValueOnBlur"]);if(z&&C(z))throw Error("decimalSeparator cannot be a number");if(H&&C(H))throw Error("groupSeparator cannot be a number");var J=(0,o.useMemo)(function(){return j(L)},[L]),Q=z||J.decimalSeparator||"",ee=H||J.groupSeparator||"";if(Q&&ee&&Q===ee&&!1===F)throw Error("decimalSeparator cannot be the same as groupSeparator");var et={decimalSeparator:Q,groupSeparator:ee,disableGroupSeparators:F,intlConfig:L,prefix:T||J.prefix,suffix:A},en={decimalSeparator:Q,groupSeparator:ee,allowDecimals:r,decimalsLimit:h||M||2,allowNegativeValue:a,disableAbbreviations:B,prefix:T||J.prefix,transformRawValue:K},er=(0,o.useState)(function(){return null!=f?x(s(s({},et),{decimalScale:D,value:String(f)})):null!=N?x(s(s({},et),{decimalScale:D,value:String(N)})):""}),ei=er[0],ea=er[1],eo=(0,o.useState)(!1),es=eo[0],el=eo[1],ec=(0,o.useState)(0),eu=ec[0],ed=ec[1],ep=(0,o.useState)(0),eh=ep[0],ef=ep[1],em=(0,o.useState)(null),eg=em[0],ev=em[1],ex=(0,o.useRef)(null);(0,o.useImperativeHandle)(t,function(){return ex.current});var ey=function(e,t){el(!0);var n=S({selectionStart:t,value:e,lastKeyStroke:eg,stateValue:ei,groupSeparator:ee}),r=n.modifiedValue,i=n.cursorPosition,a=m(s({value:r},en));if(!w||!(a.replace(/-/g,"").length>w)){if(""===a||"-"===a||a===Q){E&&E(void 0,u,{float:null,formatted:"",value:""}),ea(a),ed(1);return}var o=Q?a.replace(Q,"."):a,l=parseFloat(o),c=x(s({value:a},et));if(null!=i){var d=i+(c.length-e.length);ed(d=d<=0?T?T.length:0:d),ef(eh+1)}if(ea(c),E){var p={float:l,formatted:c,value:a};E(a,u,p)}}},eb=function(e){var t=e.target;ey(t.value,t.selectionStart),U&&U(e)},ew=function(e){return q&&q(e),ei?ei.length:0},ej=function(e){var t=e.target.value,n=m(s({value:t},en));if("-"===n||n===Q||!n){ea(""),W&&W(e);return}var r=k(g(n,Q,M),Q,void 0!==D?D:M),i=parseFloat(Q?r.replace(Q,"."):r),a=x(s(s({},et),{value:r}));E&&$&&E(r,u,{float:i,formatted:a,value:r}),ea(a),W&&W(e)},eC=function(e){var t=e.key;if(ev(t),P&&("ArrowUp"===t||"ArrowDown"===t)){e.preventDefault(),ed(ei.length);var n=null!=N?String(N):void 0,r=Q&&n?n.replace(Q,"."):n,i=parseFloat(null!=r?r:m(s({value:ei},en)))||0,o="ArrowUp"===t?i+P:i-P;if(void 0!==R&&o<Number(R)||!a&&o<0||void 0!==_&&o>Number(_))return;var l=String(P).includes(".")?Number(String(P).split(".")[1].length):void 0;ey(String(l?o.toFixed(l):o).replace(".",Q))}Z&&Z(e)},ek=function(e){var t=e.key,n=e.currentTarget.selectionStart;if("ArrowUp"!==t&&"ArrowDown"!==t&&"-"!==ei){var r=v(ei,{groupSeparator:ee,decimalSeparator:Q});if(r&&n&&n>ei.length-r.length&&ex.current){var i=ei.length-r.length;ex.current.setSelectionRange(i,i)}}G&&G(e)};(0,o.useEffect)(function(){null==N&&null==f&&ea("")},[f,N]),(0,o.useEffect)(function(){es&&"-"!==ei&&ex.current&&document.activeElement===ex.current&&ex.current.setSelectionRange(eu,eu)},[ei,eu,ex,es,eh]);var eS=function(){return null==N||"-"===ei||Q&&ei===Q?ei:x(s(s({},et),{decimalScale:es?void 0:D,value:String(N)}))},eN=s({type:"text",inputMode:"decimal",id:c,name:u,className:d,onChange:eb,onBlur:ej,onFocus:ew,onKeyDown:eC,onKeyUp:ek,placeholder:I,disabled:b,value:eS(),ref:ex},Y);if(p){var eE=p;return o.default.createElement(eE,s({},eN))}return o.default.createElement("input",s({},eN))});N.displayName="CurrencyInput";var E=e.i(403055),M=t,I=e.i(491341);function D(e){switch(e){case"v0-level0":return{toolTipMonthly:"These credits are issued monthly with your free plan. They do not roll over.",toolTipBuyMore:e=>(0,M.jsxs)(M.Fragment,{children:["You can't purchase additional credits on a free plan."," ",(0,M.jsx)(I.default,{href:e?"":"/chat/upgrade",onClick:e,className:"text-gray underline",children:"Upgrade Plan"})]})};case"v0-level3":return{toolTipMonthly:"These credits are issued monthly with your Premium plan. They do not roll over.",toolTipBuyMore:()=>(0,M.jsxs)(M.Fragment,{children:["Buy more credits to pay for more v0 usage outside of your monthly credit limit. These credits expire a year after purchase."," ",(0,M.jsx)(I.default,{href:"/pricing",className:"text-gray underline",children:"Learn more"})]})};case"v0-team":return{toolTipMonthly:"These credits are issued monthly with your Team plan. They do not roll over.",toolTipBuyMore:()=>(0,M.jsxs)(M.Fragment,{children:["Buy more credits to pay for more v0 usage outside of your monthly credit limit. These credits expire a year after purchase. Unlike monthly credits, they're shared amongst all members of the team."," ",(0,M.jsx)(I.default,{href:"/pricing",className:"text-gray underline",children:"Learn more"})]})};case"v0-enterprise":return{toolTipMonthly:"These credits are issued monthly with your Enterprise plan. They do not roll over.",toolTipBuyMore:()=>(0,M.jsxs)(M.Fragment,{children:["Buy more credits to pay for more v0 usage outside of your monthly credit limit. These credits expire a year after purchase. Unlike monthly credits, they're shared amongst all members of the team."," ",(0,M.jsx)(I.default,{href:"/pricing",className:"text-gray underline",children:"Learn more"})]})};default:return{toolTipMonthly:"These credits are issued monthly with your plan. They do not roll over.",toolTipBuyMore:e=>(0,M.jsxs)(M.Fragment,{children:["You can't purchase additional credits on a free plan."," ",(0,M.jsx)(I.default,{href:e?"":"/chat/upgrade",onClick:e,className:"text-gray underline",children:"Upgrade Plan"})]})}}}var T=e.i(176248);e.i(904347);var A=e.i(37737),L=t,P=n;let R=(0,L.jsxs)("svg",{width:"28",height:"22",viewBox:"0 0 28 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-7 h-5.5 scale-110",children:[(0,L.jsx)("g",{clipPath:"url(#clip0_14095_2055)",children:(0,L.jsx)("g",{style:{mixBlendMode:"multiply"},opacity:"0.6",children:(0,L.jsx)("path",{d:"M22.8902 14.5326C22.4927 14.799 22.0139 14.9541 21.4995 14.9541L16.4995 14.9535C15.1189 14.9533 14.0002 13.8343 14.0002 12.4537L13.9996 7.99959L11.9996 7.99994L12 13.0478C11.9996 14.6842 9.95272 15.4251 8.90499 14.1679L3.76523 8.00031L-1.0004 7.9998L-1.0001 6.9998L4.23428 6.99948L4.38364 7.17921L9.67373 13.5275C10.1228 14.0659 10.9997 13.7485 11 13.0475L10.9999 6.99963L13.9999 6.99959L14.0008 4.00057L-0.9992 3.9998L-0.998901 2.9998L14.0001 3.00154L14 -0.000410978L15 -9.95465e-05L15.0001 3.00185L15.5001 3.00006L19.0001 3.00017C20.3806 3.00012 21.4997 1.88046 21.4999 0.499972L21.4995 -1.50003L22.0005 -1.50085L22.5005 -1.49972L22.4999 0.499306C22.4999 2.43224 20.9327 4.00007 18.9998 4.00017L15.5008 4.00006L15.0008 4.00088L14.9999 6.9999L21.4999 6.99997C22.3227 7.00001 23.0509 7.3988 23.5064 8.01232L32.0704 3.06772L32.5702 3.93311L23.93 8.92163C23.974 9.10738 24.0001 9.30056 24.0001 9.49977L24.0002 12.4539C24.0002 12.9527 23.8531 13.4171 23.6014 13.8073L31.2834 19.088L30.7167 19.912L22.8902 14.5326ZM22.6323 8.5179C22.3572 8.20098 21.9522 7.99997 21.4996 7.99997L14.9996 7.9999L15.0002 12.454C15.0002 12.6046 15.0233 12.7495 15.0646 12.8866L22.6323 8.5179ZM21.4998 13.9541C22.3282 13.9541 23.0002 13.282 23.0002 12.4536L23.0001 9.49946C23.0001 9.48606 22.9985 9.47274 22.9982 9.45942L15.66 13.6964C15.8997 13.8587 16.1885 13.9535 16.4998 13.9535L21.4998 13.9541ZM6.49955 18.0002C6.49941 16.6196 5.38073 15.4996 4.00029 15.4994L-0.999707 15.4998L-1.00038 14.4998L3.99962 14.4994C5.93247 14.4994 7.49923 16.0668 7.49955 17.9995L7.50001 22.9995L6.5 23.0002L6.49955 18.0002ZM24.5003 21.9999C24.5001 20.6194 23.3806 19.5002 22.0001 19.5001L15.5001 19.5001C14.1194 19.5001 13.0003 20.6195 13.0003 22.0003L13.0002 22.5003L12.0002 22.4999L12.0003 21.9999C12.0004 20.067 13.5674 18.5001 15.5004 18.5001L22.0004 18.5001C23.9332 18.5003 25.5002 20.0675 25.5003 22.0002L25.4998 27.0002L24.4998 26.9999L24.5003 21.9999Z",fill:"black"})})}),(0,L.jsx)("defs",{children:(0,L.jsx)("clipPath",{id:"clip0_14095_2055",children:(0,L.jsx)("rect",{width:"27.9959",height:"22",rx:"4",transform:"matrix(-1 -0.000311431 0.00029884 -1 27.9961 22.0088)",fill:"white"})})})]});function _(){return(0,L.jsx)("div",{className:"bg-black p-0.25 rounded-[5px]",children:(0,L.jsxs)("div",{className:"w-[28px] h-[22px] bg-gradient-to-br from-gray-200 via-gray-300 to-gray-500 dark:from-gray-700 dark:via-gray-900 dark:to-gray-600 rounded-[4px] shadow-[0_0_5px_rgba(0,0,0,0.5),0_0_3px_rgba(255,255,255,0.9)] ring-1 ring-black/10 relative overflow-hidden",children:[(0,L.jsx)("div",{className:"absolute inset-0 border border-white/60 rounded-[4px] mix-blend-mode-screen pointer-events-none"}),(0,L.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-white/20 to-transparent rounded-md"}),(0,L.jsx)("div",{className:"absolute inset-0 shadow-inner rounded-md"}),(0,L.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:R})]})})}function O(e){let{amount:t,handle:n}=e,[r,i]=(0,P.useState)({x:0,y:0}),[a,o]=(0,P.useState)(!1),[s,l]=(0,P.useState)({x:0,y:0}),[c,u]=(0,P.useState)(!1),d=(0,P.useRef)(null),p=(0,P.useCallback)(e=>{if(!d.current)return;let t=d.current.getBoundingClientRect(),n=t.left+t.width/2,r=t.top+t.height/2,a=e.clientX,o=e.clientY,s=a-n;i({x:-((o-r)/(t.height/2)*4),y:s/(t.width/2)*4}),l({x:(a-t.left)/t.width,y:(o-t.top)/t.height})},[]),h=()=>{o(!0),u(!1)},f=()=>{o(!1),i({x:0,y:0}),u(!0),setTimeout(()=>u(!1),600)},m=100*s.x,g=(0,P.useMemo)(()=>c?m>50?120:-20:m,[c,m]);return(0,L.jsx)("div",{className:"relative w-full max-w-md mx-auto font-sans",children:(0,L.jsxs)("div",{ref:d,className:"relative overflow-hidden group p-6 ring ring-black/10 shadow-xl w-full bg-black dark:bg-gray-100",style:{aspectRatio:"190/123",alignSelf:"stretch",borderRadius:"12px",backgroundImage:"url('/noise.webp')",backgroundRepeat:"repeat",backgroundSize:"18px 18px",transform:"perspective(1000px) rotateX(".concat(r.x,"deg) rotateY(").concat(r.y,"deg) scale(").concat(a?1.01:1,") translateY(").concat(a?-1:0,"px)"),transition:a?"transform 0.15s ease-out, box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1)":"transform 0.8s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.5s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:a?"0 20px 40px -12px rgba(0,0,0,0.25), 0 0 0 1px rgba(255,255,255,0.05), inset 0 1px 0 rgba(255,255,255,0.1), inset 0 -1px 0 rgba(0,0,0,0.3)":"0 10px 15px -3px rgba(0, 0, 0, 0.06), 0 4px 6px -2px rgba(0, 0, 0, 0.03), inset 0 1px 0 rgba(255,255,255,0.05), inset 0 -1px 0 rgba(0,0,0,0.2)"},onMouseMove:p,onMouseEnter:h,onMouseLeave:f,children:[(0,L.jsx)("div",{className:"absolute opacity-100 dark:opacity-30",style:{width:"144px",height:"240px",transform:"rotate(-27.52deg)",flexShrink:0,background:"linear-gradient(253deg, rgba(216, 216, 216, 0.10) 29.07%, rgba(255, 255, 255, 0.02) 90.23%)",top:"-75px",left:"90px"}}),(0,L.jsx)("div",{className:"absolute inset-0 pointer-events-none will-change-transform",style:{width:"60%",height:"100%",background:"linear-gradient(90deg, transparent 0%, transparent 20%, rgba(128,128,128,0.1) 30%, rgba(128,128,128,0.2) 50%, rgba(128,128,128,0.1) 70%, transparent 80%, transparent 100%)",filter:"blur(2px)",transition:c?"transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1)":"transform 0.1s cubic-bezier(0.4, 0, 0.2, 1)",transform:"translateX(".concat(g,"%) skewX(-15deg)"),mixBlendMode:"normal",opacity:.7*!c}}),(0,L.jsx)("div",{className:"absolute top-0 left-0 right-0 h-1 pointer-events-none",style:{background:"linear-gradient(180deg, rgba(255,255,255,0.15) 0%, rgba(255,255,255,0.05) 50%, transparent 100%)",borderRadius:"12px 12px 0 0",opacity:+!!a,transition:"opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1)"}}),(0,L.jsx)("div",{className:"absolute top-0 bottom-0 left-0 w-1 pointer-events-none",style:{background:"linear-gradient(90deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.03) 50%, transparent 100%)",borderRadius:"12px 0 0 12px",opacity:+!!a,transition:"opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1)"}}),(0,L.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-1 pointer-events-none",style:{background:"linear-gradient(0deg, rgba(0,0,0,0.3) 0%, rgba(0,0,0,0.1) 50%, transparent 100%)",borderRadius:"0 0 12px 12px",opacity:+!!a,transition:"opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1)"}}),(0,L.jsx)("div",{className:"absolute top-0 bottom-0 right-0 w-1 pointer-events-none",style:{background:"linear-gradient(-90deg, rgba(0,0,0,0.4) 0%, rgba(0,0,0,0.15) 50%, transparent 100%)",borderRadius:"0 12px 12px 0",opacity:+!!a,transition:"opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1)"}}),(0,L.jsx)("div",{className:"absolute top-7 right-3",children:(0,L.jsx)(_,{})}),(0,L.jsxs)("div",{className:"absolute z-10 bottom-0 left-0 p-4 w-full",children:[(0,L.jsxs)("div",{className:"text-2xl font-semibold text-gray-100 dark:text-gray-900 tracking-tight pb-2 [font-variant-numeric:slashed-zero] font-mono",children:["$",t]}),(0,L.jsx)("div",{className:"text-xs text-gray-100 dark:text-gray-900 pb-1 truncate w-full",children:n})]})]})})}e.s(["CreditCard",()=>O],337034);var F=t,V=e.i(334627),B=e.i(794593),z=i,H=n;function U(e){let{expirationData:t}=e,{totalPayAsYouGoBalance:n,expirations:r}=t;if(1===r.length&&r[0].expiringAmount===n){let{expiringAmount:e,expiringDays:t}=r[0];return(0,F.jsxs)(B.Badge,{variant:"amber",size:"sm",children:["Expires in ",e," ",(0,F.jsx)("span",{children:1===t?"day":"days"})]})}if(1===r.length){let{expiringAmount:e,expiringDays:t}=r[0];return(0,F.jsxs)(B.Badge,{variant:"amber",size:"sm",children:["$",e," Expires in ",t," ",(0,F.jsx)("span",{children:1===t?"day":"days"})]})}return r.length>1?(0,F.jsx)(q,{content:(0,F.jsx)(z.TooltipContent,{children:(0,F.jsx)("div",{children:r.map((e,t)=>(0,F.jsxs)("div",{children:["$",e.expiringAmount," Expire in ",e.expiringDays," ",(0,F.jsx)("span",{children:1===e.expiringDays?"day":"days"})]},t))})}),children:(0,F.jsx)("div",{children:(0,F.jsxs)(B.Badge,{variant:"amber",size:"sm",className:"flex cursor-pointer items-center gap-1",children:["Some credits expire soon ",(0,F.jsx)(V.InfoIcon,{size:14})]})})}):null}function q(e){let{content:t,children:n}=e,[r,i]=(0,H.useState)(!1);return(0,F.jsx)(z.Tooltip,{open:r,onOpenChange:i,delayDuration:150,content:t,children:n})}var W=t,Z=e.i(66990),G=e.i(304649),K=n;function X(e){let{children:t,className:n,title:r,noDividers:i=!1}=e,a=K.default.Children.toArray(t);return(0,W.jsxs)("div",{className:"flex flex-col gap-4",children:[r&&(0,W.jsx)("h3",{className:"text-sm font-medium text-gray-500 px-1",children:r}),(0,W.jsx)("div",{className:(0,G.cn)("bg-background-subtle rounded-lg p-4 border border-alpha-400",n),children:i?t:a.map((e,t)=>(0,W.jsxs)(K.default.Fragment,{children:[e,t<a.length-1&&(0,W.jsx)(Z.Separator,{className:"my-4"})]},t))})]})}e.s(["SettingsGroup",()=>X],593640);var $=e.i(199929);function Y(e){var o;let{planInfo:s,canBuyCredits:l,needsToRequestCredits:c,daysRemaining:u,autoTopupSection:d,username:p,expirationData:h}=e,f=(0,a.useRouter)(),m=(0,n.useCallback)(()=>{(0,n.startTransition)(f.refresh)},[f.refresh]),{toolTipMonthly:g,toolTipBuyMore:v}=D(s.plan),x=(()=>{let e=s.balance.blocks;if(e)return e.find(e=>{var t;return(null==(t=e.metadata)?void 0:t.promo)==="daily_credits"})})(),y=s.balance.remaining-(null!=(o=null==x?void 0:x.currentBalance)?o:0),b=s.balance.remaining+s.onDemand.balance+((null==x?void 0:x.currentBalance)||0),w=p||"Your Balance";return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(X,{className:"relative p-0",noDividers:!0,children:[(0,t.jsxs)($.SettingsItem,{className:"border-b border-alpha-400 px-4 py-4",children:[(0,t.jsxs)($.SettingsItemContent,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)($.SettingsItemTitle,{children:"Credit Balance"}),h&&(0,t.jsx)(U,{expirationData:h})]}),(0,t.jsxs)($.SettingsItemDescription,{children:["Your monthly credits reset in"," ",(0,t.jsxs)("span",{className:"font-medium text-gray-900",children:[u," days"]}),". Credits are used in the following order: gifted, monthly, purchased."]})]}),(0,t.jsx)($.SettingsItemAction,{children:(0,t.jsx)(i.Tooltip,{content:c?"You do not have permission to purchase credits. Please contact your administrator":void 0,children:(0,t.jsx)(T.Button,{size:"sm",disabled:c,onClick:()=>{l?(0,A.openDialog)({type:"buyMoreCredits",data:{onSuccess:m,role:s.role}}):(0,A.openDialog)({type:"upgradePlan",data:{planSlug:"v0-level3",customTitle:"Upgrade your plan to buy more credits"}})},variant:"secondary",className:"whitespace-nowrap h-7 rounded-md px-2",children:"Buy Credits"})})})]}),(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-6 p-4 md:items-center",children:[(0,t.jsx)("div",{className:"w-52 relative",children:(0,t.jsx)(O,{amount:b.toFixed(2),handle:w})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center text-sm h-9 px-2 rounded-md",children:[(0,t.jsx)("div",{className:"flex items-center gap-1.5",children:(0,t.jsx)("span",{className:"text-gray-500 font-medium",children:"Gifted Credits"})}),(null==x?void 0:x.currentBalance)?(0,t.jsxs)("span",{children:["$",x.currentBalance.toFixed(2)]}):(0,t.jsx)("span",{children:"$0.00"})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center text-sm bg-muted h-9 px-2 rounded-md",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)("span",{className:"text-gray-500 font-medium",children:"Monthly Credits"}),(0,t.jsx)(J,{content:(0,t.jsx)("p",{children:g}),children:(0,t.jsx)("div",{children:(0,t.jsx)(r.IconInfoFill,{className:"text-muted-foreground h-4 w-4"})})})]}),(0,t.jsxs)("span",{children:["$",y.toFixed(2)," / $",s.balance.total.toFixed(2)]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center text-sm h-9 px-2 rounded-md",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)("span",{className:"text-gray-500 font-medium",children:"Purchased Credits"}),(0,t.jsx)(J,{content:(0,t.jsx)("p",{children:v(()=>(0,A.openDialog)({type:"upgradePlan"}))}),children:(0,t.jsx)("div",{children:(0,t.jsx)(r.IconInfoFill,{className:"text-muted-foreground h-4 w-4"})})})]}),(0,t.jsxs)("span",{children:["$",s.onDemand.balance.toFixed(2)]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center text-sm bg-muted h-9 px-2 rounded-md",children:[(0,t.jsx)("span",{className:"font-medium text-gray-900",children:"Total Available Credits"}),(0,t.jsxs)("span",{className:"font-medium text-gray-900",children:["$",b.toFixed(2)]})]})]})]})]}),(0,t.jsx)("div",{className:"-mt-13",children:d})]})}function J(e){let{content:r,children:a}=e,[o,s]=(0,n.useState)(!1);return(0,t.jsx)(i.Tooltip,{className:"max-w-[250px]",open:o,onOpenChange:s,content:r,disableHoverableContent:!1,children:a})}let Q=n.default.forwardRef((e,r)=>{let{id:i,initialValue:a="",onChange:o,min:s=10,max:l=5e3,placeholder:c="$0.00",className:u="",currency:d="USD",disabled:p=!1}=e,[h,f]=(0,n.useState)(()=>""===a?"":a.toString()),m=e=>{if(void 0===e||""===e){f(""),o("");return}let t=parseFloat(e),n=e;t>l&&(n=l.toString()),f(n),o(n)},g=()=>{""===h&&(f(s.toString()),o(s.toString()))};return(0,t.jsx)(N,{id:i,placeholder:c,value:h,ref:r,max:l,min:s,decimalsLimit:0,onBlur:g,onValueChange:m,prefix:ee[d],className:(0,E.cn)("outline-hidden min-w-0 border-none bg-transparent",u),decimalScale:0,allowNegativeValue:!1,disabled:p})});Q.displayName="CurrencyInput";let ee={USD:"$",EUR:"€",GBP:"£",CAD:"CA$",AUD:"A$",JPY:"¥",CHF:"CHF",CNY:"¥"}},632393,796530,e=>{"use strict";e.s(["BuyMoreCreditsTwoStepDialog",()=>er],632393);var t=e.i(832520),n=e.i(200407),r=e.i(120945);e.i(904347);var i=e.i(37737),a=e.i(667660),o=e.i(206037),s=e.i(897850),l=t,c=n,u=e.i(176248),d=e.i(686832),p=e.i(722198),h=e.i(675120),f=e.i(211976),m=e.i(612161),g=e.i(996174),v=e.i(403055);e.i(521603);var x=e.i(895336);let y=[30,60,100,250,500],b=100,w=10,j=5e3;var C=n;function k(){let[e,t]=(0,C.useState)(null),n=e=>{let n=e;e.includes(".")?1===e.split(".")[1].length&&(n="".concat(e,"0")):n="".concat(e,".00");let r=Number.parseFloat(n);return isNaN(r)||r<w?(t("Minimum amount is $".concat(w)),!1):r>j?(t("Maximum amount is $".concat(j.toLocaleString())),!1):r};return{amountError:e,setAmountError:t,validateAmount:n}}var S=e.i(547259),N=(0,S.createServerReference)("4008c11c9db2796d01e87ae5d56d1a6ac85a894be8",S.callServer,void 0,S.findSourceMapURL,"createElementsTopUpPurchaseIntent"),E=S,M=(0,E.createServerReference)("40a6c521203060a3e8f30565f4c48540d409262d07",E.callServer,void 0,E.findSourceMapURL,"createInvoiceTopUpPurchaseIntent"),I=i,D=e.i(402907),T=S,A=(0,T.createServerReference)("409fea04c3b828d810e34d3650588eacff8e6d5597",T.callServer,void 0,T.findSourceMapURL,"requestCreditsAction"),L=e.i(127169);function P(e){let{canBuyCredits:t,onCancel:n,amount:r,setAmount:i,onContinue:a,needsToRequestCredits:o,shouldInvoice:s}=e,w=(0,c.useRef)(null);(0,L.useShortcut)(e=>{let t=w.current;t&&(t.contains(document.activeElement)||e.target===t)&&"Escape"===e.key&&n()});let{amountError:j,setAmountError:C,validateAmount:S}=k(),[E,T]=(0,c.useState)(!1),P=(0,c.useRef)(null),[R,_]=(0,c.useState)(!1),{toast:O}=(0,D.useToast)(),F=e=>{i(e),C(null)};(0,c.useEffect)(()=>{if(E&&P.current){let e=setTimeout(()=>{var e;null==(e=P.current)||e.focus()},50);return()=>clearTimeout(e)}},[E]);let V=async()=>{let e=S(r);if(e)try{if(_(!0),o)return void(0,c.startTransition)(async()=>{(0,I.closeDialog)(),O({title:"Request Sent",description:(0,l.jsxs)("span",{children:["Your request for ",(0,l.jsx)("strong",{children:r})," credits has been sent to an admin."]}),duration:5e3});let e=await A(r.toString());e&&"error"in e&&O({title:"Error",description:e.error,variant:"destructive"})});let t=await (s?M({amount:e.toString()}):N({amount:e.toString(),returnUrl:window.location.href}));if(!t.ok)return void C(t.error.message);a(t.value)}catch(e){C(e instanceof Error?e.message:"An unknown error occurred")}finally{_(!1)}};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(d.ModalContent,{className:"md:p-0",ref:w,children:(0,l.jsx)("div",{className:"md:p-6 md:pb-0",children:(0,l.jsxs)("div",{className:"flex flex-col gap-4 text-center",children:[(0,l.jsx)(d.ModalTitle,{className:"sm:text-2xl text-xl text-gray-900 font-semibold",children:t?"Buy More Credits":"Request More Credits"}),(0,l.jsx)("p",{className:"text-label-14 text-pretty text-gray-500",children:t?(0,l.jsxs)(l.Fragment,{children:["Buying purchased credits allows you to pay for v0 usage beyond your included credit limit."," ",(0,l.jsx)("strong",{children:"Additional credits expire 1 year after purchase."})]}):(0,l.jsx)("span",{className:"p-6",children:"You do not have permission to purchase credits. Please contact your administrator."})}),(0,l.jsxs)("div",{className:"flex flex-col items-center gap-4 pb-4",children:[(0,l.jsx)(h.TransitionNode,{renderKey:"".concat(E),exit:{y:0,scale:.98},enter:{y:0,scale:1.02},duration:.2,delay:.1,children:(0,l.jsx)("div",{className:(0,v.cn)("flex h-[84px] items-center justify-center"),onClick:()=>{T(!0)},children:E?(0,l.jsx)(p.CurrencyInput,{className:"text-heading-56 w-full text-center",initialValue:r,onChange:F,min:10,max:5e3,currency:"USD",ref:P}):(0,l.jsx)("div",{className:"flex w-full items-center justify-center",children:(0,l.jsx)(x.default,{className:"text-heading-56",value:""===r?10:parseFloat(r),format:{style:"currency",currency:"USD"}})})})}),(0,l.jsxs)("div",{className:"flex flex-wrap items-center justify-center gap-2",children:[y.map(e=>(0,l.jsxs)(u.Button,{variant:"secondary",autoFocus:e===b,size:"sm",onClick:()=>{i(e.toString()),T(!1),C(null)},children:["$",e]},e)),(0,l.jsx)(u.Button,{variant:"secondary",size:"sm",onClick:()=>{T(!0)},children:"Custom"})]})]}),(0,l.jsx)(h.TransitionNode,{children:j?(0,l.jsxs)("div",{className:"text-label-13 flex gap-2 pl-3 pt-3 text-red-500 p-4",children:[(0,l.jsx)(m.Stop,{}),j]}):null})]})})}),(0,l.jsxs)(d.ModalFooter,{className:"border-t border-gray-200 bg-muted",children:[(0,l.jsx)(u.Button,{size:"sm",type:"button",variant:"secondary",onClick:n,disabled:R,children:"Cancel"}),(0,l.jsx)(g.Tooltip,{content:t?void 0:"You do not have permission to purchase credits. Please contact your administrator.",children:(0,l.jsx)(f.SpinnerButton,{size:"sm",type:"button",onClick:V,disabled:R||!t,pending:R,children:t?"Continue to Payment":"Send Request"})})]})]})}var R=t,_=n,O=d,F=u,V=f,B=m,z=h,H=e.i(230073),U=S,q=(0,U.createServerReference)("40faa6f373b1fa7f1065119e95ae251abeab9e83e3",U.callServer,void 0,U.findSourceMapURL,"completeTopUpPurchaseIntent"),W=S,Z=(0,W.createServerReference)("404c12b7a0fc42edd9e68bf6565978c5a76d7254bc",W.callServer,void 0,W.findSourceMapURL,"confirmTopUpPurchaseIntent"),G=i,K=e.i(53223),X=a,$=e.i(750571),Y=e.i(868712),J=e.i(762585),Q=L;function ee(e){var t,n;let{purchaseIntent:r,onBack:i,onSuccess:a,onGoBack:o}=e,[s,l]=(0,_.useState)(!1),[c,u]=(0,_.useState)(null),d=(0,_.useRef)(null),p=(0,_.useRef)(null),h=()=>{o()};(0,Q.useShortcut)(e=>{let t=p.current;t&&(t.contains(document.activeElement)||e.target===t)&&"Escape"===e.key&&h()});let f=null!=(n=null==(t=r.purchaseIntent.lineItems)?void 0:t.map(e=>({name:e.name,quantity:e.quantity,amount:Number(e.unitAmount)*Number(e.quantity)})))?n:[],m=Number(r.purchaseIntent.total),g="clientSecret"in r.providerDetails?r.providerDetails.clientSecret:null,v=async()=>{try{if(l(!0),u(null),d.current){let e=await d.current();if(!e.success)throw Error(e.error||"Payment confirmation failed")}else await Z({intentId:r.purchaseIntent.id});await q({intentId:r.purchaseIntent.id}),null==a||a(),(0,G.closeDialog)()}catch(e){if(u(e instanceof Error?e.message:"An error occurred while processing your request"),"object"==typeof e&&null!==e&&"type"in e){let{type:t,code:n,decline_code:r,param:i,doc_url:a}=e;(0,K.track)("BillingNewPaymentMethodStripeError",{type:t,code:n,declineCode:r,param:i,docUrl:a})}}finally{l(!1)}};return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(O.ModalContent,{className:"md:p-0",ref:p,children:(0,R.jsxs)("div",{children:[(0,R.jsx)("div",{className:"md:p-6 md:pb-0",children:(0,R.jsx)("div",{className:"flex flex-col gap-4 text-left",children:(0,R.jsx)(O.ModalTitle,{className:"sm:text-2xl text-xl text-gray-900 font-semibold",children:"Complete Payment"})})}),(0,R.jsx)("div",{className:"grid h-fit bg-background sm:p-6 pt-6",children:g&&(0,R.jsx)(et,{clientSecret:g,confirmHandler:d})}),(0,R.jsxs)("div",{className:"flex flex-col sm:p-6 pt-2 bg-muted border-t border-t-gray-200",children:[(0,R.jsxs)("div",{className:"flex flex-col",children:[f.map((e,t)=>(0,R.jsxs)("div",{className:"flex flex-col",children:[(0,R.jsxs)("div",{className:"flex justify-between py-4",children:[(0,R.jsxs)("span",{className:"text-label-14 text-gray-500 font-medium",children:[Number(e.quantity)>1?(0,R.jsxs)("span",{children:[e.quantity," "]}):null,(0,R.jsx)("span",{children:e.name})]}),(0,R.jsxs)("span",{className:"text-label-14 text-gray-500 font-medium",children:["$",e.amount.toFixed(2)]})]}),t<f.length-1&&(0,R.jsx)("hr",{})]},e.name)),(0,R.jsx)("hr",{}),(0,R.jsxs)("div",{className:"flex justify-between font-semibold py-4",children:[(0,R.jsx)("span",{className:"text-label-14 text-gray-900 font-medium",children:"Total"}),(0,R.jsxs)("span",{className:"text-label-14 text-gray-900 font-medium",children:["$",Number(m).toFixed(2)]})]})]}),(0,R.jsx)("p",{className:"text-label-14 text-gray-500",children:'By pressing "Confirm and Pay" you\'ll make a one-time credit purchase. Your card will be charged and your credit limit will be updated immediately.'})]}),(0,R.jsx)(z.TransitionNode,{children:c?(0,R.jsxs)("div",{className:"text-label-13 flex gap-2 pl-3 pt-3 text-red-500 p-4",children:[(0,R.jsx)(B.Stop,{}),c]}):null})]})}),(0,R.jsxs)(O.ModalFooter,{className:"border-t border-gray-200 bg-muted",children:[(0,R.jsx)(F.Button,{size:"sm",type:"button",variant:"secondary",onClick:i,disabled:s,children:"Back"}),(0,R.jsx)(V.SpinnerButton,{size:"sm",type:"button",onClick:v,disabled:s,pending:s,children:"Confirm and Pay"})]})]})}function et(e){let{clientSecret:t,confirmHandler:n}=e,{user:r}=(0,X.useActiveScope)(),i=(0,Y.useIsDark)(),[a,o]=(0,_.useState)(!0),s=(null==r?void 0:r.billingMode)==="test"?"test":"live";return(0,R.jsxs)("div",{children:[a&&(0,R.jsxs)("div",{className:"flex flex-col gap-[10px]",children:[(0,R.jsxs)("div",{className:"flex gap-1",children:[(0,R.jsx)(J.Skeleton,{className:"h-[55px] w-1/2 rounded-md"}),(0,R.jsx)(J.Skeleton,{className:"h-[55px] w-1/2 rounded-md"})]}),(0,R.jsx)(J.Skeleton,{className:"h-[55px] w-full rounded-md"})]}),(0,R.jsx)(H.CheckoutProvider,{stripe:(0,$.getStripeUsingMode)(s),options:{fetchClientSecret:()=>Promise.resolve(t),elementsOptions:{appearance:(0,$.stripeAppearence)(i,{theme:"stripe"}),loader:"never",savedPaymentMethod:{enableRedisplay:"auto"}}},children:(0,R.jsx)(en,{className:a?"hidden":"",confirmHandler:n,onReady:()=>o(!1)})})]})}function en(e){let{confirmHandler:t,className:n,onReady:r}=e,i=(0,H.useCheckout)(),a=(0,_.useCallback)(async()=>{try{let e=await i.confirm({redirect:"if_required"});if("error"===e.type)return{success:!1,error:e.error.message};return{success:!0}}catch(e){return{success:!1,error:e instanceof Error?e.message:"An error occurred"}}},[i]);return(0,_.useEffect)(()=>(t.current=a,()=>{t.current=null}),[t,a]),(0,R.jsx)(H.PaymentElement,{className:n,onReady:r,options:{layout:{type:"tabs",defaultCollapsed:!1},terms:{card:"never",applePay:"never",googlePay:"never"}}})}function er(e){return(0,t.jsx)(ei,{...e})}function ei(e){let{onSuccess:n,onCancel:r,role:i}=e,{activeScope:l,isActiveScopeReady:c}=(0,a.useActiveScope)(),{needsToRequestCredits:u,isLoading:d,shouldInvoice:p}=(0,s.useCanBuyCredits)({role:i}),{planInfo:h}=(0,o.usePlanInfo)(!0,null==l?void 0:l.id,!u);return!c||d?null:(0,t.jsx)(ea,{paymentMethod:null==h?void 0:h.current.paymentMethod,onCancel:r,canBuyCredits:!u,shouldInvoice:p,onSuccess:n,needsToRequestCredits:u})}function ea(e){let{onCancel:a,canBuyCredits:o,shouldInvoice:s,onSuccess:l,needsToRequestCredits:c}=e,[u,d]=(0,n.useState)("amount"),[p,h]=(0,n.useState)(null),f=()=>{if("payment"===u)return void d("amount");null==a||a(),(0,i.closeDialog)()},[m,g]=(0,n.useState)(b.toString()),v=e=>{h(e),d("payment")};return(0,t.jsxs)(r.AtomicDialog,{type:"buyMoreCredits",className:"h-auto max-h-[calc(100svh-theme(space.8))] overflow-auto",children:["amount"===u&&(0,t.jsx)(P,{amount:m,setAmount:g,canBuyCredits:o,onCancel:f,needsToRequestCredits:c,onContinue:v,shouldInvoice:s}),"payment"===u&&p&&(0,t.jsx)(ee,{purchaseIntent:p,onBack:f,onSuccess:l,onGoBack:f})]})}var eo=S,es=(0,eo.createServerReference)("40da599a2629001c8bc1351557ba64c69b9a87ec8e",eo.callServer,void 0,eo.findSourceMapURL,"unsubscribeAction");e.s(["unsubscribeAction",()=>es],796530)},298515,319961,e=>{"use strict";let t=new Intl.NumberFormat("en-US",{style:"currency",currency:"usd"}),n=new Intl.NumberFormat("en-US",{style:"currency",currency:"usd",maximumFractionDigits:0}),r=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";switch(r){case"default":return t.format(e/100);case"display":return n.format(e/100)}};function i(e){return r(e.reduce((e,t)=>e+t.price.cents,0),"display")}function a(e){return i(e.items)}function o(e){return i(e.items)}e.s(["formatCents",0,r,"formatPlanTotalPrice",()=>a,"formatSubscriptionTotalPrice",()=>o],298515);var s=e.i(932193);e.s(["CheckIcon",()=>s.default],319961)},133025,e=>{"use strict";let t=(0,e.i(121793).default)("CircleDollarSign",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 18V6",key:"zqpxq5"}]]);e.s(["default",()=>t])},480522,183612,e=>{"use strict";var t=e.i(133025);e.s(["CircleDollarSignIcon",()=>t.default],480522);var n=e.i(911404);e.s(["HelpCircleIcon",()=>n.default],183612)},617217,e=>{"use strict";let t=(0,e.i(121793).default)("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);e.s(["default",()=>t])},798310,e=>{"use strict";var t=e.i(617217);e.s(["LayersIcon",()=>t.default])},40882,e=>{"use strict";let t=(0,e.i(121793).default)("Puzzle",[["path",{d:"M19.439 7.85c-.049.322.059.648.289.878l1.568 1.568c.47.47.706 1.087.706 1.704s-.235 1.233-.706 1.704l-1.611 1.611a.98.98 0 0 1-.837.276c-.47-.07-.802-.48-.968-.925a2.501 2.501 0 1 0-3.214 3.214c.446.166.855.497.925.968a.979.979 0 0 1-.276.837l-1.61 1.61a2.404 2.404 0 0 1-1.705.707 2.402 2.402 0 0 1-1.704-.706l-1.568-1.568a1.026 1.026 0 0 0-.877-.29c-.493.074-.84.504-1.02.968a2.5 2.5 0 1 1-3.237-3.237c.464-.18.894-.527.967-1.02a1.026 1.026 0 0 0-.289-.877l-1.568-1.568A2.402 2.402 0 0 1 1.998 12c0-.617.236-1.234.706-1.704L4.23 8.77c.24-.24.581-.353.917-.303.515.077.877.528 1.073 1.01a2.5 2.5 0 1 0 3.259-3.259c-.482-.196-.933-.558-1.01-1.073-.05-.336.062-.676.303-.917l1.525-1.525A2.402 2.402 0 0 1 12 1.998c.617 0 1.234.236 1.704.706l1.568 1.568c.23.23.556.338.877.29.493-.074.84-.504 1.02-.968a2.5 2.5 0 1 1 3.237 3.237c-.464.18-.894.527-.967 1.02Z",key:"i0oyt7"}]]);e.s(["default",()=>t])},718182,e=>{"use strict";var t=e.i(40882);e.s(["PuzzleIcon",()=>t.default])},536208,e=>{"use strict";let t=(0,e.i(121793).default)("Shapes",[["path",{d:"M8.3 10a.7.7 0 0 1-.626-1.079L11.4 3a.7.7 0 0 1 1.198-.043L16.3 8.9a.7.7 0 0 1-.572 1.1Z",key:"1bo67w"}],["rect",{x:"3",y:"14",width:"7",height:"7",rx:"1",key:"1bkyp8"}],["circle",{cx:"17.5",cy:"17.5",r:"3.5",key:"w3z12y"}]]);e.s(["default",()=>t])},816627,e=>{"use strict";var t=e.i(536208);e.s(["ShapesIcon",()=>t.default])},148126,e=>{"use strict";let t=(0,e.i(121793).default)("Shell",[["path",{d:"M14 11a2 2 0 1 1-4 0 4 4 0 0 1 8 0 6 6 0 0 1-12 0 8 8 0 0 1 16 0 10 10 0 1 1-20 0 11.93 11.93 0 0 1 2.42-7.22 2 2 0 1 1 3.16 2.44",key:"1cn552"}]]);e.s(["default",()=>t])},851658,e=>{"use strict";e.s(["CancelPlanDialog",()=>O],851658);var t=e.i(832520),n=e.i(796530),r=e.i(200407),i=e.i(403055),a=e.i(694207),o=e.i(319961),s=e.i(480522),l=e.i(183612),c=e.i(798310),u=e.i(718182),d=e.i(816627),p=e.i(148126),p=p,h=e.i(736928),h=h,f=e.i(298515),m=e.i(545858);e.i(563948);var g=e.i(407562),v=e.i(396407),x=e.i(480118),y=e.i(216445),b=e.i(66990),w=e.i(686832),j=e.i(176248),C=e.i(211976),k=e.i(341003),S=e.i(304649),N=e.i(580643),E=e.i(547259),M=(0,E.createServerReference)("401eb752f63380590d7776f664172ff2b9e10b9ed2",E.callServer,void 0,E.findSourceMapURL,"cancelTeam"),I=e.i(667660),D=e.i(906261),T=e.i(135463),A=e.i(120945);e.i(904347);var L=e.i(37737),P=e.i(242759);let R=[{text:"Too expensive",code:"expensive",icon:s.CircleDollarSignIcon},{text:"Not enough variety",code:"variety",icon:d.ShapesIcon},{text:"Complicated to use",code:"complicated",icon:p.default},{text:"Not my stack",code:"stack",icon:c.LayersIcon},{text:"Needs more components",code:"needs-components",icon:u.PuzzleIcon},{text:"Output wasn't good",code:"output",icon:h.default},{text:"Other",code:"other",icon:l.HelpCircleIcon}],_=[{text:"Just wanted 1 month",code:"one-month",icon:a.CalendarIcon},...R];function O(e){let{currentPlan:a,onPlanCancelled:s,currentPlanPricingInfo:l,isOnPersonalAccount:c,updatePlanInfo:u,remainingBalance:d}=e,[p,h]=(0,r.useState)("confirm"),m=(0,N.useMultiSelect)(),{activeScope:y}=(0,I.useActiveScope)(),{tbb:b}=(0,P.useFlags)(),[C,k]=(0,r.useState)(),E=e=>{e||setTimeout(()=>{h("confirm")},500),e||(0,L.closeDialog)()},T=(0,x.useRouter)(),R=async()=>{let e=m.values.join("\n")+(C?"\n Free-form reason: ".concat(C):"");if(c){let r=await (0,n.unsubscribeAction)({reason:e});r.ok?(h("cancelled"),null==s||s(r.value)):("no_subscription"===r.error.code&&T.refresh(),g.toast.error((0,t.jsx)(v.ErrorMessage,{code:r.error.code,variant:"unstyled"}),{duration:5e3}),E(!1)),await u()}else{if(!y)throw Error("No active scope found");let e=(0,D.isUserScope)(y)?null:y;if(!e)throw Error("No active team scope found");let n=await M(e);await u(),n.ok?h("cancelled"):(g.toast.error((0,t.jsx)(v.ErrorMessage,{code:n.error.code,variant:"unstyled"}),{duration:5e3}),E(!1))}},_=(0,r.useMemo)(()=>"cancelled"===p?(0,t.jsxs)(w.ModalDescription,{className:"px-6 text-sm",children:[(0,t.jsxs)("span",{children:["Your increased limits remain active until the end of this calendar month's billing cycle,"," "]}),a.billingPeriodEndDate?(0,t.jsx)("span",{className:"font-medium text-black",children:(0,i.formatShortDate)(a.billingPeriodEndDate)}):null,(0,t.jsx)("span",{children:". Following this, you'll be on our FREE plan. Enjoy the continued access!"})]}):(0,t.jsxs)("div",{children:[(0,t.jsxs)(w.ModalDescription,{className:"px-6 text-sm",children:[(0,t.jsxs)("span",{children:["Your plan and increased limits will remain active until the end of your current billing period,"," "]}),a.billingPeriodEndDate?(0,t.jsx)("span",{className:"font-medium text-black",children:(0,i.formatShortDate)(a.billingPeriodEndDate)}):null,(0,t.jsx)("span",{children:"."}),b&&void 0!==d&&d>.01?(0,t.jsxs)("strong",{className:"block pt-2",children:["You won’t be able to use your Additional Purchased Credits (",(0,f.formatCents)(d,"display")," left) while on the Free plan."]}):null]}),(0,t.jsx)("div",{className:"px-6 text-sm",children:a.billingPeriodStartDate?(0,t.jsx)(V,{freeformReason:C,planStartDate:new Date(a.billingPeriodStartDate).toISOString(),reasons:m,setFreeformReason:k}):null})]}),[a.billingPeriodEndDate,a.billingPeriodStartDate,C,m,p,b]);return(0,t.jsxs)(A.AtomicDialog,{type:"cancelPlan",onOpenChange:E,forceOpen:"cancelled"===p,children:["confirm"===p?(0,t.jsxs)("form",{action:R,className:"grid gap-6",children:[(0,t.jsxs)(w.ModalHeader,{className:"flex flex-col justify-center gap-4 pb-0!",children:[(0,t.jsx)(w.ModalTitle,{className:"w-full text-left",children:"Are you sure you want to cancel?"}),(0,t.jsx)("div",{className:"border-border flex w-full justify-between rounded-lg border p-4",children:(0,t.jsxs)("span",{children:[(0,t.jsxs)("span",{className:"text-sm font-medium text-black",children:[l.name," Plan"]}),(0,t.jsxs)("span",{children:[" ","- ",(0,f.formatSubscriptionTotalPrice)(l),"/month"]})]})})]}),(0,t.jsx)(w.ModalContent,{className:(0,S.cn)("gap-2",{"p-0":"confirm"===p}),children:_}),(0,t.jsx)(w.ModalFooter,{className:"flex flex-col rounded-b-[12px] p-4",children:(0,t.jsxs)("div",{className:"flex w-full justify-between",children:[(0,t.jsx)(B,{asChild:!0,onClick:()=>(0,L.closeDialog)(),type:"button",children:(0,t.jsx)(j.Button,{className:"gap-2",variant:"secondary",children:"Cancel"})}),(0,t.jsx)(F,{})]})})]}):null,"cancelled"===p?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(w.ModalHeader,{children:(0,t.jsxs)(w.ModalTitle,{className:"flex flex-col items-center",children:[(0,t.jsx)(o.CheckIcon,{className:"rounded-full bg-emerald-300 p-1 text-white",size:32}),(0,t.jsx)("span",{children:"Cancellation Confirmed"})]})}),(0,t.jsx)(w.ModalContent,{children:_}),(0,t.jsx)(w.ModalFooter,{children:(0,t.jsx)(j.Button,{className:"w-full justify-center",onClick:()=>(0,L.closeDialog)(),type:"button",children:"Continue"})})]}):null]})}function F(){let{pending:e}=(0,m.useFormStatus)();return(0,t.jsx)(C.SpinnerButton,{disabled:e,pending:e,type:"submit",variant:"destructive",children:"Confirm Cancellation"})}function V(e){let{planStartDate:n,freeformReason:r,setFreeformReason:a,reasons:o}=e,s=n&&(0,i.isWithin30Days)(n)?_:R;return(0,t.jsxs)("div",{className:"mt-4 flex flex-col gap-4",children:[(0,t.jsx)(b.Separator,{}),(0,t.jsx)("span",{className:"text-sm",children:"We'd love to know why you're cancelling. Select all that apply."}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-2",children:s.map(e=>{let{text:n,code:r,icon:i}=e;return(0,t.jsx)(k.RadioButton,{Icon:i,onClick:()=>o.toggle(r),selected:o.has(r),children:n},r)})}),(0,t.jsx)(y.Textarea,{onChange:e=>a(e.target.value),placeholder:"Share with us how we can improve",value:r})]})}let B=(0,r.forwardRef)((e,n)=>{let{asChild:r,disabled:i,...a}=e,o=r?T.Slot:j.Button,{pending:s}=(0,m.useFormStatus)();return(0,t.jsx)(o,{...a,disabled:i||s,ref:n})});B.displayName="FormButton"},460816,e=>{"use strict";let t=(0,e.i(847801).default)(()=>e.A(437460).then(e=>e.ClientStripeProvider),{loadableGenerated:{modules:[602876]},ssr:!1});e.s(["StripeProvider",0,t])},74656,e=>{"use strict";var t=e.i(200407);function n(e){let{action:n,additionalFields:r={}}=e,i=(0,t.useId)(),a=(0,t.useRef)(new FormData),o=(0,t.useRef)(null),[s,l]=(0,t.useState)("idle"),[c,u]=(0,t.useState)(null);return{status:s,error:c,submit:e=>{if(o.current)throw Error("Cannot submit form while another action is pending");l("submitting"),u(null);let t=document.getElementById(i);if(!t)throw Error("No form found for useImperativeHandle with id ".concat(i));let n=new FormData;if(e)for(let[t,r]of Object.entries(e))n.append(t,r);for(let[e,t]of Object.entries(r))n.append(e,t);return a.current=n,new Promise((e,n)=>{o.current={resolve:e,reject:n},t.requestSubmit()})},props:{id:i,action:async()=>{var e,t,r;try{let r=await n(a.current);r.ok?null==(e=o.current)||e.resolve(r.value):(u(r.error.message),null==(t=o.current)||t.reject(r.error))}catch(e){u(e instanceof Error?e.message:"Unknown error"),null==(r=o.current)||r.reject()}finally{o.current=null,l("idle")}},onSubmit:e=>e.stopPropagation()}}}e.s(["useImperativeForm",()=>n])},257288,e=>{"use strict";var t=e.i(547259),n=(0,t.createServerReference)("400562dd1afde8fd6142cc1acbfef59dc71d3692fa",t.callServer,void 0,t.findSourceMapURL,"changePlanAction");e.s(["changePlanAction",()=>n])},150557,558079,920679,e=>{"use strict";var t=e.i(832520),n=e.i(899002),r=e.i(200407),i=e.i(545858),a=e.i(604300);let o=(0,r.forwardRef)((e,t)=>{var o;let{container:s=null==globalThis||null==(o=globalThis.document)?void 0:o.body,...l}=e;return s?i.default.createPortal((0,r.createElement)(a.Primitive.div,(0,n.default)({},l,{ref:t})),s):null});var s=r;let l=e=>{let[n,r]=s.default.useState(0),i=s.default.useRef(null);return s.default.useEffect(()=>{i.current=document.body,r(e=>e+1)},[]),(0,t.jsx)(o,{container:i.current,...e})};l.displayName=o.displayName,e.s(["Portal",()=>l],150557);var c=e.i(547259),u=(0,c.createServerReference)("405c60cff1e12fdd114e220ff1b02e3b4107a2adcc",c.callServer,void 0,c.findSourceMapURL,"createPaymentMethodAction");e.s(["createPaymentMethodAction",()=>u],558079);var d=c,p=(0,d.createServerReference)("4024f3af7b217cfec1277d254b9f640879791a2958",d.callServer,void 0,d.findSourceMapURL,"upsertPaymentMethodAction");e.s(["upsertPaymentMethodAction",()=>p],920679)},241123,e=>{"use strict";var t=e.i(484092);e.s(["PlusIcon",()=>t.default])},289610,e=>{"use strict";let t=(0,e.i(121793).default)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);e.s(["default",()=>t])},70772,845142,e=>{"use strict";var t=e.i(832520),n=e.i(460816),r=e.i(200407),i=e.i(346970),a=e.i(74656),o=e.i(257288),s=e.i(150557),l=e.i(298515),c=e.i(403055),u=t,d=t,p=s,h=e.i(219041),f=e.i(558079),m=e.i(920679),g=a,v=e.i(230073),x=e.i(319961),y=e.i(241123),b=e.i(491341),w=r,j=e.i(402907),C=t,k=e.i(299313),S=e.i(289610),S=S;let N=["alipay","amex","diners","discover","elo","hipercard","jcb","maestro","mastercard","paypal","unionpay","visa"];function E(e){let{brand:t,width:n=14}=e;return N.includes(t)?(0,C.jsx)(k.default,{alt:"logo for ".concat(t),height:"20",src:"/assets/cardbrands/".concat(t,".svg"),width:n}):(0,C.jsx)(S.default,{})}var M=e.i(70165),I=e.i(868712);function D(e,t){switch(t.type){case"submit":return{...e,status:"submitting"};case"added":return{...e,status:"new-card"};case"go-to-add-new":return{...e,status:"add-new"};case"go-to-use-existing":return{...e,status:"use-existing",paymentMethod:t.paymentMethod}}}let T=[[302,383],[522,304],[1/0,227]];function A(e){var t,n;let{paymentMethod:r,noPrefix:i,billingDetails:a}=e,[o,s]=(0,w.useReducer)(D,r?{status:"use-existing",paymentMethod:r}:{status:"add-new"}),{windowSize:l}=(0,M.useWindowSize)(),c=null!=(n=null==(t=T.find(e=>{var t;return(null!=(t=l.width)?t:1e3)<e[0]}))?void 0:t[1])?n:230,u=(0,v.useStripe)(),h=(0,v.useElements)(),{toast:x}=(0,j.useToast)(),[y,b]=(0,w.useState)(!1),C=(0,I.useIsDark)(),k=(0,g.useImperativeForm)({action:f.createPaymentMethodAction}),S=(0,g.useImperativeForm)({action:m.upsertPaymentMethodAction}),N="add-new"===o.status,E=(0,w.useCallback)(async e=>{if(!N||!u||!h)return null;try{s({type:"submit"});let t=await h.submit();if(t.error)throw t.error;let{client_secret:n}=await k.submit(e?{teamSlug:e}:void 0),r=await u.confirmSetup({elements:h,clientSecret:n,redirect:"if_required",confirmParams:{return_url:window.location.href,payment_method_data:{allow_redisplay:"always",billing_details:a}}});if(r.error)throw r.error;if(r.setupIntent.payment_method){let t="string"==typeof r.setupIntent.payment_method?r.setupIntent.payment_method:r.setupIntent.payment_method.id,n=await S.submit({paymentMethod:t,...e?{teamSlug:e}:void 0});return s({type:"added"}),n.paymentMethod}}catch(e){var t;null==(t=h.getElement("card"))||t.focus(),s({type:"go-to-add-new"}),L(x,e)}return null},[k,h,N,u,x,S]);return(0,w.useMemo)(()=>{switch(o.status){case"use-existing":return{status:"use-existing",form:(0,d.jsx)(P,{onAddNewCard:()=>s({type:"go-to-add-new"}),paymentMethod:o.paymentMethod,noPrefix:i})};case"add-new":case"submitting":case"new-card":return{status:o.status,form:(0,d.jsxs)("div",{style:{backgroundColor:C?"black":"white",...y?{minHeight:"".concat(c,"px")}:{height:"".concat(c,"px")}},children:[(0,d.jsx)(v.PaymentElement,{onReady:()=>b(!0),options:{terms:{card:"never"},wallets:{googlePay:"never",applePay:"never"},defaultValues:{billingDetails:a?{name:a.name,email:a.email}:void 0}}}),(0,d.jsxs)(p.Portal,{children:[(0,d.jsx)("form",{...k.props}),(0,d.jsx)("form",{...S.props})]})]}),submit:E,useExisting:r?()=>s({type:"go-to-use-existing",paymentMethod:r}):void 0}}},[o.status,o.paymentMethod,y,c,k.props,S.props,E,i,r])}function L(e,t){let{code:n,message:r}=Object(t),i=!n;throw e({description:i?"An unknown error occurred. Please contact support.":r,action:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(h.ToastAction,{altText:"Dismiss",variant:i?"secondary":"default",children:"Dismiss"}),i?(0,d.jsx)(h.ToastAction,{altText:"Contact Support",asChild:!0,children:(0,d.jsx)(b.default,{href:"https://vercel.com/help",target:"_blank",children:"Contact Support"})}):null]}),duration:1/0,variant:"destructive"}),t}function P(e){let{paymentMethod:t,onAddNewCard:n,noPrefix:r}=e;return(0,d.jsxs)("div",{className:"flex flex-col gap-4",children:[r?null:(0,d.jsx)("div",{className:"text-sm",children:"Use your Vercel account's default payment method or add a new one."}),(0,d.jsxs)("div",{className:"flex items-center justify-between rounded-lg border border-blue-700 bg-white p-4",children:[(0,d.jsxs)("span",{className:"flex items-center gap-4 text-sm",children:[(0,d.jsx)(E,{brand:t.brand}),(0,d.jsxs)("span",{className:"flex items-center gap-1",children:[(0,d.jsx)("span",{className:"text-xs",children:"••••"}),(0,d.jsx)("span",{children:t.last4})]})]}),(0,d.jsx)(x.CheckIcon,{className:"h-4 w-4 rounded-full bg-blue-700 p-0.5 text-white",size:16})]}),(0,d.jsxs)("button",{className:"flex items-center gap-2 text-sm text-blue-700",onClick:n,type:"button",children:[(0,d.jsx)(y.PlusIcon,{size:16}),(0,d.jsx)("span",{children:"Use a different payment method"})]})]})}e.s(["useChoosePaymentMethod",()=>A],845142);var R=e.i(926788),_=e.i(176248),O=e.i(707827),F=r,V=e.i(53223),B=e.i(667660),z=e.i(127169);function H(e){let{disabled:t,onPaymentSelected:n,paymentMethod:r,onBack:i,description:a,willCharge:o,onPaymentMethodAdded:s}=e,{user:l}=(0,B.useActiveScope)(),c=A({paymentMethod:r,billingDetails:l?{name:l.name,email:l.email}:void 0}),d=(0,F.useRef)(null),p=t||"submitting"===c.status,h="Add Card"+(o?" and Pay":"");"use-existing"===c.status&&(h="Confirm"+(o?" and Pay":""));let f=async()=>{try{if("add-new"===c.status){let e=await c.submit();e&&(null==s||s(e))}null==n||n()}catch(e){if("object"==typeof e&&null!==e&&"type"in e){let{type:t,code:n,decline_code:r,param:i,doc_url:a}=e;(0,V.track)("BillingNewPaymentMethodStripeError",{type:t,code:n,declineCode:r,param:i,docUrl:a})}}};return(0,z.useShortcut)(e=>{"Escape"===e.key&&i(),"Enter"===e.key&&f()}),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"grid h-fit px-4",ref:d,children:[c.form,(0,u.jsx)("div",{className:"bottom-0 mb-2 mt-4 text-sm text-gray-500",children:null!=a?a:(0,u.jsxs)(u.Fragment,{children:['By clicking on "',h,'" you will link the new payment method to your Vercel account']})})]}),(0,u.jsxs)(R.DialogFooter,{className:"flex flex-col-reverse gap-2 px-4 py-0 md:flex-row md:justify-between",children:[(0,u.jsx)(_.Button,{className:"w-full md:w-auto",disabled:p,onClick:()=>{"add-new"===c.status&&c.useExisting?c.useExisting():i()},size:"sm",variant:"secondary",children:"Cancel"}),(0,u.jsxs)(_.Button,{disabled:p,onClick:f,size:"sm",children:[p?(0,u.jsx)(O.Spinner,{size:14}):null,h]})]})]})}e.i(563948);var U=e.i(407562),q=e.i(396407),W=e.i(480118),Z=r;function G(e,t){switch(t.type){case"set-payment-method":if(!e)return e;return{...e,paymentMethod:t.paymentMethod};case"set-billing-details":return t.billingDetails}}function K(e){let[t,n]=(0,Z.useOptimistic)(e,G);return{billingDetails:t,optimisticSetPaymentMethod:e=>{(0,Z.startTransition)(()=>{n({type:"set-payment-method",paymentMethod:e})})},optimisticSetBillingDetails:e=>{(0,Z.startTransition)(()=>{n({type:"set-billing-details",billingDetails:e})})}}}var X=e.i(686832),$=e.i(206037),Y=B;function J(){let{data:e,mutate:t}=(0,i.default)("paymentDialogOpen",null,{fallbackData:null});return{paymentDialogOpen:!!e,selectedPlan:e,setPaymentDialogPlan:t}}function Q(e){let{billingPromise:i,onBack:u}=e,d=(0,W.useRouter)(),{isActiveScopeReady:p,isTeam:h,user:f}=(0,Y.useActiveScope)(),{update:m}=(0,$.usePlanInfo)(p&&!h,null==f?void 0:f.id),g=(0,a.useImperativeForm)({action:o.changePlanAction,additionalFields:{source:"chat"}}),{paymentDialogOpen:v,selectedPlan:x,setPaymentDialogPlan:y}=J(),b=(0,r.use)(i),{billingDetails:w,optimisticSetBillingDetails:j,optimisticSetPaymentMethod:C}=K(b[0].ok?b[0].value:null),k=(0,r.useMemo)(()=>b[1].ok?b[1].value:[],[b]),S=(0,r.useMemo)(()=>k.find(e=>"v0-level3"===e.slug),[k]);(0,r.useEffect)(()=>()=>void y(null),[y]);let N=x&&"v0-level3"===x?S:null,E=(0,r.useCallback)(async()=>{if(N)try{let e=await g.submit({planSlug:N.slug,entitlement:"messages",entitlementFromCurrentSession:"yes"});j(e),m(),U.toast.success("Upgraded plan successfully.")}catch(n){let e=(0,q.codeFromError)(n);"no_active_subscription"===e||"already_on_plan"===e?d.refresh():U.toast.error((0,t.jsx)(q.ErrorMessage,{code:e,variant:"unstyled"}),{duration:5e3})}finally{y(null)}},[g,m,j,d,y,N]),M=(0,r.useMemo)(()=>N?(0,t.jsx)(H,{description:(0,t.jsxs)(t.Fragment,{children:["By clicking on Confirm you'll start your"," ",N.name," plan subscription of"," ",(0,t.jsxs)("span",{className:"font-medium text-black",children:[(0,l.formatPlanTotalPrice)(N),"/month,"]})," ","with a renewal date of the"," ",(0,t.jsxs)("span",{className:"font-medium text-black",children:[(0,c.formatOrdinalSuffix)(new Date().getDate())," of each month"]}),"."]}),disabled:"submitting"===g.status,onBack:()=>{null==u||u(),y(null)},onPaymentMethodAdded:C,onPaymentSelected:E,paymentMethod:null==w?void 0:w.paymentMethod,willCharge:!0}):null,[null==w?void 0:w.paymentMethod,g.status,u,E,C,y,N]);return w?(0,t.jsxs)(n.StripeProvider,{mode:w.settings.mode,children:[(0,t.jsx)(X.Modal,{onOpenChange:e=>e?y(null==N?void 0:N.slug):y(null),open:v,children:(0,t.jsxs)(X.ModalContent,{className:"flex flex-col gap-6 md:px-2",children:[(0,t.jsxs)(X.ModalTitle,{className:"px-3",children:["Subscribing to"," ",(null==N?void 0:N.slug)==="v0-platinum"?(0,t.jsx)("span",{children:"Ultra"}):(0,t.jsx)("span",{children:"Premium"}),(0,t.jsx)("span",{children:" plan"})]}),M]})}),(0,t.jsx)(s.Portal,{children:(0,t.jsx)("form",{...g.props})})]}):null}e.s(["PaymentDialog",()=>Q,"usePaymentDialog",()=>J],70772)},282336,262749,e=>{"use strict";var t=e.i(547259),n=(0,t.createServerReference)("7f5811f2de2147aadd635e6f2517f7cc800912e873",t.callServer,void 0,t.findSourceMapURL,"detectUserVercelUsage");e.s(["detectUserVercelUsage",()=>n],282336);var r=t,i=(0,r.createServerReference)("7f83b45ef5e28097280264a5301666df60aa713887",r.callServer,void 0,r.findSourceMapURL,"updateTeamDetails");e.s(["updateTeamDetails",()=>i],262749)},775883,e=>{"use strict";var t=e.i(832520),n=e.i(297239),r=e.i(304649),i=e.i(794593);function a(){let e=(0,n.useT)();return{"v0-level0":{color:"text-gray-500",badge:"secondary",label:e("billingPlans.planName")("Free")},"v0-level3":{color:"text-teal-700",badge:"teal",label:e("billingPlans.planName")("Premium")},"v0-team":{color:"text-blue-700",badge:"blue",label:e("billingPlans.planName")("Team")},"v0-enterprise":{color:"text-purple-700",badge:"purple",label:e("billingPlans.planName")("Enterprise")},"v0-platinum":{color:"text-orange-400",badge:"teal",label:e("billingPlans.planName")("Ultra")}}}function o(e){let{type:n}=e,i=a()[n];return(0,t.jsx)("span",{className:(0,r.cn)("text-[13px] font-medium leading-[16px]",i.color),children:i.label})}function s(e){let{type:n,className:r,includeSuffix:o=!0}=e,s=a()[n];return(0,t.jsxs)(i.Badge,{size:"sm",variant:s.badge,className:r,children:[s.label," ",o?(0,t.jsx)("span",{children:"Plan"}):null]})}e.s(["PlanBadge",()=>s,"PlanLabel",()=>o,"usePlanLabelMap",()=>a])},668251,(e,t,n)=>{},287089,e=>{e.v({jiggle:"redeem-code-modal-module__RfT0iq__jiggle"})},511969,642969,485614,e=>{"use strict";e.s(["UpgradePlanDialog",()=>_],511969);var t=e.i(832520),n=e.i(200407),r=e.i(176248),i=e.i(206037),a=e.i(936990),o=e.i(491341),s=e.i(28223),l=e.i(70772),c=e.i(762585),u=e.i(745197),d=e.i(696871),p=e.i(686832),h=e.i(667660),f=e.i(644471),m=e.i(298515),g=e.i(596359),v=e.i(282336),x=e.i(120485);e.i(563948);var y=e.i(407562),b=e.i(763480),w=e.i(262749),j=e.i(707974),C=e.i(230766),k=e.i(948780),S=e.i(775883),N=e.i(480118),E=e.i(53223),M=e.i(242759),I=e.i(304649),D=e.i(120945),T=e.i(37737),A=e.i(675120);e.i(668251);let L=e=>((null==e?void 0:e.balance.remaining)||0)+((null==e?void 0:e.onDemand.balance)||0),P={"v0-platinum":{bullets:[]},"v0-level0":{bullets:["$5 of usage credit per month","Deploy to Vercel","Sync with GitHub","Create up to 200 projects"]},"v0-level3":{bullets:["$20 of usage credit per month","Purchase additional credits outside your monthly limits","Unlimited projects","Access to v0-1.5-lg and v0 API"]},"v0-team":{bullets:["$30 of usage credit per user per month","Share chats and collaborate with your team","Centralized billing on Vercel","Purchase credits shared across your team"]},"v0-enterprise":{bullets:["Custom credit limits","Training opt-out by default","Dedicated Customer Support","SAML SSO"]}},R=1048576;function _(e){let{planSlug:f,customTitle:m}=e,[g]=(0,u.useRateLimit)(),k=g&&g.remaining<=0,{activeScope:S,scopes:I,refreshScopes:_,isActiveScopeReady:F}=(0,h.useActiveScope)(),[U,q]=(0,n.useState)("plans"),[W,Z]=(0,n.useState)(void 0),G=(0,n.useMemo)(()=>null==I?void 0:I.find(e=>e.id===W),[I,W]),[K,X]=(0,n.useState)(null==G?void 0:G.avatar),$=(0,n.useRef)(null),{setPaymentDialogPlan:Y}=(0,l.usePaymentDialog)(),[J,Q]=(0,n.useTransition)(),ee=(0,N.useRouter)(),{planInfo:et,planSlug:en}=(0,i.usePlanInfo)(!0,null==S?void 0:S.id,!1),{planInfo:er,isLoading:ei}=(0,a.useTokenBillingPlanInfo)(),ea=(0,n.useMemo)(()=>{var e;return"v0-team"===en?null==et||null==(e=et.plans)?void 0:e.filter(e=>"v0-team"===e.slug||"v0-enterprise"===e.slug):null==et?void 0:et.plans},[en,et]),[eo,es]=(0,n.useState)(f),{tbb:el}=(0,M.useFlags)(),ec=el?L(er):0,eu=(0,n.useMemo)(()=>{if(m)return m;let e=el&&ec<=d.MINIMUM_CREDITS_TO_SEND_MESSAGE;return"plans"===U?k?el?"You are out of monthly credits":"Message Limit Reached":el?e?"You are out of credits":"Explore More Plans":"Upgrade Plan":"Confirm your Team's Details"},[m,el,ec,U,k]),ed=(0,n.useMemo)(()=>{if("plans"===U){if(void 0===g&&!el)return(0,t.jsx)(c.Skeleton,{className:"h-4 w-full"});let e=[];if(en){let n=d.PLAN_SLUG_TO_PLAN_NAME[en],r=eo?d.PLAN_SLUG_TO_PLAN_NAME[eo]:void 0;if(el)return(0,t.jsxs)(p.ModalDescription,{children:["You are currently on the v0 ",n," plan. Upgrade or start a new plan for monthly credit limits."]});k?(e.push("You have reached the message limit on the v0 ".concat(n," plan.")),"v0-team"===eo||"v0-enterprise"===eo?e.push("Start a v0 ".concat(r," plan for higher message limits.")):"v0-enterprise"!==en&&e.push("Upgrade ".concat(r?"to v0 ".concat(r," "):"","for higher message limits."))):e.push("You're currently on the v0 ".concat(n," plan."))}return(0,t.jsx)(p.ModalDescription,{children:e.map((e,n)=>(0,t.jsx)("p",{children:e},n))})}return"team-details"===U?(0,t.jsx)(p.ModalDescription,{children:"Edit your Team's avatar and name."}):null},[U,el,g,en,k,eo]),ep=(0,n.useCallback)(e=>{Y(e),(0,T.closeDialog)()},[Y]),eh=(0,n.useCallback)(e=>{Q(async()=>{if(!W)return;let t=e.get("team-name");if(!t)return void y.toast.error("Team name is required");let n=e.get("team-avatar"),r=await H(n);!0===await (0,w.updateTeamDetails)({teamId:W,name:t,avatar:n,avatarSha:r})?(_(),y.toast.success("Team details configured"),X(void 0),q("plans"),ee.push("/chat/upgrade?teamId=".concat(W,"&premium=").concat("v0-level3"===en)),Z(void 0),(0,T.closeDialog)()):y.toast.error("Failed to update team details. Please try again.")})},[W,en,_,ee]),ef=(0,n.useCallback)(()=>{if(eo&&(0,E.track)("ClickUpgradeModalButton",{targetPlan:eo}),"plans"===U&&(("v0-level3"===eo||"v0-platinum"===eo)&&ep(eo),"v0-team"===eo&&Q(async()=>{let e=await (0,v.detectUserVercelUsage)();if("error"in e){let t=Error(e.error);(0,x.handleChatError)(t)||y.toast.error("Failed to start team plan. Please try again.")}else{let{type:t,recommendedTeamId:n}=e;n&&ee.prefetch("/chat/upgrade?teamId=".concat(n)),"new"===t?(Z(n),q("team-details")):(ee.push("/chat/upgrade?teamId=".concat(n)),(0,T.closeDialog)())}})),"team-details"===U){var e;null==(e=$.current)||e.requestSubmit()}},[U,ep,ee,eo]),em=(0,n.useCallback)(e=>{if(e.size>=R)return void y.toast.error("File size is too large. Please upload a file smaller than 1MB.");X(URL.createObjectURL(e))},[X]);return((0,n.useEffect)(()=>{if(f)return es(f);es(V(ea,en))},[ea,en,f]),!ea||!F||el&&ei)?null:(0,t.jsxs)(D.AtomicDialog,{type:"upgradePlan",children:[(0,t.jsxs)(p.ModalHeader,{children:[(0,t.jsx)(p.ModalTitle,{children:eu}),ed]}),(0,t.jsxs)(p.ModalContent,{className:"max-sm:items-center flex flex-col gap-3 overflow-hidden","data-testid":"upgrade-modal-content",children:["plans"===U&&"v0-enterprise"!==en?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(O,{plans:ea,selectedPlan:eo,setSelectedPlan:e=>es(e),children:el?(0,t.jsx)("div",{className:"mt-1 flex flex-col",children:(0,t.jsx)(B,{currentStep:U,isPending:J,onClick:ef,selectedPlan:eo,currentPlan:en})}):null}),(0,t.jsxs)("p",{className:"flex gap-1 text-center text-sm text-gray-500",children:["Compare plans and options on our",(0,t.jsxs)(o.default,{className:"flex items-center gap-x-1 text-blue-600",href:"/pricing",onClick:()=>(0,T.closeDialog)(),children:["pricing page ",(0,t.jsx)(s.ExternalLink,{className:"size-3"})]}),"."]}),(0,t.jsx)(A.TransitionNode,{renderKey:eo,children:el||!eo||["v0-level0","v0-team","v0-enterprise"].includes(eo)||en===eo?null:(0,t.jsxs)("div",{className:"rounded-lg bg-blue-100 p-2 pl-3 text-sm text-blue-800",children:["v0 is a Vercel product, but has separate plans and pricing. Your"," ",(0,t.jsxs)("span",{className:"font-medium",children:["v0 ",P[eo].label]})," ","subscription is billed independently of the"," ",(0,t.jsx)(o.default,{className:"inline-flex items-center gap-x-1 underline",href:"https://vercel.com/pricing",target:"_blank",children:"Vercel plans"})," ","and is non-refundable."]})})]}):null,"team-details"===U?(0,t.jsxs)("form",{action:eh,className:"flex flex-col gap-6",ref:$,children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[K?(0,t.jsx)(C.Avatar,{rounded:!0,className:"size-20",children:(0,t.jsx)(C.AvatarImage,{alt:"Uploaded team avatar",className:"aspect-auto",src:K,title:"Uploaded team avatar"})},"uploaded-avatar-image"):(0,t.jsx)(C.AvatarUser,{rounded:!0,className:"size-20",teamId:null==G?void 0:G.id}),(0,t.jsx)(z,{uploading:J,onChange:em})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)(j.Label,{htmlFor:"team-name",children:"Team Name"}),(0,t.jsx)(b.Input,{id:"team-name",name:"team-name",required:!0,maxLength:256,minLength:1})]})]}):null]}),el?null:(0,t.jsxs)(p.ModalFooter,{className:"border-border bg-muted border-t p-4!",children:[(0,t.jsx)(r.Button,{onClick:()=>{"team-details"===U?q("plans"):(0,T.closeDialog)()},size:"sm",type:"button",variant:"secondary",children:"team-details"===U?"Back":"Cancel"}),(0,t.jsx)(B,{currentStep:U,isPending:J,onClick:ef,selectedPlan:eo,currentPlan:en})]})]})}let O=e=>{let{plans:n,selectedPlan:r,setSelectedPlan:i,children:a}=e,{tbb:o}=(0,M.useFlags)(),s=(null==n?void 0:n.filter(e=>"v0-platinum"!==e.slug))||[],l=o&&"v0-platinum"===r?"v0-level3":r;return(0,t.jsxs)(f.Tabs,{className:"flex w-full flex-col gap-4",onValueChange:i,value:l,children:[(0,t.jsx)(f.TabsList,{className:"grid h-fit",style:{gridTemplateColumns:"repeat(".concat(s.length,", 1fr)")},children:s.map(e=>(0,t.jsx)(f.TabsTrigger,{value:e.slug,children:e.name},e.slug))}),s.map(e=>(0,t.jsx)(f.TabsContent,{value:e.slug,children:(0,t.jsxs)("div",{className:(0,I.cn)("bg-muted border-alpha-200 flex flex-col gap-4 rounded-sm border p-4 text-sm",{"h-72":!o}),children:[(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsxs)("h1",{className:"text-base font-semibold",children:["v0 ",e.name]}),(0,t.jsx)(F,{plan:e})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[e.slug in P?(0,t.jsx)("p",{className:"font-semibold",children:P[e.slug].title}):null,(0,t.jsx)("ul",{className:"flex flex-col gap-3",children:e.slug in P?P[e.slug].bullets.map(e=>(0,t.jsxs)("li",{className:"flex items-center gap-2",children:[(0,t.jsx)(g.Check,{size:20}),e]},e)):null})]}),a]})},e.slug))]})},F=e=>{let{plan:n}=e,{tbb:r}=(0,M.useFlags)(),i="v0-enterprise"===n.slug,a="v0-team"===n.slug,o=i?void 0:(0,m.formatPlanTotalPrice)(n),s=i?void 0:a?"/user/month":"/month";return r&&i?(0,t.jsx)("div",{className:"flex items-center gap-1 text-xl font-semibold",children:"Custom Pricing"}):i?null:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{className:"text-xl font-semibold",children:o}),(0,t.jsx)("span",{className:"align-text-bottom text-sm leading-7 text-gray-500",children:s})]})},V=(e,t)=>{if(!e||!t)return;let n=e.find(e=>e.slug===t),r=(n?e.indexOf(n):0)+1;if("v0-level0"===t){let t=e.findIndex(e=>"v0-team"===e.slug);-1!==t&&(r=t)}let i=e[r];return i?i.slug:void 0},B=e=>{let{currentPlan:n,isPending:i,selectedPlan:a,onClick:s,currentStep:l}=e,{tbb:c}=(0,M.useFlags)(),u=(0,S.usePlanLabelMap)();if(!a)return null;if(a===n)return(0,t.jsx)(r.Button,{disabled:!0,size:"sm",children:"Current Plan"});if("v0-level0"===a)return(0,t.jsx)(r.Button,{className:"w-full md:w-auto",size:"sm",onClick:()=>(0,E.track)("ClickDowngradeModalButton",{targetPlan:"v0-level0"}),asChild:!0,type:"button",variant:"secondary",children:(0,t.jsx)(o.default,{href:"/subscription?from=chat",children:"Downgrade Plan"})});if("v0-level3"===a&&"v0-platinum"===n)return(0,t.jsx)(r.Button,{className:"w-full md:w-auto",size:"sm",onClick:()=>(0,E.track)("ClickDowngradeModalButton",{targetPlan:"v0-level3"}),asChild:!0,type:"button",variant:"secondary",children:(0,t.jsx)(o.default,{href:"/subscription?from=chat",children:"Downgrade Plan"})});if("v0-enterprise"===a)return(0,t.jsx)(r.Button,{onClick:()=>(0,E.track)("ClickUpgradeModalButton",{targetPlan:"v0-enterprise"}),className:"w-full md:w-auto",size:"sm",asChild:!0,type:"button",children:(0,t.jsx)(o.default,{href:d.CONTACT_SALES_LINK,children:"Contact Sales"})});if("v0-team"===a){let e=c?"Start a Team Plan":"Start a v0 ".concat(u[a].label," Plan");return(0,t.jsx)(r.Button,{className:"w-full md:w-auto",disabled:i,onClick:s,size:"sm",type:"button",children:"plans"===l?e:"Continue to Payment"})}return(0,t.jsxs)(r.Button,{disabled:n===a,onClick:s,size:"sm",children:["Upgrade to v0 ",u[a].label]})},z=e=>{let{uploading:n,onChange:i}=e;return(0,t.jsx)(r.Button,{asChild:!0,size:"sm",variant:"secondary",children:(0,t.jsxs)("label",{"data-id":"team-avatar-upload",htmlFor:"team-avatar",children:[(0,t.jsx)("input",{className:"sr-only","data-enable-grammarly":"false","data-gramm":"false","data-gramm_editor":"false",disabled:n,id:"team-avatar",name:"team-avatar",onChange:e=>{var t;e.preventDefault();let n=null==(t=e.target.files)?void 0:t[0];n&&i(n)},accept:"image/png,image/jpeg",type:"file"}),(0,t.jsx)(k.CloudUpload,{}),"Upload Photo"]})})};function H(e){return new Promise(t=>{let n=new FileReader;n.addEventListener("load",e=>{let{target:n}=e;(null==n?void 0:n.result)instanceof ArrayBuffer&&crypto.subtle.digest("SHA-1",n.result).then(e=>{t(U(e))}).catch(e=>console.error(e))}),n.readAsArrayBuffer(e)})}function U(e){let t=[],n=new DataView(e);for(let e=0;e<n.byteLength;e+=4){let r=n.getUint32(e).toString(16),i="00000000",a=(i+r).slice(-i.length);t.push(a)}return t.join("")}e.s(["AddPaymentMethodDialog",()=>ee],642969);var q=t,W=h,Z=e.i(845142),G=e.i(460816),K=p,X=D;e.i(904347);var $=T,Y=r,J=e.i(307778),Q=y;function ee(e){let{paymentMethod:t}=e,{user:n}=(0,W.useActiveScope)(),r=(null==n?void 0:n.billingMode)==="test"?"test":"live",i=n?{name:n.name,email:n.email}:void 0;return(0,q.jsx)(G.StripeProvider,{mode:r,children:(0,q.jsx)(et,{paymentMethod:t,billingDetails:i})})}function et(e){let{paymentMethod:t,billingDetails:n}=e,r=(0,Z.useChoosePaymentMethod)({paymentMethod:t,noPrefix:!0,billingDetails:n}),i=async()=>{if("add-new"===r.status&&await r.submit())return Q.toast.success("New Payment Method added."),(0,$.closeDialog)()},a=()=>{if("add-new"===r.status&&r.useExisting)return void r.useExisting();(0,$.closeDialog)()};return(0,q.jsxs)(X.AtomicDialog,{type:"addPaymentMethod",children:[(0,q.jsx)(K.ModalHeader,{children:(0,q.jsx)(K.ModalTitle,{children:"Choose New Payment Method"})}),(0,q.jsx)(K.ModalContent,{children:r.form}),(0,q.jsxs)(K.ModalFooter,{children:[(0,q.jsx)(Y.Button,{type:"button",variant:"secondary",onClick:a,disabled:"submitting"===r.status,children:"add-new"===r.status&&t?"Back":"Cancel"}),(0,q.jsxs)(Y.Button,{type:"button",onClick:i,disabled:"add-new"!==r.status,children:["submitting"===r.status?(0,q.jsx)(J.IconSpinner,{}):null,(0,q.jsx)("span",{children:"Add New Payment Method"})]})]})]})}e.s(["RedeemCodeDialog",()=>em],485614);var en=t,er=n,ei=r,ea=b,eo=e.i(547259),es=(0,eo.createServerReference)("4098d4e05ed0dca18298bc746f973505a3e372188e",eo.callServer,void 0,eo.findSourceMapURL,"claimUsageCode"),el=D,ec=T,eu=p,ed=e.i(607391),ep=e.i(337034),eh=e.i(612161),ef=e.i(287089);function em(){let[e,t]=(0,er.useState)(""),[n,r]=(0,er.useState)(!1),[i,a]=(0,er.useState)(null),[o,s]=(0,er.useState)(!1),l=(0,er.useRef)(null);(0,er.useEffect)(()=>{let e=setTimeout(()=>{l.current&&l.current.focus()},150);return()=>clearTimeout(e)},[]);let c=async t=>{t.preventDefault(),r(!0),a(null);try{let t=await es(e);a(t),t.success||(s(!0),setTimeout(()=>s(!1),250))}catch(e){a({success:!1,message:e instanceof Error?e.message:"Failed to claim code"}),s(!0),setTimeout(()=>s(!1),250)}finally{r(!1)}},u=()=>{(0,ec.closeDialog)(),setTimeout(()=>{t(""),a(null)},300)};return(0,en.jsxs)(el.AtomicDialog,{type:"redeemCode",children:[(0,en.jsx)("div",{className:"flex flex-col px-4 pt-4",children:(0,en.jsx)("div",{className:"flex items-center justify-center p-4 bg-muted rounded-md border border-alpha-400 h-[240px]",children:(0,en.jsx)("div",{className:"w-[250px] relative transition-all duration-500 ".concat(o?ef.default.jiggle:""," ").concat((null==i?void 0:i.success)?"scale-105":""),style:{transform:(null==i?void 0:i.success)?"rotate(-3deg) scale(1.05)":o?"translateX(-2px)":"translateX(0px)"},children:(0,en.jsx)(ep.CreditCard,{amount:(null==i?void 0:i.success)?Number(i.credits).toFixed(2):"0.00",handle:"Gifted Credits"})})})}),(0,en.jsxs)(eu.ModalHeader,{className:"!pb-4 gap-1",children:[(0,en.jsx)(eu.ModalTitle,{children:(null==i?void 0:i.success)?"You claimed $".concat(Number(i.credits).toFixed(2)," in credits!"):"Redeem a Usage Code"}),(0,en.jsx)(eu.ModalDescription,{children:(null==i?void 0:i.success)?"Your credits will be ready to use immediately. Happy prompting!":"If you have a Usage Code for v0, you can enter it here to add credits to your account."})]}),!(null==i?void 0:i.success)&&(0,en.jsx)(eu.ModalContent,{children:(0,en.jsxs)("form",{id:"redeem-form",onSubmit:c,className:"space-y-2",children:[(0,en.jsx)(ea.Input,{ref:l,id:"code",value:e,onChange:e=>t(e.target.value.trim()),placeholder:"Enter a code",required:!0,disabled:n,className:i&&!i.success?"border-red-600 ring-3 ring-red-100 focus-within:border-red-700 rounded-md":"rounded-md"}),i&&!i.success&&(0,en.jsxs)("span",{className:"flex items-center gap-2 whitespace-nowrap text-red-600",children:[(0,en.jsx)(eh.Stop,{className:"h-4 w-4 shrink-0"}),(0,en.jsx)("span",{className:"truncate text-sm",children:i.message})]})]})}),(0,en.jsx)(eu.ModalFooter,{className:"bg-muted border-t border-alpha-400",children:(null==i?void 0:i.success)?(0,en.jsx)(ei.Button,{type:"button",onClick:u,size:"sm",className:"rounded-md",children:"Start Building"}):(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(ei.Button,{type:"button",variant:"secondary",onClick:u,disabled:n,size:"sm",className:"rounded-md",children:"Cancel"}),(0,en.jsx)(ei.Button,{type:"submit",form:"redeem-form",disabled:n,size:"sm",className:"rounded-md",children:(0,en.jsx)(ed.ActionStatus,{loading:"Verifying",isLoading:n,children:"Redeem"})})]})})]})}},2077,e=>{"use strict";e.s(["Duplicate",()=>m,"Fork",()=>h,"ForkBlockButton",()=>d]);var t=e.i(832520),n=e.i(200407),r=e.i(176248),i=e.i(794593),a=e.i(304649),o=e.i(92479),s=e.i(297239),l=e.i(556355),c=e.i(605528);e.i(904347);var u=e.i(37737);function d(e){let{blockId:c,forkCount:d,className:p,page:f,canWriteToChat:m,shorthandToolTip:g=!1,isMenuItem:v=!1,variant:x}=e,{isStreaming:y}=(0,o.useChatLoadingState)(),b=(0,s.useT)(),w=(0,n.useCallback)(()=>{(0,u.openDialog)({type:"forkBlock",data:{blockId:c,page:f,canWriteToChat:!!m}})},[m,c,f]),j=null,C="block"===f||!m;return(j="block"===f?"secondary":m?"ghost":"secondary",C&&(j="default"),v)?(0,t.jsxs)(l.DropdownMenuItem,{className:p,disabled:y,onClick:w,children:[(0,t.jsx)(h,{className:"size-4!"}),(0,t.jsx)("span",{children:b("forkBlockButton.fork")})]}):(0,t.jsxs)(r.Button,{className:(0,a.cn)("group rounded-md px-2 has-[>svg]:px-2",d&&"md:has-[>svg]:pr-2","ghost"===j?"size-7":"h-7",p),disabled:y,onClick:w,tooltip:C?void 0:{side:"bottom",align:"center",content:g?"Duplicate into a new chat":(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"font-medium",children:b("forkBlockButton.fork")}),(0,t.jsx)("span",{className:"max-w-[180px] text-sm text-gray-400",children:b("forkBlockButton.modalDescription")})]})},size:"sm",variant:null!=x?x:j,children:[(0,t.jsx)(h,{"aria-hidden":"true",className:"size-3.5! md:size-4!"}),C?(0,t.jsx)("span",{children:b("forkBlockButton.fork")}):null,d?(0,t.jsx)(i.Badge,{className:"bg-gray-150 hidden min-w-5 border-0 text-gray-500 group-hover:bg-gray-300 group-hover:text-gray-600 md:flex",size:"sm",variant:"secondary",children:(0,t.jsx)("span",{className:"translate-y-[0.5px]",children:d})}):null]})}let p=(0,c.withNewIcon)('\n  <path d="M12.5 0C13.8807 0 15 1.11929 15 2.5C15 3.61933 14.2642 4.56613 13.25 4.88477V6C13.25 7.51878 12.0188 8.75 10.5 8.75H8.75V11.1143C9.76431 11.4328 10.5 12.3806 10.5 13.5C10.5 14.8807 9.38071 16 8 16C6.61929 16 5.5 14.8807 5.5 13.5C5.5 12.3806 6.23569 11.4328 7.25 11.1143V8.75H5.5C3.98122 8.75 2.75 7.51878 2.75 6V4.88477C1.73584 4.56613 1 3.61933 1 2.5C1 1.11929 2.11929 0 3.5 0C4.88071 0 6 1.11929 6 2.5C6 3.61933 5.26416 4.56613 4.25 4.88477V6C4.25 6.69036 4.80964 7.25 5.5 7.25H10.5C11.1904 7.25 11.75 6.69036 11.75 6V4.88477C10.7358 4.56613 10 3.61933 10 2.5C10 1.11929 11.1193 0 12.5 0ZM8 12.5C7.44772 12.5 7 12.9477 7 13.5C7 14.0523 7.44772 14.5 8 14.5C8.55228 14.5 9 14.0523 9 13.5C9 12.9477 8.55228 12.5 8 12.5ZM3.5 1.5C2.94772 1.5 2.5 1.94772 2.5 2.5C2.5 3.05228 2.94772 3.5 3.5 3.5C4.05228 3.5 4.5 3.05228 4.5 2.5C4.5 1.94772 4.05228 1.5 3.5 1.5ZM12.5 1.5C11.9477 1.5 11.5 1.94772 11.5 2.5C11.5 3.05228 11.9477 3.5 12.5 3.5C13.0523 3.5 13.5 3.05228 13.5 2.5C13.5 1.94772 13.0523 1.5 12.5 1.5Z" fill="currentColor" />\n'),h=e=>(0,t.jsx)(p,{...e,"aria-hidden":"true"}),f=(0,c.withNewIcon)('\n  <path d="M13.25 4.5C14.2163 4.50024 15 5.28365 15 6.25V13.75C15 14.7164 14.2163 15.4998 13.25 15.5H6.7002C5.72932 15.4997 4.94369 14.7092 4.9502 13.7383L5.00195 6.23828C5.00854 5.27663 5.79034 4.50024 6.75195 4.5H13.25ZM6.75195 6C6.61484 6.00024 6.50302 6.11091 6.50195 6.24805L6.4502 13.748C6.44925 13.8866 6.56167 13.9997 6.7002 14H13.25C13.3879 13.9998 13.5 13.8879 13.5 13.75V6.25C13.5 6.11208 13.3879 6.00024 13.25 6H6.75195ZM10.75 9.25H12.5V10.75H10.75V12.5H9.25V10.75H7.5V9.25H9.25V7.5H10.75V9.25ZM9.21191 0.5C10.1783 0.500098 10.9619 1.28356 10.9619 2.25V3.10742H9.46191V2.25C9.46191 2.11199 9.3499 2.0001 9.21191 2H2.75C2.61193 2 2.5 2.11193 2.5 2.25V9.75C2.5 9.88807 2.61193 10 2.75 10H4.01855V11.5H2.75C1.7835 11.5 1 10.7165 1 9.75V2.25C1 1.2835 1.7835 0.5 2.75 0.5H9.21191Z" fill="currentColor" />\n'),m=e=>(0,t.jsx)(f,{...e,"aria-hidden":"true"})},194433,e=>{"use strict";var t=e.i(547259),n=(0,t.createServerReference)("78b7dd2675b97bf1a96916aa21a50329fd471533d7",t.callServer,void 0,t.findSourceMapURL,"forkBlock");e.s(["forkBlock",()=>n])},199814,e=>{"use strict";e.s(["ChatForkBlockDialog",()=>w]);var t=e.i(832520),n=e.i(200407),r=e.i(176248),i=e.i(763480);e.i(563948);var a=e.i(407562),o=e.i(686832),s=e.i(120945),l=e.i(2077),c=e.i(53223),u=e.i(194433),d=e.i(120485),p=e.i(480118),h=e.i(297239),f=e.i(323194),m=e.i(32170),g=e.i(707827),v=e.i(37737),x=e.i(584497),y=e.i(70165);let b="production";function w(e){let{page:w,canWriteToChat:j,blockId:C}=e,{expectUser:k,user:S}=(0,m.useUser)(),{setShowSignInDialog:N}=(0,f.useSignInDialog)(),E=(0,p.useRouter)(),M=(0,h.useT)(),{title:I}=(0,x.useChatMetadata)(),D=(0,y.useIsMobile)(),T=(0,n.useRef)(null),[A,L]=(0,n.useTransition)(),P=(0,n.useMemo)(()=>{let e=I||"Untitled Chat",t=/^(?:Duplicate of )*(.*)/.exec(e);return(null==t?void 0:t[1])?"Duplicate of ".concat(t[1]):"Duplicate of ".concat(e)},[I]),[R,_]=(0,n.useState)(P);(0,n.useEffect)(()=>{setTimeout(()=>{var e,t;null==(e=T.current)||e.focus(),D||null==(t=T.current)||t.select()},0)},[D]);let O=(0,n.useCallback)(()=>{if(!R.trim())return void a.toast.error("Please enter a fork name");if(!j&&(null==S?void 0:S.isAdminMode)&&!window.confirm("[V0 ADMIN] Are you sure you want to fork this block?"))return;let e=new URLSearchParams;e.set("forkBlockId",C);let t="http://localhost:3000/chat";"production"===b&&(t="https://v0.app/chat");let n="".concat(t,"?").concat(e.toString());if(!k)return N({content:!1,forkBlockId:C});(0,c.track)("ClickForkBlock");try{L(async()=>{if("chat"===w){let e=await (0,u.forkBlock)(C,void 0,R.trim());if(!e||"string"!=typeof e)return void a.toast.error(M("forkBlockButton.errorToast"));let t=new URLSearchParams(window.location.search).get("assignBranch"),n=t?"/chat/".concat(e,"?assignBranch=").concat(encodeURIComponent(t)):"/chat/".concat(e);E.push(n)}if(a.toast.success(M("forkBlockButton.successToast")),"block"===w){var e;null==(e=window.open(n,"_blank"))||e.focus()}(0,v.closeDialog)()})}catch(e){(0,p.unstable_rethrow)(e),console.log(e),(0,d.handleChatError)(e)||a.toast.error(M("forkBlockButton.errorToast"))}},[R,j,null==S?void 0:S.isAdminMode,C,k,N,w,M,E]),F=(0,n.useCallback)(e=>{e.preventDefault(),O()},[O]),V=(0,n.useCallback)(e=>{"Enter"===e.key&&!A&&R.trim()&&(e.preventDefault(),O())},[O,A,R]),B=(0,n.useMemo)(()=>A?(0,t.jsx)(g.Spinner,{className:"size-4! text-gray-500",size:16}):(0,t.jsx)(l.Duplicate,{className:"size-4!"}),[A]);return(0,t.jsxs)(s.AtomicDialog,{type:"forkBlock",children:[(0,t.jsxs)(o.ModalHeader,{children:[(0,t.jsx)(o.ModalTitle,{children:M("forkBlockButton.fork")}),(0,t.jsxs)(o.ModalDescription,{children:[(0,t.jsx)("p",{className:"text-foreground text-label-14 mb-4",children:M("forkBlockButton.modalDescription")}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{htmlFor:"forkName",className:"text-sm font-medium text-foreground",children:"New chat name"}),(0,t.jsx)(i.Input,{id:"forkName",ref:T,value:R,onChange:e=>_(e.target.value),onKeyDown:V,placeholder:"Enter fork name",disabled:A,className:"w-full",maxLength:100,autoFocus:!0})]})]})]}),(0,t.jsxs)("div",{className:"bg-muted border-alpha-400 flex w-full items-center justify-end gap-2 border-t p-4",children:[(0,t.jsx)(o.ModalClose,{asChild:!0,children:(0,t.jsx)(r.Button,{variant:"secondary",size:"sm",children:M("forkBlockButton.cancel")})}),(0,t.jsxs)(r.Button,{className:"fork-button",size:"sm",onClick:F,disabled:A||!R.trim(),children:[B,M("forkBlockButton.fork")]})]})]})}},366021,771539,101071,e=>{"use strict";e.s(["ScopeDisplayText",()=>P,"ScopeListItem",()=>L,"TransferOwnershipModal",()=>R],366021);var t=e.i(832520),n=e.i(686832),r=e.i(176248);e.s(["TransferOwnershipSetting",()=>c,"useTransferOwnershipModal",()=>l],771539);var i=t,a=e.i(199929),o=r,s=e.i(346970);function l(){let{data:e,mutate:t}=(0,s.default)("transferOwnershipModal",null,{fallbackData:!1});return{transferOwnershipModalOpen:e,setTransferOwnershipModalOpen:t}}function c(){let{setTransferOwnershipModalOpen:e}=l();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(a.SettingsItem,{children:[(0,i.jsxs)(a.SettingsItemContent,{children:[(0,i.jsx)(a.SettingsItemTitle,{children:"Transfer Data"}),(0,i.jsx)(a.SettingsItemDescription,{children:"Transfer your chats or projects to another team or account."})]}),(0,i.jsx)(a.SettingsItemAction,{children:(0,i.jsx)(o.Button,{size:"sm",variant:"secondary",className:"rounded-md h-7 px-2",onClick:()=>{e(!0)},children:"Start Transfer"})})]}),(0,i.jsx)(R,{})]})}var u=e.i(211976),d=e.i(200407),p=e.i(592258),h=e.i(230766),f=e.i(837062),m=e.i(906261),g=e.i(667660),v=e.i(206037),x=e.i(794593);e.i(563948);var y=e.i(407562),b=e.i(762585),w=e.i(547259),j=(0,w.createServerReference)("70f78a46863a72682b5447c4c88d571c9b888b6564",w.callServer,void 0,w.findSourceMapURL,"transferOwnershipAction");e.s(["transferOwnershipAction",()=>j],101071);var C=e.i(480118),k=e.i(827728),S=e.i(75356),N=e.i(707827);e.i(472428);var E=e.i(152641),M=e.i(596359),I=e.i(403055);let D="";function T(e){let{planSlug:n}=e,r={"v0-level0":{label:"Free",variant:"secondary"},"v0-level3":{label:"Premium",variant:"teal"},"v0-team":{label:"Team",variant:"blue"},"v0-enterprise":{label:"Enterprise",variant:"purple"},"v0-platinum":{label:"Ultra",variant:"teal"}}[n];return r?(0,t.jsx)(x.Badge,{size:"sm",variant:r.variant,children:r.label}):null}function A(e,t,n){return e.id!==(null==t?void 0:t.id)&&(!!(0,m.isUserScope)(e)||"v0-team"===n||"v0-enterprise"===n)}function L(e){let{scope:n,activeScope:r}=e,{planSlug:i}=(0,v.usePlanInfo)(!0,n.id);if(!A(n,r,i))return null;let a=(0,m.isUserScope)(n)?n.username:n.name;return(0,t.jsx)(p.SelectItem,{className:"flex w-full items-center justify-between gap-2",value:n.id,children:(0,t.jsxs)("div",{className:"flex w-full items-center justify-between gap-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(h.AvatarUser,{teamId:(0,m.isUserScope)(n)?void 0:n.id,userId:(0,m.isUserScope)(n)?n.id:void 0,className:"h-4 w-4"}),(0,t.jsx)("p",{children:a})]}),i&&(0,t.jsx)(T,{planSlug:i})]})})}function P(e){let{activeScope:n}=e;return n?(0,m.isUserScope)(n)?(0,t.jsxs)("span",{className:"inline-flex font-medium ",children:[n.username,"'s Account "]}):(0,t.jsxs)("span",{className:"inline-flex font-medium",children:[n.slug," "]}):(0,t.jsx)("span",{className:"mx-1 inline-flex align-middle",children:(0,t.jsx)(b.Skeleton,{className:"h-4 w-24"})})}function R(){let{transferOwnershipModalOpen:e,setTransferOwnershipModalOpen:i}=l(),[a,o]=(0,d.useState)(!1),{scopes:s}=(0,f.useScopes)(),[c,v]=(0,d.useState)(""),{activeScope:x}=(0,g.useActiveScope)(),b=(0,C.useRouter)(),[w,M]=(0,d.useState)(new Set),[I,T]=(0,d.useState)(!1),{count:R,increment:O,reset:F}=(0,k.useCounter)(1),V=(0,d.useRef)(null),B=(0,d.useRef)(null),[z,H]=(0,d.useState)([]),{data:U,isLoading:q}=(0,E.useServerQuerySWR)(["scoped","paginatedProjects"],{page:R,pageSize:S.PROJECT_PAGE_SIZE,searchText:""},{onSuccess(e){1==R?H(e):H(t=>[...t,...e])}});function W(){Z&&O()}(0,d.useEffect)(()=>{F()},[x]);let Z=(0,d.useMemo)(()=>U.length==S.PROJECT_PAGE_SIZE,[S.PROJECT_PAGE_SIZE,U.length]);(0,d.useEffect)(()=>{if((null==s?void 0:s.length)&&!c){let e=s.find(e=>A(e,x));e&&v(e.id)}},[s,c,x]);let G=null==s?void 0:s.find(e=>e.id===c),K=async()=>{o(!0);try{if(!x)throw Error("Active scope is null");if(!G)throw Error("Selected team is null");let e=await j(x,G,Array.from(w));if(e.error)throw e.error;y.toast.success("Ownership transferred successfully"),b.refresh(),M(new Set)}catch(e){y.toast.error("message"in e?e.message:"Failed to transfer ownership"),console.error("Failed to transfer ownership:",e)}finally{i(!1),o(!1)}};function X(e){M(t=>{if(e==D)return new Set([]);let n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})}return(0,d.useEffect)(()=>{if(!I||!V.current||!B.current)return;let e=new IntersectionObserver(e=>{let[t]=e;t.isIntersecting&&W()},{root:V.current});return e.observe(B.current),()=>{e.disconnect()}},[I]),(0,t.jsxs)(n.Modal,{open:e,onOpenChange:i,children:[(0,t.jsxs)(n.ModalHeader,{className:"space-y-2",children:[(0,t.jsx)(n.ModalTitle,{children:"Transfer Data"}),(0,t.jsxs)(n.ModalDescription,{children:["Transfer one or all of your projects and chats from"," ",(0,t.jsxs)("span",{className:"whitespace-nowrap",children:[(0,t.jsx)("span",{className:"ml-[-2px] inline-flex align-middle",children:(0,t.jsx)(h.AvatarUser,{teamId:(0,m.isUserScope)(x)||null==x?void 0:x.id,userId:(0,m.isUserScope)(x)?x.id:void 0,className:"ml-1 size-4 rounded-full"})})," ",(0,t.jsx)(P,{activeScope:x})]}),"to another account or team.\n          \n          Doing so will unlink any connected Vercel projects, so deployments and environment variables will not be\n          transferred."]})]}),(0,t.jsxs)(n.ModalContent,{className:"py-4 space-y-4",children:[(0,t.jsxs)(p.Select,{value:void 0,open:I,onOpenChange:T,children:[(0,t.jsx)(p.SelectTrigger,{className:"w-full",children:(0,t.jsx)(p.SelectValue,{placeholder:0==w.size?"All projects":"".concat(w.size," ").concat(w.size>1?"projects":"project"," selected")})}),(0,t.jsxs)(p.SelectContent,{className:"max-h-[250px] overflow-y-auto relative",ref:V,children:[(0,t.jsx)(_,{name:"All projects",id:D,checked:0==w.size,onClick:X}),z.map(e=>(0,t.jsx)(_,{name:e.name,id:e.projectId,checked:w.has(e.projectId),onClick:X},e.projectId)),Z?(0,t.jsx)("div",{ref:B,className:"h-10 w-full pointer-events-none absolute"}):null,q?(0,t.jsx)("div",{className:"w-fit mx-auto",children:(0,t.jsx)(N.Spinner,{size:16})}):null]})]}),(0,t.jsxs)(p.Select,{value:c,onValueChange:v,children:[(0,t.jsx)(p.SelectTrigger,{className:"w-full",children:(0,t.jsx)(p.SelectValue,{placeholder:"Select a team or user..."})}),(0,t.jsx)(p.SelectContent,{className:"max-h-[250px] overflow-y-auto",children:null==s?void 0:s.map(e=>(0,t.jsx)(L,{scope:e,activeScope:x},e.id))})]})]}),(0,t.jsxs)(n.ModalFooter,{children:[(0,t.jsx)(n.ModalClose,{asChild:!0,children:(0,t.jsx)(r.Button,{variant:"secondary",size:"sm",children:"Cancel"})}),(0,t.jsx)(u.SpinnerButton,{size:"sm",pending:a,onClick:K,disabled:!G,children:a?"Transferring":"Confirm and Transfer"})]})]})}function _(e){let{name:n,id:r,checked:i,onClick:a}=e;return(0,t.jsxs)("div",{className:"p-1.5 text-sm hover:bg-gray-100 rounded-md flex items-center gap-2",onClick:()=>{a(r)},children:[(0,t.jsx)("div",{className:(0,I.cn)("flex h-3.5 w-3.5 items-center justify-center left-2",!i&&"invisible"),children:(0,t.jsx)(M.Check,{className:"h-3 w-3"})}),(0,t.jsx)("p",{children:n})]})}},331193,443283,565135,e=>{"use strict";var t=e.i(832520),n=e.i(686832),r=e.i(120945),i=e.i(176248),a=e.i(990453),o=e.i(707974),s=e.i(200407),l=e.i(763480),c=e.i(941088),u=e.i(676648);e.i(563948);var d=e.i(407562);e.i(472428);var p=e.i(152641),h=e.i(607391),f=e.i(547259),m=(0,f.createServerReference)("604f46230326374ecd0e0b77d5ffe734cceeeedf7d",f.callServer,void 0,f.findSourceMapURL,"configurePasswordProtectionAction"),g=e.i(32170),v=e.i(667660),x=e.i(538553);let y=new Set(["OWNER","MEMBER"]),b="__VERCEL_PASS__";function w(e){let{projectId:f}=e,{hasVercelWritePermission:w}=(0,v.useActiveScope)(),{user:j}=(0,g.useUser)(),[C,k]=(0,s.useState)(!1),[S,N]=(0,s.useState)(!1),[E,M]=(0,s.useState)(!1),[I,D]=(0,s.useState)(""),T=(0,s.useMemo)(()=>!(w&&(null==j||!j.teamRole||y.has(j.teamRole))),[w,null==j?void 0:j.teamRole]),{data:A,isLoading:L,mutate:P}=(0,p.useServerQuerySWR)(["project","passwordProtection"],{projectId:f});async function R(){N(!0);let e=C?"enabled":"disabled";try{let t=C?I.trim():void 0,n=await P({serverMutate:(async()=>await m(f,t))(),optimisticData:{enabled:C}});if(!0!=n)throw Error("An error happened while trying to ".concat(e," password protection"));d.toast.success("Password protection was ".concat(e," successfully"))}catch(t){d.toast.error("An error happened while trying to ".concat(e," password protection"))}finally{N(!1)}}return(0,s.useEffect)(()=>{A.enabled&&(k(!0),D(b))},[A]),(0,t.jsxs)(r.AtomicDialog,{type:"passwordProtection",children:[(0,t.jsxs)(n.ModalHeader,{children:[(0,t.jsx)(n.ModalTitle,{children:"Password Protection"}),(0,t.jsx)(n.ModalDescription,{className:"text-sm text-gray-800",children:"Ensures visitors to your deployments must enter a password in order to gain access. All chats created in this project will be password protected."})]}),(0,t.jsxs)(n.ModalContent,{className:"flex flex-col gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(x.RbacTooltip,{show:!w,requiredRole:"V0Builder",children:(0,t.jsx)(a.Switch,{thumbClassName:"size-[22px]",id:"password-protection",checked:C,onCheckedChange:k,disabled:L||S||T,className:"h-6 w-10"})}),(0,t.jsx)(o.Label,{htmlFor:"password-protection",className:"font-medium text-black",children:C?"Enabled":"Disabled"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(o.Label,{htmlFor:"password-input",children:"Password"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(x.RbacTooltip,{show:!w,requiredRole:"V0Builder",children:(0,t.jsx)(l.Input,{id:"password-input",placeholder:"Enter a password",type:E&&I!=b?"text":"password",disabled:!C||L||S||T,value:I,onChange:e=>D(e.target.value),className:"pr-10 [&:has(input:disabled)]:bg-gray-100 [&:has(input:disabled)]:text-gray-400",onFocus:()=>{I===b&&D("")},onBlur:()=>{""===I&&A.enabled&&D(b)}})}),I!==b?(0,t.jsx)(x.RbacTooltip,{show:!w,requiredRole:"V0Builder",children:(0,t.jsx)(i.Button,{type:"button",variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 h-8 w-8 -translate-y-1/2 p-0",onClick:()=>M(!E),disabled:!C||L||T,children:E?(0,t.jsx)(u.EyeOff,{className:"h-4 w-4 text-gray-500"}):(0,t.jsx)(c.Eye,{className:"h-4 w-4 text-gray-500"})})}):null]})]}),T?(0,t.jsx)("div",{className:"text-sm text-gray-500",children:(0,t.jsx)("p",{children:"You need additional permissions to manage Password Protection"})}):null]}),(0,t.jsxs)(n.ModalFooter,{className:"bg-muted border-alpha-400 border-t",children:[(0,t.jsx)(n.ModalClose,{asChild:!0,children:(0,t.jsx)(i.Button,{size:"sm",variant:"secondary",children:"Cancel"})}),(0,t.jsx)(x.RbacTooltip,{show:!w,requiredRole:"V0Builder",children:(0,t.jsx)(i.Button,{size:"sm",variant:"secondary",disabled:L||C&&!I.trim()||S||T,onClick:R,children:(0,t.jsx)(h.ActionStatus,{isLoading:S,loading:"Saving changes",children:"Save Changes"})})})]})]})}e.s(["PasswordProtection",()=>w],331193),e.s(["JoinedTeams",()=>A],443283);var j=t,C=n,k=i,S=r;e.i(904347);var N=e.i(37737),E=e.i(230766),M=e.i(366021),I=v,D=s,T=e.i(211976);function A(e){let{teams:t}=e,{setActiveScope:n}=(0,I.useActiveScope)();async function r(e){await n(e),(0,N.closeDialog)()}return(0,j.jsxs)(S.AtomicDialog,{type:"joinedNewTeams",children:[(0,j.jsxs)(C.ModalHeader,{children:[(0,j.jsxs)(C.ModalTitle,{children:["You've Joined"," ",(0,j.jsx)("span",{children:t.length>1?"New Teams":"a New Team"})]}),(0,j.jsxs)(C.ModalDescription,{children:["You've joined"," ",(0,j.jsx)("span",{children:t.length>1?"new teams":"a new team"})," on v0, do you want to switch?"]})]}),(0,j.jsx)(C.ModalContent,{className:"space-y-3",children:t.map(e=>(0,j.jsx)(L,{scope:e,onClick:r},e.id))}),(0,j.jsx)(C.ModalFooter,{children:(0,j.jsx)(k.Button,{size:"sm",onClick:N.closeDialog,children:"Continue with current team"})})]})}function L(e){let{scope:t,onClick:n}=e,[r,i]=(0,D.useState)(!1);return(0,j.jsxs)("div",{className:"flex justify-between",children:[(0,j.jsxs)("div",{className:"flex gap-1.5 items-center",children:[(0,j.jsx)(E.AvatarUser,{teamId:t.id,size:"sm",rounded:!0}),(0,j.jsx)(M.ScopeDisplayText,{activeScope:t})]}),(0,j.jsx)(T.SpinnerButton,{pending:r,size:"sm",variant:"secondary",onClick:async()=>{try{i(!0),await n(t)}finally{i(!1)}},children:"Switch"})]})}var P=t,R=n,_=r,O=i,F=s,V=h,B=v,z=e.i(592258),H=M,U=e.i(101071),q=e.i(380042),W=N;function Z(e){let{projectId:t}=e,[n,r]=(0,F.useState)(!1),{activeScope:i,scopes:a,setActiveScope:o}=(0,B.useActiveScope)(),[s,l]=(0,F.useState)(),c=(0,F.useMemo)(()=>null==a?void 0:a.find(e=>e.id===s),[s,a]);async function u(){r(!0);try{if(!i)throw Error("Active scope is null");if(!c)throw Error("Selected team is null");let e=await (0,U.transferOwnershipAction)(i,c,[t]);if(e.error)throw e.error;await o(c),q.toast.success("Ownership transferred successfully"),(0,W.closeDialog)()}catch(e){q.toast.error("message"in e?e.message:"Failed to transfer ownership")}finally{r(!1)}}return(0,P.jsxs)(_.AtomicDialog,{type:"transferProject",children:[(0,P.jsxs)(R.ModalHeader,{children:[(0,P.jsx)(R.ModalTitle,{children:"Transfer Project"}),(0,P.jsx)(R.ModalDescription,{className:"text-sm text-gray-800",children:"Transfer this project to a different team"})]}),(0,P.jsx)(R.ModalContent,{className:"flex flex-col gap-4",children:(0,P.jsxs)(z.Select,{value:s,onValueChange:l,children:[(0,P.jsx)(z.SelectTrigger,{className:"w-full",children:(0,P.jsx)(z.SelectValue,{placeholder:"Select a team or user..."})}),(0,P.jsx)(z.SelectContent,{className:"max-h-[250px] overflow-y-auto",children:null==a?void 0:a.map(e=>(0,P.jsx)(H.ScopeListItem,{scope:e,activeScope:i},e.id))})]})}),(0,P.jsxs)(R.ModalFooter,{className:"bg-muted border-alpha-400 border-t",children:[(0,P.jsx)(R.ModalClose,{asChild:!0,children:(0,P.jsx)(O.Button,{size:"sm",variant:"secondary",children:"Cancel"})}),(0,P.jsx)(O.Button,{size:"sm",disabled:n||!s,onClick:u,children:(0,P.jsx)(V.ActionStatus,{isLoading:n,loading:"Saving changes",children:"Transfer Project"})})]})]})}e.s(["TransferProject",()=>Z],565135)},353699,e=>{"use strict";let t=(0,e.i(605528).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M7.15714 0L2.33264 9.40776L1.77252 10.5H3.00001H7.00001C7.13808 10.5 7.25001 10.6119 7.25001 10.75V16H8.84288L13.6674 6.59224L14.2275 5.5H13H9.00001C8.86194 5.5 8.75001 5.38807 8.75001 5.25V0H7.15714ZM7.00001 9H4.22749L7.25001 3.1061V5.25C7.25001 6.2165 8.03351 7 9.00001 7H11.7725L8.75001 12.8939V10.75C8.75001 9.7835 7.96651 9 7.00001 9Z" fill="currentColor"/>');e.s(["Lightning",0,t])},265266,545102,e=>{"use strict";var t=e.i(832520),n=e.i(547259),r=(0,n.createServerReference)("7095fc345cee3767e0b72dd4a0d81c3a3bead277ef",n.callServer,void 0,n.findSourceMapURL,"updateProjectSettingsIcon"),i=e.i(535050),a=t,o=e.i(304649),s=e.i(802094);function l(e){let{icon:t,size:n="sm",variant:r="default",className:i}=e;return(0,a.jsx)("div",{className:(0,o.cn)("bg-background-subtle relative flex size-8 shrink-0 items-center justify-center text-gray-500 after:absolute after:inset-0 after:mix-blend-darken dark:after:mix-blend-lighten",{"size-5 rounded-sm after:rounded-sm [&>svg]:size-2.5 text-base after:border":"xs"===n,"size-8 rounded-lg after:rounded-lg [&>svg]:size-4 text-base after:border":"sm"===n,"size-12 rounded-xl after:rounded-xl [&>svg]:size-4 text-xl shadow-sm":"lg"===n},"menu-item"===r&&"size-4 bg-transparent text-gray-600 after:hidden group-hover:text-gray-900 group-focus:text-gray-900 [&>svg]:size-4",i),children:(0,a.jsx)(s.IconPickerIcon,{name:t})})}e.s(["ProjectIcon",()=>l],545102);var c=e.i(176248),u=e.i(762585),d=o,p=e.i(847801),h=e.i(200407),f=e.i(118376);let m=(0,p.default)(()=>e.A(343828).then(e=>e.IconPicker),{loadableGenerated:{modules:[970863]},loading:()=>(0,t.jsx)(u.Skeleton,{className:"size-12 rounded-xl"})}),g=(0,p.default)(()=>e.A(343828).then(e=>e.IconPickerContent),{loadableGenerated:{modules:[970863]},loading:()=>(0,t.jsx)(i.IconPickerSkeleton,{})});function v(e){let{projectId:n,icon:i,color:a,size:o="lg",readOnly:s,isNewPage:u=!1,onSelect:p,random:v}=e,[x,y]=(0,h.useState)(!1),[b,w]=(0,h.useState)(!1),[j,C]=(0,h.useState)({name:(0,f.cleanIconName)(i),color:null!=a?a:""});return(0,h.useEffect)(()=>{C({name:(0,f.cleanIconName)(i),color:null!=a?a:""})},[i,a]),(0,t.jsx)(m,{random:v,icon:j,onValueChange:e=>{p&&p(e.name),C(e),w(!0),u||(0,h.startTransition)(()=>{r(n,e.name,e.color)})},trigger:(0,t.jsx)(c.Button,{className:(0,d.cn)("aspect-square p-0","xs"===o&&"size-5 rounded-sm","sm"===o&&"size-8 rounded-lg","lg"===o&&"size-12 rounded-xl"),"data-testid":"project-icon-picker",disabled:s,onFocus:()=>w(!!b),onMouseEnter:()=>w(!1),tooltip:s?void 0:{open:!b&&x,onOpenChange:y,content:"Change icon"},variant:"ghost",children:(0,t.jsx)(l,{color:j.color,icon:j.name,size:"lg"})}),children:(0,t.jsx)(g,{})})}e.s(["ProjectIconPicker",()=>v],265266)},912821,578553,e=>{"use strict";e.s(["ProjectPageTitle",()=>m],912821);var t=e.i(832520),n=e.i(200407),r=e.i(403055),i=e.i(596359),a=e.i(7809),o=e.i(325318),s=e.i(176248);e.i(563948);var l=e.i(407562),c=e.i(120485),u=e.i(547259),d=(0,u.createServerReference)("40f34bd51be64ee8efade90a8e024346e0d1a2c6b7",u.callServer,void 0,u.findSourceMapURL,"renameProject");e.s(["renameProject",()=>d],578553);var p=e.i(480118),h=e.i(183673),f=e.i(365290);function m(e){let{initialTitle:u,projectId:m,canEditProjectName:g}=e,{projectName:v,updateProjectName:x}=(0,h.useProjectName)(),[y,b]=(0,n.useState)(v||u),[w,j]=(0,n.useState)(!1),[C,k]=(0,n.useState)(!1),[S,N]=(0,n.useState)(!1),E=(0,p.useRouter)(),M=(0,n.useRef)(v||u),I=(0,n.useRef)(null);(0,n.useEffect)(()=>{w||(b(v||u),M.current=v||u)},[v,u,w]),(0,n.useEffect)(()=>{var e;w&&(null==(e=I.current)||e.focus())},[w]);let D=()=>{g&&(j(!0),N(!1),M.current=y)},T=()=>{j(!1),N(!1),b(M.current)};async function A(e){k(!0);let t=e.get("name"),n=M.current;if(j(!1),b(t),t===n)return void k(!1);x(t),l.toast.success("Renamed project");try{let e=await d({projectId:m,name:t});if(!("success"in e)&&e.error)throw Error(e.error)}catch(e){x(n),b(n),j(!0),(0,c.handleChatError)(e,E,"Failed to rename project")||l.toast.error("Failed to rename project")}k(!1)}let L=(0,t.jsxs)("div",{className:"relative z-10 h-8 min-w-4",children:[(0,t.jsx)("input",{autoComplete:"off",className:(0,r.cn)("absolute inset-0 h-8 max-w-96 translate-y-[0.5px] whitespace-pre border-b text-xl font-semibold leading-relaxed tracking-tight focus:border-gray-500! focus:outline-hidden",!w&&"hidden"),"data-1p-ignore":!0,disabled:!w,id:"name",name:"name",onChange:e=>b(e.target.value),onKeyDown:e=>{"Escape"===e.key&&T()},ref:I,value:y,maxLength:100}),(0,t.jsx)("button",{type:"button",disabled:!g,onClick:D,className:(0,r.cn)("size-fit min-w-0 max-w-72 overflow-hidden truncate text-left text-xl font-semibold leading-relaxed tracking-tight sm:max-w-96",g?"cursor-pointer":"pointer-events-none",w&&"invisible"),id:"name",children:(0,t.jsx)("h1",{className:(0,r.cn)("truncate whitespace-pre",!g&&"pointer-event-auto"),children:y})})]}),P=w?(0,t.jsxs)("div",{className:"mb-0.5 flex gap-2",style:{...(0,f.transitionStyles)(["transform","opacity"]),transform:"translateX(0)",opacity:1},children:[(0,t.jsx)("div",{children:(0,t.jsx)(s.Button,{"aria-label":"Update",className:"size-7",disabled:C,type:"submit",variant:"ghost",children:(0,t.jsx)(i.Check,{className:"size-4"})})}),(0,t.jsx)(s.Button,{"aria-label":"Cancel",className:"size-7",onClick:T,onTouchStart:T,type:"button",variant:"ghost",children:(0,t.jsx)(a.Cross,{className:"size-4"})})]}):(0,t.jsx)(s.Button,{"aria-label":"Edit Project Name",className:(0,r.cn)("absolute -right-9 mb-0.5 inline-flex size-7",!S&&"pointer-events-none"),onClick:D,type:"button",variant:"ghost",inert:!S,style:{...(0,f.transitionStyles)(["opacity","transform"]),opacity:+!!S,transform:"translateX(".concat(S?0:-28,"px)")},children:(0,t.jsx)(o.Pencil,{className:"size-3.5"})});return(0,t.jsx)("form",{"data-is-editing":w,className:(0,r.cn)("peer",S&&"pr-9"),onSubmit:async e=>{e.preventDefault();let t=new FormData(e.currentTarget);await A(t)},onBlur:e=>{!e.currentTarget.contains(e.relatedTarget)&&w&&e.currentTarget.requestSubmit()},onMouseEnter:()=>{g&&N(!0)},onMouseLeave:()=>N(!1),children:(0,t.jsxs)("div",{className:"relative flex items-center gap-2",children:[L,P]})})}},27e3,e=>{"use strict";e.s(["ProjectNameInput",()=>I,"default",()=>L],27e3);var t=e.i(832520),n=e.i(200407),r=t,i=e.i(176248),a=e.i(491341),o=e.i(579792),s=e.i(66990),l=e.i(265266),c=e.i(118376),u=e.i(230766),d=e.i(912821);function p(e){var t;let{project:n,canMakeProjectUpdates:i,projectAuthorData:a}=e;return n&&a?(0,r.jsx)("header",{className:"w-full px-4 pb-2 pt-9",children:(0,r.jsx)("div",{className:"mx-auto w-full max-w-(--breakpoint-md)",children:(0,r.jsxs)("div",{className:"flex flex-col items-start gap-3",children:[(0,r.jsx)(l.ProjectIconPicker,{color:n.color,readOnly:!i,icon:(0,c.cleanIconName)(n.icon),projectId:n.projectId}),(0,r.jsxs)("div",{className:"flex flex-col items-start gap-1",children:[(0,r.jsx)(d.ProjectPageTitle,{canEditProjectName:i,initialTitle:n.name,projectId:n.projectId}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(u.AvatarUser,{size:"xs",userId:a.id}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-500",children:null!=(t=a.username)?t:"Vercel User"})]})]})]})})}):(0,r.jsx)(h,{})}function h(){return(0,r.jsx)("header",{className:"bg-background grid auto-rows-min gap-4 border-b p-4 sm:p-6",children:(0,r.jsxs)("div",{className:"mx-auto w-full",children:[(0,r.jsxs)("div",{className:"flex h-8 items-center gap-2 sm:h-auto",children:[(0,r.jsx)(s.Separator,{className:"bg-alpha-400 mr-2 h-6 sm:hidden",orientation:"vertical"}),(0,r.jsx)(i.Button,{asChild:!0,className:"font-normal text-gray-500",size:"sm",variant:"link",children:(0,r.jsxs)(a.default,{href:"/chat/projects",prefetch:!0,children:[(0,r.jsx)(o.ArrowLeft,{className:"size-4"}),(0,r.jsx)("span",{children:"All Projects"})]})})]}),(0,r.jsxs)("div",{className:"flex flex-col items-start justify-center gap-3 pt-4",children:[(0,r.jsx)("h1",{className:"text-xl font-semibold",children:"New Project"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"You can attach resources and files to a project after it's been created."})]})]})})}var f=e.i(763480),m=e.i(216445),g=e.i(707974),v=e.i(480118),x=e.i(304649);e.i(541536);var y=e.i(23474);let b=y.z.object({name:y.z.string().min(2,"Name must be at least 2 characters").max(32,"Name cannot be longer than 32 characters"),description:y.z.string().max(5e3,"Description cannot be longer than 5000 characters").optional(),instructions:y.z.string().max(5e3,"Context cannot be longer than 5000 characters").optional()});var w=e.i(589910),j=e.i(173899);e.i(563948);var C=e.i(407562),k=e.i(211976),S=l,N=e.i(51940),E=e.i(667660),M=e.i(538553);let I=e=>{let{name:n,onChange:r,errors:i,placeholder:a="New sidebar",disabled:o=!1}=e;return(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsxs)(g.Label,{className:(0,x.cn)((null==i?void 0:i.name)&&"text-red-500"),htmlFor:"name",children:["Name",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(f.Input,{autoComplete:"off",className:(0,x.cn)((null==i?void 0:i.name)&&"border-red-500"),disabled:o,id:"name",maxLength:32,minLength:2,name:"name",onChange:r,placeholder:a,required:!0,value:n}),(null==i?void 0:i.name)&&(0,t.jsx)("p",{className:"text-xs text-red-500",children:i.name[0]})]})},D=e=>{let{description:n,onChange:r,errors:i,disabled:a}=e;return(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(g.Label,{className:(0,x.cn)((null==i?void 0:i.description)&&"text-red-500"),htmlFor:"description",children:"Description (optional)"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(m.Textarea,{asChild:!0,children:(0,t.jsx)(N.ResizableTextArea,{autoComplete:"off",className:(0,x.cn)("pb-8",(null==i?void 0:i.description)&&"border-red-500"),id:"description",maxLength:5e3,name:"description",onChange:r,placeholder:"Describe what this project is going to be used for...",value:n,minHeight:120,maxHeight:384,disabled:a})}),(0,t.jsx)(w.InputCounter,{className:"absolute inset-x-1 bottom-2.5",count:n.length,max:5e3,message:"Description cannot be longer than 500 characters",messageThreshold:5e3})]}),(null==i?void 0:i.description)&&(0,t.jsx)("p",{className:"text-xs text-red-500",children:i.description[0]})]})},T=e=>{let{instructions:n,onChange:r,errors:i,disabled:a}=e;return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)(g.Label,{className:(0,x.cn)((null==i?void 0:i.instructions)&&"text-red-500"),htmlFor:"instructions",children:"Context (optional)"})}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(m.Textarea,{asChild:!0,children:(0,t.jsx)(N.ResizableTextArea,{autoComplete:"off",className:(0,x.cn)("pb-4",(null==i?void 0:i.instructions)&&"border-red-500"),id:"instructions",maxLength:5e3,name:"instructions",onChange:r,placeholder:"We're building a new sidebar for...",value:n,minHeight:120,maxHeight:384,disabled:a})}),(0,t.jsx)(w.InputCounter,{className:"absolute inset-x-1 bottom-2.5",count:n.length,max:5e3,message:"For larger context, consider using sources on the project page.",messageThreshold:5e3})]}),(null==i?void 0:i.instructions)&&(0,t.jsx)("p",{className:"text-xs text-red-500",children:i.instructions[0]})]}),(0,t.jsx)(g.Label,{className:"text-gray-500",children:"Guidelines or instructions the model will use to generate better responses to prompts."})]})},A=e=>{let{formData:n,disabled:r}=e,i=n.name.trim().length>0;return(0,t.jsx)(k.FormSpinnerButton,{className:"self-start",disabled:!i||r,size:"sm",type:"submit","data-testid":"create-project-button",children:"Create Project"})};function L(e){let{randomIcon:r}=e,{hasVercelWritePermission:i}=(0,E.useActiveScope)(),[a,o]=(0,n.useState)({}),[s,l]=(0,n.useState)({name:"",description:"",instructions:"",icon:r}),[c,u]=(0,n.useTransition)(),d=(0,v.useRouter)(),h=(0,n.useCallback)(e=>{let{name:t,value:n}=e.target;l(e=>({...e,[t]:n}))},[]),f=(0,n.useCallback)(e=>{if(e.preventDefault(),!i)return;o({});let{name:t,description:n,instructions:r,icon:a}=s,l=b.safeParse({name:t,description:n,instructions:r,icon:a});if(!l.success)return void o(l.error.flatten().fieldErrors);u(async()=>{try{let{id:e,errors:i,success:s}=await (0,j.newProjectAction)({name:t,description:n,instructions:r,icon:a});if(i)return void o(i);if(s&&e){C.toast.success("Project created successfully"),d.push("/chat/projects/".concat(e));return}o({name:["Failed to create project. Please try again."]})}catch(e){console.error("Failed to create project:",e),C.toast.error("An unexpected error occurred. Please try again."),o({name:["An unexpected error occurred. Please try again."]})}})},[s,d,i]);return(0,t.jsxs)("div",{className:"bg-background flex min-h-screen flex-col",children:[(0,t.jsx)(p,{canMakeProjectUpdates:!0}),(0,t.jsx)("main",{className:"bg-background flex flex-1 flex-col overflow-auto p-4 sm:p-6",children:(0,t.jsx)("div",{className:"grid flex-1 auto-rows-min gap-4 lg:grid-cols-[600px_1fr] lg:gap-x-6 xl:gap-x-9",children:(0,t.jsxs)("form",{className:"flex flex-col gap-6",onSubmit:f,children:[(0,t.jsx)(M.RbacTooltip,{show:!i,requiredRole:"V0Builder",children:(0,t.jsx)(S.ProjectIconPicker,{onSelect:e=>l(t=>({...t,icon:e})),isNewPage:!0,color:null,readOnly:!i,icon:r,projectId:""})}),(0,t.jsx)(M.RbacTooltip,{show:!i,requiredRole:"V0Builder",children:(0,t.jsx)(I,{errors:a,name:s.name,onChange:h,disabled:!i})}),(0,t.jsx)(M.RbacTooltip,{show:!i,requiredRole:"V0Builder",children:(0,t.jsx)(D,{description:s.description,errors:a,onChange:h,disabled:!i})}),(0,t.jsx)(M.RbacTooltip,{show:!i,requiredRole:"V0Builder",children:(0,t.jsx)(T,{errors:a,instructions:s.instructions,onChange:h,disabled:!i})}),(0,t.jsx)(M.RbacTooltip,{show:!i,requiredRole:"V0Builder",children:(0,t.jsx)(A,{formData:s,isPending:c,disabled:!i})})]})})})]})}},626119,e=>{"use strict";e.s(["QuickProjectCreateModal",()=>g,"useQuickProjectCreateDialog",()=>m]);var t=e.i(832520),n=e.i(176248),r=e.i(200407),i=e.i(914483),a=e.i(297239),o=e.i(46601),s=e.i(27e3),l=e.i(686832),c=e.i(921),u=e.i(92479),d=e.i(770685),p=e.i(480118),h=e.i(667660),f=e.i(538553);function m(){let[e,t]=(0,i.useGetSet)("showQuickProjectCreateDialog",!1);return{showQuickProjectCreateDialog:e,setShowQuickProjectCreateDialog:t}}function g(){let{hasVercelWritePermission:e}=(0,h.useActiveScope)(),{chatId:i}=(0,u.useChatId)(),g=(0,p.useRouter)(),[v,x]=(0,r.useState)({}),[y,b]=(0,r.useState)(""),{showQuickProjectCreateDialog:w,setShowQuickProjectCreateDialog:j}=m(),[C,k]=(0,r.useState)(!1),S=(0,a.useT)(),N=(0,r.useCallback)(e=>{i?(0,d.assignProjectToChat)({payload:{chatId:i,projectId:e}}):g.push("/chat/projects/".concat(e))},[i,g]),E=(0,r.useCallback)(async t=>{if(t.preventDefault(),e){x({}),k(!0);try{let e=await (0,c.createProject)({projectName:y,chatId:i,onSuccess:e=>{N(e),j(!1),b("")}});e.errors&&x(e.errors)}catch(e){console.error("Failed to create project:",e),x({name:["An unexpected error occurred. Please try again."]})}finally{k(!1)}}},[y,i,N,j,e]);return(0,t.jsxs)(l.Modal,{onOpenChange:j,open:w,responsive:!1,children:[(0,t.jsx)(l.ModalHeader,{children:(0,t.jsx)(l.ModalTitle,{children:S("quickProjectCreateDialog.title")})}),(0,t.jsx)(l.ModalContent,{children:(0,t.jsx)("form",{className:"flex flex-col gap-6",onSubmit:E,children:(0,t.jsx)(f.RbacTooltip,{show:!e,requiredRole:"V0Builder",children:(0,t.jsx)(s.ProjectNameInput,{name:y,onChange:e=>b(e.target.value),errors:v,placeholder:S("quickProjectCreateDialog.inputPlaceholder"),disabled:C||!e})})})}),(0,t.jsxs)(l.ModalFooter,{children:[(0,t.jsx)(l.ModalClose,{asChild:!0,children:(0,t.jsx)(n.Button,{size:"sm",variant:"secondary",children:S("quickProjectCreateDialog.cancel")})}),(0,t.jsx)(f.RbacTooltip,{show:!e,requiredRole:"V0Builder",children:(0,t.jsx)(n.Button,{"data-testid":"confirm-delete-message",disabled:C||!e,onClick:E,size:"sm",children:C?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.IconSpinner,{className:"size-4"}),S("quickProjectCreateDialog.creating")]}):S("quickProjectCreateDialog.create")})})]})]})}},529660,e=>{"use strict";e.s(["NewProjectButton",()=>y]);var t=e.i(832520),n=e.i(176248),r=e.i(304649),i=e.i(491341),a=e.i(353699),o=e.i(138471),s=e.i(297239),l=e.i(206037),c=e.i(762585),u=e.i(667660),d=e.i(626119),p=e.i(696871),h=e.i(921),f=e.i(200407),m=e.i(211976);e.i(563948);var g=e.i(407562);e.i(904347);var v=e.i(37737),x=e.i(538553);function y(e){let{variant:y,onAfterClick:b,className:w,numProjects:j,quickCreate:C=!1,projectName:k,onSuccess:S,assignToChatId:N,withIcon:E,...M}=e,I=(0,s.useT)(),{activeScope:D,hasVercelWritePermission:T}=(0,u.useActiveScope)(),{planSlug:A}=(0,l.usePlanInfo)(!0,null==D?void 0:D.id),[L,P]=(0,f.useState)(!1),R=A&&("v0-level0"!==A||j<p.MAX_PROJECTS_FOR_FREE_USERS),{setShowQuickProjectCreateDialog:_}=(0,d.useQuickProjectCreateDialog)(),O=(0,f.useCallback)(async()=>{if(k&&T){P(!0);try{let{errors:t}=await (0,h.createProject)({projectName:k,onSuccess:S,chatId:N});if(t){var e;g.toast.error(null!=(e=t.name[0])?e:"Failed to create project.")}}finally{P(!1)}}},[k,S,N,T]);return R||void 0!==A?R?C&&k?(0,t.jsx)(x.RbacTooltip,{show:!T,requiredRole:"V0Builder",children:(0,t.jsxs)(m.SpinnerButton,{className:(0,r.cn)(w),pending:L,onClick:O,size:"sm",variant:y,disabled:!T||M.disabled,...M,children:[E&&(0,t.jsx)(o.Plus,{}),I("project.createDialog.newProjectButton")]})}):C?(0,t.jsx)(x.RbacTooltip,{show:!T,requiredRole:"V0Builder",children:(0,t.jsxs)(n.Button,{className:(0,r.cn)(w),onClick:()=>{_(!0)},size:"sm",variant:y,disabled:!T||M.disabled,...M,children:[E&&(0,t.jsx)(o.Plus,{}),I("project.createDialog.newProjectButton")]})}):(0,t.jsx)(x.RbacTooltip,{show:!T,requiredRole:"V0Builder",children:(0,t.jsx)(n.Button,{className:(0,r.cn)(w),size:"sm",variant:y,disabled:!T||M.disabled,...M,asChild:!0,children:(0,t.jsxs)(i.default,{className:(0,r.cn)(w),href:"/chat/projects/new",onClick:b,children:[E&&(0,t.jsx)(o.Plus,{}),I("project.createDialog.newProjectButton")]})})}):(0,t.jsxs)(n.Button,{className:(0,r.cn)(w),"data-testid":"new-project-upgrade-button",onClick:()=>{(0,v.openDialog)({type:"upgradePlan"}),null==b||b()},size:"sm",type:"button",children:[(0,t.jsx)(a.Lightning,{}),I("project.createDialog.upgradePlan")]}):(0,t.jsx)(c.Skeleton,{className:(0,r.cn)("h-8 w-24",w)})}},60425,914897,e=>{"use strict";e.s(["ProjectsDropdown",()=>S],60425);var t=e.i(832520),n=e.i(200407),r=e.i(556355),i=e.i(919639),a=e.i(176248),o=e.i(529660),s=e.i(608142),l=e.i(362530),c=e.i(422294),u=e.i(276507),d=e.i(304649),p=e.i(686832),h=e.i(183673),f=e.i(53223),m=e.i(297239),g=e.i(802094),v=e.i(70165),x=e.i(118376),y=e.i(783069),b=e.i(584497),w=e.i(449381),j=e.i(479273),C=e.i(120282);function k(e){var n;let{onClose:r,quickCreate:i=!1}=e,a=(0,m.useT)(),{title:s}=(0,b.useChatMetadata)(),l=(0,w.useActiveBlockState)();return(0,t.jsx)("div",{className:"flex h-full items-center justify-center p-1 sm:p-2",children:(0,t.jsx)(u.Empty,{className:"bg-muted w-full rounded-md border border-gray-200 p-2",children:(0,t.jsxs)(u.EmptyContent,{className:"flex flex-col items-center space-y-4 p-4",children:[(0,t.jsxs)("span",{className:"flex flex-col items-center justify-between space-y-4",children:[(0,t.jsx)(u.EmptyIcon,{className:"bg-background mx-auto text-gray-400",children:(0,t.jsx)(c.FolderClosed,{})}),(0,t.jsxs)("span",{className:"flex flex-col items-center space-y-2",children:[(0,t.jsx)(u.EmptyTitle,{children:a("project.dropdown.noProjects")}),(0,t.jsx)(u.EmptyDescription,{className:"text-balance text-center text-gray-400",children:a("project.dropdown.createProject")})]})]}),(0,t.jsx)(o.NewProjectButton,{onAfterClick:r,numProjects:0,quickCreate:i,projectName:null!=(n=null==l?void 0:l.meta.title)?n:s})]})})})}function S(e){let{projectName:c,chatId:u,disabled:b,onLoggedOutClick:w,modalClassName:S,triggerButton:N,handleProjectSelect:E,variant:M="default",className:I,quickCreate:D=!1,onSuccess:T,align:A="start"}=e,{projects:L,selectedProjectId:P,setSelectedProjectId:R}=(0,h.useProjectsForUser)(),[_,O]=(0,n.useState)(!1),[F,V]=(0,n.useState)(!1),B=(0,v.useIsMobile)(),z=(0,m.useT)(),{locale:H}=(0,j.useLocale)(),U=()=>{O(!1),V(!1)},q=e=>{R((null==e?void 0:e.projectId)||null),U(),(0,f.track)("SelectProject",{projectId:(null==e?void 0:e.projectId)||null}),null==E||E(e?{projectId:e.projectId,name:e.name,settings:{icon:e.icon||void 0,color:e.color||void 0},vercelProjectId:e.vercelProjectId,creatorId:e.creatorId}:null)},W=P&&L.find(e=>e.projectId===P),Z=N||(0,t.jsx)(a.Button,{"aria-label":"Select project",className:(0,d.cn)("flex h-7 max-w-[124px] justify-start gap-0.5 rounded-md border-none bg-gray-100 pr-1.5 text-[12px] transition-colors hover:bg-gray-200 hover:text-gray-900 has-[>svg]:pr-1.5 sm:text-[13px]",{"text-gray-500":!W},H===C.esLocaleInfo.iso639?"sm:max-w-[220px]":"sm:max-w-[200px]"),disabled:b,size:"sm",variant:"secondary",children:W?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g.IconPickerIcon,{name:(0,x.cleanIconName)(W.icon)}),(0,t.jsx)("span",{className:"ml-1 truncate",children:W.name}),(0,t.jsx)(s.ChevronDownSmall,{})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"sm:hidden",children:z("project.noProjectSelectedMobile")}),(0,t.jsx)("span",{className:"hidden sm:inline",children:z("project.noProjectSelected")}),(0,t.jsx)(s.ChevronDownSmall,{})]})}),G=(0,n.useMemo)(()=>(0,y.toSorted)(L,(e,t)=>e.projectId===P?-1:+(t.projectId===P)).map(e=>(0,t.jsxs)("button",{className:"flex w-full items-center justify-between rounded-md px-2 py-2.5 hover:bg-gray-100",onClick:()=>q(P===e.projectId?null:e),children:[(0,t.jsxs)("span",{className:"flex min-w-0 flex-1 items-center",children:[(0,t.jsx)("div",{className:"[&>svg]:size-4",children:(0,t.jsx)(g.IconPickerIcon,{name:(0,x.cleanIconName)(e.icon)})}),(0,t.jsx)("span",{className:"ml-2 max-w-[200px] truncate",children:e.name})]}),P===e.projectId?(0,t.jsxs)("span",{className:"flex shrink-0 items-center text-gray-500",children:[(0,t.jsx)(i.Check,{className:"h-4 w-4 group-hover:hidden"}),(0,t.jsx)("span",{className:"hidden group-hover:inline",children:z("project.dropdown.unselect")})]}):(0,t.jsx)("span",{className:"hidden shrink-0 text-gray-500 group-hover:inline",children:z("project.dropdown.select")})]},e.projectId)),[L,P]),K=(0,t.jsxs)("div",{className:"p-1",children:[(0,t.jsx)("div",{className:"max-h-[400px] space-y-2 overflow-y-auto text-left",children:G}),(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)(o.NewProjectButton,{assignToChatId:u,className:"w-full",onAfterClick:U,size:"sm",variant:"secondary",numProjects:L.length,quickCreate:D,projectName:c,onSuccess:e=>{null==T||T(e),U()}})})]}),X=0===L.length?(0,t.jsx)(k,{onClose:U,quickCreate:D}):K,$=(0,t.jsx)(r.DropdownMenuContent,{align:A,className:"w-[350px]",side:"bottom",sideOffset:4,children:0===L.length?(0,t.jsx)(k,{onClose:U,quickCreate:D}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.DropdownMenuGroup,{className:"max-h-[225px] overflow-y-auto",children:(0,y.toSorted)(L,(e,t)=>(e.projectId===P?-1:0)-(t.projectId===P?-1:0)).map(e=>(0,t.jsxs)(r.DropdownMenuItem,{className:"group pl-2 pr-3",onClick:()=>q(P===e.projectId?null:e),children:[(0,t.jsxs)("span",{className:"flex w-full max-w-[200px] items-center",children:[(0,t.jsx)(g.IconPickerIcon,{name:(0,x.cleanIconName)(e.icon)}),(0,t.jsx)("span",{className:"ml-3 min-w-0 flex-1",children:(0,t.jsx)("span",{className:"block truncate","data-testid":"project-option",children:e.name})})]}),P===e.projectId?(0,t.jsxs)("span",{className:"ml-auto flex shrink-0 items-center text-gray-500",children:[(0,t.jsx)(i.Check,{className:"h-4 w-4 group-hover:hidden"}),(0,t.jsx)("span",{className:"hidden group-hover:inline",children:z("project.dropdown.unselect")})]}):(0,t.jsx)("span",{className:"ml-auto hidden shrink-0 text-gray-500 group-hover:inline",children:z("project.dropdown.select")})]},e.projectId))}),(0,t.jsx)(r.DropdownMenuSeparator,{}),(0,t.jsx)(r.DropdownMenuGroup,{className:"bg-muted",children:(0,t.jsx)(o.NewProjectButton,{onAfterClick:U,size:"sm",variant:"secondary",className:"w-full",numProjects:L.length,quickCreate:D,projectName:c,onSuccess:e=>{null==T||T(e),U()}})})]})}),Y=(0,t.jsxs)(a.Button,{variant:"ghost",size:"sm",className:"relative h-7 w-4 rounded-md text-gray-500",children:[(0,t.jsx)(l.ChevronUpDown,{}),(0,t.jsx)("div",{className:"absolute -inset-x-2 inset-y-0"})]});return w?(0,t.jsx)("div",{onClick:w,children:Z}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:(0,d.cn)("flex w-full min-w-0 items-center gap-1 md:hidden",I),children:["split"===M?Z:null,(0,t.jsx)(p.Modal,{onOpenChange:O,open:_&&B,trigger:"split"===M?Y:Z,className:S,children:(0,t.jsx)(p.ModalContent,{className:(0,d.cn)("max-h-[80vh]",{"overflow-y-auto":L.length>0}),children:X})})]}),(0,t.jsx)("div",{className:(0,d.cn)("hidden w-full min-w-0 md:block",I),children:(0,t.jsxs)(r.DropdownMenu,{onOpenChange:V,open:F&&!B,children:["default"===M?(0,t.jsx)(r.DropdownMenuTrigger,{asChild:!0,className:"max-w-[200px]",children:Z}):null,"split"===M?(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[Z,(0,t.jsx)(r.DropdownMenuTrigger,{asChild:!0,children:Y})]}):null,$]})})]})}e.s(["useReassignProject",()=>L],914897);var N=b,E=e.i(92479),M=n;e.i(563948);var I=e.i(407562),D=e.i(667660),T=e.i(120485),A=e.i(770685);function L(){let{project:e,setMetadata:t}=(0,N.useChatMetadata)(),{chatId:n}=(0,E.useChatId)(),{activeScope:r}=(0,D.useActiveScope)(),[i,a]=(0,M.useTransition)();return{reassignPending:i,handleReassignProject:(0,M.useCallback)(i=>{var o,s;if(!n||!r)return;let l=e?{...e}:void 0;t({project:i?{projectId:i.projectId,name:i.name,settings:{color:(null==(o=i.settings)?void 0:o.color)||null,icon:(null==(s=i.settings)?void 0:s.icon)||null},vercelProjectId:i.vercelProjectId,isCreator:i.creatorId===r.id}:void 0}),a(async()=>{try{let e=await (0,A.assignProjectToChat)({payload:{chatId:n,projectId:(null==i?void 0:i.projectId)||null}});if(null==e?void 0:e.error)throw Error(e.error)}catch(e){(0,T.handleChatError)(e)||I.toast.error("Something went wrong. Please try again."),t({project:l})}})},[n,t,e,r])}}},687639,e=>{"use strict";e.s(["ReassignProject",()=>h]);var t=e.i(832520),n=e.i(200407),r=e.i(686832),i=e.i(120945),a=e.i(176248),o=e.i(607391),s=e.i(37737),l=e.i(60425),c=e.i(914897),u=e.i(802094),d=e.i(118376),p=e.i(115184);function h(e){var h;let{chatId:f}=e,{reassignPending:m,handleReassignProject:g}=(0,c.useReassignProject)(),[v,x]=(0,n.useState)(null),y=()=>{g(v),(0,s.closeDialog)()},b=(0,t.jsxs)(a.Button,{variant:"secondary",className:"w-full max-w-full justify-between font-normal",children:[v?(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(null==(h=v.settings)?void 0:h.icon)?(0,t.jsx)(u.IconPickerIcon,{name:(0,d.cleanIconName)(v.settings.icon)}):null,v.name]}):(0,t.jsx)("span",{children:"Select a project..."}),(0,t.jsx)(p.ChevronDown,{})]});return(0,t.jsxs)(i.AtomicDialog,{type:"reassignProject",children:[(0,t.jsxs)(r.ModalHeader,{children:[(0,t.jsx)(r.ModalTitle,{children:"Reassign Project"}),(0,t.jsx)(r.ModalDescription,{className:"text-sm text-gray-800",children:"Select a project to assign to this chat, or choose none to unassign the current project"})]}),(0,t.jsx)(r.ModalContent,{className:"flex flex-col gap-4",children:(0,t.jsx)(l.ProjectsDropdown,{handleProjectSelect:x,disabled:m,quickCreate:!0,align:"start",className:"w-full",chatId:f,triggerButton:b})}),(0,t.jsxs)(r.ModalFooter,{className:"bg-muted border-alpha-400 border-t",children:[(0,t.jsx)(r.ModalClose,{asChild:!0,children:(0,t.jsx)(a.Button,{size:"sm",variant:"secondary",children:"Cancel"})}),(0,t.jsx)(a.Button,{size:"sm",disabled:m,onClick:y,children:(0,t.jsx)(o.ActionStatus,{isLoading:m,loading:"Reassigning...",children:"Confirm"})})]})]})}},175807,571917,292750,752846,e=>{"use strict";e.s(["AttachmentPreviewDialog",()=>b],175807);var t=e.i(832520),n=e.i(120945),r=e.i(37737),i=e.i(770858),a=e.i(304649),o=e.i(299313),s=e.i(200407),l=e.i(355805),c=e.i(847801),u=e.i(87467),d=e.i(577745),p=e.i(926788),h=e.i(762585),f=e.i(325318),m=e.i(596359),g=e.i(183558);let v=(0,c.default)(()=>e.A(688269).then(e=>e.Table),{loadableGenerated:{modules:[20068]}});function x(e){var t,n;return(null==(t=e.contentType)?void 0:t.startsWith("video/"))&&!(null==(n=e.name)?void 0:n.endsWith(".ts"))}function y(e){var t;return null==(t=e.contentType)?void 0:t.startsWith("audio/")}function b(e){var i;let{attachment:o,content:l,onRename:c}=e,u=null==(i=o.contentType)?void 0:i.startsWith("image/"),d=x(o),h=y(o),v=S(o),b=(0,s.useRef)(null),[N,E]=(0,s.useState)(!1),[M,I]=(0,s.useState)(o.name||""),[D,T]=(0,s.useState)(o.name||""),A=(0,s.useRef)(null);(0,s.useEffect)(()=>{let e=o.name||"";I(e),T(e)},[o.name]);let L=(0,s.useCallback)(()=>{D.trim()&&D!==M&&(null==c||c(D.trim()),I(D.trim())),E(!1)},[D,M,c]),P=(0,s.useCallback)(()=>{T(M),E(!1)},[M]),R=(0,s.useCallback)(e=>{"Enter"===e.key?L():"Escape"===e.key&&P()},[L,P]);return(0,t.jsxs)(n.AtomicDialog,{type:"attachmentPreview",className:(0,a.cn)("w-full max-w-[90vw] max-h-[90vh] auto-rows-min gap-2 rounded-xl p-0 [&>button:last-child]:invisible",h&&"bg-transparent"),style:{width:"unset"},onOpenAutoFocus:e=>{if(e.preventDefault(),!N){var t;null==(t=b.current)||t.focus()}},children:[(0,t.jsx)(p.DialogTitle,{className:"sr-only","aria-label":M,children:M}),(0,t.jsx)("div",{className:"flex items-center gap-2 px-4 py-2 border-b border-gray-200",children:(0,t.jsx)("div",{className:"flex items-center gap-2",children:N?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("input",{ref:A,type:"text",value:D,onChange:e=>T(e.target.value),onKeyDown:R,className:"px-2 text-sm font-medium bg-transparent border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",style:{width:"".concat(8*Math.max(D.length,1)+20,"px"),minWidth:"60px",maxWidth:"400px"},autoFocus:!0}),(0,t.jsx)("button",{onClick:L,className:"p-1 text-green-600 hover:text-green-700 rounded transition-colors","aria-label":"Save filename",type:"button",children:(0,t.jsx)(m.Check,{size:14})}),(0,t.jsx)("button",{onClick:P,className:"p-1 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded transition-colors","aria-label":"Cancel edit",type:"button",children:(0,t.jsx)(g.CrossSmall,{size:14})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:M}),c&&(0,t.jsx)("button",{onClick:()=>{E(!0),setTimeout(()=>{var e;return null==(e=A.current)?void 0:e.select()},0)},className:"p-1 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded transition-colors","aria-label":"Edit filename",type:"button",children:(0,t.jsx)(f.Pencil,{size:14})})]})})}),(0,t.jsx)(s.Suspense,{children:u?(0,t.jsx)(j,{attachment:o}):d?(0,t.jsx)(C,{attachment:o}):h?(0,t.jsx)(k,{attachment:o}):l&&v&&(0,t.jsx)(w,{attachment:o,content:l,onClose:()=>(0,r.closeDialog)(),showTitle:!1})})]})}function w(e){let{attachment:n,onClose:r,content:a,showTitle:o=!0}=e,s="relative max-h-[90vh] max-w-[90vw] min-w-[80vw] overflow-y-auto";switch(n.contentType){case"application/x-zip-compressed":case"application/zip":return(0,t.jsxs)("div",{className:s,children:[o&&(0,t.jsx)("div",{className:"flex items-center justify-between p-4 pb-0 text-sm font-medium text-gray-600",children:(0,t.jsx)("span",{children:n.name})}),(0,t.jsx)("div",{className:"flex gap-2 p-4 text-gray-500",children:"v0 does not support previewing ZIP files at this time."})]});case"text/csv":return(0,t.jsxs)("div",{className:s,children:[o&&(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 pb-0 text-sm font-medium text-gray-600",children:[(0,t.jsx)("span",{children:n.name}),(0,t.jsx)("div",{className:"flex gap-2",children:(0,t.jsx)(u.CodeBlockActions,{allowClose:!0,allowCopyCode:!0,allowDownloadCode:!0,caller:"inline",closeHandler:r,fileName:n.name,value:a,isTabbed:!1,closed:!1,originalCode:void 0,blockId:"attachment-preview-".concat(n.name)})})]}),(0,t.jsx)("div",{className:"p-4",children:(0,t.jsx)(v,{source:a})})]});default:var c,d;let p=(0,l.cleanLangNoCustom)((null==(c=n.name)?void 0:c.split(".").pop())||(null==(d=n.contentType)?void 0:d.split("/")[1])||"plaintext");return(0,t.jsx)("div",{className:s,children:(0,t.jsx)(i.CodeBlock,{allowClose:!0,caller:"inline",className:"rounded-xl border-none [&>div:last-child]:pt-0! [&_code]:whitespace-pre!",closeHandler:r,showQuickEditAnimation:!1,fileName:n.name,headerClassName:"h-14 border-none px-4 bg-background/70",language:p,showLineNumbers:!0,value:a,wrapLongLines:!0,originalCode:void 0,blockId:"attachment-preview-".concat(n.name),closed:!0})})}}function j(e){var n;let{attachment:r}=e,[i,l]=(0,s.useState)(null),[c,u]=(0,s.useState)(!0),d=(0,s.useCallback)(e=>{let t=e.currentTarget;console.log(t),l({width:t.naturalWidth,height:t.naturalHeight}),u(!1)},[]),p=(0,s.useCallback)(()=>{u(!1)},[]);return(0,t.jsxs)("div",{className:"flex items-center justify-center w-full h-full max-w-[90vw] max-h-[90vh]",children:[c&&(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,t.jsx)(h.Skeleton,{className:"w-64 h-64 rounded-lg"})}),(0,t.jsx)(o.default,{alt:null!=(n=r.name)?n:"Image Preview",className:(0,a.cn)("bg-alpha-950 rounded-lg object-contain transition-opacity duration-200",c?"opacity-0":"opacity-100"),src:r.url,width:(null==i?void 0:i.width)||800,height:(null==i?void 0:i.height)||600,style:{maxWidth:"90vw",maxHeight:"90vh"},onLoad:d,onError:p,unoptimized:!0})]})}function C(e){let{attachment:n}=e;return(0,t.jsx)("div",{className:"flex items-center justify-center w-full h-full max-w-[90vw] max-h-[90vh]",children:(0,t.jsxs)("video",{className:"bg-alpha-950 rounded-lg object-contain",controls:!0,style:{maxWidth:"90vw",maxHeight:"90vh",width:"auto",height:"auto"},children:[(0,t.jsx)("source",{src:n.url,type:n.contentType}),"Your browser does not support the video tag."]})})}function k(e){let{attachment:n}=e;return(0,t.jsx)("div",{className:"flex items-center justify-center w-full h-full p-8",children:(0,t.jsxs)("div",{className:"w-full max-w-md",children:[(0,t.jsx)("div",{className:"mb-4 text-center",children:(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:n.name||"Audio File"})}),(0,t.jsxs)("audio",{className:"w-full rounded-lg",controls:!0,children:[(0,t.jsx)("source",{src:n.url,type:n.contentType}),"Your browser does not support the audio tag."]})]})})}let S=e=>{var t,n;let r=new Set(["pdf","doc","docx","xls","xlsx"]),i=(null==(t=e.contentType)?void 0:t.split("/")[1])||"none",a=(null==(n=e.name)?void 0:n.split(".").pop())||"none";return d.TEXT_EXTENSIONS.includes(a)&&(i="plain"),!r.has(i)};e.s(["NewFeatureButton",()=>O,"NewFeatureDialog",()=>_,"NewFeatureDialogOpener",()=>V],292750);var N=t,E=s,M=e.i(176248),I=e.i(686832),D=n;e.i(904347);var T=r,A=e.i(547259),L=(0,A.createServerReference)("60a85292fcd67d9f65570408cc2f9c6b4e6cb3b828",A.callServer,void 0,A.findSourceMapURL,"setFeatureDialogDismissed");e.s(["setFeatureDialogDismissed",()=>L],571917);var P=e.i(491341),R=e.i(794593);function _(e){let{featureId:t,config:n}=e,{handleSetDismissedTrue:r}=F(t);return(0,N.jsxs)(D.AtomicDialog,{type:"newFeatureDialog",onOpenChange:e=>{e||r()},children:[(0,N.jsx)("div",{className:"flex border-b border-alpha-400 min-h-[280px]",children:n.visual}),(0,N.jsxs)("div",{className:"overflow-auto",children:[(0,N.jsxs)(I.ModalHeader,{className:"pt-2 flex flex-col gap-3 items-start",children:[n.badge?(0,N.jsx)(R.Badge,{variant:"teal",size:"sm",className:"h-6 px-2",children:n.badge.text}):null,(0,N.jsx)(I.ModalTitle,{className:"!text-heading-24",children:n.title}),(0,N.jsx)(I.ModalDescription,{children:n.description})]}),(0,N.jsx)(I.ModalContent,{children:(0,N.jsxs)("div",{className:"flex gap-2 justify-start [&>*]:flex-1",children:[(0,N.jsx)("span",{children:n.secondaryAction?n.secondaryAction:(0,N.jsx)(M.Button,{variant:"secondary",size:"sm",onClick:T.closeDialog,children:"Got it"})}),(0,N.jsx)("span",{children:n.primaryAction?n.primaryAction:null})]})})]})]})}function O(e){let{variant:t="default",onClick:n,href:r,target:i,children:a,disabled:o=!1}=e,s=e=>{let{children:t}=e;return r?(0,N.jsx)(P.default,{href:r,target:i,children:t}):t};return(0,N.jsx)(s,{children:(0,N.jsx)(M.Button,{size:"sm",type:"button",className:"w-full",variant:t,disabled:o,onClick:()=>{o||(null==n||n(),(0,T.closeDialog)())},children:a})})}let F=e=>{let[t,n]=(0,E.useTransition)();return{handleSetDismissedTrue:(0,E.useCallback)(()=>{n(async()=>{await L(e,!0)})},[e])}};function V(e){let{featureId:t,config:n}=e,r=(0,E.useRef)(!1);return(0,E.useEffect)(()=>{r.current||((0,T.openDialog)({type:"newFeatureDialog",data:{featureId:t,config:n}}),r.current=!0)},[t,n]),null}var B=A,z=(0,B.createServerReference)("7f2a1cf6d63ac2227969d8114dd8d11037c5af1c30",B.callServer,void 0,B.findSourceMapURL,"createDesignSystemAction");e.s(["createDesignSystemAction",()=>z],752846)},904347,948973,398575,e=>{"use strict";e.s(["Dialogs",()=>ew],904347);var t=e.i(832520),n=e.i(37737),r=e.i(780292),i=e.i(200407),a=e.i(261825),o=e.i(228520),s=e.i(3156),l=e.i(867751),c=e.i(652461),u=e.i(368387),d=e.i(329046),p=e.i(5894),h=e.i(388769),f=e.i(886058),m=e.i(741888),g=e.i(688371),v=e.i(926923),x=e.i(632393),y=e.i(851658),b=e.i(511969),w=e.i(642969),j=e.i(485614),C=e.i(480118),k=e.i(32170),S=e.i(323194),N=e.i(70772),E=e.i(199814),M=e.i(331193),I=e.i(443283),D=e.i(565135),T=e.i(687639),A=e.i(175807),L=e.i(292750),P=t,R=e.i(686832),_=e.i(763480),O=e.i(589910),F=e.i(176248),V=i,B=e.i(297239),z=e.i(120945),H=n,U=e.i(211976),q=e.i(752846),W=e.i(588385),Z=r,G=e.i(542245);e.i(563948);var K=e.i(407562);let X=100,$="design-systems-scoped-preview";function Y(e){let{initialName:t,onSuccess:n}=e,[r,i]=(0,V.useTransition)(),a=(0,B.useT)(),o=(0,G.getDesignSystemAtoms)(),s=(0,Z.useAtomValue)(o.shadcnStyle),l=(0,V.useRef)(null),[c,u]=(0,V.useState)(t||""),d=(0,V.useCallback)(e=>{e.preventDefault(),i(async()=>{try{let e=(0,W.generateRegistryFromStyles)(c,"https://v0.app",[{name:c,style:s}]),t={name:c,description:"Design system created from editor",registry:e};await (0,q.createDesignSystemAction)(t),null==n||n(),K.toast.success(a("saveDesignSystemDialog.successToast")),(0,H.closeDialog)()}catch(e){K.toast.error("Failed to create design system. Please try again.")}})},[c,s,n,a]);return(0,P.jsx)(z.AtomicDialog,{type:"createDesignSystem",children:(0,P.jsxs)("form",{onSubmit:d,children:[(0,P.jsx)(R.ModalHeader,{children:(0,P.jsx)(R.ModalTitle,{children:a("saveDesignSystemDialog.title")})}),(0,P.jsxs)(R.ModalContent,{children:[(0,P.jsx)("label",{className:"sr-only",htmlFor:"designSystemName",children:a("saveDesignSystemDialog.newName")}),(0,P.jsx)(_.Input,{"aria-label":a("saveDesignSystemDialog.newName"),autoComplete:"off",autoFocus:!0,className:"w-full",id:"designSystemName",maxLength:X,onChange:e=>u(e.target.value),placeholder:t||a("saveDesignSystemDialog.enterNewName"),ref:l,value:c}),(0,P.jsx)(O.InputCounter,{className:"mt-2",count:c.length,max:X,message:"Name must be less than ".concat(X," characters")})]}),(0,P.jsxs)(R.ModalFooter,{children:[(0,P.jsx)(F.Button,{onClick:H.closeDialog,size:"sm",type:"button",variant:"secondary",children:a("saveDesignSystemDialog.cancel")}),(0,P.jsx)(U.SpinnerButton,{pending:r,disabled:!c.trim(),size:"sm",type:"submit",children:r?a("saveDesignSystemDialog.saving"):a("saveDesignSystemDialog.save")})]})]})})}e.s(["DESIGN_SYSTEM_NAME_MAX_LENGTH",0,X,"PREVIEW_AREA_CLASSNAME",0,$],948973);var J=t,Q=R,ee=F,et=i,en=z,er=n,ei=U;function ea(e){let{designSystemName:t,onDelete:n}=e,[r,i]=(0,et.useTransition)(),a=(0,et.useCallback)(()=>{i(async()=>{await n()})},[n]);return(0,J.jsxs)(en.AtomicDialog,{type:"deleteDesignSystem",children:[(0,J.jsxs)(Q.ModalHeader,{children:[(0,J.jsx)(Q.ModalTitle,{children:"Delete Design System"}),(0,J.jsxs)(Q.ModalDescription,{children:['Are you sure you want to delete "',t,'"? This action cannot be undone.']})]}),(0,J.jsxs)(Q.ModalFooter,{children:[(0,J.jsx)(ee.Button,{onClick:er.closeDialog,size:"sm",type:"button",variant:"secondary",children:"Cancel"}),(0,J.jsx)(ei.SpinnerButton,{pending:r,size:"sm",variant:"destructive",onClick:a,children:r?"Deleting...":"Delete"})]})]})}var eo=t,es=R,el=_,ec=O,eu=F,ed=i,ep=z,eh=n,ef=U,em=e.i(70165),eg=K;e.i(472428);var ev=e.i(152641),ex=e.i(547259),ey=(0,ex.createServerReference)("7f11357d9cf716eab056155b3cd29bbbfdd4337626",ex.callServer,void 0,ex.findSourceMapURL,"updateDesignSystemAction");function eb(e){let{currentName:t,designSystemId:n}=e,{mutate:r,data:i}=(0,ev.useServerQuerySWR)(["scoped","designSystems"],{}),a=(0,em.useIsMobile)(),[o,s]=(0,ed.useTransition)(),l=(0,ed.useRef)(null),[c,u]=(0,ed.useState)(t),d=(0,ed.useCallback)(e=>{if(e.preventDefault(),!c.trim()||c===t)return void(0,eh.closeDialog)();s(async()=>{try{await r({serverMutate:ey({designSystemId:n,name:c}),optimisticData:{...i,data:i.data.map(e=>e.designSystemId===n?{...e,name:c}:e)}}),eg.toast.success("Design system renamed successfully")}catch(e){eg.toast.error("Failed to rename design system.")}(0,eh.closeDialog)()})},[c,t,r,n,i]);return(0,ed.useEffect)(()=>{setTimeout(()=>{var e,t;null==(e=l.current)||e.focus(),a||null==(t=l.current)||t.select()},0)},[a]),(0,eo.jsx)(ep.AtomicDialog,{type:"renameDesignSystem",children:(0,eo.jsxs)("form",{onSubmit:d,children:[(0,eo.jsxs)(es.ModalHeader,{children:[(0,eo.jsx)(es.ModalTitle,{children:"Rename Design System"}),(0,eo.jsx)(es.ModalDescription,{children:(0,eo.jsx)("label",{className:"sr-only",htmlFor:"designSystemName",children:"Design System Name"})})]}),(0,eo.jsxs)(es.ModalContent,{children:[(0,eo.jsx)(el.Input,{"aria-label":"Design System Name",autoComplete:"off",autoFocus:!0,className:"w-full",id:"designSystemName",maxLength:X,onChange:e=>u(e.target.value),placeholder:"Enter design system name",ref:l,value:c}),(0,eo.jsx)(ec.InputCounter,{className:"mt-2",count:c.length,max:X,message:"Name must be less than ".concat(X," characters")})]}),(0,eo.jsxs)(es.ModalFooter,{children:[(0,eo.jsx)(eu.Button,{onClick:eh.closeDialog,size:"sm",type:"button",variant:"secondary",children:"Cancel"}),(0,eo.jsx)(ef.SpinnerButton,{pending:o,disabled:!c.trim(),size:"sm",type:"submit",children:o?"Renaming...":"Rename"})]})]})})}function ew(){let e=(0,r.useAtomValue)((0,n.getDialogsAtoms)().dialogOpen),C=(0,i.useMemo)(()=>{if(!e)return null;switch(e.type){case"createTeam":return(0,t.jsx)(a.TeamCreateDialog,{});case"joinedNewTeams":return(0,t.jsx)(I.JoinedTeams,{...e.data});case"requestAccess":return(0,t.jsx)(o.TeamRequestAccessDialog,{...e.data});case"upgradeTeam":return(0,t.jsx)(s.TeamUpgradeDialog,{...e.data});case"transferProject":return(0,t.jsx)(D.TransferProject,{...e.data});case"reassignProject":return(0,t.jsx)(T.ReassignProject,{...e.data});case"deleteChat":return(0,t.jsx)(c.ChatDeleteDialog,{...e.data});case"undoChanges":return(0,t.jsx)(u.ChatUndoChangesDialog,{...e.data});case"updateChatTitle":return(0,t.jsx)(l.ChatRenameDialog,{...e.data});case"messageDownvote":return(0,t.jsx)(d.ChatMessageDownvoteDialog,{...e.data});case"flagBlock":return(0,t.jsx)(p.ChatFlagBlockDialog,{...e.data});case"forkBlock":return(0,t.jsx)(E.ChatForkBlockDialog,{...e.data});case"templateEdit":return(0,t.jsx)(h.TemplateEditDialog,{...e.data});case"templateDelete":return(0,t.jsx)(f.TemplateDeleteDialog,{...e.data});case"templateWizard":return(0,t.jsx)(m.TemplateWizardDialog,{...e.data});case"createDesignSystem":return(0,t.jsx)(Y,{...e.data});case"deleteDesignSystem":return(0,t.jsx)(ea,{...e.data});case"renameDesignSystem":return(0,t.jsx)(eb,{...e.data});case"feedback":return(0,t.jsx)(g.FeedbackDialog,{...e.data});case"connectRepo":return(0,t.jsx)(v.ConnectRepoDialog,{...e.data});case"buyMoreCredits":return(0,t.jsx)(x.BuyMoreCreditsTwoStepDialog,{...e.data});case"cancelPlan":return(0,t.jsx)(y.CancelPlanDialog,{...e.data});case"upgradePlan":return(0,t.jsx)(b.UpgradePlanDialog,{...e.data});case"addPaymentMethod":return(0,t.jsx)(w.AddPaymentMethodDialog,{...e.data});case"redeemCode":return(0,t.jsx)(j.RedeemCodeDialog,{});case"passwordProtection":return(0,t.jsx)(M.PasswordProtection,{...e.data});case"attachmentPreview":return(0,t.jsx)(A.AttachmentPreviewDialog,{...e.data});case"newFeatureDialog":return(0,t.jsx)(L.NewFeatureDialog,{...e.data});default:return null}},[e]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eC,{}),(0,t.jsx)(i.Suspense,{fallback:null,children:C})]})}function ej(e,t,n){let r=new URLSearchParams(e);null===n?r.delete(t):r.set(t,n);let i="".concat(window.location.pathname).concat(r.toString()?"?":"").concat(r.toString());window.history.replaceState({},"",i)}function eC(){let e=(0,C.useSearchParams)(),t=(0,C.useRouter)(),{user:r}=(0,k.useUser)(),{setShowSignInDialog:a}=(0,S.useSignInDialog)(),{setPaymentDialogPlan:o}=(0,N.usePaymentDialog)(),s=e.get("premium")?"v0-level3":null,l=e.get("buyMore")&&"0"!==e.get("buyMore");return(0,i.useEffect)(()=>{if(s)return r?(o(s),void ej(e,"premium",null)):void a({content:!1,customMessage:"Create an account to subscribe to Premium"});l&&((0,n.openDialog)({type:"buyMoreCredits",data:{onSuccess:()=>(0,i.startTransition)(t.refresh)}}),ej(e,"buyMore",null))},[s,l,r,t]),null}e.s(["updateDesignSystemAction",()=>ey],398575)},120485,e=>{"use strict";e.s(["handleChatError",()=>l,"openOutOfCreditsDialog",()=>s]);var t=e.i(768167),n=e.i(323194),r=e.i(470259);e.i(563948);var i=e.i(407562),a=e.i(691175);e.i(904347);var o=e.i(37737);function s(e,t){"v0-level0"===e?(0,o.openDialog)({type:"upgradePlan"}):(0,o.openDialog)({type:"buyMoreCredits",data:{onSuccess:()=>{null==t||t.refresh()}}})}function l(e,l,c,u){if(!e||"string"!=typeof e&&!(e instanceof Error))return!1;switch(e instanceof Error?e.message:e){case r.AGREEMENT_NOT_ACCEPTED:return i.toast.error("Please accept v0 terms and try again."),(0,t.mutateOnboardingModal)(!0),!0;case r.BLOCKED_USER:return i.toast.error("You are blocked from sending messages."),null==l||l.push("/"),!0;case r.CODE_EXECUTION_ERROR:return!0;case r.DAILY_MESSAGE_LIMIT_REACHED:case r.EXPERIMENTAL_MONTHLY_LIMIT_REACHED:return(0,o.openDialog)({type:"upgradePlan"}),!0;case r.EMPTY_MESSAGE_ERROR:return i.toast.error("Message cannot be empty."),!0;case r.PROJECT_ACCESS_DENIED:return i.toast.error("You do not have access to this project."),!0;case r.FAILED_TO_READ_ROW:return!0;case r.INVALID_ATTACHMENT_TYPE:return i.toast.error("Invalid attachment type."),!0;case r.INVALID_REQUEST_BODY:return i.toast.error("Unable to process request. Please edit your message and try again."),!0;case r.LLM_CALL_ERROR:return i.toast.error("An error occurred while processing your message. Start a new chat, retry, or edit your message."),!0;case r.MAXIMUM_PER_CHAT_IMAGE_ATTACHMENTS_REACHED:return i.toast.error("You've reached the maximum number of image attachments allowed for a single chat."),!0;case r.MISSING_USER_MESSAGE_ID:case r.INVALID_PARENT_ID:case r.FAILED_TO_DELETE_CONTINUE_MESSAGE:case r.MISSING_ASSISTANT_MESSAGE_ID:return i.toast.error("Invalid message ID. Start a new chat or edit and retry your last message."),!0;case r.NO_PLAN_ERROR:return i.toast.error("No active plan. Ensure you have accepted v0 terms and have an active subscription to continue."),null==l||l.push("/subscription?from=chat"),!0;case r.NOT_FOUND:return i.toast.error("The resource you are looking for could not be found."),!0;case r.RATE_LIMITED:return i.toast.error("Too many requests. Please try again later."),!0;case r.UNAUTHENTICATED:return(0,n.mutateSignInDialog)({prompt:!1,customMessage:"Please sign in to continue."}),!0;case r.UNAUTHORIZED:return i.toast.error("You are not authorized to perform this action."),!0;case r.UPLOAD_ATTACHMENT_RATE_LIMIT:return i.toast.error("You are uploading too many files. Please try again later."),!0;case r.UPLOAD_ATTACHMENT_RATE_LIMIT:return i.toast.error("Missing file name."),!0;case r.SUBDOMAIN_LIMIT_EXCEEDED:return i.toast.error("You have reached the daily limit for assigning custom subdomains."),!0;case r.MISSING_FORK_KEY_FOR_EDIT:case r.INVALID_FORK_KEY_MISSING_MESSAGES:case r.FORK_KEY_MESSAGES_OUT_OF_ORDER:case r.MISSING_FORK_KEY_FOR_CONTINUE_RETRY:i.toast.error("Invalid fork key. Please start a new chat.");case r.V0_BLOCK_PREVIEW_ERROR:return!0;case r.BILLING_DETAILS_ERROR:return i.toast.error("Unexpected error. Please try again later."),!0;case r.BILLING_SUBSCRIPTION_ERROR:return i.toast.error("Failed to start your v0 plan. Please try again later."),!0;case r.SUBDOMAIN_ALREADY_ASSIGNED:return i.toast.error("This subdomain is already assigned to this block."),!0;case r.ATTACHMENT_EXCEEDS_REMAINING_TOKENS:return i.toast.error("Your non-image attachment(s) exceed the limits for this chat. Please try again with fewer or smaller attachments."),!0;case r.PAYMENT_PROCESSING:return i.toast.warning("Payment is processing. Please try again later."),!0;case r.ANON_LIMIT_REACHED:return(0,n.mutateSignInDialog)({prompt:!1,customMessage:"You're out of free messages. Sign in or sign up to continue."}),!0;case r.OUT_OF_CREDITS:return s(null==u?void 0:u.userPlan,l),!0;case r.MISSING_SCOPE:if(l&&(null==u?void 0:u.scopeSlug)){let e=(0,a.generatePathFromContext)(u);l.push((0,a.getLoginUrlToMissingScopeClient)({slug:u.scopeSlug,path:e}))}else i.toast.error("Please re-authentiate for full access."),null==l||l.refresh();return!0;case r.MISSING_MFA_SCOPE:if(l&&(null==u?void 0:u.scopeSlug)){let e=(0,a.generatePathFromContext)(u);l.push((0,a.getTwoFactorRequiredUrlClient)({slug:u.scopeSlug,path:e}))}else i.toast.error("You must enable two-factor authentication to perform this action."),null==l||l.refresh();return!0;case r.FORBIDDEN:return i.toast.error("You are not authorized to perform this action."),!0;case r.UNEXPECTED_ERROR:default:return i.toast.error(c||"An unexpected error occurred."),!0}return!1}},564997,e=>{"use strict";e.s(["ExportChatButton",()=>p,"V0_CHAT_FILE_PREFIX",()=>d]);var t=e.i(832520),n=e.i(200407),r=e.i(176248),i=e.i(379584);e.i(563948);var a=e.i(407562),o=e.i(707827),s=e.i(685816),l=e.i(120485),c=e.i(403055),u=e.i(729602);let d="v0-chat-export";function p(e){let{className:p}=e,[h,f]=(0,n.useTransition)(),m=(0,u.useChatId)(),g=()=>{f(async()=>{if(!m)return void a.toast.error("Chat ID not found.");try{let e=await (0,i.exportChat)({payload:{chatId:m}});if("error"in e)throw Error(e.error);let t=new Blob([JSON.stringify(e.data)],{type:"application/json"}),n=URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download="".concat(d,"-").concat(m,"-").concat(new Date().toISOString(),".json"),r.click(),URL.revokeObjectURL(n)}catch(e){(0,l.handleChatError)(e)||a.toast.error("Something went wrong. Please try again.")}})};return(0,t.jsx)(r.Button,{disabled:h,onClick:g,className:(0,c.cn)("size-7 rounded-md px-1 py-1.5 text-gray-900",p),size:"sm",tooltip:{side:"bottom",content:"Export Chat (AI Team only)"},variant:"secondary",children:h?(0,t.jsx)(o.Spinner,{}):(0,t.jsx)(s.FileJson,{})})}},205871,470464,e=>{"use strict";var t=e.i(605528);let n=(0,t.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M9 2H9.75H14.25H15V3.5H14.25H9.75H9V2ZM9 12.5H9.75H14.25H15V14H14.25H9.75H9V12.5ZM9.75 7.25H9V8.75H9.75H14.25H15V7.25H14.25H9.75ZM1 12.5H1.75H2.25H3V14H2.25H1.75H1V12.5ZM1.75 2H1V3.5H1.75H2.25H3V2H2.25H1.75ZM1 7.25H1.75H2.25H3V8.75H2.25H1.75H1V7.25ZM5.75 12.5H5V14H5.75H6.25H7V12.5H6.25H5.75ZM5 2H5.75H6.25H7V3.5H6.25H5.75H5V2ZM5.75 7.25H5V8.75H5.75H6.25H7V7.25H6.25H5.75Z" fill="currentColor"/>');e.s(["Logs",0,n],205871);let r=(0,t.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M13.5 4.6736V9.09116L15 10.7065V4.44907C15 4.16343 14.8779 3.89142 14.6644 3.70166L10.7842 0.252591C10.6011 0.0898786 10.3647 0 10.1198 0H2.5H1V1.5V13.5C1 14.8807 2.11929 16 3.5 16H11.7275L11.3016 15.5414L10.3346 14.5H3.5C2.94772 14.5 2.5 14.0523 2.5 13.5V1.5H9.9297L13.5 4.6736ZM8 6C6.89543 6 6 6.89543 6 8C6 9.10457 6.89543 10 8 10C9.10457 10 10 9.10457 10 8C10 6.89543 9.10457 6 8 6ZM4.5 8C4.5 6.067 6.067 4.5 8 4.5C9.933 4.5 11.5 6.067 11.5 8C11.5 8.63488 11.331 9.23028 11.0354 9.74364L14.0496 12.9897L14.5599 13.5393L13.4607 14.5599L12.9504 14.0103L10.0223 10.857C9.4512 11.262 8.7534 11.5 8 11.5C6.067 11.5 4.5 9.933 4.5 8Z" fill="currentColor"/>');e.s(["PreviewDocument",0,r],470464)},744128,e=>{"use strict";let t=(0,e.i(121793).default)("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);e.s(["default",()=>t])},625402,e=>{"use strict";var t=e.i(832520),n=e.i(176248),r=e.i(92479),i=e.i(502398),a=e.i(556355),o=e.i(205871),s=e.i(971623),l=e.i(470464),c=e.i(459342),u=e.i(744128),u=u,d=e.i(304649);function p(e){let{messageId:n}=e,{chatId:o}=(0,r.useChatId)(),s=new URL("/chat/internal/chats",window.location.origin);return o?(s.searchParams.set("chatId",o),s.searchParams.set("messageId",n),(0,t.jsx)(i.Link,{external:!0,href:s.toString(),children:(0,t.jsxs)(a.DropdownMenuItem,{children:[(0,t.jsx)(l.PreviewDocument,{})," View Internal Page"]})})):null}function h(e){let{messageId:n}=e,{chatId:s}=(0,r.useChatId)(),l=new URL("/chat/internal/agent-logs",window.location.origin);return s?(l.searchParams.set("q",n),(0,t.jsx)(i.Link,{external:!0,href:l.toString(),children:(0,t.jsxs)(a.DropdownMenuItem,{children:[(0,t.jsx)(o.Logs,{})," Agent Logs"]})})):null}function f(e){let{messageId:n}=e,{chatId:o}=(0,r.useChatId)(),l=new URL("/chat/internal/browse",window.location.origin);return o?(l.searchParams.set("q",n),(0,t.jsx)(i.Link,{external:!0,href:l.toString(),children:(0,t.jsxs)(a.DropdownMenuItem,{children:[(0,t.jsx)(s.MagnifyingGlass,{})," Browse Data"]})})):null}function m(e){let{chatId:r,className:i}=e;if(!r)return null;let a=new URL("/chat/internal/chats",window.location.origin);return a.searchParams.set("chatId",r),(0,t.jsx)(n.Button,{onClick:()=>{window.open(a.href,"_blank")},className:(0,d.cn)("size-7 rounded-md",i),size:"sm",tooltip:{side:"bottom",content:"View Internal Page (AI Team Only)"},variant:"secondary",children:(0,t.jsx)(l.PreviewDocument,{})})}function g(e){let{chatId:n,messageId:r}=e;return n?(0,t.jsx)(i.Link,{external:!0,href:(0,c.getInspectLink)({chatId:n,messageId:r}),children:(0,t.jsxs)(a.DropdownMenuItem,{children:[(0,t.jsx)(u.default,{})," View in Braintrust"]})}):null}e.s(["OpenInBraintrustButton",()=>g,"OpenInInternalButton",()=>m,"OpenMessageInInternalAgentLogsButton",()=>h,"OpenMessageInInternalBrowseButton",()=>f,"OpenMessageInInternalButton",()=>p],625402)},499282,e=>{"use strict";function t(e){return(null==e?void 0:e.type)==="code-project"||(null==e?void 0:e.type)==="react"||(null==e?void 0:e.type)==="v0"||(null==e?void 0:e.type)==="tsx"}e.s(["canBeDeployed",()=>t])},472914,435106,e=>{"use strict";var t=e.i(832520),n=e.i(200407),r=e.i(753533),i=e.i(142219),a=e.i(205341);let o=null,s=(0,r.cacheResult)(o,()=>({isPointerDown:(0,a.atom)(!1),lastInteract:(0,a.atom)(0)})),l=null,c=(0,r.cacheResult)(l,()=>({...s()}));function u(){let e=s();return{setPointerDown:t=>{i.store.set(e.isPointerDown,t)},setLastInteract:t=>{i.store.set(e.lastInteract,t)}}}e.s(["getUserInputActions",()=>u,"getUserInputAtoms",0,c],435106);var d=e.i(780292),p=e.i(827728);function h(e){let{children:n,debug:r}=e;return g(),(0,t.jsxs)(t.Fragment,{children:[r&&(0,t.jsx)(f,{}),n]})}function f(){let e=c(),r=(0,d.useAtomValue)(e.isPointerDown),i=(0,d.useAtomValue)(e.lastInteract),a=(0,n.useMemo)(()=>[{name:"isPointerDown",value:r},{name:"lastInteract",value:i}],[r,i]);return(0,t.jsx)("div",{className:"pointer-events-none fixed left-0 top-0 h-full w-full",children:a.map(e=>(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{children:e.name}),(0,t.jsx)("div",{children:JSON.stringify(e.value)})]},e.name))})}let m={passive:!0,capture:!0};function g(){let e=u(),t=(0,n.useCallback)(()=>{e.setPointerDown(!0),e.setLastInteract(Date.now())},[e]),r=(0,n.useCallback)(()=>{e.setPointerDown(!1)},[e]),i=(0,n.useCallback)(()=>{e.setPointerDown(!1),e.setLastInteract(Date.now())},[e]),a=(0,n.useCallback)(()=>{"hidden"===document.visibilityState&&i()},[i]),o=(0,n.useCallback)(()=>{e.setLastInteract(Date.now())},[e]),s=(0,n.useCallback)(()=>{e.setLastInteract(Date.now())},[e]);(0,p.useEventListener)("blur",i,void 0,m),(0,p.useEventListener)("pointerdown",t,void 0,m),(0,p.useEventListener)("pointerup",r,void 0,m),(0,p.useEventListener)("mouseleave",i,void 0,m),(0,p.useEventListener)("mousemove",o,void 0,m),(0,p.useEventListener)("keydown",s,void 0,m),(0,p.useEventListener)("visibilitychange",a,{current:"undefined"!=typeof document?document:null},m)}e.s(["UserInputProvider",()=>h],472914)},528517,e=>{"use strict";e.i(472914),e.i(435106),e.s([])},275215,e=>{"use strict";e.s(["getSidebarActions",()=>b,"getSidebarAtoms",()=>c,"getWritableSidebarAtoms",()=>l]);var t=e.i(753533),n=e.i(142219),r=e.i(254211),i=e.i(205341);e.i(528517);var a=e.i(435106),o=e.i(668887);let s=new Map,l=(0,t.cacheResultById)(s,()=>({isCollapsedOverride:(0,i.atom)(!1),isPeeking:(0,i.atom)(!1),isChatRoute:(0,i.atom)(!0),renderRecoverHitArea:(0,i.atom)(!1),openedDropdown:(0,i.atom)(!1)})),c=(0,t.cacheResultById)(new Map,e=>{let t=l(e),n=(0,r.getDurableScopedAtoms)(e),a=(0,r.getDurableRootAtoms)("root"),o=(0,i.atom)(e=>e(t.isCollapsedOverride)||e(a.sidebarCollapsed)),s=(0,i.atom)(e=>!e(o)||e(t.isPeeking));return{...t,isVisible:s,isCollapsed:o,sidebarRecentChatsSkeleton:n.sidebarRecentChatsSkeleton,sidebarFavoriteChatsAndProjectsSkeleton:n.sidebarFavoriteChatsAndProjectsSkeleton,sidebarFavoriteChatsAndProjectsCollapsed:n.sidebarFavoriteChatsAndProjectsCollapsed,sidebarRecentChatsCollapsed:n.sidebarRecentChatsCollapsed}}),u=null,d=null,p=null,h=null,f=null,m=200,g=50,v=200,x=200,y=1e3;function b(e){let t=c(e),i=l(e),s=(0,r.getDurableScopedAtoms)(e),b=(0,r.getDurableRootAtoms)("root"),w=(0,a.getUserInputAtoms)();function j(){u&&clearTimeout(u),d&&clearTimeout(d),f&&clearTimeout(f),n.store.get(t.isCollapsed)&&(n.store.set(i.renderRecoverHitArea,!0),f=setTimeout(()=>{n.store.set(i.renderRecoverHitArea,!1)},x)),u=setTimeout(()=>{n.store.set(i.openedDropdown,!1)},50),n.store.set(i.isPeeking,!1)}function C(){let{leavingScreen:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(u&&clearTimeout(u),d&&clearTimeout(d),p&&Date.now()-p>m&&!e)return j();u=setTimeout(()=>j(),e?y:g)}function k(){let{onlyOnCollapsed:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(!e||n.store.get(b.sidebarCollapsed))&&(j(),h&&clearTimeout(h),h=setTimeout(()=>h=null,v))}function S(e){n.store.set(b.sidebarCollapsed,e),e&&k()}return{startPeeking:()=>{if(!n.store.get(w.isPointerDown)){if(u&&clearTimeout(u),d&&clearTimeout(d),!h){if((0,o.getDesignModeEnabled)(n.store.get)){d=setTimeout(()=>{n.store.set(i.isPeeking,!0),p=Date.now(),d=null},500);return}n.store.set(i.isPeeking,!0),p=Date.now()}}},stopPeeking:j,stopPeekingAfterDelay:C,stopPeekingForced:k,clearStartPeekingTimeout:function(){d&&(clearTimeout(d),d=null)},openSidebar:()=>{S(!1)},collapseSidebar:()=>{S(!0)},toggleSidebar:()=>{S(!n.store.get(b.sidebarCollapsed))},setCollapsedOverride:e=>n.store.set(i.isCollapsedOverride,e),setSidebarRecentChatsSkeleton:e=>n.store.set(s.sidebarRecentChatsSkeleton,e),setSidebarFavoriteChatsAndProjectsSkeleton:e=>n.store.set(s.sidebarFavoriteChatsAndProjectsSkeleton,e),setSidebarFavoriteChatsAndProjectsCollapsed:e=>n.store.set(s.sidebarFavoriteChatsAndProjectsCollapsed,e),setSidebarRecentChatsCollapsed:e=>n.store.set(s.sidebarRecentChatsCollapsed,e),setOpenedDropdown:e=>n.store.set(i.openedDropdown,e)}}},296046,e=>{"use strict";e.s(["useIsChatPage",()=>s]);var t=e.i(200407),n=e.i(729602),r=e.i(480118),i=e.i(726718),a=e.i(275215),o=e.i(780292);function s(){let e=(0,a.getWritableSidebarAtoms)("skeleton"),s=(0,o.useAtomValue)(e.isChatRoute),l=(0,r.useSearchParams)(),c=(0,r.usePathname)(),u=(0,n.useChatId)();return(0,t.useMemo)(()=>{let e=(0,i.isHome)(c),t=!!u,n=!!l.get("q");return t&&s||e&&n},[u,c,l,s])}},886545,e=>{"use strict";let t=(0,e.i(605528).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M2.5 13.5H6.75V15H2C1.44772 15 1 14.5523 1 14V2C1 1.44771 1.44772 1 2 1H6.75V2.5L2.5 2.5L2.5 13.5ZM12.4393 7.24999L10.4697 5.28031L9.93934 4.74998L11 3.68932L11.5303 4.21965L14.6036 7.29288C14.9941 7.6834 14.9941 8.31657 14.6036 8.70709L11.5303 11.7803L11 12.3106L9.93934 11.25L10.4697 10.7197L12.4393 8.74999L5.75 8.74999H5V7.24999H5.75L12.4393 7.24999Z" fill="currentColor"/>');e.s(["Logout",0,t])},541108,e=>{"use strict";let t=(0,e.i(605528).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M9.5 6V7H6.5V6C6.5 5.17157 7.17157 4.5 8 4.5C8.82843 4.5 9.5 5.17157 9.5 6ZM5 7V6C5 4.34315 6.34315 3 8 3C9.65685 3 11 4.34315 11 6V7H12V11.5C12 12.3284 11.3284 13 10.5 13H5.5C4.67157 13 4 12.3284 4 11.5V7H5Z" fill="currentColor"/>');e.s(["LockClosedSmall",0,t])},455951,489441,e=>{"use strict";var t=e.i(605528);let n=(0,t.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M0 1H0.75H5C6.2267 1 7.31583 1.58901 8 2.49963C8.68417 1.58901 9.7733 1 11 1H15.25H16V1.75V13V13.75H15.25H10.7426C10.1459 13.75 9.57361 13.9871 9.15165 14.409L8.53033 15.0303H7.46967L6.84835 14.409C6.42639 13.9871 5.8541 13.75 5.25736 13.75H0.75H0V13V1.75V1ZM7.25 4.75C7.25 3.50736 6.24264 2.5 5 2.5H1.5V12.25H5.25736C5.96786 12.25 6.65758 12.4516 7.25 12.8232V4.75ZM8.75 12.8232V4.75C8.75 3.50736 9.75736 2.5 11 2.5H14.5V12.25H10.7426C10.0321 12.25 9.34242 12.4516 8.75 12.8232Z" fill="currentColor"/>');e.s(["BookOpen",0,n],455951);let r=(0,t.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16ZM8.62499 3.375V4V4.375H9C10.1736 4.375 11.125 5.3264 11.125 6.5H9.875C9.875 6.01675 9.48325 5.625 9 5.625H8.62499V7.375H9C10.1736 7.375 11.125 8.3264 11.125 9.5C11.125 10.6736 10.1736 11.625 9 11.625H8.62499V12V12.625H7.37499V12V11.625H7C5.8264 11.625 4.875 10.6736 4.875 9.5H6.125C6.125 9.98325 6.51675 10.375 7 10.375H7.37499V8.625H7C5.8264 8.625 4.875 7.6736 4.875 6.5C4.875 5.3264 5.8264 4.375 7 4.375H7.37499V4V3.375H8.62499ZM7.37499 5.625H7C6.51675 5.625 6.125 6.01675 6.125 6.5C6.125 6.98325 6.51675 7.375 7 7.375H7.37499V5.625ZM8.62499 8.625V10.375H9C9.48325 10.375 9.875 9.98325 9.875 9.5C9.875 9.01675 9.48325 8.625 9 8.625H8.62499Z" fill="currentColor"/>');e.s(["Dollar",0,r],489441)},378249,e=>{"use strict";let t=(0,e.i(605528).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M7.75 0C5.95507 0 4.5 1.45507 4.5 3.25V3.75C4.5 5.54493 5.95507 7 7.75 7H8.25C10.0449 7 11.5 5.54493 11.5 3.75V3.25C11.5 1.45507 10.0449 0 8.25 0H7.75ZM6 3.25C6 2.2835 6.7835 1.5 7.75 1.5H8.25C9.2165 1.5 10 2.2835 10 3.25V3.75C10 4.7165 9.2165 5.5 8.25 5.5H7.75C6.7835 5.5 6 4.7165 6 3.75V3.25ZM2.5 14.5V13.1709C3.31958 11.5377 4.99308 10.5 6.82945 10.5H9.17055C11.0069 10.5 12.6804 11.5377 13.5 13.1709V14.5H2.5ZM6.82945 9C4.35483 9 2.10604 10.4388 1.06903 12.6857L1 12.8353V13V15.25V16H1.75H14.25H15V15.25V13V12.8353L14.931 12.6857C13.894 10.4388 11.6452 9 9.17055 9H6.82945Z" fill="currentColor"/>');e.s(["User",0,t])},772386,e=>{"use strict";var t=e.i(547259),n=(0,t.createServerReference)("006b9bac0d2ddc5075b035a5fe5b174e7beafe1adf",t.callServer,void 0,t.findSourceMapURL,"logoutAction");e.s(["logoutAction",()=>n])},420861,e=>{e.v({blink:"loading-dots-module__YBRlOW__blink",loading:"loading-dots-module__YBRlOW__loading"})},840454,e=>{"use strict";var t=e.i(832520),n=e.i(420861),r=e.i(7284);function i(e){let{size:i=2,height:o,className:s}=e;return(0,t.jsxs)("span",{className:(0,r.default)(n.default.loading,s),"data-geist-loading-dots":"","data-version":"v1",style:{"--loading-dots-height":o?a(o):void 0,"--loading-dots-size":2!==i?a(i):void 0},children:[(0,t.jsx)("span",{}),(0,t.jsx)("span",{}),(0,t.jsx)("span",{})]})}let a=e=>"number"==typeof e?"".concat(e,"px"):e;e.s(["LoadingDots",()=>i])},966848,e=>{"use strict";var t=e.i(832520),n=e.i(840454),r=e.i(403055),i=e.i(545858),a=e.i(556355),o=e.i(491341),s=e.i(392736);function l(e){let{className:n,children:i,...o}=e;return(0,t.jsx)(a.DropdownMenuGroup,{className:(0,r.cn)("flex flex-col gap-0.5",n),...o,children:i})}function c(e){let{label:n,Icon:r,children:i}=e;return(0,t.jsxs)("div",{className:"flex w-full items-center justify-between gap-4 text-gray-500",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[r,(0,t.jsx)("span",{className:"text-nowrap text-sm font-normal text-gray-900",children:n})]}),i]})}function u(e){let{className:n,children:i,clickable:o=!0,...s}=e;return(0,t.jsx)(a.DropdownMenuItem,{className:(0,r.cn)(!o&&"hover:bg-transparent!",n),onSelect:e=>e.preventDefault(),...s,children:i})}function d(e){let{action:n,disabled:r,...i}=e;return(0,t.jsx)(u,{asChild:!0,disabled:r,children:(0,t.jsx)("form",{action:n,children:(0,t.jsx)(p,{...i})})})}function p(e){let{label:r,Icon:a,children:o}=e,{pending:s}=(0,i.useFormStatus)();return(0,t.jsx)("button",{type:"submit",className:"w-full",children:(0,t.jsx)(c,{label:r,Icon:a&&s?(0,t.jsx)("div",{className:"flex size-4 items-center justify-center",children:(0,t.jsx)(n.LoadingDots,{size:4})}):a,children:o})})}function h(e){let{href:n,external:r=!1,onClick:i,label:a,Icon:l,sameTab:d=!0,children:p,className:h}=e;return r?(0,t.jsx)(u,{className:h,onSelect:e=>{e.preventDefault(),null==i||i()},asChild:!0,children:(0,t.jsx)("a",{href:n,target:d?void 0:"_blank",rel:"noopener",children:(0,t.jsxs)(c,{label:a,Icon:l,children:[p||null,r&&!p?(0,t.jsx)(s.External,{}):null]})})}):(0,t.jsx)(u,{className:h,onSelect:e=>{e.preventDefault(),null==i||i()},asChild:!0,children:(0,t.jsx)(o.default,{href:n,target:d?void 0:"_blank",children:(0,t.jsx)(c,{label:a,Icon:l,children:p||null})})})}function f(e){let{children:n}=e;return(0,t.jsx)("div",{className:"flex h-8 items-center px-1.5",children:(0,t.jsx)("span",{className:"text-[13px] font-medium leading-[16px] text-gray-500",children:n})})}e.s(["ActionMenuItem",()=>d,"LinkMenuItem",()=>h,"MenuGroup",()=>l,"MenuItem",()=>u,"MenuItemContent",()=>c,"MenuLabel",()=>f])},915153,e=>{"use strict";var t=e.i(906261),n=e.i(206037),r=e.i(532733);function i(e){let{scope:i,user:a,suspense:o=!1}=e,s=(0,t.isUserScope)(i),{planSlug:l,isLoading:c}=(0,n.usePlanInfo)(!!s||!i.limited,i.id,void 0,6e4),u=s?void 0:i.membership.role,d=l,p=!!(s&&d)||!!(!s&&a&&(0,r.teamMemberHasV0Entitlement)(i,a)),h=s?i.username:i.slug,f=!!(!s&&i.accessRequested);return{scopeIsUser:s,scopePlan:l||(s?void 0:i.activeTrialPlan),scopeSlug:h,scopeMembershipRole:u,user:a,hasV0Seat:p,accessRequested:f,isLoading:c}}e.s(["useExtraScopeProperties",()=>i])},595722,e=>{"use strict";var t=e.i(832520),n=e.i(691175),r=e.i(230766),i=e.i(297239),a=e.i(762585),o=e.i(200407),s=e.i(775883),l=e.i(304649),c=e.i(915153),u=e.i(362530),d=e.i(906261),p=e.i(480118);function h(e){let{scope:a,user:o,showEmail:l=!1,trigger:p=!1,children:h,showAvatar:f=!0,avatarOnly:g=!1,showName:v=!1,skeleton:x}=e,y=(0,n.isAuthenticationRequired)(a),b=y&&(0,n.isScopeLimitedOnlyByMfa)(a),w=(0,d.isUserScope)(a),{scopePlan:j,scopeMembershipRole:C,hasV0Seat:k,accessRequested:S,isLoading:N}=(0,c.useExtraScopeProperties)({scope:a,user:o}),E=(0,i.useT)(),M=(0,t.jsx)(m,{authRequired:y,isMfaLimited:b,emailToShow:l?null==o?void 0:o.email:void 0,isLoading:N,role:C,scopeSlug:w?a.username:a.slug,scopePlan:j,v0Access:k,accessRequested:S});if(p){let e=j&&"v0-level0"===j;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.AvatarUser,{size:"sm",className:"mr-1.5 size-[22px]",rounded:!0,teamId:w?void 0:a.id,userId:null==o?void 0:o.id,avatarSha:null==o?void 0:o.avatarSha}),g?null:(0,t.jsxs)("div",{className:"flex min-w-0 flex-1 items-center truncate text-start text-sm font-medium leading-[20px] text-gray-900",children:[(0,t.jsx)("div",{className:"max-w-64 truncate",children:w?E("sidebar.personal"):a.name}),e?(0,t.jsx)(s.PlanBadge,{type:j,includeSuffix:!1,className:"bg-alpha-400 ml-1.5 h-[18px] rounded-full border-none px-1.5"}):null]}),(0,t.jsx)(u.ChevronUpDown,{className:"mx-1 text-gray-500!"})]})}return!j&&w&&x?x:(0,t.jsxs)("div",{className:"flex w-full items-center justify-between gap-2",children:[f&&(0,t.jsx)(r.AvatarUser,{teamId:w?void 0:a.id,userId:null==o?void 0:o.id}),g?null:(0,t.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col items-start",children:[(0,t.jsx)("div",{className:"w-full truncate text-start text-sm font-medium leading-[20px] text-gray-900",children:w&&!v?E("sidebar.personal"):a.name}),M]}),h]})}function f(e){let{variant:n}=e;return(0,t.jsxs)("div",{className:(0,l.cn)("flex w-full justify-between gap-2",{"p-1.5":"list-item"===n,"py-0.5":"indicator"===n}),children:[(0,t.jsx)(a.Skeleton,{className:"size-8 rounded-lg"}),(0,t.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col items-start justify-between pb-px pt-0.5",children:[(0,t.jsx)(a.Skeleton,{className:"h-3 w-24 rounded-lg"}),(0,t.jsx)(a.Skeleton,{className:"h-3 w-12 rounded-lg"})]})]})}function m(e){let{authRequired:r,isMfaLimited:c,isLoading:u,scopeSlug:d,scopePlan:h,role:f,v0Access:m,accessRequested:g,emailToShow:v}=e,x=(0,i.useT)(),y=(0,p.useRouter)(),b=m&&h,w=(0,o.useMemo)(()=>{if(r)return c?"2FA Required":"Authentication Required";if(v)return v;if(b)return(0,t.jsx)(s.PlanLabel,{type:h});if("OWNER"===f)if("v0-enterprise"===h)return x("billingPlans.claimSeat");else return x("billingPlans.startTeamPlan");return g?x("billingPlans.accessRequested"):x("billingPlans.requestAccess")},[r,v,b,c,h,f,x,g]),j="h-4 w-full truncate text-start text-[13px] font-medium leading-[16px] text-gray-500";return u?(0,t.jsx)(a.Skeleton,{className:"h-4 w-20 rounded-lg "}):r?(0,t.jsx)("button",{onClick:()=>{if(c)return void(0,n.redirectToTwoFactorRequired)({slug:d,push:y.push});(0,n.redirectToLoginToMissingScope)({slug:d,push:y.push})},className:(0,l.cn)(j,"hover:underline"),children:w}):(0,t.jsx)("div",{className:j,children:w})}e.s(["ScopeItemContent",()=>h,"ScopeItemContentSkeleton",()=>f])},315836,e=>{"use strict";let t=(0,e.i(605528).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M1 3.25C1 1.45507 2.45507 0 4.25 0H11.75C13.5449 0 15 1.45507 15 3.25V15.25V16H14.25H1.75H1V15.25V3.25ZM4.25 1.5C3.2835 1.5 2.5 2.2835 2.5 3.25V14.5H13.5V3.25C13.5 2.2835 12.7165 1.5 11.75 1.5H4.25ZM4 4C4 3.44772 4.44772 3 5 3H11C11.5523 3 12 3.44772 12 4V10H4V4ZM9 13H12V11.5H9V13Z" fill="currentColor"/>');e.s(["DeviceAlternate",0,t])},117286,e=>{"use strict";var t=e.i(832520),n=e.i(315836),r=e.i(856908),i=e.i(41806),a=e.i(644471),o=e.i(304649),s=e.i(996174),l=e.i(297239),c=e.i(35590);function u(e){let{className:u}=e,{theme:d,setTheme:p}=(0,c.useTheme)(),h=(0,l.useT)();return(0,t.jsx)(a.Tabs,{variant:"secondary",className:u,onClick:e=>e.stopPropagation(),onValueChange:e=>p(e),value:d,children:(0,t.jsxs)(a.TabsList,{id:"theme-switcher",className:(0,o.cn)("h-fit overflow-hidden rounded-full border p-0 focus-within:overflow-visible [&>[role=tab]]:size-6","[&>[role=tab]>.absolute]:-inset-px [&>[role=tab]>.absolute]:rounded-full [&>[role=tab]>.absolute]:border [&>[role=tab]>.absolute]:bg-transparent"),children:[(0,t.jsx)(s.Tooltip,{content:h("sidebar.themeSwitcher.system"),children:(0,t.jsxs)(a.TabsTrigger,{className:"[&>div]:shrink-0",value:"system",children:[(0,t.jsx)(n.DeviceAlternate,{size:12}),(0,t.jsx)("span",{className:"sr-only",children:"System"})]})}),(0,t.jsx)(s.Tooltip,{content:h("sidebar.themeSwitcher.light"),children:(0,t.jsxs)(a.TabsTrigger,{className:"[&>div]:shrink-0",value:"light",children:[(0,t.jsx)(i.Sun,{size:12}),(0,t.jsx)("span",{className:"sr-only",children:"Light"})]})}),(0,t.jsx)(s.Tooltip,{content:h("sidebar.themeSwitcher.dark"),children:(0,t.jsxs)(a.TabsTrigger,{className:"[&>div]:shrink-0",value:"dark",children:[(0,t.jsx)(r.Moon,{size:12}),(0,t.jsx)("span",{className:"sr-only",children:"Dark"})]})})]})})}e.s(["ThemeSwitcher",()=>u])},998065,803342,e=>{"use strict";var t=e.i(832520),n=e.i(200407),r=e.i(556355),i=e.i(297239),a=e.i(117286),o=e.i(592258),s=e.i(479273),l=e.i(145568),c=e.i(547259),u=(0,c.createServerReference)("4032b60dcada646380557db5986bde47e8e344f37f",c.callServer,void 0,c.findSourceMapURL,"setAdminMode"),d=c,p=(0,d.createServerReference)("409d1dfbf28d23f03d67b064ee7fab57112d5c3c35",d.callServer,void 0,d.findSourceMapURL,"setDemoMode"),h=e.i(304649),f=e.i(966848),m=e.i(990453),g=e.i(667660),v=e.i(780292),x=e.i(385671);function y(){let e=(0,i.useT)(),{user:o}=(0,g.useActiveScope)(),[s,l]=(0,n.useTransition)(),[c,d]=(0,n.useState)(),h=(0,n.useMemo)(()=>null!=c?c:null==o?void 0:o.isAdminMode,[c,null==o?void 0:o.isAdminMode]),[v,x]=(0,n.useTransition)(),[y,C]=(0,n.useState)(),k=(0,n.useMemo)(()=>null!=y?y:null==o?void 0:o.isDemoMode,[y,null==o?void 0:o.isDemoMode]);return(0,t.jsxs)(t.Fragment,{children:[(null==o?void 0:o.isVercelian)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(f.MenuGroup,{children:[(0,t.jsx)(f.MenuLabel,{children:"Internal"}),!k&&(0,t.jsx)(j,{clickable:!0,disabled:s,onClick:()=>{let e=!h;d(e),l(()=>u(e))},label:"Admin Mode",children:(0,t.jsx)(m.Switch,{className:"pointer-events-none",checked:h,asDiv:!0})}),(0,t.jsx)(j,{clickable:!0,disabled:v,onClick:()=>{let e=!k;C(e),x(()=>p(e))},label:"Priority Mode",children:(0,t.jsx)(m.Switch,{className:"pointer-events-none",checked:k,asDiv:!0})})]}),(0,t.jsx)(r.DropdownMenuSeparator,{})]}):null,(0,t.jsxs)(f.MenuGroup,{children:[(0,t.jsx)(f.MenuLabel,{children:e("sidebar.scopeSwitcher.preferences")}),(0,t.jsx)(j,{label:e("sidebar.scopeSwitcher.theme"),onKeyDown:e=>{var t;"Enter"===e.key&&(e.preventDefault(),null==(t=document.getElementById("theme-switcher"))||t.focus())},children:(0,t.jsx)(a.ThemeSwitcher,{})}),(0,t.jsx)(j,{label:e("sidebar.scopeSwitcher.language"),onKeyDown:e=>{var t;"Enter"===e.key&&(e.preventDefault(),null==(t=document.getElementById("locale-switcher"))||t.focus())},children:(0,t.jsx)(b,{})}),(0,t.jsx)(j,{label:"Chat Position",onKeyDown:e=>{var t;"Enter"===e.key&&(e.preventDefault(),null==(t=document.getElementById("chat-position-switcher"))||t.focus())},children:(0,t.jsx)(w,{})})]})]})}function b(){let{locale:e,setLocale:r}=(0,s.useLocale)(),i=(0,n.useCallback)(e=>{r(e)},[r]);return(0,t.jsxs)(o.Select,{onValueChange:i,value:e,children:[(0,t.jsx)(o.SelectTrigger,{id:"locale-switcher",className:"h-7 gap-1 px-2 [&>svg]:w-3 [&>svg]:shrink-0 w-auto","data-testid":"language-selector",children:(0,t.jsx)("div",{className:"truncate text-xs",children:(0,t.jsx)(o.SelectValue,{placeholder:l.ISO639_TO_LOCALEINFO[e].name})})}),(0,t.jsx)(o.SelectContent,{children:(0,t.jsx)(o.SelectGroup,{children:Object.keys(l.ISO639_TO_LOCALEINFO).map(e=>(0,t.jsx)(o.SelectItem,{value:e,children:l.ISO639_TO_LOCALEINFO[e].name},e))})})]})}function w(){let e=(0,x.getChatLayoutAtoms)(),r=(0,x.getChatLayoutActions)(),i=(0,v.useAtomValue)(e.isChatOnRight),a=(0,n.useCallback)(e=>{r.setChatOnRight("right"===e)},[r]);return(0,t.jsxs)(o.Select,{onValueChange:a,value:i?"right":"left",children:[(0,t.jsx)(o.SelectTrigger,{id:"chat-position-switcher",className:"h-7 gap-1 px-2 [&>svg]:w-3 [&>svg]:shrink-0 w-auto","data-testid":"chat-position-selector",children:(0,t.jsx)("div",{className:"truncate text-xs",children:(0,t.jsx)(o.SelectValue,{placeholder:i?"Right":"Left"})})}),(0,t.jsx)(o.SelectContent,{children:(0,t.jsxs)(o.SelectGroup,{children:[(0,t.jsx)(o.SelectItem,{value:"left",children:"Left"}),(0,t.jsx)(o.SelectItem,{value:"right",children:"Right"})]})})]})}let j=e=>{let{label:n,children:r,clickable:i=!1,className:a,...o}=e,s=(0,h.cn)("cursor-default items-center justify-between gap-4 focus:bg-transparent focus-visible:bg-gray-100","function"==typeof o.onClick&&"cursor-pointer",a);return(0,t.jsxs)(f.MenuItem,{className:s,clickable:i,svgStyling:!1,...o,children:[(0,t.jsx)(f.MenuItemContent,{label:n}),r]})};e.s(["HeaderPreference",()=>y],998065);var C=t,k=n,S=e.i(426945),N=h;let E=k.forwardRef((e,t)=>{let{className:n,value:r,...i}=e;return(0,C.jsx)(S.Root,{ref:t,className:(0,N.cn)("bg-secondary relative h-4 w-full overflow-hidden rounded-full",n),...i,children:(0,C.jsx)(S.Indicator,{className:"h-full w-full flex-1 rounded-r-full bg-teal-700 transition-all",style:{transform:"translateX(-".concat(100-(r||0),"%)")}})})});E.displayName=S.Root.displayName,e.s(["Progress",()=>E],803342)},425622,e=>{"use strict";var t=e.i(832520),n=e.i(803342),r=e.i(745197),i=e.i(762585);function a(){let[e]=(0,r.useRateLimit)();if(!e)return(0,t.jsxs)("div",{className:"text-muted-foreground flex w-full flex-col gap-1.5 p-1.5 text-[13px] font-medium",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Messages Left"}),(0,t.jsx)(i.Skeleton,{className:"h-3 w-12"})]}),(0,t.jsx)(i.Skeleton,{className:"h-2 w-full"}),(0,t.jsx)(i.Skeleton,{className:"mb-[3.5px] mt-1 h-3 w-32"})]});let a=e.remaining/e.limit*100,o=e.reset?Math.ceil((new Date(e.reset).getTime()-Date.now())/864e5):0;return(0,t.jsxs)("div",{className:"text-muted-foreground flex w-full flex-col gap-1.5 p-1.5 text-[13px] font-medium",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Messages Left"}),(0,t.jsxs)("span",{className:"flex items-center gap-1 text-gray-500",children:[e.remaining,"/",e.limit]})]}),(0,t.jsx)(n.Progress,{value:a,className:"h-2"}),e.reset&&(0,t.jsx)("div",{className:"flex items-center justify-between font-normal",children:(0,t.jsxs)("span",{className:"flex items-center gap-1",children:["Usage resets in ",o," ",(0,t.jsx)("span",{children:1===o?"day":"days"})]})})]})}e.s(["UserMessageItemContent",()=>a])},114960,173059,e=>{"use strict";e.i(541536);var t=e.i(23474);t.z.union([t.z.literal("v0-level0"),t.z.literal("v0-level3"),t.z.literal("v0-team"),t.z.literal("v0-enterprise")]);let n={"v0-level0":{name:"Free",credits:5},"v0-level3":{name:"Premium",credits:20},"v0-team":{name:"Team",credits:30},"v0-enterprise":{name:"Enterprise",credits:0}};Object.keys(n),e.s(["CREDIT_BASED_PLANS",0,n],114960);var r=e.i(832520),i=e.i(966848),a=e.i(556355);function o(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(i.MenuGroup,{children:[(0,r.jsx)(i.MenuLabel,{children:"Credit Balance"}),(0,r.jsx)(s,{label:"Monthly credits"}),(0,r.jsx)(s,{label:"Purchased credits"})]}),(0,r.jsx)(a.DropdownMenuSeparator,{})]})}function s(e){let{label:t}=e;return(0,r.jsxs)(i.MenuItem,{className:"focus-visible:none cursor-default items-center justify-between gap-4 focus:bg-transparent",clickable:!1,svgStyling:!1,children:[(0,r.jsx)(i.MenuItemContent,{label:t}),(0,r.jsx)("div",{className:"h-5 w-16 animate-pulse rounded bg-gray-200"})]})}e.s(["HeaderCreditBalanceSkeleton",()=>o],173059)},175241,670786,e=>{"use strict";e.s(["HeaderCreditBalance",()=>j],175241);var t=e.i(832520),n=e.i(200407),r=e.i(304649),i=e.i(966848),a=e.i(491341),o=e.i(556355),s=e.i(114960),l=e.i(936990),c=e.i(173059),u=e.i(176248);e.i(904347);var d=e.i(37737),p=e.i(996174),h=e.i(897850);e.s(["HeaderCreditsButton",()=>b,"getDailyCreditsBalance",()=>y],670786);var f=t,m=u,g=l,v=o,x=d;function y(e){var t;if(!e.balance.blocks)return 0;let n=e.balance.blocks.find(e=>{var t;return(null==(t=e.metadata)?void 0:t.promo)==="daily_credits"});return null!=(t=null==n?void 0:n.currentBalance)?t:0}function b(){let{planInfo:e,mutate:t}=(0,g.useTokenBillingPlanInfo)();if(!e||"v0-enterprise"===e.plan)return null;let n=y(e),r=e.balance.remaining-n,i=e.onDemand.balance,a=r+i+n,o="v0-level0"!==e.plan,s=()=>{t()};return(0,f.jsxs)(v.DropdownMenu,{children:[(0,f.jsx)(v.DropdownMenuTrigger,{asChild:!0,children:(0,f.jsxs)(m.Button,{variant:"secondary",size:"sm",className:"rounded-md h-7 hidden sm:flex",children:[(0,f.jsx)(w,{}),(0,f.jsx)("span",{className:"text-sm font-medium",children:a.toFixed(2)})]})}),(0,f.jsxs)(v.DropdownMenuContent,{align:"end",className:"w-64",children:[(0,f.jsxs)(v.DropdownMenuGroup,{children:[(0,f.jsx)(v.DropdownMenuLabel,{className:"text-gray-500 font-medium",children:"Credit Balance"}),(0,f.jsxs)(v.DropdownMenuItem,{className:"justify-between text-sm",onSelect:e=>e.preventDefault(),children:[(0,f.jsx)("span",{className:"text-gray-900",children:"Gifted credits"}),(0,f.jsx)("span",{className:"text-gray-500 font-medium",children:n.toFixed(2)})]}),(0,f.jsxs)(v.DropdownMenuItem,{className:"justify-between text-sm",onSelect:e=>e.preventDefault(),children:[(0,f.jsx)("span",{className:"text-gray-900",children:"Monthly credits"}),(0,f.jsx)("span",{className:"text-gray-500 font-medium",children:r.toFixed(2)})]}),(0,f.jsxs)(v.DropdownMenuItem,{className:"justify-between text-sm",onSelect:e=>e.preventDefault(),children:[(0,f.jsx)("span",{className:"text-gray-900",children:"Purchased credits"}),(0,f.jsx)("span",{className:"text-gray-500 font-medium",children:i.toFixed(2)})]})]}),(0,f.jsxs)(v.DropdownMenuGroup,{className:"pt-0 flex flex-col gap-1.5",children:[(0,f.jsx)(m.Button,{variant:"secondary",size:"sm",className:"flex w-full rounded-md h-7",onClick:()=>{(0,x.openDialog)({type:"redeemCode"})},children:"Redeem Code"}),(0,f.jsx)(m.Button,{variant:"default",size:"sm",className:"flex w-full rounded-md h-7",onClick:()=>{o?(0,x.openDialog)({type:"buyMoreCredits",data:{onSuccess:s,role:e.role}}):(0,x.openDialog)({type:"upgradePlan",data:{planSlug:"v0-level3",customTitle:"Upgrade your plan to buy more credits"}})},children:"Buy Credits"})]})]})]})}let w=(0,e.i(605528).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M14.5 8C14.5 11.5899 11.5899 14.5 8 14.5C4.41015 14.5 1.5 11.5899 1.5 8C1.5 4.41015 4.41015 1.5 8 1.5C11.5899 1.5 14.5 4.41015 14.5 8ZM16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8ZM6 6H8.75C8.80246 6 8.85417 6.00323 8.90493 6.00951L6.00951 8.90493C6.00323 8.85417 6 8.80246 6 8.75V6ZM10 10H11.5V7.25C11.5 5.73122 10.2688 4.5 8.75 4.5H6V6H4.5L4.5 8.75C4.5 10.2688 5.73122 11.5 7.25 11.5H10V10ZM7.05144 9.98432L9.98432 7.05144C9.99464 7.11611 10 7.18243 10 7.25V10H7.25C7.18243 10 7.11611 9.99464 7.05144 9.98432Z" fill="currentColor"/>');function j(e){let{onClick:r}=e,{planInfo:a,isLoading:s}=(0,l.useTokenBillingPlanInfo)(),u=(0,n.useMemo)(()=>{if(a)return Math.ceil(Math.abs(a.billingCycle.end-Date.now())/864e5)},[a]);if(s)return(0,t.jsx)(c.HeaderCreditBalanceSkeleton,{});if(!a)return null;let d=a.plan,p="v0-level0"===d,h="v0-enterprise"!==d,f=y(a),m=a.balance.remaining-f,g=a.onDemand.balance;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(i.MenuGroup,{children:[(0,t.jsx)(i.MenuLabel,{children:"Credit Balance"}),h?(0,t.jsx)(i.LinkMenuItem,{className:"font-medium text-gray-500",label:"Gifted credits",href:"/chat/settings/billing",onClick:()=>r(!1),children:f.toFixed(2)}):null,(0,t.jsx)(i.LinkMenuItem,{className:"font-medium text-gray-500",label:"Monthly credits",href:"/chat/settings/billing",onClick:()=>r(!1),children:m.toFixed(2)}),p?null:(0,t.jsx)(i.LinkMenuItem,{className:"font-medium text-gray-500",label:"Purchased credits",href:"/chat/settings/billing",onClick:()=>r(!1),children:g.toFixed(2)}),(0,t.jsx)(C,{plan:d,monthly:m,payAsYouGo:g,daysRemaining:u})]}),(0,t.jsx)(o.DropdownMenuSeparator,{})]})}function C(e){let{plan:n,monthly:r,payAsYouGo:i,daysRemaining:a}=e;return"v0-level0"===n?(0,t.jsx)(E,{}):r<=1&&void 0!==i&&i>.01?(0,t.jsx)(N,{}):r<("v0-enterprise"===n?5:.25*s.CREDIT_BASED_PLANS[n].credits)&&a&&"number"==typeof i?(0,t.jsx)(S,{daysRemaining:a}):null}let k=e=>{let{variant:n,children:i}=e;return(0,t.jsx)("div",{className:(0,r.cn)("mt-1 rounded-lg p-2","amber"===n?"bg-amber-50":"bg-blue-100"),children:(0,t.jsx)("p",{className:(0,r.cn)("font-sm text-sm [&_a]:font-medium [&_a]:underline [&_button]:font-medium [&_button]:underline","amber"===n?"text-amber-900 hover:[&_a]:text-amber-700":"text-blue-900 [&_a]:text-blue-800 hover:[&_a]:text-blue-700"),children:i})})};function S(e){let{daysRemaining:n}=e,{needsToRequestCredits:r}=(0,h.useCanBuyCredits)({}),i=1===n?"day":"days";return(0,t.jsxs)(k,{variant:"amber",children:["Your monthly credits will reset in ",n," ",i,"."," ",(0,t.jsx)(p.Tooltip,{content:r?"You do not have permission to purchase credits. Please contact your administrator.":void 0,children:(0,t.jsx)("button",{disabled:r,onClick:()=>(0,d.openDialog)({type:"buyMoreCredits",data:{onSuccess:()=>{}}}),children:"Buy more credits"})})]})}function N(){return(0,t.jsxs)(k,{variant:"blue",children:["You're now using your pay as you go credits."," ",(0,t.jsx)(a.default,{href:"/chat/settings/billing",children:"Buy more credits"})]})}function E(){return(0,t.jsxs)(k,{variant:"blue",children:["Upgrade your plan to buy more credits."," ",(0,t.jsx)(u.Button,{className:"text-blue-800 underline underline-offset-1",onClick:()=>(0,d.openDialog)({type:"upgradePlan"}),variant:"link",children:"Upgrade plan"})]})}},676069,e=>{"use strict";function t(e){return(null==e?void 0:e.current)&&"payment"in e.current?e.current.payment:null}function n(e){return"string"==typeof e?"v0-level0"===e:"v0-level0"===e.slug}e.s(["getPaymentStatus",()=>t,"isFreePlan",()=>n])},896182,e=>{"use strict";var t=e.i(832520),n=e.i(667660),r=e.i(206037),i=e.i(676069),a=e.i(517953),o=e.i(794593),s=e.i(304649),l=e.i(491341);function c(e){var c;let{className:u}=e,{activeScope:d}=(0,n.useActiveScope)(),{planInfo:p,planSlug:h}=(0,r.usePlanInfo)(!0,null==d?void 0:d.id),f=(0,i.getPaymentStatus)(p),m=null==f||null==(c=f.openInvoices[0])?void 0:c.url;return p&&m&&h&&"v0-level0"!==h&&"paid"!==f.status&&"processing"!==f.status&&"pending"!==f.status?(0,t.jsx)(o.Badge,{className:(0,s.cn)("pointer-events-auto h-7 rounded-md border border-red-600/20 px-2 text-sm text-red-700 hover:bg-red-200 focus:bg-red-200 focus-visible:bg-red-200 has-[>svg]:pl-2",u),variant:"red",asChild:!0,children:(0,t.jsxs)(l.default,{href:m,children:[(0,t.jsx)(a.Warning,{size:16}),(0,t.jsx)("span",{className:"non-payment-text",children:"Payment Failed"})]})}):null}e.s(["NonPaymentBadge",()=>c])},805214,e=>{"use strict";e.s(["HeaderUserMenu",()=>Y],805214);var t=e.i(832520),n=e.i(200407),r=e.i(556355),i=e.i(176248),a=e.i(762585),o=e.i(297239),s=e.i(886545),l=e.i(727826),c=e.i(541108),u=e.i(86448),d=e.i(455951),p=e.i(489441),h=e.i(9651),f=e.i(378249),m=e.i(772386),g=e.i(230766),v=e.i(304649),x=e.i(966848),y=e.i(908494),b=e.i(595722),w=e.i(794593),j=e.i(906261),C=e.i(667660),k=e.i(998065),S=e.i(425622),N=e.i(296046);e.i(904347);var E=e.i(37737),M=e.i(175241),I=e.i(242759),D=e.i(696871),T=e.i(896182),A=e.i(574768),L=t,P=e.i(235009),R=e.i(763480),_=e.i(707974),O=e.i(990453),F=e.i(338157),V=i,B=n,z=e.i(547259),H=(0,z.createServerReference)("4028627a5f1f5fa37644491ee762bb8493baf7a439",z.callServer,void 0,z.findSourceMapURL,"creditAction"),U=z,q=(0,U.createServerReference)("401339d24612a8efea351fb319deee41ee50f7db86",U.callServer,void 0,U.findSourceMapURL,"debitAction"),W=e.i(936990),Z=e.i(707827);e.i(563948);var G=e.i(407562);function K(){var e,t,n,r;let[i,a]=(0,B.useState)("debit"),[o,s]=(0,B.useState)("1"),[l,c]=(0,B.useState)("1000"),[u,d]=(0,B.useState)("onDemand"),[p,h]=(0,B.useState)(!1),[f,m]=(0,B.useState)(!1),[g,v]=(0,B.useState)(new Date().toISOString().slice(0,16)),[x,y]=(0,B.useState)(new Date(Date.now()+2592e6).toISOString().slice(0,16)),{mutate:b,planInfo:w,isLoading:j}=(0,W.useTokenBillingPlanInfo)({refreshInterval:1e3}),C=()=>X(()=>q({amount:o,allowOverdraft:p}),"Debit successful",m,b),k=()=>X(()=>H({amount:l,type:u,effectiveDate:"plan"===u?g:void 0,expirationDate:"plan"===u?x:void 0}),"".concat("onDemand"===u?"On-Demand":"Plan"," credit successful"),m,b);return j?(0,L.jsxs)("div",{className:"animate-pulse space-y-3 p-3",children:[(0,L.jsx)("div",{className:"h-4 bg-gray-200 rounded-md w-24"}),(0,L.jsx)("div",{className:"h-6 bg-gray-200 rounded-md w-16"}),(0,L.jsx)("div",{className:"h-8 bg-gray-200 rounded-md w-32"})]}):(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)("div",{className:"flex flex-col justify-center p-3 border-b border-alpha-200 gap-2",children:[(0,L.jsxs)(_.Label,{className:"text-sm flex justify-between",children:[(0,L.jsx)("span",{className:"text-gray-900 font-normal",children:"Plan"}),(0,L.jsx)("span",{className:"font-medium",children:null!=(e=null==w?void 0:w.plan)?e:(0,L.jsx)("span",{children:"N/A"})})]}),(0,L.jsxs)(_.Label,{className:"text-sm font-medium flex justify-between",children:[(0,L.jsx)("span",{className:"text-gray-900 font-normal",children:"Monthly credits"}),(0,L.jsxs)("span",{className:"font-medium",children:[null!=(t=null==w?void 0:w.balance.remaining.toFixed(2))?t:(0,L.jsx)("span",{children:"N/A"}),(0,L.jsxs)("span",{children:["/",null!=(n=null==w?void 0:w.balance.total)?n:(0,L.jsx)("span",{children:"N/A"})]})]})]}),(0,L.jsxs)(_.Label,{className:"text-sm font-medium flex justify-between",children:[(0,L.jsx)("span",{className:"text-gray-900 font-normal",children:"Purchased credits"}),(0,L.jsx)("span",{className:"font-medium",children:null!=(r=null==w?void 0:w.onDemand.balance.toFixed(2))?r:(0,L.jsx)("span",{children:"N/A"})})]})]}),(0,L.jsxs)("div",{className:"w-full",children:[(0,L.jsx)("div",{className:"px-3 pt-3",children:(0,L.jsxs)(P.TabsToggle,{value:i,onValueChange:f?void 0:a,className:"w-full",children:[(0,L.jsx)(P.TabsToggleTrigger,{value:"debit",className:"w-full",disabled:f,children:"Debit"}),(0,L.jsx)(P.TabsToggleTrigger,{value:"credit",className:"w-full",disabled:f,children:"Credit"})]})}),"debit"===i&&(0,L.jsxs)("div",{className:"space-y-3 py-3 px-3",children:[(0,L.jsx)($,{value:u,onChange:e=>d(e)}),(0,L.jsxs)("div",{className:"space-y-2",children:[(0,L.jsx)(_.Label,{htmlFor:"debit-amount",children:"Amount"}),(0,L.jsx)(R.Input,{className:"rounded-md h-7",id:"debit-amount",type:"number",value:o,onChange:e=>s(e.target.value),placeholder:"onDemand"===u?"Enter on-demand credit amount":"Enter plan credit amount"})]}),(0,L.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,L.jsx)(O.Switch,{id:"allow-overdraft",checked:p,onCheckedChange:h}),(0,L.jsx)(_.Label,{htmlFor:"allow-overdraft",children:"Allow Overdraft"})]}),(0,L.jsx)(V.Button,{size:"sm",variant:"destructive",onClick:C,disabled:f,className:"rounded-md w-full",children:f?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(Z.Spinner,{className:"!size-4"}),"Processing"]}):"Debit Credits"})]}),"credit"===i&&(0,L.jsxs)("div",{className:"space-y-3 py-3 px-3",children:[(0,L.jsx)($,{value:u,onChange:e=>d(e)}),(0,L.jsxs)("div",{className:"space-y-2",children:[(0,L.jsx)(_.Label,{htmlFor:"credit-amount",children:"Amount"}),(0,L.jsx)(R.Input,{className:"rounded-md h-7",id:"credit-amount",type:"number",value:l,onChange:e=>c(e.target.value),placeholder:"Enter credit amount"})]}),"plan"===u&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)("div",{className:"space-y-2",children:[(0,L.jsx)(_.Label,{htmlFor:"effective-date",children:"Effective Date"}),(0,L.jsx)(R.Input,{className:"rounded-md h-7",id:"effective-date",type:"datetime-local",value:g,onChange:e=>v(e.target.value)})]}),(0,L.jsxs)("div",{className:"space-y-2",children:[(0,L.jsx)(_.Label,{htmlFor:"expiration-date",children:"Expiration Date"}),(0,L.jsx)(R.Input,{className:"rounded-md h-7",id:"expiration-date",type:"datetime-local",value:x,onChange:e=>y(e.target.value)})]})]}),(0,L.jsx)(V.Button,{size:"sm",onClick:k,disabled:f,className:"rounded-md w-full bg-blue-600 text-[#FFFFFF] hover:bg-blue-700",variant:"ghost",children:f?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(Z.Spinner,{className:"!size-4"}),"Processing"]}):(0,L.jsx)("span",{children:"onDemand"===u?"Add On-demand Credits":"Add Plan Credits"})})]})]})]})}let X=async(e,t,n,r)=>{n(!0);try{let n=await e();n.success?G.toast.success(t):G.toast.error("".concat(t.split(" ")[0]," failed. Error: ").concat(JSON.stringify(n)))}catch(e){G.toast.error("Error occurred while ".concat(t.toLowerCase()))}finally{await r(),n(!1)}},$=e=>{let{value:t,onChange:n}=e;return(0,L.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,L.jsx)(_.Label,{className:"text-gray-500 font-medium",children:"Credit Type"}),(0,L.jsxs)(F.RadioGroup,{className:"flex flex-col gap-3",value:t,onValueChange:n,children:[(0,L.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,L.jsx)(F.RadioGroupItem,{value:"onDemand",id:"onDemand"}),(0,L.jsx)(_.Label,{className:"text-gray-900",htmlFor:"onDemand",children:"Purchased/on-demand credits"})]}),(0,L.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,L.jsx)(F.RadioGroupItem,{value:"plan",id:"plan"}),(0,L.jsx)(_.Label,{className:"text-gray-900",htmlFor:"plan",children:"Monthly/included credits"})]})]})]})};function Y(e){let{className:L,...P}=e,R=(0,o.useT)(),[_,O]=(0,n.useState)(!1),F=(0,N.useIsChatPage)(),{tbb:V,profpe:B}=(0,I.useFlags)(),z=(0,n.useRef)(null),{activeScope:H,user:U}=(0,C.useActiveScope)(),q=(0,j.isUserScope)(H),W=(0,n.useCallback)(()=>{(0,E.openDialog)({type:"upgradePlan"}),O(!1)},[]);if(!U)return(0,t.jsx)(a.Skeleton,{className:"m-0.5 size-6 rounded-full"});let Z=q&&"v0-level0"===U.v0plan,G=U.isAdminMode;return(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(T.NonPaymentBadge,{className:F?"@[60rem]/chat-header:[&_.non-payment-text]:block @[60rem]/chat-header:w-auto w-7 [&_.non-payment-text]:hidden":void 0}),G?(0,t.jsxs)(w.Badge,{className:"pointer-events-none h-7 rounded-md border border-blue-600/20 text-blue-700 has-[>svg]:pl-2",variant:"blue",children:[(0,t.jsx)(c.LockClosedSmall,{size:16}),(0,t.jsx)("span",{className:"text-label-14 font-medium",children:"Admin"})]}):null,"test"===U.billingMode?(0,t.jsxs)(A.Popover,{children:[(0,t.jsx)(A.PopoverTrigger,{asChild:!0,children:(0,t.jsx)(i.Button,{className:"size-7 rounded-md bg-[#1FA572] hover:bg-[#1B9365]",variant:"ghost",tooltip:"Stripe test mode tools (internal)",tooltipDirection:"bottom",children:(0,t.jsx)(J,{className:"!size-3.5 shrink-0 text-[#FFFFFF]"})})}),(0,t.jsx)(A.PopoverContent,{className:"w-64",align:"end",children:(0,t.jsx)(K,{})})]}):null,(0,t.jsxs)(r.DropdownMenu,{open:_,onOpenChange:O,children:[(0,t.jsx)(r.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(i.Button,{ref:z,className:(0,v.cn)("hover:bg-alpha-400 focus:bg-alpha-400 size-fit border-0 p-0.5",_&&"bg-alpha-400",G&&"bg-blue-200 ring-2 ring-blue-700 hover:bg-blue-600/50 hover:ring-blue-900 focus:bg-blue-600/50 focus:ring-blue-900",L),"data-testid":"user-menu-toggle",rounded:!0,variant:"ghost",tooltip:G?"You are in Admin Mode":"Profile",...P,children:(0,t.jsx)(g.AvatarUser,{avatarSha:U.avatarSha,userId:U.id,className:"size-6",rounded:!0})})}),(0,t.jsxs)(r.DropdownMenuContent,{onCloseAutoFocus:e=>{e.preventDefault()},onEscapeKeyDown:()=>{var e;O(!1),null==(e=z.current)||e.focus()},align:"end",className:"max-h-[calc(100vh-90px)] w-[250px] overflow-y-auto",side:"top",sideOffset:8,children:[(0,t.jsx)(x.MenuGroup,{children:(0,t.jsx)("div",{className:"h-11 content-center px-1.5",children:(0,t.jsx)(b.ScopeItemContent,{scope:U,user:U,showEmail:!0,showName:!0,showAvatar:!1})})}),Z&&!V?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.DropdownMenuSeparator,{}),(0,t.jsx)(x.MenuGroup,{children:(0,t.jsx)(S.UserMessageItemContent,{})})]}):null,(0,t.jsx)(r.DropdownMenuSeparator,{}),(0,t.jsxs)(x.MenuGroup,{children:[B&&(0,t.jsx)(x.LinkMenuItem,{label:R("sidebar.userMenu.profile"),Icon:(0,t.jsx)(f.User,{}),href:"/@".concat(U.username),onClick:()=>{O(!1)}}),(0,t.jsx)(x.LinkMenuItem,{label:R("sidebar.scopeSwitcher.settings"),Icon:(0,t.jsx)(l.SettingsGear,{}),href:"/chat/settings",onClick:()=>{O(!1)}}),(0,t.jsx)(x.LinkMenuItem,{label:R("sidebar.userMenu.pricing"),Icon:(0,t.jsx)(p.Dollar,{}),href:"/pricing",external:!0,sameTab:!0}),(0,t.jsx)(x.LinkMenuItem,{label:R("sidebar.userMenu.documentation"),Icon:(0,t.jsx)(d.BookOpen,{}),href:"/docs",external:!0}),(0,t.jsx)(x.LinkMenuItem,{label:R("sidebar.userMenu.communityForum"),sameTab:!1,external:!0,className:"group",Icon:(0,t.jsx)(h.Users,{className:"[&_path]:fill-gray-500 [&_path]:group-hover:fill-gray-900"}),href:D.VERCEL_COMMUNITY_V0_SECTION_URL}),F?(0,t.jsx)(x.MenuItem,{onSelect:()=>(0,E.openDialog)({type:"feedback"}),children:(0,t.jsx)(x.MenuItemContent,{label:R("sidebar.userMenu.feedback"),Icon:(0,t.jsx)(u.Question,{})})}):null]}),(0,t.jsx)(r.DropdownMenuSeparator,{}),V?(0,t.jsx)(M.HeaderCreditBalance,{onClick:O}):null,(0,t.jsx)(k.HeaderPreference,{}),(0,t.jsx)(r.DropdownMenuSeparator,{}),(0,t.jsx)(x.MenuGroup,{children:(0,t.jsx)(x.ActionMenuItem,{label:R("sidebar.scopeSwitcher.signOut"),Icon:(0,t.jsx)(s.Logout,{}),action:m.logoutAction})}),Z&&!V?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.DropdownMenuSeparator,{}),(0,t.jsx)(x.MenuGroup,{children:(0,t.jsx)(y.DropdownMenuItem,{asChild:!0,children:(0,t.jsx)(i.Button,{size:"sm",className:"focus:ring-0 focus-visible:ring-0",onClick:W,"data-testid":"upgrade-cta-button",children:R("sidebar.scopeSwitcher.upgradeToPremium")})})})]}):null]})]})]})}let J=e=>{let{className:n,...r}=e;return(0,t.jsx)("svg",{className:n,width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...r,children:(0,t.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.87023 4.76483C6.87023 4.07912 7.43286 3.81539 8.36473 3.81539C9.701 3.81539 11.3889 4.21978 12.7252 4.94066V0.808791C11.2658 0.228571 9.82407 0 8.36473 0C4.7955 0 2.42188 1.86374 2.42188 4.97582C2.42188 9.82857 9.10319 9.05494 9.10319 11.1473C9.10319 11.956 8.3999 12.2198 7.41528 12.2198C5.95594 12.2198 4.0922 11.622 2.61528 10.8132V14.9978C4.25045 15.7011 5.90319 16 7.41528 16C11.0724 16 13.5867 14.189 13.5867 11.0418C13.5691 5.8022 6.87023 6.73407 6.87023 4.76483Z",fill:"currentColor"})})}},457456,819892,e=>{"use strict";var t=e.i(205341),n=e.i(753533),r=e.i(142219),i=e.i(696871);let a=null,o=(0,n.cacheResult)(a,()=>({dailyModelUsage:(0,t.atom)({usage:void 0})})),s=null,l=(0,n.cacheResult)(s,()=>{let e=o();return{...e,dailyModelUsageRateLimit:(0,t.atom)(t=>{var n;let r=null!=(n=t(e.dailyModelUsage).usage)?n:0;return{usage:r,remaining:Math.max(0,i.DAILY_MODEL_USAGE_LIMIT-r),limit:i.DAILY_MODEL_USAGE_LIMIT}})}});function c(){let e=o();return{updateDailyModelUsage:t=>{r.store.set(e.dailyModelUsage,{usage:t})}}}e.s(["getGlobalActions",()=>c,"getGlobalAtoms",0,l,"getWritableGlobalAtoms",0,o],457456);var u=t,d=n,p=e.i(470259);let h=new Map,f=(0,d.cacheResultById)(h,()=>({latestGit:(0,u.atom)({error:p.NOT_FOUND}),passwordProtection:(0,u.atom)({error:p.NOT_FOUND,message:"Password protection status not found"})})),m=new Map,g=(0,d.cacheResultById)(m,e=>({...f(e)}));e.s(["getProjectAtoms",0,g,"getWritableProjectAtoms",0,f],819892)},407705,331968,e=>{"use strict";var t=e.i(205341),n=e.i(753533),r=e.i(142219),i=e.i(819969),a=e.i(470259),o=e.i(972287),s=e.i(819892);function l(e){if(!e)return null;let t=e.replace(/\s+/g,"-");return"@"!==(t=(t=t.replace(/[\x00-\x1F\x7F~^\:\?\*\[\\\@\{]/g,"")).replace(/\.{2,}/g,"."))&&(t=t.replace(/^\.|\.$/g,""))?t:null}e.s(["sanitizeBranchName",()=>l],331968);let c=new Map,u=(0,n.cacheResultById)(c,()=>({isOpen:(0,t.atom)(!1),stageIntent:(0,t.atom)(null),isAutoSyncEnabled:(0,t.atom)(!1),createBranchName:(0,t.atom)(null),createBranchNameError:(0,t.atom)(null),selectedBranch:(0,t.atom)(null),selectedGitNamespaceName:(0,t.atom)(null),createRepoName:(0,t.atom)(null),createRepoNameError:(0,t.atom)(null),asyncActionLoading:(0,t.atom)(null),lastSyncedCommitSha:(0,t.atom)(null),isRefreshingGitHead:(0,t.atom)(!1),timeSinceLastSync:(0,t.atom)(null),switchBranchTarget:(0,t.atom)(null),syncedShas:(0,t.atom)(new Set)})),d=new Map,p=(0,n.cacheResultById)(d,(e,n)=>{let r=u(e),c=(0,i.getChatAtoms)(e),d=(0,o.getScopedAtoms)(),p=(0,s.getProjectAtoms)(n),h=(0,t.atom)(e=>{let t=e(r.createBranchName);return!!t&&t===l(t)}),f=(0,t.atom)(e=>{let t=e(c.externalMeta);return t.git&&t.git.gitConnected&&t.git.ref?t.git.ref:null}),m=(0,t.atom)(e=>{let{head:t}=e(p.latestGit),n=e(c.externalMeta).git,i=e(r.syncedShas);return!(null==t?void 0:t.sha)||!n||!("sha"in n)||n.sha===t.sha||i.has(t.sha)?null:t.sha});return{...r,latestProjectGit:p.latestGit,externalChatMeta:c.externalMeta,gitNamespaces:d.gitNamespaces,stage:(0,t.atom)(e=>{let t=e(c.externalMeta);if(t.error&&t.error!==a.NOT_FOUND)return"error";if(!t.git){if(e(d.gitNamespaces).error)return"error";let t=e(d.gitNamespaces);return t.verifiedGitHubUser?t.userNamespace||t.orgNamespaces.length?"create-repo":"install-app":"sign-in"}let n=e(r.stageIntent);return e(f)?n||(t.git.gitConnected?"status":"select-branch"):"create-branch"===n?"create-branch":"select-branch"}),allBranches:(0,t.atom)(e=>{var t,n;let r=e(p.latestGit);if(r.error)return[];let i=e(f);return(null!=(n=null==(t=r.branches)?void 0:t.map(e=>e.name))?n:[]).sort((e,t)=>e===i?-1:+(t===i))}),isConnectedToGit:(0,t.atom)(e=>!!e(c.externalMeta).git),disableAsyncAction:(0,t.atom)(e=>e(c.isStreaming)),currentBranch:f,isAbleToCreateBranch:(0,t.atom)(e=>"creating-branch"!==e(r.asyncActionLoading)&&e(h)&&null!==e(r.createBranchName)),upstreamSha:m,isNewBranchNameValid:h}}),h=null,f=1e3;function m(e){let t=u(e);return{setIsOpen:e=>r.store.set(t.isOpen,e),setStageIntent:e=>{h&&clearTimeout(h),r.store.set(t.stageIntent,e)},resetStageOnDelay:()=>{h&&clearTimeout(h),h=setTimeout(()=>{r.store.set(t.stageIntent,null)},f)},setAsyncActionLoading:e=>r.store.set(t.asyncActionLoading,e),setIsAutoSyncEnabled:e=>r.store.set(t.isAutoSyncEnabled,e),updateCreateBranchName:e=>{let n=l(e);r.store.set(t.createBranchName,n),r.store.set(t.createBranchNameError,null)},setCreateBranchNameError:e=>r.store.set(t.createBranchNameError,e),setSelectedBranch:e=>r.store.set(t.selectedBranch,e),setCreateRepoName:e=>{r.store.set(t.createRepoName,e),r.store.set(t.createRepoNameError,null)},setCreateRepoNameError:e=>r.store.set(t.createRepoNameError,e),setSelectedGitNamespaceName:e=>r.store.set(t.selectedGitNamespaceName,e),setLastSyncedCommitSha:e=>r.store.set(t.lastSyncedCommitSha,e),updateIsRefreshingGitHead:e=>{e&&r.store.set(t.timeSinceLastSync,Date.now()),r.store.set(t.isRefreshingGitHead,e)},setSwitchBranchTarget:e=>r.store.set(t.switchBranchTarget,e),addSyncedSha:e=>r.store.set(t.syncedShas,new Set([...r.store.get(t.syncedShas),e]))}}function g(e,t){return!!(e&&t.includes(e))}e.s(["getGitSyncActions",()=>m,"getGitSyncAtoms",0,p,"isInState",()=>g],407705)},194465,698047,435433,978918,e=>{"use strict";e.s(["GitSyncCreateProjectTrigger",()=>b,"GitSyncTrigger",()=>j,"GitSyncTriggerSkeleton",()=>w],194465);var t=e.i(832520),n=e.i(176248),r=e.i(780292),i=e.i(407705),a=e.i(675120),o=e.i(707827),s=e.i(200407),l=e.i(144019),c=e.i(449381);e.i(563948);var u=e.i(407562),d=t,p=e.i(751660),h=e.i(403055);let f=(0,e.i(605528).withNewIcon)('<g clip-path="url(#clip0_872_3147)">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M8 0C3.58 0 0 3.57879 0 7.99729C0 11.5361 2.29 14.5251 5.47 15.5847C5.87 15.6547 6.02 15.4148 6.02 15.2049C6.02 15.0149 6.01 14.3851 6.01 13.7154C4 14.0852 3.48 13.2255 3.32 12.7757C3.23 12.5458 2.84 11.836 2.5 11.6461C2.22 11.4961 1.82 11.1262 2.49 11.1162C3.12 11.1062 3.57 11.696 3.72 11.936C4.44 13.1455 5.59 12.8057 6.05 12.5957C6.12 12.0759 6.33 11.726 6.56 11.5261C4.78 11.3262 2.92 10.6364 2.92 7.57743C2.92 6.70773 3.23 5.98797 3.74 5.42816C3.66 5.22823 3.38 4.40851 3.82 3.30888C3.82 3.30888 4.49 3.09895 6.02 4.1286C6.66 3.94866 7.34 3.85869 8.02 3.85869C8.7 3.85869 9.38 3.94866 10.02 4.1286C11.55 3.08895 12.22 3.30888 12.22 3.30888C12.66 4.40851 12.38 5.22823 12.3 5.42816C12.81 5.98797 13.12 6.69773 13.12 7.57743C13.12 10.6464 11.25 11.3262 9.47 11.5261C9.76 11.776 10.01 12.2558 10.01 13.0056C10.01 14.0752 10 14.9349 10 15.2049C10 15.4148 10.15 15.6647 10.55 15.5847C12.1381 15.0488 13.5182 14.0284 14.4958 12.6673C15.4735 11.3062 15.9996 9.67293 16 7.99729C16 3.57879 12.42 0 8 0Z" fill="currentColor"/>\n  </g>\n  <defs>\n  <clipPath id="clip0_872_3147">\n  <rect width="16" height="16" fill="white"/>\n  </clipPath>\n  </defs>');e.s(["LogoGithub",0,f],698047);let m=e=>{let{status:t="none"}=e;return"none"===t?(0,d.jsx)(f,{}):(0,d.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,d.jsxs)("g",{clipPath:"url(#clip)",children:[(0,d.jsx)("path",{d:"M7.99951 0.000366211C12.4194 0.000366211 15.9994 3.57903 15.9995 7.99744C15.9993 8.73285 15.8971 9.45983 15.7007 10.1595C15.0695 9.74288 14.3134 9.50046 13.5005 9.50037C13.2446 9.50037 12.994 9.52476 12.7515 9.57068C12.9836 9.05393 13.1196 8.40228 13.1196 7.57751C13.1196 6.69794 12.8093 5.98785 12.2993 5.4281C12.3795 5.22766 12.6589 4.40796 12.2192 3.30896C12.1956 3.3017 11.5216 3.10824 10.019 4.12927C9.37924 3.94946 8.6988 3.85876 8.01904 3.85876C7.33935 3.85885 6.65875 3.94942 6.01904 4.12927C4.50987 3.11373 3.83765 3.30364 3.81982 3.30896C3.3803 4.40782 3.6596 5.2277 3.73975 5.4281C3.23003 5.98779 2.9195 6.70816 2.91943 7.57751C2.91958 10.6357 4.7794 11.3267 6.55908 11.5267C6.3294 11.7268 6.11923 12.0769 6.04932 12.5961C5.58888 12.806 4.43889 13.1448 3.71924 11.9359C3.569 11.6958 3.11926 11.1067 2.48975 11.1166C1.82056 11.1267 2.21959 11.4969 2.49951 11.6469C2.8394 11.8369 3.22974 12.5457 3.31982 12.7758C3.47988 13.2256 4.00022 14.0856 6.00928 13.7162C6.00929 14.3857 6.01904 15.0156 6.01904 15.2054C6.01876 15.4152 5.86886 15.6552 5.46924 15.5853C2.2896 14.5256 -0.000331454 11.5359 -0.000488281 7.99744C-0.000368517 3.57919 3.5798 0.000613049 7.99951 0.000366211Z",fill:"currentColor"}),(0,d.jsx)("circle",{cx:"13.5",cy:"13.5",r:"2.5",className:(0,h.cn)("transition-all duration-300","synced"===t&&"fill-green-500","syncing"===t&&"fill-gray-400","error"===t&&"fill-red-500")})]})},"git-sync-icon")},g=(0,p.withNewIcon)('<path d="M3.95326 7.55195L4.48353 8.08223L3.1349 9.43086C2.18706 10.3794 2.18681 11.9171 3.1349 12.8654C4.08338 13.8137 5.62192 13.8136 6.57045 12.8654L7.91908 11.5168L8.97962 12.5773L7.63099 13.926C6.09668 15.46 3.60862 15.4601 2.07435 13.926C0.540479 12.3918 0.540731 9.90462 2.07435 8.37031L3.42298 7.0207L3.95326 7.55195ZM13.0255 11.966L11.965 13.0266L2.97377 4.03535L4.03431 2.9748L13.0255 11.966ZM8.3683 2.07539C9.90253 0.541161 12.3906 0.541391 13.9249 2.07539C15.4589 3.60964 15.4588 6.09677 13.9249 7.63105L12.5763 8.98066L12.046 8.44941L11.5158 7.91914L12.8644 6.57051C13.8125 5.62201 13.8126 4.0844 12.8644 3.13594C11.9158 2.18773 10.3773 2.18749 9.42884 3.13594L8.08021 4.48457L7.01966 3.42402L8.3683 2.07539Z" fill="currentColor"/>');e.s(["LogoGitHubSynced",0,m,"Unlink",0,g],435433);var v=e.i(297239),x=e.i(667660),y=e.i(538553);function b(e){let{chatId:n,...r}=e,o=(0,v.useT)(),d=(0,i.getGitSyncActions)(n),p=(0,c.useActiveBlockState)(),h=(0,l.useAutoCreateProject)({chatId:n,activeBlock:p}),[f,g]=(0,s.useState)(!1),{hasVercelWritePermission:b}=(0,x.useActiveScope)(),w=(0,s.useCallback)(async()=>{if(!f)try{g(!0),await h(),d.setIsOpen(!0)}catch(e){u.toast.error(o("gitSync.trigger.failedToCreateProject"))}finally{g(!1)}},[d,h,f,o]);return(0,t.jsx)(y.RbacTooltip,{show:!b,requiredRole:"V0Builder",children:(0,t.jsx)(C,{...r,onClick:w,disabled:f||!b,tooltip:o("gitSync.trigger.connectToGitHub"),children:(0,t.jsx)(a.TransitionNode,{...a.PRESETS.buttonContent,children:(0,t.jsx)(m,{})})})})}function w(){let e=(0,v.useT)();return(0,t.jsx)(C,{disabled:!0,tooltip:{side:"bottom",content:e("gitSync.trigger.loadingGitHubConnection")},children:(0,t.jsx)(m,{})})}function j(e){let{chatId:n,projectId:l,...c}=e,u=(0,v.useT)(),d=(0,i.getGitSyncAtoms)(n,l),p=(0,r.useAtomValue)(d.asyncActionLoading),h=(0,r.useAtomValue)(d.isConnectedToGit),f=(0,r.useAtomValue)(d.currentBranch),{error:g}=(0,r.useAtomValue)(d.externalChatMeta),{hasVercelWritePermission:y}=(0,x.useActiveScope)(),b=(0,i.isInState)(p,["sign-in","install-app","create-repo"]),w="".concat(b,"-").concat(h),j=(0,s.useMemo)(()=>(0,i.isInState)(p,["sign-in","install-app","create-repo"])?(0,t.jsx)(o.Spinner,{size:16}):g?(0,t.jsx)(m,{status:"error"}):h?(0,i.isInState)(p,["pushing-to-branch","syncing-to-branch","switching-branch"])||!f?(0,t.jsx)(m,{status:"syncing"}):(0,t.jsx)(m,{status:"synced"}):(0,t.jsx)(m,{}),[p,f,g,h]);return(0,t.jsxs)(C,{tooltip:{side:"bottom",content:h&&f?u("gitSync.trigger.connectedToBranch")(f):u("gitSync.trigger.connectToBranch")},disabled:!y||c.disabled,...c,children:[(0,t.jsx)(a.TransitionNode,{...a.PRESETS.buttonContent,renderKey:w,children:j}),(0,t.jsx)("span",{className:"sr-only",children:h&&f?u("gitSync.trigger.syncedToBranch")(f):u("gitSync.trigger.connectToBranch")})]})}function C(e){let{children:r,...i}=e;return(0,t.jsx)(n.Button,{size:"sm",variant:"secondary",className:"h-7 w-7 rounded-md",...i,children:r})}var k=t,S=h;function N(e){let{children:t,className:n}=e;return(0,k.jsx)("div",{className:(0,S.cn)("flex w-full flex-row justify-between gap-3 px-4 pb-4 *:flex-1",n),children:t})}function E(e){let{children:t,className:n,key:r}=e;return(0,k.jsx)("div",{className:(0,S.cn)("flex w-full flex-col gap-4 overflow-hidden p-4",n),children:t},r)}function M(e){let{children:t,className:n}=e;return(0,k.jsx)("div",{className:(0,S.cn)("flex flex-col gap-2",n),children:t})}e.s(["InputRow",()=>M,"PopoverActions",()=>N,"PopoverContent",()=>E],978918)},132666,315331,e=>{"use strict";e.s(["useAsyncGitSyncActions",()=>M],132666);var t=e.i(200407),n=e.i(480118);e.i(563948);var r=e.i(407562),i=e.i(674725),a=e.i(758057),o=e.i(144019),s=e.i(449381);e.i(472428);var l=e.i(152641);e.i(904347);var c=e.i(37737),u=e.i(407705),d=e.i(780292),p=e.i(194433);async function h(e){let{blockId:t,skipDeploy:n,skippedDeployWarning:r,branch:i}=e;try{return fetch("/chat/api/git/push",{method:"POST",body:JSON.stringify({blockId:t,skipDeploy:n,skippedDeployWarning:r,branch:i,from:"manual-push"})})}catch(e){throw e}}e.s(["pushChanges",()=>h],315331);var f=e.i(547259),m=(0,f.createServerReference)("408bdef11f407eb4c0610a99d25d3fa1753d1c9525",f.callServer,void 0,f.findSourceMapURL,"syncGitBranchToChat"),g=e.i(92479),v=e.i(53223),x=f,y=(0,x.createServerReference)("604899de3757258570ac77d0de2203f4c088ea581a",x.callServer,void 0,x.findSourceMapURL,"updateGitAutoCommit"),b=f,w=(0,b.createServerReference)("600dd2ccbbf32c3c7173c37a0503dadedc5ea3669e",b.callServer,void 0,b.findSourceMapURL,"updateGitAutoPull"),j=f,C=(0,j.createServerReference)("608d33bddde177635b07e08dd220102af45340560e",j.callServer,void 0,j.findSourceMapURL,"updateGitBranchConnection"),k=e.i(297239),S=e.i(584497);e.i(541536);var N=e.i(23474),E=e.i(183673);function M(e){let{chatId:f,projectId:x}=e,b=(0,k.useT)(),j=(0,n.useRouter)(),M=(0,u.getGitSyncAtoms)(f,x),I=(0,u.getGitSyncActions)(f),D=(0,d.useAtomValue)(M.stage),T=(0,d.useAtomValue)(M.asyncActionLoading),A=(0,d.useAtomValue)(M.currentBranch),L=(0,d.useAtomValue)(M.createRepoName),P=(0,d.useAtomValue)(M.createBranchName),R=(0,d.useAtomValue)(M.switchBranchTarget),_=(0,d.useAtomValue)(M.isNewBranchNameValid),O=(0,d.useAtomValue)(M.isConnectedToGit),F=(0,d.useAtomValue)(M.selectedGitNamespaceName),{git:V}=(0,d.useAtomValue)(M.externalChatMeta),{verifiedGitHubUser:B}=(0,d.useAtomValue)(M.gitNamespaces),{project:z}=(0,S.useChatMetadata)(),{refetchVercelProject:H}=(0,E.useVercelProject)({v0ProjectId:x}),U=(0,s.useActiveBlockState)(),q=(0,o.useAutoCreateProject)({chatId:f,activeBlock:U}),{activeForkKey:W}=(0,g.useChatMessages)(),{revalidate:Z,mutate:G}=(0,l.useServerQuerySWR)(["chat","externalMeta"],{chatId:f},{stopFetch:!0}),{revalidate:K}=(0,l.useServerQuerySWR)(["scoped","gitNamespaces"],{},{stopFetch:!0}),{revalidate:X}=(0,l.useServerQuerySWR)(["project","latestGit"],{projectId:x},{stopFetch:!0}),$="/chat/git/connected",Y=window.location.origin+"/chat/git/callback",J="https://vercel.com/api/registration/login-with-github?next=".concat(encodeURIComponent(Y)),Q={next:window.location.origin+"/github/installed"},ee=(0,i.encodeBase64URL)(JSON.stringify(Q)),et=B?"https://github.com/apps/vercel/installations/select_target?state=".concat(encodeURIComponent(ee)):"",en=(0,t.useCallback)(async e=>{await Promise.all([K(),X(),Z()]),null==e||e()},[K,X,Z]),{open:er}=(0,a.usePopupWindow)({url:J,onPoll:e=>{e.location.pathname===$&&en(()=>{e.close(),I.setAsyncActionLoading(null)})},onClose:()=>{I.setAsyncActionLoading(null),K()}}),{open:ei}=(0,a.usePopupWindow)({url:et,onPoll:e=>{e.location.pathname===$&&en(()=>{e.close(),I.setAsyncActionLoading(null)})},onClose:()=>{I.setAsyncActionLoading(null),K()}}),ea=(0,t.useCallback)(()=>{if("sign-in"===T)return void r.toast.error(b("gitSync.toast.signInInProgress"));I.setAsyncActionLoading("sign-in"),er()},[er,I,T,b]),eo=(0,t.useCallback)(()=>{if("install-app"===T)return void r.toast.error(b("gitSync.toast.appInstallationInProgress"));I.setAsyncActionLoading("install-app"),ei()},[ei,I,T,b]),es=(0,t.useCallback)(async()=>{try{if(x&&(null==z?void 0:z.vercelProjectId)||await q(),!(null==U?void 0:U.id))return void r.toast.error(b("gitSync.createRepo.needBlockToCreateRepo"));if(!L)return void r.toast.error(b("gitSync.createRepo.enterRepoName"));if(!F)return void r.toast.error(b("gitSync.createRepo.selectGitScopeError"));let e=await fetch("/chat/api/git/connect",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({owner:F,repoName:L,projectId:x,blockId:U.id,chatId:f,from:"popover"})});if(!e.ok){let t=await e.json();if("repo_alr_exists"===t.error)return void I.setCreateRepoNameError(b("gitSync.createRepo.repoAlreadyExists"));if(409===e.status&&"REPO_ALREADY_CONNECTED"===t.error){let{existingRepo:e}=t;await en(),r.toast.default(b("gitSync.createRepo.gitHubConnected"),{description:"".concat(e.org,"/").concat(e.repo),action:e.remoteURL?{children:b("gitSync.createRepo.view"),onClick:()=>{window.open(e.remoteURL,"_blank")}}:void 0});return}H(),j.refresh();let n=b("gitSync.createRepo.failedToCreateRepo");throw Error(n)}let{remoteURL:t}=N.z.object({remoteURL:N.z.string().nullable().optional()}).parse(await e.json());await en();let n=null!=t?t:F&&L?"https://github.com/".concat(F,"/").concat(L):void 0;r.toast.default(b("gitSync.createRepo.gitHubConnected"),{description:b("gitSync.createRepo.clickToViewRepo"),action:n?{children:b("gitSync.createRepo.view"),onClick:()=>{window.open(n,"_blank")}}:void 0})}catch(t){let e=t instanceof Error?t.message:b("gitSync.createRepo.failedToCreateRepo");r.toast.error(e)}finally{I.setAsyncActionLoading(null)}},[x,null==z?void 0:z.vercelProjectId,null==U?void 0:U.id,L,F,f,en,b,q,H,j,I]),el=(0,t.useCallback)(async e=>{let t=null==U?void 0:U.id;if(!t)return void r.toast.error(b("gitSync.toast.noBlockSelected"));(0,v.track)("GitSyncPushToBranch",{chatId:f,projectId:x,blockId:t,branch:e});try{await G({serverMutate:(async()=>{await h({blockId:t,skipDeploy:!0,branch:e})})(),optimisticData:{git:{...V,ref:e,gitConnected:!0}}}),await en(),"create-branch"===D&&(I.setStageIntent(null),I.updateCreateBranchName(null))}catch(t){let e=t instanceof Error?t.message:b("gitSync.toast.failedToPushChanges");r.toast.error(e),(0,v.track)("GitSyncError",{chatId:f,projectId:x,action:"push-to-branch",error:e})}},[null==U?void 0:U.id,G,V,en,D,I,f,x,b]),ec=(0,t.useCallback)(async()=>{if(!P)return void I.setCreateBranchNameError(b("gitSync.createBranch.enterBranchName"));if(!_)return void I.setCreateBranchNameError(b("gitSync.createBranch.invalidBranchName"));(0,v.track)("GitSyncCreateBranch",{chatId:f,projectId:x,blockId:null==U?void 0:U.id,branchName:P});try{if(null==U?void 0:U.id){I.setCreateBranchNameError(null);let e=await (0,p.forkBlock)(U.id);"string"==typeof e&&(I.setIsOpen(!1),I.setStageIntent(null),r.toast.success(b("gitSync.toast.forkedChatCreatingBranch")(P)),j.push("/chat/".concat(e,"?assignBranch=").concat(encodeURIComponent(P))),I.updateCreateBranchName(null))}else throw Error(b("gitSync.toast.noBlockSelected"))}catch(t){let e=t instanceof Error?t.message:b("gitSync.toast.failedToCreateBranch");I.setCreateBranchNameError(e),r.toast.error(e),(0,v.track)("GitSyncError",{chatId:f,projectId:x,action:"create-branch",error:e})}},[P,_,f,x,null==U?void 0:U.id,I,b,j]),eu=(0,t.useCallback)(async()=>{try{if(!R)return void r.toast.error(b("gitSync.toast.noBranchSelected"));(0,v.track)("GitSyncSwitchBranch",{chatId:f,projectId:x,fromBranch:A,toBranch:R}),I.resetStageOnDelay(),await G({serverMutate:(async()=>{await m({chatId:f,forkKey:W,branch:R})})(),optimisticData:{git:{...V,ref:R,gitConnected:!0}}}),await Promise.all([K(),X()])}catch(t){I.setStageIntent("switch-branch-confirmation");let e=t instanceof Error?t.message:b("gitSync.toast.failedToSwitchBranch");r.toast.error(e),(0,v.track)("GitSyncError",{chatId:f,projectId:x,action:"switch-branch",error:e})}},[R,f,x,A,I,G,V,K,X,W,b]),ed=(0,t.useCallback)(async e=>{(0,v.track)("GitSyncSelectBranch",{chatId:f,projectId:x,branch:e});try{await m({chatId:f,forkKey:W,branch:e}),await en()}catch(t){let e=t instanceof Error?t.message:b("gitSync.toast.failedToSyncToBranch");r.toast.error(e),(0,v.track)("GitSyncError",{chatId:f,projectId:x,action:"select-branch",error:e})}},[f,W,en,x,b]),ep=(0,t.useCallback)(async e=>{try{(0,v.track)("GitSyncToggleAutoCommit",{chatId:f,projectId:x,blockId:null==U?void 0:U.id,enabled:e}),await G({serverMutate:(async()=>{await y(f,e)})(),optimisticData:{git:{...V,autoCommit:e}}}),I.setIsAutoSyncEnabled(e),await en(),r.toast.success(e?b("gitSync.toast.autoCommitEnabled"):b("gitSync.toast.autoCommitDisabled"))}catch(t){let e=t instanceof Error?t.message:b("gitSync.toast.failedToToggleAutoCommit");r.toast.error(e),(0,v.track)("GitSyncError",{chatId:f,projectId:x,action:"toggle-auto-commit",error:e})}},[f,x,null==U?void 0:U.id,G,V,I,en,b]),eh=(0,t.useCallback)(async e=>{try{(0,v.track)("GitSyncToggleAutoPull",{chatId:f,projectId:x,blockId:null==U?void 0:U.id,enabled:e}),await G({serverMutate:(async()=>{await w(f,e)})(),optimisticData:{git:{...V,autoPull:e}}}),I.setIsAutoSyncEnabled(e),await en(),r.toast.success(e?b("gitSync.toast.autoPullEnabled"):b("gitSync.toast.autoPullDisabled"))}catch(t){let e=t instanceof Error?t.message:b("gitSync.toast.failedToToggleAutoPull");r.toast.error(e),(0,v.track)("GitSyncError",{chatId:f,projectId:x,action:"toggle-auto-pull",error:e})}},[f,x,null==U?void 0:U.id,G,V,I,en,b]),ef=(0,t.useCallback)(async e=>{try{(0,v.track)("GitSyncUnlinkBranch",{chatId:f,projectId:x,branch:A}),await G({serverMutate:(async()=>{await C(f,e)})(),optimisticData:{git:{...V,gitConnected:e}}}),I.setIsOpen(!1),await en(),r.toast.success(b("gitSync.toast.branchUnlinked"))}catch(t){let e=t instanceof Error?t.message:b("gitSync.toast.failedToUnlinkBranch");r.toast.error(e),(0,v.track)("GitSyncError",{chatId:f,projectId:x,action:"unlink-branch",error:e})}},[f,x,A,G,V,I,en,b]),em=(0,t.useCallback)(()=>{I.setIsOpen(!1),(0,c.openDialog)({type:"feedback",data:{feedback:b("gitSync.feedback.troubleWithGitSync")(f),sentiment:"bad"}})},[I,f,b]);function eg(e,t){return async function(){for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];if(e===T)return(0,r.throttleById)("git-async-action-".concat(e),1e4,()=>r.toast.error(b("gitSync.toast.gitOperationInProgress")));I.setAsyncActionLoading(e);try{return await t(...i)}finally{I.setAsyncActionLoading(null)}}}return{handleRetry:(0,t.useCallback)(()=>{j.refresh()},[j]),handleReport:em,handleSignInToGitHub:ea,handleConnectAppGitHub:eo,handleSyncToBranch:eg("syncing-to-branch",ed),handleSwitchBranch:eg("switching-branch",eu),handleCreateRepo:eg("create-repo",es),handleCreateBranch:eg("creating-branch",ec),handlePushToBranch:eg("pushing-to-branch",el),handleToggleAutoCommit:eg("toggle-auto-commit",ep),handleToggleAutoPull:eg("toggle-auto-pull",eh),handleUpdateBranchConnection:eg("updating-branch-connection",ef),isConnectedToGit:O}}},241489,662429,957388,54149,409267,339682,e=>{"use strict";e.s(["SignInStage",()=>p],241489);var t=e.i(832520),n=e.i(176248),r=e.i(978918),i=e.i(132666),a=e.i(407705),o=e.i(780292),s=e.i(607391),l=t,c=e.i(304649);function u(e){let{title:t,children:n,titleSuffix:r,className:i}=e;return(0,l.jsxs)("div",{className:(0,c.cn)("flex flex-col gap-1.5",i),children:[(0,l.jsxs)("span",{className:"text-label-14 flex items-center justify-between gap-2 font-medium",children:[t,r]}),(0,l.jsx)("span",{className:"text-label-14 text-gray-500",children:n})]})}e.s(["PopoverHeading",()=>u],662429);var d=e.i(297239);function p(e){let{chatId:l,projectId:c}=e,p=(0,d.useT)(),h=(0,a.getGitSyncAtoms)(l,c),f=(0,o.useAtomValue)(h.asyncActionLoading),{handleSignInToGitHub:m}=(0,i.useAsyncGitSyncActions)({chatId:l,projectId:c}),g="sign-in"===f;function v(e){e.preventDefault(),m()}return(0,t.jsxs)("form",{id:"sign-in-form",onSubmit:v,children:[(0,t.jsx)(r.PopoverContent,{children:(0,t.jsx)(u,{title:p("gitSync.signIn.title"),children:p("gitSync.signIn.description")})}),(0,t.jsx)(r.PopoverActions,{children:(0,t.jsx)(n.Button,{size:"sm",type:"submit",disabled:g,children:(0,t.jsx)(s.ActionStatus,{isLoading:g,loading:p("gitSync.signIn.signingIn"),children:p("gitSync.signIn.signInButton")})})})]})}e.s(["InstallAppStage",()=>w],957388);var h=t,f=n,m=r,g=i,v=a,x=o,y=s,b=d;function w(e){let{chatId:t,projectId:n}=e,r=(0,b.useT)(),i=(0,v.getGitSyncAtoms)(t,n),a=(0,x.useAtomValue)(i.asyncActionLoading),{handleConnectAppGitHub:o}=(0,g.useAsyncGitSyncActions)({chatId:t,projectId:n}),s="install-app"===a;function l(e){e.preventDefault(),o()}return(0,h.jsxs)("form",{id:"install-app-form",onSubmit:l,children:[(0,h.jsx)(m.PopoverContent,{children:(0,h.jsx)(u,{title:r("gitSync.installApp.title"),children:r("gitSync.installApp.description")})}),(0,h.jsx)(m.PopoverActions,{children:(0,h.jsx)(f.Button,{size:"sm",type:"submit",disabled:s,children:(0,h.jsx)(y.ActionStatus,{isLoading:s,loading:r("gitSync.installApp.installingApp"),children:r("gitSync.installApp.installVercelApp")})})})]})}e.s(["CreateRepoStage",()=>H],54149);var j=t,C=n,k=e.i(763480),S=e.i(707974),N=r,E=i,M=a,I=o,D=s,T=e.i(491341),A=e.i(592258),L=e.i(698047),P=e.i(138471),R=e.i(517953),_=d,O=e.i(32170),F=e.i(667660),V=e.i(538553),B=e.i(584497),z=e.i(858269);function H(e){var t;let{chatId:n,projectId:r}=e,i=(0,_.useT)(),{user:a}=(0,O.useUser)(),{activeScope:o,hasVercelWritePermission:s}=(0,F.useActiveScope)(),l=(0,M.getGitSyncAtoms)(n,r),c=(0,M.getGitSyncActions)(n),d=(0,I.useAtomValue)(l.asyncActionLoading),p=(0,I.useAtomValue)(l.createRepoNameError),h=(0,I.useAtomValue)(l.selectedGitNamespaceName),f=(0,I.useAtomValue)(l.disableAsyncAction),{handleCreateRepo:m,handleConnectAppGitHub:g}=(0,E.useAsyncGitSyncActions)({chatId:n,projectId:r}),{userNamespace:v,orgNamespaces:x}=(0,I.useAtomValue)(l.gitNamespaces),y="create-repo"===d,b=null==x?void 0:x.some(e=>e.slug===h),w=(null==a?void 0:a.scopeVercelPlan)==="hobby",H=b&&w,{project:U}=(0,B.useChatMetadata)(n),q=(null==U?void 0:U.name)?"v0-".concat((0,z.default)(U.name)):"",W=(0,I.useAtomValue)(l.createRepoName)||q,Z=e=>{c.setCreateRepoName(e.target.value)},G=e=>{c.setSelectedGitNamespaceName(e)};function K(e){e.preventDefault(),s&&m()}let X=(0,j.jsx)(T.default,{href:"https://docs.github.com/en/repositories/creating-and-managing-repositories/about-repositories",className:"text-blue-700 hover:underline",target:"_blank",children:i("gitSync.createRepo.privateRepository")});return(0,j.jsxs)("form",{id:"create-repo-form",onSubmit:K,children:[(0,j.jsxs)(N.PopoverContent,{children:[(0,j.jsx)(u,{title:i("gitSync.createRepo.title"),children:i("gitSync.createRepo.description")(X)}),(0,j.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,j.jsxs)(N.InputRow,{children:[(0,j.jsx)(S.Label,{children:i("gitSync.createRepo.gitScope")}),(0,j.jsxs)(A.Select,{value:null!=h?h:"",disabled:y||!s,onValueChange:e=>G(e),children:[(0,j.jsx)(V.RbacTooltip,{show:!s,requiredRole:"V0Builder",children:(0,j.jsx)(A.SelectTrigger,{className:"h-8 transition-colors hover:bg-gray-100 px-2",children:(0,j.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,j.jsx)(L.LogoGithub,{}),null!=h?h:i("gitSync.createRepo.selectGitScope")]})})}),(0,j.jsxs)(A.SelectContent,{children:[v&&(0,j.jsx)(A.SelectItem,{value:v.slug,iconOnRight:!0,className:"pl-2",children:(0,j.jsxs)("div",{className:"flex items-center gap-2",children:[(0,j.jsx)(L.LogoGithub,{className:"h-4 w-4"}),v.name]})}),null==x?void 0:x.map(e=>{let t=e.name||e.slug;return(0,j.jsx)(A.SelectItem,{value:e.slug,iconOnRight:!0,className:"pl-2",children:(0,j.jsxs)("div",{className:"flex items-center gap-2",children:[(0,j.jsx)(L.LogoGithub,{className:"h-4 w-4"}),t]})},e.id)}),(0,j.jsx)(A.SelectSeparator,{}),(0,j.jsx)("div",{className:"relative flex w-full cursor-pointer select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-hidden hover:bg-accent hover:text-accent-foreground",onClick:()=>{g()},children:(0,j.jsxs)("div",{className:"flex items-center gap-2",children:[(0,j.jsx)(P.Plus,{size:14}),"Add GitHub Account"]})})]})]})]}),!H&&(0,j.jsxs)(N.InputRow,{children:[(0,j.jsx)(S.Label,{htmlFor:"create-repo-name",children:i("gitSync.createRepo.repositoryName")}),(0,j.jsx)(V.RbacTooltip,{show:!s,requiredRole:"V0Builder",children:(0,j.jsx)(k.Input,{id:"create-repo-name",size:"sm",className:"rounded-md",placeholder:i("gitSync.createRepo.repoPlaceholder"),defaultValue:W||"",onChange:Z,disabled:y||!s,error:p})})]}),H&&(0,j.jsxs)("div",{className:"flex flex-row gap-3 items-center justify-center bg-amber-50 rounded-md p-2 text-amber-900",children:[(0,j.jsx)(R.Warning,{size:16,className:"shrink-0"}),(0,j.jsx)("div",{className:"flex flex-col gap-1.5",children:(0,j.jsxs)("span",{className:"text-label-14",children:["Connecting to a private GitHub Organization requires a"," ",(0,j.jsx)("a",{href:"https://vercel.com/docs/plans/pro",className:"underline",children:"Vercel Pro plan"}),". Switch to a different team, or upgrade"," ",(0,j.jsx)("span",{className:"font-medium",children:null!=(t=null==o?void 0:o.name)?t:"your current team"})," ","to a Vercel Pro plan to continue."]})})]})]})]}),!H&&(0,j.jsx)(N.PopoverActions,{children:(0,j.jsx)(V.RbacTooltip,{show:!s,requiredRole:"V0Builder",children:(0,j.jsx)(C.Button,{size:"sm",type:"submit",form:"create-repo-form",disabled:y||!W||f||!s,children:(0,j.jsx)(D.ActionStatus,{isLoading:y,loading:i("gitSync.createRepo.creatingRepository"),children:i("gitSync.createRepo.createRepositoryButton")})})})})]})}e.s(["CreateBranchStage",()=>eL],339682);var U=t,q=o,W=n,Z=r,G=a,K=k,X=s,$=i,Y=e.i(200407);e.s(["BranchSettingsButton",()=>eI,"CancelIntentButton",()=>eD,"CreateBranchButton",()=>eM,"LinkOutToRepoButton",()=>eS,"PullChangesButton",()=>eE,"PushChangesButton",()=>eN],409267);var J=t,Q=a;e.i(675120);var ee=n,et=e.i(762585),en=e.i(605528);let er=(0,en.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M8.74999 1.75V1H7.24999V1.75V12.4393L3.28032 8.46967L2.74999 7.93934L1.68933 9L2.21966 9.53033L7.29288 14.6036C7.68341 14.9941 8.31657 14.9941 8.7071 14.6036L13.7803 9.53033L14.3107 9L13.25 7.93934L12.7197 8.46967L8.74999 12.4393V1.75Z" fill="currentColor"/>');var ei=e.i(102427);let ea=(0,en.withNewIcon)('<path fill="currentColor" fill-rule="evenodd" d="M10 0a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h.854a5.25 5.25 0 0 1-3.969 3.175 3.006 3.006 0 0 0-2.135-2.08V1h-1.5V9.095a3.001 3.001 0 1 0 3.671 3.592A6.75 6.75 0 0 0 12.447 8H14a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2h-4Zm.25 3.375h-.625v1.25h1.75v1.75h1.25v-1.75h1.75v-1.25h-1.75v-1.75h-1.25v1.75H10.25ZM5.5 12a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z" clip-rule="evenodd"/>');e.i(596359),e.i(978036);var eo=e.i(392736);let es=(0,en.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M4 5.5C3.17157 5.5 2.5 4.82843 2.5 4C2.5 3.17157 3.17157 2.5 4 2.5C4.82843 2.5 5.5 3.17157 5.5 4C5.5 4.82843 4.82843 5.5 4 5.5ZM4.75 6.90549C6.04392 6.57245 7 5.39788 7 4C7 2.34315 5.65685 1 4 1C2.34315 1 1 2.34315 1 4C1 5.39788 1.95608 6.57245 3.25 6.90549V14.25V15H4.75V14.25V6.90549ZM9.5 3.25H8.75V4.75H9.5H11C11.1381 4.75 11.25 4.86193 11.25 5V9.09451C9.95608 9.42754 9 10.6021 9 12C9 13.6569 10.3431 15 12 15C13.6569 15 15 13.6569 15 12C15 10.6021 14.0439 9.42754 12.75 9.09451V5C12.75 4.0335 11.9665 3.25 11 3.25H9.5ZM10.5 12C10.5 12.8284 11.1716 13.5 12 13.5C12.8284 13.5 13.5 12.8284 13.5 12C13.5 11.1716 12.8284 10.5 12 10.5C11.1716 10.5 10.5 11.1716 10.5 12Z" fill="currentColor"/>');var el=P,ec=e.i(250767);let eu=(0,en.withNewIcon)('<path clip-rule="evenodd" d="M4.25 0C3.00736 0 2 1.00736 2 2.25V11V11.25V11.5C2 12.5252 2.61705 13.4062 3.5 13.792V11.5V11.25V11C3.5 10.4477 3.94772 10 4.5 10H12.5V11.2305V12.5H10.5V14H12.5H14V12.5V11.2305V10V8.5V0.75V0H13.25H4.25ZM12.5 8.5V1.5H4.25C3.83579 1.5 3.5 1.83579 3.5 2.25V8.70802C3.80623 8.57422 4.14445 8.5 4.5 8.5H12.5ZM5.5 11.5C5.22386 11.5 5 11.7239 5 12V16L7 14.75L9 16V12C9 11.7239 8.77614 11.5 8.5 11.5H5.5Z" fill="currentColor" fill-rule="evenodd" />');var ed=o,ep=Y;e.i(563948),e.i(407562);var eh=T,ef=e.i(53223),em=e.i(966848),eg=e.i(556355),ev=e.i(435433),ex=i,ey=e.i(707827),eb=Y;function ew(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{delay:t=200,disabled:n=!1}=e,[r,i]=(0,eb.useState)(n?0:-1),a=(0,eb.useRef)(null),o=()=>{a.current&&(clearTimeout(a.current),a.current=null)};return(0,eb.useEffect)(()=>(o(),a.current=setTimeout(()=>i(0),t),o),[]),{tabIndex:r}}var ej=s,eC=d,ek=e.i(996174);function eS(e){let{projectId:t,chatId:n}=e,r=(0,Q.getGitSyncAtoms)(n,t),i=(0,ed.useAtomValue)(r.currentBranch),{git:a}=(0,ed.useAtomValue)(r.externalChatMeta),o=()=>{(null==a?void 0:a.ownerName)&&a.repoName&&(0,ef.track)("GitSyncViewRepository",{chatId:n,repoName:a.repoName,ownerName:a.ownerName,branch:i||"main"})};return a?(0,J.jsx)(ee.Button,{size:"sm",variant:"secondary",asChild:!0,type:"button",children:(0,J.jsxs)(eh.default,{href:"https://github.com/".concat(a.ownerName,"/").concat(a.repoName).concat(i&&"main"!==i?"/tree/".concat(i):""),className:"group justify-start font-normal",target:"_blank",onClick:o,children:[(0,J.jsxs)("div",{className:"flex items-center gap-2 truncate",children:[(0,J.jsx)(eu,{}),(0,J.jsx)("span",{className:"truncate",children:"".concat(a.ownerName,"/").concat(a.repoName)})]}),(0,J.jsx)(eo.External,{className:"min-w-[16px] opacity-0 transition-opacity group-focus-within:opacity-100 group-hover:opacity-100 group-focus:opacity-100"})]})}):(0,J.jsx)(et.Skeleton,{className:"h-4 w-full"})}function eN(e){let{chatId:t,projectId:n}=e,r=(0,eC.useT)(),i=(0,Q.getGitSyncAtoms)(t,n),a=(0,ed.useAtomValue)(i.currentBranch),{handlePushToBranch:o}=(0,ex.useAsyncGitSyncActions)({chatId:t,projectId:n}),s=(0,ed.useAtomValue)(i.asyncActionLoading),l="pushing-to-branch"===s,c=()=>{a&&o(a)};return(0,J.jsx)(ee.Button,{size:"sm",variant:"secondary",disabled:!!(l||s),className:"flex-1",onClick:c,children:(0,J.jsx)(ej.ActionStatus,{isLoading:l,loading:r("gitSync.actions.pushing"),children:r("gitSync.actions.pushChanges")})})}function eE(e){let{chatId:t,projectId:n}=e,r=(0,eC.useT)(),i=(0,Q.getGitSyncAtoms)(t,n),a=(0,ed.useAtomValue)(i.currentBranch),{handleSyncToBranch:o}=(0,ex.useAsyncGitSyncActions)({chatId:t,projectId:n}),s=(0,ed.useAtomValue)(i.asyncActionLoading),l=(0,ed.useAtomValue)(i.isRefreshingGitHead),c=(0,ed.useAtomValue)(i.upstreamSha),u="syncing-to-branch"===s,d=!!(u||s||l||!c),p=()=>{a&&o(a)};return(0,J.jsx)(ee.Button,{size:"sm",variant:"secondary",disabled:d,className:"flex-1",onClick:p,children:(0,J.jsx)(ej.ActionStatus,{isLoading:u,loading:r("gitSync.actions.pulling"),children:r("gitSync.actions.pullChanges")})})}function eM(e){let{chatId:t,projectId:n,label:r,branchIcon:i,delayFocus:a,variant:o="secondary",className:s}=e,l=(0,eC.useT)(),c=(0,Q.getGitSyncAtoms)(t,n),u=(0,Q.getGitSyncActions)(t),d=(0,ed.useAtomValue)(c.asyncActionLoading),{tabIndex:p}=ew({disabled:!a}),h=(0,Q.isInState)(d,["creating-branch","syncing-to-branch","pushing-to-branch","switching-branch"]);return(0,J.jsx)(ee.Button,{size:"sm",tooltip:r?void 0:l("gitSync.actions.createNewBranch"),variant:o,disabled:h,type:"button",className:s,tabIndex:p,onClick:()=>u.setStageIntent("create-branch"),children:r?(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(ec.PlusCircle,{}),r]}):i?(0,J.jsx)(ea,{}):(0,J.jsx)(el.Plus,{})})}function eI(e){let{chatId:t,projectId:n,variant:r="secondary",delayFocus:i=!1}=e,a=(0,eC.useT)(),o=(0,Q.getGitSyncAtoms)(t,n),{git:s}=(0,ed.useAtomValue)(o.externalChatMeta),l=(0,ed.useAtomValue)(o.asyncActionLoading),c=(0,ed.useAtomValue)(o.disableAsyncAction),u=(0,ed.useAtomValue)(o.currentBranch),{tabIndex:d}=ew({disabled:!i}),p=!!(l||c),[h,f]=(0,ep.useState)(!1),m=null==s?void 0:s.gitAutoCommitPush,g=null==s?void 0:s.gitAutoPull,v=!(null==s?void 0:s.gitConnected),{handleUpdateBranchConnection:x,handleToggleAutoCommit:y,handleToggleAutoPull:b}=(0,ex.useAsyncGitSyncActions)({chatId:t,projectId:n}),w=e=>{e.preventDefault(),s&&y(!m).finally(()=>{f(!1)})},j=e=>{e.preventDefault(),s&&b(!g).finally(()=>{f(!1)})},C=e=>{e.preventDefault(),x(!1).finally(()=>{f(!1)})};return(0,J.jsxs)(eg.DropdownMenu,{open:h,onOpenChange:f,children:[(0,J.jsx)(eg.DropdownMenuTrigger,{asChild:!0,children:(0,J.jsx)(ee.Button,{size:"sm",variant:r,type:"button",tooltipDirection:"bottom",tooltip:a("gitSync.actions.branchOptions"),tabIndex:d,children:(0,J.jsx)(eT,{})})}),(0,J.jsx)(eg.DropdownMenuContent,{align:"end",className:"w-[200px] *:cursor-pointer",side:"bottom",sideOffset:8,children:(0,J.jsxs)(em.MenuGroup,{children:[(0,J.jsx)(ek.Tooltip,{content:(null==s?void 0:s.onProductionBranch)?a("gitSync.actions.autoPullDisabledTooltip"):void 0,children:(0,J.jsx)("div",{children:(0,J.jsx)(em.MenuItem,{onSelect:j,disabled:(null==s?void 0:s.onProductionBranch)||p,children:(null==s?void 0:s.onProductionBranch)?(0,J.jsx)(em.MenuItemContent,{label:a("gitSync.actions.autoPullDisabled"),Icon:(0,J.jsx)(er,{})}):(0,J.jsx)(em.MenuItemContent,{label:a("toggle-auto-pull"===l?"gitSync.actions.updatingAutoPull":(null==s?void 0:s.gitAutoPull)?"gitSync.actions.disableAutoPull":"gitSync.actions.enableAutoPull"),Icon:"toggle-auto-pull"===l?(0,J.jsx)(ey.Spinner,{size:16}):(0,J.jsx)(er,{})})})})}),(0,J.jsx)(ek.Tooltip,{content:(null==s?void 0:s.onProductionBranch)?a("gitSync.actions.autoCommitDisabledTooltip"):void 0,children:(0,J.jsx)("div",{children:(0,J.jsx)(em.MenuItem,{onSelect:w,disabled:(null==s?void 0:s.onProductionBranch)||p,children:(null==s?void 0:s.onProductionBranch)?(0,J.jsx)(em.MenuItemContent,{label:a("gitSync.actions.autoCommitDisabled"),Icon:(0,J.jsx)(ei.ArrowUp,{})}):(0,J.jsx)(em.MenuItemContent,{label:a("toggle-auto-commit"===l?"gitSync.actions.updatingAutoCommit":(null==s?void 0:s.gitAutoCommitPush)?"gitSync.actions.disableAutoCommit":"gitSync.actions.enableAutoCommit"),Icon:"toggle-auto-commit"===l?(0,J.jsx)(ey.Spinner,{size:16}):(0,J.jsx)(ei.ArrowUp,{})})})})}),(0,J.jsx)(em.MenuItem,{disabled:v||!u||p,onSelect:C,children:(0,J.jsx)(em.MenuItemContent,{label:a("updating-branch-connection"===l?"gitSync.actions.unlinkingBranch":"gitSync.actions.unlinkBranch"),Icon:"updating-branch-connection"===l?(0,J.jsx)(ey.Spinner,{size:16}):(0,J.jsx)(ev.Unlink,{})})}),s&&!s.onProductionBranch?(0,J.jsx)(em.MenuItem,{onSelect:()=>window.open("https://github.com/".concat(s.ownerName,"/").concat(s.repoName,"/pull/new/").concat(u),"_blank"),children:(0,J.jsx)(em.MenuItemContent,{label:a("gitSync.actions.createPullRequest"),Icon:(0,J.jsx)(es,{})})}):null]})})]})}function eD(e){let{chatId:t,disabled:n,children:r}=e,i=(0,eC.useT)(),a=(0,Q.getGitSyncActions)(t);return(0,J.jsx)(ee.Button,{size:"sm",variant:"secondary",type:"button",onClick:()=>a.setStageIntent(null),disabled:n,children:null!=r?r:i("gitSync.cancel")})}let eT=(0,e.i(751660).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M10.75 5.25C11.5784 5.25 12.25 4.57843 12.25 3.75C12.25 2.92157 11.5784 2.25 10.75 2.25C9.92157 2.25 9.25 2.92157 9.25 3.75C9.25 4.57843 9.92157 5.25 10.75 5.25ZM10.75 6.75C12.1479 6.75 13.3225 5.79392 13.6555 4.5H15.25H16V3H15.25H13.6555C13.3225 1.70608 12.1479 0.75 10.75 0.75C9.35212 0.75 8.17754 1.70608 7.84451 3H0.75H0V4.5H0.75H7.84451C8.17754 5.79392 9.35212 6.75 10.75 6.75ZM15.25 13H16V11.5H15.25L8.15549 11.5C7.82245 10.2061 6.64788 9.25 5.25 9.25C3.85212 9.25 2.67755 10.2061 2.34451 11.5H0.75H0V13H0.75H2.34451C2.67755 14.2939 3.85212 15.25 5.25 15.25C6.64788 15.25 7.82246 14.2939 8.15549 13L15.25 13ZM3.75 12.25C3.75 11.4216 4.42157 10.75 5.25 10.75C6.07843 10.75 6.75 11.4216 6.75 12.25C6.75 13.0784 6.07843 13.75 5.25 13.75C4.42157 13.75 3.75 13.0784 3.75 12.25Z" fill="currentColor"/>');var eA=d;function eL(e){let{chatId:t,projectId:n}=e,r=(0,eA.useT)(),i=(0,G.getGitSyncAtoms)(t,n),a=(0,G.getGitSyncActions)(t),o=(0,q.useAtomValue)(i.currentBranch),s=(0,q.useAtomValue)(i.createBranchName),l=(0,q.useAtomValue)(i.createBranchNameError),c=(0,q.useAtomValue)(i.asyncActionLoading),d=(0,q.useAtomValue)(i.disableAsyncAction),{handleCreateBranch:p,handlePushToBranch:h}=(0,$.useAsyncGitSyncActions)({chatId:t,projectId:n}),f="creating-branch"===c||"pushing-to-branch"===c,m=(0,q.useAtomValue)(i.isAbleToCreateBranch),g=(0,Y.useRef)(null);function v(e){e.preventDefault(),o?p():s?h(s):a.setCreateBranchNameError(r("gitSync.createBranch.enterBranchName"))}(0,Y.useEffect)(()=>{g.current&&g.current.focus()},[]);let x=(0,Y.useMemo)(()=>o?r("gitSync.createBranch.forkDescription"):r("gitSync.createBranch.createDescription"),[r]);return(0,U.jsxs)("form",{id:"create-branch-form",onSubmit:v,children:[(0,U.jsxs)(Z.PopoverContent,{children:[(0,U.jsx)(u,{title:r("gitSync.createBranch.title"),children:x}),(0,U.jsx)(K.Input,{value:s||"",onChange:e=>a.updateCreateBranchName(e.target.value),placeholder:r("gitSync.createBranch.placeholder"),size:"sm",disabled:f,error:l,ref:g})]}),(0,U.jsxs)(Z.PopoverActions,{children:[(0,U.jsx)(eD,{chatId:t,disabled:f}),(0,U.jsx)(W.Button,{type:"submit",size:"sm",disabled:!m||f||d,children:(0,U.jsx)(X.ActionStatus,{isLoading:f,loading:r("gitSync.createBranch.creatingBranch"),children:r("gitSync.createBranch.createBranchButton")})})]})]})}},184645,492285,261883,158510,270978,e=>{"use strict";e.s(["GitSyncButton",()=>tv],184645);var t=e.i(832520),n=e.i(200407),r=e.i(780292),i=e.i(574768),a=e.i(407705),o=e.i(194465),s=t,l=r,c=e.i(675120),u=n,d=a,p=e.i(241489),h=e.i(957388),f=e.i(54149),m=e.i(339682),g=t,v=e.i(978918),x=e.i(707974),y=a,b=r,w=e.i(612161),j=e.i(889800),C=e.i(548866),k=n,S=t,N=n,E=e.i(608142),M=e.i(418565),I=e.i(250767),D=e.i(176248),T=e.i(304649),A=t,L=n,P=e.i(596359),R=e.i(605528);let _=(0,R.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M3.5 7C3.5 5.067 5.067 3.5 7 3.5C8.933 3.5 10.5 5.067 10.5 7C10.5 7.88461 10.1718 8.69256 9.63058 9.30876L9.30876 9.63058C8.69256 10.1718 7.88461 10.5 7 10.5C5.067 10.5 3.5 8.933 3.5 7ZM9.96544 11.0261C9.13578 11.6382 8.11014 12 7 12C4.23858 12 2 9.76142 2 7C2 4.23858 4.23858 2 7 2C9.76142 2 12 4.23858 12 7C12 8.11014 11.6382 9.13578 11.0261 9.96544L14.0303 12.9697L14.5607 13.5L13.5 14.5607L12.9697 14.0303L9.96544 11.0261Z" fill="currentColor"/>');e.s(["MagnifyingGlassSmall",0,_],492285);var O=w,F=e.i(940393),V=T,B=e.i(758118),z=e.i(365290),H=e.i(762585),U=c;let q="flex h-7 items-center gap-2 duration-0 ";function W(e){let{items:t,getItemId:n,getItemValue:r,selectedItemId:i,error:a,renderItem:o,onItemSelect:s,placeholder:l="Search...",emptyState:c="No items found",children:u,loading:d,childClassName:p,height:h=128,filterFunction:f,hideListWhenEmpty:m,searchTerm:g,onSearchChange:v,className:x,disabled:y=!1}=e,[b,w]=(0,L.useState)(""),j=void 0!==g?g:b,C=e=>{v?v(e):w(e)},k=j?t.filter(e=>f?f(e,j):r(e).toLowerCase().includes(j.toLowerCase())):t,S=0===k.length,N=!!(m&&S&&!d);return(0,A.jsxs)(F.Command,{className:(0,V.cn)("text-label-14 flex flex-col",x),children:[(0,A.jsx)(F.CommandInput,{placeholder:l,onValueChange:C,value:j,className:"h-10",divClassName:"px-3 gap-2",disabled:y,icon:(0,A.jsx)(_,{})}),(0,A.jsx)("div",{className:"relative flex flex-col overflow-hidden",style:{height:N?0:h,...(0,B.visibleStylesIf)(!N),...(0,z.transitionStyles)(["height"])},children:d?(0,A.jsx)(F.CommandList,{tabIndex:-1,className:"overflow-y-hidden",children:(0,A.jsx)(F.CommandGroup,{children:(0,A.jsx)("div",{className:"flex h-full flex-col items-center justify-center mask-[linear-gradient(to_bottom,black,transparent)]",children:Array.from({length:6}).map((e,t)=>{let n=[50,70,90][t%3];return(0,A.jsx)("div",{className:(0,V.cn)("w-full",q),children:(0,A.jsx)(H.Skeleton,{className:"h-4",style:{width:"".concat(n,"%")}})},t)})})})}):(0,A.jsxs)(F.CommandList,{tabIndex:-1,children:[(0,A.jsx)("div",{className:(0,V.cn)("bg-muted border-alpha-200 absolute inset-2 flex items-center justify-center overflow-hidden rounded-md border p-2 text-gray-500",a&&"bg-red-50 text-red-700"),style:{transform:S?"scale(1)":"scale(0.95)",...(0,B.visibleStylesIf)(S),...(0,z.transitionStyles)(["opacity","transform"],{delay:50*!!S,duration:200*!!S})},children:a?(0,A.jsxs)("span",{className:"flex flex-col items-center gap-2 overflow-hidden text-center",children:[(0,A.jsx)(O.Stop,{})," ",(0,A.jsx)("span",{className:"line-clamp-3 text-ellipsis",children:a})]}):c}),(0,A.jsx)(F.CommandGroup,{className:"overflow-y-scroll",children:k.map(e=>{let t=n(e),a=i===t;return(0,A.jsxs)(F.CommandItem,{value:r(e),onSelect:()=>{y||s(e)},className:(0,V.cn)(q,y&&"pointer-events-none opacity-50"),children:[(0,A.jsx)("span",{className:"truncate",children:o(e,a)}),a&&(0,A.jsx)(P.Check,{className:"ml-auto h-4 w-4 shrink-0"})]},t)})})]})}),(0,A.jsx)(U.TransitionNode,{renderKey:"".concat(!!u),childClassName:"overflow-hidden",children:u?(0,A.jsx)("div",{className:(0,V.cn)("border-t border-gray-200 p-2",N&&"border-transparent",p),children:u}):null})]})}var Z=t,G=i,K=e.i(990131),X=e.i(70165),$=T;function Y(e){let{open:t,onOpenChange:n,trigger:r,children:i,contentClassName:a,drawerClassName:o="h-fit",forceMobile:s,popoverContentProps:l,drawerContentProps:c}=e,u=(0,X.useIsMobile)();return(void 0!==s?s:u)?(0,Z.jsxs)(K.Drawer,{open:t,onOpenChange:n,children:[(0,Z.jsx)(K.DrawerTrigger,{asChild:!0,children:r}),(0,Z.jsx)(K.DrawerContent,{className:(0,$.cn)(o),...c,children:i})]}):(0,Z.jsxs)(G.Popover,{open:t,onOpenChange:n,children:[(0,Z.jsx)(G.PopoverTrigger,{asChild:!0,children:r}),(0,Z.jsx)(G.PopoverContent,{className:(0,$.cn)("p-0",a),align:"start",sideOffset:4,...l,children:i})]})}var J=e.i(331968),Q=a,ee=r;e.i(472428);var et=e.i(152641);e.i(563948);var en=e.i(407562),er=c,ei=e.i(297239);function ea(e){var t;let{chatId:n,projectId:r,onBranchSelect:i}=e,a=(0,ei.useT)(),[o,s]=(0,N.useState)(!1),[l,c]=(0,N.useState)(""),u=(0,Q.getGitSyncAtoms)(n,r),d=(0,ee.useAtomValue)(u.selectedBranch),p=(0,ee.useAtomValue)(u.currentBranch),h=(0,ee.useAtomValue)(u.disableAsyncAction),{data:{git:f},isLoading:m}=(0,et.useServerQuerySWR)(["chat","externalMeta"],{chatId:n},{stopFetch:!0}),{data:g,isLoading:v}=(0,et.useServerQuerySWR)(["project","latestGit"],{projectId:r,branch:null!=p?p:void 0},{stopFetch:!0}),x=(0,Q.getGitSyncActions)(n),y=(0,ee.useAtomValue)(u.asyncActionLoading),b=(0,Q.isInState)(y,["creating-branch","syncing-to-branch","pushing-to-branch","switching-branch"]),w=m||v,j=(0,ee.useAtomValue)(u.allBranches),C=j.map((e,t)=>({id:String(t),name:e})),k=(0,N.useMemo)(()=>(0,J.sanitizeBranchName)(l),[l]),A=!j.some(e=>e.toLowerCase()===(null!=k?k:"").toLowerCase()),L=(0,N.useMemo)(()=>{if(g.error)return a("gitSync.branchSwitcher.failedToLoadBranches")},[g.error,a]),P=(0,S.jsxs)(D.Button,{variant:"outline",className:"min-h-8 flex-1 justify-between font-normal",role:"combobox",type:"button",size:"sm","aria-expanded":o,disabled:b||h,children:[(0,S.jsx)(er.TransitionNode,{...er.PRESETS.inputSwitch,children:(0,S.jsx)("span",{children:d||p&&(null==f?void 0:f.gitConnected)?(0,S.jsxs)("span",{className:"flex items-center gap-2",children:[(0,S.jsx)(M.GitBranch,{}),null!=d?d:p]}):(0,S.jsx)("span",{children:a("gitSync.branchSwitcher.selectBranch")})})}),(0,S.jsx)(E.ChevronDownSmall,{})]});function R(e){i(e),s(!1)}let _=e=>{c(e)};function O(){A?(x.setStageIntent("create-branch"),x.updateCreateBranchName(k)):en.toast.error(a("gitSync.branchSwitcher.branchNameAlreadyTaken"))}let F=(0,S.jsx)(W,{items:C,error:L,getItemId:e=>e.id,getItemValue:e=>{var t;return null!=(t=(0,J.sanitizeBranchName)(e.name))?t:""},selectedItemId:null==(t=C.find(e=>e.name===p))?void 0:t.id,loading:w,renderItem:e=>(0,S.jsx)(eo,{item:e}),onItemSelect:e=>{if(e.name===p)return void s(!1);R(e.name)},filterFunction:e=>{var t,n,r,i;return null!=(i=null==(n=(0,J.sanitizeBranchName)(e.name))?void 0:n.toLowerCase().includes(null!=(r=null==(t=(0,J.sanitizeBranchName)(l))?void 0:t.toLowerCase())?r:""))&&i},hideListWhenEmpty:!0,disabled:w||b,placeholder:a("gitSync.branchSwitcher.createOrSearchBranches"),childClassName:"p-1",emptyState:a("gitSync.branchSwitcher.noBranchesFound"),searchTerm:l,onSearchChange:_,children:A&&(0,S.jsxs)("button",{onClick:O,onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),O())},className:(0,T.cn)("flex h-8 w-full items-center gap-2 overflow-hidden rounded-[6px] px-2 text-blue-700 hover:bg-gray-100 focus:bg-gray-100 focus:outline-hidden "),tabIndex:0,role:"menuitem",children:[(0,S.jsx)(I.PlusCircle,{}),(0,S.jsxs)("div",{className:"flex flex-row gap-1",children:[(0,S.jsxs)("span",{className:"whitespace-nowrap text-gray-900",children:[(0,S.jsx)("span",{children:a("gitSync.branchSwitcher.create")}),(0,S.jsx)("span",{children:" "}),(0,S.jsx)("span",{children:!k&&a("gitSync.branchSwitcher.branch")})]}),(0,S.jsx)("span",{className:"truncate text-gray-500",children:k})]})]})});return(0,S.jsx)(Y,{open:o,onOpenChange:s,trigger:P,contentClassName:"w-(--radix-popover-trigger-width)",children:F})}function eo(e){let{item:t}=e;return(0,S.jsx)("div",{children:t.name})}function es(e){let{children:t,className:n}=e;return(0,S.jsx)("span",{className:(0,T.cn)("text-label-13-mono w-fit shrink-0 break-all rounded-md bg-gray-100 px-1.5 py-1",n),children:t})}var el=t,ec=e.i(89440),eu=T,ed=z,ep=n;let eh=(0,ec.cva)("flex h-4 w-4 items-center justify-center overflow-hidden rounded-full *:absolute *:rounded-full",{variants:{state:{queued:"[&>div]:bg-gray-100 [&>div]:group-hover:bg-gray-200  [&>span]:bg-gray-700",ready:"[&>div]:bg-blue-100 [&>div]:group-hover:bg-blue-200 [&>span]:bg-blue-600",error:"[&>div]:bg-red-100 [&>div]:group-hover:bg-red-200 [&>span]:bg-red-600",building:"[&>div]:bg-amber-100 [&>div]:group-hover:bg-amber-200 [&>span]:bg-amber-600",green:"[&>div]:bg-green-100 [&>div]:group-hover:bg-green-200 [&>span]:bg-green-600"}}});function ef(e){let{state:t="queued",className:n,stopPing:r=!1,...i}=e,[a,o]=(0,ep.useState)(!0);return(0,ep.useEffect)(()=>{r&&setTimeout(()=>o(!1),1e3)},[r]),(0,el.jsxs)("span",{...i,className:eh({state:t,className:n}),children:[(0,el.jsx)("div",{className:"h-4 w-4 transition-colors duration-200"}),(0,el.jsx)("span",{className:"h-2 w-2"}),(0,el.jsx)("span",{className:(0,eu.cn)("h-2 w-2 animate-ping",!a&&"animate-none"),style:{...(0,ed.transitionStyles)(["opacity"],{duration:1e3})}})]})}var em=e.i(350097),eg=c,ev=et,ex=H,ey=e.i(409267),eb=ei;function ew(e){let{chatId:t,projectId:n}=e,r=(0,eb.useT)(),i=(0,y.getGitSyncAtoms)(t,n),a=(0,y.getGitSyncActions)(t),{git:o}=(0,b.useAtomValue)(i.externalChatMeta),s=(0,b.useAtomValue)(i.currentBranch),l=(0,b.useAtomValue)(i.latestProjectGit),c=(0,b.useAtomValue)(i.timeSinceLastSync),u=(0,b.useAtomValue)(i.asyncActionLoading),d=(0,b.useAtomValue)(i.upstreamSha),{isLoading:p}=(0,ev.useServerQuerySWR)(["project","latestGit"],{projectId:n,branch:null!=s?s:void 0},{stopFetch:!0}),h="pushing-to-branch"===u;function f(e){a.setStageIntent("switch-branch-confirmation"),a.setSwitchBranchTarget(e)}let m=(0,k.useMemo)(()=>{var e,t;return l.error?{icon:(0,g.jsx)(ef,{state:"error",stopPing:!0}),title:r("gitSync.status.failedToLoadGitHub"),label:null!=(e=l.message)?e:""}:o?h||"syncing-to-branch"===u||"switching-branch"===u?{icon:(0,g.jsx)(ej,{}),title:h?r("gitSync.status.syncingToBranch"):r("gitSync.status.syncingChanges"),label:(0,g.jsx)(eC,{time:c})}:d&&!o.gitAutoPull?{icon:(0,g.jsx)(ef,{state:"building",stopPing:!0}),title:r("gitSync.status.upstreamChanges"),label:(0,g.jsx)(eC,{time:c})}:{icon:(0,g.jsx)(ef,{state:"green",stopPing:!0}),title:o.onProductionBranch?r("gitSync.status.connectedToGitHub"):r("gitSync.status.syncedToGitHub"),label:(0,g.jsx)(eC,{time:c})}:{icon:(0,g.jsx)(ef,{state:"error",stopPing:!0}),title:r("gitSync.status.notConnectedToGitHub"),label:null!=(t=l.message)?t:"."}},[l.error,l.message,o,h,u,d,r,c]);return o?(0,g.jsxs)(v.PopoverContent,{className:"gap-2.5 pt-2.5",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsx)("div",{className:"flex h-5 flex-1 items-center gap-2",children:p?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(ef,{state:"queued"}),(0,g.jsx)(ex.Skeleton,{className:"h-5",style:{minWidth:"70%"}})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(eg.TransitionNode,{...eg.PRESETS.buttonContent,enter:{scale:.5},children:m.icon}),(0,g.jsx)(eg.TransitionNode,{duration:.3,delay:.15,justify:"start",renderKey:m.title,children:(0,g.jsxs)("span",{className:"text-label-14 flex gap-2 whitespace-nowrap font-medium text-gray-900",children:[m.title,(0,g.jsx)("span",{className:"truncate font-normal text-gray-500",children:m.label})]})})]})}),(0,g.jsx)(ey.BranchSettingsButton,{chatId:t,projectId:n,variant:"ghost",delayFocus:!0})]}),(0,g.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,g.jsxs)(v.InputRow,{children:[(0,g.jsx)(x.Label,{children:r("gitSync.status.repository")}),(0,g.jsx)(ey.LinkOutToRepoButton,{chatId:t,projectId:n})]}),s?(0,g.jsxs)("div",{className:"flex flex-col",children:[(0,g.jsxs)(v.InputRow,{children:[(0,g.jsx)(x.Label,{children:r("gitSync.selectBranch.activeBranch")}),(0,g.jsxs)("div",{className:"flex items-center gap-2",children:[(0,g.jsx)(ea,{chatId:t,projectId:n,onBranchSelect:f}),(0,g.jsx)(ey.CreateBranchButton,{chatId:t,projectId:n,variant:"secondary"})]})]}),(0,g.jsx)(eg.TransitionNode,{...eg.PRESETS.popoverContent,children:!o.onProductionBranch&&o.gitAutoCommitPush&&o.gitAutoPull?(0,g.jsx)("div",{className:"text-label-13 flex items-center gap-1 pt-3 text-gray-500",children:r("gitSync.status.autoCommitInfo")}):(0,g.jsxs)("div",{className:"flex w-full items-center gap-2 pt-4",children:[!o.gitAutoPull||o.onProductionBranch?(0,g.jsx)(ey.PullChangesButton,{chatId:t,projectId:n}):null,!o.gitAutoCommitPush||o.onProductionBranch?(0,g.jsx)(ey.PushChangesButton,{chatId:t,projectId:n}):null]})})]}):null]})]}):(0,g.jsx)(C.EmptyState,{title:r("gitSync.status.notConnectedToGitHub"),icon:(0,g.jsx)(w.Stop,{}),variant:"error",children:r("gitSync.status.notConnectedDescription")})}function ej(){return(0,g.jsx)("div",{className:"flex h-4 w-4 items-center justify-center",children:(0,g.jsx)(j.RefreshClockwise,{className:"animate-spin ease-in-out",style:{animationDuration:"1.1s",animationTimingFunction:"cubic-bezier(.45,.04,.25,.99)"}})})}function eC(e){let{time:t,prefix:n}=e,r=(0,eb.useT)(),[i,a]=(0,k.useState)(0);(0,k.useEffect)(()=>{let e=setInterval(()=>{(null!=t?t:Date.now()>Date.now()-65e3)&&a(i+1)},200);return()=>clearInterval(e)},[t,i,a]);let o=null!=t?t:Date.now(),s=o>Date.now()-15e3;return(0,g.jsxs)("span",{children:[n,s?(0,g.jsx)("span",{children:r(n?"gitSync.status.justNow":"gitSync.status.justNowCapitalized")}):(0,em.timeAgo)(new Date(o),!0,Date.now(),!1)]})}var ek=t,eS=D,eN=w,eE=v,eM=C,eI=e.i(132666),eD=ei;function eT(e){let{chatId:t,projectId:n}=e,r=(0,eD.useT)(),{handleRetry:i,handleReport:a}=(0,eI.useAsyncGitSyncActions)({chatId:t,projectId:n});function o(e){e.preventDefault(),i()}return(0,ek.jsxs)("form",{id:"error-form",onSubmit:o,children:[(0,ek.jsx)(eE.PopoverContent,{children:(0,ek.jsx)(eM.EmptyState,{title:r("gitSync.error.title"),variant:"error",icon:(0,ek.jsx)(eN.Stop,{}),children:r("gitSync.error.description")})}),(0,ek.jsxs)(eE.PopoverActions,{children:[(0,ek.jsx)(eS.Button,{size:"sm",onClick:a,type:"button",variant:"secondary",children:r("gitSync.error.report")}),(0,ek.jsx)(eS.Button,{size:"sm",type:"submit",children:r("gitSync.error.reload")})]})]})}var eA=t,eL=v,eP=e.i(662429),eR=x,e_=eI,eO=D,eF=a,eV=r,eB=e.i(607391),ez=en,eH=ey,eU=n,eq=ei;function eW(e){let{chatId:t,projectId:n}=e,r=(0,eq.useT)(),i=(0,eF.getGitSyncAtoms)(t,n),a=(0,eV.useAtomValue)(i.selectedBranch),o=(0,eF.getGitSyncActions)(t),{branches:s}=(0,eV.useAtomValue)(i.latestProjectGit),{handleSyncToBranch:l}=(0,e_.useAsyncGitSyncActions)({chatId:t,projectId:n}),c=(0,eV.useAtomValue)(i.asyncActionLoading),u=(0,eV.useAtomValue)(i.disableAsyncAction),d=(0,eF.isInState)(c,["syncing-to-branch","pushing-to-branch","switching-branch","updating-branch-connection"]),p="syncing-to-branch"===c;function h(e){if(e.preventDefault(),!a)return void ez.toast.error(r("gitSync.selectBranch.pleaseSelectBranch"));l(a).then(()=>{o.setSelectedBranch(null)})}return(0,eU.useEffect)(()=>{(null==s?void 0:s.length)===1&&o.setSelectedBranch(s[0].name)},[o,s]),(0,eA.jsxs)("form",{id:"sync-to-branch-form",onSubmit:h,children:[(0,eA.jsxs)(eL.PopoverContent,{children:[(0,eA.jsx)(eP.PopoverHeading,{title:r("gitSync.selectBranch.title"),children:r("gitSync.selectBranch.description")}),(0,eA.jsxs)(eL.InputRow,{children:[(0,eA.jsx)(eR.Label,{children:r("gitSync.selectBranch.projectRepository")}),(0,eA.jsx)(eH.LinkOutToRepoButton,{chatId:t,projectId:n})]}),(0,eA.jsxs)(eL.InputRow,{children:[(0,eA.jsx)(eR.Label,{children:r("gitSync.selectBranch.activeBranch")}),(0,eA.jsxs)("span",{className:"flex items-center gap-2",children:[(0,eA.jsx)(ea,{chatId:t,projectId:n,onBranchSelect:e=>o.setSelectedBranch(e)}),(0,eA.jsx)(eH.CreateBranchButton,{chatId:t,projectId:n,branchIcon:!0})]})]})]}),(0,eA.jsx)(eL.PopoverActions,{children:(0,eA.jsx)(eO.Button,{size:"sm",disabled:!a||d||u,type:"submit",children:(0,eA.jsx)(eB.ActionStatus,{isLoading:p,loading:r("gitSync.selectBranch.settingActiveBranch"),children:r("gitSync.selectBranch.setActiveBranch")})})})]})}var eZ=t,eG=v,eK=eI,eX=D,e$=a,eY=r,eJ=eB,eQ=ey,e0=eP,e1=x,e2=e.i(491341),e5=n,e4=ei;function e3(e){let{chatId:t,projectId:n}=e,r=(0,e4.useT)(),i=(0,e$.getGitSyncAtoms)(t,n),{git:a}=(0,eY.useAtomValue)(i.externalChatMeta),o=(0,eY.useAtomValue)(i.currentBranch),s=(0,e5.useRef)(o).current,l=(0,eY.useAtomValue)(i.switchBranchTarget),{handleSwitchBranch:c}=(0,eK.useAsyncGitSyncActions)({chatId:t,projectId:n}),u="switching-branch"===(0,eY.useAtomValue)(i.asyncActionLoading);function d(e){e.preventDefault(),c()}if(!s||!l)return(0,eZ.jsxs)(eZ.Fragment,{children:[(0,eZ.jsx)(eG.PopoverContent,{children:(0,eZ.jsx)(e0.PopoverHeading,{title:r("gitSync.switchBranch.title"),children:r("gitSync.switchBranch.noBranchFound")})}),(0,eZ.jsx)(eG.PopoverActions,{children:(0,eZ.jsx)(eQ.CancelIntentButton,{chatId:t,children:r("gitSync.switchBranch.okay")})})]});let p=e=>a?"https://github.com/".concat(a.ownerName,"/").concat(a.repoName,"/tree/").concat(e):"#";return(0,eZ.jsxs)("form",{id:"switch-branch-form",onSubmit:d,children:[(0,eZ.jsxs)(eG.PopoverContent,{children:[(0,eZ.jsx)(e0.PopoverHeading,{title:r("gitSync.switchBranch.title"),children:r("gitSync.switchBranch.description")}),(0,eZ.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,eZ.jsx)(e7,{title:r("gitSync.switchBranch.currentBranch"),branch:s,href:p(s)}),(0,eZ.jsx)("span",{className:"w-full border-t border-gray-200"}),(0,eZ.jsx)(e7,{title:r("gitSync.switchBranch.newBranch"),branch:l,href:p(l)})]})]}),(0,eZ.jsxs)(eG.PopoverActions,{children:[(0,eZ.jsx)(eQ.CancelIntentButton,{chatId:t,disabled:u}),(0,eZ.jsx)(eX.Button,{size:"sm",disabled:u,type:"submit",children:(0,eZ.jsx)(eJ.ActionStatus,{isLoading:u,loading:r("gitSync.switchBranch.switchingBranch"),children:r("gitSync.switchBranch.switchBranchButton")})})]})]})}function e7(e){let{title:t,branch:n,href:r}=e;return(0,eZ.jsxs)("div",{className:"flex w-full items-center justify-between gap-2",children:[(0,eZ.jsx)(e1.Label,{className:"whitespace-nowrap",children:t}),(0,eZ.jsx)(e2.default,{href:r,target:"_blank",className:"decoration-gray-400 hover:underline",children:(0,eZ.jsx)(es,{children:n})})]})}var e9=e.i(53223);function e6(e){let{...t}=e,n=(0,d.getGitSyncAtoms)(t.chatId,t.projectId),r=(0,l.useAtomValue)(n.stage);(0,u.useEffect)(()=>{(0,e9.track)("GitSyncStageView",{chatId:t.chatId,stage:r,projectId:t.projectId})},[r,t.chatId,t.projectId]);let i=(0,u.useMemo)(()=>{switch(r){case"sign-in":return(0,s.jsx)(p.SignInStage,{...t});case"install-app":return(0,s.jsx)(h.InstallAppStage,{...t});case"create-repo":return(0,s.jsx)(f.CreateRepoStage,{...t});case"create-branch":return(0,s.jsx)(m.CreateBranchStage,{...t});case"switch-branch-confirmation":return(0,s.jsx)(e3,{...t});case"status":return(0,s.jsx)(ew,{...t});case"select-branch":return(0,s.jsx)(eW,{...t});case"error":return(0,s.jsx)(eT,{...t})}},[t,r]);return(0,s.jsx)(c.TransitionNode,{...c.PRESETS.popoverContent,childClassName:"overflow-hidden",children:(0,s.jsx)("div",{className:"flex flex-col overflow-hidden",children:i})})}var e8=et,te=e.i(584497),tt=n,tn=e.i(480118),tr=e.i(449381),ti=r,ta=a,to=eI;function ts(e){let{chatId:t,projectId:n}=e,r=(0,tn.useRouter)(),i=(0,tn.useSearchParams)(),a=(0,ta.getGitSyncAtoms)(t,n),o=(0,tt.useRef)(!1),{handlePushToBranch:s}=(0,to.useAsyncGitSyncActions)({chatId:t,projectId:n}),l=(0,ti.useAtomValue)(a.isConnectedToGit),c=(0,tr.useActiveBlockState)(),u=(0,ti.useAtomValue)(a.asyncActionLoading),d=(0,ti.useAtomValue)(a.currentBranch),p=(0,tt.useCallback)(()=>{let e=new URLSearchParams(i.toString());e.delete("assignBranch");let t=window.location.pathname+(e.toString()?"?".concat(e.toString()):"");r.replace(t)},[i,r]),h=(0,tt.useMemo)(()=>{let e=i.get("assignBranch");return e&&"pushing-to-branch"!==u&&l&&(null==c?void 0:c.id)&&!d&&!o.current?e:null},[i,u,l,null==c?void 0:c.id,d]);(0,tt.useEffect)(()=>{h&&!o.current&&(o.current=!0,s(h).finally(()=>{o.current=!1,p()}))},[h,s,p])}var tl=en,tc=et,tu=a,td=n,tp=r,th=eI,tf=ei;function tm(e){let{chatId:t,projectId:n}=e,r=(0,tf.useT)(),i=(0,tu.getGitSyncAtoms)(t,n),a=(0,tu.getGitSyncActions)(t),o=(0,tp.useAtomValue)(i.isOpen),{handleSyncToBranch:s}=(0,th.useAsyncGitSyncActions)({chatId:t,projectId:n}),{git:l}=(0,tp.useAtomValue)(i.externalChatMeta),c=(0,tp.useAtomValue)(i.currentBranch),u=(0,tp.useAtomValue)(i.upstreamSha),{isLoading:d,isValidating:p}=(0,tc.useServerQuerySWR)(["project","latestGit"],{projectId:n,branch:null!=c?c:void 0},{refreshInterval:6e4,stopFetch:!n}),h=(0,td.useCallback)(()=>{if(!u||!c||!l||!l.gitAutoPull||l.onProductionBranch)return;let e=s(c).then(()=>{a.addSyncedSha(u)});o||(0,tl.throttleById)("git-sync-promise",5e3,()=>tl.toast.promise({promise:e,loading:r("gitSync.toast.syncingExternalChanges"),success:r("gitSync.toast.syncedExternalChanges"),error:r("gitSync.toast.failedToSyncExternalChanges")}))},[u,c,l,s,o,a,r]);(0,td.useEffect)(()=>{h()},[u]),(0,td.useEffect)(()=>{a.updateIsRefreshingGitHead(d||p)},[a,d,p])}var tg=e9;function tv(e){let{chatId:r,asModal:i}=e,{project:a,isLoading:s}=(0,te.useChatMetadata)(r);return s?(0,t.jsx)(o.GitSyncTriggerSkeleton,{}):a?(0,t.jsx)(n.Suspense,{fallback:(0,t.jsx)(o.GitSyncTriggerSkeleton,{}),children:(0,t.jsx)(tx,{chatId:r,projectId:a.projectId,asModal:i})}):(0,t.jsx)(o.GitSyncCreateProjectTrigger,{chatId:r})}function tx(e){let{chatId:n,projectId:s,asModal:l=!1}=e;(0,e8.useServerQuerySWR)(["scoped","gitNamespaces"],{}),(0,e8.useServerQuerySWR)(["chat","externalMeta"],{chatId:n}),tm({chatId:n,projectId:s}),ts({chatId:n,projectId:s});let c=(0,a.getGitSyncAtoms)(n,s),u=(0,a.getGitSyncActions)(n),d=(0,r.useAtomValue)(c.isOpen),p=(0,r.useAtomValue)(c.isConnectedToGit),h=(0,r.useAtomValue)(c.stage),f=e=>{u.setIsOpen(e),e?(0,tg.track)("GitSyncPopoverOpen",{chatId:n,projectId:s,isConnectedToGit:p}):(0,tg.track)("GitSyncPopoverClose",{chatId:n,stage:h})};return(0,t.jsxs)(i.Popover,{open:d,onOpenChange:f,modal:l,children:[(0,t.jsx)(i.PopoverTrigger,{asChild:!0,children:(0,t.jsx)(o.GitSyncTrigger,{chatId:n,projectId:s})}),(0,t.jsx)(i.PopoverContent,{className:"w-[400px] max-w-screen origin-top-right",align:"end",alignOffset:1,children:(0,t.jsx)(e6,{chatId:n,projectId:s})})]})}let ty=(0,R.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M3.75 0C2.50736 0 1.5 1.00736 1.5 2.25V13.744V13.75H1.50001C1.50323 14.9899 2.50935 15.994 3.75 15.994H13H14.5V14.494V13.7296V12.994V11.494V0.75V0H13.75H3.75ZM13 11.494V1.5H3.75C3.33579 1.5 3 1.83579 3 2.25V11.622C3.23458 11.5391 3.48702 11.494 3.75 11.494H13ZM3 13.744C3 14.1582 3.33579 14.494 3.75 14.494H13V13.7296V12.994H3.75C3.33579 12.994 3 13.3298 3 13.744Z" fill="currentColor"/>');e.s(["BookClosed",0,ty],261883);let tb=(0,R.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M2.5 5.5V2.5H5.5V5.5H2.5ZM1 2C1 1.44772 1.44772 1 2 1H6C6.55228 1 7 1.44772 7 2V6C7 6.55228 6.55228 7 6 7H2C1.44772 7 1 6.55228 1 6V2ZM2.5 13.5V10.5H5.5V13.5H2.5ZM1 10C1 9.44772 1.44772 9 2 9H6C6.55228 9 7 9.44772 7 10V14C7 14.5523 6.55228 15 6 15H2C1.44772 15 1 14.5523 1 14V10ZM10.5 2.5V5.5H13.5V2.5H10.5ZM10 1C9.44772 1 9 1.44772 9 2V6C9 6.55228 9.44772 7 10 7H14C14.5523 7 15 6.55228 15 6V2C15 1.44772 14.5523 1 14 1H10ZM10.5 13.5V10.5H13.5V13.5H10.5ZM9 10C9 9.44772 9.44772 9 10 9H14C14.5523 9 15 9.44772 15 10V14C15 14.5523 14.5523 15 14 15H10C9.44772 15 9 14.5523 9 14V10Z" fill="currentColor" />');e.s(["GridSquare",0,tb],158510);let tw=(0,R.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M10.7499 1H9.99987V2.5H10.7499H12.4392L1.46954 13.4697L0.939209 14L1.99987 15.0607L2.5302 14.5303L13.4987 3.56182V5.25V6H14.9987V5.25V2C14.9987 1.44772 14.551 1 13.9987 1H10.7499Z" fill="currentColor"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M6.0002 7.06067L5.46983 6.53038L1.4691 2.53034L0.938721 2.00005L1.99929 0.939301L2.52967 1.46959L6.5304 5.46963L7.06077 5.99992L6.0002 7.06067ZM12.4377 13.4994H10.7499H9.99994V14.9994H10.7499H13.9994C14.5517 14.9994 14.9994 14.5517 14.9994 13.9994V10.75V9.99999H13.4994V10.75V12.4398L10.5305 9.46978L10.0003 8.93934L8.93944 9.99979L9.46966 10.5302L12.4377 13.4994Z" fill="currentColor"/>');e.s(["ArrowCrossed",0,tw],270978)},698477,980983,438419,e=>{"use strict";var t=e.i(605528);let n=(0,t.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M8.00001 0.433594L8.65845 1.64093L10.5908 5.18412L14.5577 5.92698L15.9094 6.18011L14.9646 7.17942L12.192 10.1121L12.7113 14.1144L12.8883 15.4782L11.6459 14.8884L8.00001 13.1577L4.35408 14.8884L3.11173 15.4782L3.28869 14.1144L3.80802 10.1121L1.03538 7.17942L0.0906067 6.18011L1.44233 5.92698L5.40922 5.18412L7.34156 1.64093L8.00001 0.433594ZM8.00001 3.56646L6.55565 6.21487L6.38519 6.52743L6.03525 6.59296L3.07014 7.14822L5.14259 9.34029L5.38718 9.59899L5.34137 9.95205L4.95318 12.9436L7.67838 11.65L8.00001 11.4973L8.32163 11.65L11.0468 12.9436L10.6586 9.95205L10.6128 9.59899L10.8574 9.34029L12.9299 7.14822L9.96476 6.59296L9.61482 6.52743L9.44436 6.21487L8.00001 3.56646Z" fill="currentColor"/>');e.s(["Star",0,n],698477);let r=(0,t.withNewIcon)('<path d="M7.99999 0.489502L10.5734 5.20807L15.8562 6.19736L12.1638 10.1029L12.8554 15.4329L7.99999 13.1281L3.1446 15.4329L3.83621 10.1029L0.143799 6.19736L5.42663 5.20807L7.99999 0.489502Z" fill="currentColor"/>');e.s(["StarFill",0,r],980983);var i=e.i(832520),a=e.i(127558),o=t;let s={hover:{opacity:1,y:[0,2,0],transition:{...a.DEFAULT_TRANSITION,y:{...a.DEFAULT_TRANSITION,duration:1.1,repeat:1/0}}}},l=e=>({opacity:[0,1],y:[16,0],scaleX:1,scaleY:1,interruptible:!1,transition:{ease:[.13,.65,.14,1],duration:.25,delay:e}}),c=(0,o.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M8.75011 3.56062L11.2501 6.06062L12.3108 4.99996L8.70722 1.39641C8.3167 1.00588 7.68353 1.00588 7.29301 1.39641L3.68945 4.99996L4.75011 6.06062L7.25011 3.56062V13.5H8.75011V3.56062Z" fill="currentColor"/>'),u=(0,o.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M8.75011 3.56062L11.2501 6.06062L12.3108 4.99996L8.70722 1.39641C8.3167 1.00588 7.68353 1.00588 7.29301 1.39641L3.68945 4.99996L4.75011 6.06062L7.25011 3.56062V11H8.75011V3.56062Z" fill="currentColor"/>'),d=(0,o.withNewIcon)('<path clip-rule="evenodd" d="M13.5 13.5L13.5 8.5L15 8.5L15 14C15 14.5523 14.5523 15 14 15L2 15C1.44771 15 1 14.5523 1 14L1 8.5L2.5 8.5L2.5 13.5L13.5 13.5Z" fill="currentColor" fill-rule="evenodd"/>'),p=(0,i.jsxs)(a.AnimatedIconGroup,{hideOverflow:!0,children:[(0,i.jsx)(a.AnimatedIcon,{variants:{...s,idle:{opacity:0},tap:{opacity:0,y:-16,interruptible:!1,transition:{ease:[.33,.03,.94,.42],duration:.5}}},children:(0,i.jsx)(c,{})}),(0,i.jsx)(a.AnimatedIcon,{variants:{...s,idle:{opacity:1},tap:l(.4)},children:(0,i.jsx)(u,{})}),(0,i.jsx)(a.AnimatedIcon,{variants:{hover:{opacity:0,y:4,scaleX:0,scaleY:.5,transition:a.DEFAULT_TRANSITION},idle:{opacity:1,scaleX:1,scaleY:1},tap:l(.47)},children:(0,i.jsx)(d,{})})]});e.s(["animatedShare",0,p],438419)},740292,804851,e=>{"use strict";e.s(["ChatActions",()=>P,"FavoriteChatDropdownItem",()=>O,"RestoreButton",()=>F],740292);var t=e.i(832520),n=e.i(200407),r=e.i(176248),i=e.i(304649),a=e.i(556355),o=e.i(53223),s=e.i(896608),l=e.i(850722),c=e.i(512817),u=e.i(698477),d=e.i(980983),p=e.i(70165),h=e.i(438419);e.i(904347);var f=e.i(37737),m=e.i(297239);e.i(563948);var g=e.i(407562),v=e.i(246300),x=e.i(480118),y=e.i(32170),b=e.i(504066),w=e.i(547259),j=(0,w.createServerReference)("40d47e97c2abd1c5a86eef0eb87b9a752899651d13",w.callServer,void 0,w.findSourceMapURL,"favoriteChat"),C=w,k=(0,C.createServerReference)("40b472f992531803698ba09e5388ad7b5a04385749",C.callServer,void 0,C.findSourceMapURL,"unfavoriteChat"),S=e.i(783069);function N(e,t){return(0,S.toSorted)(e,(e,n)=>null===e[t]?1:null===n[t]?-1:new Date(n[t]).getTime()-new Date(e[t]).getTime())}e.s(["sortByDateKey",()=>N],804851),e.i(472428);var E=e.i(152641),M=w,I=(0,M.createServerReference)("40ba3b728174e6eb60217c10dae8ab873e72ea4999",M.callServer,void 0,M.findSourceMapURL,"restoreChat"),D=e.i(211976),T=e.i(120485),A=e.i(476171);function L(e){let{chat:n}=e,{user:r}=(0,y.useUser)(),i=(0,m.useT)(),s=n.authorId===(null==r?void 0:r.id),{copyToClipboard:u}=(0,b.useCopyToClipboard)({timeout:2e3});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(a.DropdownMenuItem,{onSelect:()=>{u("".concat(window.location.origin,"/chat/").concat((0,A.getSluggifiedId)(n.chatId,n.title))),g.toast.success("Share link copied!")},children:[h.animatedShare,(0,t.jsx)("span",{children:i("chatActions.share")})]}),s&&(0,t.jsxs)(a.DropdownMenuItem,{onSelect:()=>{(0,o.track)("RenameChat",{targetChatId:n.chatId}),(0,f.openDialog)({type:"updateChatTitle",data:{chatId:n.chatId}})},children:[(0,t.jsx)(c.PencilEdit,{}),(0,t.jsx)("span",{children:i("chatActions.rename")})]}),s?(0,t.jsx)(O,{chat:n}):null,s&&(0,t.jsxs)(a.DropdownMenuItem,{onSelect:()=>{(0,f.openDialog)({type:"deleteChat",data:{chatId:n.chatId}})},variant:"destructive",children:[(0,t.jsx)(l.Trash,{}),(0,t.jsx)("span",{children:i("chatActions.delete")})]})]})}function P(e){let{chat:n,className:o,side:l="bottom",...c}=e,u=(0,p.useIsMobile)();return(0,t.jsxs)(a.DropdownMenu,{children:[(0,t.jsx)(a.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsxs)(r.Button,{className:(0,i.cn)("relative z-10 size-7 shrink-0 rounded-md p-0 transition-none has-[>svg]:p-0 ",o),"cmdk-item-actions":"",size:"sm",variant:"ghost",...c,children:[(0,t.jsx)(s.MoreHorizontal,{}),(0,t.jsx)("span",{className:"sr-only",children:"Open chat actions"})]})}),(0,t.jsx)(a.DropdownMenuContent,{align:u?"end":"right"===l?"start":"end",side:u?"bottom":l,sideOffset:8,children:(0,t.jsx)(a.DropdownMenuGroup,{children:(0,t.jsx)(L,{chat:n,side:l})})})]})}function R(e){let{setChatHistoryData:r,setChatFavoritesData:i,chat:s}=e,l=(0,m.useT)(),c=(0,x.usePathname)(),p=(0,x.useRouter)(),{data:{favorites:h,history:f},mutate:g}=(0,E.useServerQuerySWR)(["scoped","chats"],{}),[v,y]=(0,n.useTransition)(),[b,w]=(0,n.useOptimistic)(s.favorite);return(0,t.jsxs)(a.DropdownMenuItem,{variant:b?"gold":"default",disabled:v,onSelect:async()=>{let e={...s,title:s.title||"",privacy:"private",shareable:!1,authorId:"",updatedAt:s.updatedAt||new Date,projectId:s.projectId||""};s.favorite?((0,o.track)("UnfavoriteChat",{targetChatId:s.chatId}),await g({serverMutate:k(s.chatId),optimisticData:{favorites:h.filter(e=>e.chatId!==s.chatId),history:N([...f,e],"updatedAt")}})):((0,o.track)("FavoriteChat",{targetChatId:s.chatId}),await g({serverMutate:j(s.chatId),optimisticData:{favorites:N([...h,e],"updatedAt"),history:f.filter(e=>e.chatId!==s.chatId)}})),y(()=>{w(e=>!e),s.favorite?(r(e=>{let t=e.findIndex(e=>e.updatedAt&&s.updatedAt&&e.updatedAt<s.updatedAt),n={...s,authorId:"",privacy:"private",shareable:!1,favorite:!1};return t<0?[...e,n]:[...e.slice(0,t),n,...e.slice(t)]}),i(e=>e.filter(e=>e.chatId!==s.chatId))):(r(e=>e.filter(e=>e.chatId!==s.chatId)),i(e=>{let t=e.findIndex(e=>e.updatedAt&&s.updatedAt&&e.updatedAt<s.updatedAt),n={...s,authorId:"",privacy:"private",shareable:!1,favorite:!0};return t<0?[...e,n]:[...e.slice(0,t),n,...e.slice(t)]})),"/chat/history"===c&&p.refresh()})},children:[b?(0,t.jsx)(d.StarFill,{}):(0,t.jsx)(u.Star,{}),(0,t.jsx)("span",{children:l(b?"chatActions.unfavorite":"chatActions.favorite")})]})}function _(e){let{...n}=e,{setData:r}=(0,v.useChatHistory)(),{setData:i}=(0,v.useChatFavorites)();return(0,t.jsx)(R,{...n,setChatHistoryData:r,setChatFavoritesData:i})}function O(e){let{...n}=e;return n.setChatHistoryData&&n.setChatFavoritesData?(0,t.jsx)(R,{...n,setChatHistoryData:n.setChatHistoryData,setChatFavoritesData:n.setChatFavoritesData}):(0,t.jsx)(_,{...n})}function F(e){let{chatId:r}=e,{setData:i}=(0,v.useChatHistory)(),a=(0,m.useT)(),[o,s]=(0,n.useTransition)(),l=(0,x.useRouter)(),{data:{favorites:c,history:u},mutate:d}=(0,E.useServerQuerySWR)(["scoped","chats"],{});return(0,t.jsx)(D.SpinnerButton,{variant:"outline",size:"sm",className:"relative z-20",pending:o,onClick:()=>{s(async()=>{try{let e=await d({serverMutate:I({payload:{chatId:r}}),optimisticData:{favorites:c,history:u.filter(e=>e.chatId!==r)}});if(e&&e.error)throw Error(e.error);i(e=>e.filter(e=>e.chatId!==r)),g.toast.success(a("chatCard.restoreSuccess"))}catch(e){(0,T.handleChatError)(e,l)||g.toast.error(a("chatCard.restoreError"))}})},children:a("chatCard.restore")})}},187511,e=>{"use strict";var t=e.i(832520),n=e.i(200407),r=e.i(12388),i=e.i(89440),a=e.i(403055),o=e.i(7809);let s=r.Root,l=r.Trigger,c=r.Close,u=r.Portal,d=n.forwardRef((e,n)=>{let{className:i,...o}=e;return(0,t.jsx)(r.Overlay,{className:(0,a.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80 ease-in-out dark:bg-white/80",i),...o,ref:n})});d.displayName=r.Overlay.displayName;let p=(0,i.cva)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 gap-4 p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 border-b",bottom:"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 border-t",left:"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",right:"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm"}},defaultVariants:{side:"right"}}),h=n.forwardRef((e,n)=>{let{side:i="right",className:s,children:l,showClose:c=!0,...h}=e;return(0,t.jsxs)(u,{children:[(0,t.jsx)(d,{}),(0,t.jsxs)(r.Content,{className:(0,a.cn)(p({side:i}),s),ref:n,...h,children:[c?(0,t.jsxs)(r.Close,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute right-4 top-4 z-10 rounded-sm opacity-70 transition-opacity hover:opacity-100 focus:outline-hidden focus:ring-2 focus:ring-offset-2 disabled:pointer-events-none",children:[(0,t.jsx)(o.Cross,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]}):null,l]})]})});h.displayName=r.Content.displayName;let f=e=>{let{className:n,...r}=e;return(0,t.jsx)("div",{className:(0,a.cn)("flex flex-col gap-2 text-center sm:text-left",n),...r})};f.displayName="SheetHeader";let m=n.forwardRef((e,n)=>{let{className:i,...o}=e;return(0,t.jsx)(r.Title,{className:(0,a.cn)("text-foreground text-lg font-semibold leading-none",i),ref:n,...o})});m.displayName=r.Title.displayName,n.forwardRef((e,n)=>{let{className:i,...o}=e;return(0,t.jsx)(r.Description,{className:(0,a.cn)("text-muted-foreground text-sm",i),ref:n,...o})}).displayName=r.Description.displayName,e.s(["Sheet",()=>s,"SheetClose",()=>c,"SheetContent",()=>h,"SheetHeader",()=>f,"SheetTitle",()=>m,"SheetTrigger",()=>l])},184402,e=>{"use strict";var t=e.i(32170),n=e.i(403055),r=e.i(346970);let i="/chat/api/scopes/user";function a(){let{expectUser:e}=(0,t.useUser)(),{data:a,mutate:o}=(0,r.default)(e?i:null,n.fetcher);return{user:a,mutate:o}}e.s(["useVercelUser",()=>a])},491320,779647,e=>{"use strict";var t=e.i(200407),n=e.i(837062),r=e.i(184402),i=e.i(906261);function a(){let{user:e}=(0,r.useVercelUser)(),{scopes:a}=(0,n.useScopes)(),o=(0,t.useMemo)(()=>a?a.filter(e=>!(0,i.isUserScope)(e)):[],[a]);return(0,t.useMemo)(()=>{var t;return null==(t=o.find(t=>t.id===(null==e?void 0:e.defaultTeamId)))?void 0:t.slug},[o,e])}e.s(["useDefaultTeam",()=>a],491320);var o=e.i(674523),s=e.i(242759),l=e.i(375465);function c(e){let{integrationIds:t,isEnabled:n}=e,{aie:r}=(0,s.useFlags)(),i=new URLSearchParams,a=t.filter(e=>"blob"!==e);i.set("integrationIds",a.join(","));let{data:c,error:u,mutate:d}=(0,l.default)(n&&a.length?"/chat/api/integrations/marketplace/options?".concat(i.toString()):null,async e=>{let t=await fetch(e);if(!t.ok)throw Error("Failed to fetch integration options data");return t.json()});return{integrations:[...((null==c?void 0:c.integrations)||[]).filter(e=>!["upstash-vector","upstash-qstash"].includes(e.slug)&&(r||!o.INTEGRATION_NAME_TO_CATEGORY[e.name].includes("ai"))),...t.includes("blob")?[{id:"blob",slug:"blob",name:o.STORE_INFO.blob.title,description:o.STORE_INFO.blob.description,icon:o.STORE_INFO.blob.icon}]:[]],isLoading:void 0===c,error:u||null,refetch:d}}e.s(["useIntegrationOptions",()=>c],779647)},433743,159402,448199,710227,434673,e=>{"use strict";e.s(["IntegrationSplitButton",()=>el],433743);var t=e.i(832520),n=e.i(176248),r=e.i(299313),i=e.i(115184),a=e.i(138471),o=e.i(250767),s=e.i(556355);e.i(563948);var l=e.i(407562),c=e.i(242759),u=e.i(211976),d=e.i(726988),p=e.i(584497),h=e.i(92479),f=e.i(921),m=e.i(183673),g=e.i(970256),v=e.i(472166),x=e.i(674523),y=e.i(53223);e.s(["default",()=>z,"useEnvModal",()=>B],448199);var b=t,w=e.i(200407),j=e.i(686832),C=e.i(763480),k=e.i(547259),S=(0,k.createServerReference)("4015f1a4e23c8b6676b14fec95bf1a93f7ce3aeeae",k.callServer,void 0,k.findSourceMapURL,"createEnvVars");e.s(["createEnvVars",()=>S],159402);var N=e.i(346970),E=u,M=m,I=h,D=e.i(583965),T=n,A=a,L=e.i(850722),P=p,R=l,_=e.i(667660),O=e.i(538553),F=e.i(120485);let V={create:"Add Environment Variables",edit:"Edit Environment Variables",missing:"Missing Environment Variables"};function B(){var e;let{data:t,mutate:n}=(0,N.default)("showEnvModal",null,{fallbackData:!1}),{data:r,mutate:i}=(0,N.default)("envModalData",null,{fallbackData:{mode:"create",projectId:"",variables:[{key:"",value:""}]}}),a=null!=(e=null==r?void 0:r.variables)?e:[{key:"",value:""}],o=e=>{var t;i({...r,projectId:null!=(t=null==r?void 0:r.projectId)?t:"",variables:e})};return{showEnvModal:t,setShowEnvModal:n,envModalData:r,setEnvModalData:i,envVars:a,setEnvVars:o}}function z(e){let{v0ProjectId:t}=e,{hasVercelWritePermission:n}=(0,_.useActiveScope)(),{project:r,title:i}=(0,P.useChatMetadata)(),a=null!=t?t:null==r?void 0:r.projectId,{showEnvModal:o,setShowEnvModal:s,envModalData:l,setEnvModalData:c,envVars:u,setEnvVars:d}=B(),p=null==l?void 0:l.mode,{refetchVercelProject:h}=(0,M.useVercelProject)({v0ProjectId:a}),[f,m]=(0,w.useTransition)(),{refresh:g}=(0,D.useBrowserFrame)(),{chatId:v}=(0,I.useChatId)(),[x,y]=(0,w.useState)(!1),k=async e=>{y(!0);try{let t=await fetch("/chat/api/api-keys",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:"Generated from v0.app chat"})});if(!t.ok)throw Error("Failed to generate API key");let n=await t.json();R.toast.success("API key generated successfully"),N(e,"value",n.fullKey)}catch(e){console.error("Error generating API key:",e),R.toast.error("Failed to generate API key")}finally{y(!1)}},N=(e,t,n)=>{let r=[...u];r[e]={...r[e],[t]:n},d(r)},z=e=>{d([...u,{key:"",value:""}])},H=e=>{let t=[...u];t.splice(e,1),d(t.length?t:[{key:"",value:""}])},U=e=>{let t=e.split(/\r?\n/).filter(e=>e.trim()&&!e.trim().startsWith("#")),n=[];for(let e of t){let t=e.match(/^\s*([\w.-]+)\s*=\s*(.*)?\s*$/);if(t){let[,e,r=""]=t;(r&&r.startsWith('"')&&r.endsWith('"')||r.startsWith("'")&&r.endsWith("'"))&&(r=r.substring(1,r.length-1)),n.push({key:e,value:r})}}return n.length?n:t.map(e=>({key:e,value:""}))},q=(e,t,n)=>{let r=e.clipboardData.getData("text");if("key"===n){e.preventDefault();let n=U(r);if(n.length>0){let e=[...u];e.splice(t,1,...n),d(e)}}},W=()=>{m(async()=>{if(!l||!n)return;let e=u.filter(e=>""!==e.key.trim());if(0===e.length)return void R.toast.error("At least one environment variable with a key is required");let t=await S({envVars:e,v0ProjectId:l.projectId,autoCreateVercelProject:!0,chatId:v,autoCreateV0Project:!0,autoCreateV0ProjectName:(null==r?void 0:r.name)||i});if(t.success){var o;R.toast.success("Environment variables saved successfully"),null==(o=l.onSave)||o.call(l,e)}else{(0,F.handleChatError)(t.error)||R.toast.error(t.error);return}h(),s(!1),c({mode:"create",projectId:a,variables:[{key:"",value:""}]}),d([{key:"",value:""}]),g()})};return(0,b.jsx)(j.Modal,{open:o,onOpenChange:()=>{s(!o),d([{key:"",value:""}]),c({mode:"create",projectId:a,variables:[{key:"",value:""}]})},children:(0,b.jsxs)("form",{action:W,children:[(0,b.jsxs)(j.ModalHeader,{children:[(0,b.jsx)(j.ModalTitle,{className:"flex items-center gap-2 text-xl font-medium",children:(0,b.jsx)("span",{children:p?(0,b.jsx)("span",{children:V[p]}):(0,b.jsx)("span",{children:"Add Environment Variables"})})}),"create"===p&&(0,b.jsx)(j.ModalDescription,{className:"text-muted-foreground text-left",children:"Environment variables will be encrypted and stored securely on Vercel."})]}),(0,b.jsxs)(j.ModalContent,{children:["missing"===p&&(0,b.jsx)("p",{className:"text-muted-foreground mb-4 text-[15px]",children:"The functionality of this app will be limited without the following environment variables:"}),(0,b.jsx)("div",{className:"max-h-[60vh] space-y-3 overflow-y-auto pr-2",children:u.map((e,t)=>{let r="V0_API_KEY"===e.key&&""===e.value;return(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsx)(O.RbacTooltip,{show:!n,requiredRole:"V0Builder",children:(0,b.jsx)(C.Input,{value:e.key,onChange:e=>N(t,"key",e.target.value),onPaste:e=>q(e,t,"key"),placeholder:"API_KEY",className:"h-9",disabled:!n})})}),(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(O.RbacTooltip,{show:!n,requiredRole:"V0Builder",children:(0,b.jsx)(C.Input,{value:e.value,onChange:e=>N(t,"value",e.target.value),onPaste:e=>q(e,t,"value"),placeholder:"my-api-key",className:"h-9",disabled:x||!n})}),r&&(0,b.jsx)(O.RbacTooltip,{show:!n,requiredRole:"V0Builder",children:(0,b.jsx)(E.SpinnerButton,{type:"button",variant:"outline",size:"sm",onClick:()=>k(t),pending:x,className:"absolute right-1 top-1 h-7 text-xs px-2",disabled:!n,children:"Generate"})})]})}),(0,b.jsx)(O.RbacTooltip,{show:!n,requiredRole:"V0Builder",children:(0,b.jsx)(T.Button,{type:"button",variant:"ghost",size:"sm",onClick:e=>{e.shiftKey?d([{key:"",value:""}]):H(t)},className:"h-9 w-9 shrink-0",disabled:x||!n,children:(0,b.jsx)(L.Trash,{className:"text-muted-foreground h-4 w-4"})})})]},t)})}),(0,b.jsx)("div",{className:"flex justify-between pt-2",children:(0,b.jsx)(O.RbacTooltip,{show:!n,requiredRole:"V0Builder",children:(0,b.jsxs)(T.Button,{type:"button",variant:"outline",size:"sm",onClick:z,className:"flex items-center gap-1",disabled:!n,children:[(0,b.jsx)(A.Plus,{className:"h-4 w-4"}),"Add Variable"]})})})]}),(0,b.jsx)(j.ModalFooter,{className:"border-border bg-muted flex border-t p-4!",children:(0,b.jsx)(O.RbacTooltip,{show:!n,requiredRole:"V0Builder",children:(0,b.jsx)(E.SpinnerButton,{size:"sm",pending:f,disabled:!n,children:"Save"})})})]})})}var H=w,U=e.i(762585),q=D,W=w;function Z(){let[e,t]=(0,W.useState)(!1);return(0,W.useEffect)(()=>{t(navigator.userAgent.toLocaleLowerCase().includes("safari")&&!navigator.userAgent.toLocaleLowerCase().includes("chrome"))},[]),e}var G=e.i(620678),K=e.i(780292),X=k,$=(0,X.createServerReference)("4015f621a3b19f427db70dcfbcb6bab125ba100950",X.callServer,void 0,X.findSourceMapURL,"addIntrospectionMessages"),Y=e.i(753533),J=e.i(142219),Q=e.i(205341);let ee=new Map,et=(0,Y.cacheResultById)(ee,()=>({integrationTimeouts:(0,Q.atom)({})}));function en(e){let t=et(e);return{startTimeout:(e,n)=>{let r=J.store.get(t.integrationTimeouts);r[e]&&window.clearTimeout(r[e]);let i=window.setTimeout(()=>{n();let r={...J.store.get(t.integrationTimeouts)};delete r[e],J.store.set(t.integrationTimeouts,r)},6e4);J.store.set(t.integrationTimeouts,{...r,[e]:i})},clearTimeout:e=>{let n=J.store.get(t.integrationTimeouts);if(n[e]){window.clearTimeout(n[e]);let r={...n};delete r[e],J.store.set(t.integrationTimeouts,r)}}}}(0,Y.cacheResultById)(new Map,e=>({...et(e)})),e.s(["getProjectSettingsActions",()=>en],710227),e.i(168204);var er=e.i(225695),ei=e.i(44337),ea=e.i(403055),eo=_,es=O;function el(e){var b,w;let{integration:j,allTeamStores:C,onConnect:k,status:S,vercelProjectId:N,onStatusChange:E,source:M,starter:I,disabled:D,sendFollowUp:T=!0,stepIndex:A,envVarKeys:L,disableIntrospection:P=!1,agentStyling:R}=e,{hasVercelWritePermission:_}=(0,eo.useActiveScope)(),{es:O}=(0,c.useFlags)(),{stores:F}=(0,d.useConnectedIntegrations)({vercelProjectId:null!=N?N:void 0,refreshInterval:0}),{activeForkKey:V}=(0,h.useChatMessages)(),z=(0,p.useChatMetadata)(),W=window.location.pathname.includes("/projects/"),X=null!=(w=null==(b=z.project)?void 0:b.projectId)?w:W&&1?window.location.pathname.split("/").pop():void 0,{startTimeout:Y,clearTimeout:J}=en(null!=X?X:""),{chatId:Q}=(0,h.useChatId)(),{vercelProjectWithDashboard:ee,refetchVercelProject:et}=(0,m.useVercelProject)({v0ProjectId:X}),{submit:el}=(0,v.useV0Chat)(),{refresh:ec}=(0,q.useBrowserFrame)(),{showEnvModal:eu,setShowEnvModal:ed,setEnvModalData:ep}=B(),eh=Z(),ef=(0,K.useSetAtom)(G.isSettingsSheetOpenAtom);(0,H.useEffect)(()=>{"manual"!==j.slug||eu||"linking_integration"!==S||E(null!=A?A:j.slug,"none")},[eu,S,j.slug,E,A]);let em=async e=>{if(D||!_)return null;if(X&&ee)return{projectId:X,vercelProjectWithDashboard:ee};E(null!=A?A:e,"creating_project");let t=await (0,f.createProject)({projectName:z.title,existingProjectId:X,chatId:Q||"",onSuccess:()=>{},includeSuccessToast:!1});if(!t.id)return l.toast.error("Failed to create project. ".concat(t.errors?Object.values(t.errors).join("\n"):"Please add this chat to a project.")),E(null!=A?A:e,"none"),null;await z.setMetadata({...z,project:{projectId:t.id,vercelProjectId:t.vercelProjectId||null,name:z.title,settings:{icon:"icon-wand-sparkles",color:null},isCreator:!0}});let n=await et();return n?{projectId:t.id,vercelProjectWithDashboard:n}:(l.toast.error("Failed to fetch project data. Please try again."),E(null!=A?A:e,"none"),null)},eg=async e=>{if(!D&&_)try{E(null!=A?A:j.slug,"linking_integration");let n=await em(j.slug);if(!n)return;let{projectId:r,vercelProjectWithDashboard:i}=n;if(!i||!r)return;let a=i.project.id;if([...F.data.marketplaceStores,...F.data.nativeStores].some(t=>t.id===e&&t.projectsMetadata.some(e=>e.projectId===a))){E(null!=A?A:j.slug,"connected_integration"),l.toast.success("Store is already connected to this project");return}let o=x.POTENTIALLY_CONFLICTING_INTEGRATIONS.some(e=>e.has(j.slug)&&F.data.marketplaceStores.find(t=>e.has(t.product.slug))),s=await fetch("/chat/api/integrations/marketplace/connect",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({integrationId:e,projectId:a,envVarPrefix:o?j.slug.toUpperCase():void 0})});if(!s.ok){var t;let e=await s.json();throw Error(null!=(t=e.error)?t:"Failed to connect integration")}if(F.refetch(),et(),ec(),E(null!=A?A:j.slug,"connected_integration"),(0,y.track)("ConnectExistingIntegration",{integrationId:j.id,integrationName:j.name,projectId:i.project.id}),W)return;if(P)return void E(null!=A?A:j.slug,"connected_integration");if(!T){if(E(null!=A?A:j.slug,"introspecting_db"),(0,ei.isSqlExecProviderName)(j.name)&&Q){let t=await (0,g.doSqlExecution)({props:{language:"sql",source:"SQL_SCHEMA_QUERY",meta:{file:"",transaction:"false"},closed:!1,originalCode:void 0},v0ProjectId:r,initialVercelProjectId:null!=a?a:void 0,operationId:"".concat(e,"-").concat(r),sqlExecProvider:j.name});if("error"in t){console.error("Failed to introspect DB:",t),E(null!=A?A:j.slug,"none");return}let n=t.stdout.join("\n");$({chatId:Q,schemaContent:n,forkKey:V})}E(null!=A?A:j.slug,"connected_integration");return}if((0,ei.isSqlExecProviderName)(j.name)){let t=await (0,g.doSqlExecution)({props:{language:"sql",source:"SQL_SCHEMA_QUERY",meta:{file:"",transaction:"false"},closed:!1,originalCode:void 0},v0ProjectId:r,initialVercelProjectId:null!=a?a:void 0,operationId:"".concat(e,"-").concat(r),sqlExecProvider:j.name});l.toast.success("Integration connected successfully"),ef(!1),"error"in t?await el({action:"new",attachments:[],content:(0,er.createMDXMessageContent)("The ".concat(j.name," instance has been connected to the [Vercel Project](").concat(i.project.url,"). We were unable to query the schema for the newly connected ").concat(j.name," instance.")),type:"added-integration",revalidateVercelEnvAndIntegrations:!0}):await el({action:"new",attachments:[],content:(0,er.createMDXMessageContent)("The ".concat(j.name," instance has been connected to the [Vercel Project](").concat(i.project.url,"). The schema for this instance is ").concat(t.stdout.join("\n"))),type:"added-integration",workflowState:I?"add-existing-sql-db-starter":"add-existing-sql-db",revalidateVercelEnvAndIntegrations:!0})}else l.toast.success("Integration connected successfully"),ef(!1),await el({action:"new",attachments:[],content:(0,er.createMDXMessageContent)("The ".concat(j.name," instance has been connected to the [Vercel Project](").concat(i.project.url,").")),type:"added-integration",workflowState:I||"settings"===M?"add-starter-integration":x.AI_INTEGRATION_NAMES.includes(j.name)?"add-ai":"add-nonsql-store",revalidateVercelEnvAndIntegrations:!0})}catch(e){E(null!=A?A:j.slug,"none"),l.toast.error(e instanceof Error?e.message:"Failed to connect integration")}},ev=[...C.data.marketplaceStores.filter(e=>e.product&&e.product.name===j.name),...C.data.nativeStores.filter(e=>e.type===j.slug)],ex=R?"h-7 px-2":"",ey=R?"w-7 h-7 px-0":"";switch(S){case"introspecting_db":return(0,t.jsx)(u.SpinnerButton,{pending:!0,disabled:!0,variant:"secondary",size:"sm",className:ex,children:"Introspecting"});case"creating_project":return(0,t.jsx)(u.SpinnerButton,{pending:!0,disabled:!0,variant:"secondary",size:"sm",className:ex,children:"Creating project"});case"linking_integration":return(0,t.jsx)(u.SpinnerButton,{pending:!0,disabled:!0,variant:"secondary",size:"sm",className:ex,children:"manual"===j.slug?"Adding":"Connecting"});case"added_env_vars":return(0,t.jsx)(n.Button,{disabled:!0,variant:"secondary",size:"sm",className:ex,children:"Added"});case"connected_integration":return(0,t.jsx)(n.Button,{disabled:!0,variant:"secondary",size:"sm",className:ex,children:"Connected"})}return"manual"===j.slug?(0,t.jsx)(n.Button,{size:"sm",variant:"secondary",className:ey,onClick:async()=>{(0,y.track)("ClickAddIntegration",{integration:j});let e=await em(j.slug);if(!e||!e.vercelProjectWithDashboard.dashboardProject){l.toast.error("Failed to create Vercel project. Do you have permissions?"),E(null!=A?A:j.slug,"none");return}E(null!=A?A:j.slug,"linking_integration"),await ep({mode:"missing",projectId:e.projectId,variables:(null==L?void 0:L.map(e=>({key:e,value:""})))||[],onSave:e=>{E(null!=A?A:j.slug,"added_env_vars"),(0,y.track)("AddIntegration",{integrationSlug:j.slug,source:M,chatId:Q||"",envVars:e.map(e=>e.key)}),T&&!W&&el({action:"new",attachments:[],content:(0,er.createMDXMessageContent)("The ".concat(e.map(e=>e.key).join(", ")," environment variables have been added to this project.")),type:"added-integration",workflowState:"add-env-vars",revalidateVercelEnvAndIntegrations:!0})}}),ed(!0)},children:(0,t.jsx)(a.Plus,{className:"size-4"})}):C.isLoading?(0,t.jsx)(U.Skeleton,{className:(0,ea.cn)("h-8 w-20 rounded-md",ex)}):(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)(es.RbacTooltip,{show:!_,requiredRole:"V0Builder",children:(0,t.jsx)(n.Button,{disabled:D||!_,size:"sm",variant:"secondary",className:(0,ea.cn)("w-full\n          ".concat(ev.length>0&&O?"w-[calc(100%-34px)] rounded-r-none border-r-0":"","\n        "),ex),onClick:async()=>{E(null!=A?A:j.slug,"linking_integration"),Y(j.name,()=>{E(null!=A?A:j.slug,"none")});let e=null;"blob"!==j.slug&&eh&&(e=window.open("","_blank","width=1200,height=800"));let t=await em(j.slug);if(!t||!t.vercelProjectWithDashboard.dashboardProject)return void J(j.name);await k(j,t.projectId,t.vercelProjectWithDashboard.dashboardProject,e,A)},children:"Create"})}),ev.length>0&&O?(0,t.jsxs)(s.DropdownMenu,{children:[(0,t.jsx)(es.RbacTooltip,{show:!_,requiredRole:"V0Builder",children:(0,t.jsx)(s.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(n.Button,{size:"sm",variant:"secondary",className:(0,ea.cn)("w-[34px] rounded-l-none px-2",ey),disabled:D||!_,children:(0,t.jsx)(i.ChevronDown,{className:"h-4 w-4"})})})}),(0,t.jsxs)(s.DropdownMenuContent,{className:"max-h-[200px] overflow-y-auto",align:"end",children:[(0,t.jsx)(es.RbacTooltip,{show:!_,requiredRole:"V0Builder",children:(0,t.jsxs)(s.DropdownMenuItem,{onClick:async()=>{let e=window.open("","_blank","width=1200,height=800");E(null!=A?A:j.slug,"linking_integration"),Y(j.name,()=>{E(null!=A?A:j.slug,"none")});let t=await em(j.slug);if(!t||!t.vercelProjectWithDashboard.dashboardProject)return void J(j.name);await k(j,t.projectId,t.vercelProjectWithDashboard.dashboardProject,e,A)},className:"gap-3 px-3",disabled:!_,children:[(0,t.jsx)(o.PlusCircle,{className:"size-4"}),(0,t.jsx)("span",{children:"Create new"})]})}),ev.map(e=>(0,t.jsx)(es.RbacTooltip,{show:!_,requiredRole:"V0Builder",children:(0,t.jsxs)(s.DropdownMenuItem,{className:"gap-3 px-3",onClick:()=>eg(e.id),disabled:!_,children:[(0,t.jsx)(r.default,{src:x.INTEGRATION_NAME_TO_SVG[j.name]||"/placeholder.svg",alt:e.name,width:16,height:16}),(0,t.jsx)("span",{children:e.name||"Unnamed Instance"})]})},e.id))]})]}):null]})}var ec=N;function eu(){let{data:e,error:t,isLoading:n,mutate:r}=(0,ec.default)("/chat/api/integrations/marketplace/storage",async e=>{let t=await fetch(e);if(!t.ok)throw Error("Failed to fetch storage stores");return t.json()},{revalidateOnReconnect:!0});return{stores:{data:{marketplaceStores:(null==e?void 0:e.marketplaceStores)||[],nativeStores:(null==e?void 0:e.nativeStores)||[]},isLoading:n,error:t||null,refetch:r},isLoading:n,error:t||null,refetch:async()=>{await Promise.all([r()])}}}e.s(["useAllTeamIntegrations",()=>eu],434673)},725415,e=>{"use strict";var t=e.i(44337);function n(e){let n=[...new Set(Array.from(t.SQL_EXEC_PROVIDERS_TO_EXECUTION_ENV.values()).flat())];return e.filter(e=>{let t=e.toUpperCase();return n.some(e=>t.includes(e.toUpperCase()))})}function r(e){let n=new Set;for(let[r,i]of t.INTEGRATION_NAME_TO_ENV_VARS.entries())for(let t of i)if(e.includes(t)){n.add(r);break}for(let[r,i]of t.INTEGRATION_NAME_TO_SOURCE_TEXT.entries())for(let t of i)if(e.includes(t)){n.add(r);break}return Array.from(n)}e.s(["findIntegrationsInString",()=>r,"getSQLExecEnvVars",()=>n])},481498,977960,950955,389697,e=>{"use strict";e.s(["IntegrationOptions",()=>V,"IntegrationOptionsSkeleton",()=>F],481498);var t=e.i(832520),n=e.i(376346),r=e.i(176248),i=e.i(299313),a=e.i(779647),o=e.i(726988),s=e.i(200407),l=e.i(674523),c=e.i(242759),u=e.i(762585),d=e.i(612161),p=e.i(517953),h=e.i(276507),f=e.i(53223),m=e.i(304649),g=e.i(433743),v=e.i(434673),x=e.i(584497),y=e.i(449381),b=e.i(725415),w=t,j=r,C=e.i(707974),k=e.i(896608),S=e.i(138471);let N=(0,e.i(605528).withNewIcon)('<path d="M14 8C14 11.3137 11.3137 14 8 14C4.68629 14 2 11.3137 2 8C2 4.68629 4.68629 2 8 2C11.3137 2 14 4.68629 14 8Z" fill="currentColor" fill-opacity="0.08"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M8 6C8.55228 6 9 5.55228 9 5C9 4.44772 8.55228 4 8 4C7.44771 4 7 4.44772 7 5C7 5.55228 7.44771 6 8 6ZM7 7H6.25V8.5H7H7.24999V10.5V11.25H8.74999V10.5V8C8.74999 7.44772 8.30227 7 7.74999 7H7Z" fill="currentColor"/>');e.s(["InformationFillSmall",0,N],977960);var E=e.i(996174),M=h,I=u,D=e.i(297239),T=m;function A(e){let{children:t,label:n,badge:r,onAdd:i,info:a,className:o}=e,s=(0,D.useT)();return(0,w.jsxs)("div",{className:(0,T.cn)("flex flex-col gap-2",o),children:[(0,w.jsxs)("div",{className:"flex h-7 items-center justify-between",children:[(0,w.jsxs)("div",{className:"flex items-center gap-1",children:[(0,w.jsxs)(C.Label,{className:"text-sm font-medium text-gray-900",children:[n,r]}),a&&(0,w.jsx)(E.Tooltip,{content:(0,w.jsx)("div",{className:"text-center",children:a}),children:(0,w.jsx)(N,{className:"h-3 w-3",color:"gray-400"})})]}),i&&(0,w.jsx)(j.Button,{"aria-label":s("projectSettings.add")(n),className:"size-7 text-gray-500",size:"sm",variant:"ghost",onClick:i,tooltip:{side:"bottom",content:"Add ".concat(n)},children:(0,w.jsx)(S.Plus,{})})]}),t]})}function L(e){let{title:t,subtitle:n,children:r,className:i}=e;return(0,w.jsx)(M.Empty,{className:(0,T.cn)("relative h-[156px] rounded-md border border-dashed border-gray-300 px-8",i),children:(0,w.jsxs)(M.EmptyContent,{children:[t&&(0,w.jsx)(M.EmptyTitle,{className:"text-sm text-gray-900",children:t}),n&&(0,w.jsx)(M.EmptyDescription,{className:"text-pretty text-sm text-gray-500",children:n}),r]})})}function P(e){let{className:t,label:n,onClick:r,disabled:i}=e,a=(0,D.useT)(),o=n||a("projectSettings.moreOptions"),s=r?j.Button:"div";return(0,w.jsxs)(s,{className:(0,T.cn)("flex size-6 items-center justify-center text-gray-500",t),size:"sm",variant:"ghost",disabled:i,onClick:r,"cmdk-item-actions":"",children:[(0,w.jsx)(k.MoreHorizontal,{}),(0,w.jsx)("span",{className:"sr-only",children:o})]})}function R(e){let{children:t,suffix:n,className:r}=e;return(0,w.jsxs)("div",{className:(0,T.cn)("odd:bg-muted flex h-[58px] w-full items-center justify-between gap-2 rounded-lg p-2",r),children:[t,n]})}function _(e){let{title:t}=e;return(0,w.jsxs)(A,{label:t,onAdd:()=>{},children:[(0,w.jsxs)("div",{children:[(0,w.jsx)(R,{suffix:(0,w.jsx)(P,{}),children:(0,w.jsxs)("div",{className:"flex flex-col gap-2.5",children:[(0,w.jsx)(I.Skeleton,{className:"h-3 w-40"}),(0,w.jsx)(I.Skeleton,{className:"h-3 w-16"})]})}),(0,w.jsx)(R,{suffix:(0,w.jsx)(P,{}),children:(0,w.jsxs)("div",{className:"flex flex-col gap-2.5",children:[(0,w.jsx)(I.Skeleton,{className:"h-3 w-40"}),(0,w.jsx)(I.Skeleton,{className:"h-3 w-16"})]})})]}),(0,w.jsx)(j.Button,{size:"sm",variant:"secondary",disabled:!0,children:"Show More"})]})}e.s(["EmptyState",()=>L,"MoreButton",()=>P,"Section",()=>A,"SectionListSkeleton",()=>_],950955);var O=e.i(66990);function F(e){let{count:n=4}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"flex flex-col p-4 pb-0",children:(0,t.jsx)("div",{className:"flex h-7 w-36 items-center",children:(0,t.jsx)(u.Skeleton,{className:"h-5 w-full"})})}),(0,t.jsx)("div",{className:"flex flex-col gap-3 p-4",style:{maskImage:"linear-gradient(to bottom, black 20%, transparent 100%)"},children:Array.from({length:n}).map((e,n)=>(0,t.jsxs)("div",{className:"border-alpha-400 shadow-base flex items-center justify-between gap-3 rounded-lg border-0 p-3.5",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(u.Skeleton,{className:"h-8 w-8 rounded-full"}),(0,t.jsxs)("div",{className:"flex flex-col gap-1.5",children:[(0,t.jsx)(u.Skeleton,{className:"h-[12px] w-24"}),(0,t.jsx)(u.Skeleton,{className:"h-[10px] w-40"})]})]}),(0,t.jsx)(u.Skeleton,{className:"h-7 w-[74px]"})]},n))})]})}function V(e){let{vercelProjectId:u,onIntegrationClick:w,vercelProjectName:j,teamSlug:C,isV3:k}=e,{mi:S,scp:N}=(0,c.useFlags)(),[E,M]=(0,s.useState)({}),{stores:I}=(0,v.useAllTeamIntegrations)(),{title:D,project:T}=(0,x.useChatMetadata)(),L=(0,y.useActiveBlockState)(),P=window.location.pathname.includes("/projects/"),R=(e,t)=>{M(n=>({...n,[e]:t}))},{integrations:_,refetch:V}=(0,a.useIntegrationOptions)({integrationIds:l.RECOMMENDED_INTEGRATION_SLUGS,isEnabled:S||k}),{stores:B,isLoading:z,error:H,refetch:U}=(0,o.useConnectedIntegrations)({vercelProjectId:u,v0ProjectId:null==T?void 0:T.projectId,refreshInterval:0}),{connectedIntegrationItems:q,unconnectedIntegrationItems:W,missingIntegrationsItems:Z}=(0,s.useMemo)(()=>{if(z)return{connectedIntegrationItems:[],unconnectedIntegrationItems:[],missingIntegrationsItems:[]};let e=new Map;B.data.marketplaceStores.forEach(t=>{t.product&&e.set(t.product.slug,{url:"https://vercel.com/".concat(C,"/").concat(j,"/stores/integration/").concat(t.id,"/settings"),type:"store"})}),B.data.nativeStores.forEach(t=>{e.set(t.type,{url:"https://vercel.com/".concat(C,"/~/stores/").concat(t.type,"/").concat(t.id,"/browser"),type:"native-store"})});let t=(null==L?void 0:L.source)?(0,b.findIntegrationsInString)(L.source):[],n=[],r=[],i=[];return _.forEach(a=>{let o=e.get(a.slug);o?n.push({...a,connectionUrl:o.url,type:o.type}):t.includes(a.name)?i.push(a):r.push(a)}),{connectedIntegrationItems:n,unconnectedIntegrationItems:r,missingIntegrationsItems:i}},[z,B.data.marketplaceStores,B.data.nativeStores,null==L?void 0:L.source,_,C,j]);return H?(0,t.jsx)("div",{className:"flex size-full items-center justify-center p-4",children:(0,t.jsx)(h.Empty,{children:(0,t.jsxs)(h.EmptyContent,{children:[(0,t.jsx)(h.EmptyIcon,{className:"[&>svg]:text-red-700!",children:(0,t.jsx)(d.Stop,{})}),(0,t.jsx)(h.EmptyTitle,{children:"Error Loading Integrations"}),(0,t.jsx)(h.EmptyDescription,{children:null==H?void 0:H.message}),(0,t.jsx)(r.Button,{size:"sm",onClick:()=>{U(),V()},children:"Retry"})]})})}):z?(0,t.jsx)(F,{}):(0,t.jsxs)("div",{className:(0,m.cn)("grid",k&&"p-0! grid-cols-1"),children:[Z.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(A,{label:"Missing Integrations",info:"These integrations are required for this project.",className:"gap-3 p-4",children:Z.map(e=>(0,t.jsxs)(n.Card,{className:k?"w-full shadow-none":"",children:[(0,t.jsxs)(n.CardHeader,{className:"bg-muted border-alpha-200 flex items-center gap-2 rounded-t-lg border-b px-3 py-2 font-medium text-amber-800 ",children:[(0,t.jsx)(p.Warning,{})," ",(0,t.jsx)("span",{className:"text-sm",children:"Required"})]}),(0,t.jsx)(n.CardContent,{className:(0,m.cn)("flex flex-col gap-4 p-3",k&&"gap-0"),children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"relative h-8 w-8 overflow-hidden rounded-full",children:(0,t.jsx)(i.default,{src:e.icon,alt:e.name,fill:!0,className:"select-none object-cover"})}),(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("h3",{className:"font-medium",children:e.name}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:e.description})]})]}),(0,t.jsx)(g.IntegrationSplitButton,{allTeamStores:I,integration:e,onConnect:async(e,t,n,r)=>{let i=l.POTENTIALLY_CONFLICTING_INTEGRATIONS.some(t=>t.has(e.slug)&&q.some(e=>t.has(e.slug)));await w(e,i,t,n,r),B.refetch(),(0,f.track)("ClickAddIntegration",{integration:e})},status:E[e.slug],vercelProjectId:u,onStatusChange:R,source:"settings",starter:D.toLowerCase().includes("starter"),sendFollowUp:!P&&!N})]})})]},e.id))}),(0,t.jsx)(O.Separator,{})]}),q.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(A,{label:"Connected Integrations",info:"Integrations that are already connected to this project.",className:"gap-3 p-4",children:q.map(e=>(0,t.jsx)(n.Card,{className:k?"shadow-none! w-full":"",children:(0,t.jsx)(n.CardContent,{className:"border-none! flex flex-col gap-4 p-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"relative h-8 w-8 overflow-hidden rounded-full",children:(0,t.jsx)(i.default,{src:e.icon,alt:e.name,fill:!0,className:"select-none object-cover"})}),(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("h3",{className:"font-medium",children:e.name}),(0,t.jsx)("p",{className:"text-gray-500",children:e.description})]})]}),(0,t.jsx)("a",{target:"_blank",href:e.connectionUrl,children:(0,t.jsx)(r.Button,{variant:"outline",size:"sm",children:"Manage"})})]})})},e.id))}),W.length>0&&(0,t.jsx)(O.Separator,{})]}),W.length>0&&(0,t.jsx)(A,{label:"Available Integrations",info:"Integrations that are available to connect to this project.",className:"gap-3 p-4",children:W.map(e=>(0,t.jsx)(n.Card,{className:k?"w-full shadow-none":"",children:(0,t.jsx)(n.CardContent,{className:(0,m.cn)("flex flex-col gap-4 p-3",k&&"gap-0"),children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"relative h-8 w-8 overflow-hidden rounded-full",children:(0,t.jsx)(i.default,{src:e.icon,alt:e.name,fill:!0,className:"select-none object-cover"})}),(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("h3",{className:"font-medium",children:e.name}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:e.description})]})]}),(0,t.jsx)(g.IntegrationSplitButton,{allTeamStores:I,integration:e,onConnect:async(e,t,n,r)=>{let i=l.POTENTIALLY_CONFLICTING_INTEGRATIONS.some(t=>t.has(e.slug)&&q.some(e=>t.has(e.slug)));await w(e,i,t,n,r),B.refetch(),(0,f.track)("ClickAddIntegration",{integration:e})},status:E[e.slug],vercelProjectId:u,onStatusChange:R,source:"settings",starter:D.toLowerCase().includes("starter"),sendFollowUp:!P&&!N})]})})},e.id))})]})}var B=e.i(547259),z=(0,B.createServerReference)("4039ac99ee35d2451992db6fce9fd049e0fc0262d3",B.callServer,void 0,B.findSourceMapURL,"createIntegrationLinkAction");e.s(["createIntegrationLinkAction",()=>z],389697)},182659,e=>{"use strict";let t=(0,e.i(121793).default)("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);e.s(["default",()=>t])},892815,e=>{"use strict";var t=e.i(182659);e.s(["Link2",()=>t.default])},387885,e=>{"use strict";let t=(0,e.i(121793).default)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["default",()=>t])},177661,(e,t,n)=>{"use strict";var r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,s=(e,t,n,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of a(t))o.call(e,l)||l===n||r(e,l,{get:()=>t[l],enumerable:!(s=i(t,l))||s.enumerable});return e},l=e=>s(r({},"__esModule",{value:!0}),e),c={};((e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})})(c,{SYMBOL_FOR_REQ_CONTEXT:()=>u,getContext:()=>d}),t.exports=l(c);let u=Symbol.for("@vercel/request-context");function d(){var e,t,n;return null!=(n=null==(t=globalThis[u])||null==(e=t.get)?void 0:e.call(t))?n:{}}},702758,(e,t,n)=>{"use strict";var r=e.i(133473),i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,l=(e,t,n,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of o(t))s.call(e,l)||l===n||i(e,l,{get:()=>t[l],enumerable:!(r=a(t,l))||r.enumerable});return e},c=e=>l(i({},"__esModule",{value:!0}),e),u={};((e,t)=>{for(var n in t)i(e,n,{get:t[n],enumerable:!0})})(u,{getVercelOidcToken:()=>p,getVercelOidcTokenSync:()=>h}),t.exports=c(u);var d=e.r(177661);async function p(){return h()}function h(){var e,t;let n=null!=(t=null==(e=(0,d.getContext)().headers)?void 0:e["x-vercel-oidc-token"])?t:r.default.env.VERCEL_OIDC_TOKEN;if(!n)throw Error("The 'x-vercel-oidc-token' header is missing from the request. Do you have the OIDC option enabled in the Vercel project settings?");return n}},410978,(e,t,n)=>{"use strict";var r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,s=(e,t,n,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of a(t))o.call(e,l)||l===n||r(e,l,{get:()=>t[l],enumerable:!(s=i(t,l))||s.enumerable});return e},l=e=>s(r({},"__esModule",{value:!0}),e),c={};((e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})})(c,{getVercelOidcToken:()=>u.getVercelOidcToken,getVercelOidcTokenSync:()=>u.getVercelOidcTokenSync}),t.exports=l(c);var u=e.r(702758)},179169,(e,t,n)=>{"use strict";Object.create;var r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames;Object.getPrototypeOf;var o=Object.prototype.hasOwnProperty,s=(e,t,n,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of a(t))o.call(e,l)||l===n||r(e,l,{get:()=>t[l],enumerable:!(s=i(t,l))||s.enumerable});return e},l=e=>s(r({},"__esModule",{value:!0}),e),c={};((e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})})(c,{awsCredentialsProvider:()=>d}),t.exports=l(c);var u=e.r(410978);function d(t){return async()=>{let{fromWebToken:n}=await e.A(46999);return n({...t,webIdentityToken:(0,u.getVercelOidcTokenSync)()})()}}},47101,(e,t,n)=>{"use strict";var r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,s=(e,t,n,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of a(t))o.call(e,l)||l===n||r(e,l,{get:()=>t[l],enumerable:!(s=i(t,l))||s.enumerable});return e},l=e=>s(r({},"__esModule",{value:!0}),e),c={};((e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})})(c,{awsCredentialsProvider:()=>u.awsCredentialsProvider,getVercelOidcToken:()=>d.getVercelOidcToken,getVercelOidcTokenSync:()=>d.getVercelOidcTokenSync}),t.exports=l(c);var u=e.r(179169),d=e.r(410978)},155893,955654,768493,692581,170160,e=>{"use strict";e.s(["EnvVars",()=>eh],155893);var t=e.i(832520),n=e.i(200407);e.i(563948);var r=e.i(407562),i=e.i(176248),a=e.i(978036),o=e.i(941088),s=e.i(676648),l=e.i(138471),c=t,u=e.i(892815),d=e.i(5848),p=e.i(919639),h=e.i(387885),h=h,f=e.i(199098);e.i(868275),e.i(541536);var m=e.i(23474);m.z.union([m.z.object({error:m.z.object({message:m.z.string().optional().default(""),code:m.z.string().optional().default(""),meta:m.z.record(m.z.string(),m.z.any()).optional().default({})})}),m.z.object({message:m.z.string().optional().default(""),code:m.z.string().optional().default(""),meta:m.z.record(m.z.string(),m.z.any()).optional().default({})})]),e.i(723900),e.i(93966),e.i(47101),function(e){e.Production="production",e.Preview="preview",e.Development="development"}({});var g=function(e){return e.Plain="plain",e.Secret="secret",e.System="system",e.Encrypted="encrypted",e.Sensitive="sensitive",e}({}),v=i,x=n,y=e.i(896608),b=e.i(356388),w=e.i(971623),j=e.i(480118),C=e.i(547259),k=(0,C.createServerReference)("40985dbeb6f71de84a449634aa7f1741c5c9c6b3e6",C.callServer,void 0,C.findSourceMapURL,"linkVercelProject");e.s(["linkVercelProject",()=>k],955654);var S=C,N=(0,S.createServerReference)("403b1fcbb2022b94d0153effa4ab618de226f8412f",S.callServer,void 0,S.findSourceMapURL,"unlinkVercelProject");e.s(["unlinkVercelProject",()=>N],768493);var E=e.i(667660),M=e.i(686832),I=e.i(403055),D=e.i(346970);function T(){let{data:e,isLoading:t}=(0,D.default)("/chat/api/projects",I.fetcher);return{projects:e,isReady:!t&&void 0!==e}}e.s(["useVercelProjects",()=>T],692581);var A=e.i(276507),L=e.i(304649),P=e.i(556355),R=e.i(763480),_=e.i(187283),O=e.i(716360),F=e.i(529693),V=e.i(922307),B=r,z=e.i(211976),H=e.i(32170),U=e.i(762585);function q(e){let{envVar:t}=e;return(0,c.jsxs)("div",{className:"space-y-4",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"text-sm font-medium",children:"Key"}),(0,c.jsx)("p",{className:"text-muted-foreground break-all",children:null==t?void 0:t.key})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"text-sm font-medium",children:"Value"}),(0,c.jsx)("p",{className:"text-muted-foreground break-all",children:(null==t?void 0:t.type)===g.Encrypted?t.decrypted?t.value:"*** Encrypted ***":null==t?void 0:t.value})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"text-sm font-medium",children:"Targets"}),(0,c.jsx)("p",{className:"text-muted-foreground break-words",children:Array.isArray(null==t?void 0:t.target)?t.target.join(", "):null==t?void 0:t.target})]}),(null==t?void 0:t.comment)&&(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"text-sm font-medium",children:"Comment"}),(0,c.jsx)("p",{className:"text-muted-foreground break-words",children:t.comment})]})]})}function W(e){let{v0ProjectId:t,onClose:n,open:r,onProjectCreated:i}=e,[a,o]=(0,x.useState)(""),{activeScopeSlug:s}=(0,E.useActiveScope)(),l=(0,j.useRouter)();return t?(0,c.jsx)(M.Modal,{onOpenChange:n,open:r,children:(0,c.jsxs)("form",{action:async()=>{try{let e=await (0,V.createNewVercelProject)(t,a);if(!e.id)return void B.toast.error("Failed to create project");await k({v0ProjectId:t,vercelProjectId:e.id}),i({id:e.id,name:a,url:"https://vercel.com/".concat(s,"/").concat(a),env:[]}),B.toast.success("Project created and linked successfully"),l.refresh()}catch(e){B.toast.error("Failed to create project")}n()},children:[(0,c.jsx)(M.ModalHeader,{children:(0,c.jsx)(M.ModalTitle,{children:"Create New Vercel Project"})}),(0,c.jsx)(M.ModalContent,{children:(0,c.jsx)(R.Input,{autoFocus:!0,onChange:e=>o(e.target.value),placeholder:"Project Name",required:!0,value:a})}),(0,c.jsxs)(M.ModalFooter,{children:[(0,c.jsx)(M.ModalClose,{asChild:!0,children:(0,c.jsx)(v.Button,{onClick:n,size:"sm",variant:"secondary",children:"Cancel"})}),(0,c.jsx)(z.FormSpinnerButton,{size:"sm",variant:"default",children:"Create"})]})]})}):null}function Z(e){let{filteredProjects:t,searchQuery:n,setSearchQuery:r,isLoading:i,selectedProject:a,handleLinkProject:o,setShowCreateModal:s,onCreateModalOpen:l}=e,{user:h}=(0,H.useUser)(),f=(null==h?void 0:h.v0plan)==="v0-enterprise";return(0,c.jsxs)("div",{className:"flex size-full flex-col",children:[!f&&(0,c.jsxs)("div",{className:"border-border flex w-full items-center border-b py-1.5 pl-4 pr-3.5",children:[(0,c.jsx)("span",{className:"text-gray-500",children:(0,c.jsx)(w.MagnifyingGlass,{})}),(0,c.jsx)(R.Input,{className:"flex-1 border-none bg-inherit",onChange:e=>r(e.target.value),placeholder:"Search projects...",value:n}),(0,c.jsx)(O.AnimatePresence,{mode:"wait",children:n&&(0,c.jsx)(F.motion.button,{animate:{opacity:1},className:"sp-1 focus:outline-hidden text-gray-500 hover:text-gray-700",exit:{opacity:0},initial:{opacity:0},onClick:()=>r(""),children:(0,c.jsx)(_.X,{size:16})})})]}),!f&&(0,c.jsx)("div",{className:"relative flex max-h-[225px] min-h-[225px] flex-1 flex-col overflow-y-auto p-2",onWheel:e=>{e.stopPropagation()},onTouchMove:e=>{e.stopPropagation()},children:(0,c.jsx)(O.AnimatePresence,{children:i?(0,c.jsx)(K,{}):0===t.length?(0,c.jsx)(G,{title:"No Projects Found"}):t.map(e=>(0,c.jsxs)(P.DropdownMenuItem,{className:(0,L.cn)("group flex items-center justify-between md:px-2","w-full rounded-md p-2 hover:bg-gray-100 md:w-auto"),onClick:()=>o((null==a?void 0:a.id)===e.id?null:e),children:[(0,c.jsxs)("span",{className:"flex min-w-0 flex-1 items-center gap-2",children:[(0,c.jsx)(u.Link2,{className:"size-4"}),(0,c.jsx)("span",{className:"max-w-[200px] truncate",children:e.name})]}),(null==a?void 0:a.id)===e.id?(0,c.jsxs)("span",{className:"flex shrink-0 items-center text-gray-500",children:[(0,c.jsx)(p.Check,{className:"h-4 w-4 group-hover:hidden"}),(0,c.jsx)("span",{className:"hidden group-hover:inline",children:"Unlink"})]}):(0,c.jsx)("span",{className:"hidden shrink-0 font-medium text-gray-500 group-hover:inline",children:"Link"})]},e.id))})}),f&&(0,c.jsx)("div",{className:"flex flex-col gap-2 p-4 text-center text-sm",children:(0,c.jsx)("span",{className:"font-medium text-gray-500",children:"Enterprise customers can't connect existing Vercel projects at the moment."})}),(0,c.jsx)("div",{className:"sticky bottom-0 w-full border-t p-1.5",children:(0,c.jsxs)(v.Button,{onClick:()=>{s(!0),null==l||l()},className:"w-full gap-0.5",variant:"secondary",children:[(0,c.jsx)(d.Plus,{className:"size-4 shrink-0"}),(0,c.jsx)("span",{className:"px-1.5",children:"New Project"})]})})]})}function G(e){let{title:t}=e;return(0,c.jsx)(A.Empty,{className:"bg-muted flex-1 rounded-lg",children:(0,c.jsx)(A.EmptyContent,{children:(0,c.jsx)(A.EmptyTitle,{className:"text-sm text-gray-500",children:t})})})}function K(){return(0,c.jsx)(c.Fragment,{children:Array.from({length:10}).map((e,t)=>(0,c.jsx)(P.DropdownMenuItem,{className:(0,L.cn)("group flex items-center justify-between md:px-2","w-full rounded-md p-2 hover:bg-gray-100 md:w-auto"),disabled:!0,children:(0,c.jsxs)("span",{className:"flex min-w-0 flex-1 items-center gap-2",children:[(0,c.jsx)(u.Link2,{className:"size-4"}),(0,c.jsx)(U.Skeleton,{className:"h-4 w-full"})]})},t))})}function X(e){let{v0ProjectId:t,currentProject:n,projects:r,readOnly:i,size:a="default",alias:o,children:s}=e,[l,u]=(0,x.useState)(n),[d,p]=(0,x.useState)(""),[m,g]=(0,x.useState)(!1),[w,C]=(0,x.useState)(!1),[S,E]=(0,x.useState)(!1),M=(0,j.useRouter)(),I=e=>{u(e),C(!1)},D=async e=>{if(!i){if(!e)return T();g(!0);try{let n=await k({v0ProjectId:t,vercelProjectId:e.id});"error"in n||!n.success||(u(e),B.toast.success("Project linked successfully"))}catch(e){B.toast.error("Failed to link project. Please try again.")}finally{C(!1),g(!1),M.refresh()}}},T=async()=>{if(!i){g(!0),u(void 0);try{let e=await N({v0ProjectId:t});"error"in e||!e.success?(u(n),B.toast.error("Failed to unlink project. Please try again.")):B.toast.success("Project unlinked successfully")}catch(e){u(n),B.toast.error("Failed to unlink project. Please try again.")}finally{C(!1),g(!1),M.refresh()}}},A=r.filter(e=>e.name.toLowerCase().includes(d.toLowerCase())),R=l?(0,c.jsx)("div",{className:"rounded-lg p-2 text-sm sm:p-0",children:(0,c.jsxs)("div",{className:"bg-muted flex flex-col rounded-lg text-sm",children:[s,(0,c.jsxs)("div",{className:"flex items-center justify-between p-2",children:[(0,c.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,c.jsxs)("a",{href:l.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-sm hover:underline",children:[(0,c.jsx)("span",{className:"font-medium",children:l.name}),(0,c.jsx)(b.ExternalSmall,{className:"size-4"})]}),o?(0,c.jsx)("a",{href:(0,L.addProtocol)(o),target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground flex items-center gap-1 text-sm hover:underline",children:o}):null]}),(0,c.jsxs)(P.DropdownMenu,{children:[(0,c.jsx)(P.DropdownMenuTrigger,{asChild:!0,children:(0,c.jsxs)(v.Button,{className:"relative size-8",size:"sm",variant:"ghost",disabled:i,tooltip:i?"You don't have permission to modify this project":void 0,children:[(0,c.jsx)(y.MoreHorizontal,{className:"h-4 w-4"}),(0,c.jsx)("span",{className:"sr-only",children:"Open project actions"})]})}),(0,c.jsx)(P.DropdownMenuContent,{align:"end",side:"bottom",sideOffset:8,children:(0,c.jsxs)(P.DropdownMenuGroup,{children:[(0,c.jsx)(P.DropdownMenuItem,{asChild:!0,children:(0,c.jsxs)("a",{href:l.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2",children:[(0,c.jsx)(h.default,{}),(0,c.jsx)("span",{children:"View on Vercel"})]})}),(0,c.jsxs)(P.DropdownMenuItem,{variant:"destructive",onClick:T,disabled:i,children:[(0,c.jsx)(f.Trash,{}),(0,c.jsx)("span",{children:"Unlink Vercel Project"})]})]})})]})]})]})}):(0,c.jsx)("div",{className:"p-2 md:p-0",children:(0,c.jsx)(v.Button,{className:"w-full","aria-label":"Add a Vercel Project",variant:"outline",disabled:m||i,size:a,type:"button",children:(0,c.jsx)("span",{children:"Add Vercel Project"})})});return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(W,{v0ProjectId:t,onClose:()=>E(!1),open:S,onProjectCreated:I}),(0,c.jsx)("div",{className:"w-full min-w-0",children:l||i?R:(0,c.jsxs)(P.DropdownMenu,{onOpenChange:C,open:w,children:[(0,c.jsx)(P.DropdownMenuTrigger,{asChild:!0,children:R}),(0,c.jsx)(P.DropdownMenuContent,{align:"center",className:"w-[400px]",side:"bottom",children:(0,c.jsx)(Z,{filteredProjects:A,searchQuery:d,setSearchQuery:p,isLoading:m,selectedProject:l,handleLinkProject:D,setShowCreateModal:E,onCreateModalOpen:()=>C(!1)})})]})})]})}e.s(["CreateProjectModal",()=>W,"EnvironmentVariableDetails",()=>q,"ProjectList",()=>Z,"VercelProjectSelector",()=>X],170160);var $=M,Y=z,J=C,Q=(0,J.createServerReference)("40719169f6df190ba19139c8d47b697d2776ede288",J.callServer,void 0,J.findSourceMapURL,"deleteEnvVars"),ee=e.i(448199),et=e.i(297239),en=e.i(950955),er=e.i(183673),ei=e.i(92479),ea=e.i(583965),eo=e.i(376346),es=L,el=E,ec=e.i(538553),eu=H;let ed="••••••••••••••••••";function ep(e){let{envVar:l,setOpenDetailsModal:c,setSelectedEnvVar:u,className:d}=e,[p,h]=(0,n.useState)(!1),f=(0,et.useT)();return(0,t.jsxs)("div",{className:(0,es.cn)("flex w-full items-center justify-between gap-2 p-3",d),children:[(0,t.jsxs)("div",{className:"flex flex-col items-start gap-0.5 text-[13px] leading-5",children:[(0,t.jsx)("span",{className:"max-w-[200px] truncate font-mono uppercase sm:max-w-[300px]",children:l.key}),(0,t.jsxs)("span",{className:"inline-flex items-center",children:[p?(0,t.jsx)("code",{className:"max-w-[300px] truncate rounded-md bg-gray-200 px-1",children:l.value}):(0,t.jsx)("span",{className:"tracking-widest",children:ed}),(0,t.jsx)(i.Button,{variant:"ghost",className:"ml-1 size-5 text-gray-500",onClick:()=>h(!p),"aria-label":f(p?"projectSettings.hideValue":"projectSettings.showValue"),children:p?(0,t.jsx)(s.EyeOff,{}):(0,t.jsx)(o.Eye,{})}),(0,t.jsx)(i.Button,{variant:"ghost",className:"size-5 text-gray-500",onClick:()=>{navigator.clipboard.writeText(l.value),r.toast.success("Copied value of ".concat(l.key," to clipboard"))},"aria-label":"Copy",children:(0,t.jsx)(a.Copy,{})})]})]}),(0,t.jsx)(en.MoreButton,{onClick:()=>{c(!0),u(l)}})]})}function eh(e){let{setSaving:a,vercelProjectId:o,v0ProjectId:s}=e,[c,u]=(0,n.useState)(null),[d,p]=(0,n.useState)(!1),{envVars:h,isLoading:f,refetchVercelProject:m}=(0,er.useVercelProject)({v0ProjectId:null!=s?s:void 0}),g=h?Object.keys(h).length:0,[v,x]=(0,n.useTransition)(),{setEnvModalData:y,setShowEnvModal:b}=(0,ee.useEnvModal)(),w=(0,et.useT)(),j=(0,er.useCanMakeProjectUpdates)(),{chatId:C}=(0,ei.useChatId)(),{refresh:k}=(0,ea.useBrowserFrame)(),{hasVercelWritePermission:S}=(0,el.useActiveScope)(),{user:N}=(0,eu.useUser)(),E=null==N?void 0:N.isImpersonation,M=(0,n.useCallback)(()=>{c&&s&&o&&(a(!0),x(async()=>{(await Q({envVarId:c.id,v0ProjectId:s,vercelProjectId:o,chatId:C})).success?r.toast.success(w("projectSettings.envVarDeleteSuccess")(c.key)):r.toast.error(w("projectSettings.envVarDeleteError")(c.key)),p(!1),m(),k()}))},[c,s,o,a,C,m,k,w]),I=(0,n.useCallback)(()=>{s&&(y({mode:"create",projectId:s}),b(!0))},[y,b,s]),D=(0,n.useMemo)(()=>h?Object.values(h).sort((e,t)=>{let n=e.updatedAt||e.createdAt;return(t.updatedAt||t.createdAt)-n}):[],[h]);return f?(0,t.jsx)(en.SectionListSkeleton,{title:w("projectSettings.environmentVariables")}):(0,t.jsxs)(t.Fragment,{children:[0===g?E?(0,t.jsx)(en.EmptyState,{title:"Additional Permissions Required",subtitle:"You are impersonating a user. You do not have permission to view Environment Variables of this project.",className:"h-full"}):(0,t.jsx)(en.EmptyState,{title:w("projectSettings.noEnvVars"),subtitle:w("projectSettings.envVarSubtitle")(o),className:"h-full",children:(0,t.jsx)(ec.RbacTooltip,{show:!S,requiredRole:"V0Builder",children:(0,t.jsxs)(i.Button,{size:"sm",variant:"secondary",onClick:()=>{I()},disabled:!S,children:[(0,t.jsx)(l.Plus,{}),"Add Variables"]})})}):(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[j&&o&&(0,t.jsx)(ec.RbacTooltip,{show:!S,requiredRole:"V0Builder",children:(0,t.jsxs)(i.Button,{variant:"secondary",size:"sm",onClick:I,disabled:!S,children:[(0,t.jsx)(l.Plus,{}),"Add"]})}),(0,t.jsx)(eo.Card,{children:D.map((e,n)=>(0,t.jsx)(ep,{envVar:e,setOpenDetailsModal:p,setSelectedEnvVar:u,className:n>0?"border-t":""},e.id))})]}),(0,t.jsxs)($.Modal,{open:d,onOpenChange:p,children:[(0,t.jsx)($.ModalHeader,{children:(0,t.jsx)($.ModalTitle,{className:"flex items-center gap-2",children:w("projectSettings.envVarDetails")})}),(0,t.jsx)($.ModalContent,{children:(0,t.jsx)(q,{envVar:c})}),j&&(0,t.jsx)($.ModalFooter,{className:"border-border bg-muted flex border-t p-4!",children:(0,t.jsx)(ec.RbacTooltip,{show:!S,requiredRole:"V0Builder",children:(0,t.jsx)(Y.SpinnerButton,{size:"sm",pending:v,variant:"destructive",onClick:M,disabled:v||!S,children:w("projectSettings.delete")})})})]})]})}},471173,e=>{"use strict";e.s(["Instructions",()=>j],471173);var t=e.i(832520),n=e.i(176248),r=e.i(183673),i=e.i(762585),a=e.i(950955),o=t,s=e.i(200407),l=e.i(376346),c=e.i(211976);e.i(563948);var u=e.i(407562),d=e.i(480118),p=e.i(889661),h=e.i(589910),f=e.i(547259),m=(0,f.createServerReference)("602f86b8e36f2e2262315c3a89e430ea18b437d54c",f.callServer,void 0,f.findSourceMapURL,"updateProjectSettingsInstructions"),g=e.i(120485),v=e.i(51940),x=e.i(216445),y=e.i(297239),b=r;function w(e){let{readOnly:t,projectId:n,initialInstructions:r,textAreaMinHeight:i,buttonVariant:a,onSubmit:f,onFinish:w}=e,[j,C]=(0,s.useState)(r),[k,S]=(0,s.useState)(!1),N=(0,d.useRouter)(),[E,M]=(0,s.useState)(!1),I=(0,y.useT)(),{updateInstructions:D}=(0,b.useProjectInstructions)(n),T=(0,s.useCallback)(async e=>{if(e&&e.preventDefault(),!t){S(!0),null==f||f();try{let e=await m(n,j);if(!0===e)D(j),u.toast.success("Project Instructions updated"),M(!0),setTimeout(()=>M(!1),1e3),N.refresh();else throw Error(e.error)}catch(e){(0,g.handleChatError)(e,N,"An error occurred while updating instructions")||u.toast.error("Error",{description:"An error occurred while updating instructions."})}finally{S(!1),null==w||w()}}},[t,f,n,j,D,N,w]),{formRef:A,onKeyDown:L}=(0,p.useEnterSubmit)({submitMessage:T,localFileInfos:[]});return(0,o.jsx)(l.Card,{className:"bg-background flex flex-col border-0 shadow-none",children:(0,o.jsx)("form",{className:"flex flex-1 flex-col",onSubmit:T,ref:A,children:(0,o.jsxs)(l.CardContent,{className:"flex flex-1 flex-col gap-3 p-0",children:[(0,o.jsxs)("div",{className:"flex flex-1 flex-col gap-2",children:[(0,o.jsx)("div",{className:"flex flex-1 flex-col",children:(0,o.jsx)(x.Textarea,{asChild:!0,children:(0,o.jsx)(v.ResizableTextArea,{className:"pointer-events-auto!",disabled:t,id:"instructions",maxLength:5e3,minHeight:i,onChange:e=>C(e.target.value),onKeyDown:L,placeholder:I("projectInstructions.placeholder"),value:j})})}),(0,o.jsx)(h.InputCounter,{count:j.length,max:5e3,message:"For larger context, consider using sources.",messageThreshold:5e3})]}),!t&&(0,o.jsx)(c.SpinnerButton,{className:"ml-auto w-full","data-testid":"save-instructions-button",disabled:E||j===r||k,pending:k,variant:a,children:"Save Changes"})]})})})}function j(e){let{setSaving:o,projectId:s}=e,{instructions:l,isLoading:c}=(0,r.useProjectInstructions)(s),u=(0,r.useCanMakeProjectUpdates)();return s?(0,t.jsx)(a.Section,{label:"Project Instructions",info:"Custom instructions and guidelines for v0 to follow in responses.",className:"gap-3 border-b p-4",children:c?(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,t.jsx)(i.Skeleton,{className:"h-36 w-full"}),(0,t.jsx)(n.Button,{disabled:!0,variant:"secondary",size:"sm",children:"Save Changes"})]}):(0,t.jsx)(w,{readOnly:!u,projectId:s,initialInstructions:l,textAreaMinHeight:144,buttonVariant:"secondary",onSubmit:()=>{o(!0)},onFinish:()=>{o(!1)}})}):null}},966455,921431,666425,196606,599921,366064,e=>{"use strict";e.s(["Sources",()=>S],966455);var t=e.i(832520),n=e.i(200407);e.i(563948);var r=e.i(407562),i=e.i(176248),a=e.i(556355),o=e.i(850722),s=e.i(158469),l=e.i(517953),c=e.i(512817),u=e.i(88919),d=e.i(948780),p=e.i(183673),h=e.i(950955),f=e.i(276507),m=e.i(297239),g=e.i(304649),v=e.i(79259),x=e.i(818711),y=e.i(281808),b=e.i(707827),w=e.i(376346),j=e.i(696871);function C(e){let{size:n,status:r,isUploaded:i,progress:a,showSuccess:o}=e,c=(0,m.useT)();if("processing"===r)return(0,t.jsxs)("div",{className:"inline-flex items-center gap-1 text-gray-500",children:[i?(0,t.jsx)("span",{className:"text-[13px] leading-[18px]",children:c("projectSettings.isIndexing")}):(0,t.jsx)("span",{className:"text-[13px] leading-[18px]",children:c("projectSettings.isUploading")}),a?(0,t.jsxs)("span",{className:"text-[13px] leading-[18px]",children:["(",Math.round(100*a),"%)"]}):null]});if(o)return(0,t.jsxs)("div",{className:"inline-flex items-center gap-2 text-[13px] leading-[18px] text-blue-600",children:[(0,t.jsx)(s.CheckCircle,{size:12}),c("projectSettings.uploaded")]});if("error"===r)return(0,t.jsxs)("div",{className:"inline-flex items-center gap-2 text-[13px] leading-[18px] text-red-600",children:[(0,t.jsx)(l.Warning,{size:12}),c("projectSettings.uploadError")]});let u=n?n>1048576?"".concat((n/1048576).toFixed(2),"MB"):"".concat((n/1024).toFixed(2),"KB"):"---";return(0,t.jsx)("div",{className:"inline-flex items-center text-[13px] leading-[18px] text-gray-500",children:u})}function k(e){let{source:s,className:l}=e,{metadata:d,url:f,sourceId:v,status:w,title:j,finishedAt:k,isOptimistic:S,progress:N}=s,E=!S,M=j||"---",[I,D]=(0,n.useState)(!1),T=(0,m.useT)(),A=(0,p.useCanMakeProjectUpdates)(),[L,P]=(0,x.useDeleteSourceModal)(),{setSource:R}=(0,y.useRenameSourceModal)();(0,n.useEffect)(()=>{if("success"===w&&k&&Date.now()-new Date(k).getTime()<5e3){D(!0);let e=setTimeout(()=>{D(!1)},5e3);return()=>{clearTimeout(e)}}},[k,w]);let[_,O]=(0,n.useTransition)(),F=(0,n.useCallback)(()=>{f&&O(async()=>{try{let e=new URLSearchParams({url:f,type:"blob"}),t=await fetch("/chat/api/chat/download?".concat(e.toString())),n=await t.blob(),r=window.URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=M,document.body.appendChild(i),i.click(),i.remove(),window.URL.revokeObjectURL(r)}catch(e){r.toast.error(T("projectSettings.downloadSourceError")(e instanceof Error?e.message:void 0))}})},[f,M,T]),V=(0,n.useMemo)(()=>"processing"!==w&&"error"===w?(0,t.jsx)(i.Button,{onClick:()=>{P(v)},size:"sm",variant:"destructive",children:T("projectSettings.delete")}):(0,t.jsxs)(a.DropdownMenu,{children:[(0,t.jsx)(a.DropdownMenuTrigger,{children:(0,t.jsx)(h.MoreButton,{label:T("projectSettings.openSourceActions")})}),(0,t.jsx)(a.DropdownMenuContent,{align:"end",side:"bottom",sideOffset:8,children:(0,t.jsxs)(a.DropdownMenuGroup,{children:[A&&(0,t.jsxs)(a.DropdownMenuItem,{onSelect:()=>{R({sourceId:v,sourceName:M})},children:[(0,t.jsx)(c.PencilEdit,{}),(0,t.jsx)("span",{children:T("projectSettings.rename")})]}),f?(0,t.jsxs)(a.DropdownMenuItem,{onSelect:F,disabled:_,children:[(0,t.jsx)(u.Download,{}),(0,t.jsx)("span",{children:T("projectSettings.download")}),_?(0,t.jsx)(b.Spinner,{}):null]}):null,A&&(0,t.jsxs)(a.DropdownMenuItem,{onSelect:()=>{P(v)},variant:"destructive",children:[(0,t.jsx)(o.Trash,{}),(0,t.jsx)("span",{children:T("projectSettings.delete")})]})]})})]}),[w,T,f,F,_,P,v,R,M,A]);return(0,t.jsxs)("div",{className:(0,g.cn)("flex w-full items-center justify-between gap-2 p-3","processing"===w&&"animate-pulse",l),children:[(0,t.jsxs)("div",{className:"flex flex-col items-start gap-0.5 leading-5",children:[(0,t.jsx)("span",{className:"max-w-[200px] truncate text-sm font-medium sm:max-w-[300px]",children:M}),(0,t.jsx)(C,{size:null==d?void 0:d.size,status:w,isUploaded:E,progress:N,showSuccess:I})]}),A||f?V:null]})}function S(e){let{setSaving:r,projectId:a}=e,o=(0,m.useT)(),{sources:s,isLoading:l,revalidateSources:c,setSources:u}=(0,p.useProjectSources)(a),g=(0,p.useCanMakeProjectUpdates)(),b=s.length||0,C=(0,n.useRef)(null),{inputFileRef:S,onInputChange:N,isUploading:E,isDraggingFile:M}=(0,v.default)({isSignedIn:!0,disablePaste:!0,dragContainerRef:C,canUpload:e=>{let t=j.ALLOWED_FILE_COUNT["project-source"];return e.length>t?{ok:!1,message:"You can only upload up to ".concat(t," sources")}:{ok:!0}},onUploadStart:e=>{r(!0),u(t=>[{sourceId:e.id,title:e.name,type:"attachment",url:e.url,content:null,description:null,metadata:null,isOptimistic:!0,status:"processing",progress:null,finishedAt:null},...t||[]],{revalidate:!1})},projectId:a||void 0,onFinish:()=>{r(!1),c()}}),I=(0,n.useMemo)(()=>M?(0,t.jsxs)("div",{className:"absolute inset-0 z-20 flex flex-col items-center justify-center gap-2 rounded-lg border border-dashed border-blue-600 bg-blue-100 shadow-none",children:[(0,t.jsx)(f.EmptyTitle,{className:"text-sm text-blue-600",children:o("projectSettings.dropHere")}),(0,t.jsx)(f.EmptyDescription,{className:"text-sm text-blue-600",children:o("projectSettings.dropHereDescription")})]}):null,[M,o]);return a?l?(0,t.jsx)(h.SectionListSkeleton,{title:o("projectSettings.sources")}):(0,t.jsxs)(h.Section,{label:o("projectSettings.sources"),info:"Sources let v0 use your files and information in responses.",className:"gap-3 p-4",children:[(0,t.jsxs)("div",{className:"relative flex flex-col gap-3",ref:C,"data-sources-drop-container":!0,children:[I,0===b?(0,t.jsx)("div",{className:"transition-all",ref:C,children:(0,t.jsx)(h.EmptyState,{title:o("projectSettings.noSources"),subtitle:o("projectSettings.noSourcesDescription"),className:"h-56",children:(0,t.jsxs)(i.Button,{size:"sm",variant:"secondary",onClick:()=>{var e;null==(e=S.current)||e.click()},children:[(0,t.jsx)(d.CloudUpload,{}),"Upload Files"]})})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(i.Button,{variant:"secondary",size:"sm",onClick:()=>{if(g){var e;null==(e=S.current)||e.click()}},children:[(0,t.jsx)(d.CloudUpload,{}),"Upload Files"]}),(0,t.jsx)(w.Card,{className:"transition-all",children:s.map((e,n)=>(0,t.jsx)(k,{source:e,className:n>0?"border-t":""},e.sourceId))}),(0,t.jsx)(y.default,{projectId:a}),(0,t.jsx)(x.default,{projectId:a})]})]}),(0,t.jsx)("input",{className:"sr-only","data-enable-grammarly":"false","data-gramm":"false","data-gramm_editor":"false",disabled:E,multiple:!0,onChange:e=>{N(e)},ref:S,type:"file"})]}):null}var N=t,E=n,M=r,I=i,D=a,T=e.i(608142),A=e.i(392736),L=e.i(941088),P=e.i(418565),R=e.i(86395),_=e.i(357022);let O=(0,e.i(605528).withNewIcon)('<path d="M12 8C12 10.2091 10.2091 12 8 12C5.79086 12 4 10.2091 4 8C4 5.79086 5.79086 4 8 4C10.2091 4 12 5.79086 12 8Z" fill="currentColor"/>');var F=o,V=p,B=e.i(692581),z=e.i(955654),H=e.i(768493),U=e.i(170160),q=m,W=e.i(242759),Z=e.i(480118),G=e.i(194433),K=e.i(667660),X=e.i(491341),$=e.i(762585),Y=e.i(538553);function J(e){let{setSaving:t,vercelProjectWithDashboard:n,isLoading:r,v0ProjectId:i,closeSettingsSheet:a}=e;return r?(0,N.jsx)(en,{}):(0,N.jsx)(Q,{vercelProjectWithDashboard:n,setSaving:t,v0ProjectId:i,closeSettingsSheet:a})}function Q(e){let{vercelProjectWithDashboard:t,setSaving:n,v0ProjectId:r,closeSettingsSheet:i}=e,{vercelProject:a}=(0,E.useMemo)(()=>{var e,n,r,i;return{vercelProject:null==t?void 0:t.project,deploymentId:null==t||null==(n=t.dashboardProject)||null==(e=n.productionDeployment)?void 0:e.id,alias:null==t||null==(r=t.dashboardProject)?void 0:r.domain,prodBlockInfo:null==t?void 0:t.prodBlockInfo,allAliases:null==t||null==(i=t.dashboardProject)?void 0:i.aliases}},[t]);return(0,N.jsxs)("div",{className:"border-alpha-400 flex items-center justify-between gap-3 rounded-lg border p-3",children:[(0,N.jsxs)("div",{className:"flex items-center gap-3",children:[(0,N.jsx)(er,{}),(0,N.jsxs)("div",{className:"flex flex-col",children:[(0,N.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Vercel"}),(0,N.jsx)("p",{className:"text-sm text-gray-500",children:t?null==a?void 0:a.name:(0,N.jsx)("span",{className:"text-gray-500",children:"This project is not connected to Vercel."})})]})]}),t?(0,N.jsx)(ee,{vercelProjectWithDashboard:t,setSaving:n,v0ProjectId:r,closeSettingsSheet:i}):(0,N.jsx)(et,{setSaving:n,v0ProjectId:r})]})}function ee(e){var t;let{vercelProjectWithDashboard:n,setSaving:r,v0ProjectId:i,closeSettingsSheet:a}=e,{activeScopeSlug:o,hasVercelWritePermission:s}=(0,K.useActiveScope)(),[l,c]=(0,E.useTransition)(),{refetchVercelProject:u}=(0,V.useVercelProject)({v0ProjectId:i}),d=(0,q.useT)(),p=(0,W.useFlags)(),h=(0,V.useCanMakeProjectUpdates)(),f=null==(t=n.dashboardProject)?void 0:t.link,m=(0,E.useCallback)(()=>{r(!0),c(async()=>{try{let e=await (0,H.unlinkVercelProject)({v0ProjectId:i});"error"in e||!e.success?M.toast.error(d("projectSettings.projectUnlinkError")):(M.toast.success(d("projectSettings.projectUnlinkSuccess")),await u())}catch(e){M.toast.error(d("projectSettings.projectUnlinkError"))}finally{c(()=>{r(!1)})}})},[i,r,d,u]),g=(0,Z.useRouter)(),{vercelProject:v,prodBlockInfo:x}=(0,E.useMemo)(()=>{var e,t,r,i;return{vercelProject:n.project,deploymentId:null==(t=n.dashboardProject)||null==(e=t.productionDeployment)?void 0:e.id,alias:null==(r=n.dashboardProject)?void 0:r.domain,prodBlockInfo:n.prodBlockInfo,allAliases:null==(i=n.dashboardProject)?void 0:i.aliases}},[n]),y=(0,E.useCallback)(()=>{let e=null==x?void 0:x.blockId;if(e)try{c(async()=>{let t=await (0,G.forkBlock)(e);if(!t||"string"!=typeof t)return void M.toast.error("error");g.push("/chat/".concat(t)),a()})}catch(e){console.log(e),M.toast.error("error")}},[a,null==x?void 0:x.blockId,g]);return(0,N.jsxs)(D.DropdownMenu,{children:[(0,N.jsx)(D.DropdownMenuTrigger,{asChild:!0,children:(0,N.jsxs)(I.Button,{variant:"secondary",size:"sm",children:[(0,N.jsx)(O,{className:"text-green-700!"}),"Connected",(0,N.jsx)(T.ChevronDownSmall,{})]})}),(0,N.jsx)(D.DropdownMenuContent,{align:"end",side:"bottom",sideOffset:8,children:(0,N.jsxs)(D.DropdownMenuGroup,{children:[p.ppe&&x?(0,N.jsx)(X.default,{href:"/chat/".concat(x.chatId,"?b=").concat(x.blockId,"&f=0"),onClick:e=>{e.metaKey||a()},children:(0,N.jsxs)(D.DropdownMenuItem,{children:[(0,N.jsx)(L.Eye,{}),(0,N.jsx)("span",{children:d("blockActions.openInChat")})]})}):null,!f&&x?(0,N.jsxs)(D.DropdownMenuItem,{onSelect:y,children:[(0,N.jsx)(P.GitBranch,{}),(0,N.jsx)("span",{children:d("blockActions.fork")})]}):null,(0,N.jsx)(D.DropdownMenuItem,{asChild:!0,children:(0,N.jsxs)("a",{href:v.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2",children:[(0,N.jsx)(A.External,{className:"size-3"}),(0,N.jsx)("span",{children:d("projectSettings.viewOnVercel")})]})}),p.ppe&&h&&s?(0,N.jsx)(D.DropdownMenuItem,{asChild:!0,children:(0,N.jsxs)("a",{href:"https://vercel.com/".concat(o,"/").concat(v.name,"/settings/domains"),target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2",children:[(0,N.jsx)(R.Globe,{className:"size-3"}),(0,N.jsx)("span",{children:d("projectSettings.setCustomDomain")})]})}):null,h&&s&&(0,N.jsxs)(D.DropdownMenuItem,{variant:"destructive",disabled:l,onClick:m,children:[(0,N.jsx)(F.Trash,{}),(0,N.jsx)("span",{children:d("projectSettings.unlinkVercelProject")})]})]})})]})}function et(e){let{setSaving:t,v0ProjectId:n}=e,r=(0,q.useT)(),{setSelectedProjectId:i}=(0,V.useProjectsForUser)(),{projects:a,isReady:o}=(0,B.useVercelProjects)(),{hasVercelWritePermission:s}=(0,K.useActiveScope)(),[l,c]=(0,E.useTransition)(),[u,d]=(0,E.useState)(!1),[p,h]=(0,E.useState)(""),f=(0,E.useMemo)(()=>(null==a?void 0:a.length)&&a.length>0,[a]),m=(null==a?void 0:a.filter(e=>e.name.toLowerCase().includes(p.toLowerCase())))||[],g=(0,E.useCallback)(e=>{i(e.id)},[i]),v=(0,E.useCallback)(e=>{e&&(t(!0),c(async()=>{try{let t=await (0,z.linkVercelProject)({v0ProjectId:n,vercelProjectId:e.id});"error"in t||!t.success||M.toast.success(r("projectSettings.projectLinkSuccess"))}catch(e){M.toast.error(r("projectSettings.projectLinkError"))}finally{c(()=>{t(!1)})}}))},[n,t,r]);return(0,N.jsxs)(N.Fragment,{children:[f?(0,N.jsxs)(D.DropdownMenu,{children:[(0,N.jsx)(Y.RbacTooltip,{show:!s,requiredRole:"V0Builder",children:(0,N.jsx)(D.DropdownMenuTrigger,{asChild:!0,disabled:l||!o||!s,children:(0,N.jsx)(I.Button,{variant:"secondary",size:"sm",children:"Connect"})})}),(0,N.jsx)(D.DropdownMenuContent,{align:"end",className:"w-[calc(100vw-32px)] overflow-y-auto md:max-w-[467px]",side:"bottom",children:(0,N.jsx)(U.ProjectList,{filteredProjects:m,searchQuery:p,setSearchQuery:h,isLoading:!o,selectedProject:void 0,handleLinkProject:v,setShowCreateModal:d})})]}):(0,N.jsx)(Y.RbacTooltip,{show:!s,requiredRole:"V0Builder",children:(0,N.jsx)(I.Button,{variant:"secondary",size:"sm",disabled:l||!o||!s,onClick:()=>{s&&d(!0)},children:"Connect"})}),(0,N.jsx)(U.CreateProjectModal,{v0ProjectId:n,onClose:()=>d(!1),open:u,onProjectCreated:g})]})}function en(){return(0,N.jsxs)("div",{className:"border-alpha-400 flex items-center justify-between gap-3 rounded-lg border p-3",children:[(0,N.jsxs)("div",{className:"flex items-center gap-3",children:[(0,N.jsx)(er,{}),(0,N.jsxs)("div",{className:"flex flex-col",children:[(0,N.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Deploy to Vercel"}),(0,N.jsx)($.Skeleton,{className:"my-1 h-4 w-36"})]})]}),(0,N.jsx)($.Skeleton,{className:"h-7 w-24"})]})}function er(){return(0,N.jsx)("div",{className:"border-alpha-400 flex size-11 items-center justify-center rounded-lg border bg-[#000000]",children:(0,N.jsx)(_.LogoVercel,{color:"background-100",className:"size-3.5"})})}e.s(["VercelProject",()=>J],921431),e.s(["Git",()=>eC],666425);var ei=t,ea=n,eo=i,es=e.i(690733),el=r,ec=T,eu=A,ed=e.i(698047),ep=e.i(292273),eh=P,ef=$,em=m,eg=a,ev=e.i(547259),ex=(0,ev.createServerReference)("40bf6393cda322a7fbedb673b0e6113bc437f56bb2",ev.callServer,void 0,ev.findSourceMapURL,"startChatFromGit"),ey=Z;e.i(904347);var eb=e.i(37737),ew=K,ej=Y;function eC(e){var t;let{vercelProjectWithDashboard:n,isLoading:r,v0ProjectId:i,closeSettingsSheet:a,chatId:o,latestBlockId:s}=e;return r?(0,ei.jsx)(eN,{}):(null==n||null==(t=n.dashboardProject)?void 0:t.link)?(0,ei.jsx)(ek,{dashboardProject:n.dashboardProject,vercelProject:n.project,link:n.dashboardProject.link,v0ProjectId:i,closeSettingsSheet:a}):(0,ei.jsx)(eS,{vercelProjectWithDashboard:n,chatId:o,latestBlockId:s})}function ek(e){var t,n;let{dashboardProject:r,vercelProject:i,link:a,v0ProjectId:o,closeSettingsSheet:s}=e,l=(0,em.useT)(),[c,u]=(0,ea.useTransition)(),d=r.link,p=(0,ey.useRouter)(),h=(0,ea.useCallback)(()=>{if(d)try{u(async()=>{let{chatId:e}=await ex({projectId:o});if(!e||"string"!=typeof e)return void el.toast.error("error");p.push("/chat/".concat(e)),s()})}catch(e){console.log(e),el.toast.error("error")}},[d,o,p,s]);return(0,ei.jsxs)("div",{className:"border-alpha-400 flex items-center justify-between gap-3 rounded-lg border p-3",children:[(0,ei.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ei.jsx)(eE,{}),(0,ei.jsxs)("div",{className:"flex flex-col",children:[(0,ei.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"GitHub"}),(0,ei.jsx)("p",{className:"text-sm text-gray-500",children:a.repo})]})]}),(0,ei.jsxs)(eg.DropdownMenu,{children:[(0,ei.jsx)(eg.DropdownMenuTrigger,{asChild:!0,disabled:c,children:(0,ei.jsxs)(eo.Button,{variant:"secondary",size:"sm",children:[(0,ei.jsx)(O,{className:"text-green-700!"}),"Connected",(0,ei.jsx)(ec.ChevronDownSmall,{})]})}),(0,ei.jsx)(eg.DropdownMenuContent,{align:"end",side:"bottom",sideOffset:8,children:(0,ei.jsxs)(eg.DropdownMenuGroup,{children:[d?(0,ei.jsxs)(eg.DropdownMenuItem,{onSelect:h,children:[(0,ei.jsx)(eh.GitBranch,{}),(0,ei.jsx)("span",{children:l("projectSettings.forkMainBranch")})]}):null,(0,ei.jsx)(eg.DropdownMenuItem,{asChild:!0,children:(0,ei.jsx)("a",{href:"https://github.com/".concat(null==(t=r.link)?void 0:t.org,"/").concat(null==(n=r.link)?void 0:n.repo),target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-between",children:(0,ei.jsxs)("span",{className:"flex items-center gap-3",children:[(0,ei.jsx)(eu.External,{className:"size-3"}),(0,ei.jsx)("span",{children:l("projectSettings.viewOnGitHub")})]})})}),(0,ei.jsx)(eg.DropdownMenuItem,{asChild:!0,children:(0,ei.jsx)("a",{href:"".concat(i.url,"/settings/git"),target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-between",children:(0,ei.jsxs)("span",{className:"flex items-center gap-3",children:[(0,ei.jsx)(eu.External,{className:"size-3"}),(0,ei.jsx)("span",{children:l("projectSettings.manageGit")})]})})})]})})]})]})}function eS(e){let{vercelProjectWithDashboard:t,chatId:n,latestBlockId:r}=e,{hasVercelWritePermission:i}=(0,ew.useActiveScope)(),a=null==t?void 0:t.project;return(0,ei.jsxs)("div",{className:"border-alpha-400 flex items-center justify-between gap-3 rounded-lg border p-3",children:[(0,ei.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ei.jsx)(eE,{}),(0,ei.jsxs)("div",{className:"flex flex-col",children:[(0,ei.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"GitHub"}),(0,ei.jsx)("p",{className:"text-sm text-gray-500",children:"This project is not connected to GitHub."})]})]}),(0,ei.jsx)(es.TooltipProvider,{children:(0,ei.jsxs)(es.Tooltip,{children:[(0,ei.jsx)(es.TooltipTrigger,{asChild:!0,children:(0,ei.jsx)("span",{className:"flex items-center justify-center",tabIndex:-1,children:(0,ei.jsx)(ej.RbacTooltip,{show:!i,requiredRole:"V0Builder",children:(0,ei.jsx)(eo.Button,{asChild:!0,type:"button",variant:"secondary",size:"sm",disabled:!a||!i,onClick:()=>{a&&i&&(0,eb.openDialog)({type:"connectRepo",data:{chatId:n,latestBlockId:r}})},children:(0,ei.jsxs)("div",{className:"flex items-center gap-2",children:[!a&&(0,ei.jsx)(ep.LockClosed,{}),(0,ei.jsx)("span",{children:"Connect"})]})})})})}),!a&&(0,ei.jsx)(es.TooltipContent,{children:"Connect to Vercel to enable GitHub Integration."})]})})]})}function eN(){return(0,ei.jsxs)("div",{className:"border-alpha-400 flex items-center justify-between gap-3 rounded-lg border p-3",children:[(0,ei.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ei.jsx)(eE,{}),(0,ei.jsxs)("div",{className:"flex flex-col",children:[(0,ei.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"GitHub"}),(0,ei.jsx)(ef.Skeleton,{className:"my-1 h-4 w-36"})]})]}),(0,ei.jsx)(ef.Skeleton,{className:"h-7 w-24"})]})}function eE(){return(0,ei.jsx)("div",{className:"border-alpha-400 flex size-11 items-center justify-center rounded-lg border bg-white",children:(0,ei.jsx)(ed.LogoGithub,{})})}var eM=t,eI=e.i(299313),eD=w,eT=e.i(707974),eA=e.i(216445),eL=e.i(51940);e.i(541536);var eP=e.i(23474),eR=eP;eR.z.object({id:eR.z.string(),title:eR.z.string(),description:eR.z.string().min(3,"Please provide a description.").max(1e3,"Description cannot be longer than 1000 characters"),source:eR.z.object({title:eR.z.string(),url:eR.z.string(),description:eR.z.string().optional()}),code:eR.z.string(),createdAt:eR.z.string().or(eR.z.number()),meta:eR.z.object({project:eR.z.string(),file:eR.z.string()})}).pick({id:!0,title:!0,description:!0,source:!0,code:!0,createdAt:!0,meta:!0});let e_=eR.z.enum(["registry:style","registry:lib","registry:example","registry:block","registry:component","registry:ui","registry:hook","registry:theme","registry:page","registry:file","registry:internal","registry:item"]),eO=eR.z.discriminatedUnion("type",[eR.z.object({path:eR.z.string(),content:eR.z.string().optional(),type:eR.z.enum(["registry:file","registry:page"]),target:eR.z.string()}),eR.z.object({path:eR.z.string(),content:eR.z.string().optional(),type:e_.exclude(["registry:file","registry:page"]),target:eR.z.string().optional()})]),eF=eR.z.object({config:eR.z.object({content:eR.z.array(eR.z.string()).optional(),theme:eR.z.record(eR.z.string(),eR.z.any()).optional(),plugins:eR.z.array(eR.z.string()).optional()}).optional()}),eV=eR.z.object({light:eR.z.record(eR.z.string(),eR.z.string()).optional(),dark:eR.z.record(eR.z.string(),eR.z.string()).optional()}),eB=eR.z.object({$schema:eR.z.string().optional(),name:eR.z.string(),type:e_,title:eR.z.string().optional(),author:eR.z.string().min(2).optional(),description:eR.z.string().optional(),dependencies:eR.z.array(eR.z.string()).optional(),devDependencies:eR.z.array(eR.z.string()).optional(),registryDependencies:eR.z.array(eR.z.string()).optional(),files:eR.z.array(eO).optional(),tailwind:eF.optional(),cssVars:eV.optional(),meta:eR.z.record(eR.z.string(),eR.z.any()).optional(),docs:eR.z.string().optional(),categories:eR.z.array(eR.z.string()).optional()});eR.z.object({version:eR.z.literal(2),id:eR.z.string(),payload:eB,source:eR.z.object({title:eR.z.string(),url:eR.z.string(),description:eR.z.string().optional()}),createdAt:eR.z.string().or(eR.z.number()),meta:eR.z.object({project:eR.z.string(),file:eR.z.string()})}).pick({id:!0,version:!0,payload:!0,source:!0,createdAt:!0,meta:!0}),eB.extend({meta:eP.z.object({blockId:eP.z.string().optional(),templateId:eP.z.string().optional(),images:eP.z.array(eP.z.object({url:eP.z.string(),name:eP.z.string(),size:eP.z.number()})).optional(),author:eP.z.string().min(2,"Author is required and must be at least 2 characters long."),env:eP.z.array(eP.z.object({name:eP.z.string(),url:eP.z.string().optional()})).optional()})}),eP.z.object({filename:eP.z.string().min(1).max(100),file:eP.z.instanceof(ArrayBuffer).refine(e=>e.byteLength>0).refine(e=>e.byteLength/1048576<=5)});let ez=1e4;eP.z.object({blockId:eP.z.string(),description:eP.z.string().max(ez,"Description must be less than ".concat(ez," characters.")).optional(),imageUrl:eP.z.string().url("Please upload an image for your template.").optional().or(eP.z.literal("")),category:eP.z.enum(["apps-and-games","components","forms","dashboards","landing-pages","login-and-sign-up","blog-and-portfolio","ecommerce","ai"],{required_error:"Category is required",invalid_type_error:"Category is invalid"}),envVarKeys:eP.z.array(eP.z.string()).optional()}).extend({imageUrl:eP.z.string().url("Please upload an image for your template.").nullable().optional()});var eH=e.i(592258),eU=e.i(132440),eq=i,eW=d,eZ=o,eG=e.i(211976),eK=$;function eX(e){let{isPending:t,values:n,setValues:r,files:i,uploading:a,removeFile:o,inputFileRef:s,onInputChange:l,awaitingThumbnail:c}=e;return(0,eM.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,eM.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,eM.jsx)("div",{className:"text-label-14 text-gray-500",children:"Thumbnail (1920 x 1080 recommended)"}),c?(0,eM.jsx)(eK.Skeleton,{className:"aspect-video w-full"}):i.length>0&&i[0].url&&!a?(0,eM.jsxs)(eD.Card,{className:"relative aspect-video w-full overflow-hidden rounded-lg",children:[(0,eM.jsx)(eq.Button,{disabled:t,variant:"secondary",className:"absolute right-2 top-2 z-10 size-7 rounded-md",onClick:()=>{var e;return o(null==(e=i[0])?void 0:e.id)},tooltip:{content:"Remove thumbnail",side:"bottom"},children:(0,eM.jsx)(eZ.Trash,{})}),(0,eM.jsx)(eI.default,{src:i[0].url,alt:"Template thumbnail",className:"pointer-events-none z-0 object-cover",fill:!0})]}):(0,eM.jsx)(eD.Card,{className:"bg-muted relative aspect-video w-full",children:(0,eM.jsxs)("label",{className:"flex size-full flex-col items-center justify-center gap-3",children:[(0,eM.jsx)(eW.CloudUpload,{className:"size-4 text-gray-500!"}),(0,eM.jsx)("div",{className:"text-label-14 text-gray-500",children:"Drop or upload a thumbnail here"}),(0,eM.jsx)(eG.SpinnerButton,{variant:"secondary",pending:a,onClick:e=>{var t;e.preventDefault(),e.stopPropagation(),null==(t=s.current)||t.click()},children:a?"Uploading":"Upload"}),(0,eM.jsx)("input",{accept:"image/*",className:"sr-only",max:1,type:"file",onChange:l,ref:s,disabled:t||a})]})})]}),(0,eM.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,eM.jsxs)(eT.Label,{htmlFor:"category",className:"text-label-14 text-gray-500",children:["Category",(0,eM.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,eM.jsxs)(eH.Select,{value:(0,eU.getTemplateCategory)(n.category),disabled:t,onValueChange:e=>r(t=>({...t,category:e})),required:!0,children:[(0,eM.jsx)(eH.SelectTrigger,{id:"category",className:"disabled:border-alpha-300 disabled:bg-gray-100 disabled:text-gray-400 disabled:opacity-100 disabled:ring-0",children:(0,eM.jsx)(eH.SelectValue,{placeholder:"Select a category"})}),(0,eM.jsx)(eH.SelectContent,{children:eU.templateCategories.map(e=>(0,eM.jsx)(eH.SelectItem,{value:e.value,children:e.text},e.value))})]})]}),(0,eM.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,eM.jsx)(eT.Label,{htmlFor:"description",className:"text-label-14 text-gray-500",children:"Description"}),null===n.description?(0,eM.jsx)(eK.Skeleton,{className:"h-48 w-full"}):(0,eM.jsx)(eA.Textarea,{asChild:!0,children:(0,eM.jsx)(eL.ResizableTextArea,{maxHeight:192,minHeight:80,disabled:t,id:"description",maxLength:ez,name:"description",placeholder:"Describe your template...",spellCheck:!1,onChange:e=>r(t=>({...t,description:e.target.value})),value:n.description||""})})]})]})}e.s(["CommunityDetails",()=>eX],196606);var e$=ev,eY=(0,e$.createServerReference)("408a0182dfdbe67f17e394787d34536c1830145e37",e$.callServer,void 0,e$.findSourceMapURL,"editTemplateAction");e.s(["editTemplateAction",()=>eY],599921);var eJ=ev,eQ=(0,eJ.createServerReference)("6051b290e0a7183f0d44e3e0b3c07e38f10c3d4790",eJ.callServer,void 0,eJ.findSourceMapURL,"updateProjectSettingsCommunityEnabled");e.s(["updateProjectSettingsCommunityEnabled",()=>eQ],366064)},723073,689253,e=>{"use strict";var t=e.i(832520),n=e.i(200407),r=e.i(196606),i=e.i(183673),a=e.i(599921);e.i(563948);var o=e.i(407562),s=e.i(211976),l=e.i(990453),c=e.i(707974),u=e.i(502398),d=e.i(392736),p=e.i(297239),h=e.i(366064),f=e.i(484569),m=e.i(376346),g=e.i(762585),v=e.i(132440);function x(e){var x;let{projectId:y,containerRef:b}=e,w=(0,p.useT)(),{data:j,mutate:C}=(0,i.useCommunityProject)(y),k=(0,i.useCanMakeProjectUpdates)(),[S,N]=(0,n.useTransition)(),[E,M]=(0,n.useState)(!1),[I,D]=(0,n.useState)(!1),[T,A]=(0,n.useOptimistic)(!!((null==j?void 0:j.templateCanonId)&&!j.deletedAt)),L=(null==j?void 0:j.templateVersion)?j.templateVersion.description:null,[P,R]=(0,n.useState)({description:L,category:null!=(x=(0,v.getTemplateCategory)(null==j?void 0:j.category))?x:null}),_=(null==j?void 0:j.category)!==null&&(null==j?void 0:j.templateVersion.description)!==null&&(null==j?void 0:j.templateVersion.imageUrl)!==null,{files:O,uploading:F,removeFile:V,inputFileRef:B,onInputChange:z,setInitialFiles:H}=(0,f.useTemplateFileUpload)({initialImages:(null==j?void 0:j.templateVersion)&&j.templateVersion.imageUrl?[{url:j.templateVersion.imageUrl,name:"Current Image"}]:[],disableDrag:!1,containerRef:b}),U=()=>j?P.category?O.length&&"success"===O[0].status?void N(async()=>{var e;let t=await (0,a.editTemplateAction)({blockId:j.templateVersion.blockId,description:P.description||"",category:null!=(e=P.category)?e:void 0,imageUrl:O[0].url});if(t.error)return void o.toast.error(t.error);o.toast.success("Update successful")}):void o.toast.error("Please add a thumbnail image"):void o.toast.error("Please select a category"):void o.toast.error("Template not found");(0,n.useEffect)(()=>{j&&"templateVersionId"in j&&!j.templateVersionId.startsWith("none-")&&(R(e=>{var t;return{description:j.templateVersion.description||e.description,category:null!=(t=(0,v.getTemplateCategory)(j.category||e.category))?t:null}}),j.templateVersion.imageUrl?(H([{url:j.templateVersion.imageUrl,name:"Current Image"}]),D(!1)):D(!0))},[j,H,I]);let q=e=>{S||(e&&M(!0),(0,n.startTransition)(async()=>{try{A(e);let t=await (0,h.updateProjectSettingsCommunityEnabled)(y,e);await C(),e?void 0!==t&&"templateVersionId"in t&&!t.templateVersionId.startsWith("none-")?o.toast.success("Your project has been enabled for v0 Community"):o.toast.success("Your project will be enabled for v0 Community after the next successful deployment"):o.toast.success("Your project is no longer visible on v0 Community")}catch(e){o.toast.error("Failed to update Community Status")}finally{M(!1)}}))},W=j&&"templateVersionId"in j&&!j.templateVersionId.startsWith("none-");return(0,t.jsxs)("div",{className:"flex size-full flex-col",children:[(0,t.jsxs)("div",{className:"z-0 flex grow flex-col gap-4 overflow-y-auto p-4",children:[(0,t.jsxs)("div",{className:"bg-background-subtle border-alpha-200 flex items-center justify-between rounded-lg border p-3",children:[(0,t.jsxs)(c.Label,{className:"flex cursor-pointer flex-col gap-1",htmlFor:"project-community-switch",children:[(0,t.jsxs)("span",{className:"flex gap-2 font-medium leading-[16px] text-gray-900",children:[(0,t.jsx)("span",{children:w("projectCommunity.title")}),(null==j?void 0:j.templateCanonId)&&!j.templateVersionId.startsWith("none-")&&(0,t.jsx)(u.Link,{href:"/community/".concat(j.templateCanonId),target:"_blank",children:(0,t.jsx)(d.External,{})})]}),(0,t.jsx)("span",{className:"text-gray-500",children:w("projectCommunity.description")()})]}),(0,t.jsx)(l.Switch,{id:"project-community-switch",checked:T,onCheckedChange:q,disabled:!k})]}),T&&(E?(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("div",{className:"text-label-14 text-gray-500",children:"Thumbnail (1920 x 1080 recommended)"}),(0,t.jsx)(g.Skeleton,{className:"aspect-video w-full"})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsxs)(c.Label,{htmlFor:"category",className:"text-label-14 text-gray-500",children:["Category",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(g.Skeleton,{className:"h-10 w-full"})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)(c.Label,{htmlFor:"description",className:"text-label-14 text-gray-500",children:"Description"}),(0,t.jsx)(g.Skeleton,{className:"h-48 w-full"})]})]}):W?(0,t.jsx)(r.CommunityDetails,{isPending:S,values:P,setValues:R,files:O,uploading:F,removeFile:V,inputFileRef:B,onInputChange:z,awaitingThumbnail:I}):(0,t.jsxs)(m.Card,{className:"bg-muted flex aspect-video w-full flex-col items-center justify-center gap-2",children:[(0,t.jsx)("div",{className:"text-label-14 font-medium",children:"No Template Version"}),(0,t.jsx)("div",{className:"text-label-14 text-pretty text-center text-gray-500",children:"Your project will be enabled for v0 Community after the next successful deployment"})]}))]}),T&&W&&(0,t.jsx)("div",{className:"bg-muted shrink-0 border-t p-4",children:(0,t.jsx)(s.SpinnerButton,{className:"w-full",size:"sm",pending:S,disabled:F||!_,onClick:U,children:S?"Saving":"Save Changes"})})]})}e.s(["default",()=>x],723073);var y=t,b=n,w=e.i(89440),j=e.i(548866),C=e.i(612161),k=g,S=n;e.i(472428);var N=e.i(152641);let E=new Map;function M(e){let{deploymentId:t}=e,[n,r]=(0,S.useState)(void 0),{data:i}=(0,N.useServerQuerySWR)(["deployment","logs"],{deploymentId:t,since:n},{refreshInterval:1e3,keepPreviousData:!0}),[a,o]=(0,S.useState)([]),s=(0,S.useRef)(new Map);return(0,S.useEffect)(()=>{E.has(t)||E.set(t,new Map),s.current=E.get(t)},[t]),(0,S.useEffect)(()=>{var e;r(i.nextSince),(null!=(e=i.logs)?e:[]).forEach(e=>{e.id&&s.current.set(e.id,e)}),o(Array.from(s.current.values()))},[i]),{logs:a,data:i}}var I=n;function D(){let e=(0,I.useRef)(null),t=(0,I.useRef)(!0);return(0,I.useEffect)(()=>{let n=e.current;if(!n)return;let r=()=>{let{scrollHeight:e,scrollTop:r,clientHeight:i}=n;t.current=e-r-i<200},i=()=>{if(e.current&&t.current){let{scrollHeight:t,scrollTop:n,clientHeight:r}=e.current,i=t-n-r;e.current.scrollTo({top:e.current.scrollHeight,behavior:i>700?"auto":"smooth"})}},a=new ResizeObserver(i),o=new MutationObserver(i);return n.addEventListener("scroll",r),a.observe(n),o.observe(n,{childList:!0,subtree:!0,characterData:!0}),i(),()=>{n.removeEventListener("scroll",r),a.disconnect(),o.disconnect()}},[]),e}function T(e){let{deploymentId:t}=e,n=D(),{logs:r,data:i}=M({deploymentId:t}),a=(0,b.useMemo)(()=>0===r.length?(0,y.jsx)(k.Skeleton,{className:"h-full w-full"}):i.logs?(0,y.jsx)("div",{className:"text-[7px] font-mono flex flex-col",children:r.map(e=>{var t;return(0,y.jsx)("span",{className:A({level:null!=(t=e.level)?t:"info"}),children:(0,y.jsx)("span",{className:"overflow-wrap-anywhere break-all",children:e.text})},e.id)})}):(0,y.jsx)(j.EmptyState,{title:"Unable to fetch logs",variant:"error",icon:(0,y.jsx)(C.Stop,{}),children:"There was an error deploying your chat. Please try again."}),[i,r]);return(0,y.jsx)("div",{className:"no-scrollbar flex h-full w-full flex-col overflow-y-scroll",ref:n,children:a})}let A=(0,w.cva)("relative flex flex-row items-start px-2 py-[2px] first:pt-1 last:pb-1",{variants:{level:{info:"text-gray-700",error:"bg-red-50 text-red-700",warning:"bg-amber-50 text-amber-700"}}});e.s(["DeploymentLogs",()=>T],689253)},633035,582010,369218,e=>{"use strict";var t=e.i(832520),n=e.i(612161),r=e.i(762585),i=e.i(299313),a=e.i(780292),o=e.i(200407),s=e.i(470259),l=e.i(452703),c=e.i(689253);e.i(528517);var u=e.i(435106),d=e.i(373998);function p(e){let{deploymentId:p}=e,h=(0,l.getDeploymentAtoms)(p),{deployment:f,error:m}=(0,a.useAtomValue)(h.status),g=(0,a.useAtomValue)(h.state),v=(0,a.useAtomValue)((0,u.getUserInputAtoms)().isPointerDown),x=(0,d.getChatDeploymentAtoms)(p),y=(0,a.useAtomValue)(x.hasDeployableChanges),b=(0,o.useMemo)(()=>{if(m&&m!==s.NOT_FOUND)return(0,t.jsx)(n.Stop,{className:"size-4 !text-red-600"});switch(g){case"queued":case"deploying":return(0,t.jsx)("div",{className:"text-label-14 flex items-center justify-center gap-2 text-gray-500",children:"Loading..."});case"building":case"failed":case"error":if(!f)return null;return(0,t.jsx)("div",{className:"group relative h-full w-full",children:(0,t.jsx)(c.DeploymentLogs,{deploymentId:f.id})});case"deployed":case"not-deployed":return(0,t.jsx)("div",{className:"group relative flex h-full w-full items-center justify-center overflow-hidden",children:(null==f?void 0:f.screenshotUrl)?(0,t.jsx)(i.default,{src:f.screenshotUrl,alt:"Deployment Card Preview",width:480,height:360,className:"absolute h-full w-full object-cover transition-all duration-300 group-hover:scale-105"}):(0,t.jsx)(r.Skeleton,{})});default:return(0,t.jsx)(n.Stop,{className:"size-4 !text-red-600"})}},[m,g,v,f,y]);return(0,o.useMemo)(()=>m?"error":g,[m,g]),(0,t.jsx)("div",{className:"border-alpha-400 bg-muted relative flex h-[88px] w-[130px] items-center justify-center overflow-hidden rounded-md border",children:b})}e.s(["DeploymentPreview",()=>p],633035);var h=t,f=r,m=e.i(403055);function g(e){let{title:t,children:n,className:r,...i}=e;return(0,h.jsxs)("div",{className:(0,m.cn)("flex min-w-0 flex-col items-start gap-1 overflow-hidden",r),...i,children:[t?(0,h.jsx)(g.Title,{children:t}):null,n]})}g.Title=function(e){let{children:t}=e;return(0,h.jsx)("span",{className:"text-label-14 text-gray-500",children:t})},g.Item=function(e){let{children:t,Icon:n,mono:r=!1,className:i,...a}=e;return(0,h.jsxs)("div",{className:(0,m.cn)("flex h-5 w-full min-w-0 items-center gap-2 *:truncate [&_a:hover]:underline",r?"text-label-13-mono":"text-label-14",i),...a,children:[n?(0,h.jsx)("span",{className:"min-w-4 text-gray-500",children:(0,h.jsx)(n,{className:"flex-none"})}):null,t]})},g.ItemSkeleton=function(e){let{width:t}=e;return(0,h.jsx)(g.Item,{children:(0,h.jsx)(f.Skeleton,{className:"h-4 w-full",style:{width:t}})})},e.s(["Attribute",()=>g],582010);let v="LOADING_SKELETON";e.s(["LOADING_SKELETON",0,v],369218)},251198,749709,390510,e=>{"use strict";e.s(["Deployment",()=>ey,"NewDeployment",()=>ew],251198);var t=e.i(832520),n=e.i(633035),r=e.i(762585),i=e.i(200407),a=t,o=e.i(780292),s=i,l=e.i(996174),c=e.i(304649),u=e.i(452703),d=e.i(582010),p=e.i(356388),h=e.i(418565),f=e.i(54631),m=e.i(491341),g=r,v=e.i(369218),x=e.i(675120),y=e.i(230766),b=e.i(350097),w=e.i(455690);function j(e){let{deploymentId:t}=e,n=(0,u.getDeploymentAtoms)(t),{deployment:r}=(0,o.useAtomValue)(n.status),i=(0,s.useMemo)(()=>{if(!r)return(0,a.jsx)(d.Attribute,{children:(0,a.jsx)(d.Attribute.Item,{children:"No domains available"})});let e=r.filteredAliases.filter(e=>e.alias!==r.bestDomain);return(0,a.jsx)(d.Attribute,{title:r.git?"Domain":"",children:(0,a.jsx)(d.Attribute.Item,{children:r.bestDomain!==v.LOADING_SKELETON&&r.bestDomain?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.default,{href:(0,c.addProtocol)(r.bestDomain),target:"_blank",children:r.bestDomain}),(0,a.jsx)(p.ExternalSmall,{className:"-ml-1 min-w-4"}),e.length?(0,a.jsx)(l.Tooltip,{delayDuration:200,disableHoverableContent:!1,content:(0,a.jsx)("div",{className:"flex flex-col gap-1 px-1.5",children:(0,a.jsx)("ul",{children:e.map(e=>(0,a.jsxs)("li",{className:"flex items-center justify-center space-x-1 text-[11px]",children:[(0,a.jsx)("a",{href:(0,c.addProtocol)(e.alias),target:"_blank",className:"hover:underline",children:e.alias}),(0,a.jsx)(p.ExternalSmall,{className:"min-w-4"})]},e.alias))})}),children:(0,a.jsxs)("span",{className:"flex h-6 w-6 cursor-default select-none items-center justify-center rounded-full bg-gray-100 text-[10px] font-medium text-gray-600",children:["+",e.length]})}):null]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.Skeleton,{className:"h-4 w-[180px]"}),(0,a.jsx)(p.ExternalSmall,{className:"-ml-1 min-w-4"})]})})})},[r]),y=(0,s.useMemo)(()=>{let e=null==r?void 0:r.git;if(e){let n=e.ref,r=e.sha,i="https://github.com/".concat(e.ownerName,"/").concat(e.repoName),o="".concat(i,"/tree/").concat(n),s="".concat(i,"/commit/").concat(r),l=(0,a.jsx)("span",{className:"text-label-13-mono",children:r.substring(0,7)});return(0,a.jsxs)(d.Attribute,{title:"Source",children:[(0,a.jsx)(d.Attribute.Item,{Icon:h.GitBranch,children:(0,a.jsx)(m.default,{href:o,target:"_blank",className:"text-label-13-mono",children:n})}),(0,a.jsxs)(d.Attribute.Item,{Icon:f.GitCommit,children:[r===v.LOADING_SKELETON?(0,a.jsx)(g.Skeleton,{className:"h-4 select-none text-transparent",children:l}):(0,a.jsx)(m.default,{href:s,target:"_blank",className:"inline-flex gap-2",children:l}),(0,a.jsx)("span",{children:"•"}),(0,a.jsx)(C,{shortHand:!0,deploymentId:t})]})]})}return(0,a.jsx)(d.Attribute,{children:(0,a.jsx)(d.Attribute.Item,{children:(0,a.jsx)(C,{deploymentId:t})})})},[null==r?void 0:r.git,t]);return(0,a.jsx)(x.TransitionNode,{...x.PRESETS.fade,renderKey:t,childClassName:"overflow-hidden",children:(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[i,y]})})}function C(e){let{deploymentId:t,shortHand:n=!1}=e,r=(0,u.getDeploymentAtoms)(t),{deployment:i}=(0,o.useAtomValue)(r.status),[l,c]=(0,s.useState)(0);return((0,s.useEffect)(()=>{if(!(null==i?void 0:i.createdAt))return;let e=setInterval(()=>{i.createdAt>Date.now()-65e3&&c(l+1)},200);return()=>clearInterval(e)},[i,l,c]),i&&i.creator)?(0,a.jsxs)("div",{className:"text-label-14 flex items-center gap-1.5 tabular-nums",children:[(0,a.jsxs)("span",{children:[(0,a.jsx)("span",{children:n?null:"Last updated "}),(0,a.jsx)("span",{children:0===i.createdAt?"Just now":(0,b.timeAgo)(new Date(i.createdAt),!0,Date.now(),!1)})]}),(0,w.isGithubCommitByV0Bot)(i)?null:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.AvatarUser,{userId:i.creator.uid,rounded:!0,size:"xs"}),(0,a.jsx)("span",{className:"font-medium",children:i.creator.username})]})]}):null}e.i(472428);var k=e.i(152641),S=t,N=o,E=u,M=x,I=e.i(373998),D=t,T=e.i(690733),A=e.i(460265);let L=e=>{let{title:t,icon:n,onClick:r,label:i,disabled:a,disabledReason:o,badge:s}=e;return(0,D.jsx)(T.TooltipProvider,{children:(0,D.jsxs)(T.Tooltip,{delayDuration:0,children:[(0,D.jsx)(T.TooltipTrigger,{asChild:!0,children:(0,D.jsxs)("button",{className:"group disabled:cursor-not-allowed w-full flex flex-row justify-between items-center disabled:hover:bg-transparent hover:bg-gray-100 rounded-[6px] transition-all duration-200 px-2 h-9",onClick:r,disabled:a,type:"button",children:[(0,D.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,D.jsx)("span",{style:{color:a?"var(--color-gray-500)":"inherit"},children:n}),(0,D.jsx)("span",{className:"text-label-14 group-disabled:text-gray-500",children:t}),(0,D.jsx)("div",{className:"mb-0.5",children:s})]}),(0,D.jsxs)("div",{className:"flex flex-row justify-center items-center gap-x-1",children:[i&&(0,D.jsx)("span",{className:"text-label-14 text-gray-500",children:i}),(0,D.jsx)(A.ChevronRightSmall,{className:"!text-gray-500 size-4"})]})]})}),a&&o&&(0,D.jsx)(T.TooltipContent,{side:"left",children:o})]})})};e.s(["default",0,L],749709);var P=k;e.i(904347);var R=e.i(37737),_=e.i(512817),O=e.i(86395),F=e.i(941088);let V=(0,e.i(605528).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M1 1V12.75C1 13.9926 2.00736 15 3.25 15H15V13.5H3.25C2.83579 13.5 2.5 13.1642 2.5 12.75V1H1ZM14.2971 6.01303L14.8101 5.46596L13.716 4.43989L13.2029 4.98697L9.98259 8.42099L7.707 6.14629C7.31646 5.75589 6.6834 5.75595 6.29293 6.14642L4.21967 8.21967L3.68934 8.75L4.75 9.81066L5.28033 9.28033L7.0001 7.56057L9.28723 9.84681C9.68667 10.2461 10.3373 10.2356 10.7236 9.82361L14.2971 6.01303Z" fill="currentColor"/>');var B=e.i(242759),z=T,H=e.i(751660),U=e.i(794593),q=e.i(346970),W=e.i(403055),Z=r;function G(e){var t,n,r,i;let{deploymentId:a,chatId:o}=e,s=(0,E.getDeploymentAtoms)(a),{deployment:l}=(0,N.useAtomValue)(s.status),c=(0,I.getChatDeploymentAtoms)(o),u=(0,N.useAtomValue)(c.deploymentState),{git:d}=(0,N.useAtomValue)(c.externalMeta),p=(0,N.useAtomValue)(c.hasDeployableChanges),{setStageIntent:h,setTemplateAction:f}=(0,I.getChatDeploymentActions)(o),{data:m}=(0,P.useServerQuerySWR)(["chat","template"],{chatId:o}),{data:g}=(0,P.useServerQuerySWR)(["chat","project"],{chatId:o}),v="error"in g?null:g,x=(null==d?void 0:d.onProductionBranch)||!d,{dpe:y}=(0,B.useFlags)(),{data:b,isLoading:w}=(0,q.default)((null==v?void 0:v.vercelProjectId)?"/api/chat/deployment/analytics/aggregate?vercelProjectId=".concat(null==v?void 0:v.vercelProjectId):null,{fetcher:W.fetcher,refreshInterval:3e4,revalidateOnFocus:!0,revalidateOnReconnect:!0});if(!["deployed","not-deployed","queued","deploying","building"].includes(u))return null;let j=m&&"templateCanonId"in m;return(0,S.jsx)(M.TransitionNode,{...M.PRESETS.fade,renderKey:a,childClassName:"overflow-hidden",children:(0,S.jsxs)("div",{className:"flex flex-col gap-1 p-3",children:[(0,S.jsx)(L,{title:"Customize Domain",disabled:!x,icon:(0,S.jsx)(_.PencilEdit,{className:"!text-gray-500 size-4"}),onClick:()=>{h("assign-domain")}}),(0,S.jsx)(L,{title:"Feature on Community",disabled:p,disabledReason:"Your changes must be published to feature your generation on the community.",icon:(0,S.jsx)(O.Globe,{className:"!text-gray-500 size-4"}),badge:K(null==m?void 0:m.templateVersion.publishedToCommunity),onClick:()=>{let e;m&&"templateCanonId"in m?(f("updated"),e=j?"publish-template-changes":"submit-as-template"):(f("created"),e="template-entry"),(0,R.openDialog)({type:"templateWizard",data:{chatId:o,initialStage:e}})},label:j?"Update":void 0}),(0,S.jsx)(L,{title:"Visibility",icon:(0,S.jsx)(F.Eye,{className:"!text-gray-500 size-4"}),onClick:()=>{h("password-protection")},label:(null==v||null==(n=v.vercelProject)||null==(t=n.project.passwordProtection)?void 0:t.deploymentType)==="all"?"Password Protected":(null==v||null==(i=v.vercelProject)||null==(r=i.project.ssoProtection)?void 0:r.deploymentType)==="all"?"SSO Protected":"Public",disabled:!y}),(0,S.jsx)(L,{title:"Inspect on Vercel",icon:(0,S.jsx)(X,{className:"!text-gray-500 size-4"}),disabled:!l,onClick:()=>l?window.open(l.inspectorUrl,"_blank"):null}),(0,S.jsx)(L,{title:"Analytics",badge:(null==b?void 0:b.enabled)||w?(0,S.jsx)(U.Badge,{size:"sm",variant:(null==b?void 0:b.visitors)?"blue":"secondary",children:w?(0,S.jsx)(Z.Skeleton,{}):"".concat((null==b?void 0:b.visitors)||0," ").concat((null==b?void 0:b.visitors)===1?"visitor":"visitors")}):void 0,icon:(0,S.jsx)(V,{className:"!text-gray-500 size-4"}),disabled:!l,onClick:()=>{let e=(null==l?void 0:l.inspectorUrl)?l.inspectorUrl.replace(/\/[^\/]*$/,"/analytics"):null;return e?window.open(e,"_blank"):null}})]})})}let K=e=>{let t=e=>{let{children:t,content:n}=e;return(0,S.jsx)(z.TooltipProvider,{children:(0,S.jsxs)(z.Tooltip,{delayDuration:0,children:[(0,S.jsx)(z.TooltipTrigger,{children:t}),(0,S.jsx)(z.TooltipContent,{className:"max-w-[300px]",children:n})]})})};switch(e){case"approved":return(0,S.jsx)(t,{content:"Your generation is live on the Community.",children:(0,S.jsx)(U.Badge,{variant:"blue",size:"sm",children:"Live"})});case"pending":return(0,S.jsx)(t,{content:"Your community submission is under approval. Once approved, it will be live.",children:(0,S.jsx)(U.Badge,{variant:"amber",size:"sm",children:"Pending"})});case"rejected":return(0,S.jsx)(t,{content:"Your community submission was rejected. Please update your submission and resubmit.",children:(0,S.jsx)(U.Badge,{variant:"red",size:"sm",children:"Rejected"})});case"private":return(0,S.jsx)(t,{content:"Your community submission is private. It will not be visible to the public.",children:(0,S.jsx)(U.Badge,{variant:"secondary",size:"sm",children:"Private"})});default:return(0,S.jsx)(t,{content:"Featuring your app in the community will allow people to view the generation and fork it.",children:(0,S.jsx)(U.Badge,{variant:"secondary",size:"sm",children:"Not Featured"})})}},X=(0,H.withNewIcon)('<path d="M2.5 11.25C2.5 12.4926 3.50736 13.5 4.75 13.5H6.5V15H4.75C2.67893 15 1 13.3211 1 11.25V9.5H2.5V11.25ZM15 11.25C15 13.3211 13.3211 15 11.25 15H9.5V13.5H11.25C12.4926 13.5 13.5 12.4926 13.5 11.25V9.5H15V11.25ZM11 4C11.5523 4 12 4.44772 12 5V11C12 11.5523 11.5523 12 11 12H5C4.44772 12 4 11.5523 4 11V5C4 4.44772 4.44772 4 5 4H11ZM5.5 10.5H10.5V5.5H5.5V10.5ZM6.5 2.5H4.75C3.50736 2.5 2.5 3.50736 2.5 4.75V6.5H1V4.75C1 2.67893 2.67893 1 4.75 1H6.5V2.5ZM11.25 1C13.3211 1 15 2.67893 15 4.75V6.5H13.5V4.75C13.5 3.50736 12.4926 2.5 11.25 2.5H9.5V1H11.25Z" fill="currentColor"/>');var $=t,Y=i,J=d,Q=r,ee=v,et=t,en=l,er=m;function ei(e){let{bestDomain:t,filteredAliases:n,className:r="",loading:i=!1}=e,a=e=>{window.open(e,"_blank")};return(0,et.jsxs)("div",{className:"relative flex items-center gap-2 ".concat(r," w-full"),children:[(0,et.jsx)("div",{className:"relative flex-1 w-full min-w-0",children:(0,et.jsx)(er.default,{href:"https://".concat(t),target:"_blank",children:(0,et.jsx)("div",{className:"pl-0.5 focus:outline-none box-border w-full text-[14px] transition-all duration-200 cursor-pointer truncate hover:underline",children:t})})}),n.length>0&&(0,et.jsx)(en.Tooltip,{content:(0,et.jsx)("div",{children:n.map((e,t)=>(0,et.jsx)("button",{onClick:()=>a(e.alias),className:"w-full px-2 py-1.5 text-left text-xs hover:bg-gray-50 hover:text-gray-900 transition-colors",children:e.alias},t))}),children:(0,et.jsx)("span",{className:"flex justify-center items-center text-xs font-medium text-gray-600 w-5 aspect-square hover:bg-gray-100 rounded-full transition-all duration-200 cursor-pointer",children:(0,et.jsxs)("div",{children:["+",n.length]})})})]})}var ea=o,eo=u;let es=e=>{let{deploymentId:t}=e,n=(0,eo.getDeploymentAtoms)(t),{deployment:r}=(0,ea.useAtomValue)(n.status),i=(0,ea.useAtomValue)(n.state),a="deploying"===i||"queued"===i||"building"===i;return(0,Y.useMemo)(()=>{if(!r)return(0,$.jsx)(J.Attribute,{children:(0,$.jsx)(J.Attribute.Item,{children:"No domains available"})});let e=r.filteredAliases.filter(e=>e.alias!==r.bestDomain);return r.bestDomain!==ee.LOADING_SKELETON&&r.bestDomain?(0,$.jsx)(ei,{bestDomain:r.bestDomain,filteredAliases:e,loading:a}):(0,$.jsx)(Q.Skeleton,{className:"h-[21px] w-full rounded-[6px] pl-2"})},[r,a])};var el=t,ec=h,eu=e.i(378249),ed=y,ep=w,eh=o,ef=u,em=i,eg=c;let ev=e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase(),ex=e=>{var t,n,r;let{deploymentId:i}=e,a=(0,ef.getDeploymentAtoms)(i),{deployment:o}=(0,eh.useAtomValue)(a.status),s=null==o||null==(t=o.git)?void 0:t.ref,l=(0,em.useMemo)(()=>{switch(null==o?void 0:o.readyState){case"READY":return(0,el.jsx)("div",{className:"w-4 h-4 rounded-full bg-green-100 flex items-center justify-center",children:(0,el.jsx)("div",{className:"w-2 h-2 rounded-full bg-green-600"})});case"BUILDING":case"QUEUED":case"INITIALIZING":return(0,el.jsxs)("div",{className:"relative w-4 h-4 rounded-full bg-amber-100 flex items-center justify-center",children:[(0,el.jsx)("div",{className:"w-2 h-2 rounded-full bg-amber-600"}),(0,el.jsx)("div",{className:"absolute w-2 h-2 top-1 left-1 rounded-full bg-amber-600 animate-ping opacity-80",style:{animationDuration:"1s"}})]});case"CANCELED":case"ERROR":case"NOTREADY":return(0,el.jsx)("div",{className:"w-4 h-4 rounded-full bg-red-100 flex items-center justify-center",children:(0,el.jsx)("div",{className:"w-2 h-2 rounded-full bg-red-600"})});default:return(0,el.jsx)("div",{className:"w-4 h-4 rounded-full bg-gray-100 flex items-center justify-center",children:(0,el.jsx)("div",{className:"w-2 h-2 rounded-full bg-gray-600"})})}},[null==o?void 0:o.readyState]);return o?(0,el.jsxs)(el.Fragment,{children:[(0,el.jsxs)("div",{className:"text-[14px] flex flex-row justify-start items-center gap-x-1 w-full overflow-hidden",children:[o&&!(0,ep.isGithubCommitByV0Bot)(o)?(0,el.jsx)(ed.AvatarUser,{userId:null==(n=o.creator)?void 0:n.uid,rounded:!0,size:"xs"}):(0,el.jsx)(eu.User,{className:"text-gray-500 w-4 aspect-square"})," ",(0,el.jsxs)("span",{className:"whitespace-nowrap shrink-0",children:["Updated"," ",o.bootedAt?(0,eg.formatDate)(new Date(o.bootedAt),Intl.DateTimeFormat().resolvedOptions().timeZone):null]}),s&&(0,el.jsxs)("div",{className:"flex items-center gap-x-1 flex-1 min-w-0 overflow-hidden",children:[(0,el.jsx)("span",{className:"text-gray-500 shrink-0",children:"•"}),(0,el.jsx)(ec.GitBranch,{className:"w-4 h-4 shrink-0"}),(0,el.jsx)("span",{className:"truncate",children:s})]})]}),(0,el.jsxs)("div",{className:"text-[14px] flex flex-row justify-start items-center gap-x-1",children:[l,(0,el.jsx)("span",{children:ev(null!=(r=o.readyState)?r:"")})]})]}):null};function ey(e){let{deploymentId:n,stopFetch:a=!1}=e;return(0,t.jsx)(i.Suspense,{fallback:(0,t.jsx)(r.Skeleton,{className:"h-[200px] w-full"}),children:(0,t.jsx)(eb,{deploymentId:n,stopFetch:a})})}function eb(e){let{deploymentId:r,stopFetch:i=!0}=e;return(0,k.useServerQuerySWR)(["deployment","status"],{deploymentId:r},{stopFetch:i}),(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsx)(n.DeploymentPreview,{deploymentId:r}),(0,t.jsx)(j,{deploymentId:r})]})}function ew(e){let{deploymentId:n,stopFetch:a=!1,chatId:o}=e;return(0,t.jsx)(i.Suspense,{fallback:(0,t.jsx)(r.Skeleton,{className:"h-[200px] w-full"}),children:(0,t.jsx)(ej,{deploymentId:n,stopFetch:a,chatId:o})})}function ej(e){let{deploymentId:r,stopFetch:i=!0,chatId:a}=e;return(0,k.useServerQuerySWR)(["deployment","status"],{deploymentId:r},{stopFetch:i}),(0,k.useServerQuerySWR)(["scoped","editableTemplates"],{}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("div",{className:"px-2.5 py-1.5 border-b",children:(0,t.jsx)("div",{className:"h-8 flex items-center pl-2 text-sm font-medium",children:"Published App"})}),(0,t.jsx)("div",{className:"p-4 w-full border-b border-alpha-400",children:(0,t.jsxs)("div",{className:"w-full flex flex-row justify-start items-start h-[88px]",children:[(0,t.jsx)(n.DeploymentPreview,{deploymentId:r}),(0,t.jsxs)("div",{className:"flex flex-col justify-between items-start h-full pl-3 flex-1 w-[258px]",children:[(0,t.jsx)(es,{deploymentId:r}),(0,t.jsx)(ex,{deploymentId:r})]})]})}),(0,t.jsx)(G,{deploymentId:r,chatId:a})]})}var eC=e.i(547259),ek=(0,eC.createServerReference)("601ac8662ddd2595094b4453f28ec5ce78048fbc57",eC.callServer,void 0,eC.findSourceMapURL,"updateProjectShowV0Button");e.s(["updateProjectShowV0Button",()=>ek],390510)},618262,324141,520605,404836,917772,849542,714249,365449,344290,857371,14791,416959,929110,167247,280419,348327,332991,251016,479963,e=>{"use strict";let t,n;e.s(["SettingsButton",()=>tx],618262);var r=e.i(832520),i=e.i(584497),a=e.i(53223),o=e.i(512817),s=e.i(850722),l=e.i(53708),c=e.i(86395),u=e.i(261883),d=e.i(292273),p=e.i(158510),h=e.i(270978),f=e.i(2077),m=e.i(556355),g=e.i(176248),v=e.i(297239),x=e.i(740292),y=e.i(246300),b=e.i(200407);e.s(["ProjectSettings",()=>ej,"createAddIntegrationUrl",()=>eb],324141);var w=r,j=b,C=g,k=e.i(187511),S=e.i(138471),N=e.i(727826),E=e.i(422294),M=e.i(7809),I=e.i(392736),D=e.i(183673),T=e.i(276507),A=v,L=e.i(60425),P=e.i(914897),R=e.i(92479),_=e.i(491320),O=e.i(242759),F=e.i(491341),V=e.i(480118),B=e.i(481498),z=e.i(667660),H=e.i(389697),U=e.i(906261);e.i(563948);var q=e.i(407562),W=e.i(770685),Z=a,G=e.i(780292),K=e.i(620678),X=e.i(472166),$=e.i(644471),Y=e.i(155893),J=e.i(471173),Q=e.i(966455),ee=e.i(921431),et=e.i(666425),en=e.i(304649),er=e.i(723073),ei=e.i(251198),ea=e.i(301331),eo=r,es=e.i(390510),el=D,ec=e.i(707974),eu=e.i(990453),ed=q,ep=e.i(32170),eh=e.i(676069);e.i(904347);var ef=e.i(37737),em=b,eg=v,ev=a;function ex(e){let{v0ProjectId:t}=e,n=(0,eg.useT)(),{showV0Button:r,mutate:i}=(0,el.useProjectShowV0Button)(t),{user:a}=(0,ep.useUser)(),o=(0,em.useMemo)(()=>{var e;return(0,eh.isFreePlan)(null!=(e=null==a?void 0:a.v0plan)?e:"")},[null==a?void 0:a.v0plan]),s=(0,em.useCallback)(async e=>{if(o)return void(0,ef.openDialog)({type:"upgradePlan"});i(e),(0,ev.track)("ToggleBuiltWithV0Button",{v0ProjectId:t,value:e});try{let r=await (0,es.updateProjectShowV0Button)(t,e);if("object"==typeof r&&"error"in r)throw Error(r.error);ed.toast.success(n("projectSettings.showV0Button.success")(e?n("projectSettings.showV0Button.success.shown"):n("projectSettings.showV0Button.success.hidden")))}catch(t){i(!e),ed.toast.error(n("projectSettings.showV0Button.error"))}},[o,i,n,t]),l=(0,em.useMemo)(()=>!!o||r,[o,r]);return(0,eo.jsxs)("div",{className:"bg-background-subtle border-alpha-400 flex items-center gap-2 justify-between rounded-lg border p-3",children:[(0,eo.jsxs)(ec.Label,{className:"flex cursor-pointer flex-col gap-1",htmlFor:"show-v0-button-switch",children:[(0,eo.jsx)("span",{className:"flex gap-2 font-medium leading-[16px] text-gray-900",children:n("projectSettings.showV0Button.label")}),(0,eo.jsx)("span",{className:"leading-[16px] text-gray-500",children:n("projectSettings.showV0Button.description")})]}),(0,eo.jsx)(eu.Switch,{id:"show-v0-button-switch",checked:l,onCheckedChange:s})]})}e.i(168204);var ey=e.i(225695);async function eb(e){let{v0ProjectId:t,chatId:n,integration:r,dashboardProject:i,teamSlug:a,source:o,messageId:s,needPrefix:l}=e;if(!t)return"";let c=await (0,H.createIntegrationLinkAction)({projectId:t,chatId:n||void 0,integrationId:r.id,integrationName:r.name,source:o,messageId:s});if(!c.success)return q.toast.error("Failed to start integration setup process."),"";let u=r.parentSlug||r.slug,d=new URLSearchParams;return(d.set("v0pid",t),d.set("token",c.token),l&&d.set("needPrefix","true"),r.parentSlug&&d.set("productId",r.id),i)?"https://vercel.com/v0/".concat(a,"/").concat(i.name,"/").concat(u,"?").concat(d.toString()):"https://vercel.com/v0/".concat(a,"/").concat(u,"?").concat(d.toString())}let ew=[{value:"overview",label:"Overview"},{value:"integrations",label:"Integrations"},{value:"env",label:"Environment Variables"},{value:"knowledge",label:"Knowledge"},{value:"community",label:"Community"}];function ej(e){var t,n,r;let{v0ProjectId:i,chatTitle:a,isSheetOpen:o,onOpenChange:s,initiatePolling:l,sheetOnly:c}=e,{cpe:u,bwvb:d}=(0,O.useFlags)(),p=(0,A.useT)(),h=(0,V.usePathname)(),{allBlocks:f}=(0,ea.useBlockHistory)({searchAll:!1}),m=(0,j.useMemo)(()=>{var e;return null==(e=f.findLast(e=>"code-project"===e.type))?void 0:e.id},[f]),{vercelProjectWithDashboard:g,isLoading:v}=(0,D.useVercelProject)({v0ProjectId:i}),{activeScope:x}=(0,z.useActiveScope)(),y=(0,_.useDefaultTeam)(),{reassignPending:b,handleReassignProject:H}=(0,P.useReassignProject)(),{chatId:en}=(0,R.useChatId)(),[eo,es]=(0,j.useState)(!1),[el,ec]=(0,j.useState)(!1),{activeScopeSlug:eu}=(0,z.useActiveScope)(),{refetchVercelProject:ed}=(0,D.useVercelProject)({v0ProjectId:i}),ep=(0,G.useSetAtom)(K.isSettingsSheetOpenAtom),{submit:eh}=(0,X.useV0Chat)(),[ef,em]=(0,G.useAtom)(K.settingsSheetTabAtom),eg=(0,G.useSetAtom)(K.settingsSheetTabAtom),ev=(0,j.useRef)(null),ej=null==g||null==(n=g.dashboardProject)||null==(t=n.productionDeployment)?void 0:t.id,ek=void 0!==o?o:eo,eS=(0,j.useCallback)(e=>{s?s(e):es(e),setTimeout(()=>{e||eg("overview")},200)},[s,eg]),eN=(0,j.useMemo)(()=>h.split("/").includes("projects"),[h]),eE=(0,j.useCallback)(e=>{e.preventDefault(),e.target instanceof Element&&e.target.closest("[data-sources-drop-container]")||e.stopPropagation()},[]);return(0,w.jsxs)(k.Sheet,{open:ek,onOpenChange:eS,children:[c?null:(0,w.jsx)(k.SheetTrigger,{asChild:!0,children:(0,w.jsx)(C.Button,{"aria-label":p("projectSettings.label"),className:"size-7 rounded-md px-1 py-1.5 text-gray-900",size:"sm",variant:"ghost",tooltip:{side:"bottom",content:"Project Settings"},children:(0,w.jsx)(N.SettingsGear,{})})}),(0,w.jsx)(k.SheetContent,{className:"sm:max-w-[550px]! pointer-events-auto flex w-screen flex-col gap-0 overflow-hidden p-0 data-[state=closed]:duration-300 data-[state=open]:duration-300","aria-describedby":void 0,onInteractOutside:e=>{el&&e.preventDefault()},onDragEnter:e=>{e.preventDefault(),e.stopPropagation()},onDragOver:e=>{e.preventDefault(),e.stopPropagation()},onMouseLeave:e=>{e.preventDefault(),e.stopPropagation()},onCloseAutoFocus:e=>{e.preventDefault()},onDrop:eE,side:"right",showClose:!1,ref:ev,children:i?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(k.SheetHeader,{className:"sticky gap-1 p-4 text-left",children:(0,w.jsxs)("div",{className:"flex w-full items-center justify-between gap-2",children:[(0,w.jsx)(k.SheetTitle,{className:"text-base",children:p("projectSettings.label")}),(0,w.jsxs)("div",{className:"flex gap-2",children:[!eN&&(0,w.jsx)(C.Button,{variant:"outline",className:"h-7 rounded-md",size:"sm",asChild:!0,children:(0,w.jsxs)(F.default,{href:"/chat/projects/".concat(i),target:"_blank",children:["View Project ",(0,w.jsx)(I.External,{})]})}),(0,w.jsx)(k.SheetClose,{asChild:!0,children:(0,w.jsx)(C.Button,{variant:"outline",className:"size-7 rounded-md",size:"sm",children:(0,w.jsx)(M.Cross,{})})})]})]})}),(0,w.jsxs)($.Tabs,{variant:"underline",value:ef,onValueChange:e=>{"overview"===e&&ed(),em(e)},className:"relative z-0 flex grow flex-col overflow-hidden",children:[(0,w.jsx)("div",{className:"from-background bg-linear-to-r pointer-events-none absolute -left-px top-0 z-10 h-[31px] w-6 to-transparent"}),(0,w.jsx)("div",{className:"from-background bg-linear-to-l pointer-events-none absolute -right-px top-0 z-10 h-[31px] w-6 to-transparent"}),(0,w.jsx)($.TabsList,{className:"no-scrollbar z-0 w-full shrink-0 overflow-x-auto px-2",children:ew.map(e=>(0,w.jsx)($.TabsTrigger,{value:e.value,children:e.label},e.value))}),(0,w.jsx)(eC,{value:"overview",children:(0,w.jsxs)("div",{className:"flex flex-col gap-4 p-4",children:[(0,w.jsx)(ee.VercelProject,{setSaving:ec,vercelProjectWithDashboard:g,isLoading:v,v0ProjectId:i,closeSettingsSheet:()=>eS(!1)}),(0,w.jsx)(et.Git,{vercelProjectWithDashboard:g,isLoading:v,v0ProjectId:i,closeSettingsSheet:()=>eS(!1),chatId:en,latestBlockId:m}),d&&(0,w.jsx)(ex,{v0ProjectId:i}),i&&ej&&(0,w.jsx)(ei.Deployment,{deploymentId:ej})]})}),(0,w.jsx)(eC,{value:"integrations",children:(0,w.jsx)(j.Suspense,{fallback:(0,w.jsx)(B.IntegrationOptionsSkeleton,{}),children:(0,w.jsx)(B.IntegrationOptions,{isV3:!1,vercelProjectId:null==g?void 0:g.project.id,onIntegrationClick:async(e,t,n,r,i)=>{if("blob"===e.slug)return void((await fetch("/chat/api/integrations/marketplace/storage/create-blob",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:"".concat(null==g?void 0:g.project.name,"-blob"),projectId:null==g?void 0:g.project.id})})).ok?(q.toast.success("Blob storage connected successfully"),(0,Z.track)("AddIntegration",{integrationSlug:"blob",chatId:en||"",source:"settings"}),ep(!1),eN||await eh({action:"new",attachments:[],content:(0,ey.createMDXMessageContent)("A blob store has been added to the [Vercel Project](".concat(null==g?void 0:g.project.url,").")),type:"added-integration",workflowState:"ask-user-for-next-steps",revalidateVercelEnvAndIntegrations:!0})):q.toast.error("Failed to connect blob storage"));let a=await eb({v0ProjectId:n||"",chatId:en||"",integration:e,dashboardProject:r,teamSlug:x&&(0,U.isUserScope)(x)?null!=y?y:"":null!=eu?eu:"",source:"settings",needPrefix:t});null==l||l(),a&&i?i.location.href=a:a&&window.open(a,"_blank")},vercelProjectName:null!=(r=null==g?void 0:g.project.name)?r:"",teamSlug:x&&(0,U.isUserScope)(x)?null!=y?y:"":null!=eu?eu:""})})}),(0,w.jsx)(eC,{value:"env",className:"p-4",children:(0,w.jsx)(Y.EnvVars,{setSaving:ec,vercelProjectId:null==g?void 0:g.project.id,v0ProjectId:i})}),(0,w.jsxs)(eC,{value:"knowledge",children:[(0,w.jsx)(J.Instructions,{setSaving:ec,projectId:i}),(0,w.jsx)(Q.Sources,{setSaving:ec,projectId:i})]}),u&&(0,w.jsx)(eC,{value:"community",className:"overflow-hidden",children:(0,w.jsx)(er.default,{projectId:i,containerRef:ev})})]})]}):(0,w.jsxs)("div",{className:"bg-muted flex grow flex-col items-center justify-center gap-3 rounded-md px-9 py-12",children:[(0,w.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,w.jsx)(T.EmptyIcon,{children:(0,w.jsx)(E.FolderClosed,{})}),(0,w.jsx)("p",{className:"font-medium text-gray-900",children:"Add to a Project"}),(0,w.jsx)("p",{className:"text-center text-sm text-gray-500",children:"Add this chat to a project to add instructions, sources, environment variables, integrations, and more."})]}),(0,w.jsx)(L.ProjectsDropdown,{className:"w-auto",handleProjectSelect:H,projectName:a,onSuccess:e=>{en&&(0,W.assignProjectToChat)({payload:{chatId:en,projectId:e}})},quickCreate:!0,align:"center",triggerButton:(0,w.jsxs)(C.Button,{size:"sm",variant:"secondary",disabled:b,children:[(0,w.jsx)(S.Plus,{}),"Add Project"]}),disabled:b})]})})]})}function eC(e){let{value:t,className:n,children:r}=e;return(0,w.jsx)($.TabsContent,{value:t,className:(0,en.cn)("grow overflow-y-auto",n),children:r})}var ek=b,eS=e.i(346970),eN=R,eE=O;function eM(e,t){let{mi:n}=(0,eE.useFlags)(),{chatId:r}=(0,eN.useChatId)(),i=(0,ek.useRef)(null),a=new URLSearchParams;r&&a.set("chatId",r),a.set("source",e.source),e.messageId&&a.set("messageId",e.messageId);let{data:o,mutate:s,isLoading:l}=(0,eS.default)(r&&n?"/chat/api/integrations/marketplace/link?".concat(a.toString()):null,async e=>{let t=await fetch(e);if(!t.ok){if(401===t.status){let e=await t.json();if((null==e?void 0:e.error)==="Unauthorized to edit this chat")return console.error("Not authorized to edit this chat"),{activeLinks:[],connectedLinks:null,shouldContinuePolling:!1}}throw Error("Failed to fetch integration links")}return await t.json()},{refreshInterval:e=>3e3*(null!=e&&!!e.shouldContinuePolling),revalidateOnFocus:!0,onSuccess:e=>{let{activeLinks:n}=e;if(0!==n.length){if(i.current){let e=i.current,r=[];for(let t of n){let n=e.find(e=>e.integrationLinkId===t.integrationLinkId);n&&!n.connected&&t.connected&&r.push(t)}r.length>0&&t(r)}i.current=n}}});return{connectedLinks:null==o?void 0:o.connectedLinks,refetchLinks:s,isLoading:l}}e.s(["useIntegrationLinks",()=>eM],520605);var eI=D,eD=ef,eT=G,eA=e.i(449381),eL=e.i(296046),eP=e.i(729602),eR=K,e_=r,eO=eL;e.i(142219);var eF=r;function eV(){return(0,eF.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,eF.jsx)("path",{d:"M0 8C0 3.58172 3.58172 0 8 0V0C12.4183 0 16 3.58172 16 8V8C16 12.4183 12.4183 16 8 16V16C3.58172 16 0 12.4183 0 8V8Z",fill:"#18181B"}),(0,eF.jsx)("path",{d:"M12.1998 9.32958C12.1998 6.90643 10.3194 4.10002 7.9998 4.10002C5.68021 4.10002 3.7998 6.90643 3.7998 9.32958C3.7998 11.7527 5.68021 11.9 7.9998 11.9C10.3194 11.9 12.1998 11.7527 12.1998 9.32958Z",stroke:"#D97706",strokeWidth:"1.5"})]})}function eB(){return(0,eF.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,eF.jsx)("path",{d:"M0 8.00001C0 3.58193 3.58192 0.000366211 8 0.000366211V0.000366211C12.4181 0.000366211 16 3.58193 16 8.00001V8.00001C16 12.4181 12.4181 15.9997 8 15.9997V15.9997C3.58192 15.9997 0 12.4181 0 8.00001V8.00001Z",fill:"#18181B"}),(0,eF.jsx)("path",{d:"M11.6702 4.24481C10.0485 2.58555 7.41938 2.58555 5.79776 4.24481C4.17614 5.90408 4.17614 8.59428 5.79776 10.2536L6.5318 9.50247C5.3156 8.25801 5.3156 6.24035 6.5318 4.99592C7.74802 3.75146 9.7199 3.75146 10.9361 4.99592L11.6702 4.24481Z",fill:"black"}),(0,eF.jsx)("path",{d:"M10.2025 5.7474C9.39174 4.91778 8.07712 4.91778 7.26632 5.7474C6.4555 6.57705 6.4555 7.92214 7.26632 8.75176L8.00037 8.00068C7.59496 7.58586 7.59496 6.91332 8.00037 6.49849C8.40577 6.08367 9.06305 6.08367 9.46848 6.49849L10.2025 5.7474Z",fill:"black"}),(0,eF.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.202 11.7552C8.58039 13.4144 5.95122 13.4144 4.32959 11.7552L5.06364 11.0041C6.27986 12.2486 8.25174 12.2486 9.46795 11.0041C10.6842 9.75966 10.6842 7.742 9.46795 6.49754L10.202 5.74646C11.8236 7.40573 11.8236 10.0959 10.202 11.7552ZM8.73479 10.2531C7.92396 11.0827 6.60939 11.0827 5.79858 10.2531L6.53263 9.50197C6.93803 9.91678 7.59532 9.91678 8.00074 9.50197C8.40614 9.08714 8.40614 8.41459 8.00074 7.99978L8.73479 7.2487C9.54559 8.07832 9.54559 9.42343 8.73479 10.2531Z",fill:"#58C591"}),(0,eF.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.79825 4.24499C7.41987 2.58573 10.049 2.58573 11.6707 4.24499L10.9366 4.9961C9.72039 3.75164 7.74851 3.75164 6.53229 4.9961C5.31609 6.24054 5.31609 8.25819 6.53229 9.50265L5.79825 10.2537C4.17662 8.59447 4.17662 5.90426 5.79825 4.24499ZM7.26632 5.74753C8.07712 4.91791 9.39174 4.91791 10.2025 5.74753L9.46848 6.49862C9.06305 6.0838 8.40577 6.0838 8.00037 6.49862C7.59496 6.91345 7.59496 7.586 8.00037 8.00081L7.26632 8.75189C6.4555 7.92227 6.4555 6.57718 7.26632 5.74753Z",fill:"#84DBBD"})]})}function ez(){return(0,eF.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,eF.jsx)("rect",{x:"0",width:"16",height:"16",rx:"8",fill:"#18181B"}),(0,eF.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.60645 5.13072C3.60645 4.29017 4.28784 3.60876 5.12838 3.60876H10.9117C11.7523 3.60876 12.4336 4.29017 12.4336 5.13072V10.0495C12.4336 10.9191 11.3332 11.2965 10.7995 10.6099L9.13105 8.46362V11.0663C9.13105 11.8228 8.51779 12.4361 7.76132 12.4361H5.12838C4.28784 12.4361 3.60645 11.7547 3.60645 10.9141V5.13072ZM5.12838 4.82633C4.96027 4.82633 4.82399 4.96261 4.82399 5.13072V10.9141C4.82399 11.0822 4.96027 11.2185 5.12838 11.2185H7.80699C7.89102 11.2185 7.9135 11.1504 7.9135 11.0663V7.57609C7.9135 6.70648 9.01392 6.32907 9.54761 7.01564L11.2161 9.16197V5.13072C11.2161 4.96261 11.232 4.82633 11.0639 4.82633H5.12838Z",fill:"#12FFF7"}),(0,eF.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.60645 5.13072C3.60645 4.29017 4.28784 3.60876 5.12838 3.60876H10.9117C11.7523 3.60876 12.4336 4.29017 12.4336 5.13072V10.0495C12.4336 10.9191 11.3332 11.2965 10.7995 10.6099L9.13105 8.46362V11.0663C9.13105 11.8228 8.51779 12.4361 7.76132 12.4361H5.12838C4.28784 12.4361 3.60645 11.7547 3.60645 10.9141V5.13072ZM5.12838 4.82633C4.96027 4.82633 4.82399 4.96261 4.82399 5.13072V10.9141C4.82399 11.0822 4.96027 11.2185 5.12838 11.2185H7.80699C7.89102 11.2185 7.9135 11.1504 7.9135 11.0663V7.57609C7.9135 6.70648 9.01392 6.32907 9.54761 7.01564L11.2161 9.16197V5.13072C11.2161 4.96261 11.232 4.82633 11.0639 4.82633H5.12838Z",fill:"url(#paint0_linear_6519_11262)"}),(0,eF.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.60645 5.13072C3.60645 4.29017 4.28784 3.60876 5.12838 3.60876H10.9117C11.7523 3.60876 12.4336 4.29017 12.4336 5.13072V10.0495C12.4336 10.9191 11.3332 11.2965 10.7995 10.6099L9.13105 8.46362V11.0663C9.13105 11.8228 8.51779 12.4361 7.76132 12.4361H5.12838C4.28784 12.4361 3.60645 11.7547 3.60645 10.9141V5.13072ZM5.12838 4.82633C4.96027 4.82633 4.82399 4.96261 4.82399 5.13072V10.9141C4.82399 11.0822 4.96027 11.2185 5.12838 11.2185H7.80699C7.89102 11.2185 7.9135 11.1504 7.9135 11.0663V7.57609C7.9135 6.70648 9.01392 6.32907 9.54761 7.01564L11.2161 9.16197V5.13072C11.2161 4.96261 11.232 4.82633 11.0639 4.82633H5.12838Z",fill:"url(#paint1_linear_6519_11262)"}),(0,eF.jsx)("path",{d:"M10.9121 3.60876C11.7527 3.60876 12.4341 4.29017 12.4341 5.13072V10.0495C12.4341 10.9191 11.3336 11.2965 10.7999 10.6099L9.13145 8.46362V11.0663C9.13145 11.8228 8.51822 12.4361 7.76172 12.4361C7.84578 12.4361 7.91393 12.3679 7.91393 12.2839V7.57609C7.91393 6.70648 9.01432 6.32907 9.54802 7.01564L11.2165 9.16197V3.91315C11.2165 3.74504 11.0802 3.60876 10.9121 3.60876Z",fill:"#B9FFB3"}),(0,eF.jsxs)("defs",{children:[(0,eF.jsxs)("linearGradient",{id:"paint0_linear_6519_11262",x1:"12.4336",y1:"12.4361",x2:"4.67168",y2:"3.60887",gradientUnits:"userSpaceOnUse",children:[(0,eF.jsx)("stop",{stopColor:"#B9FFB3"}),(0,eF.jsx)("stop",{offset:"1",stopColor:"#B9FFB3",stopOpacity:"0"})]}),(0,eF.jsxs)("linearGradient",{id:"paint1_linear_6519_11262",x1:"12.4336",y1:"12.4361",x2:"7.19057",y2:"10.3967",gradientUnits:"userSpaceOnUse",children:[(0,eF.jsx)("stop",{stopColor:"#1A1A1A",stopOpacity:"0.9"}),(0,eF.jsx)("stop",{offset:"1",stopColor:"#1A1A1A",stopOpacity:"0"})]})]})]})}function eH(){return(0,eF.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,eF.jsx)("rect",{x:"0",width:"16",height:"16",rx:"8",fill:"#18181B"}),(0,eF.jsxs)("g",{clipPath:"url(#clip0_6503_14101)",children:[(0,eF.jsx)("path",{d:"M8.78261 12.8805C8.53205 13.2061 8.02401 13.0277 8.01797 12.612L7.92969 6.53137H11.8921C12.6097 6.53137 13.01 7.38672 12.5637 7.9667L8.78261 12.8805Z",fill:"url(#paint0_linear_6503_14101)"}),(0,eF.jsx)("path",{d:"M8.78261 12.8805C8.53205 13.2061 8.02401 13.0277 8.01797 12.612L7.92969 6.53137H11.8921C12.6097 6.53137 13.01 7.38672 12.5637 7.9667L8.78261 12.8805Z",fill:"url(#paint1_linear_6503_14101)",fillOpacity:"0.2"}),(0,eF.jsx)("path",{d:"M7.17088 3.09614C7.42145 2.77051 7.9295 2.94893 7.93553 3.36467L7.97422 9.44525H4.06144C3.34373 9.44525 2.94344 8.5899 3.38974 8.00992L7.17088 3.09614Z",fill:"#3ECF8E"})]}),(0,eF.jsxs)("defs",{children:[(0,eF.jsxs)("linearGradient",{id:"paint0_linear_6503_14101",x1:"7.92969",y1:"7.87959",x2:"11.4836",y2:"9.32409",gradientUnits:"userSpaceOnUse",children:[(0,eF.jsx)("stop",{stopColor:"#249361"}),(0,eF.jsx)("stop",{offset:"1",stopColor:"#3ECF8E"})]}),(0,eF.jsxs)("linearGradient",{id:"paint1_linear_6503_14101",x1:"6.36839",y1:"5.6738",x2:"8.05436",y2:"8.74958",gradientUnits:"userSpaceOnUse",children:[(0,eF.jsx)("stop",{}),(0,eF.jsx)("stop",{offset:"1",stopOpacity:"0"})]}),(0,eF.jsx)("clipPath",{id:"clip0_6503_14101",children:(0,eF.jsx)("rect",{width:"9.60018",height:"10.182",fill:"white",transform:"translate(3.2002 2.90906)"})})]})]})}e.s(["BlobIcon",()=>eV,"NeonIcon",()=>ez,"SupabaseIcon",()=>eH,"UpstashIcon",()=>eB],404836);var eU=e.i(675120),eq=e.i(70165),eW=N,eZ=e.i(529693),eG=e.i(205341),eK=G,eX=b;let e$=(0,eG.atom)(!1);function eY(){let e=(0,eK.useAtomValue)(e$),t=(0,eq.useIsMobile)(),n=(0,eO.useIsChatPage)()&&e&&!t;return(0,e_.jsx)(eU.TransitionNode,{duration:e0,delay:eQ,justify:"center",children:n?(0,e_.jsx)(eJ,{}):(0,e_.jsx)(eW.SettingsGear,{})})}function eJ(){let e=(0,eK.useAtomValue)(e$),[t,n]=(0,eX.useState)(!1),r=(0,eX.useRef)(null);return(0,eX.useEffect)(()=>(r.current&&clearTimeout(r.current),e?r.current=setTimeout(()=>{n(!0)},tt):n(!1),()=>{r.current&&clearTimeout(r.current)}),[e]),(0,e_.jsxs)("div",{className:"flex items-center px-1.5",children:[(0,e_.jsx)("div",{className:"flex [&>*:not(:first-child)]:ml-[-4px]",children:[(0,e_.jsx)(eH,{},"supabase"),(0,e_.jsx)(ez,{},"neon"),(0,e_.jsx)(eB,{},"upstash")].map((e,t)=>(0,e_.jsx)(eZ.motion.div,{className:"border-background rounded-full border",initial:{opacity:0,x:8,scale:1.3},animate:{opacity:1,x:0,scale:1},transition:ti(e1,e4,te(t)),children:e},t))}),(0,e_.jsx)(eZ.motion.div,{initial:{width:0},animate:{width:t?"auto":0,marginLeft:6*!!t},transition:ti(e3,e7,tn),children:(0,e_.jsx)(eZ.motion.div,{initial:{opacity:0,scale:.9,filter:"blur(2px)"},animate:{opacity:1,scale:1,filter:"blur(0px)"},className:"flex items-center gap-1",transition:ti(e9,e6,tr),children:"Add Integration"})})]},"integrations")}let eQ=.4,e0=.6,e1=.4,e2=-.5,e5=.2,e4=.7,e3=.2,e7=.9,e9=.05,e6=.7,e8=1,te=e=>e8+e2+e5*e,tt=.7+e8+3*e5,tn=tt+-.65,tr=tt+-.65+.9+-.5,ti=(e,t,n)=>({type:"spring",bounce:e,delay:n,duration:t});var ta=r,to=r,ts=e.i(758118),tl=e.i(365290),tc=b;function tu(e){let{shouldMarch:t=!1,numberOfVisibleChildren:n=3,overlap:r=4,size:i=16,waitMs:a=500,stepDurationMs:o=700,children:s,animation:l,direction:c="horizontal"}=e,u=(0,tc.useRef)(null),[d,p]=(0,tc.useState)(0),[h,f]=(0,tc.useState)(!1),m=(0,tc.useRef)(0);if(tc.Children.count(s)<n+1)throw Error("children must be at least ".concat(n+1," items"));let g=(0,tc.useMemo)(()=>tc.Children.toArray(s),[s]),v=(0,tc.useMemo)(()=>[...g,...g.slice(0,n)],[g,n]),x=(0,tc.useCallback)(()=>{if(!u.current)return;let e=m.current;e===v.length-n?(f(!0),e=0):(f(!1),e+=1),p(e),m.current=e},[v.length,n]),y=(0,tc.useRef)(null),b=(0,tc.useRef)(null);(0,tc.useEffect)(()=>(t&&(b.current=setTimeout(()=>{x(),y.current=setInterval(()=>{x()},o)},a)),()=>{clearTimeout(b.current),clearInterval(y.current)}),[x,t,o,a]);let w=(0,tc.useMemo)(()=>{let e=d*i-d*r;return"horizontal"===c?"translateX(-".concat(e,"px)"):"translateY(-".concat(e,"px)")},[d,r,i,c]),j={duration:400,timingFunction:[.27,.04,.27,.97]};return(0,to.jsx)("div",{className:"relative overflow-visible",style:{width:"horizontal"===c?i*n-r*(n-1):i,height:"horizontal"===c?i:i*n-r*(n-1)},children:(0,to.jsx)("div",{ref:u,className:"horizontal"===c?"absolute flex":"absolute flex flex-col",style:{transform:w,...h?{}:(0,tl.transitionStyles)(["transform"],j)},children:tc.Children.map(v,(e,t)=>{var a;let o=t<d+n&&t>d-1;return(0,to.jsx)("div",{className:"absolute rounded-full",style:{width:i,height:i,..."horizontal"===c?{left:t*i-t*r}:{top:t*i-t*r},transform:o?"scale(1)":"scale(".concat(null!=(a=null==l?void 0:l.scale)?a:.5,")"),...(0,ts.visibleStylesIf)(o),...h?{}:(0,tl.transitionStyles)(["opacity","transform"],j)},children:e},"".concat(t,"-marching-child"))})})})}e.s(["MarchingChildren",()=>tu],917772);var td=eU;let tp=(0,e.i(605528).withNewIcon)('<path d="M12.25 14.25V10L12.9212 10.1119C14.1403 10.315 15.25 9.37496 15.25 8.13908V7.86092C15.25 6.62504 14.1403 5.68496 12.9212 5.88813L12.25 6V1.75H8.235L8.30764 2.50382C8.41075 3.57386 7.56957 4.5 6.49457 4.5C5.42349 4.5 4.58361 3.58031 4.68058 2.51362L4.75 1.75H0.75V14.25H12.25Z" stroke="currentColor" fill="transparent" stroke-width="1.5"/>');e.s(["Puzzle",0,tp],849542);var th=b;function tf(e){let{showIcons:t}=e,n=(0,th.useMemo)(()=>[ez,eH,eB,eV].map((e,t)=>(0,ta.jsx)(e,{},t)),[]);return(0,ta.jsx)(td.TransitionNode,{className:"h-4 w-4",enter:{y:16},exit:{y:-16},duration:.3,delay:.1,children:t?(0,ta.jsx)(tu,{shouldMarch:!0,size:16,stepDurationMs:1e3,direction:"vertical",numberOfVisibleChildren:1,overlap:-12,waitMs:1e3,animation:{scale:.85,transformMultiplier:.5},children:n}):(0,ta.jsx)(tp,{})})}var tm=z,tg=e.i(206037),tv=e.i(403055);function tx(e){let{projectId:t}=e,n=(0,eP.useChatId)(),w=(0,eA.useActiveBlockState)(),[j,C]=(0,b.useState)(!1),k=(0,eT.useAtomValue)(e$),[S,N]=(0,b.useState)(!1),{data:E}=(0,y.useChatFavorites)(),M=(0,b.useMemo)(()=>null==E?void 0:E.find(e=>e.chatId===n),[E,n]),{title:I}=(0,i.useChatMetadata)(),D=(0,v.useT)(),{setData:T}=(0,y.useChatHistory)(),[A,L]=(0,eT.useAtom)(eR.isSettingsSheetOpenAtom),P=(0,eT.useSetAtom)(eR.settingsSheetTabAtom),{refetchVercelProject:R}=(0,eI.useVercelProject)({v0ProjectId:t}),{refetchLinks:_}=eM({source:"settings"},async e=>{L(!1),e.forEach(e=>{(0,a.track)("AddIntegration",{integrationSlug:e.integrationName,chatId:e.chatId||"",source:e.source})}),t&&R()}),O=S||k,F=(0,eL.useIsChatPage)(),{activeScope:V,hasVercelWritePermission:B}=(0,tm.useActiveScope)(),{planSlug:z}=(0,tg.usePlanInfo)(!0,null==V?void 0:V.id),H="v0-enterprise"===z;function U(e){t&&((0,a.track)("OpenSettingsSheet",{projectId:t,tab:e}),P(e),L(!0))}let q=[{type:"item",Icon:(0,r.jsx)(p.GridSquare,{}),label:"Overview",onSelect:()=>{U("overview")}},{type:"item",Icon:(0,r.jsx)(tf,{showIcons:O}),label:"Integrations",onMouseEnter:()=>N(!0),onMouseLeave:()=>N(!1),onSelect:()=>{U("integrations")}},{type:"item",Icon:(0,r.jsx)(l.Variable,{}),label:"Env. Variables",onSelect:()=>{U("env")}},{type:"item",Icon:(0,r.jsx)(u.BookClosed,{}),label:"Knowledge",onSelect:()=>{U("knowledge")}},...H?[{type:"item",Icon:(0,r.jsx)(d.LockClosed,{}),label:"Password Protection",onSelect:()=>{t&&(0,eD.openDialog)({type:"passwordProtection",data:{projectId:t}})},isNew:!0}]:[],{type:"item",Icon:(0,r.jsx)(c.Globe,{}),label:"Community",onSelect:()=>{U("community")}},...B?[{type:"item",Icon:(0,r.jsx)(h.ArrowCrossed,{}),label:"Transfer Project",onSelect:()=>{(0,eD.openDialog)({type:"transferProject",data:{projectId:t}})}}]:[]],W=[{type:"item",Icon:(0,r.jsx)(o.PencilEdit,{}),label:D("chatOptionsDropdown.renameChat"),onSelect:()=>{n&&((0,a.track)("RenameChat",{targetChatId:n}),(0,eD.openDialog)({type:"updateChatTitle",data:{chatId:n}}))}},{type:"item",Icon:(0,r.jsx)(h.ArrowCrossed,{}),label:"Reassign Project",onSelect:()=>{n&&(0,eD.openDialog)({type:"reassignProject",data:{chatId:n}})}},{type:"component",component:(0,r.jsx)(x.FavoriteChatDropdownItem,{chat:{chatId:n||"NO_CHAT_ID",title:I||"",favorite:!!M,updatedAt:(null==M?void 0:M.updatedAt)||null},setChatHistoryData:T})},{type:"item",Icon:(0,r.jsx)(f.Duplicate,{}),label:D("forkBlockButton.fork"),onSelect:()=>{w&&n&&((0,a.track)("ClickForkBlock"),(0,eD.openDialog)({type:"forkBlock",data:{blockId:w.id,page:"chat",canWriteToChat:!0}}))}},{type:"item",Icon:(0,r.jsx)(s.Trash,{}),label:D("chatOptionsDropdown.deleteChat"),onSelect:()=>{n&&(0,eD.openDialog)({type:"deleteChat",data:{chatId:n}})},variant:"destructive"}];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(m.DropdownMenu,{onOpenChange:C,open:j,children:[(0,r.jsx)(m.DropdownMenuTrigger,{asChild:!0,children:(0,r.jsxs)(g.Button,{size:"sm",className:(0,tv.cn)("h-7 min-w-7 overflow-hidden rounded-[6px] px-0",!F&&"border-none"),variant:"secondary",tooltip:"Settings",tooltipDirection:"bottom",children:[(0,r.jsx)(eY,{}),(0,r.jsx)("span",{className:"sr-only",children:"Settings"})]})}),(0,r.jsxs)(m.DropdownMenuContent,{align:"end",children:[t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(m.DropdownMenuGroup,{children:[(0,r.jsx)(m.DropdownMenuLabel,{children:"Project Settings"}),(0,r.jsx)(ty,{items:q})]}),(0,r.jsx)(m.DropdownMenuSeparator,{})]}):null,F?(0,r.jsxs)(m.DropdownMenuGroup,{children:[(0,r.jsx)(m.DropdownMenuLabel,{children:"Chat Settings"}),(0,r.jsx)(ty,{items:W})]}):null]})]}),(0,r.jsx)(ej,{v0ProjectId:t,chatTitle:I,isSheetOpen:A,onOpenChange:L,initiatePolling:_,sheetOnly:!0})]})}function ty(e){let{items:t}=e;return(0,r.jsx)(r.Fragment,{children:t.map(e=>{if("type"in e&&"component"===e.type)return e.component;if("type"in e&&"item"===e.type){let{isNew:t,...n}=e;return(0,r.jsxs)(m.DropdownMenuItem,{className:"cursor-pointer overflow-hidden",variant:e.variant,...n,children:[e.Icon,e.label,e.isNew?(0,r.jsx)("div",{className:"rounded-full bg-blue-100 px-1.5  text-[11px] font-medium text-blue-700",children:(0,r.jsx)("p",{children:"New"})}):null]},String(e.label))}return null})})}e.s(["ChatShareButton",()=>nX],344290);var tb=r,tw=e.i(574768),tj=b,tC=r,tk=e.i(977960),tS=e.i(650309),tN=e.i(596359),tE=F,tM=b,tI=g,tD=ec,tT=v,tA=e.i(504066),tL=q,tP=r,tR=eS,t_=e.i(912106),tO=tv,tF=ep,tV=e.i(230766),tB=R,tz=e.i(762585),tH=b,tU=q,tq=tN,tW=e.i(115184),tZ=e.i(120485),tG=en,tK=m,tX=g;function t$(){let{chatId:e}=(0,tB.useChatId)(),{data:t,isLoading:n,mutate:r}=(0,tR.default)(e?"/api/chat/".concat(e,"/permissions"):null,tO.fetcher),i=(0,tH.useRef)(null),[a,o]=(0,tH.useState)(!1),[s,l]=(0,tH.useState)(!1);return((0,tH.useEffect)(()=>{let e=i.current;if(!e)return;let t=()=>{o(e.scrollTop>0),l(e.scrollHeight-e.scrollTop>e.clientHeight+1)};return t(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)},[n]),n)?(0,tP.jsxs)("div",{className:"flex items-center gap-2 h-10",children:[(0,tP.jsx)(tz.Skeleton,{className:"rounded-full size-8"}),(0,tP.jsxs)("div",{children:[(0,tP.jsx)("div",{className:"h-5 flex items-center",children:(0,tP.jsx)(tz.Skeleton,{className:"h-4 w-32"})}),(0,tP.jsx)("div",{className:"h-5 flex items-center",children:(0,tP.jsx)(tz.Skeleton,{className:"h-4 w-48"})})]})]}):(0,tP.jsxs)("div",{className:"relative max-h-72",children:[(0,tP.jsx)("div",{className:(0,tG.cn)("pointer-events-none absolute top-0 left-0 right-0 h-6 z-10 transition-opacity bg-gradient-to-b from-background via-background/30 to-transparent",a?"opacity-100":"opacity-0")}),(0,tP.jsx)("div",{className:"max-h-72 overflow-y-auto space-y-2",ref:i,children:null==t?void 0:t.map(e=>(0,tP.jsx)(tY,{permission:e,mutate:r},"author"===e.type?"author":e.permissionId))}),(0,tP.jsx)("div",{className:(0,tG.cn)("pointer-events-none absolute bottom-0 left-0 right-0 h-6 z-10 transition-opacity bg-gradient-to-t from-background via-background/30 to-transparent",s?"opacity-100":"opacity-0")})]})}function tY(e){let{permission:t,mutate:n}=e,{user:r}=(0,tF.useUser)(),{chatId:i}=(0,tB.useChatId)(),a=(0,tH.useCallback)(e=>{n(async n=>{if(!i||"author"===t.type)throw Error();let r=await fetch("/api/chat/".concat(i,"/permissions/").concat(t.permissionId),{method:"remove"===e?"DELETE":"PATCH",headers:{"Content-Type":"application/json"},body:"remove"===e?void 0:JSON.stringify({permission:e})});if(!r.ok){let e=Error(await r.text());throw(0,tZ.handleChatError)(e)||tU.toast.error("Failed to update permission"),e}return((0,t_.mutate)(e=>"string"==typeof e&&e.startsWith("/api/chat/".concat(i,"/permissions/search")),void 0,{revalidate:!1}),"remove"===e)?null==n?void 0:n.filter(e=>"author"===e.type||e.permissionId!==t.permissionId):null==n?void 0:n.map(n=>"author"===n.type||n.permissionId!==t.permissionId?n:{...n,permission:e})},{optimisticData:n=>n?"author"===t.type?n:"remove"===e?n.filter(e=>"author"===e.type||e.permissionId!==t.permissionId):n.map(n=>"author"===n.type||n.permissionId!==t.permissionId?n:{...n,permission:e}):[]})},[i,n,t]);return(0,tP.jsxs)("div",{className:"flex items-center gap-2",children:[(0,tP.jsxs)("div",{className:"grow flex items-center gap-2",children:[(0,tP.jsx)(tV.AvatarUser,{userId:t.userId,rounded:!0}),(0,tP.jsxs)("div",{children:[(0,tP.jsxs)("div",{className:"text-sm font-medium",children:[(0,tP.jsx)("span",{children:t.name||t.username}),t.userId===(null==r?void 0:r.id)?(0,tP.jsx)("span",{children:" (you)"}):null]}),(0,tP.jsx)("div",{className:"text-sm text-gray-500",children:t.email})]})]}),(0,tP.jsxs)(tK.DropdownMenu,{children:[(0,tP.jsx)(tK.DropdownMenuTrigger,{disabled:"author"===t.type,asChild:!0,children:(0,tP.jsxs)(tX.Button,{variant:"outline",size:"xs",className:"font-normal gap-1 rounded-sm",children:[(0,tP.jsx)("span",{children:tJ(t)}),(0,tP.jsx)("div",{className:(0,tG.cn)("size-4 flex items-center justify-center text-gray-500","author"===t.type&&"text-gray-400"),children:(0,tP.jsx)(tW.ChevronDown,{className:"size-3"})})]})}),(0,tP.jsx)(tK.DropdownMenuContent,{align:"end",children:"author"===t.type?null:(0,tP.jsxs)(tP.Fragment,{children:[(0,tP.jsxs)(tK.DropdownMenuGroup,{className:"p-1.5",children:[(0,tP.jsxs)(tK.DropdownMenuItem,{onSelect:()=>a("view"),className:"px-2 py-1.5 h-auto gap-8",children:[(0,tP.jsxs)("div",{children:[(0,tP.jsx)("div",{className:"font-medium",children:"Can View"}),(0,tP.jsx)("div",{className:"text-gray-500",children:"View chat and project information"})]}),"view"===t.permission?(0,tP.jsx)(tq.Check,{className:"size-4"}):null]}),(0,tP.jsxs)(tK.DropdownMenuItem,{onSelect:()=>a("edit"),className:"px-2 py-1.5 h-auto gap-8",children:[(0,tP.jsxs)("div",{children:[(0,tP.jsx)("div",{className:"font-medium",children:"Can Edit"}),(0,tP.jsx)("div",{className:"text-gray-500",children:"Edit chat and project information"})]}),"edit"===t.permission?(0,tP.jsx)(tq.Check,{className:"size-4"}):null]})]}),(0,tP.jsx)(tK.DropdownMenuSeparator,{}),(0,tP.jsx)(tK.DropdownMenuGroup,{className:"p-1.5",children:(0,tP.jsx)(tK.DropdownMenuItem,{variant:"destructive",onSelect:()=>a("remove"),className:"px-2 py-1.5 h-auto",children:"Remove"})})]})})]})]})}function tJ(e){if("author"===e.type)return"Owner";switch(e.permission){case"view":return"Can View";case"edit":return"Can Edit"}}var tQ=r,t0=c,t1=tS,t2=d,t5=b,t4=tV,t3=e.i(592258),t7=e.i(547259),t9=(0,t7.createServerReference)("4051dc2a269cebb7045984b863f8041b9caae7c254",t7.callServer,void 0,t7.findSourceMapURL,"updateChatPrivacy"),t6=z,t8=tZ,ne=q,nt=i,nn=R,nr=a,ni=ep,na=tv,no=eS;function ns(){let{user:e}=(0,ni.useUser)(),{data:t,mutate:n,isLoading:r}=(0,no.default)((null==e?void 0:e.teamId)?"/api/teams/".concat(e.teamId,"/settings"):null,na.fetcher);return{settings:t,mutate:n,isLoading:r}}function nl(){let{isTeam:e,activeScope:t}=(0,t6.useActiveScope)(),{chatId:n}=(0,nn.useChatId)(),{chatPrivacy:r,setChatPrivacy:i}=(0,nt.useChatPrivacy)(),{settings:a}=ns(),o=(0,t5.useCallback)(e=>{!async function(){if(n)try{await i(async()=>{("public"===e||"team"===e)&&(0,nr.track)("ShareChat",{targetChatId:n,team:"team"===e});let t=await t9({chatId:n,privacy:e});if(!t.success)throw Error(t.error);return e},{optimisticData:e}),ne.toast.success("Chat privacy updated")}catch(e){(0,t8.handleChatError)(e)||ne.toast.error("Failed to update chat visibility")}}()},[i,n]);return(0,tQ.jsxs)(t3.Select,{value:"team-edit"===r?"team":r,onValueChange:o,children:[(0,tQ.jsx)(t3.SelectTrigger,{className:"grow h-8 [&_svg]:text-gray-500! px-2 hover:border-alpha-600",children:(0,tQ.jsx)(t3.SelectValue,{})}),(0,tQ.jsxs)(t3.SelectContent,{children:[(0,tQ.jsx)(t3.SelectItem,{value:"private",iconOnRight:!0,className:"text-gray-500 data-[state=checked]:text-primary data-highlighted:text-primary px-2",children:(0,tQ.jsxs)("div",{className:"flex items-center gap-2",children:[(0,tQ.jsx)(t2.LockClosed,{}),(0,tQ.jsx)("span",{className:"text-primary",children:e?"Only people with access":"Private"})]})}),e&&(0,tQ.jsx)(t3.SelectItem,{value:"team",iconOnRight:!0,className:"px-2",children:(0,tQ.jsxs)("div",{className:"flex items-center gap-2",children:[(0,tQ.jsx)(t4.AvatarUser,{size:"xs",rounded:!0,teamId:null==t?void 0:t.id}),(0,tQ.jsxs)("div",{className:"grow text-start max-w-52 truncate",children:["Everyone"," ",(null==t?void 0:t.name)?(0,tQ.jsxs)(tQ.Fragment,{children:["at ",t.name]}):(0,tQ.jsx)(tQ.Fragment,{children:"on team"})]})]})}),!(null==a?void 0:a.disablePublicSharing)&&(0,tQ.jsxs)(tQ.Fragment,{children:[(0,tQ.jsx)(t3.SelectItem,{value:"unlisted",iconOnRight:!0,className:"text-gray-500 data-[state=checked]:text-primary data-highlighted:text-primary px-2",children:(0,tQ.jsxs)("div",{className:"flex items-center gap-2",children:[(0,tQ.jsx)(t1.Link,{}),(0,tQ.jsx)("span",{className:"text-primary",children:"Anyone with the link"})]})}),(0,tQ.jsx)(t3.SelectItem,{value:"public",iconOnRight:!0,className:"text-gray-500 data-[state=checked]:text-primary data-highlighted:text-primary px-2",children:(0,tQ.jsxs)("div",{className:"flex items-center gap-2",children:[(0,tQ.jsx)(t0.Globe,{}),(0,tQ.jsx)("span",{className:"text-primary",children:"Anyone on the web"})]})})]})]})]})}e.s(["useTeamSettings",()=>ns],714249);var nc=z,nu=r,nd=e.i(107296),np=e.i(789018);function nh(){return(0,nu.jsxs)(nd.Alert,{variant:"default",className:"relative flex flex-row gap-1 rounded-md border-none bg-gray-100 px-2 py-1.5",children:[(0,nu.jsx)("div",{className:"absolute left-[9px] top-1/2 -translate-y-1/2 text-gray-500",children:(0,nu.jsx)(np.Information,{className:"h-4 w-4"})}),(0,nu.jsx)(nd.AlertDescription,{className:"ml-6 text-gray-800",children:"Viewers will have access to all code and assets in this chat. Public chats may appear in search results."})]})}var nf=i;function nm(e){let{onSearch:t}=e,n=(0,tT.useT)(),{copyToClipboard:r,isCopied:i}=(0,tA.useCopyToClipboard)({timeout:2e3}),{isTeam:a}=(0,nc.useActiveScope)(),{chatPrivacy:o}=(0,nf.useChatPrivacy)(),s=(0,tM.useCallback)(()=>{r(window.location.href),tL.toast.success("Share link copied!")},[r]);return(0,tC.jsxs)(tC.Fragment,{children:[(0,tC.jsx)("div",{className:"px-2.5 py-1.5 border-b",children:(0,tC.jsx)("div",{className:"h-8 flex items-center pl-2 text-sm font-medium",children:n("shareDialog.share")})}),(0,tC.jsx)("div",{className:"p-4 space-y-4",children:(0,tC.jsxs)("div",{className:"space-y-2",children:[a&&(0,tC.jsx)("button",{className:"border w-full h-8 rounded-md text-left text-gray-400 text-label-14 px-2 hover:border-alpha-600",onClick:t,children:"Search for a user"}),(0,tC.jsxs)("div",{className:"space-y-2",children:[(0,tC.jsx)(tD.Label,{className:"h-[30px] flex items-center font-medium",asChild:!0,children:(0,tC.jsx)("div",{children:"People with access"})}),(0,tC.jsx)(t$,{})]}),(0,tC.jsx)(tD.Label,{className:"h-[30px] flex items-center font-medium",asChild:!0,children:(0,tC.jsx)("div",{children:"Visibility"})}),(0,tC.jsxs)("div",{className:"flex items-center gap-2",children:[(0,tC.jsx)(nl,{}),(0,tC.jsxs)(tI.Button,{variant:"secondary",onClick:s,className:"h-8 rounded-md px-1.5 gap-0",children:[i?(0,tC.jsx)(tN.Check,{}):(0,tC.jsx)(tS.Link,{}),(0,tC.jsx)("span",{className:"px-1.5",children:n("shareDialog.copyLink")})]})]}),"public"===o&&(0,tC.jsx)(nh,{}),(0,tC.jsxs)("div",{className:"flex items-center gap-1",children:[(0,tC.jsx)(tk.InformationFillSmall,{className:"text-gray-500"}),(0,tC.jsx)(tE.default,{href:"/docs/teams#sharing-projects",target:"_blank",className:"text-sm text-gray-500 hover:text-gray-900",children:"How does sharing chats work?"})]})]})})]})}var ng=g,nv=e.i(139446),nx=v,ny=r,nb=M,nw=e.i(28361),nj=g,nC=R,nk=e.i(827728),nS=eS,nN=t_,nE=t3,nM=b,nI=tv,nD=tV,nT=tz,nA=e.i(707827),nL=q,nP=tZ,nR=e.i(794593),n_=en,nO=r,nF=e.i(435082),nV=g;let nB=e=>{let{onBack:t,title:n}=e;return(0,nO.jsx)("div",{className:"px-2.5 py-1.5 border-b",children:(0,nO.jsxs)(nV.Button,{size:"sm",variant:"ghost",onClick:t,className:"hover:bg-transparent px-0!",children:[(0,nO.jsx)(nF.ChevronLeft,{}),n]})})};e.s(["default",0,nB],365449);var nz=e.i(608142);function nH(e){let{className:t}=e;return(0,ny.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",className:t,children:[(0,ny.jsx)("g",{clipPath:"url(#clip0_13783_5431)",children:(0,ny.jsx)("path",{d:"M8 0C12.4183 0 16 3.58172 16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0ZM8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5Z",fill:"currentColor"})}),(0,ny.jsx)("defs",{children:(0,ny.jsx)("clipPath",{id:"clip0_13783_5431",children:(0,ny.jsx)("rect",{width:"16",height:"16",fill:"white"})})})]})}function nU(e){let{onBack:t}=e,{chatId:n}=(0,nC.useChatId)(),[r,i]=(0,nM.useState)(""),[a]=(0,nk.useDebounceValue)(r,500),o=new URLSearchParams;a&&o.set("q",a);let{data:s,isLoading:l,mutate:c}=(0,nS.default)(n?"/api/chat/".concat(n,"/permissions/search?").concat(o.toString()):null,nI.fetcher),u=(0,nM.useRef)(null),[d,p]=(0,nM.useState)("view"),[h,f]=(0,nM.useState)([]),[m,g]=(0,nM.useState)(!1),v=(0,nM.useCallback)(async()=>{g(!0);let e=await fetch("/api/chat/".concat(n,"/permissions"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h.map(e=>{let{userId:t}=e;return{userId:t,permission:d}}))});if(!e.ok){g(!1);let t=Error(await e.text());(0,nP.handleChatError)(t)||nL.toast.error("Failed to send invite");return}await Promise.all([(0,nN.mutate)(e=>"string"==typeof e&&e==="/api/chat/".concat(n,"/permissions"),e=>(null!=e?e:[]).concat(...h.map(e=>({permissionId:"optimistic-".concat(e.userId),type:"user",userId:e.userId,name:e.name,username:e.username,email:e.email,avatarUrl:e.avatarUrl,permission:d})))),c(void 0,{revalidate:!1})]),t()},[n,h,d,c,t]),x=(0,nM.useRef)(null),[y,b]=(0,nM.useState)(!1),[w,j]=(0,nM.useState)(!1);return(0,nM.useEffect)(()=>{let e=x.current;if(!e)return;let t=()=>{b(e.scrollTop>0),j(e.scrollHeight-e.scrollTop>e.clientHeight+1)};return t(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)},[l]),(0,ny.jsxs)("div",{children:[(0,ny.jsx)(nB,{onBack:t,title:"Invite Users"}),(0,ny.jsxs)("div",{className:"space-y-2 px-4 py-4",children:[(0,ny.jsxs)("div",{className:"flex gap-2",children:[(0,ny.jsx)("div",{className:"grow",children:(0,ny.jsx)(nq,{search:r,setSearch:i,selectedUsers:h,onRemove:e=>{f(h.filter(t=>t.userId!==e))},inputRef:u})}),(0,ny.jsx)("div",{className:"flex-shrink-0",children:(0,ny.jsxs)(nE.Select,{value:d,onValueChange:p,children:[(0,ny.jsxs)(nE.SelectTrigger,{className:"h-8 rounded-md gap-2 pr-1.5 w-auto min-w-fit",hideChevron:!0,children:[(0,ny.jsx)(nE.SelectValue,{}),(0,ny.jsx)(nz.ChevronDownSmall,{})]}),(0,ny.jsxs)(nE.SelectContent,{children:[(0,ny.jsx)(nE.SelectItem,{value:"view",children:"Can View"}),(0,ny.jsx)(nE.SelectItem,{value:"edit",children:"Can Edit"})]})]})})]}),(0,ny.jsx)("div",{className:"pb-2",children:l?(0,ny.jsx)("div",{className:"space-y-2",children:[,,,,,].fill(null).map((e,t)=>(0,ny.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ny.jsx)(nT.Skeleton,{className:"size-8 rounded-full"}),(0,ny.jsxs)("div",{children:[(0,ny.jsx)("div",{className:"h-5 flex items-center",children:(0,ny.jsx)(nT.Skeleton,{className:"h-4 w-32"})}),(0,ny.jsx)("div",{className:"h-5 flex items-center",children:(0,ny.jsx)(nT.Skeleton,{className:"h-4 w-48"})})]})]},t))}):(null==s?void 0:s.length)?(0,ny.jsxs)("div",{className:"relative max-h-[232px]",children:[(0,ny.jsx)("div",{className:(0,n_.cn)("pointer-events-none absolute top-0 left-0 right-0 h-6 z-10 transition-opacity bg-gradient-to-b from-background via-background/30 to-transparent",y?"opacity-100":"opacity-0")}),(0,ny.jsx)("div",{ref:x,className:"max-h-[232px] overflow-y-auto space-y-2",children:s.map(e=>(0,ny.jsxs)("button",{className:"flex items-center justify-between w-full text-left",onClick:()=>{if(h.some(t=>t.userId===e.userId))f(h.filter(t=>t.userId!==e.userId));else{var t;f(h.concat(e)),i(""),null==(t=u.current)||t.focus()}},children:[(0,ny.jsxs)("div",{className:"flex items-center gap-2 h-10",children:[(0,ny.jsx)(nD.AvatarUser,{userId:e.userId,rounded:!0}),(0,ny.jsxs)("div",{className:"text-sm",children:[(0,ny.jsx)("div",{className:"font-medium",children:e.name||e.username}),(0,ny.jsx)("div",{className:"text-gray-500",children:e.email})]})]}),h.some(t=>t.userId===e.userId)?(0,ny.jsx)(nw.CheckCircleFill,{className:"!text-blue-700"}):(0,ny.jsx)(nH,{className:"text-gray-300"})]},e.userId))}),(0,ny.jsx)("div",{className:(0,n_.cn)("pointer-events-none absolute bottom-0 left-0 right-0 h-6 z-10 transition-opacity bg-gradient-to-t from-background via-background/30 to-transparent",w?"opacity-100":"opacity-0")})]}):(0,ny.jsx)("div",{className:"mt-5 text-sm text-gray-500",children:"No results"})})]}),(0,ny.jsx)("div",{className:"bg-muted border-t p-4",children:(0,ny.jsxs)(nj.Button,{disabled:0===h.length||m,size:"sm",className:"w-full",onClick:v,children:[m&&(0,ny.jsx)(nA.Spinner,{}),(0,ny.jsx)("span",{children:"Invite"})]})})]})}function nq(e){let{search:t,setSearch:n,selectedUsers:r,onRemove:i,inputRef:a}=e;return(0,ny.jsxs)("div",{className:"bg-background focus-within:border-alpha-600 disabled:border-alpha-300 flex flex-wrap gap-0.5 w-full shrink-0 items-center rounded-md border p-0.5 outline-hidden transition-all disabled:pointer-events-none disabled:bg-gray-100 disabled:text-gray-400 h-auto min-h-8",children:[r.map(e=>(0,ny.jsxs)(nR.Badge,{variant:"secondary",className:"rounded-sm p-0.5 pl-1 gap-0.5 cursor-default pointer-events-auto",children:[(0,ny.jsx)("span",{children:e.name||e.email}),(0,ny.jsx)("button",{className:"p-1 cursor-pointer",onClick:()=>i(e.userId),children:(0,ny.jsx)(nb.Cross,{className:"size-2"})})]},e.userId)),(0,ny.jsx)("input",{className:"text-label-14 bg-transparent outline-hidden file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-400 disabled:cursor-not-allowed disabled:text-gray-400 flex-1 min-w-20 h-6 px-1.5",placeholder:0===r.length?"Search for a user":"",value:t,onChange:e=>n(e.target.value),autoFocus:!0,ref:a})]})}var nW=tA,nZ=q,nG=i;function nK(){let e=(0,nx.useT)(),{copyToClipboard:t}=(0,nW.useCopyToClipboard)({timeout:2e3}),n=(0,tj.useCallback)(()=>{t(window.location.href),nZ.toast.success("Share link copied!")},[t]);return(0,tb.jsx)(ng.Button,{className:"h-7 rounded-md px-2",size:"sm",onClick:n,children:e("shareDialog.share")})}function nX(){let e=(0,nx.useT)(),{canWriteToChat:t}=(0,nG.useChatMetadata)(),[n,r]=(0,tj.useState)(!1);return t?(0,tb.jsxs)(tw.Popover,{onOpenChange:e=>{e&&r(!1)},modal:!1,children:[(0,tb.jsx)(tw.PopoverTrigger,{asChild:!0,children:(0,tb.jsxs)(ng.Button,{className:"h-7 rounded-md sm:px-2 sm:w-fit w-7",size:"sm","data-testid":"share-block-button",variant:"secondary",children:[(0,tb.jsx)("span",{className:"sm:block hidden",children:e("shareDialog.share")}),(0,tb.jsx)("span",{className:"sm:hidden block",children:(0,tb.jsx)(nv.Share,{})})]})}),(0,tb.jsx)(tw.PopoverContent,{className:"w-[440px] max-w-screen origin-top-right",align:"end",alignOffset:1,children:n?(0,tb.jsx)(nU,{onBack:()=>r(!1)}):(0,tb.jsx)(nm,{onSearch:()=>r(!0)})})]}):(0,tb.jsx)(nK,{})}var n$=r,nY=e.i(89440),nJ=G,nQ=tl,n0=e.i(612161);e.i(357022);var n1=nw,n2=e.i(661042),n5=c,n4=nA,n3=tv,n7=e.i(470259),n9=b,n6=eU,n8=e.i(373998),re=b,rt=e.i(40455);function rn(e,t){let n=(0,re.useRef)({value:e,prev:void 0}),r=n.current.value;return(t?t(e,r):(0,rt.default)(e,r))||(n.current={value:e,prev:r}),n.current.prev}e.s(["usePreviousValue",()=>rn],857371);var rr=a,ri=e.i(996174),ra=v;let ro=(0,nY.cva)("group relative flex h-7 cursor-pointer! items-center justify-center overflow-hidden whitespace-nowrap rounded-[6px] border px-0 w-7 sm:w-fit sm:px-2 sm:pr-2.5 font-medium",{variants:{variant:{primary:"text-background border-gray-900 bg-gray-900 hover:border-gray-800 hover:bg-gray-800",secondary:"bg-background-subtle hover:border-alpha-400 border-gray-200 text-gray-900 hover:bg-gray-200",blue:"text-background border-blue-600 bg-blue-600",red:"text-background border-red-600 bg-red-600"}}});function rs(e){let{chatId:t,...n}=e,r=(0,n8.getChatDeploymentAtoms)(t),i=(0,nJ.useAtomValue)(r.buttonVariant),a=(0,ra.useT)();return(0,n$.jsx)("div",{className:"text-label-14 relative",children:(0,n$.jsx)(ri.Tooltip,{side:"bottom",content:a("deployBlockPopover.deployToVercel"),children:(0,n$.jsx)("button",{"data-testid":"deploy-block-button",className:(0,n3.cn)(ro({variant:i}),n.className),style:{...(0,nQ.transitionStyles)(["background","color","border-color"]),...n.style},...n,children:(0,n$.jsx)(rc,{chatId:t})})})})}function rl(e){let{chatId:t}=e,n=(0,n8.getChatDeploymentAtoms)(t),r=(0,nJ.useAtomValue)(n.deploymentState),i=rn(r),{deployment:a,git:o}=(0,nJ.useAtomValue)(n.externalMeta),s=(0,nJ.useAtomValue)(n.deployButtonClickedAtTimestamp),l=(0,nJ.useAtomValue)(n.deployCreationStartTimestamp),c=(0,nJ.useAtomValue)(n.deployCreationEndTimestamp);(0,n9.useEffect)(()=>{if(!s||!l||!c||!i||"building"!==r||!(null==a?void 0:a.id))return;let e=Date.now();(0,rr.track)("DeployStartedBuild",{msSinceDeployClick:e-s,msStepPreDeploy:l-s,msStepDeploy:c-l,msStepPostDeploy:e-c,deploymentState:r,previousDeploymentState:i,targetDeploymentId:a.id,deploymentSource:o&&"sha"in o?"git":"api"})},[i,r,s,l,c,null==a?void 0:a.id,o])}function rc(e){let{chatId:t}=e,n=(0,n8.getChatDeploymentAtoms)(t),r=(0,nJ.useAtomValue)(n.deploymentState),i=(0,nJ.useAtomValue)(n.passingState),a=(0,nJ.useAtomValue)(n.hasDeployableChanges),{error:o}=(0,nJ.useAtomValue)(n.externalMeta),s=(0,ra.useT)();rl({chatId:t});let l=(0,n9.useMemo)(()=>{if(o&&o!==n7.NOT_FOUND)return{icon:(0,n$.jsx)("span",{className:"text-red-600",children:(0,n$.jsx)(n2.StopFill,{})}),text:s("deployBlockPopover.deploy")};if(i)switch(i){case"passing-deployed":return{icon:(0,n$.jsx)("span",{className:"text-blue-600",children:(0,n$.jsx)(n1.CheckCircleFill,{})}),text:s("deployBlockPopover.deploy")};case"passing-error":return{icon:(0,n$.jsx)("span",{className:"text-background flex items-center justify-center",children:(0,n$.jsx)(n0.Stop,{})}),text:void 0}}switch(r){case"not-deployed":case"deployed":case"failed":if(!a&&"failed"===r)return{icon:(0,n$.jsx)(n0.Stop,{}),text:s("deployBlockPopover.deploy")};return{icon:void 0,text:s("deployBlockPopover.deploy")};case"deploying":case"queued":case"building":return{icon:(0,n$.jsx)(n4.Spinner,{size:16}),text:s("deployBlockPopover.deploy")}}},[r,o,a,i,s]);return(0,n$.jsx)(n6.TransitionNode,{...n6.PRESETS.buttonContent,children:(0,n$.jsxs)("span",{className:"flex items-center justify-center",children:[(0,n$.jsx)("span",{className:"sm:hidden",children:(null==l?void 0:l.icon)||(0,n$.jsx)(n5.Globe,{})}),(0,n$.jsxs)("span",{className:"hidden sm:flex items-center gap-1.5 ",children:[null==l?void 0:l.icon,null==l?void 0:l.text]})]})})}(0,nY.cva)("border-muted h-3 min-h-3 w-3 min-w-3 rounded-full border-[1.5px]",{variants:{variant:{success:"bg-blue-600",error:"bg-red-600"}}}),e.s(["ChatDeploymentTrigger",()=>rs],14791),e.s(["DeploymentStage",()=>ik],251016);var ru=r,rd=G,rp=g,rh=b,rf=I,rm=c,rg=n0,rv=r,rx=g,ry=tv,rb=F;function rw(e){let{link:t,children:n,className:r}=e;return(0,rv.jsxs)("div",{className:(0,ry.cn)("flex flex-row justify-between gap-3 p-3 border-t border-alpha-400 bg-muted",t&&"pl-1.5"),children:[t?(0,rv.jsx)(rx.Button,{variant:"ghost",size:"sm",className:"shrink-0",asChild:!0,children:(0,rv.jsx)(rb.default,{href:t.href,target:"_blank",className:"text-label-14 flex items-center gap-2",children:t.label})}):null,(0,rv.jsx)("span",{className:(0,ry.cn)("flex flex-1 items-center justify-end gap-3",t?"":"*:flex-1",r),children:n})]})}function rj(e){let{children:t,className:n,key:r}=e;return(0,rv.jsx)("div",{className:(0,ry.cn)("flex w-full flex-col overflow-hidden p-4",n),children:t},r)}e.s(["PopoverActions",()=>rw,"PopoverContent",()=>rj],416959);var rC=ei,rk=e.i(548866),rS=n8,rN=n7;e.s(["DeployOrPushButton",()=>ix,"FixDeploymentErrorsButton",()=>iv,"FixDeploymentWarningButton",()=>ig],332991);var rE=r,rM=e.i(616216),rI=e.i(607391),rD=n8;e.s(["useAsyncChatDeploymentActions",()=>r8],348327);var rT=G,rA=b,rL=V,rP=t7,rR=(0,rP.createServerReference)("40abca33391dbdd2b04f4795ef21d720d465382ba9",rP.callServer,void 0,rP.findSourceMapURL,"configureDeploymentProtectionAction");e.s(["configureDeploymentProtectionAction",()=>rR],929110);var r_=X,rO=q;e.i(472428);var rF=e.i(152641),rV=t7,rB=(0,rV.createServerReference)("4068c1570ece9fc9621cced182a58ee234c613f911",rV.callServer,void 0,rV.findSourceMapURL,"assignVercelAlias"),rz=n7,rH=e.i(696871),rU=a,rq=n8,rW=eA,rZ=e.i(144019),rG=ep,rK=e.i(369218),rX=ef,r$=e.i(315331),rY=O,rJ=i,rQ=z,r0=ey;e.s(["usePrewarmDeployWarnings",()=>r6],280419);var r1=G,r2=b,r5=n8,r4=ep,r3=eA,r7=t7,r9=(0,r7.createServerReference)("40231952849f928e0c2f7a23e5972369b7979e584e",r7.callServer,void 0,r7.findSourceMapURL,"collectBlockDeployWarnings");function r6(e){let{chatId:r}=e,i=(0,r5.getChatDeploymentAtoms)(r),a=(0,r1.useAtomValue)(i.deployWarning),{setDeployWarning:o}=(0,r5.getChatDeploymentActions)(r),{user:s}=(0,r4.useUser)(),l=(0,r3.useActiveBlockState)(),c=(0,r2.useCallback)(async e=>{let{blockId:i,fromGitProject:s}=e,l="".concat(r,"-").concat(i,"-").concat(s);return(l!==n&&(t=void 0,n=l),a)?{set:!1,skippedDeployWarning:a.commonDeployError}:t||(t=(async()=>{try{let e=await r9({blockId:i,fromGitProject:s});if(!("warning"in e))return{set:!1};return o({...e,from:"deploy"}),{set:!0}}catch(e){return{set:!1,skippedDeployWarning:void 0}}})())},[a,o,r]);return{prewarmDeployWarning:(0,r2.useCallback)(e=>{let t=null==l?void 0:l.id;t&&s&&c({blockId:t,fromGitProject:e})},[c,null==l?void 0:l.id,s]),maybeSetDeployWarning:c}}function r8(e){var t,n,r,i;let{chatId:a}=e,o=(0,rL.useRouter)(),s=(0,rq.getChatDeploymentAtoms)(a),l=(0,rT.useAtomValue)(s.externalMeta),{user:c}=(0,rG.useUser)(),{mutate:u}=(0,rF.useServerQuerySWR)(["chat","externalMeta"],{chatId:a}),{submit:d}=(0,r_.useV0Chat)(),p=(0,rW.useActiveBlockState)(),h=(0,rZ.useAutoCreateProject)({chatId:a,activeBlock:p}),{isTeam:f,isNewV0Rbac:m,hasVercelWritePermission:g}=(0,rQ.useActiveScope)(),v=!!(m?g:c&&["OWNER","MEMBER"].includes(null!=(r=c.teamRole)?r:"")),{data:x}=(0,rF.useServerQuerySWR)(["scoped","team"],{},{stopFetch:!f,revalidateNever:!0}),y=!!f&&null!=(i=null==x||null==(n=x.enabledInvoiceItems)||null==(t=n.passwordProtection)?void 0:t.enabled)&&i,{setIsOpenForLocation:b,setStageIntent:w,setNewDomain:j,setDeployWarning:C,setDomainError:k,setDomainErrorRedirect:S,setAsyncActionLoading:N,setDeployButtonClickedAtTimestamp:E,setDeployCreationStartTimestamp:M,setDeployCreationEndTimestamp:I}=(0,rq.getChatDeploymentActions)(a),D=(0,rT.useAtomValue)(s.asyncActionLoading),T=(0,rT.useAtomValue)(s.isAbleToDeploy),A=(0,rT.useAtomValue)(s.isAbleToPushChanges),L=(0,rT.useAtomValue)(s.isNewDomainValid),P=(0,rT.useAtomValue)(s.newDomain),R=(0,rT.useAtomValue)(s.newBranchName),_=(0,rT.useAtomValue)(s.deployWarning),{project:O}=(0,rJ.useChatMetadata)(),{deployment:F,git:V}=l,{gbs:B,dpe:z}=(0,rY.useFlags)(),H=(0,rT.useAtomValue)(s.protection),U=(0,rT.useAtomValue)(s.protectionPassword),{maybeSetDeployWarning:q}=r6({chatId:a}),W=(0,rA.useMemo)(()=>{var e;return null!=(e=null!=R?R:null==V?void 0:V.ref)?e:"main"},[R,V]),Z=(0,rA.useMemo)(()=>({...ii,...F,...ir(c)}),[F,c]),G=(0,rA.useMemo)(()=>({...io,...V,...ia(W)}),[V,W]),K=async()=>{try{return await h()}catch(e){rO.toast.error("Unable to create project")}},X=async()=>{try{E(Date.now());let e=null==p?void 0:p.id;if(!T||!e||!c)return void rO.toast.error("Unable to deploy");let t=await q({blockId:e,fromGitProject:!1});if(t.set)return;if(z&&"public"!==H&&"password"===H){if(!y)return void rO.toast.error("Your plan does not include Password-Protected Deployments");if(v&&!(null==U?void 0:U.trim()))return void rO.toast.error("Please enter a password")}await u({serverMutate:(async()=>{if(await K(),"password"===H&&v&&(null==O?void 0:O.projectId)&&z){let e=await rR({projectId:O.projectId,kind:"password",password:U.trim()});if(!0!==e)throw Error("Failed to configure password protection")}if("team"===H&&v&&(null==O?void 0:O.projectId)&&z){let e=await rR({projectId:O.projectId,kind:"sso",enabled:!0});if(!0!==e)throw Error("Failed to configure team protection")}M(Date.now()),await ie({blockId:e,skippedDeployWarning:t.skippedDeployWarning}),I(Date.now()),C(null)})(),optimisticData:{git:void 0,error:void 0,deployment:Z}})}catch(e){rO.toast.error("An error occurred while deploying")}},$=async()=>{try{let e=null==p?void 0:p.id;if(!A||!e||!c)return void rO.toast.error("Unable to push changes");let t=await q({blockId:e,fromGitProject:!0});if(t.set)return;if(z&&"public"!==H&&"password"===H){if(!y)return void rO.toast.error("Your plan does not include Password-Protected Deployments");if(v&&!(null==U?void 0:U.trim()))return void rO.toast.error("Please enter a password")}await u({serverMutate:(async()=>{if(await K(),"password"===H&&v&&(null==O?void 0:O.projectId)&&z){let e=await rR({projectId:O.projectId,kind:"password",password:U.trim()});if(!0!==e)throw Error("Failed to configure password protection")}if("team"===H&&v&&(null==O?void 0:O.projectId)&&z){let e=await rR({projectId:O.projectId,kind:"sso",enabled:!0});if(!0!==e)throw Error("Failed to configure team protection")}await it({blockId:e,branch:W,skippedDeployWarning:t.skippedDeployWarning,onProductionBranch:null==V?void 0:V.onProductionBranch,gitBidirectionalSyncOn:!!B}),C(null)})(),optimisticData:{error:void 0,deployment:{...Z,git:G},git:G}})}catch(e){if(e instanceof Error)return void rO.toast.error(e.message);rO.toast.error("An error occurred while pushing changes")}},Y=async()=>{if(!L||!P)return void k("Invalid domain");let e=null==O?void 0:O.vercelProjectId;if(!e){let t=await K();if(!(null==t?void 0:t.vercelProjectId))return void rO.toast.error("Unable to create project");e=t.vercelProjectId}try{k(null),S(null),await u({serverMutate:(async()=>{let t=await rB({deploymentId:null==F?void 0:F.id,alias:P,vercelProjectId:e});if(!t.success){let e=t.errorCode||rz.UNEXPECTED_ERROR,n=rH.ALIAS_ERROR_MAP[e]||t.errorMessage;k(n||"Failed to assign domain"),t.redirectTo&&S(t.redirectTo),rO.toast.error(n||"Failed to assign domain");return}rO.toast.success("Domain assigned successfully"),w(null),j(null),k(null),S(null)})(),optimisticData:{...l,deployment:null!=F?F:void 0}})}catch(t){let e=t instanceof Error?t.message:"An error occurred while assigning domain";k(e),rO.toast.error(e)}},J=(0,rA.useCallback)(()=>{b(!1,null),(0,rX.openDialog)({type:"feedback",data:{feedback:"I'm having trouble loading my deployment. \nChat: ".concat(a," \nError: ").concat(l.error),sentiment:"bad"}})},[b,a,l.error]),Q=(0,rA.useCallback)(()=>{o.refresh()},[o]),ee=async()=>{_&&(p&&(0,rU.track)("FixDeployWarning",{blockId:p.id,warning:_.warning}),en(),await d({action:"fix-with-v0",type:"fix-with-v0",content:(0,r0.createMDXMessageContent)("An error occurred during deployment. Please fix:\n\n".concat(is(_.prompt),"\n"))}),C(null))},et=async e=>{en(),await d({action:"fix-with-v0",type:"fix-with-v0",content:(0,r0.createMDXMessageContent)("An error occurred during deployment. Please fix:\n\n".concat(is(e)))})},en=(0,rA.useCallback)(()=>{setTimeout(()=>{b(!1,null)},2e3)},[b]);function er(e,t){return async function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];if(e===D)return rO.toast.error("Unable to perform deployment action");N(e);try{return await t(...r)}finally{N(null)}}}return{handleRetry:Q,handleReport:J,handleDeploy:er("deploy",X),handlePushChanges:er("pushing",$),handleAssignDomain:er("assigning-domain",Y),handleFixDeployWarning:er("auto-fixing-warning",ee),handleFixWithV0:er("auto-fixing-errors",et)}}async function ie(e){let{blockId:t,skippedDeployWarning:n,passwordProtection:r}=e,i=await fetch("/chat/b/".concat(t,"/deploy"),{method:"POST",body:JSON.stringify({skippedDeployWarning:n,passwordProtection:r})}),a=await i.json();return i.ok?a:{error:a.error}}async function it(e){let t,{blockId:n,skippedDeployWarning:r,branch:i,onProductionBranch:a,gitBidirectionalSyncOn:o}=e;t=o&&!a?await fetch("/chat/b/".concat(n,"/deploy"),{method:"POST",body:JSON.stringify({skippedDeployWarning:r,target:a?"production":"preview"})}):await (0,r$.pushChanges)({blockId:n,skippedDeployWarning:r,branch:i});let s=await t.json();if(!t.ok){var l;throw Error(null!=(l=s.errorMsg)?l:"An error occurred while pushing changes")}return s}e.s(["collectBlockDeployWarnings",()=>r9],167247);let ir=e=>({readyState:"INITIALIZING",createdAt:0,creator:e?{uid:e.id,username:e.username,avatar:e.avatar}:void 0}),ii={id:"loading",inspectorUrl:"",name:"",projectId:"",customAlias:{alias:rK.LOADING_SKELETON,uid:"",created:"",redirect:null,updatedAt:0},screenshotUrl:null,project:void 0,automaticAliases:[],filteredAliases:[],git:void 0,meta:{},url:rK.LOADING_SKELETON,ownerId:"",readyState:"INITIALIZING",createdAt:0,bestDomain:rK.LOADING_SKELETON},ia=e=>({ref:e,sha:rK.LOADING_SKELETON,commitMessage:rK.LOADING_SKELETON}),io={ownerName:"",repoName:"",ref:"",sha:"",commitMessage:"",type:"github",prId:null,repoId:0,refs:[],onProductionBranch:!0,gitConnected:!0,gitAutoCommitPush:!1,gitAutoPull:!1};function is(e){return e.includes("```")?e:" ```\n".concat(e,"\n``` ")}var il=g,ic=v,iu=z,id=rF,ip=G,ih=b,im=e.i(538553);function ig(e){let{chatId:t}=e,n=(0,rD.getChatDeploymentAtoms)(t),r="auto-fixing-warning"===(0,ip.useAtomValue)(n.asyncActionLoading),{hasVercelWritePermission:i}=(0,iu.useActiveScope)(),{handleFixDeployWarning:a}=r8({chatId:t}),o=(0,ih.useCallback)(()=>{a()},[a]),s=(0,ih.useMemo)(()=>({disabled:!i||r,isLoading:r,loadingText:"Fixing warning"}),[i,r]);return(0,rE.jsx)(im.RbacTooltip,{show:!i,requiredRole:"V0Builder",children:(0,rE.jsx)(il.Button,{size:"sm",variant:"default",onClick:o,disabled:s.disabled,children:(0,rE.jsxs)(rI.ActionStatus,{isLoading:s.isLoading,loading:s.loadingText,children:["Fix with ",(0,rE.jsx)(rM.V0LoadableLogo,{invert:!s.disabled})]})})})}function iv(e){let{chatId:t,deploymentId:n,variant:r="default"}=e,i=(0,rD.getChatDeploymentAtoms)(t),a="auto-fixing-errors"===(0,ip.useAtomValue)(i.asyncActionLoading),{data:o}=(0,id.useServerQuerySWR)(["deployment","errors"],{deploymentId:n}),{handleFixWithV0:s}=r8({chatId:t}),{hasVercelWritePermission:l}=(0,iu.useActiveScope)(),c=(0,ih.useMemo)(()=>!!o.fullErrorText,[o]),u=(0,ih.useCallback)(()=>{o.fullErrorText&&s(o.fullErrorText)},[o.fullErrorText,s]),d=(0,ih.useMemo)(()=>{let e="Collecting errors";c&&(e="Auto-fixing errors");let t=!l||!c||a;return{onClick:u,isLoading:t,loadingText:e,disabled:t}},[u,l,c,a]);return(0,rE.jsx)(im.RbacTooltip,{show:!l,requiredRole:"V0Builder",children:(0,rE.jsx)(il.Button,{size:"sm",onClick:d.onClick,disabled:d.disabled,variant:r,children:(0,rE.jsxs)(rI.ActionStatus,{isLoading:d.isLoading,loading:d.loadingText,children:["Fix with"," ",(0,rE.jsx)(rM.V0LoadableLogo,{invert:"default"===r&&!d.disabled,loading:d.disabled})]})})})}function ix(e){let{chatId:t,variant:n="default",...r}=e,i=(0,rD.getChatDeploymentAtoms)(t),a=(0,ip.useAtomValue)(i.externalMeta),o=(0,ip.useAtomValue)(i.deployWarning),s=(0,ip.useAtomValue)(i.isAbleToPushChanges),l=(0,ip.useAtomValue)(i.isAbleToDeploy),c=(0,ip.useAtomValue)(i.hasDeployableChanges),u=(0,ip.useAtomValue)(i.selectedEnvironment),d=(0,ip.useAtomValue)(i.asyncActionLoading),p=(0,ip.useAtomValue)(i.asyncActionLoadingLabel),h=(0,ip.useAtomValue)(i.activeBlockVersionNumber),{handlePushChanges:f,handleDeploy:m}=r8({chatId:t}),{hasVercelWritePermission:g}=(0,iu.useActiveScope)(),v=(0,ic.useT)(),x=(0,ih.useMemo)(()=>{var e;let t=!!(null==(e=a.deployment)?void 0:e.id),n=!!(null==o?void 0:o.warning),{git:r}=a,i="Publish to Production";if("preview"===u&&(i="Publish to a Preview"),t&&(i="Republish v".concat(h),c&&(i="Publish Changes")),n&&(i=v("deployBlockPopover.deploy")),r){let e="pushing"===d;return{onClick:f,disabled:!g||!s||e,text:i,isLoading:e,loadingText:p}}{let e="deploy"===d;return{onClick:m,disabled:!g||!l||e,text:i,isLoading:e,loadingText:p}}},[a,null==o?void 0:o.warning,u,h,c,d,s,f,p,l,m,g]);function y(e){e.preventDefault(),x.onClick()}return(0,rE.jsx)(im.RbacTooltip,{show:!g,requiredRole:"V0Builder",children:(0,rE.jsx)(il.Button,{size:"sm",onClick:x.onClick,disabled:x.disabled,variant:n,onSubmit:y,...r,children:(0,rE.jsx)(rI.ActionStatus,{isLoading:x.isLoading,loading:x.loadingText,children:x.text})})})}var iy=eU,ib=z,iw=im,ij=e.i(66990),iC=rK;function ik(e){let{chatId:t}=e,n=(0,rS.getChatDeploymentAtoms)(t),r=(0,rd.useAtomValue)(n.deploymentState),i=(0,rd.useAtomValue)(n.hasDeployableChanges),{deployment:a,error:o}=(0,rd.useAtomValue)(n.externalMeta),{handleRetry:s}=r8({chatId:t}),{hasVercelWritePermission:l}=(0,ib.useActiveScope)(),c=(0,rh.useMemo)(()=>{if(o&&o!==rN.NOT_FOUND)return{content:(0,ru.jsx)(rj,{children:(0,ru.jsx)(rk.EmptyState,{title:"Failed to load deployment",variant:"error",icon:(0,ru.jsx)(rg.Stop,{}),children:"There was an error loading your deployment."})}),actions:(0,ru.jsx)(rw,{children:(0,ru.jsx)(iw.RbacTooltip,{show:!l,requiredRole:"V0Builder",children:(0,ru.jsx)(rp.Button,{size:"sm",onClick:s,disabled:!l,children:"Reload"})})})};if(!a)return{content:(0,ru.jsx)(rj,{children:(0,ru.jsx)(iS,{})}),actions:null};let e=a.inspectorUrl?{href:a.inspectorUrl,label:"Inspect on Vercel"}:void 0,n=(0,ru.jsxs)(rw,{link:e,className:"".concat(i&&"flex-row-reverse"),children:[(0,ru.jsx)(ix,{variant:i?"default":"secondary",chatId:t}),(0,ru.jsx)(iv,{variant:i?"secondary":"default",chatId:t,deploymentId:a.id})]}),c=(0,ru.jsxs)("div",{className:"grid grid-cols-2 gap-3 p-3 w-full",children:[(0,ru.jsx)(ix,{chatId:t,className:"w-full",variant:"secondary"}),(0,ru.jsxs)(rp.Button,{size:"sm",className:"w-full",onClick:()=>{window.open("https://".concat(a.bestDomain),"_blank")},disabled:a.bestDomain===iC.LOADING_SKELETON,children:["Visit Site",(0,ru.jsx)(rf.External,{className:"w-4 h-4"})]})]}),u=null;return"failed"===r&&(u=n),"deployed"===r&&(u=c),{content:(0,ru.jsx)(rj,{className:"p-0",children:(0,ru.jsx)(rC.NewDeployment,{deploymentId:a.id,stopFetch:!0,chatId:t})}),actions:u}},[o,a,i,t,r,s,l]);return(0,ru.jsx)(iy.TransitionNode,{...iy.PRESETS.popoverContent,renderKey:"".concat(r,"-").concat(c.actions?"withActions":"noActions"),children:(0,ru.jsxs)("div",{className:"flex flex-col",children:[c.content,(0,ru.jsx)(ij.Separator,{}),c.actions]})})}function iS(){return(0,ru.jsx)(rk.EmptyState,{title:"No deployment found",icon:(0,ru.jsx)(rm.Globe,{}),children:"This chat has not been deployed yet."})}e.s(["AssignDomainStage",()=>iO],479963);var iN=r,iE=G,iM=g,iI=e.i(763480),iD=rI,iT=n8,iA=F,iL=b,iP=z,iR=im,i_=rK;function iO(e){let{chatId:t}=e,n=(0,iT.getChatDeploymentAtoms)(t),{handleAssignDomain:r}=r8({chatId:t}),{setNewDomain:i,setStageIntent:a,setDomainError:o,setDomainErrorRedirect:s}=(0,iT.getChatDeploymentActions)(t),{deployment:l}=(0,iE.useAtomValue)(n.externalMeta),c=(0,iE.useAtomValue)(n.newDomain),u=(0,iE.useAtomValue)(n.asyncActionLoading),d=(0,iE.useAtomValue)(n.asyncActionLoadingLabel),p=(0,iE.useAtomValue)(n.domainError),h=(0,iE.useAtomValue)(n.domainErrorRedirect),{hasVercelWritePermission:f}=(0,iP.useActiveScope)(),m="assigning-domain"===u;function g(e){e.preventDefault(),f&&r()}let v=(0,iL.useMemo)(()=>p?h?(0,iN.jsx)(iA.default,{href:h,children:p}):p:null,[p,h]);return(0,iN.jsxs)(iN.Fragment,{children:[(0,iN.jsx)(nB,{onBack:()=>{i(null),o(null),s(null),a(null)},title:"Add a Custom Domain"}),(0,iN.jsxs)("form",{id:"assign-domain-form",onSubmit:g,children:[(0,iN.jsxs)(rj,{className:"gap-4",children:[(0,iN.jsx)("span",{className:"text-label-14 text-gray-500",children:"Assign a custom vercel.app subdomain to make your project more memorable."}),(0,iN.jsx)("div",{className:"flex flex-col gap-2",children:(0,iN.jsx)(iI.Input,{placeholder:(null==l?void 0:l.bestDomain)&&l.bestDomain!==i_.LOADING_SKELETON?iF(l.bestDomain):"your-domain.vercel.app",value:null!=c?c:"",onChange:e=>{i(e.target.value),o(null),s(null)},disabled:m,className:"pr-0",style:{maskImage:"linear-gradient(to right, black calc(100% - 48px), transparent)"},error:v,suffix:(0,iN.jsx)("span",{className:"text-label-14 pr-2 text-gray-500",children:".vercel.app"})})})]}),(0,iN.jsx)(rw,{children:(0,iN.jsx)(iR.RbacTooltip,{show:!f,requiredRole:"V0Builder",children:(0,iN.jsx)(iM.Button,{size:"sm",type:"submit",form:"assign-domain-form",disabled:!f||m,children:(0,iN.jsx)(iD.ActionStatus,{isLoading:m,loading:d,children:"Add Domain"})})})})]})]})}function iF(e){return e.replace(/\.(vercel\.app)$/,"")}},626085,e=>{"use strict";var t=e.i(200407);function n(e){let n=(0,t.useRef)(void 0);return(0,t.useEffect)(()=>{n.current=e}),n.current}e.s(["usePrevious",()=>n])},613922,917372,e=>{"use strict";e.s(["DeploymentButton",()=>e8],613922);var t=e.i(832520),n=e.i(14791),r=e.i(574768),i=e.i(762585),a=e.i(200407),o=t,s=e.i(780292),l=e.i(251016),c=e.i(479963),u=e.i(675120),d=a,p=t,h=s,f=e.i(416959),m=e.i(386688),g=e.i(763480),v=u,x=e.i(86395),y=e.i(292273);let b=(0,e.i(605528).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M4.02174 4.76932C6.11625 2.33698 9.8838 2.33698 11.9783 4.76932L14.7603 7.99999L13.6664 9.27031L14.6934 10.3764L16.3184 8.48938V7.5106L13.115 3.79054C10.422 0.663244 5.57803 0.663247 2.88509 3.79054L-0.318298 7.5106V8.48938L2.88509 12.2094C4.7342 14.3568 7.59749 15.0297 10.0822 14.2281L8.9183 12.9747C7.16767 13.2832 5.28865 12.7019 4.02174 11.2307L1.23978 7.99999L4.02174 4.76932ZM8 6C6.89543 6 6 6.89543 6 8C6 9.10457 6.89543 10 8 10C9.10457 10 10 9.10457 10 8C10 6.89543 9.10457 6 8 6ZM4.5 8C4.5 6.067 6.067 4.5 8 4.5C9.933 4.5 11.5 6.067 11.5 8C11.5 8.63488 11.331 9.23028 11.0354 9.74364L14.0496 12.9897L14.5599 13.5393L13.4607 14.5599L12.9504 14.0103L10.0223 10.857C9.4512 11.262 8.7534 11.5 8 11.5C6.067 11.5 4.5 9.933 4.5 8Z" fill="currentColor"/>');e.s(["PreviewEye",0,b],917372);var w=e.i(512817),j=e.i(941088),C=e.i(707974),k=e.i(373998),S=e.i(332991),N=a,E=e.i(242759),M=e.i(662429),I=e.i(749709);function D(e){let{chatId:t}=e,n=(0,k.getChatDeploymentAtoms)(t),{git:r}=(0,h.useAtomValue)(n.externalMeta),i=(0,h.useAtomValue)(n.activeBlockVersionNumber),a=(0,h.useAtomValue)(n.newBranchName),o=(0,h.useAtomValue)(n.selectedEnvironment),s=(0,h.useAtomValue)(n.protection),l=e=>{switch(e){case"public":default:return"Public";case"team":return"Team Only";case"password":return"Password Protected"}},{setSelectedEnvironment:c,updateNewBranchName:u,setStageIntent:d}=(0,k.getChatDeploymentActions)(t),D=!!(0,h.useAtomValue)(n.asyncActionLoading),T=(0,N.useMemo)(()=>(null==r?void 0:r.ref)?r.onProductionBranch?(c("production"),{shouldForce:!0,previewDisabled:!0,productionDisabled:!1,branchName:r.ref,branchInputDisabled:!0}):(c("preview"),u(r.ref),{shouldForce:!0,previewDisabled:!1,productionDisabled:!0,branchName:r.ref,branchInputDisabled:!0}):{shouldForce:!1,previewDisabled:!1,productionDisabled:!1,branchName:a,branchInputDisabled:!1},[null==r?void 0:r.ref,null==r?void 0:r.onProductionBranch,a,c,u]),A=T.previewDisabled||D,L=T.productionDisabled||D,P=T.branchInputDisabled||D,R=T.branchName,{gbs:_,dpe:O}=(0,E.useFlags)();return(0,N.useEffect)(()=>{L||c("production")},[]),(0,p.jsxs)("form",{children:[(0,p.jsxs)(f.PopoverContent,{className:"p-0",children:[_&&r?(0,p.jsxs)(M.PopoverHeading,{title:"Select a Branch",className:"p-4 border-b border-alpha-400",children:[(0,p.jsxs)(m.ChoiceBoxGroup,{value:o,onChange:e=>{c(e)},className:"flex flex-col gap-2",children:[(0,p.jsx)(m.ChoiceBoxGroup.Item,{disabled:L,Icon:(0,p.jsx)(x.Globe,{}),title:"Production",description:T.productionDisabled?"Only main can be to deployed to production.":"Make your changes live to all users.",value:"production"}),(0,p.jsx)(m.ChoiceBoxGroup.Item,{disabled:A,Icon:(0,p.jsx)(b,{}),title:"Preview",description:"Test your changes on a branch before going live.",value:"preview"})]}),(0,p.jsx)(v.TransitionNode,{...v.PRESETS.popoverContent,renderKey:null!=o?o:"",children:"preview"===o?(0,p.jsxs)("div",{className:"flex flex-col gap-2 pt-3",children:[(0,p.jsx)(C.Label,{htmlFor:"branch-name",children:"Branch name"}),(0,p.jsx)(g.Input,{prefix:T.shouldForce?(0,p.jsx)("span",{className:"text-gray-500",children:(0,p.jsx)(y.LockClosed,{})}):void 0,disabled:P,id:"branch-name",placeholder:"your-branch-name",value:null!=R?R:"",onChange:e=>u(e.target.value)})]}):null})]}):(0,p.jsx)(M.PopoverHeading,{title:"Publish to the Web",className:"p-4 border-b border-alpha-400",children:(0,p.jsxs)("span",{children:[(0,p.jsx)("span",{children:"Publish "}),i?(0,p.jsxs)("span",{className:"font-medium",children:["version ",i]}):(0,p.jsx)("span",{children:"your app"}),(0,p.jsxs)("span",{children:[" ","to the web using Vercel. After you publish your app, you can feature it in the community as a template."]})]})}),(0,p.jsxs)("div",{className:"flex flex-col gap-1 p-3",children:[(0,p.jsx)(I.default,{title:"Customize Domain",icon:(0,p.jsx)(w.PencilEdit,{className:"!text-gray-500 size-4"}),onClick:()=>{d("assign-domain")},disabledReason:"You can only set a custom domain after publishing your app.",disabled:!O||"preview"===o}),(0,p.jsx)(I.default,{title:"Visibility",icon:(0,p.jsx)(j.Eye,{className:"!text-gray-500 size-4"}),onClick:()=>{d("password-protection")},disabledReason:"You can only set visibility after publishing your app.",label:l(s),disabled:!O||"preview"===o})]})]}),(0,p.jsx)(f.PopoverActions,{children:(0,p.jsx)(S.DeployOrPushButton,{chatId:t})})]})}var T=k,A=t,L=s,P=e.i(596359),R=e.i(612161),_=e.i(517953),O=f,F=e.i(548866),V=k,B=a,z=S,H=u;function U(e){let{chatId:t}=e,n=(0,V.getChatDeploymentAtoms)(t),r=(0,L.useAtomValue)(n.deployWarning),i=(0,B.useMemo)(()=>{if(!r)return{content:(0,A.jsx)(F.EmptyState,{title:"No deployment warnings",variant:"success",icon:(0,A.jsx)(P.Check,{}),children:"The source has been checked and no deployment warnings were found."}),actions:(0,A.jsx)(z.DeployOrPushButton,{chatId:t})};let{isSecurityRisk:e,warning:n}=r;return{content:(0,A.jsx)(O.PopoverContent,{children:(0,A.jsx)(F.EmptyState,{title:e?"Security Risk Found":"Deployment Warning",variant:e?"error":"warning",icon:e?(0,A.jsx)(R.Stop,{}):(0,A.jsx)(_.Warning,{}),children:n})}),actions:(0,A.jsxs)(O.PopoverActions,{children:[(0,A.jsx)(z.FixDeploymentWarningButton,{chatId:t}),(0,A.jsx)(z.DeployOrPushButton,{variant:"secondary",chatId:t})]})}},[t,r]);return(0,A.jsx)(H.TransitionNode,{...H.PRESETS.popoverContent,children:(0,A.jsxs)("div",{className:"flex flex-col gap-2",children:[i.content,i.actions]})})}var q=t,W=e.i(176248),Z=R,G=f,K=F,X=e.i(480118),$=e.i(691175),Y=e.i(667660);function J(e){let{chatId:t}=e,n=(0,X.useRouter)(),{activeScopeSlug:r,isTeam:i}=(0,Y.useActiveScope)();return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(G.PopoverContent,{children:(0,q.jsx)(K.EmptyState,{title:"Failed to load deployment",variant:"error",icon:(0,q.jsx)(Z.Stop,{}),children:"You must set up two-factor authentication before accessing this deployment."})}),i&&r?(0,q.jsx)(G.PopoverActions,{children:(0,q.jsx)(W.Button,{size:"sm",onClick:()=>n.push((0,$.getTwoFactorRequiredUrlClient)({slug:r,path:"/chat/".concat(t)})),children:"Enable"})}):null]})}var Q=t,ee=W,et=R,en=f,er=F,ei=e.i(348327);function ea(e){let{chatId:t}=e,{handleRetry:n,handleReport:r}=(0,ei.useAsyncChatDeploymentActions)({chatId:t});return(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(en.PopoverContent,{children:(0,Q.jsx)(er.EmptyState,{title:"Failed to load deployment",variant:"error",icon:(0,Q.jsx)(et.Stop,{}),children:"An issue occurred with our servers or your network connection. Please reload or report the problem if it persists."})}),(0,Q.jsxs)(en.PopoverActions,{children:[(0,Q.jsx)(ee.Button,{size:"sm",onClick:r,variant:"secondary",children:"Report"}),(0,Q.jsx)(ee.Button,{size:"sm",onClick:n,children:"Reload"})]})]})}var eo=t,es=W,el=f,ec=e.i(607391),eu=e.i(365449),ed=k,ep=t,eh=g,ef=x,em=y,eg=C,ev=e.i(592258),ex=e.i(230766),ey=e.i(403055),eb=a,ew=k,ej=s;e.i(472428);var eC=e.i(152641),ek=e.i(32170),eS=Y,eN=E;function eE(e){let{value:t,icon:n,title:r,description:i,disabled:a,disabledReason:o}=e;return(0,ep.jsx)(ev.SelectItem,{value:t,"aria-disabled":a,title:a?o:void 0,className:(0,ey.cn)("px-3 py-1 w-full group relative",a?"cursor-not-allowed opacity-50":""),iconOnRight:!0,children:(0,ep.jsxs)("div",{className:"flex items-center gap-3 min-w-72",children:[(0,ep.jsx)("span",{className:"text-gray-700",children:n}),(0,ep.jsxs)("div",{className:"flex flex-col text-left w-full",children:[(0,ep.jsx)("span",{className:"text-sm font-medium w-full",children:r}),a&&o?(0,ep.jsxs)("span",{className:"h-4 overflow-hidden block w-full relative",children:[(0,ep.jsx)("span",{className:"absolute inset-x-0 top-0 transition-transform duration-200 group-hover:-translate-y-full text-xs text-gray-500 whitespace-nowrap w-full",children:i}),(0,ep.jsx)("span",{className:"absolute inset-x-0 top-full transition-transform duration-200 group-hover:-translate-y-full text-xs text-gray-500 whitespace-nowrap w-full",children:o})]}):(0,ep.jsx)("span",{className:"text-xs text-gray-500",children:i})]})]})})}let eM=e=>{var t,n,r,i,a,o,s,l;let{chatId:c}=e,{dpe:u}=(0,eN.useFlags)(),d=(0,ew.getChatDeploymentAtoms)(c),p=(0,ej.useAtomValue)(d.selectedEnvironment),h=(0,ej.useAtomValue)(d.protection),f=(0,ej.useAtomValue)(d.protectionPassword),{setProtection:m,setProtectionPassword:g}=(0,ew.getChatDeploymentActions)(c),{user:v}=(0,ek.useUser)(),{isNewV0Rbac:x,hasVercelWritePermission:y}=(0,eS.useActiveScope)(),b=!!(x?y:v&&["OWNER","MEMBER"].includes(null!=(s=v.teamRole)?s:"")),{data:w}=(0,eC.useServerQuerySWR)(["scoped","team"],{},{revalidateNever:!0,stopFetch:!u}),j=!!w&&null!=(l=null==(n=w.enabledInvoiceItems)||null==(t=n.passwordProtection)?void 0:t.enabled)&&l,{data:C}=(0,eC.useServerQuerySWR)(["chat","project"],{chatId:c},{stopFetch:!u}),k=null==w||null==(r=w.defaultDeploymentProtection)?void 0:r.passwordProtection,S=null==k?void 0:k.deploymentType,N=null==w||null==(i=w.defaultDeploymentProtection)?void 0:i.ssoProtection,E=null==N?void 0:N.deploymentType,M=e=>!!e&&("all"===e||("preview"===e?"preview"===p:"prod_deployment_urls_and_all_previews"===e?"preview"===p||"production"===p:"all_except_custom_domains"===e&&"preview"===p)),I=w&&p?k&&M(S)?"password":N&&M(E)?"team":"public":"public",D="all"===S||"all_except_custom_domains"===S&&"preview"===p,T="all"===E||"all_except_custom_domains"===E&&"preview"===p,A=D?"password":T?"team":null,L="password"===A?!b:!b||!j;(0,eb.useEffect)(()=>{A&&h!==A&&m(A)},[A,h,m]);let P="error"in C||!C.vercelProject?"public":(null==(a=C.vercelProject.project.passwordProtection)?void 0:a.deploymentType)==="all"?"password":(null==(o=C.vercelProject.project.ssoProtection)?void 0:o.deploymentType)==="all"?"team":"public";(0,eb.useEffect)(()=>{if(A)return;let e="public"!==P?P:I;h!==e&&m(e)},[P,A,I]);let R=(0,eb.useCallback)(e=>{switch(e){case"public":return A?"Enforced by team policy":b?void 0:x?"Requires builder permission":"Requires Owner or Member role";case"team":return"password"===A?"Enforced by team policy":j?b?void 0:x?"Requires builder permission":"Requires Owner or Member role":"Not included in your plan";case"password":return"team"===A?"Enforced by team policy":j?b?void 0:x?"Requires v0 Builder permission":"Requires Owner or Member role":"Not included in your plan"}},[A,b,x,j]);return u?(0,ep.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,ep.jsx)(eg.Label,{htmlFor:"deployment-protection",children:"Visibility"}),(0,ep.jsxs)(ev.Select,{value:h,onValueChange:e=>{b&&(!A||e===A)&&("password"!==e&&"team"!==e||j)&&(m(e),"password"!==e&&g(null))},children:[(0,ep.jsx)(ev.SelectTrigger,{id:"deployment-protection",className:"h-8 rounded-md",children:(0,ep.jsx)(ev.SelectValue,{children:(0,ep.jsxs)("span",{className:"flex items-center gap-2",children:["team"===h?(0,ep.jsx)(ex.AvatarUser,{teamId:null==w?void 0:w.id,rounded:!0,size:"xs"}):"password"===h?(0,ep.jsx)(em.LockClosed,{className:"text-gray-700"}):(0,ep.jsx)(ef.Globe,{className:"text-gray-700"}),(0,ep.jsx)("span",{children:"team"===h?"Everyone in ".concat((null==w?void 0:w.name)||"team"):"password"===h?"Password Protected":"Public"})]})})}),(0,ep.jsxs)(ev.SelectContent,{children:[(0,ep.jsx)(eE,{value:"public",icon:(0,ep.jsx)(ef.Globe,{}),title:"Public",description:"Anyone with the URL can view your app",disabled:!!A||!b,disabledReason:R("public")}),w&&(0,ep.jsx)(eE,{value:"team",icon:(0,ep.jsx)(ex.AvatarUser,{teamId:w.id,rounded:!0,size:"xs"}),title:"Everyone in ".concat(w.name),description:"Anyone in the ".concat(w.name," team can view your app"),disabled:"password"===A||!b||!j,disabledReason:R("team")}),(0,ep.jsx)(eE,{value:"password",icon:(0,ep.jsx)(em.LockClosed,{}),title:"Password Protected",description:"Anyone with the password can view your app",disabled:L||"team"===A,disabledReason:R("password")})]})]}),"password"===h&&(0,ep.jsxs)("div",{className:"flex flex-col gap-2 pt-2",children:[(0,ep.jsx)(eg.Label,{htmlFor:"deployment-password",children:"Password"}),(0,ep.jsx)(eh.Input,{id:"deployment-password",placeholder:"password"!==A||b?"Enter password":"Default password already set",type:"password",value:null!=f?f:"",onChange:e=>g(e.target.value),disabled:L})]})]}):null};var eI=s,eD=a;e.i(563948);var eT=e.i(407562),eA=e.i(929110),eL=eC,eP=e.i(144019),eR=e.i(449381),e_=i,eO=e.i(111412);function eF(e){let{chatId:t}=e,{setStageIntent:n}=(0,ed.getChatDeploymentActions)(t),r=(0,ed.getChatDeploymentAtoms)(t),i=(0,eI.useAtomValue)(r.protection),a=(0,eI.useAtomValue)(r.protectionPassword),[o,s]=(0,eD.useState)(!1),l=(0,eR.useActiveBlockState)(),c=(0,eP.useAutoCreateProject)({chatId:t,activeBlock:l}),{data:u,mutate:d}=(0,eL.useServerQuerySWR)(["chat","project"],{});if("error"in u)return(0,eo.jsxs)(eo.Fragment,{children:[(0,eo.jsx)(eu.default,{title:"Visibility",onBack:()=>{n(null)}}),(0,eo.jsx)(el.PopoverContent,{className:"gap-4",children:(0,eo.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,eo.jsx)(eO.Label,{htmlFor:"deployment-protection",children:"Visibility"}),(0,eo.jsx)(e_.Skeleton,{className:"h-[32px] w-full"})]})}),(0,eo.jsxs)(el.PopoverActions,{children:[(0,eo.jsx)(es.Button,{size:"sm",variant:"outline",disabled:!0,type:"button",children:"Cancel"}),(0,eo.jsx)(es.Button,{size:"sm",disabled:!0,children:"Save"})]})]});let p=u.projectId,h=async()=>{if(!p)return void eT.toast.error("Project not found");if(!u.vercelProjectId){s(!0);try{await c()}catch(e){eT.toast.error("Unable to create project"),s(!1);return}}s(!0);let e=!1;try{"password"===i?(e=await (0,eA.configureDeploymentProtectionAction)({projectId:p,kind:"password",password:null!=a?a:void 0}),await d({serverMutate:Promise.resolve(!0),optimisticData:{...u,vercelProject:u.vercelProject?{...u.vercelProject,project:{...u.vercelProject.project,passwordProtection:{deploymentType:"all"}}}:null}})):"team"===i?(e=await (0,eA.configureDeploymentProtectionAction)({projectId:p,kind:"sso",enabled:!0}),await d({serverMutate:Promise.resolve(!0),optimisticData:{...u,vercelProject:u.vercelProject?{...u.vercelProject,project:{...u.vercelProject.project,ssoProtection:{deploymentType:"all"}}}:null}})):((e=await (0,eA.configureDeploymentProtectionAction)({projectId:p,kind:"password",password:null}))&&await (0,eA.configureDeploymentProtectionAction)({projectId:p,kind:"sso",enabled:!1}),await d({serverMutate:Promise.resolve(!0),optimisticData:{...u,vercelProject:u.vercelProject?{...u.vercelProject,project:{...u.vercelProject.project,passwordProtection:void 0,ssoProtection:void 0}}:null}})),e?(eT.toast.success("Deployment protection updated"),n(null)):eT.toast.error("Failed to update protection")}catch(e){eT.toast.error("Failed to update protection")}finally{s(!1)}};return(0,eo.jsxs)(eo.Fragment,{children:[(0,eo.jsx)(eu.default,{title:"Visibility",onBack:()=>{n(null)}}),(0,eo.jsx)(el.PopoverContent,{className:"gap-4",children:(0,eo.jsx)(eM,{chatId:t})}),(0,eo.jsxs)(el.PopoverActions,{children:[(0,eo.jsx)(es.Button,{size:"sm",variant:"outline",onClick:()=>n(null),disabled:o,type:"button",children:"Cancel"}),(0,eo.jsx)(es.Button,{size:"sm",onClick:h,disabled:o,children:(0,eo.jsx)(ec.ActionStatus,{isLoading:o,loading:o,children:"Save"})})]})]})}function eV(e){let{chatId:t}=e,n=(0,T.getChatDeploymentAtoms)(t),r=(0,s.useAtomValue)(n.stage),i=(0,d.useMemo)(()=>{switch(r){case"create":return(0,o.jsx)(D,{chatId:t});case"deployment":return(0,o.jsx)(l.DeploymentStage,{chatId:t});case"assign-domain":return(0,o.jsx)(c.AssignDomainStage,{chatId:t});case"deploy-warning":return(0,o.jsx)(U,{chatId:t});case"two-factor-error":return(0,o.jsx)(J,{chatId:t});case"error":return(0,o.jsx)(ea,{chatId:t});case"password-protection":return(0,o.jsx)(eF,{chatId:t})}},[t,r]);return(0,o.jsx)(u.TransitionNode,{...u.PRESETS.popoverContent,children:(0,o.jsx)("div",{className:"flex flex-col",children:i})})}var eB=e.i(452703),ez=eC,eH=a,eU=eC;function eq(e,t){return(0,eU.useServerQuerySWR)(["deployment","screenshot"],{deploymentId:e},{refreshInterval:t&&e?3e3:void 0,stopFetch:!t})}function eW(e){var t,n,r;let{chatId:i}=e,[a,o]=(0,eH.useState)(void 0),{data:s}=(0,ez.useServerQuerySWR)(["chat","externalMeta"],{chatId:i},{refreshInterval:a});(0,eH.useEffect)(()=>{var e,t;let n,r=null==(e=s.deployment)?void 0:e.readyState,i=null==(t=s.deployment)?void 0:t.id;if(!r||!i)return;let{setDeploymentStatus:a}=(0,eB.getDeploymentActions)(i);a({error:void 0,deployment:s.deployment}),["QUEUED","INITIALIZING","NOTREADY"].includes(r)&&(n=500),["BUILDING"].includes(r)&&(n=2e3),"READY"===r&&(n=void 0),o(n)},[s,o]);let l=null==(t=s.deployment)?void 0:t.id,c=(null==(n=s.deployment)?void 0:n.readyState)==="READY"&&!s.deployment.screenshotUrl,{data:u}=eq(null==(r=s.deployment)?void 0:r.id,c);return(0,eH.useEffect)(()=>{if(u.url&&l&&s.deployment){let{setDeploymentStatus:e}=(0,eB.getDeploymentActions)(l);e({error:void 0,deployment:{...s.deployment,screenshotUrl:u.url}})}},[u.url,l,s.deployment]),{externalMeta:s}}var eZ=a,eG=eR,eK=k,eX=s,e$=e.i(370912),eY=e.i(301331);function eJ(e){let{chatId:t}=e,n=(0,eG.useActiveBlockState)(),{getBlockCreatedAt:r}=(0,e$.useBlockCreatedAt)(),{currentBlockIndex:i}=(0,eY.useBlockHistory)({blockId:null==n?void 0:n.id,searchAll:!0}),a=(0,eK.getChatDeploymentAtoms)(t),{deployment:o}=(0,eX.useAtomValue)(a.externalMeta),{setActiveBlockVersionNumber:s,setHasDeployableChanges:l}=(0,eK.getChatDeploymentActions)(t),c=e=>e?new Date(e).getTime():0,u=(0,eZ.useMemo)(()=>!!n&&(c(n.lastEditedAt)>c(null==o?void 0:o.createdAt)||c(r(n.id))>c(null==o?void 0:o.createdAt)),[n,o,r]),d=(0,eZ.useMemo)(()=>i+1,[i]);return(0,eZ.useLayoutEffect)(()=>{let e=requestAnimationFrame(()=>{l(u),s(d)});return()=>cancelAnimationFrame(e)},[u,l,s,d]),{hasDeployableChanges:u}}var eQ=s,e0=a,e1=eT,e2=k,e5=e.i(626085);function e4(e){let{chatId:t}=e,n=(0,e2.getChatDeploymentAtoms)(t),{deployment:r}=(0,eQ.useAtomValue)(n.externalMeta),i=(0,eQ.useAtomValue)(n.isOpen),a=(0,eQ.useAtomValue)(n.deploymentState),{triggerPassingState:o}=(0,e2.getChatDeploymentActions)(t),s=(0,e5.usePrevious)(a),l=(0,e0.useCallback)(()=>{!i&&(null==r?void 0:r.id)&&e1.toast.deployment({id:r.id})},[i,null==r?void 0:r.id]);(0,e0.useEffect)(()=>{(null==r?void 0:r.id)&&s&&(["queued","failed","error","not-deployed","deploying"].includes(s)&&"building"===a&&l(),"building"===s&&"failed"===a&&(o("passing-error",3e3),l()),"building"===s&&"deployed"===a&&(o("passing-deployed"),l()))},[null==r?void 0:r.id,s,a,l,o])}var e3=eC,e7=s,e9=k,e6=e.i(280419);function e8(e){let{chatId:n}=e;return(0,t.jsx)(a.Suspense,{fallback:(0,t.jsx)(te,{}),children:(0,t.jsx)(tt,{chatId:n})})}function te(){return(0,t.jsx)(i.Skeleton,{className:"h-7 w-[91px] rounded-[6px]"})}function tt(e){let{chatId:i}=e;eW({chatId:i}),eJ({chatId:i}),e4({chatId:i}),(0,e3.useServerQuerySWR)(["scoped","team"],{});let a=(0,e9.getChatDeploymentAtoms)(i),o=(0,e9.getChatDeploymentActions)(i),s=(0,e7.useAtomValue)(a.openLocation),{prewarmDeployWarning:l}=(0,e6.usePrewarmDeployWarnings)({chatId:i});return(0,t.jsxs)(r.Popover,{open:"chat-header"===s,onOpenChange:e=>{o.setIsOpenForLocation(e,"chat-header")},children:[(0,t.jsx)(r.PopoverTrigger,{asChild:!0,children:(0,t.jsx)(n.ChatDeploymentTrigger,{chatId:i,onMouseOver:()=>{l(!1)}})}),(0,t.jsx)(r.PopoverContent,{className:"w-[440px] max-w-screen origin-top-right",align:"end",alignOffset:1,children:(0,t.jsx)(eV,{chatId:i})})]})}},975479,e=>{"use strict";e.s(["OldBlockVersionButtons",()=>u]);var t=e.i(832520),n=e.i(92479),r=e.i(449381),i=e.i(301331),a=e.i(176248),o=e.i(76866),s=e.i(534607),l=e.i(200407),c=e.i(127169);function u(e){let{currentVersion:u,latestVersion:d}=e,p=(0,r.useActiveBlockState)(),{history:h}=(0,i.useBlockHistory)({blockId:null==p?void 0:p.id,searchAll:!0}),{restoreCurrentBlock:f,exitToLatest:m,isRestoring:g}=(0,o.useRestoreBlockVersion)(null==p?void 0:p.id),{isStreaming:v,isContinuing:x,isLoading:y,isRestoring:b,isSyncing:w}=(0,n.useChatLoadingState)(),j=(0,l.useMemo)(()=>v||x||y||b||w,[v,x,y,b,w]),C=(0,s.useMac)(),k=(0,l.useCallback)(()=>{p&&m(p)},[m,p]),S=(0,l.useCallback)(()=>{f()},[f]);return(0,c.useShortcut)(e=>{"KeyQ"===e.code&&(e.altKey||e.metaKey)&&(e.preventDefault(),k())},[k]),(0,t.jsxs)("div",{className:"flex items-center gap-[6px]",children:[(0,t.jsxs)(a.Button,{variant:"outline",size:"sm",tooltip:{content:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:["Go to latest version",(0,t.jsxs)("div",{className:"font-mono flex items-center gap-1",children:[(0,t.jsx)("div",{className:"text-label-12-mono size-5 bg-alpha-white-400 text-white  rounded-sm flex items-center justify-center",children:C?"⌥":"Alt"}),(0,t.jsx)("div",{className:"text-label-12-mono size-5 bg-alpha-white-400 text-white rounded-sm flex items-center justify-center",children:"Q"})]})]})},onClick:k,disabled:!p||0===h.length||j||g,className:"flex items-center gap-2 h-7 rounded-[6px] px-2",children:[(0,t.jsx)("span",{className:"hidden sm:flex",children:"Back to Latest"}),(0,t.jsx)("span",{className:"sm:hidden",children:"Latest"})]}),(0,t.jsx)(a.Button,{variant:"blue",size:"sm",tooltip:"Restore v".concat(u),onClick:S,disabled:!p||j||g,className:"h-7 rounded-[6px] px-2",children:g?"Restoring...":"Restore"})]})}},589429,620678,e=>{"use strict";e.s(["MissingEnvDialog",()=>et],589429);var t=e.i(832520),n=e.i(926788),r=e.i(304649),i=e.i(7809),a=e.i(295548),o=e.i(674523),s=e.i(176248),l=e.i(299313),c=e.i(200407),u=e.i(92479),d=e.i(921097),p=e.i(53708),h=e.i(242759),f=e.i(780292);e.s(["ChatHeaderActions",()=>U,"isSettingsSheetOpenAtom",()=>z,"settingsSheetTabAtom",()=>H],620678);var m=t,g=e.i(564997),v=e.i(584497),x=e.i(625402),y=e.i(667660),b=c,w=e.i(449381),j=e.i(697856),C=e.i(499282),k=e.i(205341),S=e.i(5894),N=e.i(296046),E=e.i(729602),M=e.i(805214),I=e.i(184645),D=e.i(618262),T=e.i(344290),A=e.i(613922),L=e.i(262553),P=e.i(519738),R=e.i(975479),_=w,O=e.i(280419),F=e.i(18547);function V(e){let{chatId:t}=e,n=(0,_.useActiveBlockState)(),{prewarmDeployWarning:r}=(0,O.usePrewarmDeployWarnings)({chatId:t});(0,F.useChatMessageFinishedListener)(()=>{t&&(null==n?void 0:n.id)&&"code-project"===n.type&&r(!1)})}var B=e.i(2077);let z=(0,k.atom)(!1),H=(0,k.atom)("overview");function U(){let{user:e}=(0,y.useActiveScope)(),{canWriteToChat:t,project:n}=(0,v.useChatMetadata)(),r=(0,w.useActiveBlockState)(),{chatPrivacy:i}=(0,v.useChatPrivacy)(),a=(0,E.useChatId)(),o=(0,N.useIsChatPage)(),{getBlockShared:s}=(0,j.useSharedBlocks)(),{isReadOnlyMode:l,isLatest:c}=(0,L.useReadOnlyMode)(),{currentVersion:u,latestVersion:d}=(0,P.useBlockVersionInfo)(null==r?void 0:r.id);V({chatId:a||""});let p=(0,b.useMemo)(()=>!t&&("public"===i||"unlisted"===i||"team"===i),[t,i]),h=(0,b.useMemo)(()=>r&&(0,C.canBeDeployed)(r),[r]),f=(0,b.useMemo)(()=>!!r&&s(r.id),[r,s]),g=(0,b.useMemo)(()=>null==e?void 0:e.isImpersonation,[null==e?void 0:e.isImpersonation]),x=(0,b.useMemo)(()=>!l&&t||g?(0,m.jsx)(D.SettingsButton,{projectId:null==n?void 0:n.projectId}):null,[t,l,null==n?void 0:n.projectId,g]),k=(0,b.useMemo)(()=>{if(p&&r)return(0,m.jsx)(S.FlagBlockButton,{variant:"secondary",blockId:r.id})},[p,r]),_=(0,b.useMemo)(()=>{if(!l&&r&&a&&h&&!f)return(0,m.jsx)("div",{className:"hidden sm:block",children:(0,m.jsx)(I.GitSyncButton,{chatId:a})})},[l,r,a,h,f]),O=(0,b.useMemo)(()=>{if((!t||c)&&a)return(0,m.jsx)(T.ChatShareButton,{})},[t,c,a]),F=(0,b.useMemo)(()=>{if(t&&c&&a&&h&&!f)return(0,m.jsx)(A.DeploymentButton,{chatId:a})},[t,c,a,h,f]),z=(0,b.useMemo)(()=>{if(l)return(0,m.jsx)(R.OldBlockVersionButtons,{currentVersion:u,latestVersion:d})},[l,u,d]),H=(0,b.useMemo)(()=>t||!r?null:(0,m.jsx)(B.ForkBlockButton,{shorthandToolTip:!0,variant:"secondary",blockId:r.id,canWriteToChat:t,page:"chat"}),[r,t]);return o?(0,m.jsxs)("div",{className:"flex items-center gap-1.5",children:[x,(0,m.jsx)(q,{}),k,_,z,H,O,F,(0,m.jsx)(M.HeaderUserMenu,{})]}):null}function q(){let e=(0,E.useChatId)(),{user:t}=(0,y.useActiveScope)();return(null==t?void 0:t.isAdminMode)&&e?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(x.OpenInInternalButton,{chatId:e,className:"sm:hidden md:flex"}),(0,m.jsx)(g.ExportChatButton,{className:"hidden md:flex"})]}):null}var W=v,Z=w,G=e.i(480118),K=e.i(921),X=e.i(194433);e.i(563948);var $=e.i(407562),Y=e.i(211976),J=y,Q=e.i(44337);function ee(e){let{integrationNames:n,standaloneEnvs:i}=e,{scp:a}=(0,h.useFlags)();if(!i&&0===n.length||i&&0===n.length&&0===i.length)return null;let s=[...n,...i&&i.length>0?["manual"]:[]];return(0,t.jsx)("div",{className:(0,r.cn)("flex w-full",!a&&"justify-center"),children:(0,t.jsx)("div",{className:"flex",children:s.map((e,n)=>(0,t.jsx)("div",{className:"relative h-12 w-12 rounded-full border border-gray-700 bg-black",style:{marginLeft:0===n?0:"-12px",zIndex:n},children:(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,t.jsx)("div",{className:"relative h-7 w-7",children:"manual"===e?(0,t.jsx)(p.Variable,{className:"h-7 w-7 text-white!"}):(0,t.jsx)(l.default,{src:o.INTEGRATION_NAME_TO_SVG[e]||"/placeholder.svg",alt:e,fill:!0,className:"rounded-sm object-contain"})})})},e))})})}function et(e){let{open:o,setOpen:l,missingEnvs:p}=e,{chatId:m}=(0,u.useChatId)(),{addToDontShowAgain:g}=(0,d.useDontShowAgain)(m),{scp:v}=(0,h.useFlags)(),[x,y]=(0,c.useState)(!1),[b,w]=(0,c.useState)(!1),j=(0,G.useRouter)(),C=(0,f.useSetAtom)(z),k=(0,f.useSetAtom)(H),S=(0,Z.useActiveBlockState)(),{project:N,title:E,canWriteToChat:M}=(0,W.useChatMetadata)(),I=(0,W.useChatMetadata)(),{hasVercelWritePermission:D}=(0,J.useActiveScope)(),{integrationsNeeded:T,standaloneEnvs:A}=(0,c.useMemo)(()=>{let e=new Set,t=[];for(let n of p){let r=!1;for(let[t,i]of Q.INTEGRATION_NAME_TO_ENV_VARS.entries())if(i.includes(n)){e.add(t),r=!0;break}r||t.push(n)}return{integrationsNeeded:Array.from(e),standaloneEnvs:t}},[p]);return T.length>0||A.length>0?v?(0,t.jsx)("div",{className:(0,r.cn)("absolute inset-0",!o&&"pointer-events-none"),children:(0,t.jsxs)(n.Dialog,{open:o,modal:!1,onOpenChange:l,children:[(0,t.jsx)("div",{"data-state":o?"open":"closed",className:(0,r.cn)("bg-alpha-700 dark:bg-alpha-900 absolute inset-0 z-50 transition-opacity data-[state=closed]:pointer-events-none data-[state=closed]:opacity-0 data-[state=open]:opacity-100"),onClick:()=>{o&&l(!1)}}),(0,t.jsxs)(n.DialogContent,{showClose:!1,onEscapeKeyDown:()=>{var e;return null==(e=document.getElementById("env-warning-trigger"))?void 0:e.focus()},className:"max-h-[400px] max-w-[min(540px,90vw)] gap-2.5 overflow-y-scroll p-6 shadow-sm",omitPortal:!0,onInteractOutside:e=>e.preventDefault(),children:[(0,t.jsxs)(n.DialogClose,{onKeyDown:e=>{"Tab"===e.key&&(e.preventDefault(),document.activeElement instanceof HTMLElement&&document.activeElement.blur())},tabIndex:1,className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute right-4 top-4 rounded-sm opacity-70 transition-opacity hover:opacity-100 focus:outline-hidden focus:ring-2 focus:ring-offset-2 disabled:pointer-events-none",children:[(0,t.jsx)(i.Cross,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,t.jsx)(ee,{integrationNames:T,standaloneEnvs:A}),(0,t.jsxs)("div",{className:"flex w-full flex-col gap-2",children:[(0,t.jsx)(n.DialogTitle,{className:"flex w-full justify-start text-xl",children:(0,t.jsxs)("span",{children:["This generation uses"," ",(0,t.jsx)("span",{children:T.length+A.length>1?"integrations":T.length>0?T[0]:"an integration"})]})}),(0,t.jsx)(n.DialogDescription,{className:"flex w-full justify-start text-sm text-gray-500",children:"Complete the steps in chat to ensure the generation works correctly."})]}),(0,t.jsx)("div",{className:"flex w-full justify-end",children:(0,t.jsx)(s.Button,{onClick:async()=>{await g(p,T)},variant:"secondary",size:"sm",children:"Don't show again"})})]})]})]})}):(0,t.jsx)("div",{className:(0,r.cn)("absolute inset-0",!o&&"pointer-events-none"),children:(0,t.jsxs)(n.Dialog,{open:o,modal:!1,onOpenChange:l,children:[(0,t.jsx)("div",{"data-state":o?"open":"closed",className:(0,r.cn)("bg-alpha-700 dark:bg-alpha-900 absolute inset-0 z-50 transition-opacity data-[state=closed]:pointer-events-none data-[state=closed]:opacity-0 data-[state=open]:opacity-100"),onClick:()=>{o&&l(!1)}}),(0,t.jsxs)(n.DialogContent,{showClose:!1,onEscapeKeyDown:()=>{var e;return null==(e=document.getElementById("env-warning-trigger"))?void 0:e.focus()},className:"max-h-[400px] max-w-[min(440px,90vw)] gap-2.5 overflow-y-scroll p-6 shadow-sm",omitPortal:!0,onInteractOutside:e=>e.preventDefault(),children:[(0,t.jsxs)(n.DialogClose,{onKeyDown:e=>{"Tab"===e.key&&(e.preventDefault(),document.activeElement instanceof HTMLElement&&document.activeElement.blur())},tabIndex:1,className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute right-4 top-4 rounded-sm opacity-70 transition-opacity hover:opacity-100 focus:outline-hidden focus:ring-2 focus:ring-offset-2 disabled:pointer-events-none",children:[(0,t.jsx)(i.Cross,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]}),T.length>0?(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4 text-center",children:[(0,t.jsx)(ee,{integrationNames:T}),(0,t.jsx)(n.DialogTitle,{className:"text-xl",children:(0,t.jsxs)("span",{children:["This generation uses"," ",(0,t.jsx)("span",{children:T.length>1?"integrations":T[0]}),"."]})}),(0,t.jsxs)(n.DialogDescription,{className:"text-md text-gray-500",children:["Add the required integration",(0,t.jsx)("span",{children:T.length>1&&"s"})," in chat or from the Settings panel."," ",M?!(null==N?void 0:N.projectId)&&(0,t.jsx)("span",{children:"You'll need to create a project first."}):(0,t.jsx)("span",{children:"You'll need to fork this chat first."})]}),(0,t.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,t.jsx)(s.Button,{onClick:async()=>{await g(p,T)},variant:"secondary",size:"sm",children:"Don't show again"}),x||b?(0,t.jsx)(Y.SpinnerButton,{variant:"default",pending:!0,size:"sm",children:x?"Creating Project":"Forking Block"}):(0,t.jsx)(s.Button,{onClick:async()=>{if(!M||!D){if(!S)return void $.toast.error("Failed to fork chat");w(!0);let e=await (0,X.forkBlock)(S.id);if(!e||"string"!=typeof e){$.toast.error("Failed to fork chat"),w(!1);return}return j.push("/chat/".concat(e)),$.toast.success("Chat forked successfully"),void w(!1)}if(!(null==N?void 0:N.projectId)){y(!0);let e=await (0,K.createProject)({projectName:E,chatId:m||"",includeSuccessToast:!1});if(!e.id)return $.toast.error("Failed to create project. Please add this chat to a project."),null;await I.setMetadata({...I,project:{projectId:e.id,vercelProjectId:e.vercelProjectId||null,name:E,settings:{icon:"icon-wand-sparkles",color:null},isCreator:!0}}),y(!1)}C(!0),k("integrations")},variant:"default",size:"sm",children:M&&D?(null==N?void 0:N.projectId)?"Open Settings":"Create Project":"Fork Block"})]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.DialogHeader,{className:"items-start text-start",children:[(0,t.jsxs)(n.DialogTitle,{className:"flex items-center gap-2 text-lg",children:[(0,t.jsx)(a.WarningFill,{className:"text-amber-600!"}),(0,t.jsx)("span",{children:"Missing Environment Variables"})]}),(0,t.jsx)(n.DialogDescription,{className:"text-foreground text-sm",children:"This generation may have limited functionality without the following environment variables:"})]}),p.map(e=>(0,t.jsx)("p",{className:"w-fit max-w-full truncate rounded-sm bg-gray-200 px-[3px] py-0.5 font-mono text-[13px] leading-none",children:e},e)),(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsx)(s.Button,{onClick:()=>g(p,[]),variant:"secondary",size:"sm",className:"w-fit",children:"Don't show again"})})]})]})]})}):null}},84079,675395,375106,440813,154032,293060,e=>{"use strict";e.s(["BrowserFrame",()=>$,"sendToIframeFromBlockId",()=>K],84079);var t=e.i(832520),n=e.i(200407),r=e.i(318452),i=e.i(879332),a=e.i(460265),o=e.i(356388),s=e.i(295224),l=e.i(566274),c=e.i(304649),u=e.i(899488),d=e.i(295548),p=e.i(589429),h=e.i(583965),f=e.i(921097),m=e.i(729602),g=e.i(577247),v=e.i(242759),x=e.i(101486),y=e.i(768619),b=e.i(914483),w=e.i(605528),j=e.i(204575),C=t,k=u,S=e.i(675120),N=e.i(556355),E=e.i(758118),M=e.i(365290),I=e.i(596359),D=w,T=e.i(780292),A=n;let L=(0,w.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M0 2C0 1.44772 0.447715 1 1 1H15C15.5523 1 16 1.44772 16 2V10.5C16 11.0523 15.5523 11.5 15 11.5H8.75V14.5H9.75H10.5V16H9.75H6.25H5.5V14.5H6.25H7.25V11.5H1C0.447714 11.5 0 11.0523 0 10.5V2ZM1.5 2.5V10H14.5V2.5H1.5Z" fill="currentColor"/>');e.s(["DeviceDesktop",0,L],675395);let P=(0,w.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M2.75 0C1.7835 0 1 0.783501 1 1.75V14.25C1 15.2165 1.7835 16 2.75 16H13.25C14.2165 16 15 15.2165 15 14.25V1.75C15 0.783502 14.2165 0 13.25 0H2.75ZM2.5 1.75C2.5 1.61193 2.61193 1.5 2.75 1.5H13.25C13.3881 1.5 13.5 1.61193 13.5 1.75V14.25C13.5 14.3881 13.3881 14.5 13.25 14.5H2.75C2.61193 14.5 2.5 14.3881 2.5 14.25V1.75ZM4.75 4.75C5.30228 4.75 5.75 4.30228 5.75 3.75C5.75 3.19772 5.30228 2.75 4.75 2.75C4.19772 2.75 3.75 3.19772 3.75 3.75C3.75 4.30228 4.19772 4.75 4.75 4.75Z" fill="currentColor"/>');e.s(["TabletDevice",0,P],375106);let R=(0,w.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M5.25 0C3.73122 0 2.5 1.23122 2.5 2.75V13.25C2.5 14.7688 3.73122 16 5.25 16H10.75C12.2688 16 13.5 14.7688 13.5 13.25V2.75C13.5 1.23122 12.2688 0 10.75 0H5.25ZM4 2.75C4 2.05964 4.55964 1.5 5.25 1.5H10.75C11.4404 1.5 12 2.05964 12 2.75V13.25C12 13.9404 11.4404 14.5 10.75 14.5H5.25C4.55964 14.5 4 13.9404 4 13.25V2.75ZM6.25 4.75C6.80228 4.75 7.25 4.30228 7.25 3.75C7.25 3.19772 6.80228 2.75 6.25 2.75C5.69772 2.75 5.25 3.19772 5.25 3.75C5.25 4.30228 5.69772 4.75 6.25 4.75Z" fill="currentColor"/>');e.s(["DevicePhone",0,R],440813);var _=e.i(385671),O=n;function F(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:150,[t,n]=(0,O.useState)(!1);return(0,O.useEffect)(()=>{let t,r=()=>{n(!0),clearTimeout(t),t=setTimeout(()=>{n(!1)},e)};return window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r),clearTimeout(t)}},[e]),t}e.s(["useIsWindowResizing",()=>F],154032);var V=c;function B(){let{atoms:e}=(0,_.useChatLayout)(),[t,n]=(0,A.useState)(!1),{label:r,SmallIcon:i}=U((0,T.useAtomValue)(e.previewSize));return(0,C.jsxs)(N.DropdownMenu,{open:t,onOpenChange:n,children:[(0,C.jsx)(N.DropdownMenuTrigger,{asChild:!0,children:(0,C.jsx)(k.CodeBlockButton,{tooltip:"Previewing on ".concat(r),children:(0,C.jsx)(S.TransitionNode,{...S.PRESETS.buttonContent,renderKey:r,children:(0,C.jsx)(i,{})})})}),(0,C.jsx)(N.DropdownMenuContent,{align:"start",className:"w-[150px] cursor-pointer",side:"bottom",sideOffset:8,children:(0,C.jsx)(N.DropdownMenuGroup,{children:["desktop","tablet","phone"].map(e=>(0,C.jsx)(z,{previewSize:e},e))})})]})}function z(e){let{previewSize:t}=e,{actions:n,atoms:r}=(0,_.useChatLayout)(),i=t===(0,T.useAtomValue)(r.previewSize),{label:a,Icon:o}=U(t);return(0,C.jsxs)(N.DropdownMenuItem,{onSelect:()=>n.setPreviewSize(t),className:"justify-between",children:[(0,C.jsxs)("span",{className:"flex items-center gap-2",children:[(0,C.jsx)(o,{}),a]}),(0,C.jsx)(I.Check,{style:{...(0,E.visibleStylesIf)(i),...(0,M.transitionStyles)(["opacity"])}})]})}function H(e){let{children:t,forceFullscreen:n}=e,{atoms:r}=(0,_.useChatLayout)(),i=(0,T.useAtomValue)(r.previewSize),a=(0,T.useAtomValue)(r.isResizing),o=F(),s=(0,T.useAtomValue)(r.deviceStyles),l=a||o;return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("style",{children:"@media(max-width: 639px) {\n          .device-view {\n            width: 100%!important;\n            height: 100%!important;\n            border-radius: 0px!important;\n            box-shadow: none!important;\n            background: transparent!important;\n          }\n        }\n      "}),(0,C.jsx)("div",{className:(0,V.cn)("device-view","desktop"!==i&&!n&&"material-modal"),style:{margin:"auto 0px",...s,...n?{width:"100%",height:"100%"}:{},...(0,M.transitionStyles)(["width","height","border-radius","background","box-shadow","margin"],{duration:l||n?0:200})},children:t})]})}function U(e){switch(e){case"phone":return{SmallIcon:Z,Icon:R,label:"Phone"};case"tablet":return{SmallIcon:W,Icon:P,label:"Tablet"};case"desktop":return{SmallIcon:q,Icon:L,label:"Desktop"}}}let q=(0,D.withNewIcon)('\n<path d="M12 2.25C12.9665 2.25 13.75 3.0335 13.75 4V9C13.75 9.9665 12.9665 10.75 12 10.75H8.75V12.25H10V13.75H6V12.25H7.25V10.75H4C3.0335 10.75 2.25 9.9665 2.25 9V4C2.25 3.0335 3.0335 2.25 4 2.25H12ZM4 3.75C3.86193 3.75 3.75 3.86193 3.75 4V9C3.75 9.13807 3.86193 9.25 4 9.25H12C12.1381 9.25 12.25 9.13807 12.25 9V4C12.25 3.86193 12.1381 3.75 12 3.75H4Z" fill="currentColor"/>\n'),W=(0,D.withNewIcon)('\n<path d="M11.3975 2C12.3636 2.00037 13.1475 2.78373 13.1475 3.75V11.75C13.1475 12.7163 12.3636 13.4996 11.3975 13.5H4.75C3.7835 13.5 3 12.7165 3 11.75V3.75C3 2.7835 3.7835 2 4.75 2H11.3975ZM4.75 3.5C4.61193 3.5 4.5 3.61193 4.5 3.75V11.75C4.5 11.8881 4.61193 12 4.75 12H11.3975C11.5352 11.9996 11.6475 11.8878 11.6475 11.75V3.75C11.6475 3.61216 11.5352 3.50037 11.3975 3.5H4.75ZM8.76758 9.50391C9.14577 9.54232 9.44141 9.86168 9.44141 10.25C9.44141 10.6383 9.14577 10.9577 8.76758 10.9961L8.69141 11H7.45605C7.04184 11 6.70605 10.6642 6.70605 10.25C6.70605 9.83579 7.04184 9.5 7.45605 9.5H8.69141L8.76758 9.50391Z" fill="currentColor"/>\n'),Z=(0,D.withNewIcon)('\n<path d="M10.75 2C11.7165 2 12.5 2.7835 12.5 3.75V11.75C12.5 12.7165 11.7165 13.5 10.75 13.5H5.75C4.7835 13.5 4 12.7165 4 11.75V3.75C4 2.7835 4.7835 2 5.75 2H10.75ZM5.75 3.5C5.61193 3.5 5.5 3.61193 5.5 3.75V11.75C5.5 11.8881 5.61193 12 5.75 12H10.75C10.8881 12 11 11.8881 11 11.75V3.75C11 3.61193 10.8881 3.5 10.75 3.5H5.75ZM8.75 9.5C9.16421 9.5 9.5 9.83579 9.5 10.25C9.5 10.6642 9.16421 11 8.75 11H7.75C7.33579 11 7 10.6642 7 10.25C7 9.83579 7.33579 9.5 7.75 9.5H8.75Z" fill="currentColor"/>\n');e.s(["DeviceContainer",()=>H,"DeviceDropdown",()=>B],293060);let G=(0,w.withNewIcon)('<path d="M8.19 3.08c1.68 0 3.17.84 4.06 2.12V3.75h1.5V7.5c0 .41-.34.75-.75.75H9.25v-1.5h2.14A3.44 3.44 0 0 0 4.75 8a3.44 3.44 0 0 0 6.23 2l.44-.6 1.21.88-.44.6A4.94 4.94 0 0 1 3.25 8a4.93 4.93 0 0 1 4.94-4.92Z" fill="currentColor" />');function K(e,t){let n=(0,j.getBlockIframeId)(e),r=document.getElementById(n);r&&r.contentWindow&&X(r.contentWindow,t)}function X(e,t){e.postMessage({__v0_remote__:1,...t},"*")}function $(e){let{iframeId:w,blockId:j,devTools:C,isV3:k}=e,{fullScreenResult:S}=(0,l.useFullscreenResult)(),[N,E]=(0,n.useState)(!1),M=(0,m.useChatId)(),{dontShowAgain:I,isLoading:D}=(0,f.useDontShowAgain)(M),[T,A]=(0,n.useState)(new Map),L=(0,n.useMemo)(()=>{var e;return D?[]:(null!=(e=T.get(w))?e:[]).filter(e=>!(null==I?void 0:I.includes(e)))},[w,T,I,D]),[P,R]=(0,n.useState)(!0),_=(0,n.useMemo)(()=>P&&L.length>0,[P,L]),{canGoBack:O,canGoForward:F,href:V,setHref:z,iframe:H,latestHref:U,loading:q,setLoading:W,refresh:Z,temporalHref:K,setTemporalHref:$}=(0,h.useBrowserFrame)(j),J=(0,n.useMemo)(()=>{if(!V)return"";let e=new URL(V);return e.pathname+e.search+e.hash},[V]),Q=(0,s.useLatest)(K),{vr:ee}=(0,v.useFlags)();(0,g.useMessage)(e=>{let{data:t}=e;if(t&&"object"==typeof t&&t.__v0_remote__)switch(t.type){case"missing-envs":let n=Array.isArray(t.names)&&t.names.every(e=>"string"==typeof e);A(new Map(T.set(w,n?t.names:[]))),R(t.show);break;case"devtools_state":E(t.enabled)}},[w,T,A,R,E,H]);let et=(0,n.useCallback)(()=>{if(!H)return;let e=new URL(window.location.href);e.searchParams.set("b",w),e.searchParams.set("f","1"),e.searchParams.set("path",J),window.open(e.toString(),"_blank","noreferrer,noopener")},[H,w,J]),en=(0,n.useCallback)(()=>{H&&H.contentWindow&&(X(H.contentWindow,{type:"navigate_back"}),$(null))},[H,$]),er=(0,n.useCallback)(()=>{H&&H.contentWindow&&(X(H.contentWindow,{type:"navigate_forward"}),$(null))},[H,$]),ei=(0,n.useCallback)(()=>{var e;H&&H.contentWindow&&(X(H.contentWindow,{type:"navigate_to",href:null===Q.current?U.current:new URL(null!=(e=Q.current)?e:"",U.current).href}),W(!0))},[H,U,Q,W]),ea=(0,n.useMemo)(()=>{let e=null!==K?K:J;if(!e)return"";try{return decodeURIComponent(e)}catch(t){return e}},[K,J]),[eo,es]=(0,n.useState)(!1),el=(0,n.useCallback)(()=>{if(!ee)return;let e=document.querySelector("iframe[data-v0]");if(!e||!e.contentWindow)return;e.setAttribute("src",(0,y.getIframeSrc)(e)),es(!0);let t=setTimeout(()=>{es(!1)},500);return()=>clearTimeout(t)},[ee]),[ec,eu]=(0,n.useState)(!1),{refresh:ed}=(0,x.useVMStatus)({enabled:ee,cid:M,bid:j}),ep=(0,n.useCallback)(async()=>{if(ee){eu(!0);try{if(!(await fetch("/chat/api/vm/actions?cid=".concat(M,"&bid=").concat(j,"&type=recreate"),{method:"POST"})).ok)throw Error("Failed to recreate VM");ed()}catch(e){console.error("Error recreating VM:",e)}eu(!1)}},[ee,M,j,ed]),eh=(0,b.useGet)("iframe-src:"+w);(0,n.useEffect)(()=>{ee&&$(eh)},[ee,eh]);let ef=e=>{"Enter"===e.key?(ei(),z(new URL(null!=K?K:"",V).href),$(null),e.stopPropagation(),e.currentTarget.blur()):"Escape"===e.key&&($(null),e.stopPropagation(),e.currentTarget.blur())},em=e=>{e.currentTarget.select()},eg=(ee?eo:q)?(0,t.jsx)(Y,{}):(0,t.jsx)(G,{}),ev=(0,t.jsxs)("div",{className:(0,c.cn)("relative flex items-center flex-1 bg-gray-100 min-w-0 border border-alpha-200 rounded-md h-7 max-w-[300px]"),children:[(0,t.jsxs)("div",{className:"items-center pl-1 hidden sm:flex",children:[(0,t.jsx)(u.CodeBlockButton,{disabled:!O,onClick:en,browserBar:!0,tooltip:{side:"bottom",content:"Go back"},children:(0,t.jsx)(i.ChevronLeftSmall,{})}),(0,t.jsx)(u.CodeBlockButton,{disabled:!F,onClick:er,browserBar:!0,tooltip:{side:"bottom",content:"Go forward"},children:(0,t.jsx)(a.ChevronRightSmall,{})}),(0,t.jsx)(B,{})]}),(0,t.jsx)("input",{type:"text",className:(0,c.cn)("flex-1 min-w-0 h-full pr-2 text-sm bg-transparent border-0 outline-none pl-3 sm:pl-2",S&&"pl-7"),value:ea,onKeyDown:ef,onChange:e=>void $(e.currentTarget.value),onFocus:em,spellCheck:!1}),(0,t.jsxs)("div",{className:"flex items-center pr-1",children:[(0,t.jsx)(u.CodeBlockButton,{className:"hidden sm:flex",onClick:et,browserBar:!0,tooltip:{side:"bottom",content:(0,t.jsx)("div",{className:"flex flex-col items-center",children:(0,t.jsx)("span",{children:"Open in new tab"})})},children:(0,t.jsx)(o.ExternalSmall,{})}),(0,t.jsx)(u.CodeBlockButton,{onClick:ee?el:Z,browserBar:!0,tooltip:{side:"bottom",content:"Refresh"},children:eg}),ee?(0,t.jsx)(u.CodeBlockButton,{onClick:ep,browserBar:!0,tooltip:{side:"bottom",content:"Kill & Restart VM"},children:ec?(0,t.jsx)(Y,{}):(0,t.jsx)(r.CrossCircleFill,{className:"w-3 h-3"})}):null]})]}),ex=L.length>0&&(0,t.jsx)(u.CodeBlockButton,{className:"text-amber-600",id:"env-warning-trigger",tooltipDirection:"bottom",tooltip:"Missing Environment Variables",onClick:()=>R(!_),children:(0,t.jsx)(d.WarningFill,{})});return(0,t.jsxs)("div",{className:"flex items-center gap-1 flex-1 justify-center",children:[ev,ex,(0,t.jsx)(p.MissingEnvDialog,{open:_,setOpen:R,missingEnvs:L})]})}function Y(){return(0,t.jsx)("svg",{className:"browserframe-loading-spinner",viewBox:"0 0 66 66",xmlns:"http://www.w3.org/2000/svg",style:{width:"12px",height:"12px"},children:(0,t.jsx)("circle",{fill:"none",stroke:"currentColor",strokeWidth:"6",strokeLinecap:"round",cx:"33",cy:"33",r:"30"})})}},668887,e=>{"use strict";e.s(["getDesignModeEnabled",()=>p,"useCurrentBlockDesignMode",()=>x,"useDesignModeEnabled",()=>d]);var t=e.i(205341),n=e.i(780292),r=e.i(142219),i=e.i(753533),a=e.i(449381),o=e.i(92479),s=e.i(242759),l=e.i(418929),c=e.i(84079);let u=(0,t.atom)(!1);function d(){return(0,n.useAtomValue)(u)}function p(e){return e(u)}let h=new Map,f=(0,i.cacheResultById)(h,()=>({selectElementEnabled:(0,t.atom)(!1),previewTheme:(0,t.atom)("light"),undoHistory:(0,t.atom)([]),redoHistory:(0,t.atom)([]),lastFileContent:(0,t.atom)(null),currentQueue:(0,t.atom)({current:[]}),saveNextState:(0,t.atom)(!1),lastIsPreview:(0,t.atom)(!1)})),m=new Map,g=(0,i.cacheResultById)(m,e=>{let n=f(e);return{...n,designModeEnabled:(0,t.atom)(e=>e(u)),canUndo:(0,t.atom)(e=>e(n.undoHistory).length>0),canRedo:(0,t.atom)(e=>e(n.redoHistory).length>0)}});function v(e){let{blockId:t,chatId:n,dse:i}=e,a=f(t),o=(0,l.getPromptActions)(n),s=e=>{r.store.set(a.selectElementEnabled,e),e&&!r.store.get(u)&&r.store.set(u,!0),e&&d(),e||o.clearRefinementElementSelected()},d=()=>{(0,c.sendToIframeFromBlockId)(t,{type:"devtools_cleanup_theme"})};return{setDesignModeEnabled:e=>{let t=r.store.get(u);r.store.set(u,e),e&&!i&&r.store.set(a.selectElementEnabled,!0),!e&&(s(!1),d(),t&&o.focusPrompt())},setSelectElementEnabled:s,initializePreviewTheme:e=>(r.store.set(a.previewTheme,e),e),setPreviewTheme:(e,n)=>{r.store.set(a.previewTheme,e),(0,c.sendToIframeFromBlockId)(t,{type:"devtools_revert_design"}),n.current&&(0,c.sendToIframeFromBlockId)(t,{type:"devtools_apply_theme",payload:{theme:e}})},cleanupPreviewTheme:d,pushUndoHistory:(e,t)=>{r.store.set(a.undoHistory,[...r.store.get(a.undoHistory),{file:e,content:t}].slice(-20)),r.store.set(a.redoHistory,[])},popUndoHistory:e=>{let n=[...r.store.get(a.undoHistory)],i=n.pop();if(!i||!e.current)return null;let o=e.current.getContent(i.file);return"string"!=typeof o?null:((0,c.sendToIframeFromBlockId)(t,{type:"devtools_revert_design"}),r.store.set(a.undoHistory,n),r.store.set(a.redoHistory,[...r.store.get(a.redoHistory),{file:i.file,content:o}]),e.current.inlineEdit(i.file,0,0,0,i.content,Date.now(),void 0,[0,o.length]),i)},pushRedoHistory:(e,t)=>{r.store.set(a.redoHistory,[...r.store.get(a.redoHistory),{file:e,content:t}].slice(-20))},popRedoHistory:e=>{let n=[...r.store.get(a.redoHistory)],i=n.pop();if(!i||!e.current)return null;let o=e.current.getContent(i.file);return"string"!=typeof o?null:((0,c.sendToIframeFromBlockId)(t,{type:"devtools_revert_design"}),r.store.set(a.redoHistory,n),r.store.set(a.undoHistory,[...r.store.get(a.undoHistory),{file:i.file,content:o}]),e.current.inlineEdit(i.file,0,0,0,i.content,Date.now(),void 0,[0,o.length]),i)},clearHistory:()=>{r.store.set(a.undoHistory,[]),r.store.set(a.redoHistory,[])},setLastFileContent:e=>{r.store.set(a.lastFileContent,e)},setSaveNextState:e=>{r.store.set(a.saveNextState,e)},setLastIsPreview:e=>{r.store.set(a.lastIsPreview,e)}}}function x(){var e;let t=(0,a.assertBlockId)(null==(e=(0,a.useActiveBlockState)())?void 0:e.id),n=(0,o.assertChatId)((0,o.useChatId)().chatId),{dse:r}=(0,s.useFlags)();return{atoms:g(t),actions:v({blockId:t,chatId:n,dse:r}),blockId:t}}},584497,420525,418929,e=>{"use strict";e.s(["useChatMetadata",()=>V,"useChatPrivacy",()=>z,"useChatQuote",()=>B],584497);var t=e.i(92479),n=e.i(200407),r=e.i(887968);e.s(["getPlainTextFromQueuedMessage",()=>R,"getPromptActions",()=>A,"getPromptAtoms",()=>T,"getWritablePromptAtoms",()=>I,"isUploading",()=>P,"useCurrentChatPrompt",()=>L],418929);var i=e.i(205341),a=e.i(753533),o=e.i(142219),s=e.i(53223),l=e.i(654225),c=e.i(254211),u=e.i(40455),d=e.i(605667),p=e.i(73687),h=e.i(428350);e.i(168204);var f=e.i(225695),m=t;e.s(["designModeHasFullRedoQueueAtom",()=>C,"designModeHasUnsavedChangesAtom",()=>j,"useDesignModeChangesSync",()=>k],420525);var g=e.i(449381),v=e.i(382559),x=n,y=i,b=e.i(780292),w=e.i(668887);let j=(0,y.atom)(!1),C=(0,y.atom)(!1);function k(){let e=(0,g.useActiveBlockState)(),t=null==e?void 0:e.id,[n]=(0,v.useFileEditingStatus)(t||""),[,r]=(0,b.useAtom)(j),[,i]=(0,b.useAtom)(C),{atoms:a}=(0,w.useCurrentBlockDesignMode)(),o=(0,b.useAtomValue)(a.canUndo),s=(0,b.useAtomValue)(a.canRedo);(0,x.useEffect)(()=>{t&&void 0!==n?r(n):r(!1)},[t,n,r]),(0,x.useEffect)(()=>{s&&!o?i(!0):i(!1)},[i,s,o])}var S=e.i(374022),N=w;let E=10,M=new Map,I=(0,a.cacheResultById)(M,()=>({saveToNewChatDraft:(0,i.atom)(!1),editor:(0,i.atom)(null),contentHtml:(0,i.atom)(null),contentJson:(0,i.atom)(null),contentText:(0,i.atom)(null),isMessageModeSwitcherOpen:(0,i.atom)(!1),isModelSwitcherOpen:(0,i.atom)(!1),isToolsDropdownOpen:(0,i.atom)(!1),editingMessage:(0,i.atom)(null),editingQueuedPrompt:(0,i.atom)(null),lastEditableMessage:(0,i.atom)(null),context:(0,i.atom)([]),isDraggingFile:(0,i.atom)(!1),bannerState:(0,i.atom)({type:"none"}),transientBannerState:(0,i.atom)(null),refinementElementSelected:(0,i.atom)(null),isTodosWithQueueOpen:(0,i.atom)(!1),derivedTodoList:(0,i.atom)({list:[],updatedAt:0}),isEnhancing:(0,i.atom)(!1),doNotEnhanceList:(0,i.atom)([]),originalPromptBeforeEnhancement:(0,i.atom)(""),promptQueue:(0,i.atom)([]),voiceState:(0,i.atom)({status:"idle",loadingMessage:"",progressItems:[],isProcessing:!1,chunks:[],transcribedText:"",isSupported:!1,waitingForReady:!1,initialTextLength:0})})),D=new Map,T=(0,a.cacheResultById)(D,e=>{let t=(0,c.getDurableRootAtoms)("root"),n=I(e),r=(0,i.atom)(e=>{let t=e(n.transientBannerState);return t&&"none"!==t.type?t:e(n.bannerState)}),a=(0,i.atom)(e=>{let t=e(n.derivedTodoList).list.slice().sort((e,t)=>{let n={done:0,"in-progress":1,todo:2};return n[e.status]-n[t.status]});return{list:t,completedList:t.filter(e=>"done"===e.status),notCompletedList:t.filter(e=>"done"!==e.status),totalCount:t.length,totalDone:t.filter(e=>"done"===e.status).length,totalInProgress:t.filter(e=>"in-progress"===e.status).length,isEmpty:0===t.length,isListComplete:t.every(e=>"done"===e.status)&&t.length>0}}),o=(0,i.atom)(e=>"recording"===e(n.voiceState).status?{type:"voice-recording"}:(0,N.getDesignModeEnabled)(e)?{type:"design-mode"}:!e(a).isEmpty||e(n.promptQueue).length>0?{type:"todos-with-queue"}:{type:"none"}),s=(0,S.selectAtom)((0,i.atom)(e=>{let t=e(n.contentJson),r=[];return(0,d.getNodesFromContentJson)("mentionMenuItem",(null==t?void 0:t.content)||null,r),[...new Map(r.map(e=>[e.data.id,e])).values()]}),e=>e,(e,t)=>{if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n].data.id!==t[n].data.id)return!1;return!0});return{...n,areEditorsReady:(0,i.atom)(e=>{let t=e(n.editor);return!!(null==t?void 0:t.isEditorReady)}),isPromptEmpty:(0,i.atom)(e=>{let t=e(n.contentText);return!t||""===t.trim()}),shouldSaveDraft:(0,i.atom)(e=>!e(n.editingMessage)&&!e(n.editingQueuedPrompt)),messageMode:t.messageMode,modelConfiguration:t.modelConfiguration,toolConfiguration:t.toolConfiguration,isThinking:(0,i.atom)(e=>!!e(t.modelConfiguration).thinking),isImageGenerations:(0,i.atom)(e=>!!(e(t.modelConfiguration).imageGenerations||e(t.toolConfiguration).generateImages)),modelId:(0,i.atom)(e=>e(t.modelConfiguration).modelId),contextLimitReached:(0,i.atom)(e=>e(n.context).length>=E),contextLength:(0,i.atom)(e=>e(n.context).length),uploadingContext:(0,i.atom)(e=>e(n.context).some(e=>"local-file"===e.type&&P(e.data.status))),isDraggingFile:n.isDraggingFile,fullContext:(0,i.atom)(e=>{let t=e(n.refinementElementSelected),r=e(n.context);return[...t?[{type:"refinement-element",data:t}]:[],...e(s),...r.sort((e,t)=>"local-file"===e.type&&"local-file"===t.type?e.data.id.localeCompare(t.data.id):0)]}),attachments:(0,i.atom)(e=>(0,h.convertContextToAttachments)(e(n.context))),banner:r,isBannerVisible:(0,i.atom)(e=>"none"!==e(r).type),todoList:a,eyebrow:o,isEyebrowVisible:(0,i.atom)(e=>{let t=e(o),r=e(a);if("voice-recording"===t.type)return!0;let i=!r.isEmpty&&!r.isListComplete,s=e(n.promptQueue).length>0;if("design-mode"===t.type){let t=e(j),n=e(C);return t||n}return"todos-with-queue"===t.type&&(i||s)}),isEnhancing:n.isEnhancing,doNotEnhanceList:n.doNotEnhanceList,originalPromptBeforeEnhancement:n.originalPromptBeforeEnhancement,queueLength:(0,i.atom)(e=>e(n.promptQueue).length),isQueueFull:(0,i.atom)(e=>e(n.promptQueue).length>=10)}});function A(e){let t=I(e),n=T(e),r=(0,c.getDurableRootAtoms)("root"),i=()=>{let e=o.store.get(t.editor);e&&e.editor.commands.clearContent()},a=()=>{requestAnimationFrame(()=>{let e=o.store.get(t.editor);if(!e)return console.warn("Cannot focus prompt: editor not initialized");e.editor.commands.focus()})},h=()=>{if(!o.store.get(n.shouldSaveDraft)||o.store.get(t.editingQueuedPrompt))return;let r=o.store.get(t.context),i=o.store.get(t.refinementElementSelected);(0,l.localDraftController)(e,o.store.get(t.saveToNewChatDraft)).updateLocalDraft({context:r,refinementElementSelected:i})},m=n=>{let{initialValue:r="",save:i=!0,force:a=!1,onInputChange:s}=n||{},c=o.store.get(t.editor);if(!c)return;let u=a?r:c.editor.getText()||r;c.editor.commands.setContent(u),null==s||s(u);let{updateLocalDraft:d}=(0,l.localDraftController)(e,o.store.get(t.saveToNewChatDraft)),p=!!o.store.get(t.editingMessage),h=!!o.store.get(t.editingQueuedPrompt);!i||p||h||d({json:JSON.stringify(c.editor.getJSON()),html:c.editor.getHTML()})},g=e=>{var n;o.store.set(t.editingMessage,e),m({initialValue:(0,d.getContentJsonFromMessageContentParts)(e.content.parts.filter(e=>(0,f.isUserMessageContentPart)(e))),force:!0}),(null==(n=e.attachments)?void 0:n.length)&&w((0,l.convertAttachmentsToLocalFiles)(e.attachments,"edit"));let r=e.content.parts.find(e=>"refinement-element"===e.type);r&&S(r),a()},v=e=>{if(o.store.set(t.editingQueuedPrompt,e),e.json)try{let t=JSON.parse(e.json);m({initialValue:t,force:!0,save:!1})}catch(e){console.error("Failed to restore queued prompt content:",e)}o.store.set(t.context,e.context),o.store.set(t.refinementElementSelected,e.refinementElementSelected),a()},x=e=>{let n=o.store.get(t.context);n.some(t=>"local-file"===t.type&&t.data.id===e.id)||(o.store.set(t.context,[...n,{type:"local-file",data:e}]),h())},y=e=>{let n=o.store.get(t.context),r=n.findIndex(t=>"local-file"===t.type&&t.data.id===e.id);if(-1===r)return void x(e);let i=[...n];i[r]={type:"local-file",data:e},o.store.set(t.context,i),h()},b=e=>{let n=o.store.get(t.context),r=n.findIndex(t=>(0,u.default)(t,e));if(-1===r)return;let i=[...n];i.splice(r,1),o.store.set(t.context,i),a(),h()},w=e=>{o.store.set(t.context,e.slice(0,E).map(e=>({type:"local-file",data:e}))),h()},j=()=>{o.store.set(t.context,o.store.get(t.context).filter(e=>"local-file"!==e.type)),h()},C=n=>{let r=(0,l.localDraftController)(e,n||o.store.get(t.saveToNewChatDraft)).getLocalDraft(),i=r.context.filter(e=>"local-file"!==e.type||!P(e.data.status));o.store.set(t.context,i),o.store.set(t.refinementElementSelected,r.refinementElementSelected)},k=n=>{let r=(0,l.localDraftController)(e,n||o.store.get(t.saveToNewChatDraft)).getLocalDraft(),i=o.store.get(t.editor);if(!i)return;let a=r.json;return a?void i.editor.commands.setContent(a):r.html?void i.editor.commands.setContent(r.html):void i.editor.commands.clearContent()},S=e=>{o.store.set(t.refinementElementSelected,e),h()},N=()=>{o.store.set(t.refinementElementSelected,null),h()};function M(){if(o.store.get(t.editingQueuedPrompt))return;let n=o.store.get(t.promptQueue);(0,l.localDraftController)(e,o.store.get(t.saveToNewChatDraft)).updateLocalDraft({promptQueue:n})}function D(){let e="queue-".concat(Date.now(),"-").concat(Math.random().toString(36).substring(2,11)),n=o.store.get(t.contentJson),r=o.store.get(t.contentHtml),l=o.store.get(t.contentText),c=o.store.get(t.context),u=c.some(e=>"local-file"===e.type),d=o.store.get(t.refinementElementSelected),p={id:e,json:n?JSON.stringify(n):null,html:r,refinementElementSelected:d,context:c,updatedAt:Date.now()},h=o.store.get(t.promptQueue);o.store.set(t.promptQueue,[...h,p]),M(),(0,s.track)("AddPromptToQueue",{queuedPromptId:e,queueLength:h.length+1,promptLength:(null==l?void 0:l.length)||0,hasAttachments:u}),i(),j(),N(),a()}let A=e=>{let n=o.store.get(t.voiceState);o.store.set(t.voiceState,{...n,...e})},L=e=>{A({status:e})},R=e=>{A({isProcessing:e})},_=e=>{A({chunks:[...o.store.get(t.voiceState).chunks,e]})},O=()=>{A({chunks:[]})},F=e=>{A({transcribedText:e})},V=e=>{A({isSupported:e})},B=e=>{A({waitingForReady:e})};return{clearEditorContent:i,registerEditor:e=>o.store.set(t.editor,e),unregisterEditor:e=>{let n=o.store.get(t.editor);(null==n?void 0:n.reactId)===e&&o.store.set(t.editor,null)},updateContentStates:(e,n)=>{if(e){o.store.set(t.contentHtml,e.getHTML()),o.store.set(t.contentJson,e.getJSON()),o.store.set(t.contentText,e.getText());let r=o.store.get(t.editor);r&&r.reactId!==n&&r.editor.commands.setContent(e.getHTML())}},focusPrompt:a,handleInputChange:m,setIsMessageModeSwitcherOpen:e=>{o.store.set(t.isMessageModeSwitcherOpen,e)},setMessageMode:e=>{o.store.set(r.messageMode,e)},setIsModelSwitcherOpen:e=>{o.store.set(t.isModelSwitcherOpen,e)},setModelId:e=>{o.store.set(r.modelConfiguration,{...o.store.get(r.modelConfiguration),modelId:e})},setThinking:e=>{o.store.set(r.modelConfiguration,{...o.store.get(r.modelConfiguration),thinking:e})},setImageGenerations:e=>{o.store.set(r.modelConfiguration,{...o.store.get(r.modelConfiguration),imageGenerations:e})},setWebSearch:e=>{o.store.set(r.toolConfiguration,{...o.store.get(r.toolConfiguration),webSearch:e})},setGenerateImages:e=>{o.store.set(r.toolConfiguration,{...o.store.get(r.toolConfiguration),generateImages:e})},setDesignSystemId:e=>{o.store.set(r.toolConfiguration,{...o.store.get(r.toolConfiguration),designSystemId:e})},startEditingMessage:g,cancelEditingMessage:()=>{o.store.set(t.editingMessage,null),C(),k()},clearEditingMessage:()=>{o.store.set(t.editingMessage,null)},setLastEditableMessage:e=>{o.store.set(t.lastEditableMessage,e)},startEditingQueuedPrompt:v,cancelEditingQueuedPrompt:()=>{o.store.set(t.editingQueuedPrompt,null),C(),k()},clearEditingQueuedPrompt:()=>{o.store.set(t.editingQueuedPrompt,null)},updateQueuedPromptInPlace:(e,n)=>{let r=o.store.get(t.promptQueue).map(t=>t.id===e?{...t,...n}:t);o.store.set(t.promptQueue,r),M(),(0,s.track)("AddPromptToQueue",{queuedPromptId:e,queueLength:r.length,promptLength:0,hasAttachments:!1})},addLocalFileToContext:x,updateLocalFileInContext:y,renameLocalFileInContext:(e,n)=>{let r=o.store.get(t.context),i=r.findIndex(t=>"local-file"===t.type&&t.data.id===e);if(-1===i)return;let a=[...r],s=a[i];a[i]={...s,data:{...s.data,name:n}},o.store.set(t.context,a),h()},removeLocalFileFromContext:e=>{o.store.set(t.context,o.store.get(t.context).filter(t=>"local-file"!==t.type||t.data.id!==e.id)),h()},removeItemFromContext:b,removeMentionFromEditor:e=>{let n=o.store.get(t.editor);if(!n)return;let{editor:r}=n;r.chain().focus().command(t=>{let{tr:n,state:r}=t,i=[];return r.doc.descendants((t,n)=>{var a;if(t.type.name===p.MENTION_MENU_ITEM_TYPE&&(null==(a=t.attrs.data)?void 0:a.id)===e.id){let e=n,a=n+t.nodeSize;" "===r.doc.textBetween(a,a+1,void 0,"\0")&&(a+=1),i.push({from:e,to:a})}return!0}),!!i.length&&(i.sort((e,t)=>t.from-e.from).forEach(e=>n.delete(e.from,e.to)),!0)}).run(),h()},setContextFromLocalFiles:w,clearContext:()=>{o.store.set(t.context,[]),N(),h()},clearAttachments:j,addQuoteToContext:e=>{let n=o.store.get(t.context).filter(e=>"quote"!==e.type);o.store.set(t.context,[{type:"quote",data:{quote:e}},...n]),h()},removeQuoteFromContext:()=>{let e=o.store.get(t.context).filter(e=>"quote"!==e.type);o.store.set(t.context,e)},setSaveToNewChatDraft:e=>{o.store.set(t.saveToNewChatDraft,e)},restoreDraft:e=>{C(e),k(e)},restorePromptContext:C,restorePromptContent:k,restorePromptQueue:()=>{let n=(0,l.localDraftController)(e,!1).getLocalDraft();o.store.set(t.promptQueue,n.promptQueue)},setBannerState:e=>{o.store.set(t.bannerState,e)},setTransientBannerState:e=>{o.store.set(t.transientBannerState,e)},dismissTransientBannerState:function(){o.store.set(t.transientBannerState,null)},setRefinementElementSelected:S,clearRefinementElementSelected:N,setIsTodosWithQueueOpen:e=>{o.store.set(t.isTodosWithQueueOpen,e)},setTodoList:e=>{o.store.set(t.derivedTodoList,e)},clearTodoList:()=>{o.store.set(t.derivedTodoList,{list:[],updatedAt:0})},setIsToolsDropdownOpen:e=>{o.store.set(t.isToolsDropdownOpen,e)},getIndexOfQueuedPrompt:function(e){return o.store.get(t.promptQueue).findIndex(t=>t.id===e)},restoreQueuedPromptToQueue:function(e,n){let r,i=o.store.get(t.promptQueue);if(i.some(t=>t.id===e.id))return void console.warn("Queued prompt with id ".concat(e.id," already exists in the queue"));r="number"==typeof n&&n>=0&&n<=i.length?[...i.slice(0,n),e,...i.slice(n)]:[...i,e],o.store.set(t.promptQueue,r),M()},addPromptToQueue:D,removePromptFromQueue:function(e){let n=o.store.get(t.promptQueue).filter(t=>t.id!==e);o.store.set(t.promptQueue,n),M(),(0,s.track)("RemovePromptFromQueue",{queuedPromptId:e,queueLength:n.length})},clearPromptQueue:function(){o.store.set(t.promptQueue,[]),(0,l.localDraftController)(e,o.store.get(t.saveToNewChatDraft)).updateLocalDraft({promptQueue:[]})},reorderPromptQueue:function(e,n){let r=o.store.get(t.promptQueue),i=r.findIndex(t=>t.id===e),a=r.findIndex(e=>e.id===n);if(-1===i||-1===a)return;let s=[...r],[l]=s.splice(i,1);s.splice(a,0,l),o.store.set(t.promptQueue,s),M()},updateVoiceState:A,setVoiceStatus:L,setVoiceProcessing:R,addVoiceChunk:_,clearVoiceChunks:O,setVoiceTranscribedText:F,setVoiceSupported:V,setVoiceWaitingForReady:B,resetVoiceState:()=>{o.store.set(t.voiceState,{status:o.store.get(t.voiceState).isSupported?"ready":"idle",loadingMessage:"",progressItems:[],isProcessing:!1,chunks:[],transcribedText:"",isSupported:o.store.get(t.voiceState).isSupported,waitingForReady:!1,initialTextLength:0})}}}function L(){let e=(0,m.assertChatId)((0,m.useChatId)().chatId);return{atoms:T(e),actions:A(e),chatId:e}}let P=e=>"uploading"===e||"compressing"===e;function R(e){if(!e.json)return"";try{let t=JSON.parse(e.json);return _(t)}catch(e){return""}}function _(e){return e?"text"===e.type&&e.text?e.text:e.content&&Array.isArray(e.content)?e.content.map(e=>_(e)).join(""):"":""}var O=b,F=e.i(346970);function V(e){let{chatId:i}=(0,t.useChatId)(),{data:a,mutate:o,isLoading:s}=(0,F.default)(["chat:meta",null!=e?e:i]),l=(0,n.useRef)(null!=a?a:r.CHAT_METADATA_FALLBACK);return{setMetadata:(0,n.useCallback)(e=>o(t=>({...null!=t?t:l.current,...e})),[o]),...null!=a?a:r.CHAT_METADATA_FALLBACK,isLoading:s}}function B(){var e,t;let{atoms:r,actions:i}=L();return{quote:null!=(t=null==(e=(0,O.useAtomValue)(r.context).find(e=>"quote"===e.type))?void 0:e.data.quote)?t:null,setQuote:(0,n.useCallback)(e=>{e?i.addQuoteToContext(e):i.removeQuoteFromContext()},[i])}}function z(){let{chatId:e}=(0,t.useChatId)(),{data:n,mutate:r}=(0,F.default)(["chat:privacy",e]);return{chatPrivacy:n,setChatPrivacy:r}}},150218,e=>{"use strict";function t(e,t,n){let r=[],i=new Date().toISOString();if(e.stdout.forEach(e=>{r.push({type:"output",blockId:t,fileName:n,content:e.map(e=>JSON.stringify(e,void 0,2)).join(" "),timestamp:i,method:"stdout"})}),e.returned)if("$$attachments"in e.returned&&Array.isArray(e.returned.$$attachments))for(let a of e.returned.$$attachments){let[e,o]=a;r.push({type:"output",blockId:t,fileName:n,content:"Attachment: ".concat(e),timestamp:i,method:"stdout",attachment:{mimeType:e,data:o}})}else{let a=JSON.stringify(e.returned,void 0,2);r.push({type:"output",blockId:t,fileName:n,content:a,timestamp:i,method:"stdout"})}return e.stderr.forEach(e=>{r.push({type:"output",blockId:t,fileName:n,content:e.map(e=>JSON.stringify(e,void 0,2)).join(" "),timestamp:i,method:"stderr"})}),r}e.s(["transformExecutionOutputToEvents",()=>t])},87467,794807,e=>{"use strict";e.s(["CodeBlockActions",()=>C],87467);var t=e.i(832520),n=e.i(504066),r=e.i(200407),i=e.i(899488),a=e.i(7809),o=e.i(982225),s=e.i(192670),l=e.i(236699),c=e.i(297239),u=e.i(739126),d=e.i(696871),p=e.i(938807),h=e.i(66045),f=e.i(970256),m=e.i(707827),g=e.i(53223),v=e.i(667660),x=e.i(584497);e.i(563948);var y=e.i(407562),b=e.i(183673),w=e.i(725415),j=e.i(150218);function C(e){let{fileName:C="file.txt",value:k,caller:S,additionalHeaderActions:N,allowCopyCode:E,allowDownloadCode:M,closeHandler:I,isTabbed:D,allowClose:T,blockId:A,originalCode:L,closed:P,isExecutable:R,transactionMeta:_,language:O,onExecutionComplete:F}=e,{isCopied:V,copyToClipboard:B}=(0,n.useCopyToClipboard)({timeout:2e3}),{setShowDiffs:z,hasDiffs:H,showDiffs:U}=(0,u.useDiffView)({blockId:A,fileName:C,originalCode:L,newCode:k}),q=(0,c.useT)(),[W,Z]=(0,r.useState)(!1),{activeScopeSlug:G}=(0,v.useActiveScope)(),{project:K}=(0,x.useChatMetadata)(),X=null==K?void 0:K.projectId,{envVars:$}=(0,b.useVercelProject)({v0ProjectId:null==K?void 0:K.projectId}),Y=(0,r.useMemo)(()=>!!$&&(0,w.getSQLExecEnvVars)(Object.keys($)).length>0,[$]),J="sql"===O,Q="python"===O,ee="javascript"===O,et=(J||Q||ee)&&R,en=J&&X&&Y,er=async()=>{if(O&&!W){Z(!0);try{let e;if(en){if(!G)return void y.toast.error("Error",{description:"Missing active scope"});if(!X)return void y.toast.error("Error",{description:"Missing project ID"});e=await (0,f.doSqlExecution)({props:{language:O,blockId:A,source:k,meta:{file:C,transaction:_},closed:P,originalCode:L},v0ProjectId:X})}else e=await (0,h.doExecution)({language:O,blockId:A,source:k,meta:{file:C,transaction:_},closed:P,originalCode:L});if("error"in e)y.toast.error("Error",{description:"Error executing code"}),null==F||F([{type:"output",blockId:A,fileName:C||"untitled",content:e.error,timestamp:new Date().toISOString(),method:"stderr"}]);else{let t=(0,j.transformExecutionOutputToEvents)(e,A,C||"untitled");null==F||F(t)}}finally{Z(!1)}}},ei=()=>{let e=C.split("/").pop(),t=window.prompt("Enter file name",e);if(!t)return;let n=new Blob([k],{type:"text/plain"}),r=URL.createObjectURL(n),i=document.createElement("a");switch(i.download=t,i.href=r,i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r),S){case"executable":return(0,g.track)("DownloadCodeExecutable",{code:k});case"v0":return(0,g.track)("DownloadCodeV0",{code:k})}},ea=async()=>{if(!V)switch(await B(k),S){case"inline":return(0,g.track)("CopyCodeInline",{code:k});case"executable":return(0,g.track)("CopyCodeExecutable",{code:k});case"v0":return(0,g.track)("CopyCodeV0",{code:k})}};return(0,t.jsxs)(t.Fragment,{children:[N&&N.length>0?N:null,et&&(0,t.jsx)(i.CodeBlockButton,{"aria-label":"Run Code",onClick:er,disabled:W||J&&!en,tooltip:{side:"bottom",content:W?"Running...":J&&!en?"No database connected":"Run Code"},children:(0,t.jsx)("span",{"aria-hidden":!0,children:W?(0,t.jsx)(m.Spinner,{size:16}):(0,t.jsx)(o.PlayCircle,{})})}),P&&H&&(0,t.jsx)(i.CodeBlockButton,{"aria-label":q(U?"codeBlockActions.hideDiff":"codeBlockActions.showDiff"),active:U,onClick:()=>{z(!U),setTimeout(()=>{let e=document.getElementById(d.FIRST_HIGHLIGHTED_LINE_ID);e&&e.scrollIntoView({behavior:"instant"})},0)},outline:!D,tooltip:D?{side:"bottom",content:q(U?"codeBlockActions.hideDiff":"codeBlockActions.showDiff")}:q(U?"codeBlockActions.hideDiff":"codeBlockActions.showDiff"),children:(0,t.jsx)(p.DiffIcon,{size:"inline"===S?14:void 0})}),E&&(0,t.jsx)(i.CodeBlockButton,{"aria-label":q("codeBlockActions.copy"),onClick:ea,outline:!D,tooltip:D?{side:"bottom",content:q("codeBlockActions.copy")}:q("codeBlockActions.copy"),children:(0,t.jsx)(l.CopyCheck,{isCopied:V,size:"inline"===S?14:void 0})}),M&&(0,t.jsx)(i.CodeBlockButton,{"aria-label":q("codeBlockActions.download"),onClick:ei,outline:!D,tooltip:D?{side:"bottom",content:q("codeBlockActions.download")}:q("codeBlockActions.download"),children:(0,t.jsx)("span",{"aria-hidden":!0,children:(0,t.jsx)(s.AnimatedDownload,{})})}),T&&I&&(0,t.jsx)(i.CodeBlockButton,{"aria-label":q("codeBlockActions.close"),onClick:I,outline:!D,tooltip:D?{side:"bottom",content:q("codeBlockActions.close")}:q("codeBlockActions.close"),children:(0,t.jsx)("span",{"aria-hidden":!0,children:(0,t.jsx)(a.Cross,{})})})]})}function k(e,t,n,r,i,a,o){try{var s=e[a](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function S(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(e){k(a,r,i,o,s,"next",e)}function s(e){k(a,r,i,o,s,"throw",e)}o(void 0)})}}e.s(["default",()=>S],794807)},975294,e=>{"use strict";function t(){return(t=Object.assign.bind()).apply(null,arguments)}e.s(["default",()=>t])},81097,(e,t,n)=>{function r(e){return t.exports=r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t.exports.__esModule=!0,t.exports.default=t.exports,r(e)}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports},684599,(e,t,n)=>{var r=e.r(81097).default;function i(){"use strict";t.exports=i=function(){return n},t.exports.__esModule=!0,t.exports.default=t.exports;var e,n={},a=Object.prototype,o=a.hasOwnProperty,s=Object.defineProperty||function(e,t,n){e[t]=n.value},l="function"==typeof Symbol?Symbol:{},c=l.iterator||"@@iterator",u=l.asyncIterator||"@@asyncIterator",d=l.toStringTag||"@@toStringTag";function p(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{p({},"")}catch(e){p=function(e,t,n){return e[t]=n}}function h(e,t,n,r){var i=Object.create((t&&t.prototype instanceof b?t:b).prototype);return s(i,"_invoke",{value:I(e,n,new L(r||[]))}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}n.wrap=h;var m="suspendedStart",g="suspendedYield",v="executing",x="completed",y={};function b(){}function w(){}function j(){}var C={};p(C,c,function(){return this});var k=Object.getPrototypeOf,S=k&&k(k(P([])));S&&S!==a&&o.call(S,c)&&(C=S);var N=j.prototype=b.prototype=Object.create(C);function E(e){["next","throw","return"].forEach(function(t){p(e,t,function(e){return this._invoke(t,e)})})}function M(e,t){var n;function i(n,a,s,l){var c=f(e[n],e,a);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==r(d)&&o.call(d,"__await")?t.resolve(d.__await).then(function(e){i("next",e,s,l)},function(e){i("throw",e,s,l)}):t.resolve(d).then(function(e){u.value=e,s(u)},function(e){return i("throw",e,s,l)})}l(c.arg)}s(this,"_invoke",{value:function(e,r){function a(){return new t(function(t,n){i(e,r,t,n)})}return n=n?n.then(a,a):a()}})}function I(t,n,r){var i=m;return function(a,o){if(i===v)throw Error("Generator is already running");if(i===x){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var l=D(s,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===m)throw i=x,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=v;var c=f(t,n,r);if("normal"===c.type){if(i=r.done?x:g,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=x,r.method="throw",r.arg=c.arg)}}}function D(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,D(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=TypeError("The iterator does not provide a '"+r+"' method")),y;var a=f(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,y;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):o:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,y)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[c];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(o.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw TypeError(r(t)+" is not iterable")}return w.prototype=j,s(N,"constructor",{value:j,configurable:!0}),s(j,"constructor",{value:w,configurable:!0}),w.displayName=p(j,d,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,j):(e.__proto__=j,p(e,d,"GeneratorFunction")),e.prototype=Object.create(N),e},n.awrap=function(e){return{__await:e}},E(M.prototype),p(M.prototype,u,function(){return this}),n.AsyncIterator=M,n.async=function(e,t,r,i,a){void 0===a&&(a=Promise);var o=new M(h(e,t,r,i),a);return n.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},E(N),p(N,d,"Generator"),p(N,c,function(){return this}),p(N,"toString",function(){return"[object Generator]"}),n.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},n.values=P,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=o.call(a,"catchLoc"),c=o.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;A(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},n}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},228852,(e,t,n)=>{var r=e.r(684599)();t.exports=r;try{regeneratorRuntime=r}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},287098,85311,e=>{"use strict";var t=e.i(794807),n=e.i(975294);function r(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function o(e){var t=a(e,"string");return"symbol"==i(t)?t:t+""}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function l(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return c(e)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}function f(e,t,n){return(t=o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=e.i(228852),g=e.i(200407);function v(e,t){if(null==e)return{};var n={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function x(e,t){if(null==e)return{};var n,r,i=v(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||({}).propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function b(e){if(Array.isArray(e))return y(e)}function w(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function j(e,t){if(e){if("string"==typeof e)return y(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}function C(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function k(e){return b(e)||w(e)||j(e)||C()}var S=g,N=n,E=g;function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach(function(t){f(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function D(e){var t=e.length;return 0===t||1===t?e:2===t?[e[0],e[1],"".concat(e[0],".").concat(e[1]),"".concat(e[1],".").concat(e[0])]:3===t?[e[0],e[1],e[2],"".concat(e[0],".").concat(e[1]),"".concat(e[0],".").concat(e[2]),"".concat(e[1],".").concat(e[0]),"".concat(e[1],".").concat(e[2]),"".concat(e[2],".").concat(e[0]),"".concat(e[2],".").concat(e[1]),"".concat(e[0],".").concat(e[1],".").concat(e[2]),"".concat(e[0],".").concat(e[2],".").concat(e[1]),"".concat(e[1],".").concat(e[0],".").concat(e[2]),"".concat(e[1],".").concat(e[2],".").concat(e[0]),"".concat(e[2],".").concat(e[0],".").concat(e[1]),"".concat(e[2],".").concat(e[1],".").concat(e[0])]:t>=4?[e[0],e[1],e[2],e[3],"".concat(e[0],".").concat(e[1]),"".concat(e[0],".").concat(e[2]),"".concat(e[0],".").concat(e[3]),"".concat(e[1],".").concat(e[0]),"".concat(e[1],".").concat(e[2]),"".concat(e[1],".").concat(e[3]),"".concat(e[2],".").concat(e[0]),"".concat(e[2],".").concat(e[1]),"".concat(e[2],".").concat(e[3]),"".concat(e[3],".").concat(e[0]),"".concat(e[3],".").concat(e[1]),"".concat(e[3],".").concat(e[2]),"".concat(e[0],".").concat(e[1],".").concat(e[2]),"".concat(e[0],".").concat(e[1],".").concat(e[3]),"".concat(e[0],".").concat(e[2],".").concat(e[1]),"".concat(e[0],".").concat(e[2],".").concat(e[3]),"".concat(e[0],".").concat(e[3],".").concat(e[1]),"".concat(e[0],".").concat(e[3],".").concat(e[2]),"".concat(e[1],".").concat(e[0],".").concat(e[2]),"".concat(e[1],".").concat(e[0],".").concat(e[3]),"".concat(e[1],".").concat(e[2],".").concat(e[0]),"".concat(e[1],".").concat(e[2],".").concat(e[3]),"".concat(e[1],".").concat(e[3],".").concat(e[0]),"".concat(e[1],".").concat(e[3],".").concat(e[2]),"".concat(e[2],".").concat(e[0],".").concat(e[1]),"".concat(e[2],".").concat(e[0],".").concat(e[3]),"".concat(e[2],".").concat(e[1],".").concat(e[0]),"".concat(e[2],".").concat(e[1],".").concat(e[3]),"".concat(e[2],".").concat(e[3],".").concat(e[0]),"".concat(e[2],".").concat(e[3],".").concat(e[1]),"".concat(e[3],".").concat(e[0],".").concat(e[1]),"".concat(e[3],".").concat(e[0],".").concat(e[2]),"".concat(e[3],".").concat(e[1],".").concat(e[0]),"".concat(e[3],".").concat(e[1],".").concat(e[2]),"".concat(e[3],".").concat(e[2],".").concat(e[0]),"".concat(e[3],".").concat(e[2],".").concat(e[1]),"".concat(e[0],".").concat(e[1],".").concat(e[2],".").concat(e[3]),"".concat(e[0],".").concat(e[1],".").concat(e[3],".").concat(e[2]),"".concat(e[0],".").concat(e[2],".").concat(e[1],".").concat(e[3]),"".concat(e[0],".").concat(e[2],".").concat(e[3],".").concat(e[1]),"".concat(e[0],".").concat(e[3],".").concat(e[1],".").concat(e[2]),"".concat(e[0],".").concat(e[3],".").concat(e[2],".").concat(e[1]),"".concat(e[1],".").concat(e[0],".").concat(e[2],".").concat(e[3]),"".concat(e[1],".").concat(e[0],".").concat(e[3],".").concat(e[2]),"".concat(e[1],".").concat(e[2],".").concat(e[0],".").concat(e[3]),"".concat(e[1],".").concat(e[2],".").concat(e[3],".").concat(e[0]),"".concat(e[1],".").concat(e[3],".").concat(e[0],".").concat(e[2]),"".concat(e[1],".").concat(e[3],".").concat(e[2],".").concat(e[0]),"".concat(e[2],".").concat(e[0],".").concat(e[1],".").concat(e[3]),"".concat(e[2],".").concat(e[0],".").concat(e[3],".").concat(e[1]),"".concat(e[2],".").concat(e[1],".").concat(e[0],".").concat(e[3]),"".concat(e[2],".").concat(e[1],".").concat(e[3],".").concat(e[0]),"".concat(e[2],".").concat(e[3],".").concat(e[0],".").concat(e[1]),"".concat(e[2],".").concat(e[3],".").concat(e[1],".").concat(e[0]),"".concat(e[3],".").concat(e[0],".").concat(e[1],".").concat(e[2]),"".concat(e[3],".").concat(e[0],".").concat(e[2],".").concat(e[1]),"".concat(e[3],".").concat(e[1],".").concat(e[0],".").concat(e[2]),"".concat(e[3],".").concat(e[1],".").concat(e[2],".").concat(e[0]),"".concat(e[3],".").concat(e[2],".").concat(e[0],".").concat(e[1]),"".concat(e[3],".").concat(e[2],".").concat(e[1],".").concat(e[0])]:void 0}var T={};function A(e){if(0===e.length||1===e.length)return e;var t=e.join(".");return T[t]||(T[t]=D(e)),T[t]}function L(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return A(e.filter(function(e){return"token"!==e})).reduce(function(e,t){return I(I({},e),n[t])},t)}function P(e){return e.join(" ")}function R(e,t){var n=0;return function(r){return n+=1,r.map(function(r,i){return _({node:r,stylesheet:e,useInlineStyles:t,key:"code-segment-".concat(n,"-").concat(i)})})}}function _(e){var t=e.node,n=e.stylesheet,r=e.style,i=void 0===r?{}:r,a=e.useInlineStyles,o=e.key,s=t.properties,l=t.type,c=t.tagName,u=t.value;if("text"===l)return u;if(c){var d,p=R(n,a);if(a){var h=Object.keys(n).reduce(function(e,t){return t.split(".").forEach(function(t){e.includes(t)||e.push(t)}),e},[]),f=s.className&&s.className.includes("token")?["token"]:[],m=s.className&&f.concat(s.className.filter(function(e){return!h.includes(e)}));d=I(I({},s),{},{className:P(m)||void 0,style:L(s.className,Object.assign({},s.style,i),n)})}else d=I(I({},s),{},{className:P(s.className)});var g=p(t.children);return E.default.createElement(c,(0,N.default)({key:o},d),g)}}let O=function(e,t){return -1!==e.listLanguages().indexOf(t)};var F=["language","children","style","customStyle","codeTagProps","useInlineStyles","showLineNumbers","showInlineLineNumbers","startingLineNumber","lineNumberContainerStyle","lineNumberStyle","wrapLines","wrapLongLines","lineProps","renderer","PreTag","CodeTag","code","astGenerator"];function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach(function(t){f(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var z=/\n/g;function H(e){return e.match(z)}function U(e){var t=e.lines,n=e.startingLineNumber,r=e.style;return t.map(function(e,t){var i=t+n;return S.default.createElement("span",{key:"line-".concat(t),className:"react-syntax-highlighter-line-number",style:"function"==typeof r?r(i):r},"".concat(i,"\n"))})}function q(e){var t=e.codeString,n=e.codeStyle,r=e.containerStyle,i=void 0===r?{float:"left",paddingRight:"10px"}:r,a=e.numberStyle,o=void 0===a?{}:a,s=e.startingLineNumber;return S.default.createElement("code",{style:Object.assign({},n,i)},U({lines:t.replace(/\n$/,"").split("\n"),style:o,startingLineNumber:s}))}function W(e){return"".concat(e.toString().length,".25em")}function Z(e,t){return{type:"element",tagName:"span",properties:{key:"line-number--".concat(e),className:["comment","linenumber","react-syntax-highlighter-line-number"],style:t},children:[{type:"text",value:e}]}}function G(e,t,n){var r={display:"inline-block",minWidth:W(n),paddingRight:"1em",textAlign:"right",userSelect:"none"},i="function"==typeof e?e(t):e;return B(B({},r),i)}function K(e){var t=e.children,n=e.lineNumber,r=e.lineNumberStyle,i=e.largestLineNumber,a=e.showInlineLineNumbers,o=e.lineProps,s=void 0===o?{}:o,l=e.className,c=void 0===l?[]:l,u=e.showLineNumbers,d=e.wrapLongLines,p=e.wrapLines,h=void 0!==p&&p?B({},"function"==typeof s?s(n):s):{};if(h.className=h.className?[].concat(k(h.className.trim().split(/\s+/)),k(c)):c,n&&a){var f=G(r,n,i);t.unshift(Z(n,f))}return d&u&&(h.style=B(B({},h.style),{},{display:"flex"})),{type:"element",tagName:"span",properties:h,children:t}}function X(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=0;r<e.length;r++){var i=e[r];if("text"===i.type)n.push(K({children:[i],className:k(new Set(t))}));else if(i.children){var a=t.concat(i.properties.className);X(i.children,a).forEach(function(e){return n.push(e)})}}return n}function $(e,t,n,r,i,a,o,s,l){var c,u=X(e.value),d=[],p=-1,h=0;function f(e,a){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return K({children:e,lineNumber:a,lineNumberStyle:s,largestLineNumber:o,showInlineLineNumbers:i,lineProps:n,className:c,showLineNumbers:r,wrapLongLines:l,wrapLines:t})}function m(e,t){if(r&&t&&i){var n=G(s,t,o);e.unshift(Z(t,n))}return e}function g(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return t||r.length>0?f(e,n,r):m(e,n)}for(var v=function(){var e=u[h],t=e.children[0].value;if(H(t)){var n=t.split("\n");n.forEach(function(t,i){var o=r&&d.length+a,s={type:"text",value:"".concat(t,"\n")};if(0===i){var l=g(u.slice(p+1,h).concat(K({children:[s],className:e.properties.className})),o);d.push(l)}else if(i===n.length-1){var c=u[h+1]&&u[h+1].children&&u[h+1].children[0],f={type:"text",value:"".concat(t)};if(c){var m=K({children:[f],className:e.properties.className});u.splice(h+1,0,m)}else{var v=g([f],o,e.properties.className);d.push(v)}}else{var x=g([s],o,e.properties.className);d.push(x)}}),p=h}h++};h<u.length;)v();if(p!==u.length-1){var x=u.slice(p+1,u.length);if(x&&x.length){var y=g(x,r&&d.length+a);d.push(y)}}return t?d:(c=[]).concat.apply(c,d)}function Y(e){var t=e.rows,n=e.stylesheet,r=e.useInlineStyles;return t.map(function(e,t){return _({node:e,stylesheet:n,useInlineStyles:r,key:"code-segement".concat(t)})})}function J(e){return e&&void 0!==e.highlightAuto}function Q(e){var t=e.astGenerator,n=e.language,r=e.code,i=e.defaultCodeValue;if(J(t)){var a=O(t,n);return"text"===n?{value:i,language:"text"}:a?t.highlight(n,r):t.highlightAuto(r)}try{return n&&"text"!==n?{value:t.highlight(r,n)}:{value:i}}catch(e){return{value:i}}}function ee(e,t){return function(n){var r=n.language,i=n.children,a=n.style,o=void 0===a?t:a,s=n.customStyle,l=void 0===s?{}:s,c=n.codeTagProps,u=void 0===c?{className:r?"language-".concat(r):void 0,style:B(B({},o['code[class*="language-"]']),o['code[class*="language-'.concat(r,'"]')])}:c,d=n.useInlineStyles,p=void 0===d||d,h=n.showLineNumbers,f=void 0!==h&&h,m=n.showInlineLineNumbers,g=void 0===m||m,v=n.startingLineNumber,y=void 0===v?1:v,b=n.lineNumberContainerStyle,w=n.lineNumberStyle,j=void 0===w?{}:w,C=n.wrapLines,k=n.wrapLongLines,N=void 0!==k&&k,E=n.lineProps,M=void 0===E?{}:E,I=n.renderer,D=n.PreTag,T=void 0===D?"pre":D,A=n.CodeTag,L=void 0===A?"code":A,P=n.code,R=void 0===P?(Array.isArray(i)?i[0]:i)||"":P,_=n.astGenerator,O=x(n,F);_=_||e;var V=f?S.default.createElement(q,{containerStyle:b,codeStyle:u.style||{},numberStyle:j,startingLineNumber:y,codeString:R}):null,z=o.hljs||o['pre[class*="language-"]']||{backgroundColor:"#fff"},H=J(_)?"hljs":"prismjs",U=p?Object.assign({},O,{style:Object.assign({},z,l)}):Object.assign({},O,{className:O.className?"".concat(H," ").concat(O.className):H,style:Object.assign({},l)});if(N?u.style=B(B({},u.style),{},{whiteSpace:"pre-wrap"}):u.style=B(B({},u.style),{},{whiteSpace:"pre"}),!_)return S.default.createElement(T,U,V,S.default.createElement(L,u,R));(void 0===C&&I||N)&&(C=!0),I=I||Y;var W=[{type:"text",value:R}],Z=Q({astGenerator:_,language:r,code:R,defaultCodeValue:W});null===Z.language&&(Z.value=W);var G=Z.value.length;1===G&&"text"===Z.value[0].type&&(G=Z.value[0].value.split("\n").length);var K=G+y,X=$(Z,C,M,f,g,y,K,j,N);return S.default.createElement(T,U,S.default.createElement(L,u,!g&&V,I({rows:X,stylesheet:o,useInlineStyles:p})))}}function et(e,t,n){return t=d(t),u(e,en()?Reflect.construct(t,n||[],d(e).constructor):t.apply(e,n))}function en(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(en=function(){return!!e})()}let er=function(e){var i,a=e.loader,o=e.isLanguageRegistered,s=e.registerLanguage,c=e.languageLoaders,u=e.noAsyncLoadingLanguages,d=function(e){function i(){return r(this,i),et(this,i,arguments)}return h(i,e),l(i,[{key:"componentDidUpdate",value:function(){!i.isRegistered(this.props.language)&&c&&this.loadLanguage()}},{key:"componentDidMount",value:function(){var e=this;i.astGeneratorPromise||i.loadAstGenerator(),i.astGenerator||i.astGeneratorPromise.then(function(){e.forceUpdate()}),!i.isRegistered(this.props.language)&&c&&this.loadLanguage()}},{key:"loadLanguage",value:function(){var e=this,t=this.props.language;"text"!==t&&i.loadLanguage(t).then(function(){return e.forceUpdate()}).catch(function(){})}},{key:"normalizeLanguage",value:function(e){return i.isSupportedLanguage(e)?e:"text"}},{key:"render",value:function(){return g.default.createElement(i.highlightInstance,(0,n.default)({},this.props,{language:this.normalizeLanguage(this.props.language),astGenerator:i.astGenerator}))}}],[{key:"preload",value:function(){return i.loadAstGenerator()}},{key:"loadLanguage",value:function(){var e=(0,t.default)(m.default.mark(function e(t){var n;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof(n=c[t])){e.next=5;break}return e.abrupt("return",n(i.registerLanguage));case 5:throw Error("Language ".concat(t," not supported"));case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"isSupportedLanguage",value:function(e){return i.isRegistered(e)||"function"==typeof c[e]}},{key:"loadAstGenerator",value:function(){return i.astGeneratorPromise=a().then(function(e){i.astGenerator=e,s&&i.languages.forEach(function(t,n){return s(e,n,t)})}),i.astGeneratorPromise}}])}(g.default.PureComponent);return i=d,f(d,"astGenerator",null),f(d,"highlightInstance",ee(null,{})),f(d,"astGeneratorPromise",null),f(d,"languages",new Map),f(d,"supportedLanguages",e.supportedLanguages||Object.keys(c||{})),f(d,"isRegistered",function(e){if(u)return!0;if(!s)throw Error("Current syntax highlighter doesn't support registration of languages");return i.astGenerator?o(i.astGenerator,e):i.languages.has(e)}),f(d,"registerLanguage",function(e,t){if(!s)throw Error("Current syntax highlighter doesn't support registration of languages");if(i.astGenerator)return s(i.astGenerator,e,t);i.languages.set(e,t)}),d}({loader:function(){return e.A(204569).then(function(e){return e.default||e})},noAsyncLoadingLanguages:!0,supportedLanguages:["abap","abnf","actionscript","ada","agda","al","antlr4","apacheconf","apex","apl","applescript","aql","arduino","arff","asciidoc","asm6502","asmatmel","aspnet","autohotkey","autoit","avisynth","avro-idl","bash","basic","batch","bbcode","bicep","birb","bison","bnf","brainfuck","brightscript","bro","bsl","c","cfscript","chaiscript","cil","clike","clojure","cmake","cobol","coffeescript","concurnas","coq","cpp","crystal","csharp","cshtml","csp","css-extras","css","csv","cypher","d","dart","dataweave","dax","dhall","diff","django","dns-zone-file","docker","dot","ebnf","editorconfig","eiffel","ejs","elixir","elm","erb","erlang","etlua","excel-formula","factor","false","firestore-security-rules","flow","fortran","fsharp","ftl","gap","gcode","gdscript","gedcom","gherkin","git","glsl","gml","gn","go-module","go","graphql","groovy","haml","handlebars","haskell","haxe","hcl","hlsl","hoon","hpkp","hsts","http","ichigojam","icon","icu-message-format","idris","iecst","ignore","inform7","ini","io","j","java","javadoc","javadoclike","javascript","javastacktrace","jexl","jolie","jq","js-extras","js-templates","jsdoc","json","json5","jsonp","jsstacktrace","jsx","julia","keepalived","keyman","kotlin","kumir","kusto","latex","latte","less","lilypond","liquid","lisp","livescript","llvm","log","lolcode","lua","magma","makefile","markdown","markup-templating","markup","matlab","maxscript","mel","mermaid","mizar","mongodb","monkey","moonscript","n1ql","n4js","nand2tetris-hdl","naniscript","nasm","neon","nevod","nginx","nim","nix","nsis","objectivec","ocaml","opencl","openqasm","oz","parigp","parser","pascal","pascaligo","pcaxis","peoplecode","perl","php-extras","php","phpdoc","plsql","powerquery","powershell","processing","prolog","promql","properties","protobuf","psl","pug","puppet","pure","purebasic","purescript","python","q","qml","qore","qsharp","r","racket","reason","regex","rego","renpy","rest","rip","roboconf","robotframework","ruby","rust","sas","sass","scala","scheme","scss","shell-session","smali","smalltalk","smarty","sml","solidity","solution-file","soy","sparql","splunk-spl","sqf","sql","squirrel","stan","stylus","swift","systemd","t4-cs","t4-templating","t4-vb","tap","tcl","textile","toml","tremor","tsx","tt2","turtle","twig","typescript","typoscript","unrealscript","uorazor","uri","v","vala","vbnet","velocity","verilog","vhdl","vim","visual-basic","warpscript","wasm","web-idl","wiki","wolfram","wren","xeora","xml-doc","xojo","xquery","yaml","yang","zig"]});e.s(["PrismAsync",0,er],287098);var ei=e.i(547259),ea=(0,ei.createServerReference)("60c379bd973ff3b6fa773f271532d1423a6f06ea0f",ei.callServer,void 0,ei.findSourceMapURL,"updateSqlExecutionStateAction");e.s(["updateSqlExecutionStateAction",()=>ea],85311)},383393,e=>{"use strict";let t=(0,e.i(605528).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M13.5 8C13.5 4.96643 11.0257 2.5 7.96452 2.5C5.42843 2.5 3.29365 4.19393 2.63724 6.5H5.25H6V8H5.25H0.75C0.335787 8 0 7.66421 0 7.25V2.75V2H1.5V2.75V5.23347C2.57851 2.74164 5.06835 1 7.96452 1C11.8461 1 15 4.13001 15 8C15 11.87 11.8461 15 7.96452 15C5.62368 15 3.54872 13.8617 2.27046 12.1122L1.828 11.5066L3.03915 10.6217L3.48161 11.2273C4.48831 12.6051 6.12055 13.5 7.96452 13.5C11.0257 13.5 13.5 11.0336 13.5 8Z" fill="currentColor"/>');e.s(["RotateCounterClockwise",0,t])},18441,e=>{"use strict";var t=e.i(832520),n=e.i(200407),r=e.i(480118),i=e.i(346970);let a=(0,n.createContext)({sqlExecutionStates:{},updateSqlExecutionState:()=>{}});function o(e){let t=(0,n.useContext)(a);if(!t)throw Error("useSqlExecutionState must be used within a SqlExecutionProvider");return{sqlExecutionState:e?t.sqlExecutionStates[e]:void 0,updateSqlExecutionState:n=>{e&&t.updateSqlExecutionState(e,n)},allSqlExecutionStates:t.sqlExecutionStates}}function s(e){let{children:o}=e,[s,l]=(0,n.useState)({}),c=(0,r.useParams)().chatId,u=(e,t)=>{l(n=>({...n,[e]:t}))},{data:d}=(0,i.default)(c?["blocks-execution-states",c]:null,{revalidateOnFocus:!1,revalidateOnReconnect:!1});return(0,n.useEffect)(()=>{d&&l(d)},[d]),(0,t.jsx)(a.Provider,{value:{sqlExecutionStates:s,updateSqlExecutionState:u},children:o})}e.s(["SqlExecutionProvider",()=>s,"useSqlExecutionState",()=>o])},770858,e=>{"use strict";e.s(["CodeBlock",()=>ee,"MemorizedHighlighter",()=>Q],770858);var t=e.i(832520),n=e.i(200407),r=e.i(338993),i=e.i(636139),a=e.i(847801),o=e.i(87467),s=e.i(739126),l=e.i(304649),c=e.i(287098),u=e.i(295224),d=t,p=l,h=n,f=e.i(176248);e.i(563948);var m=e.i(407562),g=e.i(667660),v=e.i(970256),x=e.i(584497),y=e.i(85311),b=e.i(707827),w=e.i(115184),j=e.i(485001),C=e.i(750955),k=e.i(383393),S=e.i(110909),N=e.i(346970),E=e.i(504066),M=e.i(236699),I=e.i(65151),D=e.i(899488),T=e.i(18441),A=e.i(472166),L=e.i(592258),P=e.i(299313),R=e.i(726988),_=e.i(674523),O=e.i(44337),F=N;function V(e){let{data:t,isLoading:n,mutate:r,error:i}=(0,F.default)(e?["chat:sql-exec-provider",e]:null,async()=>{let t=await fetch("/chat/api/chat/sql-exec-provider?chatId=".concat(e)),{sqlExecProvider:n}=await t.json(),r=n;return(0,O.isSqlExecProviderName)(r)?r:null});return{sqlExecProvider:t,isLoading:n,error:i,refetchSqlExecProvider:r}}var B=e.i(92479),z=e.i(547259),H=(0,z.createServerReference)("60381bcb6b116356f6d53d3f9a2c63c1b9505a30f3",z.callServer,void 0,z.findSourceMapURL,"updateChatSqlExecProvider"),U=e.i(762585),q=e.i(696871),W=e.i(418929);e.i(168204);var Z=e.i(225695);let G=["CREATE","ALTER","DROP","TRUNCATE"];function K(e){let{className:t,headerClassName:n,language:r,actions:i,blockId:a,source:o,fileName:s,closed:l,sqlExecutionState:c,transaction:u,highlightedCode:C}=e,{submit:k}=(0,A.useV0Chat)(),{activeScopeSlug:S}=(0,g.useActiveScope)(),{chatId:M}=(0,B.useChatId)(),{project:D,canWriteToChat:L}=(0,x.useChatMetadata)(),{projectId:P,vercelProjectId:O}=null!=D?D:{},[F,z]=(0,h.useState)(!1),{stores:{data:{marketplaceStores:U}}}=(0,R.useConnectedIntegrations)({vercelProjectId:null!=O?O:void 0,v0ProjectId:null==D?void 0:D.projectId,refreshInterval:0}),K=(0,h.useMemo)(()=>U.filter(e=>e&&e.product&&_.SQL_STORE_SLUGS.includes(e.product.slug)).map(e=>({id:e.id,slug:e.product.slug,name:e.product.name,icon:"upstash-kv"===e.product.slug?"https://vercel.com/api/www/avatar/".concat(e.product.integration.icon):"https://vercel.com/api/www/avatar/".concat(e.product.iconUrl)})),[U]),{sqlExecutionState:J,updateSqlExecutionState:Q}=(0,T.useSqlExecutionState)(a),[ee,et]=(0,h.useState)(!1),{sqlExecProvider:en,refetchSqlExecProvider:er,isLoading:ei}=V(L?M:void 0),[ea,eo]=(0,h.useState)(null!=en?en:U.length>0?U[0].id:"");(0,h.useEffect)(()=>{L&&en&&eo(en)},[L,en,eo]);let es=ee||!a||!o||!l||ei,{data:el,mutate:ec}=(0,N.default)(["block:output",a]),eu="applied"===J||"error"===J,ed="cancelled"===J,ep="error"===J||"error"in(null!=el?el:{}),eh=!!(el&&!ep&&el.stderr.length>0);(0,h.useEffect)(()=>{a&&c&&void 0===J&&Q(c)},[a,c,J,Q]);let{isCopied:ef,copyToClipboard:em}=(0,E.useCopyToClipboard)({timeout:2e3});(0,B.useChatMessages)();let{actions:eg}=(0,W.useCurrentChatPrompt)(),{handleInputChange:ev,focusPrompt:ex}=eg,ey=async()=>{if(!a)return void m.toast.error("Error",{description:"Missing block ID"});try{et(!1),Q("cancelled");let e=await (0,y.updateSqlExecutionStateAction)(a,"cancelled");"error"in e&&Q(J)}catch(e){m.toast.error("Error",{description:"An unexpected error occurred"})}},eb=async()=>{if(!a||!o||!S||!P||!M){let e=a?o?S?P?"chat ID":"project ID":"active scope":"source":"block ID";m.toast.error("Error",{description:"Missing ".concat(e)});return}et(!0);try{let e;if(!en&&K.length>=2){let e=await H(M,ea);if("error"in e)return void m.toast.error("Error",{description:e.error||"An error occurred while updating the SQL integration provider"});er()}let t=await (0,v.doSqlExecution)({props:{language:"sql",blockId:a,source:o,meta:{file:s,transaction:u},closed:!1,originalCode:void 0},v0ProjectId:P,initialVercelProjectId:null!=O?O:void 0,sqlExecProvider:null!=en?en:void 0});ec(t);let n="error"in t||t.stderr.length>0,r=n?"error"in t?t.error:t.stderr[0].join("\n"):void 0;if(Q(n?"error":"applied"),n&&m.toast.error("SQL Execution Failed",{description:r}),(async()=>{let e=await (0,y.updateSqlExecutionStateAction)(a,n?"error":"applied");"error"in e&&Q(J)})(),n)return void await k({action:"new",attachments:[],content:(0,Z.createMDXMessageContent)("The SQL code block failed to execute. The error was: ".concat(r,". ")),type:"message"});let i=G.some(e=>RegExp("\\b".concat(e,"\\b"),"i").test(o));if(eu||!i){if(et(!1),!i){let e=(0,I.getOutputString)(t),n=e.length>q.MAX_SQL_ATTACHMENT_SIZE?e.slice(0,q.MAX_SQL_ATTACHMENT_SIZE)+"...":e;await k({action:"new",attachments:[],content:(0,Z.createMDXMessageContent)("The SQL code block executed successfully. Very concisely summarize what happened.\n\nOutput: ".concat(n)),type:"added-integration",workflowState:"sql-executed"})}return}let l=[];try{e=await (0,v.doSqlExecution)({props:{language:"sql",source:"SQL_SCHEMA_QUERY",meta:{file:"",transaction:"false"},closed:!1,originalCode:void 0},v0ProjectId:P,initialVercelProjectId:null!=O?O:void 0,operationId:"".concat(a,"-schema-result")})}catch(t){e={error:t instanceof Error?t.message:"An unexpected error occurred"},m.toast.error("Error",{description:"An error occurred while fetching the database schema."})}if(et(!1),!("error"in e)){let t=e.stdout[0][0],n=t.length>q.MAX_SQL_ATTACHMENT_SIZE?t.slice(0,q.MAX_SQL_ATTACHMENT_SIZE)+"...":t;l.push({name:"database-schema",content:n,url:"database-schema",size:n.length})}await k({action:"new",attachments:l,content:(0,Z.createMDXMessageContent)("The SQL code block executed successfully.".concat(l.length>0?" The database schema is attached to this message.":"")),type:"added-integration",workflowState:"create-database-tables"})}catch(e){et(!1),Q("error"),console.error(e),await (0,y.updateSqlExecutionStateAction)(a,"error"),m.toast.error("Error",{description:"An unexpected error occurred"})}},ew=async()=>{if(ef)return;let e=(0,I.getOutputString)(el);await em(e)},ej=(0,h.useMemo)(()=>K.length<2||!L?null:(0,d.jsx)(Y,{stores:K,selectedStoreSlug:ea,setSelectedStoreSlug:eo,refetchSqlExecProvider:er,isLoading:ei}),[K,ea,eo,er,ei,L]);return(0,d.jsxs)("div",{className:(0,p.cn)("codeblock max-h-none! relative flex size-full flex-col overflow-hidden rounded-lg border font-sans",eu||ed||!L?"border-alpha-400":"border-gray-500 ring-2 ring-gray-100",t),"data-seg":"root",children:[(0,d.jsxs)("div",{className:"group/inline-code-block relative flex size-full flex-col overflow-hidden",children:[(0,d.jsxs)("div",{className:(0,p.cn)("bg-muted flex h-10 w-full shrink-0 items-center justify-between gap-2 rounded-t-lg border-b pl-2.5 pr-1.5",n),"data-seg":"skip",children:[(0,d.jsxs)("div",{className:"flex items-center gap-1.5",children:[r?(0,d.jsx)("span",{className:"text-gray-500",children:l?(0,d.jsx)(j.Database,{className:"size-3.5"}):(0,d.jsx)(b.Spinner,{size:14})}):null,(0,d.jsx)("span",{className:"line-clamp-1 font-mono text-[13px] leading-none text-gray-500",children:s})]}),(0,d.jsx)("div",{className:"flex items-center space-x-1 text-gray-500",children:i})]}),(0,d.jsxs)("div",{className:(0,p.cn)("group relative size-full",!ed&&"pb-8",!F&&"max-h-[250px]! overflow-y-hidden!"),children:[!F&&(0,d.jsx)("div",{className:"code-wrapper-container absolute flex size-full items-end justify-center",children:(0,d.jsx)("div",{className:(0,p.cn)("expand-button from-background/90 via-background/75 bg-linear-to-t z-10 hidden h-10 w-full translate-y-px items-center justify-center to-transparent px-1",ed||!L?"mb-0":"mb-10"),children:(0,d.jsxs)(f.Button,{className:"h-7 w-full rounded-md",variant:"ghost",onClick:()=>z(!0),children:[(0,d.jsx)(w.ChevronDown,{className:"size-3.5"}),(0,d.jsx)("span",{className:"sr-only",children:"Expand Code Block"})]})})}),C]}),L&&(0,d.jsx)(X,{disabled:es,isExecuting:ee,isCancelled:ed,hasExecuted:eu,isBlockOutputError:ep,isAnyStdErr:eh,handleApplySql:eb,handleCancelSql:ey,handleFix:()=>{ev({initialValue:"The code:\n\n```\n".concat(o,"\n```\n\nProduced this output:\n\n").concat((0,I.getOutputString)(el),"\n\nPlease fix it."),force:!0,save:!0}),ex()},sqlDatabaseSelector:ej})]}),(0,d.jsx)($,{blockOutput:el,hasExecuted:eu,isCancelled:ed,isCopied:ef,onCopy:ew})]})}function X(e){let{isExecuting:t,isCancelled:n,disabled:r,hasExecuted:i,isBlockOutputError:a,isAnyStdErr:o,handleCancelSql:s,handleApplySql:l,handleFix:c,sqlDatabaseSelector:u}=e;if(n)return null;let h=t||o?null:a?(0,d.jsx)("div",{className:"font-mono text-[13px] text-red-700",children:"Failed"}):i?(0,d.jsx)("div",{className:"font-mono text-[13px] text-gray-500",children:"Applied"}):(0,d.jsx)(f.Button,{size:"sm",className:"h-7 rounded-md",disabled:r,variant:"outline",onClick:s,children:"Cancel"}),m=(0,d.jsxs)(f.Button,{size:"sm",className:"h-7 rounded-md",onClick:l,disabled:r,variant:i?"outline":"default",children:[t?(0,d.jsx)(b.Spinner,{size:16}):i?(0,d.jsx)(k.RotateCounterClockwise,{}):null,(0,d.jsx)("span",{children:t?"Applying":i?"Re-run":"Run Code"})," "]}),g=i&&o&&!t?(0,d.jsxs)(f.Button,{onClick:c,size:"sm",className:"h-7 rounded-md",disabled:r,children:["Fix with ",(0,d.jsx)(C.LogoV0,{className:"-ml-0.5"})]}):null;return(0,d.jsxs)("div",{className:(0,p.cn)("bg-background absolute bottom-0 z-10 flex h-10 w-full shrink-0 items-center rounded-b-lg px-1.5",u?"justify-between":"justify-end"),children:[u,(0,d.jsxs)("div",{className:(0,p.cn)("flex items-center",i?"gap-3":"gap-1.5"),children:[h,m,g]})]})}function $(e){let{blockOutput:t,hasExecuted:n,isCancelled:r,isCopied:i,onCopy:a}=e;if(r)return null;let o=n&&t&&!("error"in t),s=o&&0===t.stdout.length&&0===t.stderr.length,l=o&&1===t.stdout.length&&1===t.stdout[0].length&&"[]"===t.stdout[0][0],c=o&&1===t.stdout.length&&1===t.stdout[0].length&&null===t.stdout[0][0],u=s||l||c;return o&&!u?(0,d.jsxs)("div",{className:"bg-muted group/sql-output relative flex w-full flex-col rounded-b-lg border-t",children:[(0,d.jsx)(D.CodeBlockButton,{"aria-label":"Copy",onClick:a,outline:!0,tooltip:"Copy",className:"absolute right-1.5 top-1.5 z-10 hidden group-hover/sql-output:flex",children:(0,d.jsx)(M.CopyCheck,{isCopied:i,size:14})}),(0,d.jsx)(S.CodeOutput,{className:"h-full max-h-64",value:t,inline:!0})]}):null}function Y(e){let{stores:t,selectedStoreSlug:n,setSelectedStoreSlug:r,refetchSqlExecProvider:i,isLoading:a}=e,{chatId:o}=(0,B.useChatId)(),s=(0,h.useMemo)(()=>t.find(e=>e.slug===n),[t,n]),l=async e=>{if(o){r(e);try{let t=await H(o,e);if("error"in t){m.toast.error("Error",{description:t.error||"An error occurred while updating the SQL integration provider"}),r(n);return}await i()}catch(e){m.toast.error("Error",{description:"An error occurred while updating the SQL integration provider"}),r(n)}}};return a?(0,d.jsx)(U.Skeleton,{className:"h-7 w-28 rounded-md"}):(0,d.jsx)("div",{children:(0,d.jsxs)(L.Select,{value:n,onValueChange:l,children:[(0,d.jsx)(L.SelectTrigger,{className:"[&>svg]:size-3! h-7 gap-2 pl-2",children:(0,d.jsx)(L.SelectValue,{children:(0,d.jsxs)("div",{className:"flex flex-row items-center gap-1.5",children:[(null==s?void 0:s.icon)?(0,d.jsx)(P.default,{src:s.icon,alt:s.name,width:16,height:16,className:"rounded-full"}):(0,d.jsx)("div",{className:"size-4 rounded-full bg-gray-100"}),null==s?void 0:s.name]})})}),(0,d.jsx)(L.SelectContent,{children:t.map(e=>(0,d.jsx)(L.SelectItem,{value:e.slug,children:(0,d.jsxs)("div",{className:"flex flex-row items-center gap-1.5",children:[(0,d.jsx)(P.default,{src:e.icon,alt:e.name,width:16,height:16,className:"rounded-full"}),e.name]})},e.slug))})]})})}let J=(0,a.default)(()=>e.A(129e3).then(e=>e.MonacoEditor),{loadableGenerated:{modules:[919001]},ssr:!1}),Q=(0,n.memo)(function(e){let r,{value:a,language:o,showLineNumbers:s,wrapLongLines:u,minLineNumberChars:d=2,isTabbed:p,originalCode:h,fixingBadLines:f,style:m}=e,g=a,v=(0,i.getPrismLanguage)(o),x=(0,n.useMemo)(()=>{if(h)return h.split("\n")},[h]),y=(g.match(/\n/g)||[]).length;if((!g||0===y)&&h)y=(h.match(/\n/g)||[]).length,r=e=>({className:(0,l.cn)("opacity-50",1===e&&void 0===f&&"block w-full animate-pulse bg-gray-100 opacity-100",(null==f?void 0:f.includes(e+1))&&"block w-full animate-pulse bg-red-100 opacity-100")}),g=h;else if(x&&x.length>y-1){g.endsWith("\n")&&(g=g.slice(0,-1));let e=g.lastIndexOf("\n"),t=(y=((g=g.slice(0,e>0?e:void 0)).match(/\n/g)||[]).length)+1,n=x.slice(y+1),i=n.join("\n");y+=n.length,r=e=>({className:(0,l.cn)(e===t&&"block w-full bg-blue-400/20",e>t&&"opacity-50")}),i&&(g=g+"\n"+i)}return(0,t.jsx)(c.PrismAsync,{PreTag:"div",customStyle:{display:"flex",margin:0,width:"max-content",height:"min-content",padding:p?"12px 12px 10px 12px":"8px 10px",textShadow:"none",borderRadius:"0 0 calc(var(--radius) - 2px) calc(var(--radius) - 2px)",WebkitOverflowScrolling:"touch",backgroundColor:"transparent",lineHeight:"1.55",fontSize:"0.8125rem",...m},language:v,lineNumberContainerStyle:{userSelect:"none",whiteSpace:"break-spaces",textAlign:"right",display:"flex",flexDirection:"column"},lineNumberStyle:{display:"inline-block",minWidth:"".concat(Math.max(y.toString().length,d),"ch"),padding:0,margin:"0 12px 0 0",color:"hsl(var(--gray-400))",userSelect:"none"},codeTagProps:{style:{fontFamily:"var(--font-geist-mono)"}},lineProps:r,showLineNumbers:s,useInlineStyles:!1,wrapLines:!0,wrapLongLines:u,children:g})}),ee=(0,n.memo)(e=>{let{language:a,value:c,blockId:d,originalCode:p,allowQuoting:h=!1,allowCopyCode:f=!0,allowDownloadCode:m=!0,allowClose:g=!1,closeHandler:v=null,className:x,headerClassName:y,fixingBadLines:b,codeWrapperClassName:w,fileName:j,showLineNumbers:C=!1,wrapLongLines:k=!1,additionalHeaderActions:S,caller:N,editable:E,showQuickEditAnimation:M,closed:I,onEdit:D,editValue:T,type:A,location:L,onExecutionComplete:P,sqlExecutionState:R,transaction:_}=e,O="inline"!==N,F=(0,u.useLatest)(D),V=(0,n.useCallback)(e=>{if(void 0!==e){var t;null==(t=F.current)||t.call(F,e)}},[F]),{showDiffs:B}=(0,s.useDiffView)({blockId:d,fileName:j||"file.txt",originalCode:p,newCode:c}),z=(0,i.getPrismLanguage)(a),H=I&&null!=T?T:c,U=(0,t.jsx)(o.CodeBlockActions,{additionalHeaderActions:S,allowClose:g,allowCopyCode:f,allowDownloadCode:m,originalCode:p,blockId:d,closed:I,caller:N,closeHandler:v,fileName:j||"file.txt",isTabbed:O,value:H,isExecutable:null==j?void 0:j.includes("scripts"),language:a,onExecutionComplete:P}),q=(0,t.jsx)("div",{className:"size-full text-gray-500 group-has-[.language-text]:text-black group-has-[.token]:text-black","data-seg":h?"code-root":void 0,children:(0,t.jsx)(Q,{isTabbed:O,originalCode:p,fixingBadLines:b,language:a,showLineNumbers:C,value:c,wrapLongLines:k})}),W={className:x,headerClassName:y,language:a,showLineNumbers:C,fileName:j||("inline-sql"===A?"script.sql":"file.txt"),actions:U,syntax:p&&M||"inline"===N?(0,t.jsx)("div",{className:(0,l.cn)("group size-full overflow-scroll",w),children:q}):(0,t.jsx)(J,{language:z,value:H,diffOriginalCode:B?p:null,closed:I,onEdit:V,disabled:!E,location:L})};return O?(0,t.jsx)(r.TabbedCodeBlock,{...W}):"inline-sql"===A?(0,t.jsx)(K,{...W,highlightedCode:q,blockId:d,source:c,closed:I,sqlExecutionState:R,transaction:_}):(0,t.jsx)(r.InlineCodeBlock,{...W})});ee.displayName="CodeBlock"},595961,e=>{"use strict";e.s(["SyntaxHighlighter",()=>r]);var t=e.i(832520),n=e.i(770858);function r(e){let{language:r,children:i,closed:a,sqlExecutionState:o,blockId:s="syntax-highlighter-block",transaction:l,type:c,fileName:u}=e;return(0,t.jsx)(n.CodeBlock,{allowCopyCode:!0,allowDownloadCode:!1,caller:"inline",className:"not-prose max-h-[500px] md:max-h-[700px]",headerClassName:"bg-muted",language:r,showLineNumbers:!1,value:i,closed:a,blockId:s,originalCode:void 0,showQuickEditAnimation:!1,sqlExecutionState:o,transaction:l,type:c,fileName:u})}},29160,304775,40114,e=>{"use strict";let t;e.i(133473);var n=e.i(200407);function r(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function i(e){return e instanceof Element||e instanceof r(e).Element}function a(e){return"undefined"!=typeof ShadowRoot&&(e instanceof ShadowRoot||e instanceof r(e).ShadowRoot)}function o(e){let t=e.activeElement;for(;(null==(n=t)||null==(n=n.shadowRoot)?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function s(e,t){if(!e||!t)return!1;let n=null==t.getRootNode?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&a(n)){let n=t;for(;n;){if(e===n)return!0;n=n.parentNode||n.host}}return!1}function l(){return/apple/i.test(navigator.vendor)}function c(e,t){let n=["mouse","pen"];return t||n.push("",void 0),n.includes(e)}function u(e){return(null==e?void 0:e.ownerDocument)||document}function d(e){return"composedPath"in e?e.composedPath()[0]:e.target}var p='input:not([inert]),select:not([inert]),textarea:not([inert]),a[href]:not([inert]),button:not([inert]),[tabindex]:not(slot):not([inert]),audio[controls]:not([inert]),video[controls]:not([inert]),[contenteditable]:not([contenteditable="false"]):not([inert]),details>summary:first-of-type:not([inert]),details:not([inert])',h="undefined"==typeof Element,f=h?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,m=!h&&Element.prototype.getRootNode?function(e){var t;return null==e||null==(t=e.getRootNode)?void 0:t.call(e)}:function(e){return null==e?void 0:e.ownerDocument},g=function e(t,n){void 0===n&&(n=!0);var r,i=null==t||null==(r=t.getAttribute)?void 0:r.call(t,"inert");return""===i||"true"===i||n&&t&&e(t.parentNode)},v=function(e){var t,n=null==e||null==(t=e.getAttribute)?void 0:t.call(e,"contenteditable");return""===n||"true"===n},x=function(e,t,n){if(g(e))return[];var r=Array.prototype.slice.apply(e.querySelectorAll(p));return t&&f.call(e,p)&&r.unshift(e),r=r.filter(n)},y=function e(t,n,r){for(var i=[],a=Array.from(t);a.length;){var o=a.shift();if(!g(o,!1))if("SLOT"===o.tagName){var s=o.assignedElements(),l=e(s.length?s:o.children,!0,r);r.flatten?i.push.apply(i,l):i.push({scopeParent:o,candidates:l})}else{f.call(o,p)&&r.filter(o)&&(n||!t.includes(o))&&i.push(o);var c=o.shadowRoot||"function"==typeof r.getShadowRoot&&r.getShadowRoot(o),u=!g(c,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(c&&u){var d=e(!0===c?o.children:c.children,!0,r);r.flatten?i.push.apply(i,d):i.push({scopeParent:o,candidates:d})}else a.unshift.apply(a,o.children)}}return i},b=function(e,t){return e.tabIndex<0&&(t||/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||v(e))&&isNaN(parseInt(e.getAttribute("tabindex"),10))?0:e.tabIndex},w=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},j=function(e){return"INPUT"===e.tagName},C=function(e){return j(e)&&"hidden"===e.type},k=function(e){return"DETAILS"===e.tagName&&Array.prototype.slice.apply(e.children).some(function(e){return"SUMMARY"===e.tagName})},S=function(e,t){for(var n=0;n<e.length;n++)if(e[n].checked&&e[n].form===t)return e[n]},N=function(e){if(!e.name)return!0;var t,n=e.form||m(e),r=function(e){return n.querySelectorAll('input[type="radio"][name="'+e+'"]')};if("undefined"!=typeof window&&void 0!==window.CSS&&"function"==typeof window.CSS.escape)t=r(window.CSS.escape(e.name));else try{t=r(e.name)}catch(e){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",e.message),!1}var i=S(t,e.form);return!i||i===e},E=function(e){return j(e)&&"radio"===e.type},M=function(e){return E(e)&&!N(e)},I=function(e){var t,n,r,i,a,o,s,l=e&&m(e),c=null==(t=l)?void 0:t.host,u=!1;if(l&&l!==e)for(u=!!(null!=(n=c)&&null!=(r=n.ownerDocument)&&r.contains(c)||null!=e&&null!=(i=e.ownerDocument)&&i.contains(e));!u&&c;)u=!!(null!=(o=c=null==(a=l=m(c))?void 0:a.host)&&null!=(s=o.ownerDocument)&&s.contains(c));return u},D=function(e){var t=e.getBoundingClientRect(),n=t.width,r=t.height;return 0===n&&0===r},T=function(e,t){var n=t.displayCheck,r=t.getShadowRoot;if("hidden"===getComputedStyle(e).visibility)return!0;var i=f.call(e,"details>summary:first-of-type")?e.parentElement:e;if(f.call(i,"details:not([open]) *"))return!0;if(n&&"full"!==n&&"legacy-full"!==n){if("non-zero-area"===n)return D(e)}else{if("function"==typeof r){for(var a=e;e;){var o=e.parentElement,s=m(e);if(o&&!o.shadowRoot&&!0===r(o))return D(e);e=e.assignedSlot?e.assignedSlot:o||s===e.ownerDocument?o:s.host}e=a}if(I(e))return!e.getClientRects().length;if("legacy-full"!==n)return!0}return!1},A=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if("FIELDSET"===t.tagName&&t.disabled){for(var n=0;n<t.children.length;n++){var r=t.children.item(n);if("LEGEND"===r.tagName)return!!f.call(t,"fieldset[disabled] *")||!r.contains(e)}return!0}t=t.parentElement}return!1},L=function(e,t){return!(t.disabled||g(t)||C(t)||T(t,e)||k(t)||A(t))},P=function(e,t){return!(M(t)||0>b(t))&&!!L(e,t)},R=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!isNaN(t)||!!(t>=0)},_=function e(t){var n=[],r=[];return t.forEach(function(t,i){var a=!!t.scopeParent,o=a?t.scopeParent:t,s=b(o,a),l=a?e(t.candidates):o;0===s?a?n.push.apply(n,l):n.push(o):r.push({documentOrder:i,tabIndex:s,item:t,isScope:a,content:l})}),r.sort(w).reduce(function(e,t){return t.isScope?e.push.apply(e,t.content):e.push(t.content),e},[]).concat(n)},O=function(e,t){var n;return _(n=(t=t||{}).getShadowRoot?y([e],t.includeContainer,{filter:P.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:R}):x(e,t.includeContainer,P.bind(null,t)))},F=e.i(545858);e.i(222863);var V=e.i(922744);e.i(211277);let B={...n},z=B.useInsertionEffect||(e=>e());function H(e){let t=n.useRef(()=>{});return z(()=>{t.current=e}),n.useCallback(function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current(...n)},[])}var U="undefined"!=typeof document?n.useLayoutEffect:n.useEffect;function q(){return(q=Object.assign.bind()).apply(this,arguments)}let W=!1,Z=0,G=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Z++;function K(){let[e,t]=n.useState(()=>W?G():void 0);return U(()=>{null==e&&t(G())},[]),n.useEffect(()=>{W=!0},[]),e}let X=B.useId||K;function $(){let e=new Map;return{emit(t,n){var r;null==(r=e.get(t))||r.forEach(e=>e(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,(null==(r=e.get(t))?void 0:r.filter(e=>e!==n))||[])}}}let Y=n.createContext(null),J=n.createContext(null),Q=()=>{var e;return(null==(e=n.useContext(Y))?void 0:e.id)||null},ee=()=>n.useContext(J);function et(e){return"data-floating-ui-"+e}function en(e){let t=(0,n.useRef)(e);return U(()=>{t.current=e}),t}let er=et("safe-polygon");function ei(e,t,n){return n&&!c(n)?0:"number"==typeof e?e:null==e?void 0:e[t]}function ea(e,t){void 0===t&&(t={});let{open:r,onOpenChange:a,dataRef:o,events:l,elements:d}=e,{enabled:p=!0,delay:h=0,handleClose:f=null,mouseOnly:m=!1,restMs:g=0,move:v=!0}=t,x=ee(),y=Q(),b=en(f),w=en(h),j=en(r),C=n.useRef(),k=n.useRef(-1),S=n.useRef(),N=n.useRef(-1),E=n.useRef(!0),M=n.useRef(!1),I=n.useRef(()=>{}),D=n.useCallback(()=>{var e;let t=null==(e=o.current.openEvent)?void 0:e.type;return(null==t?void 0:t.includes("mouse"))&&"mousedown"!==t},[o]);n.useEffect(()=>{if(p)return l.on("openchange",e),()=>{l.off("openchange",e)};function e(e){let{open:t}=e;t||(clearTimeout(k.current),clearTimeout(N.current),E.current=!0)}},[p,l]),n.useEffect(()=>{if(!p||!b.current||!r)return;function e(e){D()&&a(!1,e,"hover")}let t=u(d.floating).documentElement;return t.addEventListener("mouseleave",e),()=>{t.removeEventListener("mouseleave",e)}},[d.floating,r,a,p,b,D]);let T=n.useCallback(function(e,t,n){void 0===t&&(t=!0),void 0===n&&(n="hover");let r=ei(w.current,"close",C.current);r&&!S.current?(clearTimeout(k.current),k.current=window.setTimeout(()=>a(!1,e,n),r)):t&&(clearTimeout(k.current),a(!1,e,n))},[w,a]),A=H(()=>{I.current(),S.current=void 0}),L=H(()=>{if(M.current){let e=u(d.floating).body;e.style.pointerEvents="",e.removeAttribute(er),M.current=!1}});n.useEffect(()=>{if(p&&i(d.domReference)){var e;let t=d.domReference;return r&&t.addEventListener("mouseleave",h),null==(e=d.floating)||e.addEventListener("mouseleave",h),v&&t.addEventListener("mousemove",n,{once:!0}),t.addEventListener("mouseenter",n),t.addEventListener("mouseleave",l),()=>{var e;r&&t.removeEventListener("mouseleave",h),null==(e=d.floating)||e.removeEventListener("mouseleave",h),v&&t.removeEventListener("mousemove",n),t.removeEventListener("mouseenter",n),t.removeEventListener("mouseleave",l)}}function t(){return!!o.current.openEvent&&["click","mousedown"].includes(o.current.openEvent.type)}function n(e){if(clearTimeout(k.current),E.current=!1,m&&!c(C.current)||g>0&&!ei(w.current,"open"))return;let t=ei(w.current,"open",C.current);t?k.current=window.setTimeout(()=>{j.current||a(!0,e,"hover")},t):a(!0,e,"hover")}function l(e){if(t())return;I.current();let n=u(d.floating);if(clearTimeout(N.current),b.current&&o.current.floatingContext){r||clearTimeout(k.current),S.current=b.current({...o.current.floatingContext,tree:x,x:e.clientX,y:e.clientY,onClose(){L(),A(),T(e,!0,"safe-polygon")}});let t=S.current;n.addEventListener("mousemove",t),I.current=()=>{n.removeEventListener("mousemove",t)};return}"touch"===C.current&&s(d.floating,e.relatedTarget)||T(e)}function h(e){!t()&&o.current.floatingContext&&(null==b.current||b.current({...o.current.floatingContext,tree:x,x:e.clientX,y:e.clientY,onClose(){L(),A(),T(e)}})(e))}},[d,p,e,m,g,v,T,A,L,a,r,j,x,w,b,o]),U(()=>{var e,t;if(p&&r&&null!=(e=b.current)&&e.__options.blockPointerEvents&&D()){let e=u(d.floating).body;e.setAttribute(er,""),e.style.pointerEvents="none",M.current=!0;let n=d.floating;if(i(d.domReference)&&n){let e=d.domReference,r=null==x||null==(t=x.nodesRef.current.find(e=>e.id===y))||null==(t=t.context)?void 0:t.elements.floating;return r&&(r.style.pointerEvents=""),e.style.pointerEvents="auto",n.style.pointerEvents="auto",()=>{e.style.pointerEvents="",n.style.pointerEvents=""}}}},[p,r,y,d,x,b,D]),U(()=>{r||(C.current=void 0,A(),L())},[r,A,L]),n.useEffect(()=>()=>{A(),clearTimeout(k.current),clearTimeout(N.current),L()},[p,d.domReference,A,L]);let P=n.useMemo(()=>{function e(e){C.current=e.pointerType}return{onPointerDown:e,onPointerEnter:e,onMouseMove(e){let{nativeEvent:t}=e;function n(){E.current||j.current||a(!0,t,"hover")}(!m||c(C.current))&&(r||0===g||(clearTimeout(N.current),"touch"===C.current?n():N.current=window.setTimeout(n,g)))}}},[m,a,r,j,g]),R=n.useMemo(()=>({onMouseEnter(){clearTimeout(k.current)},onMouseLeave(e){T(e.nativeEvent,!1)}}),[T]);return n.useMemo(()=>p?{reference:P,floating:R}:{},[p,P,R])}function eo(e,t){let n=e.filter(e=>{var n;return e.parentId===t&&(null==(n=e.context)?void 0:n.open)}),r=n;for(;r.length;)r=e.filter(e=>{var t;return null==(t=r)?void 0:t.some(t=>{var n;return e.parentId===t.id&&(null==(n=e.context)?void 0:n.open)})}),n=n.concat(r);return n}let es=()=>({getShadowRoot:!0,displayCheck:"function"==typeof ResizeObserver&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function el(e,t){let n=O(e,es());"prev"===t&&n.reverse();let r=n.indexOf(o(u(e)));return n.slice(r+1)[0]}function ec(){return el(document.body,"next")}function eu(){return el(document.body,"prev")}function ed(e,t){let n=t||e.currentTarget,r=e.relatedTarget;return!r||!s(n,r)}function ep(e){O(e,es()).forEach(e=>{e.dataset.tabindex=e.getAttribute("tabindex")||"",e.setAttribute("tabindex","-1")})}function eh(e){e.querySelectorAll("[data-tabindex]").forEach(e=>{let t=e.dataset.tabindex;delete e.dataset.tabindex,t?e.setAttribute("tabindex",t):e.removeAttribute("tabindex")})}let ef={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};function em(e){"Tab"===e.key&&(e.target,clearTimeout(t))}let eg=n.forwardRef(function(e,t){let[r,i]=n.useState();U(()=>(l()&&i("button"),document.addEventListener("keydown",em),()=>{document.removeEventListener("keydown",em)}),[]);let a={ref:t,tabIndex:0,role:r,"aria-hidden":!r||void 0,[et("focus-guard")]:"",style:ef};return n.createElement("span",q({},e,a))}),ev=n.createContext(null),ex=et("portal");function ey(e){void 0===e&&(e={});let{id:t,root:r}=e,a=X(),o=ew(),[s,l]=n.useState(null),c=n.useRef(null);return U(()=>()=>{null==s||s.remove(),queueMicrotask(()=>{c.current=null})},[s]),U(()=>{if(!a||c.current)return;let e=t?document.getElementById(t):null;if(!e)return;let n=document.createElement("div");n.id=a,n.setAttribute(ex,""),e.appendChild(n),c.current=n,l(n)},[t,a]),U(()=>{if(!a||c.current)return;let e=r||(null==o?void 0:o.portalNode);e&&!i(e)&&(e=e.current),e=e||document.body;let n=null;t&&((n=document.createElement("div")).id=t,e.appendChild(n));let s=document.createElement("div");s.id=a,s.setAttribute(ex,""),(e=n||e).appendChild(s),c.current=s,l(s)},[t,r,a,o]),s}function eb(e){let{children:t,id:r,root:i=null,preserveTabOrder:a=!0}=e,o=ey({id:r,root:i}),[s,l]=n.useState(null),c=n.useRef(null),u=n.useRef(null),d=n.useRef(null),p=n.useRef(null),h=!!s&&!s.modal&&s.open&&a&&!!(i||o);return n.useEffect(()=>{if(o&&a&&(null==s||!s.modal))return o.addEventListener("focusin",e,!0),o.addEventListener("focusout",e,!0),()=>{o.removeEventListener("focusin",e,!0),o.removeEventListener("focusout",e,!0)};function e(e){o&&ed(e)&&("focusin"===e.type?eh:ep)(o)}},[o,a,null==s?void 0:s.modal]),n.createElement(ev.Provider,{value:n.useMemo(()=>({preserveTabOrder:a,beforeOutsideRef:c,afterOutsideRef:u,beforeInsideRef:d,afterInsideRef:p,portalNode:o,setFocusManagerState:l}),[a,o])},h&&o&&n.createElement(eg,{"data-type":"outside",ref:c,onFocus:e=>{if(ed(e,o)){var t;null==(t=d.current)||t.focus()}else{let e=eu()||(null==s?void 0:s.refs.domReference.current);null==e||e.focus()}}}),h&&o&&n.createElement("span",{"aria-owns":o.id,style:ef}),o&&F.createPortal(t,o),h&&o&&n.createElement(eg,{"data-type":"outside",ref:u,onFocus:e=>{if(ed(e,o)){var t;null==(t=p.current)||t.focus()}else{let t=ec()||(null==s?void 0:s.refs.domReference.current);null==t||t.focus(),(null==s?void 0:s.closeOnFocusOut)&&(null==s||s.onOpenChange(!1,e.nativeEvent))}}}))}let ew=()=>n.useContext(ev);function ej(e){let{open:t=!1,onOpenChange:r,elements:i}=e,a=X(),o=n.useRef({}),[s]=n.useState(()=>$()),l=null!=Q(),[c,u]=n.useState(i.reference),d=H((e,t,n)=>{o.current.openEvent=e?t:void 0,s.emit("openchange",{open:e,event:t,reason:n,nested:l}),null==r||r(e,t,n)}),p=n.useMemo(()=>({setPositionReference:u}),[]),h=n.useMemo(()=>({reference:c||i.reference||null,floating:i.floating||null,domReference:i.reference}),[c,i.reference,i.floating]);return n.useMemo(()=>({dataRef:o,open:t,onOpenChange:d,elements:h,events:s,floatingId:a,refs:p}),[t,d,h,s,a,p])}function eC(e){void 0===e&&(e={});let{nodeId:t}=e,r=ej({...e,elements:{reference:null,floating:null,...e.elements}}),a=e.rootContext||r,o=a.elements,[s,l]=n.useState(null),[c,u]=n.useState(null),d=(null==o?void 0:o.reference)||s,p=n.useRef(null),h=ee();U(()=>{d&&(p.current=d)},[d]);let f=(0,V.useFloating)({...e,elements:{...o,...c&&{reference:c}}}),m=n.useCallback(e=>{let t=i(e)?{getBoundingClientRect:()=>e.getBoundingClientRect(),contextElement:e}:e;u(t),f.refs.setReference(t)},[f.refs]),g=n.useCallback(e=>{(i(e)||null===e)&&(p.current=e,l(e)),(i(f.refs.reference.current)||null===f.refs.reference.current||null!==e&&!i(e))&&f.refs.setReference(e)},[f.refs]),v=n.useMemo(()=>({...f.refs,setReference:g,setPositionReference:m,domReference:p}),[f.refs,g,m]),x=n.useMemo(()=>({...f.elements,domReference:d}),[f.elements,d]),y=n.useMemo(()=>({...f,...a,refs:v,elements:x,nodeId:t}),[f,v,x,t,a]);return U(()=>{a.dataRef.current.floatingContext=y;let e=null==h?void 0:h.nodesRef.current.find(e=>e.id===t);e&&(e.context=y)}),n.useMemo(()=>({...f,context:y,refs:v,elements:x}),[f,v,x,y])}let ek="active",eS="selected";function eN(e,t,n){let r=new Map,i="item"===n,a=e;if(i&&e){let{[ek]:t,[eS]:n,...r}=e;a=r}return{..."floating"===n&&{tabIndex:-1},...a,...t.map(t=>{let r=t?t[n]:null;return"function"==typeof r?e?r(e):null:r}).concat(e).reduce((e,t)=>(t&&Object.entries(t).forEach(t=>{let[n,a]=t;if(!(i&&[ek,eS].includes(n)))if(0===n.indexOf("on")){if(r.has(n)||r.set(n,[]),"function"==typeof a){var o;null==(o=r.get(n))||o.push(a),e[n]=function(){for(var e,t=arguments.length,i=Array(t),a=0;a<t;a++)i[a]=arguments[a];return null==(e=r.get(n))?void 0:e.map(e=>e(...i)).find(e=>void 0!==e)}}}else e[n]=a}),e),{})}}function eE(e){void 0===e&&(e=[]);let t=e.map(e=>null==e?void 0:e.reference),r=e.map(e=>null==e?void 0:e.floating),i=e.map(e=>null==e?void 0:e.item),a=n.useCallback(t=>eN(t,e,"reference"),t),o=n.useCallback(t=>eN(t,e,"floating"),r),s=n.useCallback(t=>eN(t,e,"item"),i);return n.useMemo(()=>({getReferenceProps:a,getFloatingProps:o,getItemProps:s}),[a,o,s])}function eM(e,t){let[n,r]=e,i=!1,a=t.length;for(let e=0,o=a-1;e<a;o=e++){let[a,s]=t[e]||[0,0],[l,c]=t[o]||[0,0];s>=r!=c>=r&&n<=(l-a)*(r-s)/(c-s)+a&&(i=!i)}return i}function eI(e,t){return e[0]>=t.x&&e[0]<=t.x+t.width&&e[1]>=t.y&&e[1]<=t.y+t.height}function eD(e){let t;void 0===e&&(e={});let{buffer:n=.5,blockPointerEvents:r=!1,requireIntent:a=!0}=e,o=!1,l=null,c=null,u=performance.now();function p(e,t){let n=performance.now(),r=n-u;if(null===l||null===c||0===r)return l=e,c=t,u=n,null;let i=e-l,a=t-c,o=Math.sqrt(i*i+a*a)/r;return l=e,c=t,u=n,o}let h=e=>{let{x:r,y:l,placement:c,elements:u,onClose:h,nodeId:f,tree:m}=e;return function(e){function g(){clearTimeout(t),h()}if(clearTimeout(t),!u.domReference||!u.floating||null==c||null==r||null==l)return;let{clientX:v,clientY:x}=e,y=[v,x],b=d(e),w="mouseleave"===e.type,j=s(u.floating,b),C=s(u.domReference,b),k=u.domReference.getBoundingClientRect(),S=u.floating.getBoundingClientRect(),N=c.split("-")[0],E=r>S.right-S.width/2,M=l>S.bottom-S.height/2,I=eI(y,k),D=S.width>k.width,T=S.height>k.height,A=(D?k:S).left,L=(D?k:S).right,P=(T?k:S).top,R=(T?k:S).bottom;if(j&&(o=!0,!w))return;if(C&&(o=!1),C&&!w){o=!0;return}if(w&&i(e.relatedTarget)&&s(u.floating,e.relatedTarget)||m&&eo(m.nodesRef.current,f).some(e=>{let{context:t}=e;return null==t?void 0:t.open}))return;if("top"===N&&l>=k.bottom-1||"bottom"===N&&l<=k.top+1||"left"===N&&r>=k.right-1||"right"===N&&r<=k.left+1)return g();let _=[];switch(N){case"top":_=[[A,k.top+1],[A,S.bottom-1],[L,S.bottom-1],[L,k.top+1]];break;case"bottom":_=[[A,S.top+1],[A,k.bottom-1],[L,k.bottom-1],[L,S.top+1]];break;case"left":_=[[S.right-1,R],[S.right-1,P],[k.left+1,P],[k.left+1,R]];break;case"right":_=[[k.right-1,R],[k.right-1,P],[S.left+1,P],[S.left+1,R]]}function O(e){let[t,r]=e;switch(N){case"top":return[[D?t+n/2:E?t+4*n:t-4*n,r+n+1],[D?t-n/2:E?t+4*n:t-4*n,r+n+1],[S.left,E||D?S.bottom-n:S.top],[S.right,E?D?S.bottom-n:S.top:S.bottom-n]];case"bottom":return[[D?t+n/2:E?t+4*n:t-4*n,r-n],[D?t-n/2:E?t+4*n:t-4*n,r-n],[S.left,E||D?S.top+n:S.bottom],[S.right,E?D?S.top+n:S.bottom:S.top+n]];case"left":{let e=[t+n+1,T?r+n/2:M?r+4*n:r-4*n],i=[t+n+1,T?r-n/2:M?r+4*n:r-4*n];return[[M||T?S.right-n:S.left,S.top],[M?T?S.right-n:S.left:S.right-n,S.bottom],e,i]}case"right":return[[t-n,T?r+n/2:M?r+4*n:r-4*n],[t-n,T?r-n/2:M?r+4*n:r-4*n],[M||T?S.left+n:S.right,S.top],[M?T?S.left+n:S.right:S.left+n,S.bottom]]}}if(!eM([v,x],_)){if(o&&!I)return g();if(!w&&a){let t=p(e.clientX,e.clientY),n=.1;if(null!==t&&t<n)return g()}eM([v,x],O([r,l]))?!o&&a&&(t=window.setTimeout(g,40)):g()}}};return h.__options={blockPointerEvents:r},h}e.s(["FloatingPortal",()=>eb,"safePolygon",()=>eD,"useFloating",()=>eC,"useHover",()=>ea,"useInteractions",()=>eE],29160);var eT=n;function eA(){let[e,t]=(0,eT.useState)(!1);return(0,eT.useEffect)(()=>{t("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0)},[]),e}e.s(["useIsTouchScreen",()=>eA],304775);let eL=new Map;function eP(e){if(e.nodeType===e.TEXT_NODE)return["#text",{}];if(e.nodeType!==e.ELEMENT_NODE)return["",{}];if("SPAN"===e.nodeName&&e.classList.contains("katex-html"))return["skip",{}];if("SPAN"===e.nodeName&&e.classList.contains("katex-mathml")){var t;return["#text",{},(null==(t=e.querySelector('annotation[encoding="application/x-tex"]'))?void 0:t.textContent)||""]}if("SPAN"===e.nodeName&&(e.classList.contains("linenumber")||e.classList.contains("react-syntax-highlighter-line-number")))return["skip",{}];let n=e.getAttribute("data-seg")||"";if("root"===n||"skip"===n)return[n,{}];let r=eL.get(n);return[(null==r?void 0:r.type)||n,(null==r?void 0:r.props)||{}]}function eR(e){let{lang:t,project:n,file:r}=e;return"```".concat(t).concat(n?' project="'.concat(n,'"'):"").concat(r?' file="'.concat(r,'"'):"","\n")}let e_=new Set(["skip","footnoteReference"]);function eO(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a="";function o(e,t,s,l){let[c,u,d]=eP(e);if(e_.has(c))return;if("#text"===c){s&&n&&i&&(a+="...");let t="string"==typeof d?d:e.textContent||"";a+=t,l&&r&&i&&(a+="...");return}let p={...t};switch(c){case"Codeblock":if(u.blockId){var h,f;a+=eR({lang:u.lang,project:null==(h=u.meta)?void 0:h.project,file:null==(f=u.meta)?void 0:f.file})+"...\n```\n\n";return}a+="```".concat(u.lang||"","\n");break;case"code":a+="`";break;case"b":case"strong":a+="**";break;case"i":case"em":a+="*";break;case"del":a+="~~";break;case"hr":a+="---";break;case"Math":a+="$$";break;case"InlineMath":a+="$";break;case"li":if(t.ol){let e=u.index||"1";a+="".concat(e,". ")}else t.ul&&(a+="- ");break;case"ol":t.ol=!0;break;case"ul":t.ul=!0;break;case"h1":a+="# ";break;case"h2":a+="## ";break;case"h3":a+="### ";break;case"h4":a+="#### ";break;case"h5":a+="##### ";break;case"h6":a+="###### ";break;case"blockquote":a+="> ";break;case"tr":t.tableCols=0;break;case"th":case"td":t.tableCols=(t.tableCols||0)+1,p.tableCols=t.tableCols,t.tableCols>1&&(a+=" "),a+="| ";break;case"a":a+="["}let m=e.childNodes.length;for(let n=0;n<m;n++)o(e.childNodes[n],t,s&&0===n,l&&n===m-1);switch(c){case"Codeblock":a+="\n```\n\n";break;case"code":a+="`";break;case"b":case"strong":a+="**";break;case"i":case"em":a+="*";break;case"del":a+="~~";break;case"Math":a+="$$";break;case"InlineMath":a+="$";break;case"li":case"tr":a+="\n";break;case"p":case"table":case"hr":case"blockquote":case"ul":case"ol":case"img":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":a+="\n\n";break;case"thead":a+="|-----".repeat(t.tableCols||1)+"\n";break;case"a":a+="](".concat(u.href||"",")")}Object.assign(t,p)}function s(t){let[n,r]=eP(t);switch(n){case"ul":return o(e,{ol:!1,ul:!0},!0,!0);case"ol":return o(e,{ol:!0,ul:!1},!0,!0);case"Codeblock":a+="```".concat(r.lang||"","\n"),o(e,{ol:!1,ul:!1},!0,!0),a+="\n```";return;case"blockquote":o(e,{ol:!1,ul:!1},!0,!0),a=a.split("\n").map(e=>"> ".concat(e)).join("\n");return;case"del":a+="~~",o(e,{ol:!1,ul:!1},!0,!0),a+="~~";return;case"h1":return a+="# ",o(e,{ol:!1,ul:!1},!0,!0);case"h2":return a+="## ",o(e,{ol:!1,ul:!1},!0,!0);case"h3":return a+="### ",o(e,{ol:!1,ul:!1},!0,!0);case"h4":return a+="#### ",o(e,{ol:!1,ul:!1},!0,!0);case"h5":return a+="##### ",o(e,{ol:!1,ul:!1},!0,!0);case"h6":return a+="###### ",o(e,{ol:!1,ul:!1},!0,!0);case"table":case"root":case"img":case"Math":return o(e,{ol:!1,ul:!1},!0,!0)}if(t.parentNode){if(t.nodeType===t.ELEMENT_NODE){let n=document.createDocumentFragment(),r=t.cloneNode(!1);r.appendChild(e),n.appendChild(r),e=n}s(t.parentNode)}}return i?s(t):o(e,{ol:!1,ul:!1},!0,!0),a.trim()}e.s(["fragmentToMarkdown",()=>eO,"segmentInfo",0,eL],40114)},30570,e=>{"use strict";var t=e.i(832520),n=e.i(200407);let r=(0,n.createContext)({containers:{},setContainers:()=>{}});function i(e){let{children:i}=e,[a,o]=(0,n.useState)({});return(0,t.jsx)(r.Provider,{value:{containers:a,setContainers:o},children:i})}function a(){return(0,n.useContext)(r)}function o(e){let t=(0,n.useRef)(null),{setContainers:r}=a();return(0,n.useEffect)(()=>(r(n=>({...n,[e]:t.current})),()=>{r(t=>{let{[e]:n,...r}=t;return r})}),[e,r]),t}e.s(["PortalProvider",()=>i,"usePortal",()=>a,"usePortalContainerRef",()=>o])},71817,e=>{"use strict";var t=e.i(370751);e.s(["ExternalLinkIcon",()=>t.default])},397711,583984,643611,612336,233327,e=>{"use strict";e.s(["SegmenterProvider",()=>w,"useRegister",()=>j],397711);var t=e.i(832520),n=e.i(200407),r=e.i(29160),i=e.i(922744),a=e.i(222863),o=e.i(304775),s=e.i(40114),l=e.i(430957),c=e.i(176248),u=e.i(329046),d=e.i(584497),p=e.i(443265),h=e.i(297239),f=e.i(127169);let m=(0,n.createContext)({}),g="function"==typeof Intl.Segmenter?new Intl.Segmenter("en",{granularity:"word"}):null;function v(e){let t=[];if(g)for(let{segment:n}of g.segment(e))t.push(n);else{let n=e.split(" ");for(let e=0;e<n.length;e++)e>0&&t.push(" "),t.push(n[e])}return t}let x=window.matchMedia("(prefers-reduced-motion: reduce)").matches,y=8;function b(e){return new Promise(t=>setTimeout(t,e))}function w(e){let{streaming:g,readonly:x,children:w,messageId:j}=e,C=(0,h.useT)(),{setQuote:k}=(0,d.useChatQuote)(),S=(0,n.useState)(()=>{let e=new Map,t=new Map,n=new Set,r=new Map,i=!1;return(a,o,s,l)=>{o.current&&(e.set(a,o),t.set(a,s),n.add(a),r.set(a,l),i||(i=!0,setTimeout(c,y)));async function c(){if(0===n.size){i=!1;return}let a=n.values().next().value;if(void 0===a){i=!1;return}for(let e of n)e<a&&(a=e);n.delete(a);let o=e.get(a),s=t.get(a),l=r.get(a);if(o&&o.current&&(null==l||l(),s&&s.current)){let e=o.current.textContent;s.current.startsWith(e)||(o.current.textContent="",e="");let t=v(s.current.slice(e.length));for(let n=0;n<t.length&&(e+=t[n],o.current);n++)o.current.textContent=e," "!==t[n]&&await b(y)}setTimeout(c,y)}}})[0],N=!0!==x,E=(0,n.useRef)(null),[M,I]=(0,n.useState)(null),D=(0,o.useIsTouchScreen)(),{refs:T,floatingStyles:A}=(0,r.useFloating)({placement:D?"bottom":"top",middleware:[(0,i.offset)(12),(0,i.inline)(),(0,i.flip)({padding:6})],whileElementsMounted:a.autoUpdate}),L=(0,n.useRef)(()=>"");(0,n.useEffect)(()=>{let e=!1,t=()=>{var t;e=!1;let n=window.getSelection();if(null===n||!n.rangeCount)return void I(null);let r=n.getRangeAt(0);if(r.collapsed)return void I(null);let i=null==(t=E.current)?void 0:t.contains(r.commonAncestorContainer),a=E.current;if(!i){let e=!1,t=r.commonAncestorContainer;if(t instanceof HTMLElement){let n=t.closest('[data-seg="code-root"]');n&&n instanceof HTMLElement&&(e=!0,a=n)}if(!e)return void I(null)}for(;0===r.endOffset;)r.setEndBefore(r.endContainer);N&&T.setReference({getBoundingClientRect:()=>r.getBoundingClientRect(),getClientRects:()=>{let e=r.getClientRects(),t=[];t.item=e=>t[e];for(let n=0;n<e.length;n++){let r=e[n];r.width>.1&&r.height>.1&&t.push(r)}return t}}),e=!0,L.current=function(){var e;let t=!(arguments.length>0)||void 0===arguments[0]||arguments[0],n=r.cloneContents();return(0,s.fragmentToMarkdown)(n,r.commonAncestorContainer,r.startOffset>0,(null==(e=r.endContainer.textContent)?void 0:e.length)!==r.endOffset,t)},N&&I(a)};function n(t){if(!e||!t.clipboardData)return;let n=L.current(!1);t.clipboardData.setData("text/markdown",n),t.clipboardData.setData("text/plain",n),t.preventDefault()}return document.addEventListener("selectionchange",t),document.addEventListener("keyup",t),document.addEventListener("copy",n),()=>{document.removeEventListener("selectionchange",t),document.removeEventListener("keyup",t),document.removeEventListener("copy",n)}},[T,N]);let[P,R]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let e=E.current;if(!e)return;let t=e=>{var t;null!=(t=T.floating.current)&&t.contains(e.target)||R(!0)},n=()=>{R(!1)};return e.addEventListener("pointerdown",t),e.addEventListener("pointerup",n),e.addEventListener("pointerleave",n),()=>{e.removeEventListener("pointerdown",t),e.removeEventListener("pointerup",n),e.removeEventListener("pointerleave",n)}},[T.floating]),(0,f.useShortcut)(e=>{var t;"q"===e.key&&M&&(k(L.current()),null==(t=window.getSelection())||t.removeAllRanges(),e.stopPropagation(),e.preventDefault())});let _=(0,n.useMemo)(()=>({animate:g?S:void 0}),[g,S]);return(0,t.jsxs)("div",{ref:E,className:"w-full",children:[M&&(0,t.jsx)(r.FloatingPortal,{root:M,children:(0,t.jsxs)("div",{className:"bg-background shadow-base-expand absolute left-0 top-0 z-50 flex select-none items-center gap-1 rounded-lg p-1","data-quote-button":!0,ref:T.setFloating,style:{...A,pointerEvents:P?"none":void 0},children:[(0,t.jsxs)(c.Button,{className:"hover:text-foreground rounded-md px-0.5 py-0 text-sm text-gray-500",onClick:()=>{var e;k(L.current()),null==(e=window.getSelection())||e.removeAllRanges()},size:"xs",variant:"ghost",children:[C("segmenterProvider.quote"),(0,t.jsx)(p.Kbd,{variant:"secondary",children:"Q"})]}),(0,t.jsx)("div",{className:"bg-alpha-400 h-5 w-px"}),(0,t.jsx)(u.DownvoteButton,{className:"text-gray-500",messageId:j,quoteRef:L,tooltip:"Downvote Selection",variant:"quote"})]})}),(0,t.jsx)(l.Prose,{"data-seg":"root",children:(0,t.jsx)(m.Provider,{value:_,children:w})})]})}function j(e){let{id:t,content:r,type:i,props:a}=e,{animate:o}=(0,n.use)(m),l=(0,n.useRef)(null),c=(0,n.useRef)(r),[u,d]=(0,n.useState)(!1),p=(0,n.useId)();(0,n.useEffect)(()=>(s.segmentInfo.set(p,{type:i,props:a}),()=>{s.segmentInfo.delete(p)}));let h={"data-seg":p};return((0,n.useEffect)(()=>{if(x){let e=l.current;if(!e)return;e.style.transition="",d(!0),"string"==typeof r&&(e.textContent=r);return}if(c.current=r,!o||void 0===t)return;let e=setTimeout(()=>{o(t,l,c,()=>d(!0))},20);return()=>clearTimeout(e)},[o,t,r]),o&&void 0!==t)?(h.style={opacity:+!!u,transition:"opacity .5s ease"},h.ref=l,"string"==typeof r&&(h.children=" ")):"string"==typeof r&&(h.children=r),{elementProps:h}}var C=t,k=e.i(545858),S=e.i(30570),N=r,E=i,M=a,I=n,D=e.i(70165);function T(e){let{id:t}=e,n=(0,S.usePortalContainerRef)(t);return(0,C.jsx)("span",{ref:n})}function A(e){let{label:t,idPrefix:n}=e,[r,i]=(0,I.useState)(!1),a=(0,D.useIsMobile)(),{refs:o,floatingStyles:s,context:l}=(0,N.useFloating)({placement:a?"top":"top-start",middleware:[(0,E.shift)({padding:6}),(0,E.offset)(4),(0,E.flip)({padding:6})],open:r,onOpenChange:i,whileElementsMounted:M.autoUpdate}),c=(0,N.useHover)(l,{handleClose:(0,N.safePolygon)({buffer:1})}),{getReferenceProps:u,getFloatingProps:d}=(0,N.useInteractions)([c]),p="".concat(n).concat(t);return"vercel_knowledge_base"===t?null:(0,C.jsxs)("span",{ref:o.setReference,...u(),className:"-mt-1 ml-0.5 inline-flex size-4 align-text-top",children:[(0,C.jsx)("a",{className:"bg-alpha-200 hover:bg-alpha-400 focus:bg-alpha-400 inline-block size-4 select-none rounded-full text-center font-mono text-[10px] leading-4 text-gray-700 no-underline transition-colors focus:text-black",href:"#def-".concat(p),id:"ref-".concat(p),onBlur:()=>i(!1),onFocus:()=>i(!0),tabIndex:0,children:t}),r?(0,C.jsx)("span",{ref:o.setFloating,style:s,...d(),className:"bg-background shadow-base z-10 select-none rounded-md p-2 text-xs",children:(0,C.jsx)(T,{id:p})}):null]})}function L(e){let{id:t,children:n}=e,{containers:r}=(0,S.usePortal)(),i=r[t];return i?(0,k.createPortal)(n,i):null}e.s(["PortalToId",()=>L,"Reference",()=>A],583984);var P=t,R=n,_=t,O=e.i(86395),F=e.i(299313),V=e.i(304649);function B(e){let{knowledgeSource:t,className:n}=e;switch(null==t?void 0:t.toLowerCase()){case"nextjs.org":return(0,_.jsx)(F.default,{alt:"Next.js Logo",className:n,height:16,src:"/chat-static/citation/nextjs.svg",width:16});case"vercel.com":case"sdk.vercel.ai":case"ai-sdk.dev":return(0,_.jsx)(F.default,{alt:"Vercel Logo",className:n,height:16,src:"/chat-static/citation/vercel.svg",width:16});case"turbo.build":case"turborepo.com":return(0,_.jsx)(F.default,{alt:"Turbopack Logo",className:n,height:16,src:"/chat-static/citation/turbo.svg",width:16});case"flags-sdk.dev":return(0,_.jsx)(F.default,{alt:"Vercel Logo",className:n,height:16,src:"/chat-static/citation/flags.svg",width:16});case"svelte.dev":return(0,_.jsx)(F.default,{alt:"Svelte Logo",className:(0,V.cn)(n,"rounded-none"),height:16,src:"/chat-static/citation/svelte.svg",width:16});case"docs.stripe.com":return(0,_.jsx)(F.default,{alt:"Stripe Logo",className:(0,V.cn)(n,"rounded-none"),height:12,src:"/chat-static/citation/stripe.svg",width:12});case"remix.run":return(0,_.jsx)(F.default,{alt:"Remix Logo",className:(0,V.cn)(n,"rounded-none"),height:12,src:"/chat-static/citation/remix.svg",width:12});case"vuejs.org":return(0,_.jsx)(F.default,{alt:"Vue Logo",className:(0,V.cn)(n,"rounded-none"),height:16,src:"/chat-static/citation/vue.svg",width:16});case"react.dev":return(0,_.jsx)(F.default,{alt:"React Logo",className:(0,V.cn)(n,"rounded-none"),height:16,src:"/chat-static/citation/react.svg",width:16});case"typescriptlang.org":return(0,_.jsx)(F.default,{alt:"Typescript Logo",className:(0,V.cn)(n),height:16,src:"/chat-static/citation/ts.svg",width:16});case"github.com":return(0,_.jsx)(F.default,{alt:"Github Logo",className:n,height:16,src:"/chat-static/citation/github.svg",width:16});case"ui.shadcn.com":return(0,_.jsx)(F.default,{alt:"shadcn/ui Logo",className:(0,V.cn)(n),height:16,src:"/chat-static/citation/shadcn-ui.svg",width:16});case"radix-ui.com":return(0,_.jsx)(F.default,{alt:"Radix UI Logo",className:(0,V.cn)(n,"size-3.5 translate-x-0.5 rounded-none"),height:14,src:"/chat-static/citation/radix-ui.svg",width:14});case"orm.drizzle.team":return(0,_.jsx)(F.default,{alt:"Drizzle Logo",className:(0,V.cn)(n,"dark:invert"),height:22,src:"/chat-static/citation/drizzle.svg",width:22});case"supabase.com":return(0,_.jsx)(F.default,{alt:"Supabase Logo",className:(0,V.cn)(n),height:14,src:"/chat-static/citation/supabase.svg",width:14});case"www.prisma.io":return(0,_.jsx)(F.default,{alt:"Prisma Logo",className:(0,V.cn)(n,"dark:invert"),height:14,src:"/chat-static/citation/prisma.svg",width:14});case"playwright.dev":return(0,_.jsx)(F.default,{alt:"Playwright Logo",className:(0,V.cn)(n),height:14,src:"/chat-static/citation/playwright.svg",width:14});case"neon.tech":return(0,_.jsx)(F.default,{alt:"Neon Logo",className:(0,V.cn)(n),height:14,src:"/chat-static/citation/neon.svg",width:14});case"upstash.com":return(0,_.jsx)(F.default,{alt:"Upstash Logo",className:(0,V.cn)(n),height:14,src:"/chat-static/citation/upstash.svg",width:14});case"v0.app":return(0,_.jsx)(F.default,{alt:"v0 Logo",className:(0,V.cn)(n,"dark:invert"),height:14,src:"/chat-static/citation/v0.svg",width:14});default:return(0,_.jsx)(O.Globe,{className:(0,V.cn)(n,"rounded-none"),size:16})}}e.s(["CitationSourceIcon",()=>B],643611),e.i(632485);var z=e.i(71817),H=e.i(824897),U=e.i(7284),q=e.i(716360),W=e.i(529693),Z=e.i(403055);let G=(0,e.i(605528).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M6.75011 4H6.00011V5.5H6.75011H9.43945L5.46978 9.46967L4.93945 10L6.00011 11.0607L6.53044 10.5303L10.499 6.56182V9.25V10H11.999V9.25V5C11.999 4.44772 11.5512 4 10.999 4H6.75011Z" fill="currentColor"/>');function K(e){let{citations:t}=e;return t.map(e=>{let t="cite-".concat(e.messageId,"-").concat(e.index);return(0,P.jsx)(L,{id:t,children:(0,P.jsxs)("a",{className:"inline-flex min-w-0 items-baseline gap-1 no-underline",href:e.url,rel:"noopener noreferrer",target:"_blank",children:[(0,P.jsx)("span",{className:"line-clamp-1",children:e.title}),(0,P.jsx)(z.ExternalLinkIcon,{className:"size-3 shrink-0"})]})},t)})}function X(e){let{urls:t,className:n}=e,[r,i]=(0,R.useState)(0),a=["Browsing search results"];null==t||t.forEach((e,t)=>{let n=e.replace(/^https?:\/\//,"");a[t+1]="Browsing web page: ".concat(n)}),a[Object.keys(a).length]="Synthesizing ".concat(null==t?void 0:t.length," source").concat((null==t?void 0:t.length)===1?"":"s");let o=Object.keys(a).length;return((0,R.useEffect)(()=>{(async()=>{for(let e=0;e<o;e++)0!==e&&await (0,Z.sleep)(2e3),i(e)})()},[o]),t&&0!==t.length)?(0,P.jsx)("div",{className:(0,U.default)("mt-[6px]!",n),children:(0,P.jsx)("div",{className:"shimmer relative flex items-center gap-1.5 text-gray-500",children:(0,P.jsxs)(q.AnimatePresence,{mode:"popLayout",presenceAffectsLayout:!0,children:[(0,P.jsx)(H.Globe,{className:"size-4 shrink-0 leading-[normal]"}),(0,P.jsx)("div",{className:"mask relative grow leading-[15px]",children:(0,P.jsx)(q.AnimatePresence,{initial:!1,mode:"popLayout",presenceAffectsLayout:!0,children:(0,P.jsx)(W.motion.span,{animate:{y:0},className:"inline-block grow text-ellipsis whitespace-nowrap text-[15px] leading-none md:w-[calc(100%-100px)]",exit:{y:-24},initial:{y:24},layout:!0,transition:{type:"tween",duration:.3},children:a[r]},"carousel-".concat(r))})})]})})}):null}e.s(["ArrowUpRightSmall",0,G],612336),e.s(["CitationsCarousel",()=>X,"CitationsPortalRenderer",()=>K],233327)},634633,e=>{"use strict";let t=(0,e.i(121793).default)("Cable",[["path",{d:"M17 21v-2a1 1 0 0 1-1-1v-1a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v1a1 1 0 0 1-1 1",key:"10bnsj"}],["path",{d:"M19 15V6.5a1 1 0 0 0-7 0v11a1 1 0 0 1-7 0V9",key:"1eqmu1"}],["path",{d:"M21 21v-2h-4",key:"14zm7j"}],["path",{d:"M3 5h4V3",key:"z442eg"}],["path",{d:"M7 5a1 1 0 0 1 1 1v1a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a1 1 0 0 1 1-1V3",key:"ebdjd7"}]]);e.s(["default",()=>t])},849143,e=>{"use strict";var t=e.i(634633);e.s(["Cable",()=>t.default])},985353,967276,e=>{"use strict";e.s(["Toolcall",()=>V],985353);var t=e.i(832520),n=e.i(200407),r=e.i(849143),i=t,a=n,o=e.i(716360),s=e.i(304649),l=e.i(975294),c=n,u=e.i(719271),d=e.i(565419),p=e.i(440501),h=e.i(113717),f=e.i(720028),m=e.i(604300),g=e.i(370870),v=e.i(620421);let x="Collapsible",[y,b]=(0,d.createContextScope)(x),[w,j]=y(x),C=(0,c.forwardRef)((e,t)=>{let{__scopeCollapsible:n,open:r,defaultOpen:i,disabled:a,onOpenChange:o,...s}=e,[u=!1,d]=(0,p.useControllableState)({prop:r,defaultProp:i,onChange:o});return(0,c.createElement)(w,{scope:n,disabled:a,contentId:(0,v.useId)(),open:u,onOpenToggle:(0,c.useCallback)(()=>d(e=>!e),[d])},(0,c.createElement)(m.Primitive.div,(0,l.default)({"data-state":I(u),"data-disabled":a?"":void 0},s,{ref:t})))}),k="CollapsibleTrigger",S=(0,c.forwardRef)((e,t)=>{let{__scopeCollapsible:n,...r}=e,i=j(k,n);return(0,c.createElement)(m.Primitive.button,(0,l.default)({type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":I(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled},r,{ref:t,onClick:(0,u.composeEventHandlers)(e.onClick,i.onOpenToggle)}))}),N="CollapsibleContent",E=(0,c.forwardRef)((e,t)=>{let{forceMount:n,...r}=e,i=j(N,e.__scopeCollapsible);return(0,c.createElement)(g.Presence,{present:n||i.open},e=>{let{present:n}=e;return(0,c.createElement)(M,(0,l.default)({},r,{ref:t,present:n}))})}),M=(0,c.forwardRef)((e,t)=>{let{__scopeCollapsible:n,present:r,children:i,...a}=e,o=j(N,n),[s,u]=(0,c.useState)(r),d=(0,c.useRef)(null),p=(0,f.useComposedRefs)(t,d),g=(0,c.useRef)(0),v=g.current,x=(0,c.useRef)(0),y=x.current,b=o.open||s,w=(0,c.useRef)(b),C=(0,c.useRef)();return(0,c.useEffect)(()=>{let e=requestAnimationFrame(()=>w.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,h.useLayoutEffect)(()=>{let e=d.current;if(e){C.current=C.current||{transitionDuration:e.style.transitionDuration,animationName:e.style.animationName},e.style.transitionDuration="0s",e.style.animationName="none";let t=e.getBoundingClientRect();g.current=t.height,x.current=t.width,w.current||(e.style.transitionDuration=C.current.transitionDuration,e.style.animationName=C.current.animationName),u(r)}},[o.open,r]),(0,c.createElement)(m.Primitive.div,(0,l.default)({"data-state":I(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!b},a,{ref:p,style:{"--radix-collapsible-content-height":v?"".concat(v,"px"):void 0,"--radix-collapsible-content-width":y?"".concat(y,"px"):void 0,...e.style}}),b&&i)});function I(e){return e?"open":"closed"}let D=C,T=S,A=E;var L=e.i(115184),P=e.i(422981);let R=250;function _(e){let{name:t,files:n=[],animated:r=!0}=e,[l,c]=(0,a.useState)(r),[u,d]=(0,a.useState)(n.length<2);(0,a.useEffect)(()=>{if(!r)return void c(!1);let e=setTimeout(()=>c(!1),R);return()=>clearTimeout(e)},[n,r]);let p=r?"animate-shimmer translate-y-px bg-size-[800%_100%] bg-clip-text text-sm text-transparent":void 0,h=r?{backgroundImage:"linear-gradient(90deg,rgb(161 161 170) 0%,rgb(161 161 170) 35%,rgb(212 212 216) 50%,rgb(161 161 170) 65%,rgb(161 161 170) 100%)"}:void 0;return(0,i.jsx)("div",{className:"font-mono text-gray-500",children:(0,i.jsxs)(D,{open:u,onOpenChange:d,children:[(0,i.jsx)(T,{asChild:!0,children:(0,i.jsx)("button",{className:(0,s.cn)(p,"mb-2 flex cursor-pointer items-center"),style:h,children:l?t?(0,i.jsxs)(i.Fragment,{children:["Scanning ",n.length," files inside /",t,"..."]}):(0,i.jsxs)(i.Fragment,{children:["Reading ",n.length," files..."]}):(0,i.jsxs)(i.Fragment,{children:[t?(0,i.jsxs)(i.Fragment,{children:["Scanned ",n.length," files inside ",t," "]}):(0,i.jsxs)(i.Fragment,{children:["Read ",n.length," files "]}),u?(0,i.jsx)(L.ChevronDown,{className:"ml-1 h-3 w-3"}):(0,i.jsx)(P.ChevronRight,{className:"ml-1 h-3 w-3"})]})})}),(0,i.jsx)(A,{className:"border-l border-gray-200",children:(0,i.jsx)(o.AnimatePresence,{children:(0,i.jsx)("ul",{className:"m-0 flex list-none flex-col gap-2 p-0",children:n.map(e=>(0,i.jsx)("li",{className:"m-0 list-none p-0 text-sm",children:e},e))})})})]})})}var O=e.i(818273);function F(e){return Object.keys(e)}let V=n.default.memo(e=>{let{source:n}=e,i=(0,O.useIsStreaming)(),a=n.replace(/[^]*Tool call result:\n/,""),o=n.replace(/\nTool call result:[^]+/,""),s=null,l=null;try{s=JSON.parse(o),l=JSON.parse(a)}catch(e){}if(l&&((null==s?void 0:s.type)==="read_dir"||(null==s?void 0:s.type)==="read_file"))return(0,t.jsx)(_,{name:"read_dir"===s.type?s.dir:void 0,files:"read_dir"===s.type?"files"in l?l.files:[]:F(("content"in l?l.content:{})||{}),animated:i||!1});let c=(null==s?void 0:s.type)==="computer"&&"screenshot"===s.action&&l&&"data"in l;return(0,t.jsx)("p",{className:"inline-flex cursor-pointer rounded bg-cyan-600/10 px-1.5 py-0.5 text-sm text-cyan-700",children:(0,t.jsxs)("details",{children:[(0,t.jsxs)("summary",{className:"inline-flex items-center gap-2",children:[(0,t.jsx)(r.Cable,{className:"h-3.5 w-3.5"}),o]}),(0,t.jsx)("div",{className:"mb-1 rounded bg-cyan-800/10 p-1 font-mono text-xs",children:c?(0,t.jsx)("img",{className:"max-h-64 max-w-full",src:"data:image/png;base64,".concat(l.data),alt:"Tool call result"}):a})]})})});V.displayName="Toolcall",e.s(["default",()=>ey],967276);var B=t,z=n,H=e.i(529693),U=o,q=e.i(376346),W=e.i(763480),Z=e.i(159402),G=e.i(183673),K=e.i(472166),X=e.i(158469),$=e.i(941088),Y=e.i(676648),J=e.i(789018),Q=e.i(977960),ee=e.i(92479),et=e.i(996174),en=e.i(584497),er=e.i(502398),ei=e.i(170160),ea=e.i(692581),eo=e.i(762585),es=e.i(32170);e.i(563948);var el=e.i(407562),ec=e.i(921),eu=e.i(211976),ed=e.i(780292);let ep=(0,e.i(205341).atom)(new Set);e.i(168204);var eh=e.i(225695),ef=e.i(667660),em=e.i(538553),eg=e.i(120485);let ev={enter:e=>({y:e>0?40:-40,opacity:0}),center:{y:0,opacity:1},exit:e=>({y:e<0?40:-40,opacity:0})},ex=new Intl.ListFormat("en",{style:"long",type:"conjunction"});function ey(e){var t;let n,{messageId:r,names:i}=e;n="string"==typeof i?[i]:i||[];let a=(0,ee.useChatMessages)(),o=(0,en.useChatMetadata)(),{user:s}=(0,es.useUser)(),l=a.activeForkKey,c=!!l&&l[l.length-1],u=c&&c===r,d=null==l?void 0:l.indexOf(r),p=void 0!==d&&d<l.length?l[d+1]:void 0,h=p&&(null==(t=a.messages.find(e=>e.id===p))?void 0:t.type)==="added-environment-variables",[f,m]=(0,z.useState)({}),[g,v]=(0,z.useState)({}),[x,y]=(0,z.useState)(!1),[b,w]=(0,z.useState)(0),{selectedProjectId:j}=(0,G.useProjectsForUser)(),{submit:C}=(0,K.useV0Chat)(),[k,S]=(0,z.useState)(u?"unsubmit":h?"submitted":"cancelled");(0,z.useEffect)(()=>{u?S("unsubmit"):h?S("submitted"):S("cancelled")},[u,h]);let{hasVercelWritePermission:N}=(0,ef.useActiveScope)(),{project:E,canWriteToChat:M}=(0,en.useChatMetadata)(),I=null==E?void 0:E.vercelProjectId,{projects:D,isReady:T}=(0,ea.useVercelProjects)(),A=!M||!N,L=null==D?void 0:D.find(e=>e.id===I),P=n.map(e=>({key:e,alreadyExists:null==L?void 0:L.env.find(t=>t===e)})),R=async()=>{if(!Object.keys(f).length)return el.toast.error("No environment variables to create. Please try again.");if(!Object.values(f).every(e=>e))return;let e=j;if(y(!0),!j){let t=await (0,ec.createProject)({projectName:o.title||"New v0 Project",chatId:a.chatId,includeSuccessToast:!1});if(!t.id)return el.toast.error("Failed to create v0 Project. Please add this chat to a project");e=t.id,await o.setMetadata({...o,project:{projectId:t.id,vercelProjectId:t.vercelProjectId||null,name:o.title||"New v0 Project",settings:{icon:"icon-wand-sparkles",color:null},isCreator:!0}})}if(!e)return el.toast.error("v0 Project ID not found. Please try again.");let t=await (0,Z.createEnvVars)({envVars:Object.entries(f).map(e=>{let[t,n]=e;return{key:t,value:n}}),v0ProjectId:e,autoCreateVercelProject:!1,chatId:a.chatId}).catch(e=>({success:!1,error:e.message}));if(!t.success){y(!1),(0,eg.handleChatError)(t.error)||el.toast.error("Failed to create environment variables.");return}m({}),w(-1),S("submitted"),await C({action:"new",attachments:[],content:(0,eh.createMDXMessageContent)("The environment variable".concat(n.length>1?"s":""," ").concat(ex.format(n)," ").concat(n.length>1?"have":"has"," been added to the [Vercel Project]().")),type:"added-environment-variables",revalidateVercelEnvAndIntegrations:!0})};return T?(0,B.jsx)(q.Card,{className:"w-full max-w-[360px] overflow-hidden shadow-sm","data-seg":"skip",children:(0,B.jsxs)(q.CardContent,{className:"my-0 p-3",children:[(0,B.jsxs)(U.AnimatePresence,{custom:b,mode:"wait",children:["submitted"===k&&(0,B.jsx)(H.motion.div,{custom:b,variants:ev,initial:"enter",animate:"center",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"flex flex-col items-center space-y-4",children:(0,B.jsxs)("div",{className:"flex flex-col items-center space-y-2 py-3 text-center",children:[(0,B.jsx)("span",{className:"rounded-full border border-green-200 bg-green-100 p-1.5",children:(0,B.jsx)(X.CheckCircle,{className:"text-green-600!"})}),(0,B.jsxs)("h2",{className:"flex items-center gap-1 text-sm font-medium",children:[(0,B.jsx)("span",{children:"Environment Variables Added"}),(0,B.jsx)(et.Tooltip,{content:(0,B.jsx)("ul",{children:n.map(e=>(0,B.jsx)("li",{className:"flex items-center space-x-1",children:(0,B.jsx)("span",{children:e})},e))}),children:(0,B.jsx)("span",{className:"text-gray-500",children:(0,B.jsx)(Q.InformationFillSmall,{})})})]})]})},"info"),("unsubmit"===k||!j)&&u&&(0,B.jsxs)(H.motion.form,{custom:b,variants:ev,initial:"enter",animate:"center",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"flex flex-col space-y-4",children:[I||L||!j?null:(0,B.jsxs)(B.Fragment,{children:[(0,B.jsxs)("span",{className:"text-center",children:["This v0 Project has no"," ",(0,B.jsx)(er.Link,{href:"https://vercel.com/docs/projects/overview",external:!0,children:"Vercel Project"})," ","associated."]}),(0,B.jsx)(em.RbacTooltip,{show:!N,requiredRole:"V0Builder",children:(0,B.jsx)(ei.VercelProjectSelector,{currentProject:L,projects:D||[],v0ProjectId:j,readOnly:A})})]}),(0,B.jsxs)(B.Fragment,{children:[P.map((e,t)=>{let{key:n,alreadyExists:i}=e;return(0,B.jsx)("div",{className:"relative flex w-full",children:(0,B.jsxs)("div",{className:"w-full",children:[(0,B.jsxs)("label",{className:"text-xs font-medium text-gray-500",children:[n," ",i&&(0,B.jsx)("span",{children:"*"})]}),(0,B.jsx)(em.RbacTooltip,{show:!N,requiredRole:"V0Builder",children:(0,B.jsx)(eb,{messageId:r,index:t,value:f[n]||"",onChange:e=>m({...f,[n]:e.target.value}),placeholder:"Value",type:g[n]?"text":"password",required:!0,name:n,minLength:1,autoComplete:"off",autoCapitalize:"off",autoCorrect:"off",spellCheck:"false","data-lpignore":"true","data-1p-ignore":"true",disabled:A,size:"sm"})}),(0,B.jsx)(U.AnimatePresence,{children:f[n]&&(0,B.jsx)(et.Tooltip,{content:g[n]?"Hide":"Show",children:(0,B.jsx)(H.motion.button,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.1},type:"button",onClick:()=>v({...g,[n]:!g[n]}),className:"absolute right-2 top-8 text-gray-500",children:g[n]?(0,B.jsx)(Y.EyeOff,{size:14}):(0,B.jsx)($.Eye,{size:14})},n)})})]})},n)}),P.some(e=>{let{alreadyExists:t}=e;return t})&&(0,B.jsx)("span",{className:"text-xs text-gray-500",children:"* Environment variable already exists and will be updated."}),(0,B.jsxs)("span",{className:"flex items-center justify-between",children:[(0,B.jsx)("hr",{className:"border-border m-2 border-dashed py-2"}),(0,B.jsx)(em.RbacTooltip,{show:!N,requiredRole:"V0Builder",children:(0,B.jsx)(eu.SpinnerButton,{onClick:R,pending:x,disabled:A,type:"submit",size:"sm",children:"Submit"})})]})]})]},"value"),"cancelled"===k&&(0,B.jsx)(H.motion.div,{custom:b,variants:ev,initial:"enter",animate:"center",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"flex flex-col items-center",children:(0,B.jsx)("div",{className:"flex flex-col items-center text-center",children:(0,B.jsxs)("p",{className:"flex items-center gap-2",children:[(0,B.jsx)("span",{children:"Environment Variables Not Added"}),(0,B.jsx)(et.Tooltip,{content:(0,B.jsx)("ul",{children:n.map(e=>(0,B.jsx)("li",{className:"flex items-center space-x-1",children:(0,B.jsx)("span",{children:e})},e))}),children:(0,B.jsx)("span",{className:"text-gray-500",children:(0,B.jsx)(J.Information,{})})})]})})},"info")]}),(null==s?void 0:s.isAdminMode)?(0,B.jsxs)("span",{className:"text-xs text-gray-500",children:[(0,B.jsx)("span",{className:"font-medium",children:"Internal:"}),(0,B.jsxs)("p",{children:["Is most recent message:"," ",u?(0,B.jsx)("span",{children:"True"}):(0,B.jsx)("span",{children:"False"}),(0,B.jsx)("br",{}),(0,B.jsxs)("span",{children:["Is next message added env vars:"," ",h?(0,B.jsx)("span",{children:"True"}):(0,B.jsx)("span",{children:"False"})]}),(0,B.jsx)("br",{}),(0,B.jsxs)("span",{children:[" State: ",k]}),(0,B.jsx)("br",{}),(0,B.jsxs)("span",{children:[" Message ID: ",r]})]})]}):null]})}):(0,B.jsx)(q.Card,{className:"text-muted-foreground bg-muted w-full max-w-[360px] overflow-hidden shadow-sm","data-seg":"skip",children:(0,B.jsx)(q.CardContent,{className:"my-0 p-2",children:(0,B.jsx)(eo.Skeleton,{className:"h-[130px] w-full"})})})}function eb(e){let{messageId:t,index:n,...r}=e,i=(0,z.useRef)(null),[a,o]=(0,ed.useAtom)(ep);return(0,z.useEffect)(()=>{!a.has(t)&&i.current&&0===n&&(i.current.focus(),o(e=>new Set(e).add(t)))},[t,n,a,o]),(0,B.jsx)(W.Input,{ref:i,...r})}},918780,e=>{e.v({animate:"gauge-module__hRc8Aq__animate",arc:"gauge-module__hRc8Aq__arc",arcSecondary:"gauge-module__hRc8Aq__arcSecondary",circle:"gauge-module__hRc8Aq__circle",content:"gauge-module__hRc8Aq__content",fadeIn:"gauge-module__hRc8Aq__fadeIn"})},708306,272347,616593,e=>{"use strict";var t=e.i(832520),n=e.i(376346),r=e.i(762585),i=e.i(612336),a=e.i(24461);let o=(0,e.i(605528).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M5.51324 3.62367L3.76375 8.34731C3.61845 8.7396 3.24433 8.99999 2.826 8.99999H0.75H0V7.49999H0.75H2.47799L4.56666 1.86057C4.88684 0.996097 6.10683 0.988493 6.43776 1.84891L10.5137 12.4463L12.2408 8.1286C12.3926 7.74894 12.7604 7.49999 13.1693 7.49999H15.25H16V8.99999H15.25H13.5078L11.433 14.1868C11.0954 15.031 9.8976 15.023 9.57122 14.1744L5.51324 3.62367Z" fill="currentColor"/>');e.s(["ChartActivity",0,o],272347);var s=t,l=e.i(200407),c=e.i(7284),u=e.i(918780);let d={0:"hsl(var(--red-600))",50:"hsl(var(--amber-600))",90:"hsl(var(--green-600))"},p={tiny:20,small:32,medium:64,large:128},h={tiny:3,small:2,medium:1,large:1},f=100;function m(e){let{colors:t=d,value:n,placeholder:r,className:i,arcPriority:a="primary",style:o,size:m,deprecatedSize:g,children:v,showValue:x=!1,...y}=e,b=r||!1,w=void 0!==g?g:p[m],[j,C]=(0,l.useMemo)(()=>{if("primary"in t)return[t.primary,t.secondary];let e=Object.keys(t).map(Number);if(0===e.length)return[void 0,void 0];let r=e.filter(e=>n>=e).pop();return[void 0!==r?t[r]:void 0,void 0]},[t,n]),{circleProps:k,circumference:S,offsetFactor:N,segmentGap:E,primaryStrokePercent:M,secondaryStrokePercent:I}=(0,l.useMemo)(()=>{let e=w<=p.tiny?15:10,t=2*Math.PI*(f/2-e/2),r=f/t,i={cx:f/2,cy:f/2,r:f/2-e/2,strokeWidth:e,strokeDashoffset:0,strokeLinecap:"round",strokeLinejoin:"round"},o=Math.round(e*r)+h[m];(0===n||n>=100)&&(o=0);let s=.5*("equal"===a),l=n-2*o*s,c=100-n-2*o*(1-s)-Math.max(1-l,0);return{circleProps:i,circumference:t,segmentGap:o,primaryStrokePercent:l,secondaryStrokePercent:c,offsetFactor:s}},[a,w,m,n]);return(0,s.jsxs)("div",{className:(0,c.clsx)(u.default.circle,i,{[u.default.animate]:!b}),"data-geist-progress-circle":"","data-version":"v1",style:{...o,"--circle-size":"".concat(f,"px"),"--circumference":S,"--percent-to-px":"".concat(S/100,"px"),"--gap-percent":E,"--offset-factor":N},...y,children:[(0,s.jsxs)("svg",{fill:"none",height:w,strokeWidth:"2",viewBox:"0 0 ".concat(f," ").concat(f),width:w,children:[(0,s.jsx)("circle",{style:{opacity:I<0||100===n?0:1,"--stroke-percent":I},...k,className:u.default.arcSecondary,stroke:C||"hsl(var(--alpha-400))"}),(0,s.jsx)("circle",{...k,className:u.default.arc,"data-geist-progress-circle-fg":"",stroke:j||"var(--geist-foreground)",style:{opacity:+(0!==n),"--stroke-percent":Math.min(100-E,M)}})]}),v||x?(0,s.jsx)("div",{className:u.default.content,children:v||(0,s.jsx)("div",{className:"text-[11px] font-medium text-gray-500",children:n})}):null]})}let g={firstContentfulPaint:[1.8,3],largestContentfulPaint:[2.5,4],totalBlockingTime:[200,600],cumulativeLayoutShift:[.1,.25]},v=(e,t)=>{let n=parseFloat(e);return n<t[0]?"good":n<t[1]?"needsImprovement":"poor"};function x(){return(0,t.jsxs)(n.Card,{className:"not-prose w-full max-w-lg shadow-sm",children:[(0,t.jsx)(n.CardHeader,{className:"flex p-3",children:(0,t.jsxs)(n.CardTitle,{className:"mx-0.5 flex flex-col gap-1 text-sm font-medium text-gray-800",children:[(0,t.jsx)("span",{children:"Lighthouse Report"}),(0,t.jsx)(r.Skeleton,{className:"h-4 w-16"})]})}),(0,t.jsxs)(n.CardContent,{className:"p-0",children:[(0,t.jsx)("div",{className:"grid grid-cols-1 gap-3 p-3 pt-0 sm:grid-cols-2",children:Array.from({length:4}).map((e,n)=>(0,t.jsxs)("div",{className:"bg-background-subtle flex items-center gap-3 rounded-[6px]  border p-2",children:[(0,t.jsx)(m,{value:0,size:"small",children:(0,t.jsx)(o,{className:"font-bold text-[hsl(var(--gray-500))]",size:18})}),(0,t.jsx)(r.Skeleton,{className:"h-4 w-16"})]},n))}),(0,t.jsxs)("div",{className:"flex flex-col border-t border-gray-200 p-3 text-gray-500",children:[(0,t.jsx)(w,{label:"First Contentful Paint",isLoading:!0,hasMutedBackground:!0}),(0,t.jsx)(w,{label:"Largest Contentful Paint",isLoading:!0}),(0,t.jsx)(w,{label:"Total Blocking Time",isLoading:!0,hasMutedBackground:!0}),(0,t.jsx)(w,{label:"Cumulative Layout Shift",isLoading:!0})]})]})]})}function y(e){let{data:r,href:o}=e;if(!r)return(0,t.jsx)(n.Card,{className:"not-prose w-full max-w-lg shadow-sm",children:(0,t.jsx)(n.CardContent,{className:"p-3",children:(0,t.jsxs)("div",{className:"bg-muted flex flex-col items-center justify-center rounded-[6px] p-8",children:[(0,t.jsx)("div",{className:"mb-4 rounded-full border border-red-200 bg-red-50 p-2 text-red-600",children:(0,t.jsx)(a.CrossCircle,{})}),(0,t.jsx)("h3",{className:"mb-2 font-medium text-gray-900",children:"Lighthouse Report Failed"}),(0,t.jsx)("p",{className:"max-w-96 text-center text-gray-500",children:"Something went wrong while analyzing the performance of the website. Please try again later."})]})})});let{categories:s,firstContentfulPaint:l,largestContentfulPaint:c,totalBlockingTime:u,cumulativeLayoutShift:d}=JSON.parse(decodeURIComponent(r));return(0,t.jsxs)(n.Card,{className:"not-prose w-full max-w-lg shadow-sm",children:[(0,t.jsx)(n.CardHeader,{className:"flex p-3",children:(0,t.jsxs)(n.CardTitle,{className:"mx-0.5 flex flex-col gap-1 text-sm font-medium text-gray-800",children:[(0,t.jsx)("span",{children:"Lighthouse Report"}),(0,t.jsxs)("a",{href:o,className:"flex items-center font-normal hover:opacity-70",children:[o,(0,t.jsx)(i.ArrowUpRightSmall,{})]})]})}),(0,t.jsxs)(n.CardContent,{className:"p-0",children:[(0,t.jsx)("div",{className:"grid grid-cols-1 gap-3 p-3 pt-0 sm:grid-cols-2",children:Object.entries(s).map(e=>{let[n,r]=e;return(0,t.jsxs)("div",{className:"bg-background-subtle flex items-center gap-3 rounded-[6px]  border p-2",children:[(0,t.jsx)(m,{value:100*r.score,size:"small",placeholder:!1,showValue:!0}),(0,t.jsx)("div",{className:"flex flex-col",children:(0,t.jsx)("p",{className:"text-[14px] font-medium leading-[20px]",children:r.title})})]},n)})}),(0,t.jsxs)("div",{className:"flex flex-col border-t border-gray-200 p-3",children:[(0,t.jsx)(w,{label:"First Contentful Paint",value:l.displayValue,thresholds:g.firstContentfulPaint,hasMutedBackground:!0}),(0,t.jsx)(w,{label:"Largest Contentful Paint",value:c.displayValue,thresholds:g.largestContentfulPaint}),(0,t.jsx)(w,{label:"Total Blocking Time",value:u.displayValue,thresholds:g.totalBlockingTime,hasMutedBackground:!0}),(0,t.jsx)(w,{label:"Cumulative Layout Shift",value:d.displayValue,thresholds:g.cumulativeLayoutShift})]})]})]})}let b=e=>{let{value:n}=e;return(0,t.jsx)("div",{className:"flex h-4 w-4 flex-row rounded-full p-1 ".concat("good"===n?"bg-green-100":"needsImprovement"===n?"bg-amber-100":"poor"===n?"bg-red-100":"bg-gray-100"),children:(0,t.jsx)("div",{className:"h-2 w-2 rounded-full ".concat("good"===n?"bg-green-600":"needsImprovement"===n?"bg-amber-600":"poor"===n?"bg-red-600":"bg-gray-400")})})};function w(e){let{label:n,value:i,thresholds:a,hasMutedBackground:o,isLoading:s=!1}=e;return(0,t.jsxs)("div",{className:"flex flex-row justify-between rounded-[6px] p-2 ".concat(o?"bg-muted":""),children:[(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,t.jsx)(b,{value:s?"skeleton":v(i,a)}),(0,t.jsx)("div",{className:"text-[14px] font-medium leading-[20px]",children:n})]}),(0,t.jsx)("div",{className:"text-[14px] leading-[20px] text-gray-500",children:s?(0,t.jsx)(r.Skeleton,{className:"h-4 w-10"}):i})]})}e.s(["LighthouseReportLoading",()=>x,"default",()=>y],708306);var j=t,C=e.i(978855),k=e.i(297239);function S(e){let{children:t,isLoading:n,seconds:r}=e,i=void 0===r?void 0:Math.floor(r),a=(0,k.useT)();return(0,j.jsx)(C.Thinking,{forceOpen:n,text:n?a("messages.thinking"):a("messages.thoughtFor")(i),isLoading:n,children:t})}e.s(["ThinkingTime",()=>S],616593)},243494,e=>{"use strict";var t=e.i(832520),n=e.i(176248),r=e.i(200407),i=e.i(323194),a=e.i(297239),o=e.i(765179);function s(){let{loginUrl:e}=(0,i.useSignInDialog)(),[o,s]=(0,r.useState)(!1),c=(0,a.useT)();if((0,i.useOAuthLoginEnabled)())return(0,t.jsx)(l,{});let u=(0,t.jsx)("a",{href:"/signup",onClick:t=>{t.preventDefault(),s("signup"),window.location.href="".concat(e,"&action=signup")},children:c("chatAuthButtons.signup")}),d=(0,t.jsx)("a",{href:e,onClick:()=>s("login"),children:c("chatAuthButtons.signin")});return(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(n.Button,{className:"h-7 rounded-md",asChild:!0,disabled:"login"===o,size:"sm",variant:"secondary",children:d}),(0,t.jsx)(n.Button,{className:"h-7 rounded-md",asChild:!0,disabled:"signup"===o,size:"sm",children:u})]})}function l(){let e=(0,a.useT)(),[i,s]=(0,r.useState)(!1);return(0,t.jsx)("div",{className:"flex gap-2",children:(0,t.jsx)(n.Button,{size:"sm",onClick:()=>{s(!0),(0,o.signIn)("vercel")},disabled:i,children:e("signInDialog.authConnect")})})}e.s(["ChatAuthButtons",()=>s])},695610,e=>{"use strict";e.s(["ScopeSwitcher",()=>V],695610);var t=e.i(832520),n=e.i(200407),r=e.i(556355),i=e.i(176248),a=e.i(304649),o=e.i(667660),s=e.i(543146),l=e.i(9651),c=e.i(762585),u=e.i(595722),d=e.i(966848),p=e.i(827728),h=e.i(783069);e.i(904347);var f=e.i(37737),m=e.i(929910),g=e.i(915153),v=t,x=n,y=a,b=r,w=e.i(716360),j=e.i(596359),C=e.i(292273),k=e.i(480118),S=e.i(691175),N=e.i(707827),E=e.i(53223),M=u,I=m,D=g;function T(e){let{onRequestAccess:t,onUpgradeTeam:n,user:r,scope:i,onSelect:a,isCurrentlyActive:o,className:s,suspense:l}=e,[c,u]=(0,x.useTransition)(),d=(0,k.useRouter)(),p=(0,S.isAuthenticationRequired)(i),h=p&&(0,S.isScopeLimitedOnlyByMfa)(i),{scopeMembershipRole:f,isLoading:m,hasV0Seat:g,accessRequested:T,scopeSlug:A,scopePlan:L}=(0,D.useExtraScopeProperties)({scope:i,user:r,suspense:l}),P=e=>"".concat(i.id,"-").concat(e),R=(0,x.useMemo)(()=>o?"check":p?"locked":c?"loading":null,[o,p,c]),_=(0,x.useCallback)(e=>(e.preventDefault(),p)?h?void(0,S.redirectToTwoFactorRequired)({slug:A,push:d.push}):void(0,S.redirectToLoginToMissingScope)({slug:A,push:d.push}):g?void u(()=>a(i)):void("OWNER"===f?"v0-enterprise"===L?d.push("https://vercel.com/".concat(A,"/~/settings/members")):((0,E.track)("OpenTeamUpgradeModal",{teamId:i.id}),n(i)):T||((0,E.track)("OpenRequestAccessModal",{teamId:i.id}),t(i))),[p,g,f,T,h,A,d,a,i,L,n,t]),O=(0,I.doesUserHaveV0Seat)(i,r);return!m||O||p||"OWNER"===f?r&&(p||L||O||"OWNER"===f)?(0,v.jsx)("div",{"data-loading":c,className:(0,y.cn)("relative flex h-[44px] cursor-pointer items-center justify-between transition-opacity duration-150",s),children:(0,v.jsx)(b.DropdownMenuItem,{className:"bg-background-subtle h-[44px] cursor-pointer",disabled:T,onSelect:_,children:(0,v.jsx)(M.ScopeItemContent,{scope:i,user:r,children:(0,v.jsxs)(w.AnimatePresence,{mode:"wait",children:["locked"===R?(0,v.jsx)(I.PresenceIcon,{children:(0,v.jsx)(C.LockClosed,{})},P("locked")):null,"check"===R?(0,v.jsx)(I.PresenceIcon,{children:(0,v.jsx)(j.Check,{})},P("check")):null,"loading"===R?(0,v.jsx)(I.PresenceIcon,{children:(0,v.jsx)(N.Spinner,{size:16})},P("loading")):null]})})})}):null:(0,v.jsx)(M.ScopeItemContentSkeleton,{variant:"list-item"})}var A=e.i(908494),L=e.i(32170),P=e.i(242759),R=e.i(729602),_=e.i(183673),O=e.i(906261),F=e.i(297239);function V(e){let{className:s,variant:l}=e,{scopes:g,activeScope:v,setActiveScope:x,isActiveScopeReady:y,user:b}=(0,o.useActiveScopeLocalStorage)(),{expectUser:w}=(0,L.useUser)(),[j]=(0,p.useDebounceValue)(v,300),C=null!=j?j:v,k=(0,n.useMemo)(()=>g?(0,h.toSorted)(g,(e,t)=>(e.id===(null==C?void 0:C.id)?-1:0)-(t.id===(null==C?void 0:C.id)?-1:0)):[],[g,null==C?void 0:C.id]),S=(0,F.useT)(),N=(0,R.useChatId)(),{projectId:E}=(0,_.useProjectId)(),M=(0,n.useRef)(null),[I,D]=(0,n.useState)(!1),A=e=>!!y&&e===(null==C?void 0:C.id),P=(0,n.useCallback)(e=>{D(!1),(0,f.openDialog)({type:"requestAccess",data:{slug:e.slug,name:e.name||e.slug}})},[D,f.openDialog]),V=(0,n.useCallback)(async e=>{await x(e,{currentChatId:N,currentProjectId:E}),D(!1)},[x,N,E]),z=(0,n.useCallback)(e=>{D(!1),(0,f.openDialog)({type:"upgradeTeam",data:{id:e.id,name:e.name||e.slug,slug:e.slug}})},[D]),H=(0,n.useCallback)(()=>{D(!1),(0,f.openDialog)({type:"upgradePlan"})},[D]),U=(0,n.useMemo)(()=>k.filter(e=>(0,m.doesUserHaveV0Seat)(e,b)),[k,b]),q=(0,n.useMemo)(()=>(0,m.sortScopesByAccess)((0,m.sortScopesByName)(k.filter(e=>!(0,m.doesUserHaveV0Seat)(e,b)))),[k,b]),W=(0,t.jsx)(c.Skeleton,{className:(0,a.cn)("mx-2 my-1 h-6 w-35.25 rounded-lg",{"w-[60px] min-w-0 mx-0":"avatar-only"===l},s)});if(!w)return null;if(!v||!C||!b)return W;let Z=q.length>0,G=(0,O.isUserScope)(v);return(0,t.jsxs)(r.DropdownMenu,{modal:!0,open:I,onOpenChange:D,children:[(0,t.jsx)(r.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(i.Button,{ref:M,"aria-label":"Scope Switcher",className:(0,a.cn)("hover:bg-gray-150 focus-visible:bg-gray-150 data-[state=open]:bg-gray-150 active:bg-gray-150","relative h-8 min-h-8 gap-0 rounded-md pl-1.5! pr-0!","header"===l?"max-w-fit shrink grow basis-32":"w-fit",G&&"v0-level0"===b.v0plan?"min-w-32":"min-w-20",{"w-[60px] min-w-0":"avatar-only"===l},s),variant:"ghost",children:(0,t.jsx)(u.ScopeItemContent,{scope:v,user:b,trigger:!0,avatarOnly:"avatar-only"===l,skeleton:W})})}),(0,t.jsx)(r.DropdownMenuContent,{onCloseAutoFocus:e=>e.preventDefault(),onEscapeKeyDown:()=>setTimeout(()=>{var e;return null==(e=M.current)?void 0:e.focus()},0),align:"start",className:"w-[224px]",side:"top",sideOffset:8,children:(0,t.jsx)(B,{onUpgradeActiveScope:H,activeScope:C,user:b,children:(0,t.jsxs)(d.MenuGroup,{className:(0,a.cn)("gap-1 overflow-y-auto transition-opacity has-data-[loading=true]:pointer-events-none has-data-[loading=true]:opacity-70",Z?"max-h-[min(400px,calc(100vh-100px))]":"max-h-[min(375px,calc(100vh-100px))]"),children:[U.map(e=>(0,t.jsx)(T,{user:b,scope:e,isCurrentlyActive:A(e.id),onSelect:V,onRequestAccess:P,onUpgradeTeam:z,suspense:!1},"menu-item-".concat(e.id))),Z?(0,t.jsx)(r.DropdownMenuLabel,{className:"flex-none",children:S("sidebar.scopeSwitcher.otherTeams")}):null,q.map(e=>(0,t.jsx)(T,{user:b,scope:e,isCurrentlyActive:A(e.id),onSelect:V,onRequestAccess:P,onUpgradeTeam:z,suspense:!1},"menu-item-".concat(e.id)))]})})})]})}function B(e){let{activeScope:a,onUpgradeActiveScope:o,user:c,children:u}=e,{scopeSlug:p,scopePlan:h}=(0,g.useExtraScopeProperties)({scope:a,user:c}),{tbb:f}=(0,P.useFlags)(),m=(0,F.useT)(),v=(0,n.useMemo)(()=>{let e=!!h,t="v0-level0"===h,n="v0-platinum"===h,r=t||"v0-level3"===h||n;return{hasScope:e,isFree:t,isUltra:n,isIndividual:r}},[h]),x=(0,n.useMemo)(()=>v.hasScope&&v.isIndividual&&!v.isUltra&&(!f||v.isFree)?(0,t.jsx)(A.DropdownMenuItem,{className:"outline-hidden [&[data-highlighted]_button]:bg-gray-700",onSelect:o,children:(0,t.jsx)(i.Button,{size:"sm",className:"w-full rounded-lg",children:v.isFree?m("sidebar.scopeSwitcher.upgradeToPremium"):m("sidebar.scopeSwitcher.explorePlans")})}):null,[o,v,f]),y=(0,n.useMemo)(()=>{if(!h)return null;let e=v.isIndividual?null:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.LinkMenuItem,{label:m("sidebar.scopeSwitcher.teamBilling"),Icon:(0,t.jsx)(s.CreditCard,{}),sameTab:!1,href:"https://vercel.com/".concat(p,"/~/settings/invoices")}),(0,t.jsx)(d.LinkMenuItem,{label:m("sidebar.scopeSwitcher.manageMembers"),Icon:(0,t.jsx)(l.Users,{}),external:!0,sameTab:!1,href:"https://vercel.com/".concat(p,"/~/settings/members")})]});return x||e?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.DropdownMenuSeparator,{}),(0,t.jsxs)(d.MenuGroup,{children:[e,x]})]}):null},[v.isIndividual,h,p,x]);return(0,t.jsxs)(t.Fragment,{children:[u,y]})}},417860,e=>{"use strict";var t=e.i(346970),n=e.i(780292),r=e.i(37737);function i(){let{data:e,mutate:i}=(0,t.default)("sidebar-sheet-open",{fallbackData:!1}),a=(0,r.getDialogsAtoms)(),o=(0,n.useAtomValue)(a.dialogOpen);return{sheetOpen:e,setSheetOpen:i,actionChatId:(null==o?void 0:o.type)==="deleteChat"?o.data.chatId:null}}e.s(["useChatSidebar",()=>i])},535389,e=>{"use strict";var t=e.i(200407);function n(e,n){var r;let[i,a]=(0,t.useState)(null!=(r=null==n?void 0:n.showInitialBorders)&&r),[o,s]=(0,t.useState)(!1),l=(0,t.useRef)(null),c=(null==n?void 0:n.containerRef)||l,u=(0,t.useRef)(null),d=(0,t.useRef)(null);return((0,t.useEffect)(()=>{let e=c.current,t=u.current,r=d.current;if(!e||!t||!r)return;let i=null,o=null,l=setTimeout(()=>{var l;let c={root:e,threshold:null!=(l=null==n?void 0:n.threshold)?l:0};i=new IntersectionObserver(e=>{let[t]=e;a(!t.isIntersecting)},c),o=new IntersectionObserver(e=>{let[t]=e;s(!t.isIntersecting)},c),i.observe(t),o.observe(r)},100);return()=>{clearTimeout(l),i&&i.disconnect(),o&&o.disconnect()}},[c,null==n?void 0:n.threshold,...(null==n?void 0:n.dependencies)||[]]),"vertical"===e)?{showTopBorder:i,showBottomBorder:o,topRef:u,bottomRef:d,containerRef:c}:{showLeftBorder:i,showRightBorder:o,leftRef:u,rightRef:d,containerRef:c}}e.s(["useScrollBorders",()=>n])},903785,284492,e=>{"use strict";e.s(["NewChatButton",()=>F],903785);var t=e.i(832520),n=e.i(53223),r=e.i(472166),i=e.i(974980),a=e.i(512817),o=e.i(138471),s=e.i(176248),l=e.i(507037),c=e.i(200407),u=e.i(304649),d=e.i(297239);e.s(["SidebarContent",()=>S,"SidebarEmptyState",()=>_,"SidebarFooter",()=>N,"SidebarHeader",()=>k,"SidebarLabel",()=>M,"SidebarList",()=>I,"SidebarListContainer",()=>E,"SidebarListItem",()=>D,"SidebarListItemAction",()=>P,"SidebarListItemButton",()=>L,"SidebarListItemLink",()=>A,"SidebarListSkeleton",()=>R],284492);var p=t,h=u,f=e.i(417860),m=e.i(135463),g=e.i(480118),v=l,x=e.i(535389),y=e.i(460265),b=e.i(762585),w=e.i(275215),j=e.i(726718);let C="flex flex-col items-stretch p-2";function k(e){let{className:t,...n}=e;return(0,p.jsx)("div",{className:(0,h.cn)(C,"gap-3",t),...n})}function S(e){let{className:t,...n}=e,{showTopBorder:r,showBottomBorder:i,containerRef:a,topRef:o,bottomRef:s}=(0,x.useScrollBorders)("vertical");return(0,p.jsxs)("div",{className:(0,h.cn)(C,"flex-1 overflow-y-auto border-y border-transparent transition-[border-color]",{"border-t-gray-200":r},"has-[.recents-skeleton]:border-b-gray-200",t),ref:a,...n,children:[(0,p.jsxs)("div",{className:"relative flex h-fit w-full flex-col gap-4",children:[(0,p.jsx)("div",{ref:o,className:"absolute inset-x-0 top-0 h-px w-full"}),n.children,(0,p.jsx)("div",{ref:s,className:"absolute inset-x-0 bottom-0 h-px w-full"})]}),(0,p.jsx)("div",{className:(0,h.cn)("from-muted via-muted/75 pointer-events-none absolute bottom-0 left-0 right-2 z-10 h-16 bg-linear-to-t transition-opacity",i?"opacity-100":"opacity-0")})]})}function N(e){let{className:t,...n}=e;return(0,p.jsx)("div",{className:(0,h.cn)(C,"gap-3 py-3",t),...n})}function E(e){let{className:t,...n}=e;return(0,p.jsx)("div",{className:(0,h.cn)("flex w-full min-w-0 flex-col items-stretch gap-0.5",t),...n})}function M(e){let{className:t,open:n,children:r,...i}=e,a=void 0!==n;return(0,p.jsxs)("h2",{className:(0,h.cn)("flex h-7.5 content-center gap-1 px-2 text-[0.8125rem] font-medium text-gray-500",a&&"w-full cursor-pointer select-none justify-between transition-colors hover:text-gray-900",t),...i,children:[r,a&&(0,p.jsx)(y.ChevronRightSmall,{className:(0,h.cn)("h-4 w-4 translate-y-px",{"rotate-90 transition-transform":n})})]})}function I(e){let{className:t,...n}=e;return(0,p.jsx)("ul",{className:(0,h.cn)("flex w-full min-w-0 flex-col gap-0.5",t),...n})}function D(e){let{className:t,...n}=e;return(0,p.jsx)("li",{className:(0,h.cn)("hover:bg-alpha-200 has-data-[current=true]:bg-alpha-200 has-data-[state=open]:bg-alpha-200 focus-within:bg-alpha-200 active:bg-alpha-200 group relative flex h-8 list-none items-center rounded-md text-gray-600","has-[button:disabled]:pointer-events-none has-[button:disabled]:opacity-50",t),...n})}let T="focus-visible:ring-offset-background rounded-md group-has-[.item-action]:pr-8 flex [&_svg]:shrink-0 [&_div]:truncate [&_span]:truncate min-w-0 items-center justify-center gap-2 whitespace-nowrap flex size-full min-w-0 items-center justify-start gap-2 px-2 text-sm font-normal outline-hidden text-gray-600 focus-within:text-gray-900 hover:text-gray-900 focus:text-gray-900 group-hover:text-gray-900 data-[current=true]:text-gray-900 ring-blue-600 focus-visible:ring-2 focus-visible:ring-offset-1";function A(e){var t,n;let{className:r,asChild:i=!1,href:a,children:o,unavailable:s,noActive:l,onMouseDownNavigate:c=!1,...u}=e,{setSheetOpen:d}=(0,f.useChatSidebar)(),x=(0,g.usePathname)(),y="/".concat(null!=(t=(0,j.getTopLevelPathFromPathname)(x))?t:""),b="/chat".concat(y),C=[...null!=(n=u.altmatches)?n:[],a],{stopPeekingForced:k}=(0,w.getSidebarActions)("skeleton"),S=C.includes(y)||C.includes(b)||C.includes(x),N=i?m.Slot:s?"a":v.PrefetchLinkAndRefreshOnHover;return(0,p.jsx)(N,{className:(0,h.cn)(T,s&&"pointer-events-none",r),"data-current":S&&!l,href:a,onClick:()=>{(0,j.getChatIdFromPathname)(a)||k({onlyOnCollapsed:!0}),d(!1)},onMouseDownNavigate:c,...u,children:o})}function L(e){let{className:t,children:n,onClick:r,...i}=e,{setSheetOpen:a}=(0,f.useChatSidebar)();return(0,p.jsx)("button",{className:(0,h.cn)(T,t),onClick:e=>(null==r||r(e),a(!1)),...i,children:n})}function P(e){let{className:t,...n}=e,{setOpenedDropdown:r}=(0,w.getSidebarActions)("skeleton");return(0,p.jsx)(m.Slot,{className:(0,h.cn)("[@media(pointer:coarse)]:opacity-100 item-action hover:bg-alpha-200 data-[state=open]:bg-alpha-200 focus-visible:bg-alpha-200 active:bg-alpha-200 absolute right-2 size-5 rounded-sm bg-transparent text-gray-600 opacity-0 transition-all hover:text-gray-900 focus:text-gray-900 focus-visible:opacity-100 group-focus-within:opacity-100 group-hover:opacity-100 group-has-data-[current=true]:opacity-100 data-[state=open]:opacity-100",t),onClick:e=>{var t;r(!0),null==(t=n.onClick)||t.call(n,e)},...n})}function R(e){let{length:t,className:n,...r}=e;return 0===t?(0,p.jsx)(_,{children:(0,p.jsx)(b.Skeleton,{className:(0,h.cn)("h-7 w-full",n)})}):(0,p.jsx)("div",{className:(0,h.cn)("flex w-full min-w-0 flex-col gap-0.5",n),...r,children:Array.from({length:t}).map((e,t)=>(0,p.jsx)("div",{className:"flex h-8 w-full items-center justify-start px-2",children:(0,p.jsx)("div",{className:"bg-alpha-300 h-5 w-(--width) animate-pulse rounded-md",style:{"--width":["80%","100%","90%","70%","100%","80%","40%"][t%7]}})},t))})}function _(e){let{className:t,...n}=e;return(0,p.jsx)("div",{className:(0,h.cn)("mx-2 h-16 content-center rounded-lg border border-dashed px-8 text-center text-xs text-gray-500",t),...n})}var O=e.i(667660);let F=(0,c.forwardRef)(function(e,p){let{variant:h="text",className:f,buttonVariant:m,onButtonClick:g,...v}=e,x=(0,d.useT)(),{stopLlmResponse:y}=(0,r.useV0Chat)(),{hasWritePermission:b}=(0,O.useActiveScope)(),w=void 0!==v.disabled?v.disabled:!b,j=(0,c.useCallback)(e=>{if(w)return void e.preventDefault();y(),(0,n.track)("ClickNewChat"),null==g||g()},[w,y,g]);return"logo"===h||"logo-sm"===h?(0,t.jsx)(s.Button,{asChild:!0,className:(0,u.cn)("border-none hover:bg-transparent focus:bg-transparent focus-visible:bg-transparent has-[>svg]:p-0 [&>svg]:size-8","logo-sm"===h?"[&>svg]:w-7":"size-8",f),variant:"ghost",disabled:w,ref:p,...v,children:(0,t.jsxs)(l.PrefetchLinkAndRefreshOnHover,{"data-testid":"header-logo",href:"/",onClick:j,onMouseDownNavigate:!w,children:[(0,t.jsx)(i.Logo,{"aria-hidden":!0}),(0,t.jsx)("span",{className:"sr-only",children:x("newChatButton.newChat")})]})}):"v3-logo"===h?(0,t.jsx)(s.Button,{asChild:!0,className:(0,u.cn)("size-8 w-auto rounded-md py-1.5 has-[>svg]:px-1 [&>svg]:size-7",f),size:"sm",variant:"ghost",disabled:w,ref:p,...v,children:(0,t.jsxs)(l.PrefetchLinkAndRefreshOnHover,{"data-testid":"header-logo",href:"/",onClick:j,onMouseDownNavigate:!w,children:[(0,t.jsx)(i.Logo,{"aria-hidden":!0,className:"size-10 translate-x-[-0.5px]"}),(0,t.jsx)("span",{className:"sr-only",children:x("newChatButton.newChat")})]})}):"icon"===h?(0,t.jsx)(s.Button,{asChild:!0,className:(0,u.cn)("hover:bg-gray-150 size-8 shadow-[0px_1px_2px_0px_hsla(0,0%,0%,0.04)] has-[>svg]:px-0",f),tooltip:{side:"right",content:x("newChatButton.newChat"),sideOffset:8},variant:"secondary",disabled:w,ref:p,...v,children:(0,t.jsxs)(l.PrefetchLinkAndRefreshOnHover,{href:"/chat",onClick:j,onMouseDownNavigate:!w,children:[(0,t.jsx)("span",{"aria-hidden":!0,children:(0,t.jsx)(o.Plus,{})}),(0,t.jsx)("span",{className:"sr-only",children:x("newChatButton.newChat")})]})}):"ghost"===h?(0,t.jsx)(s.Button,{asChild:!0,className:(0,u.cn)("size-7 rounded-md",f),tooltip:x("newChatButton.newChat"),variant:"ghost",size:"sm",disabled:w,ref:p,...v,children:(0,t.jsx)(l.PrefetchLinkAndRefreshOnHover,{href:"/chat",onClick:j,onMouseDownNavigate:!w,children:(0,t.jsx)(o.Plus,{})})}):"sidebar"===h?(0,t.jsx)(s.Button,{asChild:!0,variant:"secondary",className:(0,u.cn)("border-none shadow-sm",f),size:"sm",disabled:w,ref:p,...v,children:(0,t.jsx)(l.PrefetchLinkAndRefreshOnHover,{className:"flex flex-row items-center gap-2.5",href:"/chat",onClick:j,onMouseDownNavigate:!w,children:(0,t.jsx)("span",{children:x("newChatButton.newChat")})})}):"pencil"===h?(0,t.jsx)(s.Button,{asChild:!0,variant:"secondary",size:"sm",className:(0,u.cn)("size-7 rounded-md",f),disabled:w,ref:p,...v,children:(0,t.jsx)(l.PrefetchLinkAndRefreshOnHover,{className:"flex flex-row items-center gap-2.5",href:"/chat",onClick:j,onMouseDownNavigate:!w,children:(0,t.jsx)(a.PencilEdit,{size:14})})}):"sidebar-item"===h?(0,t.jsx)(D,{children:(0,t.jsxs)(A,{href:"/chat",onClick:j,children:[(0,t.jsx)(o.Plus,{}),(0,t.jsx)("span",{children:x("newChatButton.newChat")})]})}):"collapsible"===h?(0,t.jsx)(s.Button,{asChild:!0,className:(0,u.cn)("collapsed:w-8 hover:bg-gray-150 focus:bg-gray-150 focus-visible:bg-gray-150 bg-background transition-sidebar relative h-8 w-full overflow-hidden border-none px-2 text-gray-900 shadow-sm",f),size:"sm",disabled:w,ref:p,...v,children:(0,t.jsx)(l.PrefetchLinkAndRefreshOnHover,{href:"/chat",onClick:j,onMouseDownNavigate:!w,children:(0,t.jsxs)("div",{className:"collapsed:left-0 collapsed:translate-x-2 transition-sidebar absolute inset-2 left-[calc((var(--sidebar-width)-128px)/2)] flex w-fit items-center justify-center gap-2 whitespace-nowrap",children:[(0,t.jsx)("div",{className:"collapsed:opacity-100 transition-sidebar opacity-0 ease-in-out",children:(0,t.jsx)(o.Plus,{})}),(0,t.jsx)("span",{children:x("newChatButton.newChat")})]})})}):(0,t.jsx)(s.Button,{asChild:!0,className:f,size:"sm",variant:m,disabled:w,ref:p,...v,children:(0,t.jsx)(l.PrefetchLinkAndRefreshOnHover,{href:"/chat",onClick:j,onMouseDownNavigate:!w,children:x("newChatButton.newChat")})})});F.displayName="NewChatButton"},218234,e=>{"use strict";e.s(["HeaderLogoButton",()=>o]);var t=e.i(832520),n=e.i(304649),r=e.i(903785),i=e.i(32170),a=e.i(275215);function o(e){let{preventPeek:o=!1,className:s,...l}=e,{expectUser:c}=(0,i.useUser)(),{startPeeking:u,stopPeeking:d,stopPeekingForced:p}=(0,a.getSidebarActions)("skeleton");return c?(0,t.jsx)("div",{onMouseEnter:o?void 0:u,onMouseLeave:o?void 0:d,className:(0,n.cn)("flex",s),children:(0,t.jsx)(r.NewChatButton,{onClick:()=>p({onlyOnCollapsed:!0}),variant:"v3-logo",className:"border-0",disabled:!1,...l})}):null}},863323,e=>{"use strict";e.s(["HeaderSidebarMobileTrigger",()=>l]);var t=e.i(832520),n=e.i(304649),r=e.i(417860),i=e.i(176248),a=e.i(903785),o=e.i(485952),s=e.i(32170);function l(e){let{className:l,...c}=e,{setSheetOpen:u}=(0,r.useChatSidebar)(),{expectUser:d}=(0,s.useUser)();return d?(0,t.jsxs)(i.Button,{className:(0,n.cn)("size-7 rounded-md sm:hidden",l),size:"sm",variant:"ghost",id:"sidebar-trigger",onClick:()=>u(!0),...c,children:[(0,t.jsx)(o.AlignmentLeft,{className:"size-4 shrink-0"}),(0,t.jsx)("span",{className:"sr-only",children:"Show Menu"})]}):(0,t.jsx)(a.NewChatButton,{variant:"logo-sm",className:l})}},411513,e=>{"use strict";e.s(["ChatAndProjectBreadcrumb",()=>m]);var t=e.i(832520),n=e.i(491341),r=e.i(584497);e.i(904347);var i=e.i(37737),a=e.i(92479),o=e.i(297239),s=e.i(996174),l=e.i(605528),c=e.i(612336),u=e.i(365290),d=e.i(296046),p=e.i(758118),h=e.i(973817),f=e.i(32170);function m(){let e=(0,d.useIsChatPage)(),{title:o,project:s,ownerId:l}=(0,r.useChatMetadata)(),{chatPrivacy:m}=(0,r.useChatPrivacy)(),v=o===(null==s?void 0:s.name),{chatId:x}=(0,a.useChatId)(),{user:y}=(0,f.useUser)(),b=()=>{x&&(0,i.openDialog)({type:"updateChatTitle",data:{chatId:x}})};if(!e||!x)return null;let w=(null==y?void 0:y.teamId)&&y.teamId===l||(null==y?void 0:y.id)===l,j=!!o;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.HeaderSlash,{className:"hidden sm:block",style:{...(0,p.visibleStylesIf)(j),...(0,u.transitionStyles)(["opacity"])}}),(0,t.jsx)("div",{className:"flex items-center pl-2 overflow-hidden",style:{...(0,p.visibleStylesIf)(j),...(0,u.transitionStyles)(["opacity"])},children:(0,t.jsxs)("div",{className:"flex flex-col overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)("button",{onClick:b,className:"text-label-13 font-medium text-gray-900 hover:underline truncate",children:o}),(0,t.jsx)(g,{privacy:m})]}),s&&w?(0,t.jsxs)(n.default,{href:"/chat/projects/".concat(s.projectId),className:"group text-label-12 text-gray-500 flex hover:underline gap-0.5 hover:text-gray-700 truncate",children:[(0,t.jsx)("span",{children:v?"View Project":s.name}),(0,t.jsx)(c.ArrowUpRightSmall,{className:"opacity-0 group-hover:opacity-100 group-hover:transform-[translate(0px,0px)] transform-[translate(-2px,2px)]",style:{...(0,u.transitionStyles)(["opacity","transform"])}})]}):null]})})]})}function g(e){let{privacy:n}=e,r=(0,o.useT)();if(!n)return null;let i=w[n];return(0,t.jsx)(s.Tooltip,{content:r("chatPrivacy.label.".concat(n)),children:(0,t.jsx)("div",{className:"size-5 bg-gray-200 text-gray-500 rounded-full flex items-center justify-center cursor-pointer",children:(0,t.jsx)(i,{})})})}let v=(0,l.withNewIcon)('\n<path d="M8 3C9.65685 3 11 4.34315 11 6V7H12V11.5C12 12.3284 11.3284 13 10.5 13H5.5L5.34668 12.9922C4.59028 12.9154 4 12.2767 4 11.5V7H5V6C5 4.34315 6.34315 3 8 3ZM5.5 11.5H10.5V8.5H5.5V11.5ZM8 4.5C7.17157 4.5 6.5 5.17157 6.5 6V7H9.5V6C9.5 5.17157 8.82843 4.5 8 4.5Z" fill="currentColor"/>\n'),x=(0,l.withNewIcon)('\n<path d="M5.5105 7.06348L4.99292 7.58203C4.14234 8.43294 4.14227 9.81221 4.99292 10.6631C5.84388 11.514 7.22399 11.514 8.07495 10.6631L8.59253 10.1455L9.65308 11.2061L9.1355 11.7236C7.69875 13.1604 5.36912 13.1604 3.93237 11.7236C2.49584 10.2869 2.4957 7.95718 3.93237 6.52051L4.44995 6.00293L5.5105 7.06348ZM9.91187 6.80469L6.80542 9.91113L5.74487 8.85059L8.85132 5.74414L9.91187 6.80469ZM6.52124 3.93262C7.95798 2.49587 10.2876 2.49587 11.7244 3.93262C13.1608 5.36938 13.161 7.69909 11.7244 9.13574L11.2068 9.65332L10.1462 8.59277L10.6638 8.07422C11.5144 7.22333 11.5144 5.84404 10.6638 4.99316C9.81286 4.14221 8.43275 4.14221 7.58179 4.99316L7.06421 5.51074L6.00366 4.4502L6.52124 3.93262Z" fill="currentColor"/>\n'),y=(0,l.withNewIcon)('\n<path d="M8 3C10.7614 3 13 5.23858 13 8C13 10.7614 10.7614 13 8 13C5.23858 13 3 10.7614 3 8C3 5.23858 5.23858 3 8 3ZM7.2373 8.59961C7.28026 9.5702 7.42798 10.5368 7.67969 11.4834C7.78524 11.493 7.89195 11.5 8 11.5C8.10805 11.5 8.21476 11.493 8.32031 11.4834C8.57203 10.5368 8.71974 9.57022 8.7627 8.59961H7.2373ZM4.55176 8.59961C4.7379 9.67763 5.41692 10.5863 6.34863 11.0859C6.17314 10.2654 6.07006 9.4336 6.03613 8.59961H4.55176ZM9.96484 8.59961C9.93093 9.43331 9.82674 10.2647 9.65137 11.085C10.5829 10.5853 11.2621 9.67748 11.4482 8.59961H9.96484ZM9.65137 4.91406C9.82684 5.73461 9.93094 6.56637 9.96484 7.40039H11.4482C11.2621 6.32237 10.5831 5.41369 9.65137 4.91406ZM6.34863 4.91309C5.41671 5.41267 4.73792 6.32221 4.55176 7.40039H6.03613C6.07005 6.56608 6.17304 5.73391 6.34863 4.91309ZM8 4.5C7.89198 4.5 7.78521 4.50605 7.67969 4.51562C7.4278 5.46247 7.28031 6.4295 7.2373 7.40039H8.7627C8.71968 6.4294 8.57126 5.46256 8.31934 4.51562C8.21413 4.50611 8.10769 4.5 8 4.5Z" fill="currentColor"/>\n'),b=(0,l.withNewIcon)('\n<path d="M11.5122 13.1475C11.5045 13.1992 11.4946 13.2446 11.4858 13.2822C11.4942 13.244 11.5006 13.1981 11.5083 13.1465L11.5122 13.1475ZM11.9692 8.9502C12.6895 9.37127 13.2938 10.0493 13.4536 11.002C13.5125 11.3531 13.5093 11.7696 13.4976 12.0625C13.4914 12.2162 13.4818 12.3515 13.4741 12.4482C13.4703 12.4965 13.4669 12.5357 13.4644 12.5635C13.4631 12.5773 13.4622 12.5888 13.4614 12.5967C13.461 12.6006 13.4607 12.6041 13.4604 12.6064L13.4595 12.6094L13.3892 13.2822H11.4995L11.521 13.0762C11.5213 13.0729 11.5226 13.0697 11.5229 13.0664C11.5235 13.0612 11.5239 13.0517 11.5239 13.0508C11.525 13.0395 11.5264 13.0299 11.5269 13.0244C11.5273 13.019 11.5277 13.0129 11.5278 13.0107V13.0078C11.5314 12.9692 11.5354 12.9208 11.5396 12.8682C11.5483 12.7584 11.5605 12.5984 11.5679 12.4141C11.5742 12.2552 11.5801 12.0326 11.5728 11.7822H12.0005C12.0022 11.5815 11.9975 11.3897 11.9741 11.25C11.9113 10.8755 11.6929 10.5651 11.3335 10.3223L11.9692 8.9502ZM6.67139 8.34277C7.47314 8.34283 8.33005 8.53304 9.04053 8.94824C9.76083 9.36932 10.3651 10.0473 10.5249 11C10.5838 11.3511 10.5806 11.7677 10.5688 12.0605C10.5627 12.2143 10.5531 12.3495 10.5454 12.4463C10.5416 12.4946 10.5382 12.5338 10.5356 12.5615C10.5343 12.5754 10.5335 12.5868 10.5327 12.5947C10.5323 12.5986 10.532 12.6022 10.5317 12.6045C10.5316 12.6055 10.5309 12.6067 10.5308 12.6074V12.6084L10.4604 13.2803H2.6167L2.54346 12.6123V12.6104C2.54337 12.6096 2.54262 12.6086 2.54248 12.6074C2.54223 12.6051 2.54191 12.6015 2.5415 12.5977C2.54069 12.5898 2.5399 12.579 2.53857 12.5654C2.53585 12.5376 2.53188 12.4978 2.52783 12.4492C2.51974 12.3522 2.51012 12.2165 2.50342 12.0625C2.49069 11.7695 2.48632 11.3524 2.54541 11C2.70766 10.0327 3.32846 9.35424 4.06104 8.9375C4.78351 8.52661 5.65244 8.34279 6.45752 8.34277H6.67139ZM6.45752 9.84277C5.85972 9.84279 5.25688 9.98268 4.80225 10.2412C4.35789 10.4941 4.09475 10.8318 4.0249 11.248C4.00155 11.3873 3.99713 11.5791 3.99951 11.7803H9.07178C9.07349 11.5795 9.06884 11.3878 9.04541 11.248C8.97582 10.8331 8.7157 10.4957 8.28369 10.2432C7.84184 9.98496 7.25623 9.84283 6.67139 9.84277H6.45752ZM6.55518 2.71777C7.91857 2.71784 9.02393 3.82311 9.02393 5.18652C9.02393 6.54993 7.91857 7.6552 6.55518 7.65527C5.19178 7.65521 4.08643 6.54994 4.08643 5.18652V5.03027C4.08643 3.75316 5.12182 2.71784 6.39893 2.71777H6.55518ZM9.86475 2.72852C11.0365 2.84152 11.9526 3.83089 11.9526 5.03223V5.34473C11.9526 6.50093 11.1039 7.45883 9.99561 7.62988V6.07422C10.2659 5.94227 10.4526 5.66576 10.4526 5.34473V5.03223C10.4526 4.6681 10.2134 4.35913 9.8833 4.25586L9.86475 2.72852ZM6.39893 4.21777C5.95025 4.21784 5.58643 4.58158 5.58643 5.03027V5.18652C5.58643 5.72151 6.02021 6.15521 6.55518 6.15527C7.09014 6.1552 7.52393 5.72151 7.52393 5.18652C7.52393 4.65154 7.09014 4.21784 6.55518 4.21777H6.39893Z" fill="currentColor"/>\n'),w={private:v,team:b,"team-edit":b,unlisted:x,public:y}},396211,948288,876961,255706,849183,e=>{"use strict";e.s(["HeaderFeedbackButton",()=>l],396211);var t=e.i(832520),n=e.i(176248),r=e.i(200407),i=e.i(304649),a=e.i(86448);e.i(904347);var o=e.i(37737),s=e.i(297239);function l(e){let{className:l,icon:c=!1,...u}=e,d=(0,s.useT)(),p=(0,r.useCallback)(()=>{(0,o.openDialog)({type:"feedback"})},[]);return(0,t.jsx)(n.Button,{variant:c?"ghost":"secondary",className:(0,i.cn)("rounded-md",c?"size-7 text-gray-600":"hidden h-7 sm:flex px-2",l),size:"sm",onClick:p,...u,children:c?(0,t.jsx)(a.Question,{}):d("sidebar.userMenu.feedback")})}e.s(["HeaderUpgradeButton",()=>w],948288);var c=t,u=n,d=r,p=i,h=o,f=s,m=e.i(667660),g=e.i(780292),v=e.i(254211),x=e.i(906261),y=e.i(53223),b=e.i(675120);function w(e){let{className:t,transitionJustify:n="end",...r}=e,i=(0,f.useT)(),{showUpgrade:a}=j(),o=(0,d.useCallback)(()=>{(0,y.track)("ClickHeaderUpgradeButton"),(0,h.openDialog)({type:"upgradePlan"})},[]);return(0,c.jsx)(b.TransitionNode,{justify:n,delay:.2,duration:.4,renderKey:"".concat(a),children:a?(0,c.jsx)(u.Button,{variant:"secondary",className:(0,p.cn)("rounded-md h-7 hidden sm:flex px-2",t),size:"sm",onClick:o,...r,children:i("promptForm.upgradePlanMobile")}):null})}function j(){let{activeScope:e,user:t}=(0,m.useActiveScope)(),n=(0,x.isUserScope)(e)&&(null==t?void 0:t.v0plan)==="v0-level0",r=(0,v.getDurableRootAtoms)("root"),[i,a]=(0,g.useAtom)(r.shouldShowUpgrade);return(0,d.useEffect)(()=>{e&&a(n)},[e,n,a]),{showUpgrade:i}}e.s(["HeaderTitle",()=>T],876961);var C=t,k=e.i(480118),S=e.i(903785),N=e.i(726718),E=e.i(32170),M=i,I=r,D=s;function T(e){let{className:t}=e,n=(0,k.usePathname)(),r=(0,N.getTopLevelPathFromPathname)(n),{expectUser:i}=(0,E.useUser)(),a=(0,D.useT)(),o=(0,I.useMemo)(()=>{if(!r)return;let e=N.PATHS_TO_TITLE.get(r);return e?a(e):void 0},[r,a]),s=(0,I.useMemo)(()=>i?(0,C.jsx)(S.NewChatButton,{variant:"logo-sm",className:(0,M.cn)("sm:hidden",t),disabled:!1}):null,[i,t]);return"string"==typeof o?(0,C.jsx)("div",{className:(0,M.cn)("text-base font-medium sm:hidden",t),children:o}):s}var A=N,L=k;function P(){let e=(0,L.usePathname)();return(0,A.isDesignSystemsEditorPage)(e)}e.s(["useIsDesignSystemsEditorPage",()=>P],255706);var R=t,_=e.i(491341),O=i;let F=e=>{let{href:t,children:n,className:r,external:i}=e;return i?(0,R.jsx)("a",{href:t,className:(0,O.cn)("text-sm text-gray-500 hover:text-gray-900 focus-visible:ring-offset-background outline-hidden has-focus-visible:ring-2 ring-blue-600 transition focus-visible:ring-2 focus-visible:ring-offset-1 rounded-md",r),target:"_blank",rel:"noopener noreferrer",children:n}):(0,R.jsx)(_.default,{href:t,className:(0,O.cn)("text-sm text-gray-500 hover:text-gray-900 focus-visible:ring-offset-background outline-hidden has-focus-visible:ring-2 ring-blue-600 transition focus-visible:ring-2 focus-visible:ring-offset-1 rounded-md",r),children:n})};e.s(["HeaderLink",()=>F],849183)},969190,e=>{"use strict";var t=e.i(832520);function n(){return(0,t.jsx)("div",{className:"bg-amber-50 rounded-lg px-3 py-1",children:(0,t.jsx)("p",{className:"text-sm font-medium text-center",children:"This is a read-only service account. You will not be able to make changes to user data. All actions will be logged."})})}e.s(["ImpersonationBanner",()=>n])},990009,e=>{"use strict";e.s(["BaseHeaderWrapper",()=>w,"Header",()=>b]);var t=e.i(832520),n=e.i(243494),r=e.i(32170),i=e.i(805214),a=e.i(396211),o=e.i(948288),s=e.i(670786),l=e.i(296046),c=e.i(695610),u=e.i(876961),d=e.i(903785),p=e.i(726718),h=e.i(480118),f=e.i(218234),m=e.i(863323),g=e.i(973817),v=e.i(255706),x=e.i(849183),y=e.i(969190);function b(){let{expectUser:e,user:b}=(0,r.useUser)(),j=(0,h.usePathname)(),C=(0,l.useIsChatPage)(),k=(0,p.isHome)(j),S=j.startsWith("/user/"),N=j.split("/").pop(),E=(0,v.useIsDesignSystemsEditorPage)(),M=null==b?void 0:b.isImpersonation;return C||E?null:(0,t.jsxs)(w,{children:[(0,t.jsxs)("div",{className:"flex min-w-0 flex-1 items-center",children:[(0,t.jsx)(m.HeaderSidebarMobileTrigger,{className:"mr-1"}),e||!k?(0,t.jsx)(g.HeaderSlash,{className:"mr-1 sm:hidden"}):null,(0,t.jsx)(f.HeaderLogoButton,{preventPeek:!0,className:"mr-1 hidden sm:flex"}),(0,t.jsx)(u.HeaderTitle,{className:"ml-1"}),e&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g.HeaderSlash,{className:"hidden sm:block"}),(0,t.jsx)(c.ScopeSwitcher,{className:"hidden sm:flex",variant:"header"})]}),!e&&S&&(0,t.jsxs)("div",{className:"ml-1 flex items-center gap-1",children:[(0,t.jsx)(g.HeaderSlash,{className:"hidden sm:block"}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-900",children:N})]}),!e&&(0,t.jsxs)("div",{className:"ml-4 flex items-center gap-4 max-md:hidden",children:[(0,t.jsx)(x.HeaderLink,{href:"/enterprise",external:!0,children:"Enterprise"}),(0,t.jsx)(x.HeaderLink,{href:"/pricing",children:"Pricing"}),(0,t.jsx)(x.HeaderLink,{href:"/faq",external:!0,children:"FAQ"})]})]}),M&&(0,t.jsx)(y.ImpersonationBanner,{}),(0,t.jsx)("div",{className:"flex flex-1 items-center justify-end gap-1.5",children:e?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.HeaderUpgradeButton,{}),(0,t.jsx)(a.HeaderFeedbackButton,{}),(0,t.jsx)(s.HeaderCreditsButton,{}),!k&&(0,t.jsx)(d.NewChatButton,{className:"sm:hidden",variant:"pencil"}),(0,t.jsx)(i.HeaderUserMenu,{})]}):(0,t.jsx)(n.ChatAuthButtons,{})})]})}function w(e){let{children:n}=e;return(0,t.jsx)("header",{className:"@container/chat-header relative z-20 flex w-full shrink-0 items-center justify-between gap-4 px-3 h-[50px] sm:px-2",children:n})}},768061,938868,229983,606278,101387,480187,157357,128173,e=>{"use strict";e.s(["MANUAL_INTEGRATION",()=>q,"SUCCESS_INTEGRATION_STATUSES",()=>W,"default",()=>Z],768061);var t=e.i(832520),n=e.i(376346),r=e.i(176248),i=e.i(299313),a=e.i(779647),o=e.i(726988),s=e.i(200407),l=e.i(674523),c=e.i(762585),u=e.i(584497),d=e.i(324141),p=e.i(667660),h=e.i(491320),f=e.i(183673),m=e.i(66990),g=e.i(92479),v=e.i(520605);e.i(563948);var x=e.i(407562),y=e.i(472166),b=e.i(53223);e.s(["ChatHeader",()=>L,"IntlListFormatter",()=>P],938868);var w=t,j=e.i(32170),C=e.i(243494),k=e.i(620678),S=e.i(296046),N=e.i(695610),E=e.i(218234),M=e.i(863323),I=e.i(973817),D=e.i(411513),T=e.i(990009),A=e.i(969190);function L(){let{expectUser:e,user:t}=(0,j.useUser)(),n=(0,S.useIsChatPage)(),r=null==t?void 0:t.isImpersonation;if(!n)return null;let i=(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(E.HeaderLogoButton,{className:"hidden sm:mr-1 sm:flex"}),(0,w.jsx)(M.HeaderSidebarMobileTrigger,{className:"sm:mr-1"})]}),a=e?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(I.HeaderSlash,{}),(0,w.jsx)(N.ScopeSwitcher,{className:"hidden sm:flex",variant:"avatar-only"})]}):null,o=(0,w.jsx)(D.ChatAndProjectBreadcrumb,{});return(0,w.jsxs)(T.BaseHeaderWrapper,{children:[(0,w.jsxs)("nav",{className:"flex w-full min-w-0 flex-1 items-center",children:[i,a,o]}),r&&(0,w.jsx)("div",{className:"absolute inset-x-0 mx-auto flex justify-center",children:(0,w.jsx)(A.ImpersonationBanner,{})}),e?(0,w.jsx)(k.ChatHeaderActions,{}):(0,w.jsx)(C.ChatAuthButtons,{})]})}let P=new Intl.ListFormat("en",{style:"long",type:"conjunction"});var R=e.i(612161),_=j,O=e.i(323194),F=e.i(433743),V=e.i(906261),B=e.i(974980),z=e.i(434673),H=e.i(583965);e.i(168204);var U=e.i(225695);let q={id:"manual",name:"Add environment variables?",description:"Manually add environment variables",icon:"/placeholder.svg",slug:"manual"},W=["added_env_vars","connected_integration","applied_script","completed_action"];function Z(e){var w,j,C;let{messageId:k,category:S,namesProp:N,starter:E}=e,M=(0,s.useMemo)(()=>"string"==typeof N?[N]:N,[N]),I=(0,u.useChatMetadata)(),{chatId:D}=(0,g.useChatId)(),{isStreaming:T}=(0,g.useChatLoadingState)(),{activeForkKey:A}=(0,g.useChatMessages)(),{activeScope:L}=(0,p.useActiveScope)(),{refresh:W}=(0,H.useBrowserFrame)(),Z=(0,h.useDefaultTeam)(),G=null==(w=I.project)?void 0:w.vercelProjectId,{vercelProjectWithDashboard:K}=(0,f.useVercelProject)({v0ProjectId:null==(j=I.project)?void 0:j.projectId}),{stores:X}=(0,z.useAllTeamIntegrations)(),{submit:$}=(0,y.useV0Chat)(),{expectUser:Y}=(0,_.useUser)(),{setShowSignInDialog:J}=(0,O.useSignInDialog)(),[Q,ee]=(0,s.useState)({}),et=(e,t)=>{ee(n=>({...n,[e]:t}))},en=null==M?void 0:M.filter(e=>e&&l.RECOMMENDED_INTEGRATION_SLUGS.some(t=>t.toLowerCase()===e.toLowerCase())),er=en&&en.length>1,{connectedLinks:ei,refetchLinks:ea,isLoading:eo}=(0,v.useIntegrationLinks)({source:"add-integration",messageId:k},async e=>{var t;let n;if(et(e[0].integrationId,"none"),e.forEach(e=>{(0,b.track)("AddIntegration",{integrationSlug:e.integrationName,chatId:e.chatId||"",source:e.source})}),!er){switch(null==(t=e[0])?void 0:t.integrationName){case"Supabase":case"Neon":n="add-sql-db";break;case"Upstash for Redis":n="add-nonsql-store";break;case"Grok":case"Groq":case"DeepInfra":case"fal":n="add-ai";break;default:n=void 0}E&&(n="add-starter-integration"),W(),await $({action:"new",attachments:[],content:(0,U.createMDXMessageContent)("The integration".concat(e.length>1?"s":""," ").concat(P.format(e.map(e=>e.integrationName))," ").concat(e.length>1?"have":"has"," been added to the [Vercel Project](").concat(null==K?void 0:K.project.url,").")),type:"added-integration",workflowState:n,revalidateVercelEnvAndIntegrations:!0})}}),{integrations:es,isLoading:el,error:ec,refetch:eu}=(0,a.useIntegrationOptions)({integrationIds:l.RECOMMENDED_INTEGRATION_SLUGS,isEnabled:!0}),{stores:{data:{marketplaceStores:ed,nativeStores:ep},refetch:eh},isLoading:ef}=(0,o.useConnectedIntegrations)({vercelProjectId:null!=G?G:void 0,v0ProjectId:null==(C=I.project)?void 0:C.projectId,refreshInterval:0}),em=(0,s.useMemo)(()=>!G||ef?[]:[...ed.map(e=>{var t;return null==(t=e.product)?void 0:t.slug}).filter(Boolean),...ep.map(e=>e.type)],[ed,ef,G,ep]),eg=null==A?void 0:A.indexOf(k),ev=void 0!==eg&&eg<A.length-1,ex=(0,s.useMemo)(()=>el?[]:[...es.filter(e=>{let t=!(null==en?void 0:en.length)||en.some(t=>t&&l.INTEGRATION_SLUG_TO_NAME[t.toLowerCase()]===e.name),n=!S||!l.INTEGRATION_NAME_TO_CATEGORY[e.name]||l.INTEGRATION_NAME_TO_CATEGORY[e.name].includes(S.toLowerCase());return t&&n}),q],[el,es,en,S]),ey=(0,s.useMemo)(()=>el||!ei?[]:es.filter(e=>ei.some(t=>t.connected&&t.integrationId===e.id)),[es,ei,el]),eb=el||eo||void 0===ei,ew=(0,s.useMemo)(()=>eb?[]:ey.length>0?ey:ex,[ey,ex,eb]),ej=()=>{let e=[...ed.map(e=>e.product.name),...ep.map(e=>e.integrationName)].filter(e=>e in l.INTEGRATION_NAME_TO_SLUG);$({action:"new",attachments:[],content:(0,U.createMDXMessageContent)(0===e.length?"No integrations were added.":"The integration".concat(e.length>1?"s":""," ").concat(P.format(e)," ").concat(e.length>1?"have":"has"," been added to the Vercel Project.")),type:"added-integration",revalidateVercelEnvAndIntegrations:!0})},eC=async(e,t,n,r)=>{(0,b.track)("ClickAddIntegration",{integration:e}),et(e.slug,"linking_integration");try{if("blob"===e.slug){let t=await fetch("/chat/api/integrations/marketplace/storage/create-blob",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:"".concat(n.name,"-blob"),projectId:n.id})});if(!t.ok){var i;let n=await t.json();throw et(e.slug,"none"),Error(null!=(i=n.error)?i:"Failed to create blob store")}eh(),W(),x.toast.success("Blob storage connected successfully"),await $({action:"new",attachments:[],content:(0,U.createMDXMessageContent)("A blob store has been added to the [Vercel Project](".concat(null==K?void 0:K.project.url,").")),type:"added-integration",workflowState:"add-nonsql-store",revalidateVercelEnvAndIntegrations:!0}),(0,b.track)("AddIntegration",{integrationSlug:e.slug,chatId:D||"",source:"add-integration"});return}let a=l.POTENTIALLY_CONFLICTING_INTEGRATIONS.some(t=>t.has(e.slug)&&em.find(e=>t.has(e))),o=await (0,d.createAddIntegrationUrl)({integration:e,chatId:D||"",v0ProjectId:t||"",teamSlug:(0,V.isUserScope)(L)?Z||"":(null==L?void 0:L.slug)||"",dashboardProject:n,source:"add-integration",messageId:k,needPrefix:a});await ea(),r?r.location.href=o:window.open(o,"_blank")}catch(e){x.toast.error(e instanceof Error?e.message:"Failed to add integration")}},ek=!N||S?"supabase":N.length>0&&Array.isArray(N)&&N[0]in l.INTEGRATION_SLUG_TO_NAME&&l.INTEGRATION_SLUG_TO_NAME[N[0]]in l.INTEGRATION_NAME_TO_SVG?l.INTEGRATION_SLUG_TO_NAME[N[0]]:"supabase";if(!Y)return(0,t.jsx)(n.Card,{className:"max-w-[500px]","data-seg":"skip",children:(0,t.jsx)(n.CardContent,{className:"p-4",children:(0,t.jsx)("div",{className:"@container/add-integration space-y-4",children:(0,t.jsxs)("div",{className:"@[300px]/add-integration:flex-row @[300px]/add-integration:items-center @[300px]/add-integration:justify-between @[300px]/add-integration:space-y-0 flex flex-col space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-md border",children:ek?(0,t.jsx)(i.default,{src:l.INTEGRATION_NAME_TO_SVG[ek]||"/placeholder.svg",alt:ek,width:16,height:16}):(0,t.jsx)(B.Logo,{className:"h-full min-w-[25px] -translate-x-px"})}),(0,t.jsxs)("div",{className:"flex flex-col gap-0",children:[(0,t.jsx)("p",{className:"m-0 text-sm font-medium ",children:"Log in"}),(0,t.jsx)("p",{className:"m-0 text-xs text-gray-500",children:"You must be logged in to connect an integration."})]})]}),(0,t.jsx)(r.Button,{size:"sm",variant:"secondary",onClick:()=>J({content:!1}),children:"Login"})]})})})});let eS=()=>(null==N?void 0:N.length)?N.length+1:S?Object.entries(l.INTEGRATION_NAME_TO_CATEGORY).filter(e=>{let[t,n]=e;return n.toLowerCase()===S.toLowerCase()}).length+1:2,eN=(null==N?void 0:N.length)===2;return ec||eb?(0,t.jsx)(n.Card,{className:"max-w-[450px]","data-seg":"skip",children:(0,t.jsxs)(n.CardContent,{className:"p-4",children:[(0,t.jsx)("div",{className:"@container/add-integration space-y-4",children:Array.from({length:eb?eS():1}).map((e,n,i)=>(0,t.jsxs)(s.Fragment,{children:[(0,t.jsxs)("div",{className:"@[300px]/add-integration:flex-row @[300px]/add-integration:items-center @[300px]/add-integration:justify-between @[300px]/add-integration:space-y-0 flex flex-col space-y-3",children:[(0,t.jsx)("div",{className:"flex items-center gap-3",children:ec?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-md border",children:(0,t.jsx)(R.Stop,{className:"size-4 text-red-700!"})}),(0,t.jsxs)("div",{className:"flex flex-col gap-0",children:[(0,t.jsx)("p",{className:"m-0 text-sm font-medium ",children:"Error"}),(0,t.jsx)("p",{className:"m-0 text-xs text-gray-500",children:"Failed to fetch integration options."})]})]}):n===i.length-1?(0,t.jsx)(c.Skeleton,{className:"h-3.5 w-32"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.Skeleton,{className:"size-8 rounded-md"}),(0,t.jsxs)("div",{className:"my-[3px]",children:[(0,t.jsx)(c.Skeleton,{className:"mb-1.5 h-3.5 w-24"}),(0,t.jsx)(c.Skeleton,{className:"h-2.5 w-32"})]})]})}),ec?(0,t.jsx)(r.Button,{size:"sm",variant:"secondary",onClick:()=>eu(),children:"Retry"}):n===i.length-1?(0,t.jsx)(c.Skeleton,{className:"@[300px]/add-integration:w-8 h-8 rounded-md"}):(0,t.jsx)(c.Skeleton,{className:"@[300px]/add-integration:w-20 h-8 rounded-md"})]},n),n<i.length-1&&(0,t.jsx)(m.Separator,{className:"my-2"})]},n))}),eN&&(0,t.jsx)(c.Skeleton,{className:"mt-4 h-8 w-full"})]})}):(0,t.jsx)(n.Card,{className:"max-w-[450px] shadow-sm","data-seg":"skip",children:(0,t.jsx)(n.CardContent,{className:"p-4",children:(0,t.jsxs)("div",{className:"@container/add-integration space-y-4",children:[ew.map((e,n)=>{var a,o;let l=em.includes(e.slug)||(null==ei?void 0:ei.some(t=>t.integrationId===e.id));return(0,t.jsxs)(s.Fragment,{children:[(0,t.jsxs)("div",{className:"@[300px]/add-integration:flex-row @[300px]/add-integration:items-center @[300px]/add-integration:justify-between @[300px]/add-integration:space-y-0 flex flex-col space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:["manual"!==e.slug?(0,t.jsx)("div",{className:"flex h-8 w-8 items-center justify-center overflow-hidden rounded-md",children:(0,t.jsx)(i.default,{src:e.icon||"placeholder.svg",alt:"".concat(e.name," logo"),width:32,height:32})}):null,(0,t.jsxs)("div",{className:"flex flex-col gap-0",children:[(0,t.jsx)("p",{className:"m-0 text-sm ".concat("manual"===e.slug?"text-muted-foreground":"font-medium"),children:e.name}),"manual"!==e.slug?(0,t.jsx)("p",{className:"m-0 text-xs text-gray-500",children:l&&((null==(a=ed.find(t=>t.product.slug===e.slug))?void 0:a.name)||(null==(o=ep.find(t=>t.type===e.slug))?void 0:o.name))||e.description}):null]})]}),l?(0,t.jsx)(r.Button,{size:"sm",disabled:!0,variant:"secondary",children:"Connected"}):(0,t.jsx)(F.IntegrationSplitButton,{allTeamStores:X,integration:e,onConnect:eC,status:Q[e.slug],vercelProjectId:null!=G?G:void 0,onStatusChange:et,source:"add-integration",starter:E,disabled:T||ev,sendFollowUp:!er})]}),n<ew.length-1&&(0,t.jsx)(m.Separator,{className:"my-2"})]},e.id)}),er&&(0,t.jsx)(r.Button,{size:"sm",className:"w-full",disabled:ev,onClick:ej,children:"Continue"})]})})})}e.s(["SuggestedNextStepButton",()=>Q,"SuggestedNextSteps",()=>J],229983);var G=t,K=r,X=U,$=y,Y=e.i(612336);function J(e){let{options:t}=e,{submit:n}=(0,$.useV0Chat)(),r=async e=>{await n({action:"new",attachments:[],content:(0,X.createMDXMessageContent)(e)})};return(0,G.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,G.jsx)("p",{className:"my-0 pl-0.5 text-sm text-gray-500",children:"Next Steps"}),(0,G.jsx)("div",{className:"flex flex-wrap gap-3",children:t.map((e,t)=>(0,G.jsx)(Q,{onClick:()=>r(e.prompt),children:e.title},t))})]})}function Q(e){let{onClick:t,children:n,...r}=e;return(0,G.jsxs)(K.Button,{size:"xs",variant:"outline",className:"bg-muted dark:bg-subtle hover:bg-alpha-200 pl-3! pr-2! h-7 gap-1 rounded-full border-none text-sm font-normal shadow-sm",onClick:t,...r,children:[n,(0,G.jsx)(Y.ArrowUpRightSmall,{height:16,width:16,color:"currentColor",className:"text-gray-600!"})]})}e.s(["default",()=>es],606278);var ee=t,et=r,en=i,er=n,ei=c,ea=u,eo=o;function es(e){var t,n;let{integration:r}=e,i=(0,ea.useChatMetadata)(),a=null==(t=i.project)?void 0:t.vercelProjectId,{stores:o,isLoading:s,error:l}=(0,eo.useConnectedIntegrations)({vercelProjectId:null!=a?a:void 0,v0ProjectId:null==(n=i.project)?void 0:n.projectId,refreshInterval:0}),c=o.data.marketplaceStores.find(e=>e.product.slug===r);if(s||!c||l)return(0,ee.jsx)(er.Card,{className:"h-10 w-44",children:(0,ee.jsxs)(er.CardContent,{className:"flex  h-full items-center gap-2 px-4 py-0 pl-3",children:[(0,ee.jsx)(ei.Skeleton,{className:"h-5 w-5 rounded-md"}),s?(0,ee.jsx)(ei.Skeleton,{className:"h-5 w-24"}):(0,ee.jsx)("div",{className:"text-red-700",children:"No data found"})]})});let u="https://vercel.com/api/www/avatar/".concat(c.product.iconUrl),d="https://vercel.com/api/marketplace/sso?integrationConfigurationId=".concat(c.product.integrationConfigurationId,"&teamId=").concat(c.ownerId);return(0,ee.jsx)("a",{href:d,target:"_blank",children:(0,ee.jsxs)(et.Button,{className:"gap-2 pl-3",variant:"outline",children:[(0,ee.jsx)("div",{className:"flex h-5 w-5 items-center justify-center overflow-hidden rounded-md",children:(0,ee.jsx)(en.default,{src:u,alt:"".concat(c.product.name," logo"),width:20,height:20})}),"Open ",c.product.name]})})}e.s(["SuggestedAction",()=>eG,"SuggestedActions",()=>eZ],101387);var el=t,ec=s,eu=t,ed=e.i(404836),ep=r,eh=s,ef=e.i(917772),em=e.i(144019),eg=g,ev=e.i(449381),ex=e.i(780292),ey=e.i(675120),eb=e.i(707827),ew=x,ej=k,eC=e.i(403055),ek=p,eS=e.i(538553);function eN(e){let{className:t,text:n="Integrations"}=e,{hasVercelWritePermission:r}=(0,ek.useActiveScope)(),i=(0,ex.useSetAtom)(ej.isSettingsSheetOpenAtom),a=(0,ex.useSetAtom)(ej.settingsSheetTabAtom),[o,s]=(0,eh.useState)("idle"),[l,c]=(0,eh.useState)(!1),{chatId:u}=(0,eg.useChatId)(),d=(0,ev.useActiveBlockState)(),p=(0,em.useAutoCreateProject)({chatId:u,activeBlock:d}),h=(0,eh.useMemo)(()=>[ed.NeonIcon,ed.SupabaseIcon,ed.UpstashIcon,ed.BlobIcon].map((e,t)=>(0,eu.jsx)("div",{className:"bg-background flex h-full w-full items-center justify-center rounded-full transition-colors duration-200 group-hover:bg-gray-200",children:(0,eu.jsx)(e,{})},t)),[]),f=(0,eh.useCallback)(async()=>{if("loading"!==o){s("loading");try{await p(),setTimeout(()=>{i(!0),a("integrations")},100)}catch(e){ew.toast.error("Failed to create project")}finally{s("idle")}}},[o,p,i,a]),m=(0,eh.useMemo)(()=>{switch(o){case"idle":return(0,eu.jsxs)(eE,{children:[(0,eu.jsx)(ef.MarchingChildren,{shouldMarch:l,size:18,overlap:4,children:h}),n]});case"loading":return(0,eu.jsxs)(eE,{children:[(0,eu.jsx)(eb.Spinner,{size:16}),"Connecting..."]})}},[h,o,l,n]);return(0,eu.jsx)(eS.RbacTooltip,{show:!r,requiredRole:"V0Builder",children:(0,eu.jsx)(ep.Button,{size:"sm",variant:"secondary",className:(0,eC.cn)("h-7 w-[144px] select-none rounded-md",t),onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),onClick:f,"data-slot":"integrations-connect-button",disabled:!r,children:(0,eu.jsx)(ey.TransitionNode,{renderKey:o,...ey.PRESETS.buttonContent,children:m})})})}function eE(e){let{children:t}=e;return(0,eu.jsx)("span",{className:"flex items-center gap-1",children:t})}var eM=u,eI=e.i(745197),eD=O,eT=e.i(912074),eA=y,eL=b,eP=e.i(716360),eR=e.i(529693),e_=s;let eO=!1;function eF(){let[e,t]=(0,e_.useState)(eO);return(0,e_.useEffect)(()=>{eO=!0,t(!0)},[]),e}var eV=e.i(668887);e.i(904347);var eB=e.i(37737),ez=e.i(297239),eH=e.i(572934),eU=e.i(418929),eq=ex,eW=U;function eZ(e){let{elementProps:t,children:n,isLast:r,messageId:i}=e,{atoms:a}=(0,eU.useCurrentChatPrompt)(),o=(0,eq.useAtomValue)(a.editingMessage),[s,l]=(0,ec.useState)(!1),[c]=(0,eH.useSuggestionsSetting)(),{canWriteToChat:u}=(0,eM.useChatMetadata)(),d=eF(),p=(0,eV.useDesignModeEnabled)();(0,ec.useEffect)(()=>{l(!0)},[i,l]);let{showBannerLimit:h}=(0,eI.useShowUpgradeBanner)();return!h&&!o&&!p&&r&&u&&d&&c?(0,el.jsx)(eP.AnimatePresence,{initial:!1,mode:"wait",children:s&&(0,el.jsx)(eK,{elementProps:t,children:n})}):null}function eG(e){let{name:t,description:n,elementProps:r,messageId:i}=e,[a]=(0,eI.useRateLimit)(),o=!!((null==a?void 0:a.remaining)!==void 0&&a.remaining<=0),{setShowSignInDialog:s}=(0,eD.useSignInDialog)(),{submit:l}=(0,eA.useV0Chat)(),c=(0,ec.useCallback)(()=>{s({content:(0,eW.createMDXMessageContent)(n)})},[n,s]),u=!!(0,ec.useMemo)(()=>(0,eT.getAnonId)(),[]),d=(0,ec.useCallback)(()=>u?void c():o?void(0,eB.openDialog)({type:"upgradePlan"}):void(l({action:"new",content:(0,eW.createMDXMessageContent)(n)}),(0,eL.track)("ClickSuggestedAction",{actionName:t,actionDescription:n,messageId:i})),[u,o,l,n,t,i,c]);return(0,el.jsx)(Q,{...r,onClick:d,children:t})}function eK(e){let{elementProps:t,children:n}=e,r=(0,ez.useT)();return(0,el.jsxs)(eR.motion.div,{...t,"data-slot":"prompt-actions-container",className:"bg-background relative rounded-lg pb-2.5 pt-2 [&_[data-slot=integrations-connect-button]>div]:w-full! **:data-[slot=integrations-connect-button]:w-fit [&_button]:h-7 [&_button]:rounded-lg",initial:{opacity:0,y:32},animate:{opacity:1,y:0},exit:{opacity:0,y:32},transition:{duration:.25,ease:"easeInOut"},children:[(0,el.jsx)("div",{className:"from-background absolute -top-8 left-0 right-2 z-10 h-8 bg-linear-to-t to-transparent"}),(0,el.jsx)("span",{className:"w-fit !m-0 self-start px-0.5 py-1 text-label-14 text-gray-500",children:r("promptForm.suggestions")}),(0,el.jsxs)("div",{className:"flex flex-wrap gap-2 py-1.5",children:[(0,el.jsx)(eN,{text:r("integrations.addIntegration")}),n]})]})}var eX=t,e$=e.i(304649);function eY(e){let{className:t,...n}=e;return(0,eX.jsxs)("svg",{className:(0,e$.cn)("h-5 w-5 shrink-0",t),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"none",...n,children:[(0,eX.jsx)("g",{clipPath:"url(#clip0_8291_77575)",children:(0,eX.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20 10C20 15.5228 15.5228 20 10 20C4.47715 20 0 15.5228 0 10C0 4.47715 4.47715 0 10 0C15.5228 0 20 4.47715 20 10ZM14.4129 8.16291L15.0758 7.5L13.75 6.17417L13.0871 6.83709L8.125 11.7992L6.91291 10.5871L6.25 9.92418L4.92417 11.25L5.58709 11.9129L7.46209 13.7879C7.8282 14.154 8.4218 14.154 8.78791 13.7879L14.4129 8.16291Z",fill:"#15803D"})}),(0,eX.jsx)("defs",{children:(0,eX.jsx)("clipPath",{id:"clip0_8291_77575",children:(0,eX.jsx)("rect",{width:"20",height:"20",fill:"white"})})})]})}function eJ(e){let{className:t,...n}=e;return(0,eX.jsx)("svg",{className:(0,e$.cn)("h-5 w-5 shrink-0",t),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"none",...n,children:(0,eX.jsx)("circle",{cx:"10",cy:"10",r:"9.25",stroke:"#71717A",strokeWidth:"1.5",strokeDasharray:"3.75 3.75"})})}e.s(["IconCheckCircle",()=>eY,"IconCircleOutline",()=>eJ],480187);var eQ=e.i(346970);function e0(e){let t=e.join(","),{data:n,isLoading:r,error:i}=(0,eQ.default)(e.length>0?["integrations:completed-executions",t]:null,async()=>{let e=await fetch("/chat/api/integrations/completed-executions?identifiers=".concat(t)),{results:n}=await e.json();return n});return{data:n,isLoading:r,error:i}}e.s(["useCompletedExecutions",()=>e0],157357);var e1=t,e2=e.i(211976),e5=c,e4=e.i(996174),e3=x,e7=s,e9=e.i(547259),e6=(0,e9.createServerReference)("401bf22d63b52897e9108ec9775ec173d1a9e033be",e9.callServer,void 0,e9.findSourceMapURL,"configureSupabaseUrl"),e8=eC,te=p,tt=eS;function tn(e){let{stepStatus:t,isLoadingCompletedExecutions:n,canWriteToChat:r,hasSupabaseIntegration:i,index:a,chatId:o,projectId:s,vercelProjectId:l,updateStepStatus:c,refresh:u,agentStyling:d}=e,{hasVercelWritePermission:p}=(0,te.useActiveScope)(),h=(0,e7.useMemo)(()=>{let e="Setup",n=!1,a=!i;switch(t){case"applying_action":e="Setting up",n=!0,a=!0;break;case"completed_action":e="Completed",a=!0;break;default:e="Setup",n=!1,a=!i}return{text:e,pending:n,disabled:a||!r||!i||!p}},[t,i,r,p]),f=async()=>{try{if(!s||!l||!o)return;c(a,"applying_action");let t=await e6({vercelProjectId:l,v0ProjectId:s,chatId:o,currentChatUrl:window.location.origin});if(t.success)c(a,"completed_action");else{var e;c(a,"none"),e3.toast.error(null!=(e=t.error)?e:"Unknown error")}u()}catch(e){e3.toast.error(e instanceof Error?e.message:"Unknown error"),c(a,"none")}};return n?(0,e1.jsx)(e5.Skeleton,{className:"h-8 w-[77px]"}):(0,e1.jsx)("div",{className:"flex flex-row gap-2",children:(0,e1.jsx)(e4.Tooltip,{content:i?void 0:"You need Supabase integration to setup this chat as redirect URL",children:(0,e1.jsx)(tt.RbacTooltip,{show:!p,requiredRole:"V0Builder",children:(0,e1.jsx)(e2.SpinnerButton,{size:"sm",className:(0,e8.cn)({"h-7":d}),pending:h.pending,disabled:h.disabled,type:"button",onClick:f,children:h.text})})})})}e.s(["SupabaseChatUrlStep",()=>tn],128173)},366346,e=>{"use strict";e.s(["StepsCard",()=>W]);var t=e.i(832520),n=e.i(480187),r=e.i(674523),i=e.i(376346),a=e.i(996174),o=e.i(779647),s=e.i(183673),l=e.i(304649),c=e.i(66045),u=e.i(970256),d=e.i(696871),p=e.i(818273),h=e.i(926224);e.i(563948);var f=e.i(407562),m=e.i(53223),g=e.i(745587),v=e.i(584497),x=e.i(92479),y=e.i(554912),b=e.i(762585),w=e.i(86448),j=e.i(299313),C=e.i(200407),k=e.i(725415),S=e.i(906261),N=e.i(449381),E=e.i(667660),M=e.i(434673),I=e.i(583965),D=e.i(157357),T=e.i(726988),A=e.i(491320),L=e.i(520605),P=e.i(316799),R=e.i(768061),_=e.i(324141),O=e.i(710227),F=e.i(433743),V=e.i(128173),B=e.i(211976),z=e.i(44337),H=e.i(150218),U=e.i(385671);let q=new Set(["add-integration","run-script","add-env-var","run-action"]),W=e=>{let{steps:n,messageId:r}=e,{messages:i}=(0,x.useChatMessages)(),a=i.find(e=>e.id===r),o=(0,p.getBlocksFromState)(null==a?void 0:a.content,r).filter(e=>{var t;return!d.INLINE_BLOCK_TYPES.includes(null!=(t=e.meta.type)?t:"")}),s=o.length>0?o[o.length-1]:null;if(!s)return null;let l=n.filter(e=>q.has(e.type));return 0===l.length?null:(0,t.jsx)(Z,{steps:l,messageId:r,currentBlock:s})},Z=e=>{var d,p,q,W;let{steps:Z,messageId:G,currentBlock:K}=e,{stores:X}=(0,M.useAllTeamIntegrations)(),{isStreaming:$}=(0,x.useChatLoadingState)(),{refresh:Y}=(0,I.useBrowserFrame)(),J=(0,v.useChatMetadata)(),{canWriteToChat:Q}=J,ee=(0,N.useSetActiveBlockView)(),{chatId:et}=(0,x.useChatId)(),{activeScope:en}=(0,E.useActiveScope)(),er=(0,A.useDefaultTeam)(),[ei,ea]=(0,C.useState)(null),eo=(0,C.useMemo)(()=>Z.filter(e=>"run-script"===e.type).map(e=>"".concat(K.id,":").concat(e.stepName)),[Z,K.id]),{data:es,isLoading:el}=(0,D.useCompletedExecutions)(eo),{project:ec}=(0,v.useChatMetadata)(),{envVars:eu,isLoading:ed,refetchVercelProject:ep}=(0,s.useVercelProject)({v0ProjectId:null!=(q=null==ec?void 0:ec.projectId)?q:void 0}),{appendCodeOutputEvents:eh,expandConsole:ef}=(0,y.useConsole)(K.id),{setActiveFilePath:em}=(0,g.useActiveFile)({blockId:K.id}),{saveLastOpenedBlock:eg}=(0,P.useLastOpenedBlock)(),ev=null==(d=J.project)?void 0:d.vercelProjectId,{integrations:ex}=(0,o.useIntegrationOptions)({integrationIds:r.RECOMMENDED_INTEGRATION_SLUGS,isEnabled:!0}),{stores:{data:{marketplaceStores:ey,nativeStores:eb},refetch:ew},isLoading:ej}=(0,T.useConnectedIntegrations)({vercelProjectId:null!=ev?ev:void 0,v0ProjectId:null==(p=J.project)?void 0:p.projectId,refreshInterval:0}),eC=(0,C.useMemo)(()=>!ev||ej?[]:[...ey.map(e=>e.product.name),...eb.map(e=>e.integrationName)],[ey,ej,ev,eb]),ek=(0,C.useMemo)(()=>eC.some(e=>"supabase"===e.toLowerCase()),[eC]),eS=(0,C.useMemo)(()=>!!eu&&(0,k.getSQLExecEnvVars)(Object.keys(eu)).length>0,[eu]),{clearTimeout:eN}=(0,O.getProjectSettingsActions)(null!=(W=null==ec?void 0:ec.projectId)?W:""),{refetchLinks:eE}=(0,L.useIntegrationLinks)({source:"add-integration",messageId:G},async e=>{let t=Z.findIndex(t=>"add-integration"===t.type&&t.stepName===e[0].integrationName);-1!==t&&eD(t,"connected_integration"),eN(e[0].integrationName),ep(),e.forEach(e=>{(0,m.track)("AddIntegration",{integrationSlug:e.integrationName,chatId:e.chatId||"",source:e.source})}),Y()}),[eM,eI]=(0,C.useState)({}),eD=(e,t)=>{eI(n=>({...n,[e]:t}))};(0,C.useEffect)(()=>{Z.forEach((e,t)=>{switch(e.type){case"add-integration":eC.includes(e.stepName)&&eD(t,"connected_integration");break;case"add-env-var":(null==eu?void 0:eu[e.stepName])&&eD(t,"added_env_vars");break;case"run-script":(null==es?void 0:es["".concat(K.id,":").concat(e.stepName)])&&eD(t,"applied_script");break;case"run-action":if("supabase-chat-url"===e.stepName){var n;if(!et)return;(null==eu||null==(n=eu.NEXT_PUBLIC_DEV_SUPABASE_REDIRECT_URL)?void 0:n.value.includes(et))&&eD(t,"completed_action")}}})},[Z,eC,eu,es,K.id,et]),(0,C.useEffect)(()=>{if(!el&&!ed&&!ej){let e=new Set(["connected_integration","added_env_vars","applied_script","completed_action"]),t=Z.findIndex(t=>!e.has(eM[Z.indexOf(t)]));-1!==t&&ea(t)}},[el,ed,ej,Z,eM]);let eT=async(e,t,n,i,a)=>{if(void 0===a)throw Error("Index is required within steps");(0,m.track)("ClickAddIntegration",{integration:e}),eD(a,"linking_integration");try{if("blob"===e.slug){let t=await fetch("/chat/api/integrations/marketplace/storage/create-blob",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:"".concat(n.name,"-blob"),projectId:n.id})});if(!t.ok){var o;let e=await t.json();throw eD(a,"none"),Error(null!=(o=e.error)?o:"Failed to create blob store")}ew(),Y(),f.toast.success("Blob storage connected successfully"),(0,m.track)("AddIntegration",{integrationSlug:e.slug,chatId:et||"",source:"add-integration"});return}let s=r.POTENTIALLY_CONFLICTING_INTEGRATIONS.some(t=>t.has(e.name)&&eC.find(e=>t.has(e))),l=await (0,_.createAddIntegrationUrl)({integration:e,chatId:et||"",v0ProjectId:t||"",teamSlug:(0,S.isUserScope)(en)?er||"":(null==en?void 0:en.slug)||"",dashboardProject:n,source:"add-integration",messageId:G,needPrefix:s});await eE(),i?i.location.href=l:window.open(l,"_blank")}catch(e){f.toast.error(e instanceof Error?e.message:"Failed to add integration")}},{actions:{setActiveTabIntent:eA}}=(0,U.useChatLayout)(),eL=async e=>{ee(!0,K),eg(K.id),await em(e),eA("code")},eP=async e=>{if(null===ei)return;let t=e.endsWith(".sql")?"sql":e.endsWith(".py")?"python":e.endsWith(".js")?"javascript":void 0;if(!t)throw Error("Unsupported file type");let n=null==ec?void 0:ec.projectId;eD(ei,"applying_script");let r=K.id+":"+e;try{if(await eL(e),"code-project"!==K.meta.type)throw Error("Code execution is only supported for code blocks");let a=(0,h.parseMultiFileSource)({source:K.source,blockType:"code-project",blockId:K.id}).find(t=>t.meta.file===e);if(!a)throw Error("Script file not found");let o={error:"No result"};if("sql"===t){if(!n)throw Error("Your chat must be in a project to run SQL scripts.");let t=eC.filter(e=>(0,z.isSqlExecProviderName)(e))[0];o=await (0,u.doSqlExecution)({props:{language:a.lang,source:a.source,meta:{file:e,transaction:a.meta.transaction},closed:!0,originalCode:a.source},sqlExecProvider:t,v0ProjectId:n,operationId:r})}else{var i;o=await (0,c.doExecution)({language:t,source:a.source,meta:{file:e,transaction:a.meta.transaction},closed:!0,originalCode:a.source},r,null!=(i=null==ec?void 0:ec.vercelProjectId)?i:void 0)}if("error"in o)eh([{type:"output",blockId:K.id,fileName:e,content:o.error,timestamp:new Date().toISOString(),method:"stderr"}]),f.toast.error("Error",{description:o.error}),eD(ei,"none");else{let t=(0,H.transformExecutionOutputToEvents)(o,K.id,e);eh(t),eD(ei,"applied_script")}null==ef||ef()}catch(e){f.toast.error("Error applying script",{description:e instanceof Error?e.message:"Unknown error"}),eD(ei,"none")}},eR=(e,n)=>{switch(e.type){case"add-integration":let r=ex.find(t=>t.name===e.stepName);return{stepTitle:"Install ".concat(e.stepName),stepActions:r?(0,t.jsx)(F.IntegrationSplitButton,{allTeamStores:X,integration:r,onConnect:eT,status:eM[n],vercelProjectId:null!=ev?ev:void 0,onStatusChange:eD,source:"steps-card",starter:!1,disabled:$||!Q,sendFollowUp:!1,stepIndex:n}):(0,t.jsx)(b.Skeleton,{className:"h-8 w-20 rounded-md"})};case"run-script":let i=e.stepName.substring(e.stepName.lastIndexOf("/")+1),o="Apply",s=!1,l=!1;switch(eM[n]){case"creating_project":o="Connecting",s=!0,l=!0;break;case"applying_script":o="Applying",s=!0,l=!0;break;case"applied_script":o="Applied",l=!0;break;default:o="Apply",s=!1,l=!1}let c=e.stepName.endsWith(".sql"),u=e.stepName.endsWith(".py"),d=e.stepName.endsWith(".js"),p=c||u||d,h=c&&p&&(null==ec?void 0:ec.projectId)&&eS,f=p&&(u||d);return{stepTitle:"Run ".concat(null!=i?i:e.stepName),stepActions:el?(0,t.jsx)(b.Skeleton,{className:"h-8 w-[77px]"}):(0,t.jsx)("div",{className:"flex flex-row gap-2",children:(0,t.jsx)(a.Tooltip,{content:p?c&&!h?"No database connected":void 0:"v0 can only run SQL, Python, and Node.js scripts",children:(0,t.jsx)(B.SpinnerButton,{size:"sm",pending:s,disabled:l||!h&&!f||!Q,onClick:()=>eP(e.stepName),children:o})})})};case"run-action":if("supabase-chat-url"===e.stepName){var m,g;return{stepTitle:(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2 group min-w-0",children:[(0,t.jsx)("div",{className:"truncate text-sm font-medium group-hover:text-gray-900 ".concat(ei===n?"text-gray-900":"text-gray-500"),children:"Setup Development Auth Redirect URL"}),(0,t.jsx)(a.Tooltip,{className:"max-w-96",content:(0,t.jsxs)("span",{children:["Adds this chat as"," ",(0,t.jsx)("strong",{className:"font-medium",children:"redirect URL"})," to Supabase and env vars, used for development purposes."]}),children:(0,t.jsx)("div",{className:"flex-shrink-0 group-hover:text-gray-900 ".concat(ei===n?"text-gray-900":"text-gray-500"),children:(0,t.jsx)(w.Question,{className:"h-4 w-4"})})})]}),stepActions:(0,t.jsx)(V.SupabaseChatUrlStep,{stepStatus:eM[n],isLoadingCompletedExecutions:el,canWriteToChat:!!Q,hasSupabaseIntegration:ek,activeStep:ei,index:n,projectId:null!=(m=null==ec?void 0:ec.projectId)?m:void 0,vercelProjectId:null!=(g=null==ec?void 0:ec.vercelProjectId)?g:void 0,chatId:et,updateStepStatus:eD,refresh:Y})}}return null;case"add-env-var":return{stepTitle:"Add ".concat(e.stepName),stepActions:(0,t.jsx)(F.IntegrationSplitButton,{allTeamStores:X,integration:R.MANUAL_INTEGRATION,onConnect:eT,status:eM[n],vercelProjectId:null!=ev?ev:void 0,onStatusChange:eD,source:"steps-card",starter:!1,disabled:$||!Q,sendFollowUp:!1,stepIndex:n,envVarKeys:[e.stepName]})}}},e_=(e,r)=>{let i=eM[r];if("add-integration"===e.type&&ej||"run-script"===e.type&&el||"add-env-var"===e.type&&ed||"run-action"===e.type&&el)return(0,t.jsx)("div",{className:"h-5 w-5 animate-pulse rounded-full bg-gray-200"});if("added_env_vars"===i||"connected_integration"===i||"applied_script"===i||"completed_action"===i)return(0,t.jsx)(n.IconCheckCircle,{});if("add-integration"===e.type){var a,o;let n=ex.find(t=>t.name===e.stepName);return(0,t.jsx)("div",{className:"flex h-5 w-5 items-center justify-center overflow-hidden rounded-full",children:(0,t.jsx)(j.default,{src:null!=(a=null==n?void 0:n.icon)?a:"/placeholder-icon.png",alt:null!=(o=null==n?void 0:n.name)?o:"Integration",width:20,height:20})})}return(0,t.jsx)(n.IconCircleOutline,{})};return(0,t.jsx)(i.Card,{className:(0,l.cn)("max-w-[500px] border border-gray-500 px-3 py-[10px] shadow-none ring-2 ring-gray-200",!Q&&"pointer-events-none"),children:Z.map((e,n)=>{let r=eR(e,n);if(!r)return null;let{stepTitle:i,stepActions:a}=r;return(0,t.jsxs)(C.default.Fragment,{children:[" ",(0,t.jsxs)("div",{className:"flex h-8 cursor-pointer items-center gap-2 py-[2px]",onClick:()=>{ea(n),"run-script"===e.type&&eL(e.stepName)},children:[e_(e,n),(0,t.jsxs)("div",{className:"flex w-full min-w-0 items-center justify-between gap-2",children:["string"==typeof i?(0,t.jsx)("div",{className:"min-w-0 shrink overflow-hidden text-ellipsis text-nowrap text-sm font-medium hover:text-gray-900 ".concat(ei===n?"text-gray-900":"text-gray-500"),children:i}):i,ei===n&&a]})]}),n!==Z.length-1&&(0,t.jsx)("div",{className:"h-4 w-full",children:(0,t.jsx)("div",{className:"ml-2 h-full w-px bg-gray-200"})})]},n)})})}},111380,e=>{"use strict";let t=(0,e.i(121793).default)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);e.s(["default",()=>t])},325498,e=>{e.v({alignEnd:"trace-viewer-module__ifXKXa__alignEnd",alignStart:"trace-viewer-module__ifXKXa__alignStart",ancestorDuration:"trace-viewer-module__ifXKXa__ancestorDuration",ancestorLine:"trace-viewer-module__ifXKXa__ancestorLine",ancestorLineContainer:"trace-viewer-module__ifXKXa__ancestorLineContainer",ancestorName:"trace-viewer-module__ifXKXa__ancestorName",ancestorNode:"trace-viewer-module__ifXKXa__ancestorNode",ancestorText:"trace-viewer-module__ifXKXa__ancestorText",childRow:"trace-viewer-module__ifXKXa__childRow",collapsed:"trace-viewer-module__ifXKXa__collapsed",color0:"trace-viewer-module__ifXKXa__color0",color1:"trace-viewer-module__ifXKXa__color1",color2:"trace-viewer-module__ifXKXa__color2",color3:"trace-viewer-module__ifXKXa__color3",colorHighlight:"trace-viewer-module__ifXKXa__colorHighlight",colorVercel:"trace-viewer-module__ifXKXa__colorVercel",cursorMarker:"trace-viewer-module__ifXKXa__cursorMarker",cursorMarkerContainer:"trace-viewer-module__ifXKXa__cursorMarkerContainer",cursorMarkerLabel:"trace-viewer-module__ifXKXa__cursorMarkerLabel",cursorMarkerLabelContainer:"trace-viewer-module__ifXKXa__cursorMarkerLabelContainer",cursorMarkerStickyParent:"trace-viewer-module__ifXKXa__cursorMarkerStickyParent",cursorSelection:"trace-viewer-module__ifXKXa__cursorSelection",detailGroup:"trace-viewer-module__ifXKXa__detailGroup",detailHeading:"trace-viewer-module__ifXKXa__detailHeading",detailHeadingIcon:"trace-viewer-module__ifXKXa__detailHeadingIcon",divider:"trace-viewer-module__ifXKXa__divider",eventDiamond:"trace-viewer-module__ifXKXa__eventDiamond",eventMarker:"trace-viewer-module__ifXKXa__eventMarker",eventMarkers:"trace-viewer-module__ifXKXa__eventMarkers",eventMarkersContainer:"trace-viewer-module__ifXKXa__eventMarkersContainer",eventName:"trace-viewer-module__ifXKXa__eventName",eventTimestamp:"trace-viewer-module__ifXKXa__eventTimestamp",hidden:"trace-viewer-module__ifXKXa__hidden",hoverInfo:"trace-viewer-module__ifXKXa__hoverInfo",huge:"trace-viewer-module__ifXKXa__huge",inert:"trace-viewer-module__ifXKXa__inert",infraSpanDescription:"trace-viewer-module__ifXKXa__infraSpanDescription",mapCanvas:"trace-viewer-module__ifXKXa__mapCanvas",mapContainer:"trace-viewer-module__ifXKXa__mapContainer",mapThumb:"trace-viewer-module__ifXKXa__mapThumb",marker:"trace-viewer-module__ifXKXa__marker",markerLabel:"trace-viewer-module__ifXKXa__markerLabel",markers:"trace-viewer-module__ifXKXa__markers",markersContainer:"trace-viewer-module__ifXKXa__markersContainer",mobile:"trace-viewer-module__ifXKXa__mobile",notch:"trace-viewer-module__ifXKXa__notch",searchBar:"trace-viewer-module__ifXKXa__searchBar",searchInput:"trace-viewer-module__ifXKXa__searchInput",selected:"trace-viewer-module__ifXKXa__selected",skeleton:"trace-viewer-module__ifXKXa__skeleton",small:"trace-viewer-module__ifXKXa__small","span-skeleton":"trace-viewer-module__ifXKXa__span-skeleton",spanDetailPanel:"trace-viewer-module__ifXKXa__spanDetailPanel",spanDetailPanelAttribute:"trace-viewer-module__ifXKXa__spanDetailPanelAttribute",spanDetailPanelAttributeKey:"trace-viewer-module__ifXKXa__spanDetailPanelAttributeKey",spanDetailPanelAttributeValue:"trace-viewer-module__ifXKXa__spanDetailPanelAttributeValue",spanDetailPanelBody:"trace-viewer-module__ifXKXa__spanDetailPanelBody",spanDetailPanelClose:"trace-viewer-module__ifXKXa__spanDetailPanelClose",spanDetailPanelCloseVerticalRule:"trace-viewer-module__ifXKXa__spanDetailPanelCloseVerticalRule",spanDetailPanelCorner:"trace-viewer-module__ifXKXa__spanDetailPanelCorner",spanDetailPanelDuration:"trace-viewer-module__ifXKXa__spanDetailPanelDuration",spanDetailPanelName:"trace-viewer-module__ifXKXa__spanDetailPanelName",spanDetailPanelQuickLink:"trace-viewer-module__ifXKXa__spanDetailPanelQuickLink",spanDetailPanelQuickLinkLabel:"trace-viewer-module__ifXKXa__spanDetailPanelQuickLinkLabel",spanDetailPanelResizer:"trace-viewer-module__ifXKXa__spanDetailPanelResizer",spanDetailPanelTop:"trace-viewer-module__ifXKXa__spanDetailPanelTop",spanDetailPanelTopInfo:"trace-viewer-module__ifXKXa__spanDetailPanelTopInfo",spanDetailPanelTraceViewer:"trace-viewer-module__ifXKXa__spanDetailPanelTraceViewer",spanDetailPanelTruncatedHeading:"trace-viewer-module__ifXKXa__spanDetailPanelTruncatedHeading",spanDuration:"trace-viewer-module__ifXKXa__spanDuration",spanName:"trace-viewer-module__ifXKXa__spanName",spanNameDetailPanel:"trace-viewer-module__ifXKXa__spanNameDetailPanel",spanNode:"trace-viewer-module__ifXKXa__spanNode",spanNodeEvent:"trace-viewer-module__ifXKXa__spanNodeEvent",spanSpacer:"trace-viewer-module__ifXKXa__spanSpacer",timeline:"trace-viewer-module__ifXKXa__timeline",traceNode:"trace-viewer-module__ifXKXa__traceNode",traceViewer:"trace-viewer-module__ifXKXa__traceViewer",traceViewerContent:"trace-viewer-module__ifXKXa__traceViewerContent",unlit:"trace-viewer-module__ifXKXa__unlit",xHover:"trace-viewer-module__ifXKXa__xHover","zoom-buttons-fade-in":"trace-viewer-module__ifXKXa__zoom-buttons-fade-in",zoomButton:"trace-viewer-module__ifXKXa__zoomButton",zoomButtonGroup:"trace-viewer-module__ifXKXa__zoomButtonGroup",zoomButtonTraceViewer:"trace-viewer-module__ifXKXa__zoomButtonTraceViewer"})},250256,e=>{e.v({debug:"stack-module__Z-yAja__debug",padding:"stack-module__Z-yAja__padding",stack:"stack-module__Z-yAja__stack"})},874218,e=>{e.v({action:"note-module__dV_JPW__action",center:"note-module__dV_JPW__center",content:"note-module__dV_JPW__content",disabled:"note-module__dV_JPW__disabled",hasLabel:"note-module__dV_JPW__hasLabel",large:"note-module__dV_JPW__large",note:"note-module__dV_JPW__note",small:"note-module__dV_JPW__small"})},85002,e=>{e.v({clamp:"text-module__NCrs7q__clamp",monospace:"text-module__NCrs7q__monospace",nowrap:"text-module__NCrs7q__nowrap",truncate:"text-module__NCrs7q__truncate",wrapper:"text-module__NCrs7q__wrapper"})},872584,e=>{e.v({alwaysUnderline:"link-module__A4icTa__alwaysUnderline",blend:"link-module__A4icTa__blend",disabled:"link-module__A4icTa__disabled",external:"link-module__A4icTa__external",highlight:"link-module__A4icTa__highlight",link:"link-module__A4icTa__link",primary:"link-module__A4icTa__primary",secondary:"link-module__A4icTa__secondary",underline:"link-module__A4icTa__underline"})},500116,e=>{e.v({inline:"skeleton-module__7n38eG__inline",loaded:"skeleton-module__7n38eG__loaded",loading:"skeleton-module__7n38eG__loading",noAnimation:"skeleton-module__7n38eG__noAnimation",pill:"skeleton-module__7n38eG__pill",rounded:"skeleton-module__7n38eG__rounded",show:"skeleton-module__7n38eG__show",skeleton:"skeleton-module__7n38eG__skeleton",squared:"skeleton-module__7n38eG__squared",wrapper:"skeleton-module__7n38eG__wrapper"})},775530,e=>{e.v(e.b(["static/chunks/220b59f9c0423d66.js","static/chunks/turbopack-b24f9b7f9a9521b3.js"]))},504726,e=>{e.v({"action-link":"error-module__TYLThq__action-link",error:"error-module__TYLThq__error",label:"error-module__TYLThq__label",large:"error-module__TYLThq__large",small:"error-module__TYLThq__small",text:"error-module__TYLThq__text"})},587779,e=>{e.v({capitalize:"label-module__UFwQ4W__capitalize",input:"label-module__UFwQ4W__input",label:"label-module__UFwQ4W__label"})},662805,e=>{e.v({container:"input-module__SGE6ra__container",error:"input-module__SGE6ra__error",input:"input-module__SGE6ra__input",keyboardFocus:"input-module__SGE6ra__keyboardFocus",large:"input-module__SGE6ra__large",mediumSmall:"input-module__SGE6ra__mediumSmall",noPrefixStyle:"input-module__SGE6ra__noPrefixStyle",noSuffixStyle:"input-module__SGE6ra__noSuffixStyle",prefix:"input-module__SGE6ra__prefix",rounded:"input-module__SGE6ra__rounded",small:"input-module__SGE6ra__small",suffix:"input-module__SGE6ra__suffix",xSmall:"input-module__SGE6ra__xSmall"})},954389,e=>{e.v({kbd:"kbd-module__w8HTva__kbd",small:"kbd-module__w8HTva__small"})},165943,e=>{e.v({button:"clearable-module__7Xzrba__button "+e.i(857757).reset,cmdk:"clearable-module__7Xzrba__cmdk",command:"clearable-module__7Xzrba__command",disabled:"clearable-module__7Xzrba__disabled",k:"clearable-module__7Xzrba__k",kbd:"clearable-module__7Xzrba__kbd",suffixContainer:"clearable-module__7Xzrba__suffixContainer"})},299014,(e,t,n)=>{"use strict";var r=e.i(723900);Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=4,n=e.length,i=n%t;if(!i)return e;var a=n,o=t-i,s=n+o,l=r.Buffer.alloc(s);for(l.write(e);o--;)l.write("=",a++);return l.toString()}},239598,(e,t,n)=>{"use strict";var r=e.i(723900);Object.defineProperty(n,"__esModule",{value:!0});var i=e.r(299014);function a(e,t){return(void 0===t&&(t="utf8"),r.Buffer.isBuffer(e))?l(e.toString("base64")):l(r.Buffer.from(e,t).toString("base64"))}function o(e,t){return void 0===t&&(t="utf8"),r.Buffer.from(s(e),"base64").toString(t)}function s(e){return e=e.toString(),i.default(e).replace(/\-/g,"+").replace(/_/g,"/")}function l(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function c(e){return r.Buffer.from(s(e),"base64")}var u=a;u.encode=a,u.decode=o,u.toBase64=s,u.fromBase64=l,u.toBuffer=c,n.default=u},335249,(e,t,n)=>{t.exports=e.r(239598).default,t.exports.default=t.exports},302998,968552,e=>{"use strict";var t=e.i(832520),n=e.i(707827),r=e.i(376346),i=e.i(612336),a=e.i(24461),o=e.i(919639),s=e.i(111380),s=s,l=t,c=e.i(200407),u=e.i(722978),d=e.i(325498),p=t,h=c,f=u,m=e.i(876886),g=e.i(7809),v=e.i(115184),x=t,y=c,b=u;let w=4,j=["sm","md","lg","xl"];function C(e,t){let n={};if("object"!=typeof t)null!==t&&(n["--".concat(e)]=t);else{let r;j.forEach(i=>{let a=t[i];null!==a&&a!==r&&(n["--".concat(i,"-").concat(e)]=a,r=a)})}return n}function k(e){return"number"==typeof e?"".concat(e*w,"px"):void 0}function S(e){if("number"==typeof e){let t=k(e);return{sm:t,md:t,lg:t,xl:t}}return{sm:k(e.sm),md:k(e.md),lg:k(e.lg),xl:k(e.xl)}}function N(e){return{sm:e.sm,md:e.md||e.sm,lg:e.lg||e.md||e.sm,xl:e.xl||e.lg||e.md||e.sm}}function E(e,t,n,r){return e===t&&e===n&&e===r?e:e===n&&t===r?"".concat(e," ").concat(t):t===r?"".concat(e," ").concat(t," ").concat(n):"".concat(e," ").concat(t," ").concat(n," ").concat(r)}function M(e,t,n,r){let i=N(e),a=N(t),o=N(n),s=N(r);return{sm:E(i.sm||"",a.sm||"",o.sm||"",s.sm||""),md:E(i.md||"",a.md||"",o.md||"",s.md||""),lg:E(i.lg||"",a.lg||"",o.lg||"",s.lg||""),xl:E(i.xl||"",a.xl||"",o.xl||"",s.xl||"")}}function I(e,t,n,r,i,a,o,s){var l,c,u,d,p,h,f,m;if(void 0===t&&void 0===n&&void 0===r&&void 0===i&&void 0===a&&void 0===o&&void 0===s)return{["--".concat(e)]:"0px"};let g=S(null!=(c=null!=(l=null!=i?i:r)?l:t)?c:0),v=S(null!=(d=null!=(u=null!=a?a:n)?u:t)?d:0),x=M(g,v,S(null!=(h=null!=(p=null!=o?o:r)?p:t)?h:0),S(null!=(m=null!=(f=null!=s?s:n)?f:t)?m:0)),y=Object.keys(x).reduce((t,n)=>({...t,["--".concat(n,"-").concat(e)]:x[n]}),{});return y["--sm-".concat(e)]===y["--md-".concat(e)]&&y["--md-".concat(e)]===y["--lg-".concat(e)]&&y["--lg-".concat(e)]===y["--xl-".concat(e)]?{["--".concat(e)]:y["--sm-".concat(e)]}:y}var D=e.i(250256);let T=(0,y.memo)(function(e){let{as:t="div",children:n,padding:r,paddingX:i,paddingY:a,paddingTop:o,paddingRight:s,paddingBottom:l,paddingLeft:c,gap:u,direction:d="column",align:p="stretch",justify:h="flex-start",flex:f="initial",debug:m,style:g,className:v,ref:y,...w}=e,j=t,k=[r,i,a,o,s,l,c].some(e=>void 0!==e);return(0,x.jsx)(j,{className:(0,b.clsx)(D.default.stack,"stack",v,{[D.default.debug]:m,[D.default.padding]:k}),"data-testid":w["data-testid"],"data-version":"v1",ref:y,style:{...g,"--stack-flex":f,...C("stack-direction",d),...C("stack-align",p),...C("stack-justify",h),...I("stack-padding",r,i,a,o,s,l,c),...I("stack-gap",u)},...w,children:n})});var A=t,L=c,P=u,R=e.i(158469),_=e.i(789018),O=e.i(612161),F=e.i(517953),V=e.i(49489),B=e.i(874218);let z=e=>{let{children:t,className:n,type:r,fill:i,label:a,size:o,center:s,variant:l,action:c,style:u,disabled:d,icon:p,...h}=e,f=(0,V.useType)(r,i,l);Array.isArray(f)&&f.shift();let m=(0,L.useMemo)(()=>a?4:void 0!==o?U[o]:12,[a,o]),g=(0,L.useCallback)(()=>!1===a?null:a?(0,A.jsxs)("span",{style:{whiteSpace:"nowrap",fontWeight:600},children:[a,":"," "]}):(0,A.jsx)("span",{style:{display:"flex",height:16},children:(0,A.jsx)(H,{icon:p,type:r})}),[a,p,r]);return(0,A.jsxs)("div",{className:(0,P.clsx)(B.default.note,n,f,{[String(B.default.action)]:c,[String(B.default.small)]:"small"===o,[String(B.default.large)]:"large"===o,[String(B.default.center)]:s,[String(B.default.disabled)]:d},"v3-colors"),...h,"data-geist-note":"","data-version":"v1",style:u,children:[(0,A.jsxs)("div",{className:(0,P.clsx)(B.default.content,a?B.default.hasLabel:""),style:{gap:m},children:[(0,A.jsx)(g,{}),(0,A.jsx)("span",{children:t})]}),c?(0,A.jsx)("div",{children:c}):null]})};function H(e){let{icon:t,type:n}=e;return t||("success"===n?(0,A.jsx)(R.CheckCircle,{color:"blue-900",size:16}):"error"===n?(0,A.jsx)(O.Stop,{color:"red-900",size:16}):"warning"===n?(0,A.jsx)(F.Warning,{color:"amber-900",size:16}):(0,A.jsx)(_.Information,{color:"currentColor"}))}let U={xSmall:8,small:8,mediumSmall:8,large:12};var q=t,W=u,Z=c,G=e.i(85002);function K(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,n=e/t;return"".concat(n,"rem")}function X(e){if("object"==typeof e&&null!==e){if(!("sm"in e))throw Error("Failed to restrict responsive prop, an object was passed without an sm key");let t={xs:e.xs||e.sm||null,sm:e.sm||null,smd:e.smd||e.md||e.sm||null,md:e.md||e.smd||e.sm||null,lg:e.lg||e.md||e.sm||null};if(Object.values(t).some(e=>null==e))throw Error("Failed to restrict responsive prop, an invalid value was passed to sm, md or lg");return t}return{xs:e,sm:e,smd:e,md:e,lg:e}}let $={48:"3.5rem",40:"3.5rem",32:"2.5rem",24:"2rem",20:"1.5rem",18:"1.5rem",16:"1.5rem",14:"1.25rem",13:"1.125rem",12:"1rem",10:"0.75rem"},Y={48:"-0.066875rem",40:"-0.058125rem",32:"-0.049375rem",24:"-0.029375rem",20:"-0.020625rem",18:"initial",16:"initial",14:"initial",13:"initial",12:"initial",10:"initial"},J={48:"700",40:"600",32:"600",24:"600",20:"600",16:"400",14:"400",13:"400",18:"400",12:"400",10:"400"},Q={"heading-72":{size:72,lineHeight:72,weight:600,letterSpacing:-4.32},"heading-64":{size:64,lineHeight:64,weight:600,letterSpacing:-3.84},"heading-56":{size:56,lineHeight:56,weight:600,letterSpacing:-3.36},"heading-48":{size:48,lineHeight:56,weight:600,letterSpacing:-2.88},"heading-40":{size:40,lineHeight:48,weight:600,letterSpacing:-2.4},"heading-32":{size:32,lineHeight:40,weight:600,letterSpacing:-1.28},"heading-24":{size:24,lineHeight:32,weight:600,letterSpacing:-.96},"heading-20":{size:20,lineHeight:26,weight:600,letterSpacing:-.4},"heading-16":{size:16,lineHeight:24,weight:600,letterSpacing:-.32},"heading-14":{size:14,lineHeight:20,weight:600,letterSpacing:-.28},"button-16":{size:16,lineHeight:20,weight:500},"button-14":{size:14,lineHeight:20,weight:500},"button-12":{size:12,lineHeight:16,weight:500},"label-20":{size:20,lineHeight:32,weight:400},"label-18":{size:18,lineHeight:20,weight:400},"label-16":{size:16,lineHeight:20,weight:400},"label-14":{size:14,lineHeight:20,weight:400},"label-13":{size:13,lineHeight:16,weight:400},"label-12":{size:12,lineHeight:16,weight:400},"copy-24":{size:24,lineHeight:36,weight:400},"copy-20":{size:20,lineHeight:36,weight:400},"copy-18":{size:18,lineHeight:28,weight:400},"copy-16":{size:16,lineHeight:24,weight:400},"copy-14":{size:14,lineHeight:20,weight:400},"copy-13":{size:13,lineHeight:18,weight:400}};function ee(e){let{size:t,variant:n,lineHeight:r,weight:i}=e;if(n){if("string"==typeof n){let e=Q[n];return{"--text-size":K(e.size),"--text-line-height":K(e.lineHeight),"--text-letter-spacing":"".concat(e.letterSpacing||0,"px"),"--text-weight":null!=i?i:e.weight}}let e=X(n);return Object.keys(e).reduce((t,n)=>{let r=Q[e[n]];return{...t,["--".concat(n,"-text-size")]:K(r.size),["--".concat(n,"-text-line-height")]:K(r.lineHeight),["--".concat(n,"-text-weight")]:null!=i?i:r.weight,["--".concat(n,"-text-letter-spacing")]:"".concat(r.letterSpacing||0,"px")}},{})}if("number"==typeof t)return{"--text-size":K(t),"--text-line-height":r?K(r):$[t],"--text-letter-spacing":Y[t],"--text-weight":i||J[t]};let a=X(t);return Object.keys(a).reduce((e,t)=>{let n=a[t];return{...e,["--".concat(t,"-text-size")]:K(n),["--".concat(t,"-text-line-height")]:r?K(r):$[n],["--".concat(t,"-text-weight")]:i||J[n],["--".concat(t,"-text-letter-spacing")]:Y[n]}},{})}let et=function(e){let{children:t,as:n="p",size:r=14,lineHeight:i,weight:a,color:o="gray-1000",transform:s,align:l,truncate:c,wrap:u=!0,className:d,style:p,monospace:h=!1,variant:f,ref:m,...g}=e,v=n,x="inherit"===o?"inherit":"var(--ds-".concat(o,")");return(0,q.jsx)(v,{className:(0,W.clsx)(G.default.wrapper,d,{[G.default.truncate]:!0===c,[G.default.clamp]:"number"==typeof c,[G.default.nowrap]:!u,[G.default.monospace]:h}),"data-version":"v1",ref:m,style:{..."number"==typeof c&&{"--text-clamp":c},"--text-color":x,...ee({size:r,lineHeight:i,weight:a,variant:f}),..."string"==typeof s&&{"--text-transform":s},..."string"==typeof l&&{"--text-align":l},...p},...g,children:t})},en=(0,Z.memo)(et);var er=e.i(648161),ei=t,ea=c,eo=e.i(491341),es=u,el=e.i(408496),ec=e.i(572404),eu=e.i(356388),ed=e.i(872584);let ep=(0,ea.forwardRef)((e,t)=>{let{as:n,type:r,variant:i,external:a,icon:o,tab:s,href:l,children:c,className:u,prefetch:d,canPrefetch:p=el.canPrefetch,prefetchStrategy:h="visible",isDifferentZone:f,onNavigate:m,...g}=e,v=(0,ec.usePrefetchProps)({href:l,isDifferentZone:f,prefetch:d,prefetchStrategy:h}),x=s||a||l&&!p(l)&&!l.startsWith("#"),y=i||r,b=y?ed.default[y]:"",{underline:w,...j}=g,C=!!a&&!1!==o;if(l&&(f||x))return(0,ei.jsxs)("a",{href:l,rel:x?"noopener":void 0,target:x?"_blank":void 0,...g,className:(0,es.clsx)(ed.default.link,{[String(ed.default.external)]:C,[String(ed.default.alwaysUnderline)]:!!w},b,u),ref:t,children:[c,C?(0,ei.jsx)(eu.ExternalSmall,{}):null]});if(!l&&!g.onClick)return(0,ei.jsx)("span",{...j,"aria-disabled":!0,className:(0,es.clsx)(ed.default.disabled,b,u),ref:t,role:"link",tabIndex:-1,children:c});let k=(0,es.clsx)(ed.default.link,{[String(ed.default.alwaysUnderline)]:!!w},b,u);return l?(0,ei.jsx)(eo.default,{href:n||l,...j,...v,onNavigate:m,className:k,ref:t,children:c}):(0,ei.jsx)("span",{...j,className:k,onKeyDown:e=>{if("Enter"===e.key){var t;null==(t=j.onClick)||t.call(j)}},ref:t,role:"link",tabIndex:0,children:c})});ep.displayName="Link";var eh=t,ef=u,em=e.i(858269);let eg="/",ev={},ex=e=>{let t=ev[e];if(t)return t;let n=(0,em.default)(e);return ev[e]=n,n},ey=function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return[...e.split(eg),t,...r].filter(Boolean).map(ex).join(eg)};var eb=e.i(635813),ew=e.i(500116);function ej(e){let{as:t="span",width:n,height:r,boxHeight:i=r,button:a,pill:o,rounded:s,squared:l,style:c,show:u=!0,block:d=!0,className:p,vcenter:h,children:f,autoSize:m=!1,animated:g=!0}=e,v=t,x=m||!!(f&&!(n||r));n=n||24,r=r||24,i=i||r;let y=x?0:Number(i)-Number(r);return(0,eh.jsx)(v,{className:(0,ef.clsx)(ew.default.skeleton,p,{[ew.default.show]:u,[ew.default.wrapper]:x,[ew.default.loaded]:!x&&!!f,[ew.default.inline]:!d,[ew.default.pill]:o,[ew.default.rounded]:s,[ew.default.squared]:l,[ew.default.noAnimation]:!g,[ew.default.button]:a}),"data-geist-skeleton":"","data-testid":ey("legacy","skeleton"),"data-version":"v1",style:x?c:{width:(0,eb.px)(n),minHeight:(0,eb.px)(r),marginBottom:(h?y/2:y)||void 0,marginTop:(h?y/2:void 0)||void 0,...c},children:f})}var eC=eu,ek=d,eS=t,eN=c;let eE=()=>{if(!("document"in globalThis))return 0;let e=400,t=document.createElement("div");t.style.width="".concat(e,"px"),t.style.height="".concat(e,"px"),t.style.overflow="scroll",document.body.appendChild(t);let n=e-t.scrollWidth;return t.remove(),n},eM=40,eI=8,eD=56,eT=8,eA=2,eL=24,eP=24,eR=8,e_={root:{startTime:0,endTime:1,duration:1,depth:0,children:[]},spanMap:{},resourceMap:{},filter:"",selected:null,baseScale:1,scaleRatio:1,scale:1,width:640,height:480,timelineWidth:640,timelineHeight:480,panelWidth:380,panelHeight:480,scrollbarWidth:0,timelineRef:{current:null},scrollSnapshotRef:{current:void 0},memoCacheRef:{current:new Map},getQuickLinks:()=>[],withPanel:!1,isMobile:!1},eO=e=>(e.width-e.scrollbarWidth-Number(!!(e.selected&&e.withPanel))*e.panelWidth)/e.root.duration,eF=(0,eN.createContext)({state:e_,dispatch:()=>{}});eF.displayName="TraceViewerContext";let eV=(e,t)=>{switch(t.type){case"setRoot":return e.scrollSnapshotRef.current=void 0,e.memoCacheRef.current.clear(),eV({...e,root:t.root,spanMap:t.spanMap,resourceMap:Object.fromEntries(t.resources.map(e=>{let{name:t,attributes:n}=e;return[t,n]}))},{type:"detectBaseScale"});case"setSize":{let n=t.height-eD-eM-3*eI,r=e.withPanel&&t.width<=768,i={...e,width:t.width,height:t.height,timelineWidth:t.width-Number(!!(e.selected&&e.withPanel&&!r))*e.panelWidth,timelineHeight:n,panelHeight:n,isMobile:r};return i.width!==e.width&&(i=eV(i,{type:"detectBaseScale"})),i}case"setPanelWidth":{let n=Math.max(240,Math.min(t.width,e.width-240));return{...e,timelineWidth:e.width-n,panelWidth:n}}case"setFilter":return{...e,filter:t.filter};case"deselect":return eV({...e,selected:null,timelineWidth:e.width},{type:"minScale"});case"select":{let n=e.spanMap[t.id];if(!n)return e;return{...e,selected:n,timelineWidth:e.width-(e.withPanel&&!e.isMobile?e.panelWidth:0)}}case"escape":if(e.selected)return eV(e,{type:"deselect"});return eV(e,{type:"resetScale"});case"toggleSelection":{var n;let r=e;if(e.selected&&(r=eV(r,{type:"deselect"})),(null==(n=e.selected)?void 0:n.span.spanId)===t.id)return r;return eV(r,{type:"select",id:t.id})}case"detectBaseScale":{let t=(e.width-e.scrollbarWidth)/e.root.duration;return{...e,baseScale:t,scale:t*e.scaleRatio}}case"setScale":return{...e,scaleRatio:t.scale,scale:e.baseScale*t.scale};case"resetScale":return eV(e,{type:"scaleToRange",t1:e.root.startTime,t2:e.root.endTime});case"scaleToNode":{let n=e.spanMap[t.id];if(!n)return e;return eV(eV(e,{type:"setScale",scale:(e.width-e.scrollbarWidth-(e.withPanel&&!e.isMobile?e.panelWidth:0))/n.duration/e.baseScale}),{type:"setScrollSnapshot",anchorT:n.startTime-e.root.startTime,anchorX:0})}case"scaleToRange":{let n=Math.abs(t.t1-t.t2);return eV(eV(e,{type:"setScale",scale:(e.width-e.scrollbarWidth-(e.selected&&e.withPanel?e.panelWidth:0))/n/e.baseScale}),{type:"setScrollSnapshot",anchorT:Math.min(t.t1,t.t2)-e.root.startTime,anchorX:0})}case"adjustScaleRatio":{let{scaleRatio:n}=e;switch(t.direction){case -1:n*=.8;break;case 1:n*=1.25;break;default:n=1}let r=e.timelineRef.current;if(!r)return console.warn("timelineRef is null"),e;let{clientWidth:i,scrollLeft:a}=r;return eV(eV({...e,scaleRatio:n,scale:e.baseScale*n},{type:"minScale"}),{type:"setScrollSnapshot",anchorT:(a+.5*i)/e.scale,anchorX:.5*i})}case"trackpadScale":{let n=Math.max(eO(e)/e.baseScale,e.scaleRatio*(1+.2*Math.sign(t.delta)*Math.sqrt(Math.abs(t.delta))));return eV({...e,scaleRatio:n,scale:e.baseScale*n},{type:"setScrollSnapshot",anchorT:t.anchorT,anchorX:t.anchorX})}case"minScale":{let t=eO(e);if(e.scale>=t)return e;return{...e,scale:t,scaleRatio:t/e.baseScale}}case"setScrollSnapshot":{let n=e.timelineRef.current;if(!n)return e;let{anchorT:r,anchorX:i}=t,a=r*e.scale-i,{scrollTop:o}=n,s=(o-eP-eT)/(eL+eA),l=s+Math.ceil(e.timelineHeight/(eL+eA));return e.scrollSnapshotRef.current={anchorT:r,anchorX:i,scrollLeft:a,scrollTop:o,startTime:e.root.startTime+a/e.scale,endTime:e.root.startTime+(a+e.timelineWidth)/e.scale,startRow:s,endRow:l,scale:e.scale},e}case"setWithPanel":if(e.withPanel===t.withPanel)return e;return{...e,withPanel:t.withPanel};case"forceRender":return e.memoCacheRef.current.set("",{}),{...e}}};function eB(e){let{getQuickLinks:t,withPanel:n=!1,children:r}=e,i=(0,eN.useRef)(null),a=(0,eN.useRef)(void 0),o=(0,eN.useRef)(t);o.current=t;let s=(0,eN.useRef)(new Map),l=(0,eN.useRef)(new Map),[c,u]=(0,eN.useReducer)(eV,e_,e=>({...e,scrollbarWidth:eE(),timelineRef:i,scrollSnapshotRef:a,memoCacheRef:s,withPanel:n,getQuickLinks:e=>{var t;let n=e.spanId,r=l.current.get(n);if(r)return r;let i=(null==(t=o.current)?void 0:t.call(o,e))||[];return l.current.set(n,i),i}}));(0,eN.useEffect)(()=>u({type:"setWithPanel",withPanel:n}),[n]);let d=(0,eN.useMemo)(()=>({state:c,dispatch:u}),[c,u]);return(0,eS.jsx)(eF.Provider,{value:d,children:r})}let ez=()=>(0,eN.useContext)(eF);var eH=e.i(1117),eU=t,eq=c,eW=u,eZ=d,eG=eH;let eK=(e,t)=>e.duration*t<64,eX=(e,t)=>e.duration*t>=500,e$=e=>e.isVercel?String(eZ.default.colorVercel):String(eZ.default["color".concat(e.resourceIndex%5)]),eY=(e,t)=>{let n=eX(e,t),r=e.isHovered&&!n&&!1!==e.isHighlighted;return(0,eW.clsx)(eZ.default.spanNode,n&&eZ.default.huge,eK(e,t)&&eZ.default.small,e.isSelected&&eZ.default.selected,r&&eZ.default.xHover,e.isHighlighted?eZ.default.colorHighlight:e$(e),!1===e.isHighlighted&&eZ.default.unlit)},eJ=e=>e.isInstrumentationHint?"Get Started":(0,eG.formatDuration)(e.duration),eQ=(0,eq.memo)(function(e){let{root:t,scale:n,spans:r,scrollSnapshotRef:i,cache:a}=e;return r.map(e=>(0,eU.jsx)(e0,{cacheKey:a.get(e.span.spanId),node:e,root:t,scale:n,scrollSnapshotRef:i},e.span.spanId))}),e0=(0,eq.memo)(function(e){let{node:t,root:n,scale:r,scrollSnapshotRef:i}=e,a=(0,eq.useRef)(null);t.ref=a;let{span:o}=t,s=eJ(t),l=(t.startTime-n.startTime)*r,c=eP+(eL+eA)*t.row,u=t.duration*r,d=eL,p=eX(t,r),h=eK(t,r),f=t.isHovered&&!p&&!1!==t.isHighlighted;h&&!f&&(d*=.4,c+=(eL-d)*.5);let m=!1;if(f){let{duration:e,endTime:r}=n,a=i.current;a&&(e=a.endTime-a.startTime,r=a.endTime),m=r-t.startTime<.25*e}return(0,eU.jsxs)(eU.Fragment,{children:[(0,eU.jsx)("button",{"aria-label":"".concat(o.name," - ").concat(s),className:eY(t,r),"data-span-id":o.spanId,"data-start-time":t.startTime-n.startTime,"data-right-side":m,ref:a,style:{"--span-width":"".concat(u,"px"),minWidth:f?u:void 0,width:f?void 0:u,height:d,maxWidth:f&&!m?(n.endTime-t.startTime)*r:void 0,containIntrinsicWidth:f?void 0:u,containIntrinsicHeight:d,left:m?void 0:l,right:m?(n.endTime-t.endTime)*r:void 0,top:c},type:"button",children:h&&!f?null:(0,eU.jsxs)(eU.Fragment,{children:[(0,eU.jsx)("span",{className:eZ.default.spanName,children:t.label||o.name}),p?(0,eU.jsx)("span",{className:eZ.default.spanSpacer}):null,f||u>128?(0,eU.jsx)("span",{className:eZ.default.spanDuration,children:s}):null]})}),t.events&&!h?t.events.map(e=>(0,eU.jsx)(e1,{event:e,node:t,root:n,scale:r},e.key)):null]})}),e1=(0,eq.memo)(function(e){let{event:t,node:n,root:r,scale:i}=e,a=(0,eq.useRef)(null);t.ref=a;let{event:{name:o}}=t,s=(0,eG.formatDuration)(t.timestamp-r.startTime),l=(t.timestamp-r.startTime)*i,c=eP+(eL+eA)*n.row;return(0,eU.jsxs)("div",{"aria-label":"".concat(o," - ").concat(s),className:(0,eW.clsx)(eZ.default.spanNodeEvent,n.isHighlighted?eZ.default.colorHighlight:e$(n),!1===n.isHighlighted&&eZ.default.unlit),"data-hovered":t.isHovered,ref:a,style:{left:l,top:c},children:[(0,eU.jsxs)("div",{className:(0,eW.clsx)(eZ.default.hoverInfo,(t.timestamp-n.startTime)/n.duration<.5?eZ.default.alignStart:eZ.default.alignEnd),children:[(0,eU.jsx)("span",{className:eZ.default.eventName,children:o}),(0,eU.jsx)("span",{className:eZ.default.eventTimestamp,children:s})]}),(0,eU.jsx)("div",{className:eZ.default.eventDiamond})]})}),e2=e=>"".concat((100*e).toFixed(3),"%"),e5=(e,t)=>e<t?-1:+(e>t),e4=e=>{let t={};for(let[n,r]of Object.entries(e)){let e=n.indexOf("."),i="",a="";-1!==e?(i=n.substring(0,e),a=n.substring(e+1)):a=n;let o=t[i];o||(o={prefix:i,attributes:[]},t[i]=o),o.attributes.push({key:n,suffix:a,value:String(r)})}let n=Array.from(Object.values(t)).sort((e,t)=>e5(e.prefix,t.prefix));for(let e of n)e.attributes.sort((e,t)=>e5(e.suffix,t.suffix));return n},e3=(e,t)=>{let n=[];if(!t)return n;for(let e=t;"parent"in e;e=e.parent)n.unshift(e);return n};function e7(e){var t;let{attached:n=!1}=e,{state:{root:r,selected:i,resourceMap:a,getQuickLinks:o,isMobile:s},dispatch:l}=ez(),c=(0,h.useMemo)(()=>{var e;return e4(null!=(e=null==i?void 0:i.span.attributes)?e:{})},[i]),u=(0,h.useMemo)(()=>{let e=null==i?void 0:i.span.resource;if(!e)return[];let t=a[e];return t?e4(t):[]},[a,i]),d=(0,h.useMemo)(()=>e3(r,i),[r,i]);if(!i)return null;let{span:v}=i,x=ti(i);return(0,p.jsxs)(T,{className:(0,f.clsx)(ek.default.spanDetailPanel,s&&ek.default.mobile),children:[n&&!s?(0,p.jsx)(td,{}):null,(0,p.jsx)(T,{className:ek.default.spanDetailPanelTop,direction:"row",children:(0,p.jsxs)(T,{align:"center",className:ek.default.spanDetailPanelTopInfo,direction:"row",gap:3,justify:"space-between",children:[(0,p.jsxs)(T,{align:"center",className:ek.default.spanDetailPanelTruncatedHeading,direction:"row",gap:3,children:[i.isInstrumentationHint?null:(0,p.jsx)(en,{as:"span",className:ek.default.spanDetailPanelDuration,monospace:!0,size:13,children:(0,eH.formatDuration)(i.duration)}),(0,p.jsx)(en,{as:"span",className:ek.default.spanDetailPanelName,size:13,title:v.name,children:v.name})]}),(0,p.jsxs)(T,{align:"center",className:ek.default.spanDetailPanelCorner,direction:"row",gap:2,children:[(0,p.jsx)(T,{direction:"row",children:(0,p.jsx)("div",{className:ek.default.spanDetailPanelCloseVerticalRule})}),(0,p.jsx)(m.Button,{"aria-label":"Close Span Details",className:ek.default.spanDetailPanelClose,onClick:()=>l({type:"deselect"}),shape:"square",size:"small",svgOnly:!0,touchEventWorkaround:!0,type:"tertiary",children:(0,p.jsx)(g.Cross,{color:"gray-700",size:20})})]})]})}),(0,p.jsxs)(T,{className:ek.default.spanDetailPanelBody,gap:3,children:[i.isVercel?(0,p.jsx)(ta,{node:i}):null,i.isInstrumentationHint?(0,p.jsx)(tc,{}):null,!i.isInstrumentationHint&&d.length?(0,p.jsx)(e6,{className:ek.default.ancestorGroup,name:"Location",children:d.map(e=>(0,p.jsxs)("button",{className:ek.default.ancestorNode,onClick:()=>l({type:"select",id:e.span.spanId}),type:"button",children:[(0,p.jsxs)("div",{className:ek.default.ancestorText,children:[(0,p.jsx)("span",{className:ek.default.ancestorName,children:e.label||e.span.name}),(0,p.jsx)("span",{className:ek.default.ancestorDuration,children:(0,eH.formatDuration)(e.duration)})]}),(0,p.jsx)("span",{"aria-hidden":!0,className:ek.default.ancestorLineContainer,children:(0,p.jsx)("span",{className:(0,f.clsx)(ek.default.ancestorLine,e$(e)),style:{left:e2((e.startTime-r.startTime)/r.duration),width:e2(e.duration/r.duration)}})})]},"".concat(i.span.spanId,".").concat(e.span.spanId)))}):null,x?(0,p.jsx)(to,{getQuickLinks:o,span:i.span}):null,(null==(t=i.events)?void 0:t.length)?(0,p.jsx)(e6,{name:"Events",children:i.events.map(e=>(0,p.jsxs)(h.Fragment,{children:[(0,p.jsxs)("dl",{className:ek.default.spanDetailPanelAttribute,children:[(0,p.jsx)("dt",{className:ek.default.spanDetailPanelAttributeKey,children:e.event.name}),(0,p.jsx)("dd",{className:ek.default.spanDetailPanelAttributeValue,children:(0,eH.formatDuration)(e.timestamp-r.startTime)})]}),Object.entries(e.event.attributes).map(t=>{let[n,r]=t;return(0,p.jsx)(tu,{name:"".concat(e.event.name,".").concat(n),value:r},n)})]},e.key))}):null,c.length?(0,p.jsx)(e6,{name:"Attributes",children:c.map(e=>(0,p.jsx)(h.Fragment,{children:e.attributes.map(e=>{let{key:t,value:n}=e;return(0,p.jsx)(tu,{name:t,value:n},t)})},e.prefix))}):null,u.length?(0,p.jsx)(e6,{name:"Resource",children:u.map(e=>(0,p.jsx)(h.Fragment,{children:e.attributes.map(e=>{let{key:t,value:n}=e;return(0,p.jsx)(tu,{name:t,value:n},t)})},e.prefix))}):null,i.isInstrumentationHint?null:(0,p.jsxs)(e6,{name:"Library",children:[(0,p.jsx)(tu,{name:"name",value:v.library.name}),v.library.version?(0,p.jsx)(tu,{name:"version",value:v.library.version}):null]})]})]})}let e9="vc-trace-span-exp:";function e6(e){let{name:t,className:n="",children:r}=e,[i,a]=(0,h.useState)(()=>!("localStorage"in globalThis)||"0"!==localStorage.getItem("".concat(e9).concat(t))),o=(0,h.useCallback)(()=>{a(e=>{let n=!e;return localStorage.setItem("".concat(e9).concat(t),String(Number(n))),n})},[t]);return(0,p.jsxs)(T,{className:(0,f.clsx)(ek.default.detailGroup,i?ek.default.expanded:ek.default.collapsed,n),children:[(0,p.jsxs)("button",{className:ek.default.detailHeading,onClick:o,type:"button",children:[(0,p.jsx)("span",{children:t}),(0,p.jsx)(v.ChevronDown,{className:ek.default.detailHeadingIcon})]}),i?r:null]})}let e8=new Set(["OPTIONS","HEAD","GET","PUT","POST","DELETE"]),te={"Resolve Deployment":"How long it took Vercel's routing layer to retrieve details for the deployment.","Resolve Cache":"How long it took Vercel's routing layer to check for a cached function invocation.","Resolve Route":"How long it took Vercel's routing layer to resolve routing rules, including redirects and rewrites.","Invoke Middleware":"How long it took this middleware to start and run user code.","Invoke Function":"How long it took this Vercel Function to start and run user code.",waitUntil:"How long it took to run user code inside of waitUntil.","Start VM":"How long it took to start the Virtual Machine which contains the Vercel Function.","Spawn Node.js":"How long it took the Virtual Machine to start the Node.js runtime.","Spawn Python":"How long it took the Virtual Machine to start the Python runtime.","Init User Code":"How long it took to import the user code and run any globally-scoped code."},tt=new Set(["Start VM","Spawn Node.js","Spawn Python","Init User Code"]),tn=e=>{if(!e||!("span"in e))return null;let t=e.span.attributes,n=t["vercel.region"]||t["vercel.function.region"];return n?String(n):null},tr=e=>{let{name:t}=e.span,n=tn(e),r=tn(e.parent);return"true"===e.span.attributes["vercel.middleware.internal"]?"The Vercel Toolbar created this middleware.":tt.has(t)||"Invoke Function"===t&&e.children.some(e=>tt.has(e.span.name))?"This function encountered a cold start.":n&&r&&n!==r?"This request was routed across regions.":null},ti=e=>{if(!e.isVercel)return!1;let{name:t}=e.span,n=t.indexOf(" ");if(-1===n)return!1;let r=t.substring(0,n);return e8.has(r)};function ta(e){let{node:t}=e,{name:n}=t.span,r=te[n];if(!r&&ti(t)&&(r="How long it took for Vercel to process the request and send the response."),!r)return null;let i=tr(t);return(0,p.jsx)(e6,{name:"What is this?",children:(0,p.jsxs)("div",{className:ek.default.infraSpanDescription,children:[(0,p.jsx)("span",{children:r}),i?(0,p.jsx)(z,{children:i}):i]})})}let to=(0,h.memo)(function(e){let{getQuickLinks:t,span:n}=e,r=t(n);return r.length?(0,p.jsx)(e6,{name:"Links",children:r.map(e=>{let{key:t,value:n}=e;return(0,p.jsx)(tl,{link:n,name:t},t)})}):null});function ts(e){let[t,n]=(0,h.useState)({}),r=void 0!==e.__resolvedValue||void 0!==e.__rejectedValue;return(0,h.useEffect)(()=>{r||e.then(t=>{e.__resolvedValue=t}).catch(t=>{e.__rejectedValue=t}).finally(()=>n({}))},[e,r]),e.__resolvedValue}function tl(e){let{name:t,link:n}=e,r=ts(n);return(0,p.jsxs)(ep,{as:r?void 0:"span",className:(0,f.clsx)(ek.default.spanDetailPanelAttribute,ek.default.spanDetailPanelQuickLink),href:(null==r?void 0:r.href)||"",children:[(0,p.jsx)("span",{className:ek.default.spanDetailPanelAttributeKey,children:t}),(0,p.jsx)("span",{className:(0,f.clsx)(ek.default.spanDetailPanelAttributeValue,ek.default.spanDetailPanelQuickLinkLabel),children:r?(0,p.jsxs)(p.Fragment,{children:[r.label,r.icon||(0,p.jsx)(eC.ExternalSmall,{color:"gray-900"})]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(ej,{height:18,width:32+8*t.length}),(0,p.jsx)(ej,{height:18,rounded:!0,width:18})]})})]})}function tc(){return(0,p.jsx)(e6,{name:"What is this?",children:(0,p.jsxs)("div",{className:ek.default.infraSpanDescription,children:[(0,p.jsx)("span",{children:"You can visualize your application's spans alongside Vercel's spans in this viewer."}),(0,p.jsx)(er.ButtonLink,{href:"https://vercel.com/docs/session-tracing#adding-custom-spans",size:"small",target:"_blank",children:"Get Started"})]})})}function tu(e){let{name:t,value:n}=e;return(0,p.jsxs)("dl",{className:ek.default.spanDetailPanelAttribute,children:[(0,p.jsx)("dt",{className:ek.default.spanDetailPanelAttributeKey,children:t}),(0,p.jsx)("dd",{className:ek.default.spanDetailPanelAttributeValue,title:String(n),children:String(n)})]})}function td(){let{state:{panelWidth:e},dispatch:t}=ez(),n=(0,h.useRef)({start:{x:0,width:e},x:0,width:e,isHeld:!1});n.current.width=e;let r=(0,h.useCallback)(e=>{if("mouse"!==e.pointerType)return;e.preventDefault();let t=n.current;t.start.x=e.clientX,t.x=e.clientX,t.start.width=t.width,t.isHeld=!0},[]),i=(0,h.useCallback)(()=>{t({type:"setPanelWidth",width:e_.panelWidth})},[t]);return(0,h.useEffect)(()=>{let e=0,r=()=>{let e=n.current;t({type:"setPanelWidth",width:e.start.width+e.start.x-e.x})},i=t=>{n.current.isHeld&&(t.preventDefault(),n.current.x=t.clientX,cancelAnimationFrame(e),e=requestAnimationFrame(r))},a=()=>{n.current.isHeld=!1};return window.addEventListener("pointermove",i),window.addEventListener("pointerup",a),()=>{window.removeEventListener("pointermove",i),window.removeEventListener("pointerup",a)}},[t]),(0,p.jsx)("div",{"aria-hidden":!0,className:ek.default.spanDetailPanelResizer,onDoubleClick:i,onPointerDown:r})}var tp=t,th=c,tf=m,tm=e.i(605528);let tg=(0,tm.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M1.5 6.5C1.5 3.73858 3.73858 1.5 6.5 1.5C9.26142 1.5 11.5 3.73858 11.5 6.5C11.5 9.26142 9.26142 11.5 6.5 11.5C3.73858 11.5 1.5 9.26142 1.5 6.5ZM6.5 0C2.91015 0 0 2.91015 0 6.5C0 10.0899 2.91015 13 6.5 13C8.02469 13 9.42677 12.475 10.5353 11.596L13.9697 15.0303L14.5 15.5607L15.5607 14.5L15.0303 13.9697L11.596 10.5353C12.475 9.42677 13 8.02469 13 6.5C13 2.91015 10.0899 0 6.5 0ZM4.125 5.875H4.75H5.875V4.75V4.125H7.125V4.75V5.875H8.25H8.875V7.125H8.25H7.125V8.25V8.875H5.875V8.25V7.125H4.75H4.125V5.875Z" fill="currentColor"/>'),tv=(0,tm.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M6.5 1.5C3.73858 1.5 1.5 3.73858 1.5 6.5C1.5 9.26142 3.73858 11.5 6.5 11.5C9.26142 11.5 11.5 9.26142 11.5 6.5C11.5 3.73858 9.26142 1.5 6.5 1.5ZM0 6.5C0 2.91015 2.91015 0 6.5 0C10.0899 0 13 2.91015 13 6.5C13 8.02469 12.475 9.42677 11.596 10.5353L15.0303 13.9697L15.5607 14.5L14.5 15.5607L13.9697 15.0303L10.5353 11.596C9.42677 12.475 8.02469 13 6.5 13C2.91015 13 0 10.0899 0 6.5ZM4.75 5.875H4.125V7.125H4.75H8.25H8.875V5.875H8.25H4.75Z" fill="currentColor"/>');var tx=e.i(330293),ty=d;function tb(){let{dispatch:e}=ez(),t=(0,th.useCallback)(()=>{e({type:"adjustScaleRatio",direction:1})},[e]),n=(0,th.useCallback)(()=>{e({type:"adjustScaleRatio",direction:-1})},[e]),r=(0,th.useCallback)(()=>{e({type:"adjustScaleRatio",direction:0})},[e]);return(0,tp.jsxs)(T,{className:ty.default.zoomButtonGroup,direction:"row",children:[(0,tp.jsx)(tf.Button,{"aria-label":"Zoom Out",className:ty.default.zoomButton,onClick:n,svgOnly:!0,variant:"unstyled",children:(0,tp.jsx)(tv,{})}),(0,tp.jsx)("div",{className:ty.default.divider}),(0,tp.jsx)(tf.Button,{"aria-label":"Reset Zoom",className:ty.default.zoomButton,onClick:r,svgOnly:!0,variant:"unstyled",children:(0,tp.jsx)(tx.Minus,{})}),(0,tp.jsx)("div",{className:ty.default.divider}),(0,tp.jsx)(tf.Button,{"aria-label":"Zoom In",className:ty.default.zoomButton,onClick:t,svgOnly:!0,variant:"unstyled",children:(0,tp.jsx)(tg,{})})]})}var tw=e.i(158303),tj=t,tC=u,tk=c,tS=d,tN=eH,tE=c;function tM(e){let t=(0,tE.useRef)({});return{setStyle:(0,tE.useCallback)((n,r)=>{if(t.current[n]=r,e.current){if(!r)return void e.current.style.removeProperty(n);e.current.style.setProperty(n,r)}},[e]),styleRef:t,style:{...t.current}}}var tI=c;function tD(e){let t=(0,tI.useRef)(e);t.current=e,(0,tI.useEffect)(()=>{let e=0,n=0,r=()=>{t.current(e),e=0},i=t=>{if(!t.ctrlKey&&!t.metaKey)return;t.preventDefault();let i=-t.deltaY;switch(t.deltaMode){case WheelEvent.DOM_DELTA_PAGE:i*=window.innerHeight;break;case WheelEvent.DOM_DELTA_LINE:i*=20}e+=i,cancelAnimationFrame(n),n=requestAnimationFrame(r)};return window.addEventListener("wheel",i,{passive:!1}),()=>{window.removeEventListener("wheel",i),cancelAnimationFrame(n)}},[])}let tT=[1,2,4,5,8,10];function tA(e){let{scale:t}=e,{state:{root:n}}=ez(),r=n.duration,i=Math.floor(Math.log10(r)),a=Math.max(2,Math.pow(10,i)*(Math.floor(Math.log10(.5*r))===i?1:.5)),o=a*t,s=1;for(let e of tT){if(a/e<24)break;s=e}a/=s,o/=s;let l=Math.ceil(r/a),c=Math.ceil(100/o)||1;return(0,tj.jsx)("div",{className:tS.default.markersContainer,children:(0,tj.jsx)("div",{"aria-hidden":!0,className:tS.default.markers,style:{width:Math.floor(n.duration*t+15),visibility:-1!==t?"visible":"hidden","--marker-width":"".concat(o,"px")},children:Array(l).fill(null).map((e,t)=>{let n=t%c==0;return(0,tj.jsx)("span",{className:(0,tC.clsx)(tS.default.marker,!n&&tS.default.notch),children:n?(0,tj.jsx)("span",{className:tS.default.markerLabel,children:(0,tN.formatDuration)(a*t)}):null},String(t))})})})}function tL(e){let{events:t,root:n,scale:r}=e;return(0,tj.jsx)("div",{className:tS.default.eventMarkersContainer,children:(0,tj.jsx)("div",{"aria-hidden":!0,className:tS.default.eventMarkers,style:{width:Math.floor(n.duration*r)},children:t.map(e=>(0,tj.jsx)("span",{className:(0,tC.clsx)(tS.default.eventMarker),style:{left:Math.floor((e.timestamp-n.startTime)*r)}},e.key))})})}let tP=2;function tR(e){let{memoCacheRef:t,timelineRef:n,root:r,spans:i,events:a,scale:o,dispatch:s,scrollSnapshotRef:l}=e,c=(0,tk.useRef)(!1),u=(0,tk.useRef)(i);u.current=i;let d=(0,tk.useRef)(a);d.current=a;let p=(0,tk.useRef)(null),{style:h,setStyle:f}=tM(p),m=(0,tk.useRef)(null),g=(0,tk.useRef)(null),{style:v,setStyle:x}=tM(g),y=(0,tk.useRef)(void 0),b=(0,tk.useRef)(null),{style:w,setStyle:j}=tM(b),C=(0,tk.useRef)(0);(0,tk.useEffect)(()=>{let e=n.current;if(!e)return;let i=C.current,a=0,l=!1,p=!1,h=!1,g=!1,v=0,w=0,S=Date.now()+500,N=()=>{y.current||(y.current=e.getBoundingClientRect())},E=e=>y.current?(e-eP-eT)/(eL+eA):0,M=()=>{let e=t.current;for(let t of u.current)t.isHovered&&(t.isHovered=!1,e.set(t.span.spanId,{}));s({type:"forceRender"})},I=0,D=()=>{var n,g,C,k,T,A,L,P;if(!c.current)return;y.current||N();let R=y.current;if(!R)return;let{scrollLeft:_,scrollTop:O}=e,F=Math.max(0,Math.min(i+_-R.left-eT,r.duration*o)),V="".concat(F-_+eT,"px");x("left",V),f("left",V);let B=r.startTime+F/o,z=B-r.startTime;if(z<0||z>r.duration?null==(n=m.current)||n.removeAttribute("data-text"):null==(g=m.current)||g.setAttribute("data-text",(0,tN.formatTimeSelection)(z)),l){let e,t,n=i-a,s=Math.abs(n);if(!h){if(s<4)return;h=!0,j("display","flex"),M()}n>0?(j("left",""),j("right","0")):(j("left","0"),j("right","")),j("width","".concat(s,"px"));let l=Math.max(0,Math.min(a+_-R.left-eT,r.duration*o))/o;l<z?(e=l,t=z):(e=z,t=l),null==(C=b.current)||C.setAttribute("data-range","".concat((0,tN.formatTimeSelection)(e)," — ").concat((0,tN.formatTimeSelection)(t))),null==(k=b.current)||k.setAttribute("data-duration","".concat((0,tN.formatTimeSelection)(t-e)," selected"))}if(Date.now()<S){I=requestAnimationFrame(D);return}if(_!==v||O!==w){v=_,w=O,I=requestAnimationFrame(D);return}if(i-R.left<128?null==(T=m.current)||T.setAttribute("data-align","left"):i-R.left>R.width-128?null==(A=m.current)||A.setAttribute("data-align","right"):null==(L=m.current)||L.removeAttribute("data-align"),!h&&!p){let e=t.current,n=E(O)-tP,r=E(O+R.height)+tP;for(let t of u.current){let i=t.row>=n&&t.row<=r&&B>=t.startTime&&B<=t.endTime;t.isHovered!==i&&(t.isHovered=i,e.set(t.span.spanId,{}))}let i=12/o;for(let e of d.current){let t=B>=e.timestamp-i&&B<=e.timestamp+i;if(e.isHovered===t)continue;e.isHovered=t;let n=null==(P=e.ref)?void 0:P.current;n&&n.setAttribute("data-hovered",String(t))}s({type:"forceRender"})}};I=requestAnimationFrame(D);let T=e=>{"mouse"===e.pointerType&&(c.current=!0)},A=()=>{c.current&&(c.current=!1,M())},L=e=>{let{clientX:t}=e;C.current=i=t,cancelAnimationFrame(I),I=requestAnimationFrame(D)},P=e=>{e.preventDefault()},R=e=>{var t;if(2===e.button)g=!0,e.preventDefault();else{if(0!==e.button)return;g=!1}(null==(t=n.current)?void 0:t.contains(e.target))?(a=i,l=!0):(p=!0,requestAnimationFrame(M))},_=t=>{if(p=!1,!l||(l=!1,!h))return;if(h=!1,j("display",""),j("left",""),j("right",""),j("width",""),t.preventDefault(),t.stopImmediatePropagation(),g){g=!1;return}y.current||N();let n=y.current;if(!n)return;let{scrollLeft:c}=e,u=Math.max(0,Math.min((a+c-n.left-eT)/o,r.duration)),d=Math.max(0,Math.min((i+c-n.left-eT)/o,r.duration));s({type:"scaleToRange",t1:u+r.startTime,t2:d+r.startTime})},O=e=>{l&&"Escape"===e.key&&(g=!0,_(e))},F=()=>{y.current=void 0,k.current=void 0,cancelAnimationFrame(I),I=requestAnimationFrame(D)},V=()=>{cancelAnimationFrame(I),I=requestAnimationFrame(D)},B=new ResizeObserver(()=>{y.current=void 0});return B.observe(e),window.addEventListener("mousemove",L),e.addEventListener("contextmenu",P),window.addEventListener("mousedown",R),window.addEventListener("mouseup",_),window.addEventListener("blur",_),window.addEventListener("keydown",O,!0),window.addEventListener("scroll",F),e.addEventListener("scroll",V),e.addEventListener("pointerenter",T),e.addEventListener("pointerleave",A),()=>{B.disconnect(),window.removeEventListener("mousemove",L),e.removeEventListener("contextmenu",P),window.removeEventListener("mousedown",R),window.removeEventListener("mouseup",_),window.removeEventListener("blur",_),window.removeEventListener("keydown",O,!0),window.removeEventListener("scroll",F),e.removeEventListener("scroll",V),e.removeEventListener("pointerenter",T),e.removeEventListener("pointerleave",A),cancelAnimationFrame(I),C.current=i,M()}},[s,r,o,x,f,j,t,n,l]);let k=(0,tk.useRef)(void 0);return tD(e=>{var t,r;let i=n.current;if(!i)return;null!=(r=(t=y).current)||(t.current=i.getBoundingClientRect());let a=y.current,l=Math.max(0,Math.min(C.current-a.left-eT,a.width-2*eT)),c=0,u=k.current;(null==u?void 0:u.anchorX)===l?c=u.anchorT:k.current=u={anchorT:c=(i.scrollLeft+l)/o,anchorX:l},s({type:"trackpadScale",delta:e/64,anchorT:c,anchorX:l})}),(0,tj.jsxs)(tj.Fragment,{children:[(0,tj.jsx)("div",{className:tS.default.cursorMarkerStickyParent,children:(0,tj.jsx)("div",{className:tS.default.cursorMarkerLabelContainer,ref:p,style:h,children:(0,tj.jsx)("div",{className:tS.default.cursorMarkerLabel,ref:m})})}),(0,tj.jsx)("div",{className:tS.default.cursorMarkerStickyParent,children:(0,tj.jsx)("div",{className:tS.default.cursorMarkerContainer,ref:g,style:v,children:(0,tj.jsx)("div",{className:tS.default.cursorMarker,children:(0,tj.jsx)("div",{className:tS.default.cursorSelection,ref:b,style:w})})})})]})}var t_=c,tO=tw;function tF(){return[]}let tV=t=>{let{state:n,dispatch:r}=ez(),{root:i,filter:a,scale:o,timelineRef:s,timelineWidth:l,spanMap:c,scrollSnapshotRef:u,selected:d,memoCacheRef:p}=n,h=tB(n.timelineHeight),f=(0,t_.useRef)(0),[m,g]=(0,t_.useState)(tF),[v,x]=(0,t_.useState)(tF),[y,b]=(0,t_.useState)(tF),[w,j]=(0,t_.useState)(-1),C=(0,t_.useRef)(void 0);return(0,t_.useEffect)(()=>{var e;return null==(e=C.current)?void 0:e.call(C,a)},[a]),(0,t_.useEffect)(()=>{if(null==t?void 0:t.length){for(let e of m)for(let n of e){let e=t.includes(n.span.spanId);n.isHighlighted!==e&&(n.isHighlighted=e,p.current.set(n.span.spanId,{}))}r({type:"forceRender"})}},[m,t,r,p]),(0,t_.useEffect)(()=>{if(!i.startTime)return;let t=new Worker(e.r(775530)),n=++f.current,a=e=>{let t=e.data;switch(t.type){case"setRowsResult":if(t.isEnd)for(let e of t.rows)for(let t of e){var i,a;t.span=null!=(a=null==(i=c[t.span.spanId])?void 0:i.span)?a:t.span}g(t.rows);break;case"updateHighlight":{if(t.requestId!==n)return;let{matches:e}=t;g(t=>{for(let n of t)for(let t of n){let n=e.has(t.span.spanId);t.isHighlighted!==n&&(t.isHighlighted=n,p.current.set(t.span.spanId,{}))}return t}),r({type:"forceRender"})}}};t.addEventListener("message",a);let o={requestId:n,type:"calculateSpanPositions",root:i};return t.postMessage(o),C.current=e=>{let r=e.trim().toLocaleLowerCase();if(!r)return void g(e=>e.map(e=>e.map(e=>(e.isHighlighted=void 0,{...e}))));let a={type:"filterSpans",requestId:n=++f.current,root:i,filter:r};t.postMessage(a)},()=>{t.terminate()}},[i,c,r,p]),(0,t_.useEffect)(()=>{if(!m.length)return;let e=s.current,t=u.current,n=!1,r=!1,a=0,c=0,d=Math.max(500,.5*l),p=Array(m.length).fill(null),f=()=>{var e;r=!0;let n=Math.min(1+c+Math.ceil(null!=(e=null==t?void 0:t.endRow)?e:1/0),m.length);for(let e=n;e--;){if(p[e])continue;let t=g(e);if(Math.abs(t)>c){if(r=!1,t>0)continue;break}let n=[],i=m[e];if(i){for(let e of i){if(!(0,tO.adjustSpanVisibility)(e,o))continue;let t=v(e);a=Math.max(t,a),n.push({d:t,span:e})}p[e]=n}}},g=e=>t?e<t.startRow?e-t.startRow:e>t.endRow?e-t.endRow:0:0,v=e=>{if(!t)return 0;let n=0;e.endTime<t.startTime?n=t.startTime-e.endTime:e.startTime>t.endTime&&(n=e.startTime-t.endTime);let r=Math.abs(g(e.row));return n||r?Math.sqrt(Math.pow(n/o,2)+Math.pow(r*eL+eA,2)):0},y=()=>{if(!e)return;let{scrollLeft:n,scrollTop:r}=e,a=(r-eP-eT)/(eL+eA),s=a+Math.ceil(h/(eL+eA));u.current=t={anchorT:n/o,anchorX:0,scrollLeft:n,scrollTop:r,startTime:i.startTime+n/o,endTime:i.startTime+(n+l)/o,startRow:a,endRow:s,scale:o};for(let e=p.length;e--;)p[e]=null},w=0,C=()=>{(n||!t)&&(n=!1,y()),f();let e=[],i=[];for(let t of p)if(t)for(let{d:n,span:r}of t)!(n>c)&&(e.push(r),r.events&&i.push(...r.events));c<d&&(!r||c<a)&&(c=Math.min(d,c+100),w=requestAnimationFrame(C)),x(e),b(i),j(o)};C();let k=Date.now(),S=e=>{(e.ctrlKey||e.metaKey)&&(k=Date.now())};null==e||e.addEventListener("wheel",S);let N=()=>{Date.now()-k<=50||(n=!0,cancelAnimationFrame(w),w=requestAnimationFrame(C))};return null==e||e.addEventListener("scroll",N),()=>{cancelAnimationFrame(w),null==e||e.removeEventListener("wheel",S),null==e||e.removeEventListener("scroll",N)}},[m,i,o,u,s,l,h]),(0,t_.useEffect)(()=>{var e;let t;if(!d)return;for(let e of v)if(e.span.spanId===d.span.spanId){t=e;break}let n=null==t||null==(e=t.ref)?void 0:e.current;if(t&&n)return t.isSelected=!0,n.className=eY(t,o),()=>{t.isSelected=!1,n.className=eY(t,o)}},[v,o,d]),{rows:m,spans:v,events:y,scale:w}};function tB(e){let[t,n]=(0,t_.useState)(e);return(0,t_.useEffect)(()=>{if(t===e)return;let r=0,i=0,a=()=>{if(++r<=3){i=requestAnimationFrame(a);return}n(e)};return a(),()=>{cancelAnimationFrame(i)}},[t,e]),t}var tz=t,tH=c,tU=d;let tq=()=>"devicePixelRatio"in globalThis&&globalThis.devicePixelRatio||1,tW=()=>{let[e,t]=(0,tH.useState)(1);return(0,tH.useLayoutEffect)(()=>{let n=()=>t(tq()),r=matchMedia("(resolution: ".concat(e,"dppx)"));return r.addEventListener("change",n),n(),()=>{r.removeEventListener("change",n)}},[e]),e},tZ=eT,tG=(0,tH.memo)(function(e){let{timelineRef:t,rows:n,scale:r}=e,{state:{root:i,baseScale:a,timelineWidth:o,width:s,scrollbarWidth:l}}=ez(),c=s+2*eT,u=tW(),d=(0,tH.useRef)(null),p=(0,tH.useRef)(null),h=s/(s-l)*Math.min(s/o,a/r),f=Math.min(s,(o-l)*h);(0,tH.useEffect)(()=>{let e,n=!1,r=0,i=e=>{var t;return!!(null==(t=d.current)?void 0:t.contains(e))},a=0,o=()=>{if(!n||!e)return;let i=t.current;i&&(i.scrollLeft=(r-.5*f-e.left)/h)},s=e=>{({clientX:r}=e),cancelAnimationFrame(a),a=requestAnimationFrame(o)},l=t=>{var r;i(t.target)&&(n=!0,e=null==(r=d.current)?void 0:r.getBoundingClientRect(),s(t))},c=()=>{n=!1,e=void 0},u=e=>{i(e.target)&&e.cancelable&&e.preventDefault()},p=e=>{n&&e.cancelable&&e.preventDefault()};return window.addEventListener("pointerdown",l),window.addEventListener("pointermove",s),window.addEventListener("pointerup",c),window.addEventListener("blur",c),window.addEventListener("touchstart",u,{passive:!1}),window.addEventListener("touchmove",p,{passive:!1}),()=>{window.removeEventListener("pointerdown",l),window.removeEventListener("pointermove",s),window.removeEventListener("pointerup",c),window.removeEventListener("blur",c),window.removeEventListener("touchstart",u),window.removeEventListener("touchmove",p),cancelAnimationFrame(a)}},[t,h,f]),(0,tH.useEffect)(()=>{let e=p.current,t=null==e?void 0:e.getContext("2d");if(!e||!t)return;let r=requestAnimationFrame(()=>{t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.scale(u,u);let r=1,a=3,o=(c-2*tZ)/i.duration;for(let e of(t.fillStyle="#ccc",t.beginPath(),n))for(let n of e){let e=tZ-r+(r+a)*n.row;if(e>=eD-a-tZ)break;let s=tZ+(n.startTime-i.startTime)*o,l=n.duration*o;t.roundRect(s,e,l,a,a)}t.fill()});return()=>cancelAnimationFrame(r)},[u,i,c,n]);let m=(0,tH.useRef)(null),{style:g,setStyle:v}=tM(m);return(0,tH.useLayoutEffect)(()=>{let e=t.current;if(!e)return;let n=0,r=()=>{v("transform","translateX(".concat(tZ+e.scrollLeft*h,"px)"))};r();let i=()=>{cancelAnimationFrame(n),n=requestAnimationFrame(r)};return e.addEventListener("scroll",i),()=>{cancelAnimationFrame(n),e.removeEventListener("scroll",i)}},[t,h,v]),(0,tz.jsxs)("div",{className:tU.default.mapContainer,ref:d,style:{width:f>0?c:"100%",height:eD},children:[(0,tz.jsx)("canvas",{className:tU.default.mapCanvas,height:eD*u,ref:p,style:{width:c,height:eD},width:c*u}),(0,tz.jsx)("div",{className:tU.default.mapThumb,ref:m,style:{transform:g.transform,width:f>0?f:"calc(100% - ".concat(2*eT,"px)"),top:2,height:eD-4}})]})});var tK=t,tX=c,t$=t,tY=c,tJ=e.i(971623),tQ=e.i(492285),t0=e.i(281290),t1=t,t2=c,t5=u,t4=t,t3=c,t7=u,t9=e.i(185741),t6=V,t8=c;let ne=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e+(0,t8.useId)()};var nt=e.i(995520);e.i(133473);var nn=t,nr=c,ni=u,na=O,no=e.i(504726);function ns(e){let{id:t,style:n,label:r,className:i,children:a,size:o,error:s,...l}=e,c=(0,nr.useMemo)(()=>{if(a)return a;if((0,nr.isValidElement)(s))return s;if(s&&"object"==typeof s){var e;return(0,nn.jsxs)(nn.Fragment,{children:["message"in s?s.message:null,"link"in s?(0,nn.jsxs)(nn.Fragment,{children:[" ",(0,nn.jsx)("span",{className:no.default["action-link"],children:(0,nn.jsx)(ep,{external:!0,href:s.link,type:"blend",children:null!=(e=s.action)?e:"Learn More"})})]}):null]})}return s},[a,s]);return(0,nn.jsxs)(T,{"aria-atomic":"true",className:(0,ni.clsx)(no.default.error,i,{[String(no.default.large)]:"large"===o,[String(no.default.small)]:"small"===o}),"data-geist-error":"","data-testid":l["data-testid"],"data-version":"v1",direction:"row",gap:0,id:t,role:"alert",style:n,children:[(0,nn.jsx)("div",{"aria-hidden":!0,style:{display:"flex",alignItems:"center",marginRight:8,marginTop:nl(o)},children:(0,nn.jsx)(na.Stop,{color:"red-900",size:16})}),(0,nn.jsxs)("div",{className:no.default.text,children:[r?(0,nn.jsxs)("b",{className:no.default.label,children:[r,":"]}):null,c]})]})}let nl=e=>{if(void 0===e)return 2;switch(e){case"small":return 2;case"large":return 4}};var nc=t,nu=u,nd=e.i(587779);function np(e){let{bypassCasing:t=!1,children:n,className:r,id:i,style:a,value:o,withInput:s,wrapperClassName:l}=e;return(0,nc.jsxs)("label",{className:l,"data-version":"v1",htmlFor:i,style:a,children:[(0,nc.jsx)("div",{className:(0,nu.clsx)(nd.default.label,r,{[String(nd.default.input)]:s,[String(nd.default.capitalize)]:!t}),children:o}),n]})}var nh=e.i(143007),nf=e.i(662805);let nm=(0,t3.memo)((0,t3.forwardRef)(function(e,t){let{explicitId:n,disabled:r,label:i,typeName:a="text",prefix:o,suffix:s,prefixStyling:l=!0,prefixContainer:c=!0,suffixStyling:u=!0,suffixContainer:d=!0,width:p,error:h,showErrorMessage:f=!0,type:m,size:g,className:v,rounded:x,innerWrapperClassName:y,wrapperClassName:b,spellCheck:w=!1,autoCapitalize:j="none",autoComplete:C="off",autoCorrect:k="off",bypassCasing:S=!1,...N}=e,{focusProps:E,isFocusVisible:M}=(0,t9.useFocusRing)({isTextInput:!0}),I=i?np:t3.Fragment,D=ne("".concat(N.id||"input","-")),T={...i&&{value:i,withInput:!0,style:{width:p},id:D,wrapperClassName:b,bypassCasing:S}},A=(0,nh.useDisabled)()||r,L=ne("input-"),P=(0,t6.useType)(h?"error":m),R=N["aria-label"]||N.title,_=()=>o?c?(0,t4.jsx)("label",{"aria-hidden":!0,"data-geist-input-prefix":"",htmlFor:null!=n?n:D,children:o}):o:null,O=()=>s?d?(0,t4.jsx)("label",{"aria-hidden":!0,"data-geist-input-suffix":"",htmlFor:null!=n?n:D,children:s}):s:null,F=(0,t3.useMemo)(()=>(0,nt.getIxIconSize)(g),[g]);return(0,t4.jsxs)(I,{...T,children:[(0,t4.jsxs)("div",{className:(0,t7.clsx)(nf.default.container,P,{[String(nf.default.prefix)]:o,[String(nf.default.suffix)]:s,[String(nf.default.noPrefixStyle)]:!l,[String(nf.default.noSuffixStyle)]:!u,[String(nf.default.large)]:"large"===g,[String(nf.default.small)]:"small"===g,[String(nf.default.xSmall)]:"xSmall"===g,[String(nf.default.mediumSmall)]:"mediumSmall"===g,[String(nf.default.keyboardFocus)]:M,[String(nf.default.rounded)]:x,[String(nf.default.error)]:h},y),"data-geist-input-wrapper":"","data-version":"v1",style:{width:p,"--geist-icon-size":"".concat(F,"px")},children:[(0,t4.jsx)("input",{...N,"aria-describedby":h?"".concat(L,"-error"):N["aria-describedby"],"aria-invalid":!!h,"aria-label":R,autoCapitalize:j,autoComplete:C,autoCorrect:k,className:(0,t7.clsx)(nf.default.input,v),"data-geist-input":"",disabled:A,id:null!=n?n:D,onBlur:e=>{var t,n;null==(t=E.onBlur)||t.call(E,e),null==(n=N.onBlur)||n.call(N,e)},onFocus:e=>{var t,n;null==(t=E.onFocus)||t.call(E,e),null==(n=N.onFocus)||n.call(N,e)},ref:t,spellCheck:w,type:a}),_(),O()]}),f&&h?(0,t4.jsx)(ns,{"data-testid":N["data-testid"]?ey(N["data-testid"],"error"):void 0,error:h,id:"".concat(L,"-error"),size:ng[g||"small"],style:{width:p,marginTop:"var(--geist-gap-quarter)"}}):null]})})),ng={xSmall:"small",small:"small",mediumSmall:"small",large:"large"};var nv=t,nx=u,ny=c;function nb(){return nk(/^Mac/)}function nw(){return nk(/^iPhone/)}function nj(){return nk(/^iPad/)||nb()&&navigator.maxTouchPoints>1}function nC(){return nb()||nw()||nj()}function nk(e){return null!=window.navigator?e.test(window.navigator.platform):void 0}var nS=V,nN=e.i(954389);function nE(e){let{meta:t,shift:n,alt:r,ctrl:i,small:a,children:o,className:s,type:l,...c}=e,u=(0,nS.useType)(l,!0);return(0,nv.jsxs)("kbd",{className:(0,nx.clsx)(nN.default.kbd,{[String(nN.default.small)]:a},u,s),...c,"data-geist-kbd":"","data-version":"v1",children:[t?(0,nv.jsx)(nM,{}):null,n?(0,nv.jsx)("span",{children:"⇧"}):null,r?(0,nv.jsx)("span",{children:"⌥"}):null,i?(0,nv.jsx)("span",{children:"⌃"}):null,o?(0,nv.jsx)("span",{children:o}):null]})}function nM(){let[e,t]=(0,ny.useState)(" "),n=nC();return(0,ny.useEffect)(()=>{!0===n&&t("⌘"),!1===n&&t("Ctrl")},[n]),(0,nv.jsx)("span",{style:{minWidth:"1em",display:"inline-block"},children:e})}var nI=e.i(165943);function nD(e,t){var n;let{value:r,scrollOnClear:i=!0,onChange:a,disabled:o,width:s,onClear:l,cmdk:c,...u}=e,d=(0,t2.useRef)(null),p=t||null,[h,f]=(0,t2.useState)(null),m=(0,t2.useCallback)(e=>{var n;e&&(d.current=e,p&&(p.current=e),f((null==(n=e.closest("[data-geist-input-wrapper]"))?void 0:n.getBoundingClientRect().width)||null),"function"==typeof t&&t(e))},[p,t]),g=(0,t2.useCallback)(()=>{d.current&&!o&&(d.current.value&&(d.current.value="",null==a||a({target:{value:""}}),null==l||l()),d.current.focus({preventScroll:!i}))},[o,i,a,l]),v=!!(u.defaultValue?null==(n=d.current)?void 0:n.value:r),x=v&&(0,t1.jsx)("button",{className:(0,t5.clsx)(nI.default.button,{[String(nI.default.disabled)]:o}),onClick:g,tabIndex:o?-1:void 0,type:"button",children:(0,t1.jsx)(nE,{className:nI.default.kbd,small:!0,style:{margin:0},children:"Esc"})}),y=(0,t1.jsxs)(T,{"aria-label":v?"Press Esc to clear":"Press Cmd + K to open the Command Menu",className:nI.default.cmdk,"data-animate":v,direction:"row",style:{gap:2},children:[(0,t1.jsxs)(nE,{"aria-hidden":!0,className:nI.default.command,small:!0,children:[(0,t1.jsx)("span",{"data-key":"esc",children:"Esc"}),(0,t1.jsx)("span",{"data-key":"cmd",children:"⌘"})]}),(0,t1.jsx)(nE,{"aria-hidden":!0,className:nI.default.k,small:!0,children:"K"})]}),b=c?y:x;return(0,t1.jsx)(nm,{...u,"aria-label":u["aria-label"]||u.label||u.title,disabled:o,onChange:a,onKeyDown:e=>{"Escape"===e.key&&(e.preventDefault(),g())},ref:m,suffix:u.suffix?(0,t1.jsxs)(T,{align:"center",className:nI.default.suffixContainer,"data-suffix-group":"",direction:"row",children:[u.suffix,b]}):b,suffixContainer:!1,suffixStyling:!1,value:r,width:s||h||void 0})}let nT=(0,t2.memo)((0,t2.forwardRef)(nD));function nA(e,t){let{clearable:n=!0,loading:r=!1,...i}=e,a=n?nT:nm,o=r?t0.Spinner:"small"===i.size?tQ.MagnifyingGlassSmall:tJ.MagnifyingGlass;return(0,t$.jsx)(a,{...i,"aria-label":"Search",prefix:(0,t$.jsx)(o,{size:16}),prefixStyling:!1,ref:t,typeName:"search"})}let nL=(0,tY.forwardRef)(nA);var nP=d;function nR(){return(0,tK.jsx)("nav",{className:nP.default.searchBar,children:(0,tK.jsx)(n_,{})})}function n_(){let{dispatch:e}=ez(),[t,n]=(0,tX.useState)("");return(0,tX.useEffect)(()=>{let n=setTimeout(()=>e({type:"setFilter",filter:t}),100);return()=>{clearTimeout(n)}},[e,t]),(0,tK.jsx)("div",{className:nP.default.searchInput,children:(0,tK.jsx)(nL,{height:eM,onChange:e=>n(e.target.value),placeholder:"Search spans…",value:t,width:"100%"})})}let nO={traceId:"skeleton",spans:[{parentSpanId:"",spanId:"root",name:"root span",kind:1,resource:"vercel.runtime",startTime:[5e3,0],endTime:[6e3,0],duration:[1e3,0],library:{name:"vercel-site"},status:{code:1},attributes:{"vercel.ownerId":"team_abc"},traceFlags:1,events:[],links:[]}],resources:[{name:"vercel.runtime",attributes:{}}],rootSpanId:"root"};function nF(e){var t;let{trace:n=nO,className:r="",scrollLock:i=!1,height:a,withPanel:o=!1,highlightedSpans:s}=e,p=n===nO,{state:h,dispatch:f}=ez(),{timelineRef:m,scrollSnapshotRef:g}=h,v=h.memoCacheRef.current,x=(null!=(t=null==s?void 0:s.length)?t:0)>0;(0,c.useEffect)(()=>{let{root:e,map:t}=(0,tw.parseTrace)(n);f({type:"setRoot",root:e,spanMap:t,resources:n.resources||[]})},[f,n]);let{rows:y,spans:b,events:w,scale:j}=tV(s),C=(0,c.useRef)(null);(0,c.useLayoutEffect)(()=>{let e=C.current;if(!e)return;let t=()=>{let t=2*eT,n=e.getBoundingClientRect();f({type:"setSize",width:n.width-t,height:n.height})};t();let n=new ResizeObserver(t);return n.observe(e),window.addEventListener("resize",t),()=>{n.disconnect(),window.removeEventListener("resize",t)}},[f]);let k=(0,c.useRef)({t:0,x:-1,y:-1,spanId:""}),S=(0,c.useCallback)(e=>{let t=k.current,n=Date.now(),{clientX:r,clientY:i}=e,a=Math.sqrt(Math.pow(r-t.x,2)+Math.pow(i-t.y,2));if(n-t.t<=500&&a<=8)return(e.stopPropagation(),e.preventDefault(),t.spanId)?(f({type:"select",id:t.spanId}),void f({type:"scaleToNode",id:t.spanId})):void f({type:"resetScale"});let o=e.target;if(!o.closest(".".concat(String(d.default.timeline))))return;let s=o.closest("[data-span-id]"),l=(null==s?void 0:s.dataset.spanId)||"";k.current={x:r,y:i,t:n,spanId:l},l&&(f({type:"toggleSelection",id:l}),e.stopPropagation())},[f]);(0,c.useLayoutEffect)(()=>{let e=m.current;if(!e)return;let t=g.current;t&&(e.scrollLeft=t.anchorT*j-t.anchorX)},[g,m,j]),(0,c.useEffect)(()=>{var e;let t=null==(e=h.selected)?void 0:e.span.spanId;if(!t)return;let n=setTimeout(()=>{let e=h.timelineRef.current,n=null==e?void 0:e.querySelector('[data-span-id="'.concat(t,'"]'));if(!e||!n)return;let r=e.getBoundingClientRect(),i=n.getBoundingClientRect();i.width<r.width&&(i.left<r.left||i.right>r.right||i.top<r.top||i.bottom>r.bottom)&&n.scrollIntoView({block:"nearest",inline:"center",behavior:"smooth"})},500);return()=>{clearTimeout(n)}},[h.selected,h.timelineRef]),(0,c.useEffect)(()=>{let e=e=>{"Escape"===e.key&&f({type:"escape"})};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[f]),(0,c.useEffect)(()=>{if(!i)return;let e=document.documentElement,t=document.body;e.style.overflow="clip",t.style.overflow="clip";let n=e=>{(null==e?void 0:e.cancelable)?e.preventDefault():window.scrollTo({left:0,top:0,behavior:"instant"})};return n(),window.addEventListener("scroll",n,{passive:!1}),()=>{e.style.overflow="",t.style.overflow="",window.removeEventListener("scroll",n)}},[i]);let N=Math.max(h.timelineHeight-h.scrollbarWidth,eP+eA+y.length*(eL+eA)-eA+84),E=!!(h.isMobile&&h.selected);return(0,l.jsxs)("div",{className:(0,u.clsx)(d.default.traceViewer,p&&d.default.skeleton,r),onClickCapture:S,ref:C,style:{height:a,"--timeline-padding":"".concat(eT,"px"),"--row-height":"".concat(eL,"px"),"--row-padding":"".concat(eA,"px"),"--search-height":"".concat(x?0:eM,"px"),"--search-gap":"".concat(x?2:eI,"px"),"--map-height":"".concat(eD,"px"),"--timeline-width":"".concat(h.timelineWidth,"px"),"--timeline-height":"".concat(h.timelineHeight,"px"),"--timeline-scroll-width":"".concat(Math.round(h.root.duration*h.scale),"px"),"--panel-width":"".concat(h.panelWidth,"px"),"--panel-height":"".concat(h.panelHeight,"px"),"--height":"".concat(h.height,"px"),"--scrollbar-width":"".concat(h.scrollbarWidth,"px"),"--marker-height":"".concat(eP,"px"),"--marker-notch-height":"".concat(eR,"px")},children:[x?null:(0,l.jsx)(nR,{}),(0,l.jsx)(tG,{rows:y,scale:j,timelineRef:m}),(0,l.jsxs)("div",{className:(0,u.clsx)(d.default.traceViewerContent,E&&d.default.inert),children:[(0,l.jsx)("div",{className:d.default.timeline,ref:m,children:(0,l.jsx)("div",{style:{position:"relative",width:h.timelineWidth,height:h.timelineHeight-2*eT,padding:eT,paddingBottom:0},children:(0,l.jsxs)("div",{className:d.default.traceNode,style:{width:h.root.duration*j||void 0,height:N-2*eT},children:[(0,l.jsx)(tA,{scale:j}),(0,l.jsx)(tL,{events:w,root:h.root,scale:j}),(0,l.jsx)(tR,{dispatch:f,events:w,memoCacheRef:h.memoCacheRef,root:h.root,scale:j,scrollSnapshotRef:g,spans:b,timelineRef:m}),(0,l.jsx)(eQ,{cacheKey:v.get(""),cache:v,root:h.root,scale:j,scrollSnapshotRef:g,spans:b})]})})}),(0,l.jsx)("div",{className:d.default.zoomButtonTraceViewer,children:(0,l.jsx)(tb,{})})]}),o?(0,l.jsx)("div",{className:(0,u.clsx)(d.default.spanDetailPanelTraceViewer,!h.selected&&d.default.hidden,h.isMobile&&d.default.mobile),children:(0,l.jsx)(e7,{attached:!0})}):null]})}function nV(e){return(0,l.jsx)(eB,{getQuickLinks:e.getQuickLinks,withPanel:!0,children:(0,l.jsx)(nF,{withPanel:!0,...e})})}function nB(e){let{data:n,href:o,trace:s}=e;if(!n||!s)return(0,t.jsx)(r.Card,{className:"not-prose w-full max-w-lg shadow-sm",children:(0,t.jsx)(r.CardContent,{className:"p-3",children:(0,t.jsxs)("div",{className:"bg-muted flex flex-col items-center justify-center rounded-[6px] p-8",children:[(0,t.jsx)("div",{className:"mb-4 rounded-full border border-red-200 bg-red-50 p-2 text-red-600",children:(0,t.jsx)(a.CrossCircle,{})}),(0,t.jsx)("h3",{className:"mb-2 font-medium text-gray-900",children:"Trace Analysis Failed"}),(0,t.jsx)("p",{className:"max-w-96 text-center text-red-500",children:"Something went wrong while analyzing the trace. Please try again later."})]})})});let l=JSON.parse(decodeURIComponent(n)),c=JSON.parse(decodeURIComponent(s));return(0,t.jsxs)(r.Card,{className:"not-prose w-full max-w-3xl shadow-sm",children:[(0,t.jsx)(r.CardHeader,{className:"flex p-3",children:(0,t.jsxs)(r.CardTitle,{className:"mx-0.5 flex flex-col gap-1 text-sm font-medium text-gray-800",children:[(0,t.jsx)("span",{children:"Trace Analysis"}),(0,t.jsxs)("a",{href:o,className:"flex items-center font-normal hover:opacity-70",children:[o,(0,t.jsx)(i.ArrowUpRightSmall,{})]})]})}),(0,t.jsxs)(r.CardContent,{className:"p-0",children:[(0,t.jsx)("div",{className:"relative col-span-full! border-y border-y-gray-300",children:(0,t.jsx)(nV,{className:"absolute left-0 top-0 w-full",height:"50vh",scrollLock:!0,trace:c,highlightedSpans:l.map(e=>e.spanId)})}),(0,t.jsxs)("section",{className:"p-3",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-800",children:"Performance Impact"}),(0,t.jsx)("p",{className:"mb-6 text-sm text-gray-500",children:"The following spans are the most performance-impacting spans in the trace."}),(0,t.jsx)("ul",{className:"flex flex-col gap-2",children:l.map(e=>(0,t.jsxs)("li",{className:"flex flex-col gap-2",children:[(0,t.jsx)("b",{children:e.spanName}),(0,t.jsx)("span",{children:e.description})]},e.spanId))})]})]})]})}function nz(e){let{data:i,isLast:a}=e,l=JSON.parse(decodeURIComponent(i));return a?(0,t.jsx)(r.Card,{className:"not-prose w-full max-w-lg shadow-sm",children:(0,t.jsx)(r.CardContent,{className:"p-3",children:(0,t.jsx)("ul",{className:"bg-muted flex flex-col gap-2 rounded-[6px] p-4",children:l.map(e=>(0,t.jsxs)("li",{className:"flex items-center gap-2",children:["pending"===e.status?(0,t.jsx)(s.default,{className:"size-4"}):null,"loading"===e.status?(0,t.jsx)(n.Spinner,{size:16}):null,"loaded"===e.status?(0,t.jsx)(o.Check,{className:"size-4"}):null,(0,t.jsx)("span",{children:e.label})]},e.label))})})}):null}function nH(e){let{message:n}=e;return(0,t.jsx)(r.Card,{className:"not-prose w-full max-w-lg shadow-sm",children:(0,t.jsx)(r.CardContent,{className:"p-3",children:(0,t.jsx)("div",{className:"text-red-500",children:n})})})}e.s(["TraceAnalysisError",()=>nH,"TraceAnalysisReport",()=>nB,"TraceAnalysisStatus",()=>nz],302998);var nU=t,nq=c,nW=e.i(545858),nZ=e.i(539085),nG=e.i(716360),nK=e.i(529693),nX=t,n$=c,nY=e.i(672421),nJ=e.i(267285);function nQ(e){let{data:t,path:n="",level:r=0}=e;if(null===t)return(0,nX.jsx)("span",{className:"text-gray-500",children:"null"});if("object"!=typeof t)return(0,nX.jsx)(n5,{value:t});let i=Array.isArray(t),a=i?t:Object.keys(t);return(0,nX.jsx)("div",{className:"ml-4",children:i?(0,nX.jsx)(n1,{items:a,path:n,level:r}):(0,nX.jsx)(n0,{items:a,data:t,path:n,level:r})})}function n0(e){let{items:t,data:n,path:r,level:i}=e;return(0,nX.jsx)(nX.Fragment,{children:t.map(e=>(0,nX.jsx)(n2,{label:e,value:n[e],path:r?"".concat(r,".").concat(e):e,level:i+1},e))})}function n1(e){let{items:t,path:n,level:r}=e;return(0,nX.jsx)(nX.Fragment,{children:t.map((e,t)=>(0,nX.jsx)(n2,{label:t.toString(),value:e,path:n?"".concat(n,"[").concat(t,"]"):"[".concat(t,"]"),level:r+1,isArrayItem:!0},t))})}function n2(e){let{label:t,value:n,path:r,level:i,isArrayItem:a=!1}=e,[o,s]=(0,n$.useState)(i<2),l=null!==n&&"object"==typeof n,c=()=>{s(!o)};return(0,nX.jsxs)("div",{className:"my-1",children:[(0,nX.jsxs)("div",{className:"flex items-start ".concat(l?"cursor-pointer":""),onClick:l?c:void 0,children:[l&&(0,nX.jsx)("div",{className:"mr-1 mt-0.5",children:o?(0,nX.jsx)(nY.ChevronDown,{className:"h-4 w-4 text-gray-500"}):(0,nX.jsx)(nJ.ChevronRight,{className:"h-4 w-4 text-gray-500"})}),(0,nX.jsxs)("div",{children:[a?(0,nX.jsxs)("span",{className:"text-blue-600",children:["[",t,"]: "]}):(0,nX.jsxs)("span",{className:"text-blue-600",children:['"',t,'": ']}),l?(0,nX.jsx)("span",{className:"text-gray-600",children:Array.isArray(n)?"Array(".concat(n.length,")"):"Object{".concat(Object.keys(n).length,"}")}):(0,nX.jsx)(n5,{value:n})]})]}),l&&o&&(0,nX.jsx)(nQ,{data:n,path:r,level:i})]})}function n5(e){let{value:t}=e;return"string"==typeof t?(0,nX.jsxs)("span",{className:"text-green-600",children:['"',t,'"']}):"number"==typeof t?(0,nX.jsx)("span",{className:"text-purple-600",children:t}):"boolean"==typeof t?(0,nX.jsx)("span",{className:"text-orange-600",children:t.toString()}):null===t?(0,nX.jsx)("span",{className:"text-gray-500",children:"null"}):(0,nX.jsx)("span",{children:String(t)})}var n4=e.i(383542),n3=e.i(335249);function n7(e){let{loading:t,toolName:n,content:r,isLast:i}=e,[a,o]=(0,nq.useState)(!0),s={collapsed:{height:0,opacity:0,marginTop:0,marginBottom:0},expanded:{height:"auto",opacity:1,marginTop:"1rem",marginBottom:0}};return((0,nq.useEffect)(()=>{t||o(!1)},[t]),!i&&t)?null:(0,nU.jsx)(n4.Accordion,{className:"m-0 flex flex-col p-0",type:"single",collapsible:!t,children:(0,nU.jsxs)(n4.AccordionItem,{value:"item-1",className:"border-none [&>h3]:my-0",children:[(0,nU.jsx)(n4.AccordionTrigger,{className:"bg-muted border-alpha-200 mt-0 flex flex-row items-center justify-between gap-2 rounded-md border p-2 font-mono text-gray-500",children:(0,nU.jsxs)("div",{className:"flex flex-row items-center gap-2 text-sm",children:[(0,nU.jsx)(nZ.Zap,{className:"size-3"}),n]})}),(0,nU.jsx)(n4.AccordionContent,{children:(0,nU.jsx)(nG.AnimatePresence,{initial:!1,children:(0,nU.jsx)(nK.motion.div,{className:"flex flex-col gap-4 border-l pl-3 text-sm text-zinc-600 dark:border-zinc-800 dark:text-zinc-400",initial:"collapsed",animate:"expanded",exit:"collapsed",variants:s,transition:{duration:.2,ease:"easeInOut"},children:(0,nU.jsx)(nQ,{data:r,path:"",level:0})},"reasoning")})})]})})}function n9(e){let t,{toolName:n,status:r="success",toolId:i,input:a,output:o,error:s,timestamp:l,isLast:c,icon:u=(0,nU.jsx)(nZ.Zap,{className:"h-3 w-3"})}=e,[d,p]=(0,nq.useState)(null);(0,nq.useEffect)(()=>{if("success"===r){let e=document.getElementById("tool-execution-".concat(i));console.log("Got success, updating portal container",{loadingCard:e,status:r,toolId:i}),e&&(console.log("FOUND  LOADING CARD",e),p(e),e.innerHTML="")}},[r,i]);try{t=(0,nU.jsx)(n7,{loading:"loading"===r,toolName:n,content:o?JSON.parse(n3.default.decode(o)):s?JSON.parse(n3.default.decode(o||"")):""})}catch(e){console.error("Error parsing output:",e),t=(0,nU.jsx)(n7,{loading:"loading"===r,toolName:n,content:s||"Something went wrong"})}return"loading"===r?(0,nU.jsx)(n7,{loading:!0,toolName:n,content:""}):"success"===r&&d?(0,nW.createPortal)(t,d):t}e.s(["ToolExecutionCard",()=>n9],968552)},490838,e=>{"use strict";e.s(["useMaybeUpdateTodoList",()=>i]);var t=e.i(142219),n=e.i(200407),r=e.i(418929);function i(e,i){let{atoms:a,actions:o}=(0,r.useCurrentChatPrompt)(),{setTodoList:s}=o;(0,n.useEffect)(()=>{if(!e||"task-manage-todos-v1"!==e.type)return;let n=e.parts.findLast(e=>"updated-todo-list"===e.type);n&&e.lastPartSentAt&&t.store.get(a.derivedTodoList).updatedAt<e.lastPartSentAt&&s({list:n.updatedList,updatedAt:e.lastPartSentAt})},[e])}},571822,e=>{e.v({content:"eyebrow-module__RUAzfa__content"})},884284,795970,60019,249082,563044,301795,876366,865408,423814,928408,e=>{"use strict";let t;var n,r,i,a,o,s,l,c,u,d,p=e.i(200407),h=e.i(284627),f=e.i(780292),m=e.i(142219);let g=2e3;function v(e,t){let{actions:n,atoms:r}=(0,h.useCurrentChatLoader)(),i=(0,f.useAtomValue)(r.lastPartUpdate);(0,p.useEffect)(()=>{if(!e||!t||!h.LOADABLE_RICH_PART_TYPES.includes(e.type))return;let a=(0,m.getAtomValue)(r.lastPartUpdatedAt),o=(0,m.getAtomValue)(r.currentPartKey),s=e,l=s.id;Date.now()-a>=g?i&&s.createdAt&&i.createdAt&&!(s.createdAt>=i.createdAt)||(n.setPartKey(l),n.setLastPartUpdate(s)):o===l&&n.setLastPartUpdate(s)},[e,t])}e.s(["useMaybeUpdateLoader",()=>v],884284),e.s(["GetOrRequestIntegrationV1",()=>rU],423814);var x=e.i(832520),y=e.i(485001),b=e.i(849542),w=e.i(236808);e.s(["useRichAssistantParts",()=>S],795970);var j=x,C=p,k=w;function S(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{openReportError:r}=(0,k.useReportAgentError)();return(0,C.useMemo)(()=>{let i=t.parts.map((i,a)=>{let o=e[i.type];if("parse-error"===i.type)return(0,j.jsx)(k.AgentNote,{title:"Response rendering failed",variant:"error",primaryAction:{text:"Report issue",onClick:()=>r("A parsing error occurred")},children:"Something went wrong parsing this response. Help us fix it by reporting the issue."},a);if(n)return o(i,a);let s=o(i,a);return s?(0,j.jsx)(k.RichPart,{...t,children:s},a):null}).filter(Boolean);return 0===i.length?null:i},[r,e,t,n])}e.s(["RichAssistantStepsCard",()=>r_],865408);var N=x,E=e.i(674523),M=e.i(906261),I=e.i(667660),D=e.i(434673),T=e.i(583965),A=e.i(726988),L=e.i(491320),P=e.i(520605),R=e.i(779647),_=e.i(183673),O=e.i(304649),F=e.i(66045),V=e.i(970256),B=e.i(926224),z=e.i(301331);e.i(563948);var H=e.i(407562),U=e.i(53223),q=e.i(745587),W=e.i(584497),Z=e.i(472166),G=e.i(92479),K=e.i(554912),X=e.i(762585),$=e.i(28361),Y=e.i(86448),J=e.i(299313),Q=p,ee=e.i(725415),et=e.i(449381),en=e.i(157357),er=e.i(316799),ei=e.i(768061),ea=e.i(324141),eo=e.i(710227),es=e.i(433743),el=e.i(128173),ec=w,eu=e.i(996174),ed=e.i(211976),ep=e.i(44337);e.s(["EyebrowTodosWithQueue",()=>rS,"Todo",()=>rT],876366);var eh=x,ef=e.i(403055),em=f,eg=p,ev=e.i(418929),ex=e.i(707827),ey=e.i(605528),eb=$,ew=e.i(608142);let ej=(0,ey.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M14.5 8C14.5 11.5899 11.5899 14.5 8 14.5C4.41015 14.5 1.5 11.5899 1.5 8C1.5 4.41015 4.41015 1.5 8 1.5C11.5899 1.5 14.5 4.41015 14.5 8ZM16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8ZM5 7.25H4.25V8.75H5H11H11.75V7.25H11H5Z" fill="currentColor"/>'),eC=(0,ey.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M14.5 8C14.5 11.5899 11.5899 14.5 8 14.5C4.41015 14.5 1.5 11.5899 1.5 8C1.5 4.41015 4.41015 1.5 8 1.5C11.5899 1.5 14.5 4.41015 14.5 8ZM16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8ZM8.75 4.75V4H7.25V4.75V7.875C7.25 8.18976 7.39819 8.48615 7.65 8.675L9.55 10.1L10.15 10.55L11.05 9.35L10.45 8.9L8.75 7.625V4.75Z" fill="currentColor"/>');e.s(["Clock",0,eC],60019);let ek=(0,ey.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M1.75 4H1V5.5H1.75H14.25H15V4H14.25H1.75ZM1.75 10.5H1V12H1.75H14.25H15V10.5H14.25H1.75Z" fill="currentColor"/>');var eS=e.i(512817),eN=e.i(850722),eE=e.i(102427),eM=e.i(372506),eI=e.i(819969),eD=e.i(758118),eT=e.i(365290),eA=e.i(571822),eL=e.i(535389),eP=e.i(997974),eR=e.i(89440),e_=e.i(675120),eO=e.i(176248),eF=p,eV=e.i(545858),eB=p;function ez(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,eB.useMemo)(()=>e=>{t.forEach(t=>t(e))},t)}let eH="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function eU(e){let t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function eq(e){return"nodeType"in e}function eW(e){var t,n;return e?eU(e)?e:eq(e)&&null!=(t=null==(n=e.ownerDocument)?void 0:n.defaultView)?t:window:window}function eZ(e){let{Document:t}=eW(e);return e instanceof t}function eG(e){return!eU(e)&&e instanceof eW(e).HTMLElement}function eK(e){return e instanceof eW(e).SVGElement}function eX(e){return e?eU(e)?e.document:eq(e)?eZ(e)?e:eG(e)||eK(e)?e.ownerDocument:document:document:document}let e$=eH?eB.useLayoutEffect:eB.useEffect;function eY(e){let t=(0,eB.useRef)(e);return e$(()=>{t.current=e}),(0,eB.useCallback)(function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current(...n)},[])}function eJ(){let e=(0,eB.useRef)(null);return[(0,eB.useCallback)((t,n)=>{e.current=setInterval(t,n)},[]),(0,eB.useCallback)(()=>{null!==e.current&&(clearInterval(e.current),e.current=null)},[])]}function eQ(e,t){void 0===t&&(t=[e]);let n=(0,eB.useRef)(e);return e$(()=>{n.current!==e&&(n.current=e)},t),n}function e0(e,t){let n=(0,eB.useRef)();return(0,eB.useMemo)(()=>{let t=e(n.current);return n.current=t,t},[...t])}function e1(e){let t=eY(e),n=(0,eB.useRef)(null),r=(0,eB.useCallback)(e=>{e!==n.current&&(null==t||t(e,n.current)),n.current=e},[]);return[n,r]}function e2(e){let t=(0,eB.useRef)();return(0,eB.useEffect)(()=>{t.current=e},[e]),t.current}let e5={};function e4(e,t){return(0,eB.useMemo)(()=>{if(t)return t;let n=null==e5[e]?0:e5[e]+1;return e5[e]=n,e+"-"+n},[e,t])}function e3(e){return function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((t,n)=>{for(let[r,i]of Object.entries(n)){let n=t[r];null!=n&&(t[r]=n+e*i)}return t},{...t})}}let e7=e3(1),e9=e3(-1);function e6(e){return"clientX"in e&&"clientY"in e}function e8(e){if(!e)return!1;let{KeyboardEvent:t}=eW(e.target);return t&&e instanceof t}function te(e){if(!e)return!1;let{TouchEvent:t}=eW(e.target);return t&&e instanceof t}function tt(e){if(te(e)){if(e.touches&&e.touches.length){let{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){let{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return e6(e)?{x:e.clientX,y:e.clientY}:null}let tn=Object.freeze({Translate:{toString(e){if(!e)return;let{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;let{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[tn.Translate.toString(e),tn.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),tr="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function ti(e){return e.matches(tr)?e:e.querySelector(tr)}e.s(["CSS",()=>tn,"add",()=>e7,"canUseDOM",()=>eH,"findFirstFocusableNode",()=>ti,"getEventCoordinates",()=>tt,"getOwnerDocument",()=>eX,"getWindow",()=>eW,"isDocument",()=>eZ,"isHTMLElement",()=>eG,"isKeyboardEvent",()=>e8,"isNode",()=>eq,"isSVGElement",()=>eK,"isWindow",()=>eU,"subtract",()=>e9,"useCombinedRefs",()=>ez,"useEvent",()=>eY,"useInterval",()=>eJ,"useIsomorphicLayoutEffect",()=>e$,"useLatestValue",()=>eQ,"useLazyMemo",()=>e0,"useNodeRef",()=>e1,"usePrevious",()=>e2,"useUniqueId",()=>e4],249082);var ta=p;let to={display:"none"};function ts(e){let{id:t,value:n}=e;return ta.default.createElement("div",{id:t,style:to},n)}function tl(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e,i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return ta.default.createElement("div",{id:t,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function tc(){let[e,t]=(0,ta.useState)("");return{announce:(0,ta.useCallback)(e=>{null!=e&&t(e)},[]),announcement:e}}let tu=(0,eF.createContext)(null);function td(e){let t=(0,eF.useContext)(tu);(0,eF.useEffect)(()=>{if(!t)throw Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function tp(){let[e]=(0,eF.useState)(()=>new Set),t=(0,eF.useCallback)(t=>(e.add(t),()=>e.delete(t)),[e]);return[(0,eF.useCallback)(t=>{let{type:n,event:r}=t;e.forEach(e=>{var t;return null==(t=e[n])?void 0:t.call(e,r)})},[e]),t]}let th={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},tf={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function tm(e){let{announcements:t=tf,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=th}=e,{announce:a,announcement:o}=tc(),s=e4("DndLiveRegion"),[l,c]=(0,eF.useState)(!1);if((0,eF.useEffect)(()=>{c(!0)},[]),td((0,eF.useMemo)(()=>({onDragStart(e){let{active:n}=e;a(t.onDragStart({active:n}))},onDragMove(e){let{active:n,over:r}=e;t.onDragMove&&a(t.onDragMove({active:n,over:r}))},onDragOver(e){let{active:n,over:r}=e;a(t.onDragOver({active:n,over:r}))},onDragEnd(e){let{active:n,over:r}=e;a(t.onDragEnd({active:n,over:r}))},onDragCancel(e){let{active:n,over:r}=e;a(t.onDragCancel({active:n,over:r}))}}),[a,t])),!l)return null;let u=eF.default.createElement(eF.default.Fragment,null,eF.default.createElement(ts,{id:r,value:i.draggable}),eF.default.createElement(tl,{id:s,announcement:o}));return n?(0,eV.createPortal)(u,n):u}function tg(){}function tv(e,t){return(0,eF.useMemo)(()=>({sensor:e,options:null!=t?t:{}}),[e,t])}function tx(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,eF.useMemo)(()=>[...t].filter(e=>null!=e),[...t])}!function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"}(n||(n={}));let ty=Object.freeze({x:0,y:0});function tb(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function tw(e,t){let n=tt(e);if(!n)return"0 0";let r={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return r.x+"% "+r.y+"%"}function tj(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function tC(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function tk(e){let{left:t,top:n,height:r,width:i}=e;return[{x:t,y:n},{x:t+i,y:n},{x:t,y:n+r},{x:t+i,y:n+r}]}function tS(e,t){if(!e||0===e.length)return null;let[n]=e;return t?n[t]:n}function tN(e,t,n){return void 0===t&&(t=e.left),void 0===n&&(n=e.top),{x:t+.5*e.width,y:n+.5*e.height}}let tE=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e,i=tN(t,t.left,t.top),a=[];for(let e of r){let{id:t}=e,r=n.get(t);if(r){let n=tb(tN(r),i);a.push({id:t,data:{droppableContainer:e,value:n}})}}return a.sort(tj)},tM=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e,i=tk(t),a=[];for(let e of r){let{id:t}=e,r=n.get(t);if(r){let n=tk(r),o=Number((i.reduce((e,t,r)=>e+tb(n[r],t),0)/4).toFixed(4));a.push({id:t,data:{droppableContainer:e,value:o}})}}return a.sort(tj)};function tI(e,t){let n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),i=Math.min(t.left+t.width,e.left+e.width),a=Math.min(t.top+t.height,e.top+e.height),o=i-r,s=a-n;if(r<i&&n<a){let n=t.width*t.height,r=e.width*e.height,i=o*s;return Number((i/(n+r-i)).toFixed(4))}return 0}let tD=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e,i=[];for(let e of r){let{id:r}=e,a=n.get(r);if(a){let n=tI(a,t);n>0&&i.push({id:r,data:{droppableContainer:e,value:n}})}}return i.sort(tC)};function tT(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function tA(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:ty}let tL=function(e){return function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((t,n)=>({...t,top:t.top+e*n.y,bottom:t.bottom+e*n.y,left:t.left+e*n.x,right:t.right+e*n.x}),{...t})}}(1);function tP(e){if(e.startsWith("matrix3d(")){let t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){let t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function tR(e,t,n){let r=tP(t);if(!r)return e;let{scaleX:i,scaleY:a,x:o,y:s}=r,l=e.left-o-(1-i)*parseFloat(n),c=e.top-s-(1-a)*parseFloat(n.slice(n.indexOf(" ")+1)),u=i?e.width/i:e.width,d=a?e.height/a:e.height;return{width:u,height:d,top:c,right:l+u,bottom:c+d,left:l}}let t_={ignoreTransform:!1};function tO(e,t){void 0===t&&(t=t_);let n=e.getBoundingClientRect();if(t.ignoreTransform){let{transform:t,transformOrigin:r}=eW(e).getComputedStyle(e);t&&(n=tR(n,t,r))}let{top:r,left:i,width:a,height:o,bottom:s,right:l}=n;return{top:r,left:i,width:a,height:o,bottom:s,right:l}}function tF(e){return tO(e,{ignoreTransform:!0})}function tV(e){let t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function tB(e,t){return void 0===t&&(t=eW(e).getComputedStyle(e)),"fixed"===t.position}function tz(e,t){void 0===t&&(t=eW(e).getComputedStyle(e));let n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(e=>{let r=t[e];return"string"==typeof r&&n.test(r)})}function tH(e,t){let n=[];function r(i){if(null!=t&&n.length>=t||!i)return n;if(eZ(i)&&null!=i.scrollingElement&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!eG(i)||eK(i)||n.includes(i))return n;let a=eW(e).getComputedStyle(i);return(i!==e&&tz(i,a)&&n.push(i),tB(i,a))?n:r(i.parentNode)}return e?r(e):n}function tU(e){let[t]=tH(e,1);return null!=t?t:null}function tq(e){return eH&&e?eU(e)?e:eq(e)?eZ(e)||e===eX(e).scrollingElement?window:eG(e)?e:null:null:null}function tW(e){return eU(e)?e.scrollX:e.scrollLeft}function tZ(e){return eU(e)?e.scrollY:e.scrollTop}function tG(e){return{x:tW(e),y:tZ(e)}}function tK(e){return!!eH&&!!e&&e===document.scrollingElement}function tX(e){let t={x:0,y:0},n=tK(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},i=e.scrollTop<=t.y,a=e.scrollLeft<=t.x;return{isTop:i,isLeft:a,isBottom:e.scrollTop>=r.y,isRight:e.scrollLeft>=r.x,maxScroll:r,minScroll:t}}!function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"}(r||(r={}));let t$={x:.2,y:.2};function tY(e,t,n,i,a){let{top:o,left:s,right:l,bottom:c}=n;void 0===i&&(i=10),void 0===a&&(a=t$);let{isTop:u,isBottom:d,isLeft:p,isRight:h}=tX(e),f={x:0,y:0},m={x:0,y:0},g={height:t.height*a.y,width:t.width*a.x};return!u&&o<=t.top+g.height?(f.y=r.Backward,m.y=i*Math.abs((t.top+g.height-o)/g.height)):!d&&c>=t.bottom-g.height&&(f.y=r.Forward,m.y=i*Math.abs((t.bottom-g.height-c)/g.height)),!h&&l>=t.right-g.width?(f.x=r.Forward,m.x=i*Math.abs((t.right-g.width-l)/g.width)):!p&&s<=t.left+g.width&&(f.x=r.Backward,m.x=i*Math.abs((t.left+g.width-s)/g.width)),{direction:f,speed:m}}function tJ(e){if(e===document.scrollingElement){let{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}let{top:t,left:n,right:r,bottom:i}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:i,width:e.clientWidth,height:e.clientHeight}}function tQ(e){return e.reduce((e,t)=>e7(e,tG(t)),ty)}function t0(e,t){if(void 0===t&&(t=tO),!e)return;let{top:n,left:r,bottom:i,right:a}=t(e);tU(e)&&(i<=0||a<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}let t1=[["x",["left","right"],function(e){return e.reduce((e,t)=>e+tW(t),0)}],["y",["top","bottom"],function(e){return e.reduce((e,t)=>e+tZ(t),0)}]];class t2{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;let n=tH(t),r=tQ(n);for(let[t,i,a]of(this.rect={...e},this.width=e.width,this.height=e.height,t1))for(let e of i)Object.defineProperty(this,e,{get:()=>{let i=a(n),o=r[t]-i;return this.rect[e]+o},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class t5{add(e,t,n){var r;null==(r=this.target)||r.addEventListener(e,t,n),this.listeners.push([e,t,n])}constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)})},this.target=e}}function t4(e){let{EventTarget:t}=eW(e);return e instanceof t?e:eX(e)}function t3(e,t){let n=Math.abs(e.x),r=Math.abs(e.y);return"number"==typeof t?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t&&r>t.y}function t7(e){e.preventDefault()}function t9(e){e.stopPropagation()}!function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"}(i||(i={})),function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"}(a||(a={}));let t6={start:[a.Space,a.Enter],cancel:[a.Esc],end:[a.Space,a.Enter,a.Tab]},t8=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case a.Right:return{...n,x:n.x+25};case a.Left:return{...n,x:n.x-25};case a.Down:return{...n,y:n.y+25};case a.Up:return{...n,y:n.y-25}}};class ne{attach(){this.handleStart(),this.windowListeners.add(i.Resize,this.handleCancel),this.windowListeners.add(i.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(i.Keydown,this.handleKeyDown))}handleStart(){let{activeNode:e,onStart:t}=this.props,n=e.node.current;n&&t0(n),t(ty)}handleKeyDown(e){if(e8(e)){let{active:t,context:n,options:r}=this.props,{keyboardCodes:i=t6,coordinateGetter:o=t8,scrollBehavior:s="smooth"}=r,{code:l}=e;if(i.end.includes(l))return void this.handleEnd(e);if(i.cancel.includes(l))return void this.handleCancel(e);let{collisionRect:c}=n.current,u=c?{x:c.left,y:c.top}:ty;this.referenceCoordinates||(this.referenceCoordinates=u);let d=o(e,{active:t,context:n.current,currentCoordinates:u});if(d){let t=e9(d,u),r={x:0,y:0},{scrollableAncestors:i}=n.current;for(let n of i){let i=e.code,{isTop:o,isRight:l,isLeft:c,isBottom:u,maxScroll:p,minScroll:h}=tX(n),f=tJ(n),m={x:Math.min(i===a.Right?f.right-f.width/2:f.right,Math.max(i===a.Right?f.left:f.left+f.width/2,d.x)),y:Math.min(i===a.Down?f.bottom-f.height/2:f.bottom,Math.max(i===a.Down?f.top:f.top+f.height/2,d.y))},g=i===a.Right&&!l||i===a.Left&&!c,v=i===a.Down&&!u||i===a.Up&&!o;if(g&&m.x!==d.x){let e=n.scrollLeft+t.x,o=i===a.Right&&e<=p.x||i===a.Left&&e>=h.x;if(o&&!t.y)return void n.scrollTo({left:e,behavior:s});o?r.x=n.scrollLeft-e:r.x=i===a.Right?n.scrollLeft-p.x:n.scrollLeft-h.x,r.x&&n.scrollBy({left:-r.x,behavior:s});break}if(v&&m.y!==d.y){let e=n.scrollTop+t.y,o=i===a.Down&&e<=p.y||i===a.Up&&e>=h.y;if(o&&!t.x)return void n.scrollTo({top:e,behavior:s});o?r.y=n.scrollTop-e:r.y=i===a.Down?n.scrollTop-p.y:n.scrollTop-h.y,r.y&&n.scrollBy({top:-r.y,behavior:s});break}}this.handleMove(e,e7(e9(d,this.referenceCoordinates),r))}}}handleMove(e,t){let{onMove:n}=this.props;e.preventDefault(),n(t)}handleEnd(e){let{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){let{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;let{event:{target:t}}=e;this.props=e,this.listeners=new t5(eX(t)),this.windowListeners=new t5(eW(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}}function nt(e){return!!(e&&"distance"in e)}function nn(e){return!!(e&&"delay"in e)}ne.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=t6,onActivation:i}=t,{active:a}=n,{code:o}=e.nativeEvent;if(r.start.includes(o)){let t=a.activatorNode.current;return(!t||e.target===t)&&(e.preventDefault(),null==i||i({event:e.nativeEvent}),!0)}return!1}}];class nr{attach(){let{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:n}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(i.Resize,this.handleCancel),this.windowListeners.add(i.DragStart,t7),this.windowListeners.add(i.VisibilityChange,this.handleCancel),this.windowListeners.add(i.ContextMenu,t7),this.documentListeners.add(i.Keydown,this.handleKeydown),t){if(null!=n&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(nn(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(nt(t))return void this.handlePending(t)}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){let{active:n,onPending:r}=this.props;r(n,e,this.initialCoordinates,t)}handleStart(){let{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(i.Click,t9,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(i.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;let{activated:n,initialCoordinates:r,props:i}=this,{onMove:a,options:{activationConstraint:o}}=i;if(!r)return;let s=null!=(t=tt(e))?t:ty,l=e9(r,s);if(!n&&o){if(nt(o)){if(null!=o.tolerance&&t3(l,o.tolerance))return this.handleCancel();if(t3(l,o.distance))return this.handleStart()}return nn(o)&&t3(l,o.tolerance)?this.handleCancel():void this.handlePending(o,l)}e.cancelable&&e.preventDefault(),a(s)}handleEnd(){let{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){let{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===a.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}constructor(e,t,n){var r;void 0===n&&(n=t4(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;let{event:i}=e,{target:a}=i;this.props=e,this.events=t,this.document=eX(a),this.documentListeners=new t5(this.document),this.listeners=new t5(n),this.windowListeners=new t5(eW(a)),this.initialCoordinates=null!=(r=tt(i))?r:ty,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}}let ni={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class na extends nr{constructor(e){let{event:t}=e;super(e,ni,eX(t.target))}}na.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!!n.isPrimary&&0===n.button&&(null==r||r({event:n}),!0)}}];let no={move:{name:"mousemove"},end:{name:"mouseup"}};!function(e){e[e.RightClick=2]="RightClick"}(o||(o={}));class ns extends nr{constructor(e){super(e,no,eX(e.event.target))}}ns.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button!==o.RightClick&&(null==r||r({event:n}),!0)}}];let nl={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class nc extends nr{static setup(){return window.addEventListener(nl.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(nl.move.name,e)};function e(){}}constructor(e){super(e,nl)}}function nu(e){let{acceleration:t,activator:n=s.Pointer,canScroll:r,draggingRect:i,enabled:a,interval:o=5,order:c=l.TreeOrder,pointerCoordinates:u,scrollableAncestors:d,scrollableAncestorRects:p,delta:h,threshold:f}=e,m=np({delta:h,disabled:!a}),[g,v]=eJ(),x=(0,eF.useRef)({x:0,y:0}),y=(0,eF.useRef)({x:0,y:0}),b=(0,eF.useMemo)(()=>{switch(n){case s.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case s.DraggableRect:return i}},[n,i,u]),w=(0,eF.useRef)(null),j=(0,eF.useCallback)(()=>{let e=w.current;if(!e)return;let t=x.current.x*y.current.x,n=x.current.y*y.current.y;e.scrollBy(t,n)},[]),C=(0,eF.useMemo)(()=>c===l.TreeOrder?[...d].reverse():d,[c,d]);(0,eF.useEffect)(()=>{if(!a||!d.length||!b)return void v();for(let e of C){if((null==r?void 0:r(e))===!1)continue;let n=p[d.indexOf(e)];if(!n)continue;let{direction:i,speed:a}=tY(e,n,b,t,f);for(let e of["x","y"])m[e][i[e]]||(a[e]=0,i[e]=0);if(a.x>0||a.y>0){v(),w.current=e,g(j,o),x.current=a,y.current=i;return}}x.current={x:0,y:0},y.current={x:0,y:0},v()},[t,j,r,v,a,o,JSON.stringify(b),JSON.stringify(m),g,d,C,p,JSON.stringify(f)])}nc.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t,{touches:i}=n;return!(i.length>1)&&(null==r||r({event:n}),!0)}}],function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"}(s||(s={})),function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"}(l||(l={}));let nd={x:{[r.Backward]:!1,[r.Forward]:!1},y:{[r.Backward]:!1,[r.Forward]:!1}};function np(e){let{delta:t,disabled:n}=e,i=e2(t);return e0(e=>{if(n||!i||!e)return nd;let a={x:Math.sign(t.x-i.x),y:Math.sign(t.y-i.y)};return{x:{[r.Backward]:e.x[r.Backward]||-1===a.x,[r.Forward]:e.x[r.Forward]||1===a.x},y:{[r.Backward]:e.y[r.Backward]||-1===a.y,[r.Forward]:e.y[r.Forward]||1===a.y}}},[n,t,i])}function nh(e,t){let n=null!=t?e.get(t):void 0,r=n?n.node.current:null;return e0(e=>{var n;return null==t?null:null!=(n=null!=r?r:e)?n:null},[r,t])}function nf(e,t){return(0,eF.useMemo)(()=>e.reduce((e,n)=>{let{sensor:r}=n;return[...e,...r.activators.map(e=>({eventName:e.eventName,handler:t(e.handler,n)}))]},[]),[e,t])}!function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"}(c||(c={})),function(e){e.Optimized="optimized"}(u||(u={}));let nm=new Map;function ng(e,t){let{dragging:n,dependencies:r,config:i}=t,[a,o]=(0,eF.useState)(null),{frequency:s,measure:l,strategy:u}=i,d=(0,eF.useRef)(e),p=v(),h=eQ(p),f=(0,eF.useCallback)(function(e){void 0===e&&(e=[]),h.current||o(t=>null===t?e:t.concat(e.filter(e=>!t.includes(e))))},[h]),m=(0,eF.useRef)(null),g=e0(t=>{if(p&&!n)return nm;if(!t||t===nm||d.current!==e||null!=a){let t=new Map;for(let n of e){if(!n)continue;if(a&&a.length>0&&!a.includes(n.id)&&n.rect.current){t.set(n.id,n.rect.current);continue}let e=n.node.current,r=e?new t2(l(e),e):null;n.rect.current=r,r&&t.set(n.id,r)}return t}return t},[e,a,n,p,l]);return(0,eF.useEffect)(()=>{d.current=e},[e]),(0,eF.useEffect)(()=>{p||f()},[n,p]),(0,eF.useEffect)(()=>{a&&a.length>0&&o(null)},[JSON.stringify(a)]),(0,eF.useEffect)(()=>{p||"number"!=typeof s||null!==m.current||(m.current=setTimeout(()=>{f(),m.current=null},s))},[s,p,f,...r]),{droppableRects:g,measureDroppableContainers:f,measuringScheduled:null!=a};function v(){switch(u){case c.Always:return!1;case c.BeforeDragging:return n;default:return!n}}}function nv(e,t){return e0(n=>e?n||("function"==typeof t?t(e):e):null,[t,e])}function nx(e,t){return nv(e,t)}function ny(e){let{callback:t,disabled:n}=e,r=eY(t),i=(0,eF.useMemo)(()=>{if(n||"undefined"==typeof window||void 0===window.MutationObserver)return;let{MutationObserver:e}=window;return new e(r)},[r,n]);return(0,eF.useEffect)(()=>()=>null==i?void 0:i.disconnect(),[i]),i}function nb(e){let{callback:t,disabled:n}=e,r=eY(t),i=(0,eF.useMemo)(()=>{if(n||"undefined"==typeof window||void 0===window.ResizeObserver)return;let{ResizeObserver:e}=window;return new e(r)},[n]);return(0,eF.useEffect)(()=>()=>null==i?void 0:i.disconnect(),[i]),i}function nw(e){return new t2(tO(e),e)}function nj(e,t,n){void 0===t&&(t=nw);let[r,i]=(0,eF.useState)(null);function a(){i(r=>{if(!e)return null;if(!1===e.isConnected){var i;return null!=(i=null!=r?r:n)?i:null}let a=t(e);return JSON.stringify(r)===JSON.stringify(a)?r:a})}let o=ny({callback(t){if(e)for(let n of t){let{type:t,target:r}=n;if("childList"===t&&r instanceof HTMLElement&&r.contains(e)){a();break}}}}),s=nb({callback:a});return e$(()=>{a(),e?(null==s||s.observe(e),null==o||o.observe(document.body,{childList:!0,subtree:!0})):(null==s||s.disconnect(),null==o||o.disconnect())},[e]),r}function nC(e){let t=nv(e);return tA(e,t)}let nk=[];function nS(e){let t=(0,eF.useRef)(e),n=e0(n=>e?n&&n!==nk&&e&&t.current&&e.parentNode===t.current.parentNode?n:tH(e):nk,[e]);return(0,eF.useEffect)(()=>{t.current=e},[e]),n}function nN(e){let[t,n]=(0,eF.useState)(null),r=(0,eF.useRef)(e),i=(0,eF.useCallback)(e=>{let t=tq(e.target);t&&n(e=>e?(e.set(t,tG(t)),new Map(e)):null)},[]);return(0,eF.useEffect)(()=>{let t=r.current;if(e!==t){a(t);let o=e.map(e=>{let t=tq(e);return t?(t.addEventListener("scroll",i,{passive:!0}),[t,tG(t)]):null}).filter(e=>null!=e);n(o.length?new Map(o):null),r.current=e}return()=>{a(e),a(t)};function a(e){e.forEach(e=>{let t=tq(e);null==t||t.removeEventListener("scroll",i)})}},[i,e]),(0,eF.useMemo)(()=>e.length?t?Array.from(t.values()).reduce((e,t)=>e7(e,t),ty):tQ(e):ty,[e,t])}function nE(e,t){void 0===t&&(t=[]);let n=(0,eF.useRef)(null);return(0,eF.useEffect)(()=>{n.current=null},t),(0,eF.useEffect)(()=>{let t=e!==ty;t&&!n.current&&(n.current=e),!t&&n.current&&(n.current=null)},[e]),n.current?e9(e,n.current):ty}function nM(e){(0,eF.useEffect)(()=>{if(!eH)return;let t=e.map(e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()});return()=>{for(let e of t)null==e||e()}},e.map(e=>{let{sensor:t}=e;return t}))}function nI(e,t){return(0,eF.useMemo)(()=>e.reduce((e,n)=>{let{eventName:r,handler:i}=n;return e[r]=e=>{i(e,t)},e},{}),[e,t])}function nD(e){return(0,eF.useMemo)(()=>e?tV(e):null,[e])}let nT=[];function nA(e,t){void 0===t&&(t=tO);let[n]=e,r=nD(n?eW(n):null),[i,a]=(0,eF.useState)(nT);function o(){a(()=>e.length?e.map(e=>tK(e)?r:new t2(t(e),e)):nT)}let s=nb({callback:o});return e$(()=>{null==s||s.disconnect(),o(),e.forEach(e=>null==s?void 0:s.observe(e))},[e]),i}function nL(e){if(!e)return null;if(e.children.length>1)return e;let t=e.children[0];return eG(t)?t:e}function nP(e){let{measure:t}=e,[n,r]=(0,eF.useState)(null),i=nb({callback:(0,eF.useCallback)(e=>{for(let{target:n}of e)if(eG(n)){r(e=>{let r=t(n);return e?{...e,width:r.width,height:r.height}:r});break}},[t])}),[a,o]=e1((0,eF.useCallback)(e=>{let n=nL(e);null==i||i.disconnect(),n&&(null==i||i.observe(n)),r(n?t(n):null)},[t,i]));return(0,eF.useMemo)(()=>({nodeRef:a,rect:n,setRef:o}),[n,a,o])}let nR=[{sensor:na,options:{}},{sensor:ne,options:{}}],n_={current:{}},nO={draggable:{measure:tF},droppable:{measure:tF,strategy:c.WhileDragging,frequency:u.Optimized},dragOverlay:{measure:tO}};class nF extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,n;return null!=(t=null==(n=this.get(e))?void 0:n.node.current)?t:void 0}}let nV={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new nF,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:tg},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:nO,measureDroppableContainers:tg,windowRect:null,measuringScheduled:!1},nB={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:tg,draggableNodes:new Map,over:null,measureDroppableContainers:tg},nz=(0,eF.createContext)(nB),nH=(0,eF.createContext)(nV);function nU(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new nF}}}function nq(e,t){switch(t.type){case n.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case n.DragMove:if(null==e.draggable.active)return e;return{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case n.DragEnd:case n.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case n.RegisterDroppable:{let{element:n}=t,{id:r}=n,i=new nF(e.droppable.containers);return i.set(r,n),{...e,droppable:{...e.droppable,containers:i}}}case n.SetDroppableDisabled:{let{id:n,key:r,disabled:i}=t,a=e.droppable.containers.get(n);if(!a||r!==a.key)return e;let o=new nF(e.droppable.containers);return o.set(n,{...a,disabled:i}),{...e,droppable:{...e.droppable,containers:o}}}case n.UnregisterDroppable:{let{id:n,key:r}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;let a=new nF(e.droppable.containers);return a.delete(n),{...e,droppable:{...e.droppable,containers:a}}}default:return e}}function nW(e){let{disabled:t}=e,{active:n,activatorEvent:r,draggableNodes:i}=(0,eF.useContext)(nz),a=e2(r),o=e2(null==n?void 0:n.id);return(0,eF.useEffect)(()=>{if(!t&&!r&&a&&null!=o){if(!e8(a)||document.activeElement===a.target)return;let e=i.get(o);if(!e)return;let{activatorNode:t,node:n}=e;(t.current||n.current)&&requestAnimationFrame(()=>{for(let e of[t.current,n.current]){if(!e)continue;let t=ti(e);if(t){t.focus();break}}})}},[r,t,i,o,a]),null}function nZ(e,t){let{transform:n,...r}=t;return null!=e&&e.length?e.reduce((e,t)=>t({transform:e,...r}),n):n}function nG(e){return(0,eF.useMemo)(()=>({draggable:{...nO.draggable,...null==e?void 0:e.draggable},droppable:{...nO.droppable,...null==e?void 0:e.droppable},dragOverlay:{...nO.dragOverlay,...null==e?void 0:e.dragOverlay}}),[null==e?void 0:e.draggable,null==e?void 0:e.droppable,null==e?void 0:e.dragOverlay])}function nK(e){let{activeNode:t,measure:n,initialRect:r,config:i=!0}=e,a=(0,eF.useRef)(!1),{x:o,y:s}="boolean"==typeof i?{x:i,y:i}:i;e$(()=>{if(!o&&!s||!t){a.current=!1;return}if(a.current||!r)return;let e=null==t?void 0:t.node.current;if(!e||!1===e.isConnected)return;let i=tA(n(e),r);if(o||(i.x=0),s||(i.y=0),a.current=!0,Math.abs(i.x)>0||Math.abs(i.y)>0){let t=tU(e);t&&t.scrollBy({top:i.y,left:i.x})}},[t,o,s,r,n])}let nX=(0,eF.createContext)({...ty,scaleX:1,scaleY:1});!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"}(d||(d={}));let n$=(0,eF.memo)(function(e){var t,r,i,a;let{id:o,accessibility:s,autoScroll:l=!0,children:c,sensors:u=nR,collisionDetection:p=tD,measuring:h,modifiers:f,...m}=e,[g,v]=(0,eF.useReducer)(nq,void 0,nU),[x,y]=tp(),[b,w]=(0,eF.useState)(d.Uninitialized),j=b===d.Initialized,{draggable:{active:C,nodes:k,translate:S},droppable:{containers:N}}=g,E=null!=C?k.get(C):null,M=(0,eF.useRef)({initial:null,translated:null}),I=(0,eF.useMemo)(()=>{var e;return null!=C?{id:C,data:null!=(e=null==E?void 0:E.data)?e:n_,rect:M}:null},[C,E]),D=(0,eF.useRef)(null),[T,A]=(0,eF.useState)(null),[L,P]=(0,eF.useState)(null),R=eQ(m,Object.values(m)),_=e4("DndDescribedBy",o),O=(0,eF.useMemo)(()=>N.getEnabled(),[N]),F=nG(h),{droppableRects:V,measureDroppableContainers:B,measuringScheduled:z}=ng(O,{dragging:j,dependencies:[S.x,S.y],config:F.droppable}),H=nh(k,C),U=(0,eF.useMemo)(()=>L?tt(L):null,[L]),q=ew(),W=nx(H,F.draggable.measure);nK({activeNode:null!=C?k.get(C):null,config:q.layoutShiftCompensation,initialRect:W,measure:F.draggable.measure});let Z=nj(H,F.draggable.measure,W),G=nj(H?H.parentElement:null),K=(0,eF.useRef)({activatorEvent:null,active:null,activeNode:H,collisionRect:null,collisions:null,droppableRects:V,draggableNodes:k,draggingNode:null,draggingNodeRect:null,droppableContainers:N,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),X=N.getNodeFor(null==(t=K.current.over)?void 0:t.id),$=nP({measure:F.dragOverlay.measure}),Y=null!=(r=$.nodeRef.current)?r:H,J=j?null!=(i=$.rect)?i:Z:null,Q=!!($.nodeRef.current&&$.rect),ee=nC(Q?null:Z),et=nD(Y?eW(Y):null),en=nS(j?null!=X?X:H:null),er=nA(en),ei=nZ(f,{transform:{x:S.x-ee.x,y:S.y-ee.y,scaleX:1,scaleY:1},activatorEvent:L,active:I,activeNodeRect:Z,containerNodeRect:G,draggingNodeRect:J,over:K.current.over,overlayNodeRect:$.rect,scrollableAncestors:en,scrollableAncestorRects:er,windowRect:et}),ea=U?e7(U,S):null,eo=nN(en),es=nE(eo),el=nE(eo,[Z]),ec=e7(ei,es),eu=J?tL(J,ei):null,ed=I&&eu?p({active:I,collisionRect:eu,droppableRects:V,droppableContainers:O,pointerCoordinates:ea}):null,ep=tS(ed,"id"),[eh,ef]=(0,eF.useState)(null),em=tT(Q?ei:e7(ei,el),null!=(a=null==eh?void 0:eh.rect)?a:null,Z),eg=(0,eF.useRef)(null),ev=(0,eF.useCallback)((e,t)=>{let{sensor:r,options:i}=t;if(null==D.current)return;let a=k.get(D.current);if(!a)return;let o=e.nativeEvent,s=new r({active:D.current,activeNode:a,event:o,options:i,context:K,onAbort(e){if(!k.get(e))return;let{onDragAbort:t}=R.current,n={id:e};null==t||t(n),x({type:"onDragAbort",event:n})},onPending(e,t,n,r){if(!k.get(e))return;let{onDragPending:i}=R.current,a={id:e,constraint:t,initialCoordinates:n,offset:r};null==i||i(a),x({type:"onDragPending",event:a})},onStart(e){let t=D.current;if(null==t)return;let r=k.get(t);if(!r)return;let{onDragStart:i}=R.current,a={activatorEvent:o,active:{id:t,data:r.data,rect:M}};(0,eV.unstable_batchedUpdates)(()=>{null==i||i(a),w(d.Initializing),v({type:n.DragStart,initialCoordinates:e,active:t}),x({type:"onDragStart",event:a}),A(eg.current),P(o)})},onMove(e){v({type:n.DragMove,coordinates:e})},onEnd:l(n.DragEnd),onCancel:l(n.DragCancel)});function l(e){return async function(){let{active:t,collisions:r,over:i,scrollAdjustedTranslate:a}=K.current,s=null;if(t&&a){let{cancelDrop:l}=R.current;s={activatorEvent:o,active:t,collisions:r,delta:a,over:i},e===n.DragEnd&&"function"==typeof l&&await Promise.resolve(l(s))&&(e=n.DragCancel)}D.current=null,(0,eV.unstable_batchedUpdates)(()=>{v({type:e}),w(d.Uninitialized),ef(null),A(null),P(null),eg.current=null;let t=e===n.DragEnd?"onDragEnd":"onDragCancel";if(s){let e=R.current[t];null==e||e(s),x({type:t,event:s})}})}}eg.current=s},[k]),ex=nf(u,(0,eF.useCallback)((e,t)=>(n,r)=>{let i=n.nativeEvent,a=k.get(r);if(null!==D.current||!a||i.dndKit||i.defaultPrevented)return;let o={active:a};!0===e(n,t.options,o)&&(i.dndKit={capturedBy:t.sensor},D.current=r,ev(n,t))},[k,ev]));nM(u),e$(()=>{Z&&b===d.Initializing&&w(d.Initialized)},[Z,b]),(0,eF.useEffect)(()=>{let{onDragMove:e}=R.current,{active:t,activatorEvent:n,collisions:r,over:i}=K.current;if(!t||!n)return;let a={active:t,activatorEvent:n,collisions:r,delta:{x:ec.x,y:ec.y},over:i};(0,eV.unstable_batchedUpdates)(()=>{null==e||e(a),x({type:"onDragMove",event:a})})},[ec.x,ec.y]),(0,eF.useEffect)(()=>{let{active:e,activatorEvent:t,collisions:n,droppableContainers:r,scrollAdjustedTranslate:i}=K.current;if(!e||null==D.current||!t||!i)return;let{onDragOver:a}=R.current,o=r.get(ep),s=o&&o.rect.current?{id:o.id,rect:o.rect.current,data:o.data,disabled:o.disabled}:null,l={active:e,activatorEvent:t,collisions:n,delta:{x:i.x,y:i.y},over:s};(0,eV.unstable_batchedUpdates)(()=>{ef(s),null==a||a(l),x({type:"onDragOver",event:l})})},[ep]),e$(()=>{K.current={activatorEvent:L,active:I,activeNode:H,collisionRect:eu,collisions:ed,droppableRects:V,draggableNodes:k,draggingNode:Y,draggingNodeRect:J,droppableContainers:N,over:eh,scrollableAncestors:en,scrollAdjustedTranslate:ec},M.current={initial:J,translated:eu}},[I,H,ed,eu,k,Y,J,V,N,eh,en,ec]),nu({...q,delta:S,draggingRect:eu,pointerCoordinates:ea,scrollableAncestors:en,scrollableAncestorRects:er});let ey=(0,eF.useMemo)(()=>({active:I,activeNode:H,activeNodeRect:Z,activatorEvent:L,collisions:ed,containerNodeRect:G,dragOverlay:$,draggableNodes:k,droppableContainers:N,droppableRects:V,over:eh,measureDroppableContainers:B,scrollableAncestors:en,scrollableAncestorRects:er,measuringConfiguration:F,measuringScheduled:z,windowRect:et}),[I,H,Z,L,ed,G,$,k,N,V,eh,B,en,er,F,z,et]),eb=(0,eF.useMemo)(()=>({activatorEvent:L,activators:ex,active:I,activeNodeRect:Z,ariaDescribedById:{draggable:_},dispatch:v,draggableNodes:k,over:eh,measureDroppableContainers:B}),[L,ex,I,Z,v,_,k,eh,B]);return eF.default.createElement(tu.Provider,{value:y},eF.default.createElement(nz.Provider,{value:eb},eF.default.createElement(nH.Provider,{value:ey},eF.default.createElement(nX.Provider,{value:em},c)),eF.default.createElement(nW,{disabled:(null==s?void 0:s.restoreFocus)===!1})),eF.default.createElement(tm,{...s,hiddenTextDescribedById:_}));function ew(){let e=(null==T?void 0:T.autoScrollEnabled)===!1,t="object"==typeof l?!1===l.enabled:!1===l,n=j&&!e&&!t;return"object"==typeof l?{...l,enabled:n}:{enabled:n}}}),nY=(0,eF.createContext)(null),nJ="button",nQ="Draggable";function n0(e){let{id:t,data:n,disabled:r=!1,attributes:i}=e,a=e4(nQ),{activators:o,activatorEvent:s,active:l,activeNodeRect:c,ariaDescribedById:u,draggableNodes:d,over:p}=(0,eF.useContext)(nz),{role:h=nJ,roleDescription:f="draggable",tabIndex:m=0}=null!=i?i:{},g=(null==l?void 0:l.id)===t,v=(0,eF.useContext)(g?nX:nY),[x,y]=e1(),[b,w]=e1(),j=nI(o,t),C=eQ(n);return e$(()=>(d.set(t,{id:t,key:a,node:x,activatorNode:b,data:C}),()=>{let e=d.get(t);e&&e.key===a&&d.delete(t)}),[d,t]),{active:l,activatorEvent:s,activeNodeRect:c,attributes:(0,eF.useMemo)(()=>({role:h,tabIndex:m,"aria-disabled":r,"aria-pressed":!!g&&h===nJ||void 0,"aria-roledescription":f,"aria-describedby":u.draggable}),[r,h,m,g,f,u.draggable]),isDragging:g,listeners:r?void 0:j,node:x,over:p,setNodeRef:y,setActivatorNodeRef:w,transform:v}}function n1(){return(0,eF.useContext)(nH)}let n2="Droppable",n5={timeout:25};function n4(e){let{data:t,disabled:r=!1,id:i,resizeObserverConfig:a}=e,o=e4(n2),{active:s,dispatch:l,over:c,measureDroppableContainers:u}=(0,eF.useContext)(nz),d=(0,eF.useRef)({disabled:r}),p=(0,eF.useRef)(!1),h=(0,eF.useRef)(null),f=(0,eF.useRef)(null),{disabled:m,updateMeasurementsFor:g,timeout:v}={...n5,...a},x=eQ(null!=g?g:i),y=nb({callback:(0,eF.useCallback)(()=>{if(!p.current){p.current=!0;return}null!=f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{u(Array.isArray(x.current)?x.current:[x.current]),f.current=null},v)},[v]),disabled:m||!s}),[b,w]=e1((0,eF.useCallback)((e,t)=>{y&&(t&&(y.unobserve(t),p.current=!1),e&&y.observe(e))},[y])),j=eQ(t);return(0,eF.useEffect)(()=>{y&&b.current&&(y.disconnect(),p.current=!1,y.observe(b.current))},[b,y]),(0,eF.useEffect)(()=>(l({type:n.RegisterDroppable,element:{id:i,key:o,disabled:r,node:b,rect:h,data:j}}),()=>l({type:n.UnregisterDroppable,key:o,id:i})),[i]),(0,eF.useEffect)(()=>{r!==d.current.disabled&&(l({type:n.SetDroppableDisabled,id:i,key:o,disabled:r}),d.current.disabled=r)},[i,o,r,l]),{active:s,rect:h,isOver:(null==c?void 0:c.id)===i,node:b,over:c,setNodeRef:w}}let n3={position:"fixed",touchAction:"none"},n7=e=>e8(e)?"transform 250ms ease":void 0,n9=((e,t)=>{let{as:n,activatorEvent:r,adjustScale:i,children:a,className:o,rect:s,style:l,transform:c,transition:u=n7}=e;if(!s)return null;let d=i?c:{...c,scaleX:1,scaleY:1},p={...n3,width:s.width,height:s.height,top:s.top,left:s.left,transform:tn.Transform.toString(d),transformOrigin:i&&r?tw(r,s):void 0,transition:"function"==typeof u?u(r):u,...l};return eF.default.createElement(n,{className:o,style:p,ref:t},a)},{duration:250,easing:"ease",keyframes:e=>{let{transform:{initial:t,final:n}}=e;return[{transform:tn.Transform.toString(t)},{transform:tn.Transform.toString(n)}]},sideEffects:(t={styles:{active:{opacity:"0"}}},e=>{let{active:n,dragOverlay:r}=e,i={},{styles:a,className:o}=t;if(null!=a&&a.active)for(let[e,t]of Object.entries(a.active))void 0!==t&&(i[e]=n.node.style.getPropertyValue(e),n.node.style.setProperty(e,t));if(null!=a&&a.dragOverlay)for(let[e,t]of Object.entries(a.dragOverlay))void 0!==t&&r.node.style.setProperty(e,t);return null!=o&&o.active&&n.node.classList.add(o.active),null!=o&&o.dragOverlay&&r.node.classList.add(o.dragOverlay),function(){for(let[e,t]of Object.entries(i))n.node.style.setProperty(e,t);null!=o&&o.active&&n.node.classList.remove(o.active)}})});e.s(["DndContext",()=>n$,"KeyboardCode",()=>a,"KeyboardSensor",()=>ne,"MouseSensor",()=>ns,"PointerSensor",()=>na,"TouchSensor",()=>nc,"closestCenter",()=>tE,"closestCorners",()=>tM,"getClientRect",()=>tO,"getFirstCollision",()=>tS,"getScrollableAncestors",()=>tH,"useDndContext",()=>n1,"useDraggable",()=>n0,"useDroppable",()=>n4,"useSensor",()=>tv,"useSensors",()=>tx],563044);var n6=p;function n8(e,t,n){let r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function re(e,t){return e.reduce((e,n,r)=>{let i=t.get(n);return i&&(e[r]=i),e},Array(e.length))}function rt(e){return null!==e&&e>=0}function rn(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function rr(e){return"boolean"==typeof e?{draggable:e,droppable:e}:e}let ri=e=>{let{rects:t,activeIndex:n,overIndex:r,index:i}=e,a=n8(t,r,n),o=t[i],s=a[i];return s&&o?{x:s.left-o.left,y:s.top-o.top,scaleX:s.width/o.width,scaleY:s.height/o.height}:null},ra={scaleX:1,scaleY:1},ro=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:i,rects:a,overIndex:o}=e,s=null!=(t=a[n])?t:r;if(!s)return null;if(i===n){let e=a[o];return e?{x:0,y:n<o?e.top+e.height-(s.top+s.height):e.top-s.top,...ra}:null}let l=rs(a,i,n);return i>n&&i<=o?{x:0,y:-s.height-l,...ra}:i<n&&i>=o?{x:0,y:s.height+l,...ra}:{x:0,y:0,...ra}};function rs(e,t,n){let r=e[t],i=e[t-1],a=e[t+1];return r?n<t?i?r.top-(i.top+i.height):a?a.top-(r.top+r.height):0:a?a.top-(r.top+r.height):i?r.top-(i.top+i.height):0:0}let rl="Sortable",rc=n6.default.createContext({activeIndex:-1,containerId:rl,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:ri,disabled:{draggable:!1,droppable:!1}});function ru(e){let{children:t,id:n,items:r,strategy:i=ri,disabled:a=!1}=e,{active:o,dragOverlay:s,droppableRects:l,over:c,measureDroppableContainers:u}=n1(),d=e4(rl,n),p=null!==s.rect,h=(0,n6.useMemo)(()=>r.map(e=>"object"==typeof e&&"id"in e?e.id:e),[r]),f=null!=o,m=o?h.indexOf(o.id):-1,g=c?h.indexOf(c.id):-1,v=(0,n6.useRef)(h),x=!rn(h,v.current),y=-1!==g&&-1===m||x,b=rr(a);e$(()=>{x&&f&&u(h)},[x,h,f,u]),(0,n6.useEffect)(()=>{v.current=h},[h]);let w=(0,n6.useMemo)(()=>({activeIndex:m,containerId:d,disabled:b,disableTransforms:y,items:h,overIndex:g,useDragOverlay:p,sortedRects:re(h,l),strategy:i}),[m,d,b.draggable,b.droppable,y,h,g,l,p,i]);return n6.default.createElement(rc.Provider,{value:w},t)}let rd=e=>{let{id:t,items:n,activeIndex:r,overIndex:i}=e;return n8(n,r,i).indexOf(t)},rp=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:i,items:a,newIndex:o,previousItems:s,previousContainerId:l,transition:c}=e;return!!c&&!!r&&(s===a||i!==o)&&(!!n||o!==i&&t===l)},rh={duration:200,easing:"ease"},rf="transform",rm=tn.Transition.toString({property:rf,duration:0,easing:"linear"}),rg={roleDescription:"sortable"};function rv(e){let{disabled:t,index:n,node:r,rect:i}=e,[a,o]=(0,n6.useState)(null),s=(0,n6.useRef)(n);return e$(()=>{if(!t&&n!==s.current&&r.current){let e=i.current;if(e){let t=tO(r.current,{ignoreTransform:!0}),n={x:e.left-t.left,y:e.top-t.top,scaleX:e.width/t.width,scaleY:e.height/t.height};(n.x||n.y)&&o(n)}}n!==s.current&&(s.current=n)},[t,n,r,i]),(0,n6.useEffect)(()=>{a&&o(null)},[a]),a}function rx(e){let{animateLayoutChanges:t=rp,attributes:n,disabled:r,data:i,getNewIndex:a=rd,id:o,strategy:s,resizeObserverConfig:l,transition:c=rh}=e,{items:u,containerId:d,activeIndex:p,disabled:h,disableTransforms:f,sortedRects:m,overIndex:g,useDragOverlay:v,strategy:x}=(0,n6.useContext)(rc),y=ry(r,h),b=u.indexOf(o),w=(0,n6.useMemo)(()=>({sortable:{containerId:d,index:b,items:u},...i}),[d,i,b,u]),j=(0,n6.useMemo)(()=>u.slice(u.indexOf(o)),[u,o]),{rect:C,node:k,isOver:S,setNodeRef:N}=n4({id:o,data:w,disabled:y.droppable,resizeObserverConfig:{updateMeasurementsFor:j,...l}}),{active:E,activatorEvent:M,activeNodeRect:I,attributes:D,setNodeRef:T,listeners:A,isDragging:L,over:P,setActivatorNodeRef:R,transform:_}=n0({id:o,data:w,attributes:{...rg,...n},disabled:y.draggable}),O=ez(N,T),F=!!E,V=F&&!f&&rt(p)&&rt(g),B=!v&&L,z=B&&V?_:null,H=null!=s?s:x,U=V?null!=z?z:H({rects:m,activeNodeRect:I,activeIndex:p,overIndex:g,index:b}):null,q=rt(p)&&rt(g)?a({id:o,items:u,activeIndex:p,overIndex:g}):b,W=null==E?void 0:E.id,Z=(0,n6.useRef)({activeId:W,items:u,newIndex:q,containerId:d}),G=u!==Z.current.items,K=t({active:E,containerId:d,isDragging:L,isSorting:F,id:o,index:b,items:u,newIndex:Z.current.newIndex,previousItems:Z.current.items,previousContainerId:Z.current.containerId,transition:c,wasDragging:null!=Z.current.activeId}),X=rv({disabled:!K,index:b,node:k,rect:C});return(0,n6.useEffect)(()=>{F&&Z.current.newIndex!==q&&(Z.current.newIndex=q),d!==Z.current.containerId&&(Z.current.containerId=d),u!==Z.current.items&&(Z.current.items=u)},[F,q,d,u]),(0,n6.useEffect)(()=>{if(W===Z.current.activeId)return;if(null!=W&&null==Z.current.activeId){Z.current.activeId=W;return}let e=setTimeout(()=>{Z.current.activeId=W},50);return()=>clearTimeout(e)},[W]),{active:E,activeIndex:p,attributes:D,data:w,rect:C,index:b,newIndex:q,items:u,isOver:S,isSorting:F,isDragging:L,listeners:A,node:k,overIndex:g,over:P,setNodeRef:O,setActivatorNodeRef:R,setDroppableNodeRef:N,setDraggableNodeRef:T,transform:null!=X?X:U,transition:$()};function $(){return X||G&&Z.current.newIndex===b?rm:(!B||e8(M))&&c&&(F||K)?tn.Transition.toString({...c,property:rf}):void 0}}function ry(e,t){var n,r;return"boolean"==typeof e?{draggable:e,droppable:!1}:{draggable:null!=(n=null==e?void 0:e.draggable)?n:t.draggable,droppable:null!=(r=null==e?void 0:e.droppable)?r:t.droppable}}function rb(e){if(!e)return!1;let t=e.data.current;return!!t&&"sortable"in t&&"object"==typeof t.sortable&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable}let rw=[a.Down,a.Right,a.Up,a.Left],rj=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:i,droppableContainers:o,over:s,scrollableAncestors:l}}=t;if(rw.includes(e.code)){if(e.preventDefault(),!n||!r)return;let t=[];o.getEnabled().forEach(n=>{if(!n||null!=n&&n.disabled)return;let o=i.get(n.id);if(o)switch(e.code){case a.Down:r.top<o.top&&t.push(n);break;case a.Up:r.top>o.top&&t.push(n);break;case a.Left:r.left>o.left&&t.push(n);break;case a.Right:r.left<o.left&&t.push(n)}});let c=tM({active:n,collisionRect:r,droppableRects:i,droppableContainers:t,pointerCoordinates:null}),u=tS(c,"id");if(u===(null==s?void 0:s.id)&&c.length>1&&(u=c[1].id),null!=u){let e=o.get(n.id),t=o.get(u),a=t?i.get(t.id):null,s=null==t?void 0:t.node.current;if(s&&a&&e&&t){let n=tH(s).some((e,t)=>l[t]!==e),i=rC(e,t),o=rk(e,t),c=n||!i?{x:0,y:0}:{x:o?r.width-a.width:0,y:o?r.height-a.height:0},u={x:a.left,y:a.top};return c.x&&c.y?u:e9(u,c)}}}};function rC(e,t){return!!rb(e)&&!!rb(t)&&e.data.current.sortable.containerId===t.data.current.sortable.containerId}function rk(e,t){return!!rb(e)&&!!rb(t)&&!!rC(e,t)&&e.data.current.sortable.index<t.data.current.sortable.index}function rS(e){let{chatId:t,submitQueuedPrompt:n}=e,r=(0,eI.getChatAtoms)(t),{atoms:i,actions:{setIsTodosWithQueueOpen:a}}=(0,ev.useCurrentChatPrompt)(),o=(0,em.useAtomValue)(i.isTodosWithQueueOpen),s=(0,em.useAtomValue)(r.isStreaming),l=(0,em.useAtomValue)(i.promptQueue),{completedList:c,notCompletedList:u,totalCount:d,isListComplete:p,totalDone:h,totalInProgress:f}=(0,em.useAtomValue)(i.todoList),m=f>0,g=(0,eg.useMemo)(()=>l.length>0?"".concat(l.length," prompt").concat(1===l.length?"":"s"," queued"):p?"".concat(d," tasks complete"):s?"Task ".concat(h+(m?f:0)," of ").concat(d," ").concat(m?"in progress":"complete"):d>0?"Task ".concat(h," of ").concat(d," complete"):null,[l.length,p,s,h,d,m,f]),v=(0,eg.useMemo)(()=>l.length>0?d>0?"".concat(d," tasks"):null:s?null:h===d&&d>0?"Done":d>0?"Paused":null,[s,l.length,d,h]),x=l.length>0,y=d>0&&d!==h,b=(0,eg.useMemo)(()=>y&&x&&o?"tasks":"",[y,x,o]),{topRef:w,bottomRef:j,showTopBorder:C,showBottomBorder:k,containerRef:S}=(0,eL.useScrollBorders)("vertical",{showInitialBorders:!0,dependencies:[b,o]});return(0,eh.jsx)(eM.Root,{type:"single",collapsible:!0,className:"w-full",value:o?"tasks":"",onValueChange:e=>{a("tasks"===e)},children:(0,eh.jsxs)(eM.Item,{value:"tasks",className:"w-full",children:[(0,eh.jsxs)(eM.Trigger,{className:(0,ef.cn)("group/trigger w-full flex items-center px-3 h-9 justify-between rounded-t-[12px] text-gray-900 rounded-b-[6px]","focus-visible:ring-offset-background outline-hidden has-focus-visible:ring-2 ring-blue-600 ring-inset transition focus-visible:ring-2 focus-visible:ring-offset-1"),children:[(0,eh.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,eh.jsx)(ew.ChevronDownSmall,{className:(0,ef.cn)("transition-all shrink-0","rotate-[-90deg] group-data-[state=open]/trigger:rotate-0 duration-100")}),(0,eh.jsx)(e_.TransitionNode,{...e_.PRESETS.buttonContent,justify:"start",renderKey:"".concat(x,"-").concat(y),children:(0,eh.jsx)("span",{className:"text-label-13 font-medium whitespace-nowrap",children:g})})]}),(0,eh.jsx)("span",{className:"text-[13px] font-medium text-gray-500",children:v})]}),(0,eh.jsx)(eM.Content,{className:(0,ef.cn)("overflow-hidden data-[state=open]:animate-accordion-down data-[state=closed]:animate-accordion-up",eA.default.content),children:(0,eh.jsxs)("div",{className:"relative overflow-hidden",children:[(0,eh.jsx)(eP.ScrollFade,{direction:"top",visible:C,orientation:"vertical",color:"muted"}),(0,eh.jsx)(eP.ScrollFade,{direction:"bottom",visible:k,orientation:"vertical",color:"muted"}),(0,eh.jsx)("div",{ref:S,tabIndex:-1,className:"max-h-[140px] overflow-y-scroll",style:{...(0,eD.visibleStylesIf)(o),...(0,eT.transitionStyles)(["opacity","filter"],{duration:300}),filter:"blur(".concat(3*!o,"px)")},children:(0,eh.jsxs)("div",{className:"px-3 pb-3 flex flex-col gap-2 relative",children:[(0,eh.jsx)(eP.ScrollMarker,{ref:w,side:"top",orientation:"vertical"}),x?(0,eh.jsx)(rN,{promptQueue:l,submitQueuedPrompt:n}):null,x&&y?(0,eh.jsx)("div",{className:"border-t border-gray-200"}):null,y?(0,eh.jsxs)("div",{className:"flex flex-col gap-2",children:[h>0?(0,eh.jsx)(rI,{completedList:c,totalDone:h,isStreaming:s}):null,u.map((e,t)=>(0,eh.jsx)(rD,{item:e,isStreaming:s},t))]}):null,(0,eh.jsx)(eP.ScrollMarker,{ref:j,side:"bottom",orientation:"vertical"})]})})]})})]})})}function rN(e){let{promptQueue:t,submitQueuedPrompt:n}=e,{actions:{reorderPromptQueue:r}}=(0,ev.useCurrentChatPrompt)(),i=tx(tv(na),tv(ne,{coordinateGetter:rj})),a=e=>{let{active:t,over:n}=e;n&&t.id!==n.id&&r(t.id,n.id)};return(0,eh.jsx)(n$,{sensors:i,collisionDetection:tE,onDragEnd:a,children:(0,eh.jsx)(ru,{items:t.map(e=>e.id),strategy:ro,children:(0,eh.jsx)(e_.TransitionNode,{renderKey:"".concat(t.length),style:{width:"100%"},childClassName:"w-full overflow-hidden",children:(0,eh.jsx)("div",{className:"flex flex-col gap-1 group/prompt-queue overflow-hidden ",children:t.map(e=>(0,eh.jsx)(rE,{prompt:e,submitQueuedPrompt:n,isDragDisabled:t.length<2},e.id))})})})})}function rE(e){let{prompt:t,isDragDisabled:n,submitQueuedPrompt:r}=e,{attributes:i,listeners:a,setNodeRef:o,transform:s,isDragging:l,isSorting:c}=rx({id:t.id,disabled:n}),{actions:u,atoms:d}=(0,ev.useCurrentChatPrompt)(),p=(0,em.useAtomValue)(d.editingQueuedPrompt),h=(null==p?void 0:p.id)===t.id,f={transform:tn.Transform.toString(s),opacity:l&&c?.5:1,...c?(0,eT.transitionStyles)(["opacity","transform"],{duration:l?20:250}):{}},m=(0,eT.transitionStyles)(["opacity","scale"],{duration:150}),g=(0,eg.useMemo)(()=>n?"cursor-default":c?"cursor-grabbing":"cursor-grab",[n,c]);return(0,eh.jsxs)("div",{ref:o,style:{...f,animationDuration:"0.8s"},className:(0,ef.cn)("group relative flex items-center gap-2 group/prompt-queue-item",{"animate-pulse":h}),children:[(0,eh.jsxs)("div",{className:(0,ef.cn)("flex items-center gap-2 flex-1 overflow-hidden",g),...i,...a,children:[(0,eh.jsxs)("div",{className:"min-w-4 min-h-4 grid place-items-center justify-items-center text-gray-400 group/prefix",children:[(0,eh.jsx)(ek,{className:(0,ef.cn)("grid-stack opacity-0 scale-75 ",{"group-hover/prefix:opacity-100 group-hover/prefix:scale-100":!n}),style:{...c?(0,eD.visibleStylesIf)(l):{},...m}}),(0,eh.jsx)(eC,{className:(0,ef.cn)("grid-stack",{"group-hover/prefix:opacity-0 group-hover/prefix:scale-75":!n}),style:{...c?(0,eD.visibleStylesIf)(!l):{},...m}})]}),(0,eh.jsx)("span",{className:"text-[13px] flex-1 truncate",children:(0,ev.getPlainTextFromQueuedMessage)(t)})]}),(0,eh.jsx)("div",{className:"flex items-center absolute right-0",children:(0,eh.jsxs)("div",{className:(0,ef.cn)("flex items-center opacity-0 gap-1 bg-muted","group-hover/prompt-queue-item:opacity-100 focus-within:opacity-100"),style:{...c?(0,eD.visibleStylesIf)(!1):{},...m},children:[(0,eh.jsx)("div",{className:"absolute w-[32px] left-[-32px] h-full bg-gradient-to-l from-muted to-transparent pointer-events-none"}),(0,eh.jsx)(rM,{onClick:()=>r(t),title:"Send prompt",children:(0,eh.jsx)(eE.ArrowUp,{})}),(0,eh.jsx)(rM,{onClick:()=>u.startEditingQueuedPrompt(t),title:"Edit queued prompt",children:(0,eh.jsx)(eS.PencilEdit,{})}),(0,eh.jsx)(rM,{onClick:()=>u.removePromptFromQueue(t.id),title:"Remove from queue",children:(0,eh.jsx)(eN.Trash,{})})]})})]})}function rM(e){let{children:t,onClick:n,title:r}=e;return(0,eh.jsx)(eO.Button,{className:"px-0 h-6 w-6 text-gray-500 hover:text-gray-900 focus-visible:text-gray-900",size:"sm",variant:"ghost",type:"button",onClick:n,title:r,children:t})}function rI(e){let{completedList:t,totalDone:n,isStreaming:r}=e;return(0,eh.jsx)(eM.Root,{type:"single",collapsible:!0,className:"w-full",children:(0,eh.jsxs)(eM.Item,{value:"completed",children:[(0,eh.jsx)(eM.Trigger,{className:"group/completed flex items-center gap-2 text-[13px] w-full",children:(0,eh.jsx)(rD,{item:{task:"".concat(n," completed tasks"),status:"done"},isStreaming:r})}),(0,eh.jsx)(eM.Content,{className:"overflow-hidden data-[state=open]:animate-accordion-down data-[state=closed]:animate-accordion-up",children:(0,eh.jsx)("div",{className:"flex flex-col gap-1 pt-2",children:t.map((e,t)=>(0,eh.jsx)(rD,{item:e,prefix:(0,eh.jsx)(rL,{}),isStreaming:r},t))})})]})})}function rD(e){let{item:t,isStreaming:n,prefix:r}=e,{prefix:i}=(0,eg.useMemo)(()=>{switch(t.status){case"in-progress":return{prefix:n?(0,eh.jsx)(ex.Spinner,{size:16}):(0,eh.jsx)(ej,{})};case"todo":return{prefix:(0,eh.jsx)(rT,{})};case"done":return{prefix:(0,eh.jsx)(eb.CheckCircleFill,{})}}},[t.status,n]);return(0,eh.jsxs)("div",{className:rA({status:t.status}),children:[(0,eh.jsx)("div",{className:"min-w-4 min-h-4 flex items-center justify-center text-gray-400 mt-[2px]",children:null!=r?r:i}),(0,eh.jsx)("div",{className:"word-break whitespace-pre-wrap overflow-hidden min-h-4",children:t.task})]})}e.s(["SortableContext",()=>ru,"arrayMove",()=>n8,"sortableKeyboardCoordinates",()=>rj,"useSortable",()=>rx,"verticalListSortingStrategy",()=>ro],301795);let rT=(0,ey.withNewIcon)('<circle cx="8" cy="8" r="7.25" stroke="currentColor" fill="transparent" stroke-width="1.5" stroke-dasharray="2.7 3"/>'),rA=(0,eR.cva)("flex items-start gap-2 min-h-fit text-[13px] transition-colors truncate",{variants:{status:{"in-progress":"",todo:"text-gray-900",done:"text-gray-500"}},defaultVariants:{status:"todo"}}),rL=(0,ey.withNewIcon)('<path d="M12.0605 6L7.03027 11.0303C6.73738 11.3232 6.26262 11.3232 5.96973 11.0303L3.93945 9L5 7.93945L6.5 9.43945L11 4.93945L12.0605 6Z" fill="currentColor"/>');var rP=e.i(150218),rR=e.i(385671);let r_=e=>{let{steps:t,messageId:n,preventRenderSkipOrContinue:r=!1}=e,i=(0,et.useActiveBlockState)(),{latestBlock:a}=(0,z.useBlockHistory)({searchAll:!0}),o=i||a,s=t.filter(e=>["add-integration","add-env-var","run-script","run-action"].includes(e.type));return 0===s.length?null:(0,N.jsx)(rO,{steps:s,messageId:n,currentBlock:o,preventRenderSkipOrContinue:r})},rO=e=>{var t,n,r,i;let{steps:a,messageId:o,currentBlock:s,preventRenderSkipOrContinue:l}=e,{stores:c}=(0,D.useAllTeamIntegrations)(),u=(0,et.useActiveBlockState)(),{isStreaming:d}=(0,G.useChatLoadingState)(),{refresh:p}=(0,T.useBrowserFrame)(),h=(0,W.useChatMetadata)(),{canWriteToChat:f}=h,{messages:m,activeForkKey:g}=(0,G.useChatMessages)(),v=(0,Q.useMemo)(()=>m.filter(e=>null==g?void 0:g.includes(e.id)),[m,g]),x=(0,Q.useMemo)(()=>v[v.length-1].id===o,[v,o]),y=(0,et.useSetActiveBlockView)(),{chatId:b}=(0,G.useChatId)(),{activeScope:w}=(0,I.useActiveScope)(),j=(0,L.useDefaultTeam)(),[C,k]=(0,Q.useState)(null),[S,z]=(0,Q.useState)(!1),eh=(0,Q.useMemo)(()=>a.filter(e=>"run-script"===e.type).map(e=>"".concat((null==s?void 0:s.id)||"NO_BLOCK",":").concat(e.stepName)),[a,null==s?void 0:s.id]),{data:ef,isLoading:em}=(0,en.useCompletedExecutions)(eh),{project:eg}=(0,W.useChatMetadata)(),{envVars:ev,isLoading:ex,refetchVercelProject:ey}=(0,_.useVercelProject)({v0ProjectId:null!=(r=null==eg?void 0:eg.projectId)?r:void 0}),{actions:eb}=(0,rR.useChatLayout)(),{appendCodeOutputEvents:ew,expandConsole:ej}=(0,K.useConsole)((null==s?void 0:s.id)||"NO_BLOCK"),{setActiveFilePath:eC}=(0,q.useActiveFile)({blockId:(null==s?void 0:s.id)||"NO_BLOCK"}),{saveLastOpenedBlock:ek}=(0,er.useLastOpenedBlock)(),eS=null==(t=h.project)?void 0:t.vercelProjectId,{integrations:eN}=(0,R.useIntegrationOptions)({integrationIds:E.RECOMMENDED_INTEGRATION_SLUGS,isEnabled:!0}),{stores:{data:{marketplaceStores:eE,nativeStores:eM},refetch:eI},isLoading:eD}=(0,A.useConnectedIntegrations)({vercelProjectId:null!=eS?eS:void 0,v0ProjectId:null==(n=h.project)?void 0:n.projectId,refreshInterval:0}),eT=(0,Q.useMemo)(()=>!eS||eD?[]:[...eE.map(e=>e.product.name),...eM.map(e=>e.integrationName)],[eE,eD,eS,eM]),eA=(0,Q.useMemo)(()=>eT.some(e=>"supabase"===e.toLowerCase()),[eT]),eL=(0,Q.useMemo)(()=>!!ev&&(0,ee.getSQLExecEnvVars)(Object.keys(ev)).length>0,[ev]),{clearTimeout:eP}=(0,eo.getProjectSettingsActions)(null!=(i=null==eg?void 0:eg.projectId)?i:""),{refetchLinks:eR}=(0,P.useIntegrationLinks)({source:"add-integration",messageId:o},async e=>{let t=a.findIndex(t=>"add-integration"===t.type&&t.stepName===e[0].integrationName);-1!==t&&eF(t,"connected_integration"),eP(e[0].integrationName),ey(),e.forEach(e=>{(0,U.track)("AddIntegration",{integrationSlug:e.integrationName,chatId:e.chatId||"",source:e.source})}),p()}),[e_,eO]=(0,Q.useState)({}),eF=(e,t)=>{eO(n=>({...n,[e]:t}))},eV=async e=>{if(!s)return void H.toast.error("Cannot open file",{description:"No active block available"});u&&(y(!0,s),ek(s.id),await eC(e),eb.setActiveTabIntent("code"))},eB=async e=>{if(null===C)return;if(!s)return void H.toast.error("Cannot apply script",{description:"No active block available"});let t=e.endsWith(".sql")?"sql":e.endsWith(".py")?"python":e.endsWith(".js")?"javascript":void 0;if(!t)throw Error("Unsupported file type");let n=null==eg?void 0:eg.projectId;eF(C,"applying_script");let r=s.id+":"+e;try{if(await eV(e),"code-project"!==s.meta.type)throw Error("Code execution is only supported for code blocks");let a=(0,B.parseMultiFileSource)({source:s.source,blockType:"code-project",blockId:s.id}).find(t=>t.meta.file===e);if(!a){u?H.toast.error("Script file not found",{description:'The script "'.concat(e,'" could not be found in the active block.')}):H.toast.error("Script file not found",{description:'The script "'.concat(e,'" is not available in the most recent block. Try opening the block that contains this script first.')}),eF(C,"none");return}let o={error:"No result"};if("sql"===t){if(!n)throw Error("Your chat must be in a project to run SQL scripts.");let t=eT.filter(e=>(0,ep.isSqlExecProviderName)(e))[0];o=await (0,V.doSqlExecution)({props:{language:a.lang,source:a.source,meta:{file:e,transaction:a.meta.transaction},closed:!0,originalCode:a.source},sqlExecProvider:t,v0ProjectId:n,operationId:r})}else{var i;o=await (0,F.doExecution)({language:t,source:a.source,meta:{file:e,transaction:a.meta.transaction},closed:!0,originalCode:a.source},r,null!=(i=null==eg?void 0:eg.vercelProjectId)?i:void 0)}if("error"in o)ew([{type:"output",blockId:s.id,fileName:e,content:o.error,timestamp:new Date().toISOString(),method:"stderr"}]),H.toast.error("Error",{description:o.error}),eF(C,"none");else{let t=(0,rP.transformExecutionOutputToEvents)(o,s.id,e);ew(t),eF(C,"applied_script")}null==ej||ej()}catch(e){H.toast.error("Error applying script",{description:e instanceof Error?e.message:"Unknown error"}),eF(C,"none")}},ez=async(e,t,n,r,i)=>{if(void 0===i)throw Error("Index is required within steps");(0,U.track)("ClickAddIntegration",{integration:e}),eF(i,"linking_integration");try{if("blob"===e.slug){let t=await fetch("/chat/api/integrations/marketplace/storage/create-blob",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:"".concat(n.name,"-blob"),projectId:n.id})});if(!t.ok){var a;let e=await t.json();throw eF(i,"none"),Error(null!=(a=e.error)?a:"Failed to create blob store")}eI(),p(),H.toast.success("Blob storage connected successfully"),(0,U.track)("AddIntegration",{integrationSlug:e.slug,chatId:b||"",source:"add-integration"});return}let s=E.POTENTIALLY_CONFLICTING_INTEGRATIONS.some(t=>t.has(e.name)&&eT.find(e=>t.has(e))),l=await (0,ea.createAddIntegrationUrl)({integration:e,chatId:b||"",v0ProjectId:t||"",teamSlug:(0,M.isUserScope)(w)?j||"":(null==w?void 0:w.slug)||"",dashboardProject:n,source:"add-integration",messageId:o,needPrefix:s});await eR(),r?r.location.href=l:window.open(l,"_blank")}catch(e){H.toast.error(e instanceof Error?e.message:"Failed to add integration")}},eH=(e,t)=>{switch(e.type){case"add-integration":let n=eN.find(t=>t.name===e.stepName);return{stepTitle:"Install ".concat(e.stepName),stepActions:n?(0,N.jsx)(es.IntegrationSplitButton,{agentStyling:!0,allTeamStores:c,integration:n,onConnect:ez,status:e_[t],vercelProjectId:null!=eS?eS:void 0,onStatusChange:eF,source:"steps-card",starter:!1,disabled:d||!f,sendFollowUp:!1,stepIndex:t,disableIntrospection:!0}):(0,N.jsx)(X.Skeleton,{className:"h-8 w-20 rounded-md"})};case"run-script":let r=e.stepName.substring(e.stepName.lastIndexOf("/")+1),i="Apply",a=!1,o=!1;switch(e_[t]){case"creating_project":i="Connecting",a=!0,o=!0;break;case"applying_script":i="Applying",a=!0,o=!0;break;case"applied_script":i="Applied",o=!0;break;default:i="Apply",a=!1,o=!1}let s=e.stepName.endsWith(".sql"),l=e.stepName.endsWith(".py"),u=e.stepName.endsWith(".js"),h=s||l||u,m=s&&h&&(null==eg?void 0:eg.projectId)&&eL,g=h&&(l||u);return{stepTitle:"Run ".concat(r),stepActions:em?(0,N.jsx)(X.Skeleton,{className:"h-7 w-[77px]"}):(0,N.jsx)("div",{className:"flex flex-row gap-2",children:(0,N.jsx)(eu.Tooltip,{content:h?s&&!m?"No database connected":void 0:"v0 can only run SQL, Python, and Node.js scripts",children:(0,N.jsx)(ed.SpinnerButton,{size:"sm",className:"h-7",pending:a,disabled:o||!m&&!g||!f,onClick:()=>eB(e.stepName),children:i})})})};case"run-action":if("supabase-chat-url"===e.stepName){var v,x;let e=C===t;return{stepTitle:(0,N.jsxs)("div",{className:"flex flex-row items-center gap-2 group min-w-0",children:[(0,N.jsx)("div",{className:"truncate text-sm font-medium group-hover:text-gray-900 ".concat(e?"text-gray-900":"text-gray-500"),children:"Setup Development Auth Redirect URL"}),(0,N.jsx)(eu.Tooltip,{className:"max-w-96",content:(0,N.jsxs)("span",{children:["Adds this chat as"," ",(0,N.jsx)("strong",{className:"font-medium",children:"redirect URL"})," to Supabase and env vars, used for development purposes."]}),children:(0,N.jsx)("div",{className:"flex-shrink-0 group-hover:text-gray-900 ".concat(e?"text-gray-900":"text-gray-500"),children:(0,N.jsx)(Y.Question,{className:"h-4 w-4"})})})]}),stepActions:(0,N.jsx)(el.SupabaseChatUrlStep,{agentStyling:!0,stepStatus:e_[t],isLoadingCompletedExecutions:em,canWriteToChat:!!f,hasSupabaseIntegration:eA,activeStep:C,index:t,projectId:null!=(v=null==eg?void 0:eg.projectId)?v:void 0,vercelProjectId:null!=(x=null==eg?void 0:eg.vercelProjectId)?x:void 0,chatId:b,updateStepStatus:eF,refresh:p})}}return null;case"add-env-var":return{stepTitle:"Add ".concat(e.stepName),stepActions:(0,N.jsx)(es.IntegrationSplitButton,{agentStyling:!0,allTeamStores:c,integration:ei.MANUAL_INTEGRATION,onConnect:ez,status:e_[t],vercelProjectId:null!=eS?eS:void 0,onStatusChange:eF,source:"steps-card",starter:!1,disabled:d||!f,sendFollowUp:!1,stepIndex:t,envVarKeys:[e.stepName],disableIntrospection:!0})}}};(0,Q.useEffect)(()=>{a.forEach((e,t)=>{switch(e.type){case"add-integration":eT.includes(e.stepName)&&eF(t,"connected_integration");break;case"add-env-var":(null==ev?void 0:ev[e.stepName])&&eF(t,"added_env_vars");break;case"run-script":(null==ef?void 0:ef["".concat((null==s?void 0:s.id)||"NO_BLOCK",":").concat(e.stepName)])&&eF(t,"applied_script");break;case"run-action":if("supabase-chat-url"===e.stepName){var n;if(!b)return;(null==ev||null==(n=ev.NEXT_PUBLIC_DEV_SUPABASE_REDIRECT_URL)?void 0:n.value.includes(b))&&eF(t,"completed_action")}}})},[a,eT,ev,ef,null==s?void 0:s.id,b]),(0,Q.useEffect)(()=>{if(!em&&!ex&&!eD){let e=new Set(["connected_integration","added_env_vars","applied_script","completed_action"]),t=a.findIndex((t,n)=>!e.has(e_[n]));-1!==t&&k(t)}},[em,ex,eD,a,e_]);let eU=(e,t)=>{let n=e_[t];if("add-integration"===e.type&&eD||"run-script"===e.type&&em||"add-env-var"===e.type&&ex||"run-action"===e.type&&em)return(0,N.jsx)(X.Skeleton,{className:"h-4 w-4 rounded-full"});if("added_env_vars"===n||"connected_integration"===n||"applied_script"===n||"completed_action"===n)return(0,N.jsx)($.CheckCircleFill,{});if("add-integration"===e.type){var r,i;let t=eN.find(t=>t.name===e.stepName);return(0,N.jsx)("div",{className:"flex h-4 w-4 items-center justify-center overflow-hidden rounded-full",children:(0,N.jsx)(J.default,{src:null!=(r=null==t?void 0:t.icon)?r:"/placeholder-icon.png",alt:null!=(i=null==t?void 0:t.name)?i:"Integration",width:16,height:16})})}return(0,N.jsx)(rT,{})},{submit:eq}=(0,Z.useV0Chat)(),eW=(0,Q.useMemo)(()=>a.some((e,t)=>{let n=e_[t];return"added_env_vars"===n||"connected_integration"===n||"applied_script"===n||"completed_action"===n}),[a,e_]),eZ=(0,Q.useCallback)(async()=>{z(!0);let e=[],t=[],n=[];for(let[r,i]of a.entries()){let a=e_[r];"connected_integration"===a&&"add-integration"===i.type?e.push(i.stepName):"added_env_vars"===a?n.push(i.stepName):"applied_script"===a&&t.push(i.stepName)}try{await eq({action:"new",content:{version:1,parts:[{type:"confirmed-steps",connectedIntegrationNames:e,appliedScripts:t,addedEnvVars:n}]},messageMode:"build",revalidateVercelEnvAndIntegrations:!0})}catch(e){H.toast.error("Failed to submit message"),console.error("Error submitting follow-up message:",e)}finally{setTimeout(()=>{z(!1)},100)}},[a,e_,eq]),eG=!a.every(e=>ei.SUCCESS_INTEGRATION_STATUSES.includes(e_[a.indexOf(e)]));return(0,N.jsxs)("div",{className:(0,O.cn)(ec.AGENT_BLOCK_CLASS,"flex-col mb-4 py-2 min-h-11 flex",!d&&"gap-1",!f&&"pointer-events-none",{"border-blue-600":eG}),children:[(0,N.jsx)(ec.BlockRing,{isVisible:!0,isActive:eG}),a.map((e,t)=>{let n=eH(e,t);if(!n)return null;let{stepTitle:r,stepActions:i}=n,a="".concat(e.type,"-").concat(e.stepName,"-").concat(t);return(0,N.jsxs)("div",{className:"flex h-8 cursor-pointer items-center gap-2 justify-between",onClick:()=>{k(t),"run-script"===e.type&&eV(e.stepName)},children:[(0,N.jsxs)("div",{className:"flex w-full min-w-0 items-center gap-2",children:[(0,N.jsx)("div",{className:"flex h-4 w-4 shrink-0 items-center justify-center text-gray-400",children:eU(e,t)}),"string"==typeof r?(0,N.jsx)("div",{className:"min-w-0 shrink overflow-hidden text-ellipsis text-nowrap hover:text-gray-900 ".concat(C===t?"text-gray-900":"text-gray-500"),children:r}):(0,N.jsx)("div",{className:"min-w-0 flex-1 overflow-hidden",children:r})]}),(0,N.jsx)("div",{className:"flex shrink-0 justify-end [&>div]:justify-end",children:C===t&&i})]},a)}),(!d&&f&&x&&!l||S)&&(0,N.jsx)("div",{className:"flex justify-end items-center gap-2 transition-all duration-300 ease-in-out overflow-hidden ".concat(d?"h-0 max-h-0 opacity-0 py-0 mt-0 mb-0":"h-8 max-h-8 opacity-100 py-[2px] mt-2"),children:(0,N.jsx)(ed.SpinnerButton,{onClick:eZ,className:"w-full h-7",variant:"secondary",size:"sm",pending:S,disabled:S||d,children:eW?(0,N.jsx)("div",{className:"flex items-center gap-2",children:"Continue building"}):(0,N.jsx)("div",{className:"flex items-center gap-2",children:"Skip for now"})})})]})};var rF=J,rV=E,rB=e.i(424725),rz=p,rH=ef;function rU(e){let t=S({"starting-integration-status-check":()=>null,"request-install-integration":()=>null,"finished-integration-status-check":e=>(0,x.jsx)(rq,{...e})},e),n=e.parts.find(e=>"request-install-integration"===e.type);return n?(0,x.jsx)(r_,{messageId:e.messageId,steps:n.steps}):(0,x.jsx)(w.RichTask,{...e,Icon:y.Database,renderedParts:t,children:(0,x.jsx)(w.TaskName,{...e,textActive:"Checking Integrations",textComplete:"Integration Check Complete"})})}function rq(e){return(0,x.jsxs)("div",{className:"flex flex-col gap-2 [&_span]:align-middle w-full",children:[e.integrations.map((e,t)=>(0,x.jsx)(rW,{...e},t)),e.envVars.length?(0,x.jsxs)("span",{children:["Found ",e.envVars.length," environment variables."]}):null]})}function rW(e){let{schema:t,status:n,name:r,instanceName:i}=e,a=(0,rz.useMemo)(()=>(0,x.jsx)(rB.ContextPill,{prefix:(0,x.jsx)(rG,{name:r}),className:"mx-1",children:i}),[r,i]);return"not_connected"===n?(0,x.jsxs)("span",{children:[a," is not connected"]}):t?(0,x.jsxs)("div",{className:"flex flex-col gap-3 w-full",children:[(0,x.jsxs)("span",{children:["Connected to ",a," ",t.tableCount," tables found."]}),(0,x.jsx)("div",{className:"flex flex-col gap-3",children:t.tables.map(e=>(0,x.jsx)(rZ,{table:e},e.name))})]}):(0,x.jsxs)("span",{children:[a," is connected, but no schema available"]})}function rZ(e){let{table:t}=e;return(0,x.jsxs)("div",{className:(0,rH.cn)("material-small flex flex-col rounded-md w-full",w.AGENT_BLOCK_MAX_WIDTH_CLASS),children:[(0,x.jsxs)("div",{className:"px-2.5 flex py-2 text-gray-900 border-b gap-2 justify-between border-gray-200",children:[(0,x.jsxs)("span",{className:"flex items-center gap-2",children:[(0,x.jsx)("span",{className:"text-gray-400",children:(0,x.jsx)(y.Database,{})}),t.name]}),(0,x.jsxs)("span",{className:"text-gray-500 text-[11px]",children:[t.columns.length," columns"]})]}),(0,x.jsx)("div",{className:"flex flex-col p-1.5 py-2",children:t.columns.map((e,t)=>(0,x.jsxs)("div",{className:(0,rH.cn)("flex items-center gap-4 h-7 justify-between rounded-[6px] px-1.5",{"bg-muted":t%2==0}),children:[(0,x.jsx)("span",{className:"text-label-12-mono text-gray-600",children:e.name}),(0,x.jsx)("span",{className:"text-gray-500 text-[12px]",children:e.type})]},e.name))})]})}function rG(e){let{name:t}=e,n=rV.INTEGRATION_NAME_TO_SVG[t];return n?(0,x.jsx)("div",{className:"flex items-center size-4 justify-center rounded-full bg-[#000000]",children:(0,x.jsx)(rF.default,{src:n,alt:t,width:10,height:10,className:"h-2.5 w-2.5"})}):(0,x.jsx)("span",{className:"text-gray-500",children:(0,x.jsx)(b.Puzzle,{})})}let rK=(0,ey.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M14.5 8C14.5 11.5899 11.5899 14.5 8 14.5C4.41015 14.5 1.5 11.5899 1.5 8C1.5 4.41015 4.41015 1.5 8 1.5C11.5899 1.5 14.5 4.41015 14.5 8ZM16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8ZM10.5 5.5H5.5V10.5H10.5V5.5Z" fill="currentColor"/>');e.s(["StopCircle",0,rK],928408)},207086,141861,874090,681813,450112,198744,346602,744799,542727,851805,e=>{"use strict";e.s(["CodingV1",()=>B],207086);var t=e.i(832520),n=e.i(200407),r=e.i(993605),i=e.i(460265),a=e.i(86395),o=e.i(928408),s=e.i(896608),l=e.i(250767),c=e.i(236808),u=e.i(795970),d=e.i(454471),p=e.i(304649),h=e.i(365290),f=e.i(176248),m=e.i(758118),g=e.i(818273),v=e.i(449381),x=e.i(53223),y=e.i(707827),b=e.i(301331),w=e.i(584497),j=e.i(697856),C=e.i(862664),k=e.i(92479),S=e.i(530135),N=e.i(863785),E=e.i(397036),M=e.i(529693),I=e.i(926224);e.i(563948);var D=e.i(407562),T=e.i(316799),A=e.i(249897),L=e.i(76866),P=e.i(519738);e.i(904347);var R=e.i(37737),_=e.i(556355);let O={duration:450};function F(e){let{changedFiles:r,blockId:i,isBlockClosed:a}=e,{latestSource:o}=(0,b.useBlockHistory)({blockId:i,searchAll:!0}),s=(0,n.useMemo)(()=>o?(0,I.getChangedFiles)({source:o,blockId:i,blockType:"code-project",closed:a}):r,[o,i,r,a]);if(0===s.length)return null;let l=s.map((e,r)=>{let i=(0,d.filePathToIcon)(e.fileName),a="loading...",o=e.baseName.includes(a)||e.fileName.includes(a);return(0,n.createElement)(M.motion.div,{...(0,E.motionReplyAnimationIf)(e.isActive&&!o),key:e.fileName+"-"+r,className:"grid grid-cols-[auto_auto_1fr] gap-2.5 items-center max-w-full"},o?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y.Spinner,{size:16})," Loading files changed..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i,{className:"shrink-0"}),(0,t.jsx)("span",{className:"text-gray-900 shrink-0",children:e.baseName}),(0,t.jsx)("span",{className:"text-gray-500 min-w-0 truncate",children:e.fileName})]}))});return(0,t.jsx)("div",{className:"flex flex-col gap-2",children:l})}let V=n.default.memo(F);function B(e){let s=(0,u.useRichAssistantParts)({"code-project":e=>(0,t.jsx)(V,{changedFiles:e.changedFiles,blockId:e.blockId,isBlockClosed:e.closed})},e),l=(0,g.useIsStreaming)(),d=e.parts[0],f="code-project"===d.type?d:null,y=((null==f?void 0:f.isVersioned)||!1)&&!e.isActive&&!l,k=null==f?void 0:f.blockId,{currentBlockIndex:S,ensureBlockSource:E,isLoadingBlockSource:M,thisBlock:I}=(0,b.useBlockHistory)({blockId:k||"",searchAll:!0}),P=(null==I?void 0:I.sourceVersionKey)||(null==f?void 0:f.sourceVersionKey),R=P&&(0,A.parseSourceVersionToNumber)(P)||1,_=S+1,F=(0,n.useCallback)(async()=>{M||await E()},[E,M]),{getBlockShared:B}=(0,j.useSharedBlocks)(),{getBlockDeployed:U}=(0,C.useDeployedBlocks)(),q=!!k&&(B(k)||U(k)),W=!l&&f&&!f.closed,Z=(0,v.useActiveBlockState)(),G=k===(null==Z?void 0:Z.id),K=(0,v.useSetActiveBlockView)(),{getBlockTemplateId:X}=(0,N.useBlockTemplateId)(),{saveLastOpenedBlock:$}=(0,T.useLastOpenedBlock)(),Y=(0,n.useCallback)(async t=>{var n,r;if(G||(t.preventDefault(),t.stopPropagation()),!k||!y)return;(0,x.track)("ClickBlockPreview",{blockId:k});let i=await E().catch(()=>{D.toast.error("Failed to load block source.")})||f.source;i&&(K(!0,{id:k,meta:f.meta,messageId:e.messageId,type:"code-project",language:f.lang||"javascript",source:i,closed:!0,hasSourceBeenEdited:!1,remoteInfo:{},forkedFromBlockId:void 0,latestDeploymentInfo:f.latestDeploymentInfo,templateVersionId:null==(n=X(k))?void 0:n.templateVersionId,templateCanonId:null==(r=X(k))?void 0:r.templateCanonId}),$(k))},[G,k,E,null==f?void 0:f.source,null==f?void 0:f.meta,null==f?void 0:f.lang,y,null==f?void 0:f.latestDeploymentInfo,e.messageId,X,K,$]),{restoreCurrentBlock:J,isRestoring:Q}=(0,L.useRestoreBlockVersion)(k),{canWriteToChat:ee}=(0,w.useChatMetadata)(),et=(0,n.useMemo)(()=>y?q?a.Globe:W?o.StopCircle:i.ChevronRightSmall:r.FileText,[y,q,W]),en=y?e=>{y&&Y(e)}:void 0;return(0,t.jsx)(z,{blockId:k,editVersionNumber:R,canWriteToChat:ee||!1,children:(0,t.jsxs)("div",{className:(0,p.cn)(c.AGENT_BLOCK_MAX_WIDTH_CLASS,"rounded-[8px] m-[-1px] border border-transparent relative cursor-pointer",y?c.AGENT_BLOCK_CLASS:"",{"border-blue-500":y&&G}),style:{...(0,h.transitionStyles)(["border-color","background","padding","box-shadow"],O)},onClick:en,onMouseEnter:F,children:[(0,t.jsx)(c.BlockRing,{isVisible:y,isActive:G}),(0,t.jsx)(c.RichTask,{...e,Icon:et,renderedParts:s,hideTimelineLine:y,hideTimeSpent:!0,onClick:en,headerChildrenEnd:(0,t.jsx)(H,{isVersioned:y,blockId:k,messageId:e.messageId,canWriteToChat:ee||!1,isRestoring:Q,restoreCurrentBlock:J}),autoCloseDelay:y?0:void 0,className:"w-full overflow-hidden",children:(0,t.jsxs)("div",{className:"grid gap-2 overflow-hidden truncate grid-cols-[auto_auto] content-center align-middle",children:[(0,t.jsx)("span",{className:(0,p.cn)("truncate min-w-0 flex-1 text-label-13 font-normal",{"text-gray-900":y}),children:(0,t.jsx)(c.TaskName,{...e,textActive:"Making changes",textComplete:"Made some changes"})}),(0,t.jsx)("span",{className:"text-gray-500 text-label-13 pl-0.5 shrink-0 flex items-center gap-1",...(0,m.a11yHideIf)(!y),style:{...(0,m.visibleStylesIf)(y),...(0,h.transitionStyles)(["opacity"],O)},children:(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{children:_?"v".concat(_):null}),R>1&&ee?(0,t.jsx)("span",{children:"(edited)"}):null]})})]})})]})})}function z(e){let{children:r,blockId:i,editVersionNumber:a,canWriteToChat:o}=e,{isLatest:s}=(0,P.useBlockVersionInfo)(i),l=(0,n.useCallback)(()=>{i&&(0,R.openDialog)({type:"undoChanges",data:{blockId:i}})},[i]);if(a<=1||!o)return r;let u=a-1;return(0,t.jsxs)("div",{className:"relative",children:[r,(0,t.jsxs)("div",{className:"flex items-end gap-1",children:[(0,t.jsx)(c.TimelineCorner20,{className:"ml-5"}),(0,t.jsxs)("div",{className:"text-gray-600 font-normal text-label-13 -mb-1.5 select-none flex items-center gap-1",children:[(0,t.jsxs)("span",{children:[" ","You made ",u," edit",u>1?(0,t.jsx)("span",{children:"s"}):null," "]}),s&&(0,t.jsxs)("button",{className:"flex items-center gap-1",onClick:l,disabled:!s,children:[(0,t.jsx)("span",{children:"•"})," Undo"]})]})]})]})}let H=n.default.memo(function(e){let{isVersioned:n,blockId:r,messageId:i,canWriteToChat:a,isRestoring:o,restoreCurrentBlock:s}=e;if(!n||!r)return null;let l=n;return(0,t.jsx)("div",{className:"flex items-center gap-1 min-w-fit",...(0,m.a11yHideIf)(!l),style:{...(0,m.visibleStylesIf)(l),...(0,h.transitionStyles)(["opacity"],O)},children:(0,t.jsx)(U,{blockId:r,messageId:i,canWriteToChat:a,isRestoring:o,restoreCurrentBlock:s})})});function U(e){let{blockId:n,messageId:r,isRestoring:i,restoreCurrentBlock:a,canWriteToChat:o}=e,{activeForkKey:c}=(0,k.useChatMessages)();return r!==(null==c?void 0:c[c.length-1])&&o&&n?i?(0,t.jsx)(q,{disabled:i,children:(0,t.jsx)(y.Spinner,{size:16})}):(0,t.jsxs)(_.DropdownMenu,{children:[(0,t.jsx)(_.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(q,{children:(0,t.jsx)(s.MoreHorizontal,{size:16})})}),(0,t.jsxs)(_.DropdownMenuContent,{className:"p-1",align:"end",children:[(0,t.jsxs)(_.DropdownMenuItem,{onClick:a,children:[(0,t.jsx)(S.UndoIcon,{})," Restore"]}),(0,t.jsxs)(_.DropdownMenuItem,{onClick:()=>{(0,R.openDialog)({type:"forkBlock",data:{blockId:n,page:"chat",canWriteToChat:!!o}})},children:[(0,t.jsx)(l.PlusCircle,{})," New Chat"]})]})]}):null}function q(e){let{onClick:n,children:r,variant:i="ghost",className:a,"aria-label":o,disabled:s,...l}=e;return(0,t.jsxs)(f.Button,{className:(0,p.cn)("relative z-10 size-7 shrink-0 rounded-md px-1 transition-none has-[>svg]:p-0 ",a),size:"sm",variant:"ghost",...l,children:[r,(0,t.jsx)("span",{className:"sr-only",children:o})]})}e.s(["DiagnosticsV1",()=>Y],141861);var W=t,Z=e.i(605528);let G=(0,Z.withNewIcon)('<path d="M12.798 1.24199L13.3283 1.77232L14.0567 1.04389L13.1398 0.574402L12.798 1.24199ZM9.95705 4.0829L9.42672 3.55257L9.95705 4.0829ZM6.5844 6.95555L7.11473 7.48588L7.46767 7.13295L7.27837 6.67111L6.5844 6.95555ZM1.49995 12.04L2.03027 12.5703L2.03028 12.5703L1.49995 12.04ZM1.49994 14.54L0.969615 15.0703H0.969615L1.49994 14.54ZM3.99995 14.54L4.53028 15.0703L3.99995 14.54ZM9.10147 9.43848L9.37633 8.74066L8.91883 8.56046L8.57114 8.90815L9.10147 9.43848ZM14.7848 3.25519L15.4568 2.92229L14.9931 1.98617L14.2544 2.72486L14.7848 3.25519ZM11.9571 6.0829L11.4267 5.55257L11.9571 6.0829ZM10.5428 6.0829L11.0732 5.55257L11.0732 5.55257L10.5428 6.0829ZM9.95705 5.49711L9.42672 6.02744L9.42672 6.02745L9.95705 5.49711ZM12.2676 0.711655L9.42672 3.55257L10.4874 4.61323L13.3283 1.77232L12.2676 0.711655ZM10.7499 1.5C11.3659 1.5 11.9452 1.64794 12.4562 1.90957L13.1398 0.574402C12.4221 0.206958 11.6091 0 10.7499 0V1.5ZM6.99994 5.25C6.99994 3.17893 8.67888 1.5 10.7499 1.5V0C7.85045 0 5.49994 2.3505 5.49994 5.25H6.99994ZM7.27837 6.67111C7.09913 6.23381 6.99994 5.75443 6.99994 5.25H5.49994C5.49994 5.95288 5.63848 6.62528 5.89043 7.23999L7.27837 6.67111ZM6.05407 6.42522L0.969615 11.5097L2.03028 12.5703L7.11473 7.48588L6.05407 6.42522ZM0.969616 11.5097C-0.0136344 12.4929 -0.013635 14.0871 0.969615 15.0703L2.03027 14.0097C1.63281 13.6122 1.63281 12.9678 2.03027 12.5703L0.969616 11.5097ZM0.969615 15.0703C1.95287 16.0536 3.54703 16.0536 4.53028 15.0703L3.46962 14.0097C3.07215 14.4071 2.42774 14.4071 2.03027 14.0097L0.969615 15.0703ZM4.53028 15.0703L9.6318 9.96881L8.57114 8.90815L3.46962 14.0097L4.53028 15.0703ZM10.7499 9C10.2637 9 9.80071 8.90782 9.37633 8.74066L8.82661 10.1363C9.4232 10.3713 10.0724 10.5 10.7499 10.5V9ZM14.4999 5.25C14.4999 7.32107 12.821 9 10.7499 9V10.5C13.6494 10.5 15.9999 8.1495 15.9999 5.25H14.4999ZM14.1127 3.5881C14.3604 4.08811 14.4999 4.65168 14.4999 5.25H15.9999C15.9999 4.4156 15.8047 3.62465 15.4568 2.92229L14.1127 3.5881ZM12.4874 6.61323L15.3151 3.78552L14.2544 2.72486L11.4267 5.55257L12.4874 6.61323ZM10.0125 6.61323C10.6959 7.29665 11.804 7.29665 12.4874 6.61323L11.4267 5.55257C11.3291 5.6502 11.1708 5.6502 11.0732 5.55257L10.0125 6.61323ZM9.42672 6.02745L10.0125 6.61323L11.0732 5.55257L10.4874 4.96678L9.42672 6.02745ZM9.42672 3.55257C8.7433 4.23599 8.7433 5.34403 9.42672 6.02744L10.4874 4.96678C10.3898 4.86915 10.3897 4.71086 10.4874 4.61323L9.42672 3.55257Z" fill="currentColor"/>');var K=c,X=u,$=n;function Y(e){let t=(0,$.useMemo)(()=>{var t;return(null==(t=e.parts.find(e=>"diagnostics-found-issues"===e.type))?void 0:t.summaries.length)||0},[e.parts]),n=(0,X.useRichAssistantParts)({"fetching-diagnostics":()=>null,"diagnostics-passed":()=>null,"diagnostic-invocations-exhausted":()=>null,"diagnostics-found-issues":e=>(0,W.jsx)("div",{className:"flex flex-col gap-2",children:e.summaries.map((e,t)=>(0,W.jsx)("div",{children:e},t))})},e);return(0,W.jsx)(K.RichTask,{...e,Icon:G,renderedParts:t?n:null,children:(0,W.jsx)(K.TaskName,{...e,textActive:"Reviewing work",textComplete:t?"Reviewed work":"No issues found"})})}e.s(["FetchFromWebV1",()=>en],874090);var J=t,Q=a,ee=c,et=u;function en(e){let t=(0,et.useRichAssistantParts)({"starting-fetch-from-web":e=>{let{url:t}=e;return'Visiting "'.concat((0,ee.readableUrl)({url:t}),'"')},"finished-fetch-from-web":e=>(0,J.jsxs)(J.Fragment,{children:["Read ",(0,J.jsx)(ee.AgentCitationPill,{align:"start",...e})]})},e);return(0,J.jsx)(ee.RichTask,{...e,Icon:Q.Globe,renderedParts:t,children:(0,J.jsx)(ee.TaskName,{...e,textActive:"Fetching from Web",textComplete:"Fetched from Web"})})}e.s(["GenerateDesignInspirationV1",()=>eo],681813);var er=t;let ei=(0,Z.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M10.6789 2.05378L9.81677 5.56255L13.3254 6.4247L14.1876 2.91593L10.6789 2.05378ZM10.3829 0.436426C9.93957 0.327486 9.49186 0.59858 9.38292 1.04193L8.19943 5.85853C8.09049 6.30188 8.36159 6.7496 8.80494 6.85854L13.6214 8.04205C14.0648 8.15099 14.5125 7.8799 14.6214 7.43654L15.8049 2.61994C15.9139 2.17659 15.6428 1.72887 15.1994 1.61993L10.3829 0.436426ZM9.50003 14.5C10.6046 14.5 11.5 13.6046 11.5 12.5C11.5 11.3955 10.6046 10.5 9.50003 10.5C8.39546 10.5 7.50003 11.3955 7.50003 12.5C7.50003 13.6046 8.39546 14.5 9.50003 14.5ZM9.50003 16C11.433 16 13 14.433 13 12.5C13 10.567 11.433 9.00004 9.50003 9.00004C7.56703 9.00004 6.00003 10.567 6.00003 12.5C6.00003 14.433 7.56703 16 9.50003 16ZM2.93145 5.14833L5.61583 7.51283L2.2572 8.66149L2.93145 5.14833ZM0.467708 10.0272C0.3916 10.4238 0.772291 10.7546 1.15436 10.624L7.68945 8.38894C8.07152 8.25827 8.16989 7.7636 7.86688 7.4967L2.64371 2.89595C2.33836 2.62699 1.85633 2.79184 1.77963 3.19147L0.467708 10.0272Z" fill="currentColor"/>');var ea=c;function eo(e){return(0,er.jsx)(ea.RichTask,{...e,Icon:ei,renderedParts:null,maxHeight:400,children:(0,er.jsx)(ea.TaskName,{...e,textActive:"Generating design brief",textComplete:"Generated enhanced design brief"})})}e.s(["InspectSiteV1",()=>ed],198744);var es=t;let el=(0,Z.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M1.5 3.5H3.5L5 1H11L12.5 3.5H14.5H16V5V12.5C16 13.8807 14.8807 15 13.5 15H2.5C1.11929 15 0 13.8807 0 12.5V5V3.5H1.5ZM4.78624 4.27174L5.84929 2.5H10.1507L11.2138 4.27174L11.6507 5H12.5H14.5V12.5C14.5 13.0523 14.0523 13.5 13.5 13.5H2.5C1.94772 13.5 1.5 13.0523 1.5 12.5V5H3.5H4.34929L4.78624 4.27174ZM9.75 8.5C9.75 9.4665 8.9665 10.25 8 10.25C7.0335 10.25 6.25 9.4665 6.25 8.5C6.25 7.5335 7.0335 6.75 8 6.75C8.9665 6.75 9.75 7.5335 9.75 8.5ZM11.25 8.5C11.25 10.2949 9.79493 11.75 8 11.75C6.20507 11.75 4.75 10.2949 4.75 8.5C4.75 6.70507 6.20507 5.25 8 5.25C9.79493 5.25 11.25 6.70507 11.25 8.5Z" fill="currentColor"/>');e.s(["Camera",0,el],450112);var ec=c,eu=u;function ed(e){let t=(0,eu.useRichAssistantParts)({"starting-inspect-site":e=>{let{url:t}=e;return null},"skipping-inspect-site":e=>{let{reason:t}=e;return t},"inspect-site-complete":e=>(0,es.jsx)(ep,{...e}),screenshot:e=>(0,es.jsx)(ec.WebsiteScreenshot,{screenshotUrl:e.screenshotUrl,url:e.url})},e);return(0,es.jsx)(ec.RichTask,{...e,Icon:el,renderedParts:t,children:(0,es.jsx)(ec.TaskName,{...e,textActive:"Inspecting Site",textComplete:"Inspected Site"})})}function ep(e){let t=e.screenshotResults.filter(e=>!!e.screenshotUrl);return(0,es.jsxs)("div",{className:"flex-col flex gap-1",children:[t.map((e,t)=>(0,es.jsx)("div",{className:"flex gap-2 flex-col",children:(0,es.jsx)(ec.WebsiteScreenshot,{screenshotUrl:e.screenshotUrl})},t)),0===t.length&&(0,es.jsx)(ec.AgentNote,{variant:"warning",children:"No screenshots were taken."})]})}e.s(["ReadFilesV1",()=>ev],346602);var eh=t,ef=e.i(492285),em=c,eg=u;function ev(e){let t=(0,eg.useRichAssistantParts)({"starting-read-files":e=>(0,eh.jsx)(em.FileList,{label:"Reading",files:e.filePaths}),"finished-read-files":()=>"Finished reading"},e);return(0,eh.jsx)(em.RichTask,{...e,Icon:ef.MagnifyingGlassSmall,renderedParts:t,children:(0,eh.jsx)(em.TaskName,{...e,textActive:"Searching repository",textComplete:"Searched repository"})})}e.s(["RunShellCommandV1",()=>eC],744799);var ex=t,ey=e.i(52781),eb=c,ew=u,ej=n;function eC(e){let t=(0,ew.useRichAssistantParts)({"starting-shell-command":e=>(0,ex.jsx)(eb.Command,{...e}),"finished-shell-command":e=>(0,ex.jsx)(eb.CommandOutput,{...e})},e,!0),n=(0,ej.useMemo)(()=>(0,ex.jsx)(eb.Terminal,{children:t}),[t]);return(0,ex.jsx)(eb.RichTask,{...e,Icon:ey.TerminalWindow,renderedParts:n,children:(0,ex.jsx)(eb.TaskName,{...e,textActive:"Running some commands",textComplete:"Ran some commands"})})}e.s(["SearchRepoV1",()=>eI],542727);var ek=t,eS=ef,eN=c,eE=u,eM=e.i(266007);function eI(e){let t=(0,eE.useRichAssistantParts)({ls:()=>null,"grepping-repo":()=>null,"repo-search-result":()=>null,"starting-repo-search":e=>(0,ek.jsxs)(ek.Fragment,{children:["Searching ",'"'.concat((0,eM.cleanAgentFilePath)(e.query),'"')]}),"reading-file":e=>(0,ek.jsxs)(ek.Fragment,{children:["Read ",(0,ek.jsx)(eN.File,{...e,shorten:!0})]}),"ls-results":e=>e.numFiles?"Scanning ".concat(e.numFiles," file").concat(e.numFiles>1?"s":""):"Scanning files","grep-results":e=>e.numMatches?"Scanned ".concat(e.numMatches," file").concat(e.numMatches>1?"s":""):null,"grep-file-results":e=>e.numFileMatches?"Scanned ".concat(e.numFileMatches," file").concat(e.numFileMatches>1?"s":""):"Scanned files","select-files":e=>(0,ek.jsx)(eN.FileList,{label:"Reading file".concat(e.filePaths.length>1?"s":""),files:e.filePaths.map(eM.cleanAgentFilePath)})},e);return(0,ek.jsx)(eN.RichTask,{...e,Icon:eS.MagnifyingGlassSmall,renderedParts:t,children:(0,ek.jsx)(eN.TaskName,{...e,textActive:"Searching repository",textComplete:"Searched repository"})})}e.s(["SearchWebV1",()=>eP],851805);var eD=t,eT=a,eA=c,eL=u;function eP(e){let t=(0,eL.useRichAssistantParts)({"starting-web-search":e=>'Searching "'.concat(e.query,'"'),"got-results":e=>"Analyzing ".concat(e.count," results..."),"failed-web-search":()=>(0,eD.jsx)(eA.AgentNote,{variant:"info",title:"No results",children:"We couldn't find any results for your search."}),"finished-web-search":e=>(0,eD.jsxs)("div",{className:"flex flex-col gap-1 max-w-full",children:[e.answer,(0,eD.jsx)("div",{className:"flex flex-wrap gap-1.5",children:e.citations.map((t,n)=>(0,eD.jsx)(eA.AgentCitationPill,{align:(0,eA.indexAndLengthToAlign)(n,e.citations.length),...t},n))})]})},e);return(0,eD.jsx)(eA.RichTask,{...e,Icon:eT.Globe,renderedParts:t,children:(0,eD.jsx)(eA.TaskName,{...e,textActive:"Searching the Web",textComplete:"Searched the Web"})})}},818273,165336,e=>{"use strict";e.s(["Renderer",()=>eK,"didRunOutOfCredits",()=>e4,"getBlocksFromState",()=>e7,"getMetadataFromState",()=>e6,"getRowType",()=>e9,"isFetchingDiagnostics",()=>e3,"useIsStreaming",()=>e$,"useIsV3",()=>eJ],818273);var t=e.i(832520),n=e.i(200407),r=e.i(15185),i=e.i(595432),a=e.i(847801),o=e.i(760343),s=e.i(595961),l=e.i(742998),c=e.i(397711),u=e.i(392736),d=e.i(583984),p=e.i(32170),h=e.i(233327),f=e.i(584497),m=e.i(707827),g=e.i(985353),v=e.i(967276),x=e.i(661535),y=e.i(708306),b=e.i(616593),w=e.i(768061),j=e.i(229983),C=e.i(696871),k=e.i(606278),S=e.i(101387),N=e.i(366346),E=e.i(90177),M=e.i(302998),I=e.i(968552);e.i(168204);var D=e.i(225695),T=t,A=e.i(236808),L=e.i(490838),P=e.i(884284),R=n,_=e.i(423814),O=e.i(207086),F=e.i(141861),V=e.i(874090),B=e.i(681813),z=e.i(198744),H=e.i(346602),U=e.i(744799),q=e.i(542727),W=e.i(851805);e.s(["MockThinkingV1",()=>ea,"ThinkingV1",()=>eo],165336);var Z=t,G=e.i(795970),K=e.i(605528),X=n,$=A,Y=t,J=n,Q=e.i(770150),ee=e.i(900245),et=e.i(694686);let en=(0,ee.default)(Q.default),er=J.default.memo(function(e){let{children:t}=e;return(0,Y.jsx)("div",{className:"flex flex-col [&_*]:!m-0 gap-1.5",children:(0,Y.jsx)(en,{allowedLinkPrefixes:et.allowedLinkPrefixes,allowedImagePrefixes:et.allowedImagePrefixes,defaultOrigin:et.defaultOrigin,components:{p:e=>{let{children:t}=e;return(0,Y.jsx)("p",{children:t})},code:e=>{let{children:t}=e;return(0,Y.jsx)("code",{className:"rounded-[0.375rem] border bg-gray-100 px-1 py-[0.15rem] font-mono text-xs font-normal before:hidden after:hidden",children:t})}},children:t})})}),ei=(0,K.withNewIcon)('<path d="M10 0c1.27 0 2.33.86 2.65 2.03a3 3 0 0 1 2.14 4.57 3.49 3.49 0 0 1-.05 5.34l.01.31A3.75 3.75 0 0 1 8 14.5a3.74 3.74 0 0 1-6.74-2.56 3.5 3.5 0 0 1-.05-5.34 2.99 2.99 0 0 1 2.14-4.57A2.75 2.75 0 0 1 8 .87C8.5.33 9.21 0 10 0Zm0 1.5c-.69 0-1.25.56-1.25 1.25V5A3.75 3.75 0 0 1 5 8.75v-1.5c1.24 0 2.25-1 2.25-2.25V2.75a1.25 1.25 0 1 0-2.4.48l.07.14.03.07a.75.75 0 0 1-1.29.75l-.04-.06-.08-.16a2.74 2.74 0 0 1-.17-.42 1.5 1.5 0 0 0-.83 2.33l.32-.07a.75.75 0 0 1 .28 1.47 2 2 0 0 0 .72 3.94.75.75 0 0 1 .28 1.47 3.51 3.51 0 0 1-1.35-.01 2.25 2.25 0 0 0 4.46-.43V12A3.75 3.75 0 0 1 11 8.25v1.5c-1.24 0-2.25 1-2.25 2.25v.25a2.25 2.25 0 0 0 4.46.43 3.51 3.51 0 0 1-1.35.01.75.75 0 0 1 .28-1.47 2 2 0 0 0 .73-3.93.75.75 0 0 1 .27-1.48l.32.07a1.5 1.5 0 0 0-.83-2.33c-.04.15-.1.29-.17.42l-.08.16-.04.06a.75.75 0 0 1-1.3-.75l.04-.07.07-.14A1.25 1.25 0 0 0 10 1.5Z" fill="currentColor"/>');function ea(){let e=(0,X.useId)(),t=(0,X.useRef)(Date.now());return(0,Z.jsx)(eo,{isActive:!0,isLast:!0,isFirst:!0,isLastMessage:!1,messageId:"thinking-v1-mock-".concat(e),type:"task-thinking-v1",parts:[],createdAt:t.current,hideTimeSpent:!0,finishedAt:null,lastPartSentAt:null,id:"thinking-v1-mock-".concat(e)})}function eo(e){let{...t}=e,n=(0,G.useRichAssistantParts)({"thinking-end":e=>(0,Z.jsx)(er,{children:e.thought})},t),r=(0,X.useMemo)(()=>{var e;return null==(e=t.parts.find(e=>"thinking-end"===e.type))?void 0:e.duration},[t]),i=(0,X.useMemo)(()=>{if(!r)return"for a moment";let e=Math.round(r);if(e<60)return"for ".concat(e,"s");{let t=Math.floor(e/60),n=e%60;return n>0?"for ".concat(t,"m ").concat(n,"s"):"for ".concat(t,"m")}},[r]);return(0,Z.jsx)($.RichTask,{...t,Icon:ei,hideTimeSpent:!0,renderedParts:n,children:t.isActive?"Thinking":"Thought ".concat(i)})}var es=t,el=e.i(72098),ec=A,eu=n;function ed(e){let t=(0,eu.useMemo)(()=>e.parts.filter(e=>"updated-todo-list"===e.type).every(e=>e.updatedList.every(e=>"todo"===e.status||"in-progress"===e.status)&&!e.updatedList.some(e=>"done"===e.status))?el.ListUnordered:ep,[e]);return(0,es.jsx)(ec.RichTask,{...e,Icon:t,renderedParts:null,hideTimeSpent:!0,children:(0,es.jsx)(ec.TaskName,{...e,textActive:"Managing Todos",textComplete:"Managed Todos"})})}let ep=(0,K.withNewIcon)('\n<path d="M8 0C12.4183 0 16 3.58172 16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0ZM8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5ZM12.0605 5.75L7.03027 10.7803C6.73738 11.0732 6.26262 11.0732 5.96973 10.7803L3.93945 8.75L5 7.68945L6.5 9.18945L11 4.68945L12.0605 5.75Z" fill="currentColor"/>');(0,K.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M8.75 2.79933C9.19835 2.53997 9.5 2.05521 9.5 1.5C9.5 0.671573 8.82843 0 8 0C7.17157 0 6.5 0.671573 6.5 1.5C6.5 2.05521 6.80165 2.53997 7.25 2.79933V5H7C4.027 5 1.55904 7.16229 1.08296 10H0V13H1V14.5V16H2.5H13.5H15V14.5V13H16V10H14.917C14.441 7.16229 11.973 5 9 5H8.75V2.79933ZM7 6.5C4.51472 6.5 2.5 8.51472 2.5 11V14.5H13.5V11C13.5 8.51472 11.4853 6.5 9 6.5H7ZM7.25 11.25C7.25 12.2165 6.4665 13 5.5 13C4.5335 13 3.75 12.2165 3.75 11.25C3.75 10.2835 4.5335 9.5 5.5 9.5C6.4665 9.5 7.25 10.2835 7.25 11.25ZM10.5 13C11.4665 13 12.25 12.2165 12.25 11.25C12.25 10.2835 11.4665 9.5 10.5 9.5C9.5335 9.5 8.75 10.2835 8.75 11.25C8.75 12.2165 9.5335 13 10.5 13Z" fill="currentColor" />');var eh=t,ef=e.i(397036),em=A,eg=G,ev=e.i(529693);function ex(e){let t=e=>{let{invocations:t}=e;return(0,eh.jsxs)(em.AgentNote,{variant:"info",title:"Output Stopped",children:["The maximum number of calls for the message has been reached (",t,")."]})},n=(0,eg.useRichAssistantParts)({"agent-timeout":()=>(0,eh.jsx)(em.AgentNote,{variant:"info",title:"Agent Timeout",children:"The Agent timed out. Type a new prompt to continue."}),"out-of-credits":()=>(0,eh.jsx)(em.AgentNote,{variant:"info",title:"Out of Credits",children:"The Agent stopped because you are out of credits. Please add more credits to continue."}),"orchestrator-invocations-exhausted":t,"subagent-invocations-exhausted":t,"orchestrator-error":()=>(0,eh.jsx)(em.AgentNote,{variant:"info",title:"Task stopped",children:"The task was stopped because the agent encountered an unrecoverable error."}),"manually-stopped-on-client":()=>null},e,!0);return(0,eh.jsx)(ev.motion.div,{className:"flex flex-col gap-2",...(0,ef.motionReplyAnimationIf)(e.isActive),children:null==n?void 0:n.map(e=>e)})}var ey=t,eb=e.i(492285),ew=A,ej=G,eC=e.i(266007);function ek(e){let t=(0,ej.useRichAssistantParts)({"grepping-file":()=>null,"starting-search-in-file":e=>(0,ey.jsxs)(ey.Fragment,{children:["Searching ",'"'.concat((0,eC.cleanAgentFilePath)(e.query),'"')]}),"reading-file":e=>(0,ey.jsxs)(ey.Fragment,{children:["Read ",(0,ey.jsx)(ew.File,{...e,shorten:!0})]}),"grep-results":e=>e.numMatches?"Found ".concat(e.numMatches," match").concat(e.numMatches>1?"es":""):"Searching file","selected-chunks":e=>(0,ey.jsx)(ew.FileList,{label:"Reading chunk".concat(e.chunks.length>1?"s":""),files:e.chunks})},e);return(0,ey.jsx)(ew.RichTask,{...e,Icon:eb.MagnifyingGlassSmall,renderedParts:t,children:(0,ey.jsx)(ew.TaskName,{...e,textActive:"Searching file",textComplete:"Searched file"})})}var eS=_,eN=F,eE=V,eM=B,eI=z,eD=H,eT=U,eA=q,eL=W,eP=O;function eR(e){let{isFirst:t,isLast:n,part:r,messageId:i,isConsecutiveAssistantPart:a,isLastMessage:o}=e,s=e$()&&n;(0,L.useMaybeUpdateTodoList)(r,i),(0,P.useMaybeUpdateLoader)(r,s);let l=(0,R.useMemo)(()=>{if(!r)return(0,T.jsx)("div",{children:"Error parsing part"});let e={isActive:s,isFirst:t,isLast:n,messageId:i,isLastMessage:o};switch(r.type){case"task-start-v1":return null;case"task-search-web-v1":return(0,T.jsx)(eL.SearchWebV1,{...r,...e});case"task-fetch-from-web-v1":return(0,T.jsx)(eE.FetchFromWebV1,{...r,...e});case"task-search-repo-v1":return(0,T.jsx)(eA.SearchRepoV1,{...r,...e});case"task-thinking-v1":return(0,T.jsx)(eo,{...r,...e});case"task-diagnostics-v1":return(0,T.jsx)(eN.DiagnosticsV1,{...r,...e});case"task-run-shell-command-v1":return(0,T.jsx)(eT.RunShellCommandV1,{...r,...e});case"task-manage-todos-v1":return(0,T.jsx)(ed,{...r,...e});case"task-read-files-v1":return(0,T.jsx)(eD.ReadFilesV1,{...r,...e});case"task-stopped-v1":return(0,T.jsx)(ex,{...r,...e});case"task-inspect-site-v1":return(0,T.jsx)(eI.InspectSiteV1,{...r,...e});case"task-generate-design-inspiration-v1":return(0,T.jsx)(eM.GenerateDesignInspirationV1,{...r,...e});case"task-get-or-request-integration-v1":return(0,T.jsx)(eS.GetOrRequestIntegrationV1,{...r,...e});case"task-coding-v1":return(0,T.jsx)(eP.CodingV1,{...r,...e});case"task-read-file-v1":return(0,T.jsx)(ek,{...r,...e});case"task-repaired-parser-content-v1":return(0,T.jsx)("div",{children:"Error parsing part"});default:return r}},[s,t,n,o,i,r]);return(0,T.jsxs)(T.Fragment,{children:[a&&l?(0,T.jsx)(A.ConsecutiveTimelineLine,{animate:s}):null,l]})}var e_=eC,eO=A,eF=e.i(403055),eV=e.i(865408),eB=e.i(242759);let ez=(0,a.default)(()=>e.A(752282).then(e=>e.InlineMath)),eH=(0,a.default)(()=>e.A(752282).then(e=>e.BlockMath)),eU=(0,a.default)(()=>e.A(524582).then(e=>e.Mermaid),{loadableGenerated:{modules:[537684]}}),eq=(0,a.default)(()=>e.A(688269).then(e=>e.Table),{loadableGenerated:{modules:[20068]}}),eW="\0",eZ=String.fromCharCode(65535);function eG(e,t){if(void 0===e)return e;let n=e+eW;for(;;)if(t>=65535)n+=eZ,t-=65535;else{n+=String.fromCharCode(t+1);break}return n}let eK=n.default.memo(eQ),eX=n.default.createContext(!1),e$=()=>n.default.use(eX),eY=n.default.createContext(!1),eJ=()=>n.default.use(eY);function eQ(e){let n,{messageId:r,role:i,streaming:a,rows:o,isLastMessage:s=!1,v3:l=!1}=e,{authorId:u,from:d}=(0,f.useChatMetadata)(),{user:m}=(0,p.useUser)(),g=!1,v=[],x=o.map((e,n)=>{let[o,c]=e,u=eG("",n);return 0===o?(g=!0,(0,t.jsx)(eY.Provider,{value:l,children:(0,t.jsx)(eX.Provider,{value:a||!1,children:(0,t.jsx)(e0,{data:c,id:u,messageId:r,chatOrigin:d,isLastMessage:s})})},u)):(1===o&&"assistant"===i&&c.context&&Array.isArray(c.context)&&c.context.length>0&&(v=c.context),null)});if(!g)if(0===v.length)return null;else n=(0,t.jsx)(h.CitationsCarousel,{urls:v.map(e=>{let{url:t}=e;return t})});let y=(0,t.jsxs)(t.Fragment,{children:[n,x]});return"assistant"===i?(0,t.jsx)(c.SegmenterProvider,{messageId:r,readonly:!!u&&(null==m?void 0:m.id)!==u,streaming:a,children:y}):y}function e0(e){let{data:n,id:r,messageId:i,isLastMessage:a}=e;return n.map((e,o)=>{var s,l;let c=eG(r,o),u=!1;return u=(0,e_.getIsConsecutiveAssistantPart)(e,o,n),(0,t.jsx)(e1,{data:e,id:e[0]===D.AssistantMessagePartTagName?null==(s=e[1])?void 0:s.id:c,isFirst:0===o,isLast:o===n.length-1,index:o,messageId:i,isLastMessage:a,isConsecutiveAssistantPart:u},e[0]===D.AssistantMessagePartTagName?null==(l=e[1])?void 0:l.id:c)})}function e1(e){let{data:a,id:p,index:h,messageId:f,isFirst:b,isLast:T,isLastMessage:A,isConsecutiveAssistantPart:L}=e,{age:P}=(0,eB.useFlags)(),R=(0,c.useRegister)({id:p,content:"string"==typeof a?a:void 0,type:"string"==typeof a?"text":a[0],props:"string"==typeof a?{}:a[1]}),_="string"!=typeof a&&"Codeblock"===a[0]&&a[1].blockId?a[1].source:void 0;if("string"==typeof a)return a;let[O,F,...V]=a;if(void 0===O)return null;let B=(0,t.jsx)(e0,{data:V,id:p,messageId:f,isLastMessage:A});switch(O){case"text":return(0,t.jsx)("span",{...R.elementProps,children:B});case"span":case"p":case"blockquote":case"strong":case"em":case"del":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":case"ul":case"ol":case"li":let z=O;return(0,t.jsx)(z,{...R.elementProps,...F,children:B});case"code":if(1===V.length&&"string"==typeof V[0]&&(0,x.isColorCode)(V[0]))return(0,t.jsx)(x.ColorCode,{...R.elementProps,value:V[0]});return(0,t.jsx)("code",{...R.elementProps,className:"rounded-[0.375rem] border bg-gray-100 px-1 py-[0.15rem] font-mono text-xs font-normal before:hidden after:hidden",...F,children:B});case"a":let H=F.href;if("string"==typeof H&&H.startsWith("/"))return(0,t.jsx)("span",{...R.elementProps,children:B});if("string"==typeof H&&H.startsWith("#"))return(0,t.jsx)("a",{...R.elementProps,className:"font-normal text-blue-600 no-underline decoration-from-font underline-offset-2 transition-colors hover:text-blue-600",href:H,children:B});return(0,t.jsxs)("a",{...R.elementProps,className:"font-normal text-blue-600 no-underline decoration-from-font underline-offset-2 transition-colors hover:text-blue-600",href:F.href||"#",rel:"noopener noreferrer",target:"_blank",children:[B,(0,t.jsx)(u.External,{className:"mb-0.5 ml-0.5 inline h-3 w-3"})]});case"img":{let{style:e,...n}={...R.elementProps,...F};return(0,t.jsx)("img",{...n,className:"rounded-xl"})}case"hr":return(0,t.jsx)("hr",{...R.elementProps});case"table":return(0,t.jsx)("table",{...R.elementProps,className:"table-fixed",children:B});case"tr":return(0,t.jsx)("tr",{...R.elementProps,children:B});case"td":return(0,t.jsx)("td",{...R.elementProps,children:B});case"th":return(0,t.jsx)("th",{...R.elementProps,children:B});case"thead":return(0,t.jsx)("thead",{...R.elementProps,children:B});case"tbody":return(0,t.jsx)("tbody",{...R.elementProps,children:B});case"Codeblock":let U=_||V.join("");if(F.blockId&&F.meta.type&&!C.INLINE_BLOCK_TYPES.includes(F.meta.type))return(0,t.jsxs)("div",{className:"flex flex-col",children:[L?(0,t.jsx)(eO.TimelineLine,{}):null,(0,t.jsx)("div",{className:(0,eF.cn)("block-preview flex flex-col gap-3",L?"not-last:mb-4":""),...R.elementProps,children:(0,t.jsx)(l.RenderBlockPreview,{blockId:F.blockId,closed:F.closed,language:F.lang,remoteInfo:F.remoteInfo,messageId:f,meta:F.meta,resultId:F.resultId,source:U,type:F.meta.type,latestDeploymentInfo:F.latestDeploymentInfo},F.blockId)})]});if(!U)return(0,t.jsx)("div",{...R.elementProps});switch(F.lang){case"mermaid":return(0,t.jsx)("div",{...R.elementProps,children:(0,t.jsx)(n.Suspense,{fallback:null,children:(0,t.jsx)(eU,{source:U,title:F.meta.title})})});case"math":return(0,t.jsx)("div",{...R.elementProps,children:(0,t.jsx)(eH,{math:U})});case"csv":return(0,t.jsx)("div",{...R.elementProps,children:(0,t.jsx)(n.Suspense,{fallback:(0,t.jsx)(o.LoadingCard,{title:"Loading table..."}),children:(0,t.jsx)(eq,{source:U})})});case"toolcall":return(0,t.jsx)("div",{...R.elementProps,children:(0,t.jsx)(g.Toolcall,{source:U})});default:return(0,t.jsx)("div",{...R.elementProps,children:(0,t.jsx)(s.SyntaxHighlighter,{language:F.lang,blockId:F.blockId,closed:F.closed,sqlExecutionState:F.meta.sqlExecutionState,transaction:F.meta.transaction,type:F.meta.type,fileName:F.meta.name,children:U})})}case"InlineMath":return(0,t.jsx)("span",{...R.elementProps,children:(0,t.jsx)(ez,{math:V.join("")})});case"Math":return(0,t.jsx)("span",{...R.elementProps,children:(0,t.jsx)(eH,{math:V.join("")})});case"LinearProcessFlow":case"Steps":return(0,t.jsx)("div",{...R.elementProps,children:(0,t.jsx)(i.Steps,{children:B})});case"Thinking":case"DevThinking":case"V0Info":return(0,t.jsx)(e2,{closed:F.closed,chars:F.chars,elementProps:R.elementProps,children:B});case"Solution":case"footnoteDefinition":return null;case"Quiz":return(0,t.jsx)("div",{...R.elementProps,children:(0,t.jsx)(r.Quiz,{...F,children:B})});case"V0LoadingImage":return T?(0,t.jsx)(E.LoadingImage,{}):null;case"Spinner":let q=null,W=F.message||"Generating...";return W.toLowerCase().includes("search")||W.toLowerCase().startsWith("added")?q=null:h>0&&(q=(0,t.jsx)(m.Spinner,{})),(0,t.jsx)("div",{...R.elementProps,children:(0,t.jsx)(e5,{isLast:T,icon:q,message:W})});case"MathInstructions":case"MathBlock":return(0,t.jsx)("div",{...R.elementProps,children:B});case"footnoteReference":return(0,t.jsx)("span",{...R.elementProps,children:(0,t.jsx)(d.Reference,{idPrefix:"cite-".concat(f,"-"),label:F.label})});case"AddEnvironmentVariables":case"AddEnvironmentVariable":return(0,t.jsx)(v.default,{names:F.names,messageId:f});case"ToolExecutionCardLoading":return(0,t.jsx)(I.ToolExecutionCard,{...F,status:"loading",isLast:T});case"ToolExecution":case"ToolExecutionCard":return(0,t.jsx)(I.ToolExecutionCard,{status:"success",...F});case D.AssistantMessagePartTagName:return(0,t.jsx)(eR,{...F,closed:F.closed,isFirst:b,isLastMessage:A,isLast:T,messageId:f,isConsecutiveAssistantPart:L});case"AddIntegration":return(0,t.jsx)(w.default,{category:F.category,namesProp:F.names,messageId:f,starter:F.starter});case"StepsCard":let Z={steps:F.steps,messageId:f,isLastMessage:A};if(P)return(0,t.jsx)(eV.RichAssistantStepsCard,{steps:F.steps,messageId:f,preventRenderSkipOrContinue:!0});return(0,t.jsx)(N.StepsCard,{...Z});case"OpenExternalDashboard":return(0,t.jsx)(k.default,{integration:F.integration});case"SuggestedNextSteps":return A?(0,t.jsx)(j.SuggestedNextSteps,{options:F.options}):null;case"LoadingLighthouse":return T?(0,t.jsx)("div",{...R.elementProps,children:(0,t.jsx)(y.LighthouseReportLoading,{})}):null;case"Lighthouse":case"LighthouseReport":return(0,t.jsx)("div",{...R.elementProps,children:(0,t.jsx)(y.default,{...F})});case"TraceAnalysis":case"TraceAnalysisReport":return(0,t.jsx)("div",{...R.elementProps,children:(0,t.jsx)(M.TraceAnalysisReport,{...F})});case"TraceAnalysisStatus":return(0,t.jsx)("div",{...R.elementProps,children:(0,t.jsx)(M.TraceAnalysisStatus,{...F,isLast:T})});case"TraceAnalysisError":return(0,t.jsx)("div",{...R.elementProps,children:(0,t.jsx)(M.TraceAnalysisError,{...F})});case"br":return(0,t.jsx)("br",{...R.elementProps});case"Action":return(0,t.jsx)(S.SuggestedAction,{name:F.name,elementProps:R.elementProps,description:F.description,messageId:f});case"Actions":if(!A)return null;return(0,t.jsx)(S.SuggestedActions,{elementProps:R.elementProps,isLast:T,messageId:f,children:B});default:return(0,t.jsxs)("div",{...R.elementProps,children:[(0,t.jsx)("h5",{children:"<".concat(O,">")}),B,(0,t.jsx)("h5",{children:"</".concat(O,">")})]})}}function e2(e){let{closed:n,chars:r,elementProps:i,children:a=null}=e,o=e$();return(0,t.jsx)(b.ThinkingTime,{isLoading:void 0===n&&!!o||!n,seconds:r?r/170:void 0,children:(0,t.jsx)("div",{...i,className:"[&>p:first-child]:mt-0 [&>p:last-child]:mb-0",children:a})})}function e5(e){let{isLast:n,icon:r,message:i}=e,a=e$();return n&&a?(0,t.jsxs)("div",{className:"flex items-center justify-start gap-2",children:[r,(0,t.jsx)("span",{className:"animate-pulse",children:i})]}):null}function e4(e){try{let t=null==e?void 0:e[0][1],n=t[t.length-1],r=n[0],i=n[1].part;if(r!==D.AssistantMessagePartTagName||"task-stopped-v1"!==i.type)return!1;return 1===i.parts.length&&"out-of-credits"===i.parts[0].type}catch(e){return!1}}function e3(e){try{let t=null==e?void 0:e[0][1],n=t[t.length-1],r=n[0],i=n[1].part;if(r!==D.AssistantMessagePartTagName||"task-diagnostics-v1"!==i.type)return!1;return 1===i.parts.length&&"fetching-diagnostics"===i.parts[0].type}catch(e){return!1}}function e7(e,t,n){let r=[];if(!e||"message-binary-format"!==e.type||!Array.isArray(e.value)||!e.value.length)return r;function i(e,i){if(e!==D.AssistantMessagePartTagName)return;let a=i.part;if("task-coding-v1"!==a.type)return;let o=a.parts[0];"code-project"===o.type&&(o.isVersioned||(null==n?void 0:n.includeNonVersionedBlocks))&&r.push({id:o.blockId,meta:o.meta,remoteInfo:void 0,type:o.type,messageId:t,source:o.source,language:o.lang,lastEditedAt:o.lastEditedAt,lastDeployedAt:o.lastDeployedAt,closed:!!o.closed,createdAt:void 0,latestDeploymentInfo:void 0,forkedFromBlockId:void 0,needsBlockSource:o.needsBlockSource,sourceVersionKey:o.sourceVersionKey})}function a(e,n,i){if("Codeblock"!==e||!n.meta.type)return null;let a=i.join(""),o=n.blockId;if(!o)return null;r.push({id:o,meta:n.meta,type:n.meta.type,messageId:t,source:n.source||a,language:n.lang,resultId:n.resultId,remoteInfo:n.remoteInfo,lastEditedAt:n.lastEditedAt,lastDeployedAt:n.lastDeployedAt,closed:void 0!==n.closed&&!!n.closed,createdAt:n.createdAt,latestDeploymentInfo:void 0,forkedFromBlockId:void 0,needsBlockSource:n.needsBlockSource||!1,sourceVersionKey:n.sourceVersionKey})}if(0===e.value[0][0])for(let t of e.value[0][1])e8(t,e=>{let[t,n,...r]=e;i(t,n),a(t,n,r)});return r}function e9(e){return e&&0===e[0]?"markdown":e&&1===e[0]?"metadata":void 0}function e6(e){var t;let n,r,i,a,o,s,l,c=[],u="",d=null==(t=e.find(e=>"metadata"===e9(e)))?void 0:t[1];return d&&("context"in d&&void 0!==d.context&&Array.isArray(d.context)&&(c=d.context),"title"in d&&"string"==typeof d.title&&(u=d.title),"finishReason"in d&&(n=d.finishReason),"usage"in d&&(r=d.usage),"loadingText"in d&&"string"==typeof d.loadingText&&(l=d.loadingText),"relevantFiles"in d&&Array.isArray(d.relevantFiles)&&(a=d.relevantFiles),"grepQueries"in d&&Array.isArray(d.grepQueries)&&(o=d.grepQueries),"notifications"in d&&Array.isArray(d.notifications)&&(s=d.notifications),"modelId"in d&&(i=d.modelId)),{docsContext:c,loadingText:l,title:u,modelId:i,finishReason:n,relevantFiles:a,grepQueries:o,notifications:s,usage:r}}function e8(e,t){if(Array.isArray(e)){let[n,r,...i]=e;"string"==typeof n&&t(e),i.map(e=>e8(e,t))}}},449381,e=>{"use strict";e.s(["assertBlockId",()=>l,"useActiveBlockState",()=>c,"useActiveBlockView",()=>u,"useCloseActiveBlock",()=>h,"useSetActiveBlockState",()=>d,"useSetActiveBlockView",()=>p]);var t=e.i(818273),n=e.i(175787),r=e.i(92479),i=e.i(200407),a=e.i(346970),o=e.i(391795),s=e.i(301331);function l(e){return null!=e?e:"_no_block_"}function c(e){let{chatId:t}=(0,r.useChatId)(),{data:n}=(0,a.default)(["active-block",null!=e?e:t]);return n}function u(){let{chatId:e}=(0,r.useChatId)(),{data:t}=(0,a.default)(["block-view",e]);return!!t}function d(){let{chatId:e}=(0,r.useChatId)(),{mutate:t}=(0,o.useSWRConfig)(),{ensureBlockSource:n}=(0,s.useBlockSource)();return(0,i.useCallback)(r=>{(null==r?void 0:r.id)&&n(r.id),t(["active-block",e],null!=r?r:null,!1)},[e,t,n])}function p(){let{chatId:e}=(0,r.useChatId)(),{mutate:t}=(0,o.useSWRConfig)();return(0,i.useCallback)((n,r)=>{n?t(["active-block",e],r,!1):t(["active-block",e],null,!1),t(["block-view",e],n,!1)},[e,t])}function h(){let{messages:e}=(0,r.useChatMessages)(),a=c(),o=p(),{ensureBlockSource:l}=(0,s.useBlockSource)();return(0,i.useCallback)((r,i)=>{if(!a)return;let s=()=>{let n;if(!i)return void o(!1);let r=-1;for(let a of e.map(e=>{var n;return(0,t.getBlocksFromState)(null!=(n=e.content)?n:"",e.id)}).flat()){if(!a)continue;let e=i.findIndex(e=>e===a.messageId);e>-1&&e>=r&&(r=e,n=a)}if(!n)return void o(!1);l(n.id),o(!0,n)};return r?r===a.messageId?void s():void(new Set((0,n.getChildMessageIds)(e.map(e=>({...e,messageId:e.id})),r)).has(a.messageId)&&s()):void o(!1)},[a,e,o])}}]);